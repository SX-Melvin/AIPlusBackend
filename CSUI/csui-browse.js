csui.define("csui/behaviors/item.name/impl/nls/lang", {
  root: !0,
  "en-us": !1,
  en: !1,
}),
  csui.define("csui/behaviors/item.name/impl/nls/root/lang", {
    nameErrorEmptyValue: "This is a required field.",
    nameErrorMaxLegthExceed: "Name cannot be longer than 248 characters.",
    nameErrorContainSemiColon: "Name cannot contain a colon.",
    error: "Unable to complete this request. Please try again later.",
    nameExists: "An item with the name '{name}' already exists.",
    renameTitle: "Rename",
    addFolderTitle: "Add folder",
  }),
  csui.define(
    "csui/behaviors/item.name/item.name.behavior",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/models/version",
      "csui/models/namequery",
      "csui/utils/commands",
      "i18n!csui/behaviors/item.name/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = h.Behavior.extend({
        ui: { inputName: ".title-input", saveButton: ".cs-add-button" },
        events: {
          "click @ui.name": "onClickName",
          "click @ui.nameInput": "cancelEvent",
          "keyup @ui.nameInput": "onKeyReleased",
          "paste @ui.inputName": "mouseRightCicked",
          "cut @ui.inputName": "mouseRightCicked",
          "click @ui.nameEditCancelIcon": "cancelNameEdit",
          "click @ui.nameEditDiv": "cancelEvent",
          "click @ui.saveButtonInEditMode": "saveInput",
          "blur @ui.nameInput": "saveInputOnFocusOut",
        },
        constructor: function (s, o) {
          h.Behavior.prototype.constructor.apply(this, arguments),
            (this._nameSchema = d.extend(
              { required: !0, readonly: !1 },
              this.options.nameSchema,
              o.options.nameSchema
            )),
            (this.view = o),
            (this.view.ItemNameBehavior = this),
            (this.view.readonly = this._nameSchema.readonly),
            (this.autoSave = this.options.autoSave),
            this.listenTo(
              this.view.model || this.view.options.model,
              "change:name",
              this.toggleButton
            );
        },
        updateNameSchema: function (n) {
          (this._nameSchema = d.extend({ required: !0, readonly: !1 }, n)),
            this.toggleButton();
        },
        toggleButton: function (n) {
          if (!(!this.ui || !this.ui.inputName || !this.ui.inputName.val)) {
            var s = this.ui.inputName.val().trim(),
              o = !0;
            (!this._isEditMode() || this._isCopyMoveAction()) &&
              ((o = this._nameSchema.required && s.length == 0),
              this.view.trigger("update:button", { disabled: o }));
          }
        },
        _isEditMode: function () {
          return this.view.model.get("id") !== void 0;
        },
        _isCopyMoveAction: function () {
          return this.view.model.get("action") === "copy" || "move";
        },
        mouseRightCicked: function (n) {
          var s = this;
          setTimeout(function () {
            s.toggleButton(n);
          }, 100);
        },
        onBeforeDestroy: function () {
          this.view._nodeIconView && this.view._nodeIconView.destroy(),
            this.view.dropdownMenuView &&
              (this.view.cancelEventsToViewsPropagation(
                this.view.dropdownMenuView
              ),
              this.view.dropdownMenuView.destroy());
        },
        onKeyInView: function (n) {
          if (!this.view.readonly) {
            var s = n || window.event;
            if (
              s.keyCode === 9 &&
              this.getInputBoxValue() === "" &&
              this.autoSave
            ) {
              s.preventDefault(),
                s.stopPropagation(),
                this.validate(""),
                this.view.tabableElements && this.view._moveTab(s);
              return;
            } else if (s.keyCode === 9 && this.view.editing) {
              this.view.tabableElements && this.view._moveTab(s);
              return;
            }
            if (s.keyCode === 27) {
              this.cancelNameEdit(s);
              return;
            }
            if (s.keyCode === 32 || s.keyCode === 13) {
              var o = !!(
                  this.view.dropdownMenuView &&
                  this.view.dropdownMenuView.$el.find(s.target).length > 0
                ),
                c = s.keyCode === 13 ? 200 : 0,
                m = s.target || s.srcElement;
              o
                ? (s.preventDefault(),
                  s.stopPropagation(),
                  i.isMozilla() || i.isEdge()
                    ? v(m).trigger("click")
                    : setTimeout(function () {
                        v(m).trigger("click");
                      }, c))
                : this.view.editing !== !0 &&
                  (s.preventDefault(),
                  s.stopPropagation(),
                  setTimeout(
                    d.bind(function () {
                      this._toggleEditMode(!0);
                    }, this),
                    c
                  ));
            }
          }
        },
        setEditModeFocus: function () {
          this.view.readonly ||
            setTimeout(
              d.bind(function () {
                this.view.ui.nameInput instanceof Object &&
                  (this._toggleEditMode(!0),
                  this.view.ui.nameInput.trigger("focus"),
                  this.view.ui.nameInput[0].select());
              }, this),
              500
            );
        },
        showInlineError: function (n) {
          this.view.ui.titleError.text(n),
            this.view.ui.titleError.attr("role", "alert"),
            this.view.ui.titleError.addClass("visible"),
            this.view.ui.nameInput.addClass("csui-red-border"),
            this.view.ui.nameInput[0].setAttribute("aria-invalid", !0),
            this.view.ui.saveButtonInEditMode.prop("disabled", !0),
            this.view.trigger("metadata:item:name:error");
        },
        clearInlineError: function () {
          this.view.ui.titleError.text(""),
            this.view.ui.titleError.removeAttr("role"),
            this.view.ui.titleError.removeClass("visible"),
            this.view.ui.nameInput.removeClass("csui-red-border"),
            this.view.ui.nameInput[0].setAttribute("aria-invalid", !1),
            this.view.trigger("metadata:item:name:error");
        },
        validateInputName: function (n) {
          var s = v.Deferred(),
            o = !0;
          if (this.view.readonly) return this.clearInlineError(), !0;
          var c = n === void 0 ? this.getValue() : n;
          c = c.trim();
          var m = this;
          return (
            this._isValidName(c)
              .done(function (f) {
                f
                  ? (m._displayInlineError(c, f), (o = !1), s.resolve(o))
                  : (m.clearInlineError(), s.resolve(o));
              })
              .fail(function () {
                s.reject();
              }),
            s.promise()
          );
        },
        validate: function (n) {
          if (this.view.readonly) return this.clearInlineError(), !0;
          var s = n === void 0 ? this.getValue() : n;
          return (
            (s = s.trim()),
            s.length < 1
              ? (this.showInlineError(r.nameErrorEmptyValue), !1)
              : s.length > 248
              ? (this.showInlineError(r.nameErrorMaxLegthExceed), !1)
              : s.indexOf(":") >= 0
              ? (this.showInlineError(r.nameErrorContainSemiColon), !1)
              : (this.clearInlineError(), !0)
          );
        },
        _isValidName: function (n) {
          var s = !0,
            o = v.Deferred();
          if (n && n.length <= 248 && n.indexOf(":") === -1) {
            var c = this.view.model,
              m = c.parent || this.view.options.container;
            return (
              m && (!m.get("id") || m.get("id") === -1)
                ? o.resolve(!1)
                : this.checkNameExists(n)
                    .done(function (f, g, w) {
                      f.results[0].id === null && (s = !1), o.resolve(s);
                    })
                    .fail(o.reject),
              o.promise()
            );
          }
          return o.resolve(s), o.promise();
        },
        checkNameExists: function (n) {
          var s = this.view.model,
            o = s.parent || this.view.options.container,
            c = o.connector,
            m = v.Deferred(),
            f = new l(null, { container: o, connector: c });
          return (
            f.runQuery(o.get("id"), [n]).done(m.resolve).fail(m.reject),
            m.promise()
          );
        },
        _displayInlineError: function (n, s) {
          var o;
          n.length < 1
            ? (o = r.nameErrorEmptyValue)
            : n.length > 248
            ? (o = r.nameErrorMaxLegthExceed)
            : n.indexOf(":") !== -1
            ? (o = r.nameErrorContainSemiColon)
            : s && (o = r.nameExists.replace("{name}", n)),
            this.showInlineError(o);
        },
        getValue: function () {
          return this.view.ui.name.text().trim();
        },
        getInputBoxValue: function () {
          return this.view.modelHasEmptyName &&
            this.view.inputBoxNameChange !== !0
            ? ""
            : this.view.ui.nameInput.val();
        },
        setValue: function (n) {
          this.view.ui.name.text(n), this.view.ui.name.attr("title", n);
        },
        setInputBoxValue: function (n) {
          n || (n = ""), this.view.ui.nameInput.val(n);
        },
        _toggleEditMode: function (n, s) {
          s === void 0 && (s = !0), this.view.readonly && (n = !1);
          var o = this.view.model.get("name_multilingual");
          if ((n && o && (this.view.prevMultilingualVal = d.clone(o)), n)) {
            if (this._isEditingEnabled()) {
              (this.view.editing = !0),
                this.view.ui.name.addClass("binf-hidden"),
                this.view.ui.contextMenuDiv &&
                  this.view.ui.contextMenuDiv.addClass("binf-hidden"),
                this.view.ui.nameEditDiv.removeClass("binf-hidden"),
                (!this.autoSave ||
                  this.view.$el.find(".csui-multilingual-icon").length) &&
                  this.view.refreshTabableElements &&
                  this.view.refreshTabableElements(),
                s && this.view.ui.nameInput.trigger("focus");
              var c = this.view.ui.nameInput[0],
                m = c.value,
                f = m ? m.length : 0;
              (c.selectionEnd = 0),
                this.view.model.get("type") === 144 &&
                  m.lastIndexOf(".") > 0 &&
                  m.lastIndexOf(".") < m.length - 1 &&
                  (f = m.lastIndexOf(".")),
                (c.selectionEnd = f),
                m.length === 0 &&
                  (this.view.ui.nameInput[0].placeholder =
                    this.view.placeHolderName),
                this.view.trigger("changed:editmode", this.view.editing),
                this.view &&
                  d.isFunction(this.view._openMLFlyoutInEditMode) &&
                  this.view._openMLFlyoutInEditMode();
            }
          } else
            this.view.$el.is(":visible") &&
              ((this.view.editing = !1),
              this.view.ui.nameEditDiv.addClass("binf-hidden"),
              this.view.ui.name.removeClass("binf-hidden"),
              (this.view.nameEditDivIgnoreBlurOnce = !0),
              s && this.view.ui.name.trigger("focus"),
              this.view.ui.contextMenuDiv &&
                this.view.ui.contextMenuDiv.removeClass("binf-hidden"),
              this.view.trigger("changed:editmode", this.view.editing));
        },
        _isEditing: function () {
          return this.view.editing;
        },
        _isEditingEnabled: function () {
          if (this.view.readonly) return !1;
          if (this.view.model.get("id") === void 0) return !0;
          var n = u.get("Rename");
          return (
            n &&
            n.enabled({
              nodes: new a.Collection([this.view.model]),
              context: this.view.options.context,
            })
          );
        },
        onClickName: function (n) {
          this.view.readonly ||
            (n.preventDefault(),
            n.stopPropagation(),
            !(this.view.options.model instanceof e) &&
              this._toggleEditMode(!0));
        },
        cancelEvent: function (n) {
          n.preventDefault(), n.stopPropagation();
        },
        isSaveEnabled: function (n) {
          return !(!n.length || n.trim() === this.view.model.get("name"));
        },
        onKeyReleased: function (n) {
          this.view.readonly ||
            ((this.view.options && this.view.options.mode === "create") ||
              (n.preventDefault(),
              n.stopPropagation(),
              n.keyCode === 27
                ? this.cancelNameEdit(n)
                : n.keyCode === 13 && this.isSaveEnabled(n.target.value)
                ? this.view.options.originatingView &&
                  d.isFunction(
                    this.view.options.originatingView._validateAndSave
                  )
                  ? this.view.options.originatingView._validateAndSave()
                  : this.view._validateAndSave()
                : this.getInputBoxValue() === "" &&
                  ((this.view.ui.nameInput[0].placeholder = this.view
                    .placeHolderName
                    ? this.view.placeHolderName
                    : ""),
                  (this.view.inputBoxNameChange = !1))),
            this.toggleButton(n));
        },
        saveInput: function (n) {
          if (
            (n && n.preventDefault(),
            n && n.stopPropagation(),
            this.view.cancelEdit === !0)
          ) {
            this.view.cancelEdit = !1;
            return;
          }
          if (this.view.nameEditDivIgnoreBlurOnce === !0 && this.autoSave) {
            this.view.nameEditDivIgnoreBlurOnce = !1;
            return;
          }
          this.view.modelHasEmptyName && this.view.inputBoxNameChange !== !0
            ? (this.setInputBoxValue(this.placeHolderName), this.validate(""))
            : this.view.options.originatingView &&
              d.isFunction(this.view.options.originatingView._validateAndSave)
            ? this.view.options.originatingView._validateAndSave()
            : this.view._validateAndSave();
        },
        saveInputOnFocusOut: function (n) {
          this.view.readonly || !this.autoSave || this.saveInput(n);
        },
        cancelNameEdit: function (n) {
          this.view.readonly ||
            (n.preventDefault(),
            n.stopPropagation(),
            (this.cancelEdit = !0),
            this.clearInlineError(),
            this.view.enableAddButton &&
              this.view.ui.saveButtonInEditMode.prop("disabled", !0),
            (this.view.inputBoxNameChange = !this.view.modelHasEmptyName),
            this.view.modelHasEmptyName && this.view.inputBoxNameChange !== !0
              ? (this.setInputBoxValue(""),
                this.validate(""),
                this.toggleButton(n))
              : (this.setInputBoxValue(this.getValue()),
                this._toggleEditMode(!1),
                this.toggleButton()),
            this.view.prevMultilingualVal &&
              this.view.model.set(
                "name_multilingual",
                this.view.prevMultilingualVal
              ));
        },
        _getErrorMessageFromResponse: function (n) {
          var s;
          if (n && n.responseJSON && n.responseJSON.error)
            (s = n.responseJSON.error),
              i.MessageHelper.hasMessages() && i.MessageHelper.reset();
          else if (i.MessageHelper.hasMessages()) {
            var o = i.MessageHelper.toHtml();
            i.MessageHelper.reset(), (s = v(o).text());
          }
          return s;
        },
      });
      return t;
    }
  ),
  csui.define(
    "hbs!csui/controls/table.rowselection.toolbar/impl/right.toolbar",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-condensed-header-toggle-container">
    <button type="button" class="csui-condensed-header-toggle"
            title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toggleCondensedHeaderTooltip") ||
                  (e != null ? n(e, "toggleCondensedHeaderTooltip") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toggleCondensedHeaderTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 19 },
                      end: { line: 4, column: 51 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toggleCondensedHeaderAria") ||
                  (e != null ? n(e, "toggleCondensedHeaderAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toggleCondensedHeaderAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 65 },
                      end: { line: 4, column: 94 },
                    },
                  })
                : t)
            ) +
            `">
      <span class="icon icon-condensed-header"></span>
    </button>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "showCondensedHeaderToggle") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 8, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table.rowselection.toolbar_impl_right.toolbar",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/table.rowselection.toolbar/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/table.rowselection.toolbar/impl/nls/root/localized.strings",
    {
      showCondensedHeaderTooltip: "Show header",
      showCondensedHeaderAria: "Show table header",
      hideCondensedHeaderTooltip: "Hide header",
      hideCondensedHeaderAria: "Hide table header",
    }
  ),
  csui.define(
    "css!csui/controls/table.rowselection.toolbar/impl/right.toolbar",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table.rowselection.toolbar/impl/right.toolbar.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/controls/table.rowselection.toolbar/impl/right.toolbar",
      "i18n!csui/controls/table.rowselection.toolbar/impl/nls/localized.strings",
      "css!csui/controls/table.rowselection.toolbar/impl/right.toolbar",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
        className: "csui-right-toolbar-view",
        template: e,
        templateHelpers: function () {
          return {
            showCondensedHeaderToggle: this.options.showCondensedHeaderToggle,
            toggleCondensedHeaderTooltip: l.showCondensedHeaderTooltip,
            toggleCondensedHeaderAria: l.showCondensedHeaderAria,
          };
        },
        behaviors: { TabableRegion: { behaviorClass: i } },
        ui: {
          condensedHeaderToggleButton: ".csui-condensed-header-toggle",
          condensedHeaderToggleIcon: ".icon-condensed-header",
        },
        events: {
          keydown: "onKeyInView",
          keyup: "keyUpHandler",
          "click .csui-condensed-header-toggle-container":
            "onClickCondensedHeaderToggle",
        },
        constructor: function (t) {
          t || (t = {}),
            a.ItemView.prototype.constructor.call(this, t),
            (this._toolbarVisible = !1);
        },
        onRender: function () {
          this.delegateEvents();
        },
        onToolbarActivity: function (r, t) {
          (this._toolbarVisible = r),
            this.options.showCondensedHeaderToggle &&
              this.ui.condensedHeaderToggleButton.length === 1 &&
              (this.ui.condensedHeaderToggleButton.attr(
                "tabindex",
                r ? "0" : "-1"
              ),
              t
                ? (this.ui.condensedHeaderToggleIcon.addClass("icon-rotate180"),
                  this.ui.condensedHeaderToggleButton.attr(
                    "aria-label",
                    l.hideCondensedHeaderAria
                  ),
                  this.ui.condensedHeaderToggleButton.attr(
                    "title",
                    l.hideCondensedHeaderTooltip
                  ))
                : (this.ui.condensedHeaderToggleIcon.removeClass(
                    "icon-rotate180"
                  ),
                  this.ui.condensedHeaderToggleButton.attr(
                    "aria-label",
                    l.showCondensedHeaderAria
                  ),
                  this.ui.condensedHeaderToggleButton.attr(
                    "title",
                    l.showCondensedHeaderTooltip
                  )));
        },
        onClickCondensedHeaderToggle: function (r) {
          this.trigger("toggle:condensed:header"),
            this.ui.condensedHeaderToggleButton.trigger("focus");
        },
        currentlyFocusedElement: function () {
          return this._toolbarVisible
            ? this.ui.condensedHeaderToggleButton
            : d();
        },
        onKeyInView: function (r) {
          (r.keyCode === 32 || r.keyCode === 13) &&
            (r.preventDefault(),
            r.stopPropagation(),
            d(r.target).trigger("click"));
        },
        keyUpHandler: function (r) {
          var t = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
          r.keyCode == 32 && t && (r.stopPropagation(), r.preventDefault());
        },
      });
      return v.extend(u.prototype, h), u;
    }
  ),
  csui.define(
    "hbs!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-selected-items-counter-region"></div>
<div class="csui-toolbar-region"></div>
<div class="csui-right-toolbar-region"></div>
`;
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table.rowselection.toolbar_impl_table.rowselection.toolbar",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/controls/toolbar/toolbar.view",
      "csui/controls/toolbar/delayed.toolbar.view",
      "csui/controls/table.rowselection.toolbar/impl/right.toolbar.view",
      "csui/controls/selected.count/selected.count.control.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/mixins/global.alert/global.alert.mixin",
      "hbs!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",
      "css!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = h.LayoutView.extend({
        template: o,
        className: "csui-table-rowselection-toolbar-view",
        regions: {
          toolbarRegion: ".csui-toolbar-region",
          rightToolbarRegion: ".csui-right-toolbar-region",
          selectedItemsCounterRegion: ".csui-selected-items-counter-region",
        },
        events: { keydown: "onKey" },
        behaviors: { TabableRegion: { behaviorClass: n } },
        currentlyFocusedElement: function () {
          return v(this._focusableElements[this._focusedToolbarItemIndex]);
        },
        constructor: function (f) {
          f || (f = {}),
            (this.selectedChildren = f.selectedChildren),
            (this.scrollableParent = f.scrollableParent),
            h.LayoutView.prototype.constructor.apply(this, arguments),
            (this._focusedToolbarItemIndex = 0);
        },
        initialize: function (m) {
          var f = {
            nodes: this.selectedChildren,
            context: m.context,
            collection: m.collection,
            container: m.collection.node,
            originatingView: m.originatingView,
          };
          (this._commandController =
            m.toolbarCommandController || new e({ commands: m.commands })),
            (this._filteredToolItemsCollection = new i(m.toolItemFactory, {
              status: f,
              commands: this._commandController.commands,
              delayedActions: m.collection.delayedActions,
              mask: m.toolbarItemsMask,
            }));
          var g = d.extend(
            {
              onRefilterReopen: !0,
              originatingView: m.originatingView,
              collection: this._filteredToolItemsCollection,
              toolbarName: "tableHeader",
            },
            m.toolItemFactory.options,
            { role: "menubar" }
          );
          m.collection.delayedActions
            ? (this._toolbarView = new u(g))
            : (this._toolbarView = new l(g)),
            this.listenTo(
              this._toolbarView,
              "childview:toolitem:action",
              this._toolbarItemClicked
            ),
            this.listenTo(
              this._toolbarView,
              "render render:lazy:actions",
              function () {
                this._updateCounts(),
                  this._focusableElements.length &&
                    ((this._focusedToolbarItemIndex = 0),
                    this._moveTabindexToFocusedElement &&
                      this._moveTabindexToFocusedElement());
              }
            ),
            (this._rightToolbarView = new r(m)),
            this.listenTo(
              this._rightToolbarView,
              "toggle:condensed:header",
              function () {
                this.trigger("toggle:condensed:header");
              }
            ),
            this.listenTo(this, "toolbar:activity", function (w, b) {
              this._rightToolbarView.triggerMethod("toolbar:activity", w, b),
                !w &&
                  this._selectedCountView &&
                  this._selectedCountView.resetState();
            }),
            this.listenTo(
              this._commandController,
              "before:execute:command",
              function (w) {
                this._toolbarView.trigger("before:execute:command", w);
              }
            ),
            this.listenTo(
              this._commandController,
              "after:execute:command",
              function (w) {
                this._toolbarView.trigger("after:execute:command", w);
              }
            ),
            this.listenTo(this, "render", function () {
              this.toolbarRegion.show(this._toolbarView),
                this.rightToolbarRegion.show(this._rightToolbarView),
                this.options.showSelectionCounter &&
                  ((this._selectedCountView = new t({
                    collection: this.selectedChildren,
                    scrollableParent: this.scrollableParent,
                    showOnlyOnSelection: !1,
                  })),
                  this.selectedItemsCounterRegion.show(
                    this._selectedCountView
                  ));
            }),
            this.listenTo(this, "dom:refresh", function () {
              this._toolbarView.triggerMethod("dom:refresh"),
                this._rightToolbarView.triggerMethod("dom:refresh"),
                this._selectedCountView &&
                  this._selectedCountView.triggerMethod("dom:refresh");
            }),
            this._toolbarView.closeSubMenu &&
              this._toolbarView.listenTo(
                this,
                "close:subMenu",
                this._toolbarView.closeSubMenu
              );
        },
        _toolbarItemClicked: function (m, f) {
          var g = {
            context: this.options.context,
            nodes: this.selectedChildren,
            container: this.options.collection.node,
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            toolItemView: m,
          };
          this._commandController.toolitemClicked(f.toolItem, g);
        },
        onKey: function (m) {
          switch (m.keyCode) {
            case 37:
              this._updateCounts(),
                this._focusedToolbarItemIndex > 0
                  ? (this._focusedToolbarItemIndex--,
                    this._focusedToolbarItemIndex >=
                      this._visibleToolitemsCount &&
                      (this._focusedToolbarItemIndex =
                        this._visibleToolitemsCount - 1))
                  : (this._focusedToolbarItemIndex = 0),
                this._moveTabindexToFocusedElement &&
                  this._moveTabindexToFocusedElement(),
                this._moveFocus(),
                m.preventDefault(),
                m.stopPropagation();
              break;
            case 39:
              this.trigger("close:subMenu"),
                this._updateCounts(),
                this._focusedToolbarItemIndex < this._visibleToolitemsCount - 1
                  ? this._focusedToolbarItemIndex++
                  : (this._focusedToolbarItemIndex =
                      this._visibleToolitemsCount - 1),
                this._moveTabindexToFocusedElement &&
                  this._moveTabindexToFocusedElement(),
                this._moveFocus(),
                m.preventDefault(),
                m.stopPropagation();
              break;
            case 9:
              this.trigger("close:subMenu");
          }
        },
        _updateCounts: function () {
          (this._focusableElements = this.findFocusables(this._toolbarView.el)),
            (this._visibleToolitemsCount =
              this._toolbarView.getVisibleToolitemsCount());
        },
        findFocusables: function (m) {
          return v(m).find(".csui-acc-focusable");
        },
        _moveTabindexToFocusedElement: function () {
          for (var m = 0; m < this._focusableElements.length; m++)
            m === this._focusedToolbarItemIndex
              ? this._focusableElements[m].setAttribute("tabindex", "0")
              : this._focusableElements[m].setAttribute("tabindex", "-1");

          // CSUI: AVIATOR START
          let that = this;
          let propBtn = that.toolbarRegion.$el.find("li[data-csui-command='properties']");
          if(document.querySelector("#ask-ark-toolbar") != null) {
            document.querySelector("#ask-ark-toolbar")?.remove();
          }

          if(propBtn.length > 0) {
            if(!document.querySelector("#ask-ark-toolbar")) {
              propBtn[0].insertAdjacentHTML("afterend", `<li data-csui-command="askark" id="ask-ark-toolbar" role="none" class=""><a href="#" role="menuitem" class="csui-toolitem csui-toolitem-textonly csui-acc-focusable" data-cstabindex="-1" tabindex="-1">Ask AI+</a></li>`);
            }

            if(that.selectedChildren.models.filter(node => node.attributes.type != 144 && node.attributes.type != 749).length > 0) {
              if(document.querySelector("#ask-ark-toolbar")) document.querySelector("#ask-ark-toolbar").remove();
            } else {
              if(!document.querySelector("#ask-ark-toolbar")) {
                propBtn[0].insertAdjacentHTML("afterend", `<li data-csui-command="askark" id="ask-ark-toolbar" role="none" class=""><a href="#" role="menuitem" class="csui-toolitem csui-toolitem-textonly csui-acc-focusable" data-cstabindex="-1" tabindex="-1">Ask AI+</a></li>`);
              }
            }

            for(const nodeId of that.selectedChildren.models.map(x => x.attributes.id)) {
              if(!window.aiPlusIngestedFileIds.map(x => x.nodeID).includes(nodeId)) {
                document.querySelector("#ask-ark-toolbar").remove();
                break;
              }
            }

            if(document.querySelector("#ask-ark-toolbar") != null) {
              document.querySelector("#ask-ark-toolbar")?.addEventListener("click", () => {
                window.aiPlusSendFilesToChatbot(that.selectedChildren.models);
              });
            }
          }
          // CSUI: AVIATOR END
        },
        _moveFocus: function () {
          this.trigger("changed:focus");
          var m =
              this._focusableElements.length > this._focusedToolbarItemIndex &&
              this._focusableElements[this._focusedToolbarItemIndex]
                .parentElement,
            f = this._toolbarView.$el.children().index(m);
          this._toolbarView && this._toolbarView.setFocusByIndex(f);
        },
        setActive: function (m) {
          this._filteredToolItemsCollection.setActive(m),
            this._toolbarView.setActive(m);
        },
      });
      return d.extend(c.prototype, s), c;
    }
  ),
  csui.define(
    "css!csui/behaviors/table.rowselection.toolbar/impl/table.rowselection.toolbar",
    [],
    function () {}
  ),
  csui.define(
    "csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view",
      "csui/utils/accessibility",
      "csui/lib/jquery.redraw",
      "css!csui/behaviors/table.rowselection.toolbar/impl/table.rowselection.toolbar",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = h.isAccessibleTable(),
        e = d.Behavior.extend({
          initialize: function () {
            this.listenTo(this.view, {
              "before:render": this.setToolbar,
              render: this.renderToolbar,
            });
          },
          setToolbar: function () {
            if (
              ((this.toolbarRegion =
                this.view[l(this.options, "toolbarRegionName", this.view)] ||
                this.view.toolbarRegion),
              !this.toolbarRegion || !this.view.tableView)
            )
              return;
            var u =
                l(this.options, "visibleClassName", this.view) ||
                "csui-rowselection-toolbar-visible",
              r = l(this.options, "toolbarViewOptions", this.view),
              t =
                l(this.options, "showSelectionCounter", this.view) ||
                this.view.options.showSelectionCounter,
              n =
                l(this.options, "allSelectedNodes", this.view) ||
                this.view.tableView.selectedChildren;
            (this.toolbarView = new a(
              v.extend(
                {
                  toolItemFactory:
                    this.view.options.toolbarItems.tableHeaderToolbar,
                  showSelectionCounter: t,
                  toolbarItemsMask:
                    this.view.options.toolbarItemsMasks.toolbars
                      .tableHeaderToolbar,
                  toolbarCommandController: this.view.commandController,
                  commands: this.view.defaultActionController.commands,
                  selectedChildren: n,
                  container: this.view.collection.node,
                  context: this.view.options.context,
                  originatingView: this.view,
                  collection: this.view.collection,
                  scrollableParent: this.options.scrollableParent,
                },
                r
              )
            )),
              this.listenTo(n, "reset", function () {
                s.call(this),
                  this.toolbarView &&
                    this.toolbarView.triggerMethod("dom:refresh");
              });
            function s() {
              var o = this.toolbarRegion.$el;
              n.length > 0
                ? o.hasClass(u) ||
                  (i
                    ? o
                        .removeClass("binf-hidden")
                        .addClass("csui-no-animation")
                        .addClass(u)
                    : o.removeClass("binf-hidden").redraw().addClass(u))
                : o.hasClass(u) &&
                  (i
                    ? o
                        .addClass("binf-hidden")
                        .addClass("csui-no-animation")
                        .removeClass(u)
                    : o
                        .one("transitionend", function () {
                          o.addClass("binf-hidden");
                        })
                        .removeClass(u));
            }
          },
          renderToolbar: function () {
            this.toolbarRegion &&
              this.toolbarView &&
              (this.toolbarRegion.show(this.toolbarView),
              this.toolbarRegion.$el.addClass("binf-hidden"));
          },
        });
      function l(u, r, t) {
        if (u != null) {
          var n = u[r];
          return v.isFunction(n) ? u[r].call(t) : n;
        }
      }
      return e;
    }
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/root/lang",
    {
      conflictCount: "{0} Conflicts",
      oneConflict: "1 Conflict",
      upload: "Upload",
      cancel: "Cancel",
      save: "Save",
      inputPlaceHolder: "Enter filename",
      nameErrorContainSemiColon: "Name cannot contain a colon.",
      nameConflict: "An item with this name already exists.",
      nameConflictVersionAria: "A file {0} already exists. Add a new version",
      nameConflictRenameAria: "A file {0} already exists. Rename",
      nameConflictSkipAria: "A file {0} already exists. Skip",
      rename: "Rename",
      addVersion: "Add version",
      skip: "Skip",
      conflict: "Conflict",
      cancelUpload: "Cancel Upload",
      renamed: "Renamed",
      undo: "Undo",
      undoAria: "File {0} has state {1}. Undo",
      retry: "Retry",
      serverError: "File(s) not uploaded due to server error.",
    }
  ),
  csui.define(
    "hbs!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="csui-icon csui-conflict-item-view-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "item-id") || (e != null ? n(e, "item-id") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "item-id",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 52 },
                      end: { line: 5, column: 63 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="csui-icon ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "file-icon") || (e != null ? n(e, "file-icon") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "file-icon",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 28 },
                      end: { line: 7, column: 41 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
`
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `            <span class="csui-multilingual-icon-label binf-hidden">
              <button  class="icon csui-multilingual-icon">
                ` +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "small",
                iconName: "csui_action_language_switcher24",
              },
              loc: {
                start: { line: 18, column: 16 },
                end: { line: 18, column: 99 },
              },
            })) != null
              ? t
              : "") +
            `
              </button>
            </span>
`
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '          <div class="csui-msg" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "conflict-error-msg") ||
                  (e != null ? n(e, "conflict-error-msg") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "conflict-error-msg",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 39 },
                      end: { line: 30, column: 61 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "conflict-error-msg") ||
                  (e != null ? n(e, "conflict-error-msg") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "conflict-error-msg",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 63 },
                      end: { line: 30, column: 85 },
                    },
                  })
                : t)
            ) +
            `</div>
`
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "excludeAddVersion") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(10, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 40, column: 2 },
                  end: { line: 43, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            '    <button type="button" class="binf-btn btn-rename conflict-field ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "multiRowClass") ||
                  (e != null ? s(e, "multiRowClass") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "multiRowClass",
                    hash: {},
                    loc: {
                      start: { line: 44, column: 68 },
                      end: { line: 44, column: 85 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "renameAria") || (e != null ? s(e, "renameAria") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "renameAria",
                    hash: {},
                    loc: {
                      start: { line: 44, column: 99 },
                      end: { line: 44, column: 113 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0"
            title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "rename") || (e != null ? s(e, "rename") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "rename",
                    hash: {},
                    loc: {
                      start: { line: 45, column: 19 },
                      end: { line: 45, column: 29 },
                    },
                  })
                : n)
            ) +
            '" data-cs-id="rename">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "rename") || (e != null ? s(e, "rename") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "rename",
                    hash: {},
                    loc: {
                      start: { line: 45, column: 51 },
                      end: { line: 45, column: 61 },
                    },
                  })
                : n)
            ) +
            `</button>
`
          );
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <button type="button" class="binf-btn btn-version conflict-field" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionAria") ||
                  (e != null ? n(e, "versionAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionAria",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 84 },
                      end: { line: 41, column: 99 },
                    },
                  })
                : t)
            ) +
            '" tabindex="0" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "version") || (e != null ? n(e, "version") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "version",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 121 },
                      end: { line: 41, column: 132 },
                    },
                  })
                : t)
            ) +
            `"
            data-cs-id="version">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "version") || (e != null ? n(e, "version") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "version",
                    hash: {},
                    loc: {
                      start: { line: 42, column: 33 },
                      end: { line: 42, column: 44 },
                    },
                  })
                : t)
            ) +
            `</button>
`
          );
        },
        12: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "noServerError") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(13, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 47, column: 2 },
                end: { line: 49, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        13: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <button type="button" class="binf-btn btn-undo ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "multiRowClass") ||
                  (e != null ? n(e, "multiRowClass") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "multiRowClass",
                    hash: {},
                    loc: {
                      start: { line: 48, column: 53 },
                      end: { line: 48, column: 70 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "undoAria") || (e != null ? n(e, "undoAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "undoAria",
                    hash: {},
                    loc: {
                      start: { line: 48, column: 84 },
                      end: { line: 48, column: 96 },
                    },
                  })
                : t)
            ) +
            '" tabindex="0" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "undo") || (e != null ? n(e, "undo") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "undo",
                    hash: {},
                    loc: {
                      start: { line: 48, column: 118 },
                      end: { line: 48, column: 126 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "undo") || (e != null ? n(e, "undo") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "undo",
                    hash: {},
                    loc: {
                      start: { line: 48, column: 128 },
                      end: { line: 48, column: 136 },
                    },
                  })
                : t)
            ) +
            `</button>
`
          );
        },
        15: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "notSingleUpload") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(16, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 54, column: 0 },
                end: { line: 58, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
        16: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "statusNotSkip") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(17, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 55, column: 2 },
                end: { line: 57, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        17: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '        <span class="cs-icon circle_delete conflict-field" tabindex="0" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "skip") || (e != null ? n(e, "skip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "skip",
                    hash: {},
                    loc: {
                      start: { line: 56, column: 79 },
                      end: { line: 56, column: 87 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "skipAria") || (e != null ? n(e, "skipAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "skipAria",
                    hash: {},
                    loc: {
                      start: { line: 56, column: 101 },
                      end: { line: 56, column: 113 },
                    },
                  })
                : t)
            ) +
            `" role="button"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `
<span class="csui-icon csui-status-icon ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "status-icon") ||
                  (e != null ? s(e, "status-icon") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status-icon",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 40 },
                      end: { line: 2, column: 55 },
                    },
                  })
                : n)
            ) +
            ` " aria-hidden="true"></span>

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isBWS") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 4, column: 6 },
                  end: { line: 8, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `

      <div class="csui-description">
        <div class="csui-name">
          <span class="folder-name conflict-field ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "status-ok") || (e != null ? s(e, "status-ok") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status-ok",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 50 },
                      end: { line: 13, column: 63 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 72 },
                      end: { line: 13, column: 80 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 82 },
                      end: { line: 13, column: 90 },
                    },
                  })
                : n)
            ) +
            `</span>
          <input class="binf-form-control cs-input rename-field binf-hidden" placeholder="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "inputPlaceHolder") ||
                  (e != null ? s(e, "inputPlaceHolder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "inputPlaceHolder",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 90 },
                      end: { line: 14, column: 110 },
                    },
                  })
                : n)
            ) +
            `" tabindex="-1">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "mlDataEnabled") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 15, column: 9 },
                  end: { line: 21, column: 17 },
                },
              }
            )) != null
              ? t
              : "") +
            '          <button type="button" class="csui-undo csui-edit-save csui-btn-save inline-edit-icon rename-field binf-hidden" disabled title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "save") || (e != null ? s(e, "save") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "save",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 137 },
                      end: { line: 22, column: 145 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "save") || (e != null ? s(e, "save") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "save",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 159 },
                      end: { line: 22, column: 167 },
                    },
                  })
                : n)
            ) +
            `">
            ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 23, column: 12 },
                end: { line: 23, column: 86 },
              },
            })) != null
              ? t
              : "") +
            `
          </button>
          <button type="button" class="csui-undo csui-edit-cancel csui-btn-cancel inline-edit-icon rename-field binf-hidden" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "cancel") || (e != null ? s(e, "cancel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cancel",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 132 },
                      end: { line: 25, column: 142 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "cancel") || (e != null ? s(e, "cancel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cancel",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 156 },
                      end: { line: 25, column: 166 },
                    },
                  })
                : n)
            ) +
            `">
            ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 26, column: 12 },
                end: { line: 26, column: 85 },
              },
            })) != null
              ? t
              : "") +
            `
          </button>
        </div>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "conflict") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(7, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 29, column: 8 },
                  end: { line: 31, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>

    <div class="csui-status conflict-field ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "status-ok") || (e != null ? s(e, "status-ok") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status-ok",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 43 },
                      end: { line: 34, column: 56 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "status") || (e != null ? s(e, "status") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 65 },
                      end: { line: 34, column: 75 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "status") || (e != null ? s(e, "status") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 77 },
                      end: { line: 34, column: 87 },
                    },
                  })
                : n)
            ) +
            `</div>



<div class="csui-button-container" style="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "resolvedStyle") ||
                  (e != null ? s(e, "resolvedStyle") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "resolvedStyle",
                    hash: {},
                    loc: {
                      start: { line: 38, column: 42 },
                      end: { line: 38, column: 59 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "conflict") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.program(12, r, 0),
                loc: {
                  start: { line: 39, column: 0 },
                  end: { line: 50, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "noServerError") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(15, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 53, column: 0 },
                  end: { line: 59, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `

<div class='csui-internal-placeholder rename-field binf-hidden'>
  <div class="csui-progress-container binf-hidden">
    <div class="loader"></div>
  </div>
</div>

</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_conflict.resolver_impl_conflict.dialog_impl_conflict.item_conflict.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/progress.wheel",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/controls/conflict.resolver/conflict.resolver_icons",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/nodesprites",
      "csui/models/namequery",
      "i18n!csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang",
      "csui/controls/progressblocker/blocker",
      "csui/utils/base",
      "csui/utils/log",
      "hbs!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",
      "csui/utils/mime.types",
      "csui/controls/node-type.icon/node-type.icon.item.view.mixin",
      "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",
      "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/progress.wheel",
      "css!csui/controls/conflict.resolver/conflict.resolver_icons",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s) {
      var o = a.ItemView.extend({
        constructor: function (m) {
          if (
            (a.ItemView.call(this, m),
            (this.selectedNodes = m.selectedNodes),
            (this.selectedNode = this.selectedNodes?.filter({
              id: this.model.get("id"),
            })[0]),
            (this._onDynamicPlacment = v.bind(this._setDynamicPlacement, this)),
            d(window).on("resize.app", this._onDynamicPlacment),
            !this.model.get("newName"))
          ) {
            var f = this.model.get("name");
            this.model.set("newName", f);
          }
          (this.blockKeyUp = !1), l.imbue(this);
          var g = this;
          (this.metadataLanguages = u.getMetadataLanguageInfo()),
            (this.saveMldata = ""),
            this.listenTo(this, "ml:value:updated", function (w) {
              (g.saveMldata = w),
                (g.enableAddButton = !!w.value.trim()),
                g.ui.saveEdit.prop("disabled", !g.enableAddButton),
                this.refreshTabableElements(),
                g.model.get("id") === void 0 &&
                  (g.model.set("name", w.value, { silent: !0 }),
                  (this.inputBoxNameChange = !0),
                  this.ui.nameInput.removeClass("csui-empty-with-placeholder"),
                  this.trigger("update:button", { disabled: !1 }));
              var b = {
                name_multilingual: w.value_multilingual,
                multilingual_provided: !0,
              };
              g.model.set(b, { silent: !0 }), g.targetElement.val(w.value);
            });
        },
        ui: {
          inputField: "input",
          fileDescription: ".csui-description",
          versionBtn: ".btn-version",
          renameBtn: ".btn-rename",
          cancelIcon: ".circle_delete",
          progressWheel: ".csui-progress-container",
          errorMessage: ".csui-msg",
          statusText: ".csui-status",
          cancelEdit: ".csui-btn-cancel",
          errorMsgElem: ".csui-msg",
          saveEdit: ".csui-btn-save",
          conflictFields: ".conflict-field",
          renameFields: ".rename-field",
          globeIcon: ".csui-multilingual-icon",
          globeIconLabel: ".csui-multilingual-icon-label",
        },
        triggers: {
          "click @ui.versionBtn": "click:version",
          mouseleave: "hide:cancel",
          "click @ui.cancelEdit": "cancel:input",
        },
        events: {
          "click @ui.renameBtn": "onRename",
          "click @ui.saveEdit": "_queryName",
          "click @ui.cancelIcon": "onCancelUpload",
          "click @ui.globeIcon": "onClickGlobeIcon",
          "keydown @ui.globeIcon": "onKeyDownGlobeIcon",
          "keydown @ui.cancelIcon": "onCancelUpload",
          "click .btn-undo": "undo",
          mouseenter: "onHover",
          "focus *[tabindex]": "onFocus",
          keydown: "onKeyInView",
          keyup: "onKeyUp",
          "input @ui.inputField": "onChangeName",
          "mousedown @ui.cancelEdit": "onMouseDownCancel",
        },
        tagName: "div",
        className: "binf-list-group-item",
        template: t,
        templateHelpers: function () {
          var c =
              this.options.multiConflicts && this.model.status !== "skip"
                ? ""
                : "no-cancel-icon",
            m = this.model.get("newName");
          return (
            (this.isBWS = !!this.selectedNode?.get("image_url")),
            {
              "file-icon": this.getMimeTypeIcon(),
              "item-id": this.selectedNode?.get("id"),
              isBWS: this.isBWS,
              name: m,
              "conflict-error-msg": e.nameConflict,
              conflict: !this.model.status,
              status: this.getStatus(),
              excludeAddVersion:
                this.model.excludeAddVersion ||
                this.model.get("versioned") === !1,
              version: e.addVersion,
              versionAria: v.str.sformat(e.nameConflictVersionAria, m),
              rename: e.rename,
              renameAria: v.str.sformat(e.nameConflictRenameAria, m),
              skip: e.skip,
              skipAria: v.str.sformat(e.nameConflictSkipAria, m),
              notSingleUpload: this.options.notSingleUpload,
              multiRowClass: c,
              undo: e.undo,
              undoAria: v.str.sformat(e.undoAria, m, this.getStatus()),
              "status-ok": this.getResolveStatus(),
              "status-icon": this.getStatusIcon(),
              cancel: e.cancel,
              save: e.save,
              inputPlaceHolder: e.inputPlaceHolder,
              statusNotSkip: this.model.status !== "skip",
              noServerError: this.model.status !== "serverError",
              resolvedStyle: this.resolvedStyle,
              mlDataEnabled: this.metadataLanguages.enabled,
            }
          );
        },
        attachElContent: function () {
          console.log('attachElContent')
          var c = a.ItemView.prototype.attachElContent.apply(this, arguments),
            m = this.$el.find(
              ".csui-conflict-item-view-" + this.selectedNode?.get("id")
            ),
            f = "csui-icon-paceholder csui-icon";
          return (
            this.isBWS &&
              m.length &&
              this.selectedNode &&
              ((this.model.connector = this.options.connector),
              this.renderNodeTypeIconView(this.selectedNode, m, f),
              this.nodeTypeIconView &&
                this.nodeTypeIconView.$el.removeAttr("title aria-label")),
            c
          );
        },
        onKeyInView: function (c) {
          console.log('onKeyInView')
          var m = c.keyCode,
            f = d(c.target),
            g = !0;
          switch (m) {
            case 9:
              break;
            case 27:
              f.hasClass("cs-input") &&
                ((this.escapePressed = !0),
                (this.blockKeyUp = !0),
                this.onCancelInput(),
                this.setFocusInView(),
                (g = !1));
              break;
            case 32:
            case 13:
              f.hasClass("cs-input") &&
                m === 13 &&
                (this._queryName(), (g = !1));
          }
          return g;
        },
        onChangeName: function (c) {
          console.log('onChangeName')
          if (this.ui.saveEdit.length) {
            var m = this.ui.inputField.val().trim(),
              f = !1;
            (f = this.isSaveEnabled(c.target.value)),
              v.isFunction(this.updateMLdata) && this.updateMLdata(c),
              this.ui.saveEdit.prop("disabled", !f);
          }
        },
        isSaveEnabled: function (c) {
          console.log('isSaveEnabled')
          return (c = c.trim()), !(!c.length || c === this.model.get("name"));
        },
        onKeyUp: function (c) {
          console.log('onKeyUp')
          c.keyCode === 27 &&
            this.blockKeyUp &&
            (c.stopPropagation(), (this.blockKeyUp = !1)),
            c.keyCode === 27 && this._isReadyToSave && c.preventDefault();
        },
        onFocus: function (c) {
          console.log('onFocus')
          this.trigger("item:focus", c.target);
        },
        setFocusInView: function () {
          console.log('setFocusInView')
          this.$el
            .find("input:not([disabled]),  button:not([disabled])")
            .filter(":visible")
            .first()
            .trigger("focus");
        },
        refreshTabableElements: function () {
          console.log('refreshTabableElements')
          this.tabableElements = this.$el
            .find("input:not([disabled]),  button:not([disabled])")
            .filter(":visible")
            .toArray();
        },
        getStatus: function () {
          console.log('getStatus')
          switch (this.model.status) {
            case "renamed":
              return e.renamed;
            case "skip":
              return e.skip;
            case "version":
              return e.addVersion;
            case "serverError":
              return e.serverError;
          }
          return e.conflict;
        },
        getStatusIcon: function () {
          console.log('getStatusIcon')
          var c = "csui-icon-notification-warning";
          switch (this.model.status) {
            case "version":
            case "renamed":
            case "skip":
              c = "csui-icon-notification-success";
              break;
            case "serverError":
              c = "category_delete";
              break;
          }
          return c;
        },
        getMimeTypeIcon: function () {
          console.log('getMimeTypeIcon')
          var c;
          return (
            this.model.get("mime_type") === void 0 &&
            this.model.get("file") !== void 0
              ? (c =
                  this.model.get("file").type ||
                  n.getMimeType(this.model.get("name")))
              : this.model.get("mime_type") !== null
              ? (c = this.model.get("mime_type"))
              : (c = this.model.get("type")),
            this.model.set("mime_type", c),
            h.findClassByNode(this.model)
          );
        },
        getResolveStatus: function () {
          console.log('getResolveStatus')
          var c = "";
          switch (this.model.status) {
            case "version":
            case "renamed":
            case "skip":
              c = "ok";
              break;
            case "serverError":
              c = "error";
              break;
          }
          return c;
        },
        onDestroy: function () {
          console.log('onDestroy')
          this.ui.inputField.val("test dlu ygy");
          const btn = document.querySelector("#upload.csui-acc-tab-region");
          console.log(btn);
          btn.disabled = false;
          btn.click();
          d(window).off("resize.app", this._onDynamicPlacment);
        },
        onClickVersion: function (c) {
          console.log('onClickVersion')
          (this.model.status = "version"),
            this.model.set("newVersion", !0),
            this.setResolveStatus(!0),
            this.render();
        },
        onRename: function (c) {
          console.log('onRename');
          // c.preventDefault();
          // c.stopPropagation();
          // this.onDestroy(c);

          c.preventDefault(),
            c.stopPropagation(),
            this.model.set("multilingual_provided", !1, { silent: !0 });
          var m = this.model.get("name_multilingual");
          m && (this.prevMultilingualVal = v.clone(m));
          var f = this.model.get("newName");
          this.ui.inputField.val(f),
            this.ui.conflictFields.addClass("binf-hidden"),
            this.ui.renameFields.removeClass("binf-hidden"),
            this.ui.globeIconLabel.removeClass("binf-hidden"),
            this.ui.inputField.trigger("focus"),
            this.ui.fileDescription.addClass("edit-mode"),
            this.$el.addClass("edit-mode"),
            this.$el.find(".csui-status-icon").addClass("edit-mode"),
            this.metadataLanguages &&
              this.metadataLanguages.enabled &&
              this._openMLFlyoutInEditMode();
        },
        onCancelInput: function () {
          console.log("onCancelInput");
          this.render();
        },
        onCancelUpload: function (c) {
          console.log("onCancelUpload");
          (c.keyCode === void 0 || c.keyCode === 32 || c.keyCode === 13) &&
            (c.stopPropagation(),
            c.preventDefault(),
            this.view &&
              this.view.enableAddButton &&
              this.view.ui.saveButtonInEditMode.prop("disabled", !0),
            (this.options.removeItemList[this.model.get("id")] = this.model),
            (this.previousState = this.model.status),
            (this.model.status = "skip"),
            this.setResolveStatus(!0),
            this.render());
        },
        onKeyDownGlobeIcon: function (c) {
          console.log("onClickGlobeIcon");
          (c.keyCode === 13 || c.keyCode === 32) &&
            this.multiLingualForm &&
            this.keyDownOnGlobeIcon(c);
        },
        onClickGlobeIcon: function (c) {
          console.log("onClickGlobeIcon");
          c.stopPropagation(), this._showLanguagePopover();
        },
        setResolveStatus: function (c) {
          console.log("setResolveStatus")
          this._resolved && !c && this.trigger("resolved", !1),
            !this._resolved && c && this.trigger("resolved", !0),
            (this._resolved = c);
        },
        onHover: function () {
          console.log("onHover");
          this.resolvedStyle ||
            (this.resolvedStyle =
              "width:" + d(".csui-button-container").width() + "px;"),
            this.ui.cancelIcon.addClass("binf-show");
        },
        onHideCancel: function () {
          console.log("onHideCancel");
          this.ui.cancelIcon.removeClass("binf-show");
        },
        onRender: function () {
          console.log("onRender");
          // this.ui.conflictFields[3].insertAdjacentText("afterend", ``)
          // console.log(this.ui);
          // console.log(this.ui.conflictFields);

          var c = this,
            m = this.model;
          if (
            (m.get("first") && this.$el.addClass("no-border"),
            this._setDynamicPlacement(),
            (this.mouseDownCancel = !1),
            (this.escapePressed = !1),
            this.metadataLanguages.enabled)
          ) {
            this.ui.inputField.addClass("csui-multilingual-input");
            var f = c.ui.inputField,
              g = c.ui.globeIcon;
            csui.require(
              [
                "csui/controls/multilingual.text.picker/multilingual.popover.mixin",
              ],
              function (w) {
                w.mixin(o.prototype),
                  c.blockActions(),
                  c
                    .requiredInfoAvilable("name_multilingual")
                    .then(function () {
                      c.multiLingualForm &&
                        c.targetElement.binf_popover("destroy");
                      var b = {
                        parentView: c,
                        targetElement: f,
                        mlGlobeIcon: g,
                        validationRequired: !1,
                        multilingualData: c.model.get("name_multilingual"),
                      };
                      c._loadMultiLingualPopover(b), c.unblockActions();
                    })
                    .catch(() => {
                      c.unblockActions();
                    });
              }
            );
          }
        },
        undo: function (c) {
          console.log("undo");
          c.preventDefault(), c.stopPropagation();
          var m = this.model.get("id");
          (this.model.status = this.previousState),
            this.previousState
              ? (delete this.options.removeItemList[m],
                (this.previousState = void 0))
              : (this.oldName && this.model.set("newName", this.oldName),
                this.oldId && this.model.set("id", this.oldId),
                (this.oldName = this.Id = void 0),
                this.model.set("newVersion", void 0),
                this.model.set("name_multilingual", this.prevMultilingualVal, {
                  silent: !0,
                }),
                delete this.options.removeItemList[m],
                (this.model.status = void 0),
                this.setResolveStatus(!1)),
            this.render();
        },
        validateName: function (c) {
          console.log("validateName");
          return c.indexOf(":") !== -1
            ? (this.showInlineError(e.nameErrorContainSemiColon), !1)
            : !0;
        },
        showInlineError: function (c) {
          console.log("showInlineError");
          this.ui.errorMsgElem.attr("title", c), this.ui.errorMsgElem.text(c);
        },
        _queryName: function (c) {
          console.log("_processServerError");
          var m = this.ui.inputField.val(),
            f = this.model.get("newName"),
            g = this.model.get("type"),
            w = c && c.relatedTarget && c.relatedTarget.id === "cancel";
          m = m && m.trim();
          var b = this.validateName(m);
          if (b)
            m && m !== f && !this.mouseDownCancel && !this.escapePressed && !w
              ? ((this.oldName = f),
                (this.oldId = this.model.get("id")),
                this.model.set("id", void 0),
                this.model.set("newName", m),
                this.ui.progressWheel.removeClass("binf-hidden"),
                this._runNameQuery([{ name: m, type: g }]))
              : this.escapePressed
              ? (this.escapePressed = !1)
              : w || (this.onCancelInput(), (this.mouseDownCancel = !1));
          else return;
        },
        onMouseDownCancel: function (c) {
          console.log("_processServerError");
          (this.mouseDownCancel = !0),
            this.prevMultilingualVal &&
              this.model.set({ name_multilingual: this.prevMultilingualVal }),
            c.stopPropagation();
        },
        _runNameQuery: function (c) {
          console.log("_runNameQuery");
          
          var m = this,
            f = new i(
              { containerId: this.options.parentId },
              { connector: this.options.connector }
            );
          f.queryNames(c)
            .done(function (g, w) {
              w && w.length > 0
                ? m._resetConflictStatus(w)
                : m._setRenameStatus();
            })
            .fail(function (g) {
              m.ui.progressWheel.addClass("binf-hidden"),
                m._processServerError(g);
            });
        },
        _processServerError: function (c) {
          console.log("_processServerError");
          (this.options.removeItemList[this.model.get("id")] = this.model),
            (this.model.status = "serverError"),
            this.$el.removeClass("edit-mode"),
            this._setErrorMsg(c),
            this.setResolveStatus(!0),
            this.render();
        },
        _setErrorMsg: function (c) {
          console.log("_setErrorMsg");
          var m = e.serverError,
            f = "Conflict.Item.View: Server returned error during name query";
          c && (f = new u.RequestErrorMessage(c)),
            r.error(f) && console.error(r.last);
        },
        _setRenameStatus: function () {
          console.log("_setRenameStatus");
          (this.model.status = "renamed"),
            this.$el.removeClass("edit-mode"),
            this.setResolveStatus(!0),
            this.render();
        },
        _resetConflictStatus: function (c) {
          console.log("_resetConflictStatus");
          this.model.set("id", c[0].id), this.render();
        },
        _setDynamicPlacement: function () {
          console.log("_setDynamicPlacement");
          var c = d(window).width() - 176;
          c < 600
            ? (this.$el.addClass("sm"),
              this.ui.statusText.addClass("sm"),
              this.ui.fileDescription.addClass("sm"))
            : (this.$el.removeClass("sm"),
              this.ui.statusText.removeClass("sm"),
              this.ui.fileDescription.removeClass("sm"));
        },
      });
      return s.mixin(o.prototype), o;
    }
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.navigation",
    [
      "csui/lib/jquery",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (v, d) {
      "use strict";
      var a = {
        currentlyFocusedElement: function (h) {
          h = typeof h == "object" ? h.shiftKey : h;
          var i = this.$("button[tabindex=-1]");
          return (
            i.length &&
              (i.prop("tabindex", 0),
              this.$(".circle_delete").prop("tabindex", 0)),
            h
              ? this.$("[tabindex]:visible").last()
              : this.$("[tabindex]:visible").first()
          );
        },
        onKeyInView: function (h) {
          var i = h.keyCode,
            e = v(h.target),
            l = !1;
          switch (i) {
            case 39:
            case 37:
              if (e.hasClass("cs-input")) return !0;
              this.navigateLeftRight(i);
              break;
            case 38:
            case 40:
              this.navigateUpDown(i);
              break;
            default:
              l = !0;
          }
          return l;
        },
        navigateUpDown: function (h) {
          var i = this.focusedElement,
            e = i.hasClass("btn-version")
              ? ".btn-version"
              : i.hasClass("btn-rename") || i.hasClass("btn-undo")
              ? ".btn-rename, .btn-undo"
              : ".circle_delete",
            l = this.collection.length,
            u,
            r,
            t,
            n;
          if (h === 38 && this.activeChildIndex > 0) {
            for (r = this.activeChildIndex - 1; r >= 0; r--)
              if (
                ((t = this.children.findByIndex(r)), (n = t.$(e)), n.length > 0)
              ) {
                u = r;
                break;
              }
          } else if (h === 40 && this.activeChildIndex < l - 1) {
            for (r = this.activeChildIndex + 1; r < l; r++)
              if (
                ((t = this.children.findByIndex(r)), (n = t.$(e)), n.length > 0)
              ) {
                u = r;
                break;
              }
          }
          u !== void 0 &&
            (this.$(".csui-focus").removeClass("csui-focus"),
            v(this.children.findByIndex(u).$(e)).trigger("focus"));
        },
        navigateLeftRight: function (h) {
          var i = this.activeChildView.$("[tabindex=0]"),
            e = this._getActiveIndex(i),
            l;
          e !== void 0 &&
            (h === 37 && e > 0
              ? (l = e - 1)
              : h === 39 && e < i.length - 1 && (l = e + 1),
            l !== void 0 && v(i[l]).trigger("focus"));
        },
        onLastTabElement: function (h) {
          var i =
              this.activeElementIndex === void 0 ? 0 : this.activeElementIndex,
            e = this.children.findByIndex(i),
            l = this.$("[tabindex=0]"),
            u = l.length - 1;
          if (l.length) {
            var r = h ? l[0] : l[u];
            return (
              this.$(".csui-focus").removeClass("csui-focus"),
              v(r).hasClass(d.accessibilityActiveElementClass)
            );
          }
          return !0;
        },
        setItemFocus: function (h, i) {
          (this.activeChildView = h),
            this.$(".csui-focus").removeClass("csui-focus"),
            h.$el.addClass("csui-focus"),
            this.focusedElement &&
              this.focusedElement.removeClass(
                d.accessibilityActiveElementClass
              ),
            (this.focusedElement = v(i)),
            this.focusedElement.addClass(d.accessibilityActiveElementClass),
            (this.activeChildIndex = h.model.index);
        },
        clearTabFocus: function () {},
      };
      return a;
    }
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/base",
      "csui/controls/list/simplelist.view",
      "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.navigation",
    ],
    function (v, d, a, h, i, e, l) {
      var u = h.extend({
        childView: i,
        childEvents: {
          resolved: "trackResolved",
          "item:focus": "setItemFocus",
        },
        events: { keydown: "onKeyInView", mouseenter: "clearTabFocus" },
        behaviors: { TabableRegionBehavior: { behaviorClass: e } },
        constructor: function (t) {
          t || (t = {}),
            (this.options = t),
            h.prototype.constructor.apply(this, arguments),
            (this.notSingleUpload = t.totalNumFiles !== 1),
            (this.removeItemList = []),
            (this._onSetContaintListHeight = v.bind(
              this._setContainerListHeight,
              this
            )),
            d(window).on("resize.app", this._onSetContaintListHeight);
        },
        childViewOptions: function () {
          return {
            selectedNodes: this.options.selectedNodes,
            notSingleUpload: this.notSingleUpload,
            connector: this.options.connector,
            parentId: this.options.parentId,
            removeItemList: this.options.removeItemList,
          };
        },
        onDomRefresh: function () {
          this._setContainerListHeight();
        },
        onDestroy: function () {
          d(window).off("resize.app", this._onSetContaintListHeight);
        },
        trackResolved: function () {
          var r = arguments[1];
          this.options.trackResolved(r);
        },
        _setContainerListHeight: function () {
          var r = d(window).height() * 0.9 - 100 - 60 - 130 + "px";
          this.$el.find(".cs-content").css("max-height", r);
        },
        _getActiveIndex: function (r) {
          for (var t = r.length - 1, n = 0; n <= t; n++)
            if (d(r[n]).hasClass(e.accessibilityActiveElementClass)) return n;
        },
      });
      return v.extend(u.prototype, l), u;
    }
  ),
  csui.define(
    "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/controls/dialog/dialog.view",
      "i18n!csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang",
      "csui/utils/log",
      "csui/controls/list/simplelist.view",
      "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view",
      "csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.view",
      "css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.dialog",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      function t(n) {
        (this.options = n || {}),
          (this.deferred = d.Deferred()),
          (this.removeItemList = {}),
          (this._resolveCount = this.options.conflictFiles.length),
          this.deferred.then(
            v.bind(this.destroy, this),
            v.bind(this.destroy, this)
          );
      }
      return (
        v.extend(t.prototype, a.Events, {
          destroy: function () {
            this._view.destroy(), this._view.off(), this._dialog.destroy();
          },
          show: function () {
            var n = this.options.conflictFiles;
            return (
              (n[0].first = !0),
              (this._view = this._getListView(n)),
              (this._dialog = this._createDialog(n)),
              this.deferred
            );
          },
          _createDialog: function (n) {
            var s = this.options,
              o = this,
              c = n.length > 1 ? i.conflictCount : i.oneConflict,
              m = v.str.sformat(c, n.length),
              f = new h({
                standardHeader: !1,
                view: this._view,
                className: "csui-conflict-dialog csui-individual",
                attributes: { "data-backdrop": "static" },
                headers: [
                  {
                    id: "h1",
                    label: this.options.h1Label,
                    class: "csui-numUploads",
                  },
                  { id: "h2", label: m, class: "csui-numConflicts" },
                ],
                buttons: [
                  {
                    id: "upload",
                    label: s.actionBtnLabel,
                    toolTip: s.actionBtnLabel,
                    disabled: !0,
                    click: function () {
                      f.destroy(), o._resolutionComplete();
                    },
                  },
                  {
                    id: "cancel",
                    label: i.cancel,
                    toolTip: i.cancel,
                    close: !0,
                    click: function () {
                      f.destroy(), o.cancel();
                    },
                  },
                ],
                dialogTxtAria: this.options.h1Label + ". " + m,
              });
            return (
              f.on(
                "hide",
                function () {
                  f.off(), this.cancel();
                },
                this
              ),
              f.show(),
              f
            );
          },
          _getListView: function (n) {
            var s = this,
              o = new r({
                data: { items: n },
                totalNumFiles: this.options.totalNumFiles,
                numConflicts: n.length,
                removeItemList: this.removeItemList,
                connector: this.options.connector,
                parentId: this.options.parentId,
                selectedNodes: this.options.selectedNodes,
                trackResolved: function (c) {
                  s.trackResolved(c);
                },
              });
            return o;
          },
          cancel: function () {
            return this.deferred.reject(), !0;
          },
          trackResolved: function (n) {
            var s = d(
              ".csui-conflict-dialog.csui-individual .csui-numConflicts"
            );
            n
              ? --this._resolveCount === 0 &&
                this._dialog.updateButton("upload", { disabled: !1 })
              : (this._resolveCount++,
                this._dialog.updateButton("upload", { disabled: !0 }));
            var o =
              this._resolveCount > 1 || this._resolveCount === 0
                ? i.conflictCount
                : i.oneConflict;
            return s.text(v.str.sformat(o, this._resolveCount)), !0;
          },
          _resolutionComplete: function () {
            return (
              this.deferred.resolve(
                this._view.collection.models,
                this.removeItemList
              ),
              !0
            );
          },
        }),
        (t.version = "1.0"),
        t
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<span id="csui-collection-conflicts-title"
      class="csui-collection-conflicts-title">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "conflictsItemsTitle") ||
                  (e != null ? n(e, "conflictsItemsTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "conflictsItemsTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 46 },
                      end: { line: 2, column: 69 },
                    },
                  })
                : t)
            ) +
            `</span>
<ul id="csui-collection-conflict-items" class="csui-collection-conflict-items csui-normal-scrolling"></ul>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_conflict.resolver_impl_collection.conflicts_collection.conflicts",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflict.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<span class="csui-type-icon ' +
            i.escapeExpression(
              ((t =
                (t = n(l, "icon") || (e != null ? n(e, "icon") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 28 },
                      end: { line: 1, column: 36 },
                    },
                  })
                : t)
            ) +
            '"></span><span class="item-name">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "conflictsItemsName") ||
                  (e != null ? n(e, "conflictsItemsName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "conflictsItemsName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 69 },
                      end: { line: 1, column: 91 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_conflict.resolver_impl_collection.conflicts_collection.conflict.item",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/conflict.resolver/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/conflict.resolver/impl/nls/root/lang", {
    batchMessage: "These files already exist. How do you want to proceed?",
    skipConflicts: "Skip conflicts",
    resolveIndividual: "Resolve individually",
    conflictCount: "{0} Conflicts",
    upload: "Upload",
    cancel: "Cancel",
    addVersion: "Add version",
    conflictsItemsHeader: "Listed items will not be added",
  }),
  csui.define(
    "css!csui/controls/conflict.resolver/impl/collection.conflicts/conflicts.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts",
      "hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflict.item",
      "csui/controls/node-type.icon/node-type.icon.view",
      "i18n!csui/controls/conflict.resolver/impl/nls/lang",
      "css!csui/controls/conflict.resolver/impl/collection.conflicts/conflicts.dialog",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
          tagName: "li",
          template: i,
          className: "csui-conflict-item",
          templateHelpers: function () {
            var t = { conflictsItemsName: this.model.get("name") };
            return t;
          },
          constructor: function (n) {
            n || (n = {}), a.ItemView.prototype.constructor.call(this, n);
          },
          onRender: function () {
            (this._nodeIconView = new e({
              el: this.$(".csui-type-icon").get(0),
              node: this.model.node,
            })),
              this._nodeIconView.render();
          },
        }),
        r = a.CompositeView.extend({
          template: h,
          className: "csui-conflicts-items-data",
          childView: u,
          childViewContainer: "#csui-collection-conflict-items",
          ui: { conflictItems: "#csui-collection-conflict-items" },
          templateHelpers: function () {
            var t = { conflictsItemsTitle: l.conflictsItemsHeader };
            return t;
          },
          constructor: function (n) {
            n || (n = {}),
              (this.collection = n.collection || {}),
              a.CompositeView.prototype.constructor.apply(this, arguments),
              (this._onSetContaintListHeight = v.bind(
                this._setContainerListHeight,
                this
              )),
              d(window).on("resize.app", this._onSetContaintListHeight);
          },
          onDomRefresh: function () {
            this._setContainerListHeight();
          },
          _setContainerListHeight: function () {
            var t = d(window).height() * 0.9 - 100 - 60 - 112 + "px";
            d(".csui-collection-conflict-items").css("max-height", t);
          },
          onDestroy: function () {
            d(window).off("resize.app", this._onSetContaintListHeight);
          },
        });
      return r;
    }
  ),
  csui.define(
    "css!csui/controls/conflict.resolver/impl/conflict.resolver",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/conflict.resolver/conflict.resolver",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/contexts/factories/node",
      "csui/controls/dialog/dialog.view",
      "i18n!csui/controls/conflict.resolver/impl/nls/lang",
      "csui/utils/log",
      "csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog",
      "csui/models/namequery",
      "csui/utils/base",
      "csui/models/fileuploads",
      "css!csui/controls/conflict.resolver/impl/conflict.resolver",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      function s(o) {
        (this.options = o || {}),
          (this.deferred = d.Deferred()),
          (this.container = o.container),
          (this.actionBtnLabel = o.actionBtnLabel || e.upload),
          (this.excludeAddVersion = o.excludeAddVersion || !1),
          (this.originatingView = o.originatingView),
          (this.excludeAddVersionforFolders =
            o.excludeAddVersionforFolders || !1),
          (this.files = o.files instanceof n ? o.files : new n(o.files)),
          this.deferred.then(
            v.bind(this.destroy, this),
            v.bind(this.destroy, this)
          );
      }
      return (
        v.extend(s.prototype, {
          destroy: function () {
            this._dialog && this._dialog.destroy();
          },
          run: function (o) {
            var c = this;
            return (
              v.extend(this.options, o),
              this.queryNames(this.files)
                .done(function (m, f) {
                  c._resolveConflicts(m, f);
                })
                .fail(function (m) {
                  var f = c.getMsgResponse(m);
                  c.deferred.reject(new Error(f));
                }),
              this.deferred.promise()
            );
          },
          queryNames: function (o) {
            var c = d.Deferred(),
              m = new r(
                { containerId: this.container.get("id") },
                { connector: this.container.connector }
              );
            return (
              m
                .queryNames(o)
                .done(function (f, g) {
                  c.resolve(f, g);
                })
                .fail(function (f) {
                  var g = new t.Error(f);
                  c.reject(g);
                }),
              c
            );
          },
          getMsgResponse: function (o) {
            var c = e.fileNameQueryFailed;
            return (
              o && ((c = new t.RequestErrorMessage(o)), (c = c.message)), c
            );
          },
          showBatchResolve: function (o) {
            var c = d.Deferred(),
              m = e.batchMessage,
              f = [
                {
                  id: "versions",
                  label: e.addVersion,
                  toolTip: e.addVersion,
                  click: function (g) {
                    c.resolve("versions", g.dialog);
                  },
                },
                {
                  id: "skip",
                  label: e.skipConflicts,
                  toolTip: e.skipConflicts,
                  close: !0,
                  click: function (g) {
                    c.resolve("skip", g.dialog);
                  },
                },
                {
                  id: "individual",
                  label: e.resolveIndividual,
                  toolTip: e.resolveIndividual,
                  click: function (g) {
                    c.resolve("individual", g.dialog);
                  },
                },
              ];
            return (
              (this.excludeAddVersion || this.excludeAddVersionforFolders) &&
                f.shift(),
              this._createDialog("csui-conflict-dialog csui-batch", o, f, m),
              c
            );
          },
          checkAddVersion: function (o) {
            if (this.excludeAddVersion)
              return (
                (o.excludeAddVersion = this.excludeAddVersion),
                d.Deferred().resolve().promise()
              );
            var c = this.originatingView && this.originatingView.context,
              m =
                o.node.collection ||
                (this.originatingView && this.originatingView.collection) ||
                (c &&
                  c.hasCollection("children2") &&
                  c.getCollection("children2")),
              f = null;
            if (
              (m &&
                (f = v.find(m.models, function (b) {
                  return b.get("id") === o.get("id");
                })),
              f)
            )
              return (
                (o.excludeAddVersion = !f.actions.findWhere({
                  signature: "addversion",
                })),
                d.Deferred().resolve().promise()
              );
            var g = d.Deferred(),
              w = this;
            return (
              csui.require(["csui/models/node.actions"], function (b) {
                var C = new b(void 0, {
                  connector: w.container.connector,
                  nodes: [o.get("id")],
                  commands: ["addversion"],
                });
                C.fetch().then(function () {
                  var k = o.get("id"),
                    y = C.get(k);
                  (o.excludeAddVersion = !y?.actions.findWhere({
                    signature: "addversion",
                  })),
                    g.resolve();
                });
              }),
              g
            );
          },
          validateAddVersion: function (o) {
            var c = this,
              m = [];
            return (
              v.each(o, function (f) {
                m.push(c.checkAddVersion(f));
              }),
              d.whenAll.apply(d, m)
            );
          },
          showIndividualResolve: function (o) {
            var c = this,
              m;
            this.validateAddVersion(o).done(
              function () {
                return (
                  (m = this._conflictDialog =
                    new u({
                      parentId: this.container.get("id"),
                      connector: this.container.connector,
                      totalNumFiles: this.options.files.length,
                      conflictFiles: o,
                      actionBtnLabel: this.actionBtnLabel,
                      h1Label: this.options.h1Label,
                      selectedNodes: this.options.selectedNodes,
                    })),
                  this.originatingView &&
                    this.originatingView._blockingCounter > 0 &&
                    this.originatingView.unblockActions(),
                  m
                    .show()
                    .done(function (f, g) {
                      c._removeDeletedFiles(g), c._returnFiles();
                    })
                    .fail(function () {
                      c.deferred.reject({
                        userAction: "cancelResolveNamingConflicts",
                      });
                    }),
                  m
                );
              }.bind(this)
            );
          },
          _createDialog: function (o, c, m, f, g) {
            var w = v.str.sformat(e.conflictCount, c.length),
              b = this.options.h1Label + ". " + w + ". " + f,
              C = (this._dialog = new i({
                bodyMessage: f,
                standardHeader: !1,
                view: g,
                className: o,
                attributes: { "data-backdrop": "static" },
                headers: [
                  {
                    id: "h1",
                    label: this.options.h1Label,
                    class: "csui-numUploads",
                  },
                  { id: "h2", label: w, class: "csui-numConflicts" },
                ],
                buttons: m,
                dialogTxtAria: b,
              }));
            return (
              C.listenTo(C, "hide", this.deferred.reject),
              this.originatingView &&
                this.originatingView._blockingCounter > 0 &&
                this.originatingView.unblockActions(),
              C.show(),
              C
            );
          },
          _resolveConflicts: function (o, c) {
            var m = this;
            return (
              (this.nonConflictFiles = o),
              c && c.length > 0
                ? c.length > 1
                  ? this.showBatchResolve(c).then(function (f, g) {
                      switch (
                        (g.stopListening(g, "hide", m.deferred.reject),
                        g.kill(),
                        f)
                      ) {
                        case "versions":
                          m._addVersions(c), m._returnFiles();
                          break;
                        case "individual":
                          m.showIndividualResolve(c);
                          break;
                        case "skip":
                          m._removeConnflicts(c), m._returnFiles();
                      }
                    })
                  : this.showIndividualResolve(c)
                : this.deferred.resolve(this.options.files, c.length > 0),
              !0
            );
          },
          _returnFiles: function () {
            if (this.options.files.length && this.options.files instanceof n)
              this.deferred.resolve(this.files);
            else if (this.files.length) {
              var o = [];
              v.each(this.files.models, function (c) {
                o.push(c.attributes);
              }),
                this.deferred.resolve(o);
            } else this.deferred.reject();
          },
          _removeConnflicts: function (o) {
            var c = this.files;
            v.each(o, function (m) {
              c.remove(m);
            });
          },
          _addVersions: function (o) {
            v.each(o, function (c) {
              c.set("newVersion", !0);
            });
          },
          _removeDeletedFiles: function (o) {
            v.each(
              o,
              function (c) {
                this.files.remove(c);
              },
              this
            );
          },
          _getArrayOfFileNames: function (o) {
            var c = [];
            return (
              v.each(o, function (m) {
                var f = m.newName || m.name;
                c.push({ name: f });
              }),
              c
            );
          },
        }),
        (s.version = "1.0"),
        s
      );
    }
  ),
  csui.define(
    "csui/controls/side.panel/side.panel.view",
    ["smart/controls/side.panel/side.panel.view", "csui/lib/binf/js/binf"],
    function (v) {
      return v;
    }
  ),
  csui.define("csui/controls/draganddrop/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/draganddrop/impl/nls/root/lang", {
    defaultDropMessage: "Drop your file(s) into",
    singleFileDropMessage: "Drop file to upload it to",
    singleFolderDropMessage: "Drop item to upload it to",
    MultipleFilesDropMessage: "Drop items to upload them to",
    versionDropMessage: "Add version to {0}.",
    dropNotPermitted: "No items can be dropped here.",
    ieFolderSupportError:
      "Internet Explorer does not support dragging of folders",
    safariFolderSupportError: "Safari does not support dragging of folders",
    dropInvalid: "Only files can be dropped here.",
    InvalidFile: "{0} was rejected, invalid type or size.",
    addTypeDenied: "Cannot add items to {0}.",
    addVersionDeniedForReservedItem: "Unable to add version to reserved item.",
    addVersionDenied:
      "Unable to add version to {0}. Permissions required to add new content here.",
    addFileDenied: "Permissions required to add new content in {0}.",
    dialogTitle: "Add version",
    dialogTemplate: "Add new version to {0}?",
    OneFolderSuccessfullyUploaded: "{0} was successfully uploaded.",
    AllFoldersSuccessfullyUploaded: "{0} folders were successfully uploaded.",
    FolderCreationError: "{0} folder failed to upload.",
    MultipleFolderCreationError: "{0} folders failed to upload.",
    AddVersionNotAllowed:
      "Unable to add version. Please try again when the current operation is finished",
    uploadCountsItems: "Uploading {0} items",
    uploadCount: "Uploading 1 file",
    uploadCountFolder: "Uploading 1 folder",
    dragFileSizeError:
      'The file size is too large [ max size: {0} MB ]. You can still try to upload the file by clicking on the \\"Add\\" button.',
    dragMaxFilesError:
      'The number of files being uploaded is exceeded [max: {0} files]. You can still try to upload the files by clicking on the "Add" button.',
    dragMaxSingleFileError:
      'The number of files being uploaded is exceeded [max: {0} file]. You can still try to upload the files by clicking on the "Add" button.',
    dragFileAddVersionError:
      "The dragged file size is too large [ max size: {0} MB ].",
  }),
  csui.define(
    "csui/controls/fileupload/impl/fileupload.collection",
    [
      "require",
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/utils/log",
      "i18n!csui/controls/fileupload/impl/nls/lang",
      "csui/controls/fileupload/impl/upload.controller",
      "csui/lib/radio",
      "csui/utils/url",
      "csui/models/fileuploads",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/conflict.resolver/conflict.resolver",
      "csui/utils/mime.types",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/page.leaving.blocker",
      "csui/utils/node.links/node.links",
      "csui/utils/contexts/factories/next.node",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w) {
      "use strict";
      var b = d.config();
      h.defaults(b, {
        actionType: "UPLOAD",
        allowMultipleInstances: !0,
        hideGotoLocationSingleSet: !0,
        hideGotoLocationMultiSet: !0,
      });
      var C = i.Model.extend({
          defaults: { parentCollection: null, container: null },
          constructor: function (S, P) {
            S || (S = {});
            var F = S.UploadFileCollection || n;
            i.Model.prototype.constructor.call(this, S, P);
            var D = (this.container = this.get("container")),
              L = this.get("parentCollection");
            (this.uploadFiles = new F()),
              (this.controller = new u({
                container: D,
                originatingView: this.get("originatingView"),
                context: this.get("context"),
              })),
              L &&
                ((this.originalCollectionUrl = h.result(L, "url")),
                this.listenTo(L, "reset", this._stopCollectionUpdate),
                this.listenTo(L.node, "request", this._stopCollectionUpdate)),
              (this._uploadCounts = { failed: 0, success: 0, complete: 0 });
          },
          close: function () {
            return this.onDestroy(), this.trigger("destroy"), !0;
          },
          onDestroy: function () {
            return this.uploadView && this.uploadView.destroy(), !0;
          },
          onUploadFileAdded: function (y) {
            y.promise()
              .done(h.bind(this.onFileUploadProcessed, this))
              .fail(h.bind(this.onFileUploadFailed, this));
          },
          addFilesToUpload: function (y, S) {
            var P = this,
              F = a.Deferred();
            if (
              ((y = this._validateFileList(y)),
              s.isActionInProgress(
                b.actionType,
                l.UploadNotAllowed,
                l.CommandTitleUpload
              ))
            )
              return F.resolve();
            if (y.length) {
              var D = this.setBlocker();
              return (
                this.addFilesToUploadCollection(y, S),
                this.resolveNamingConflicts(S)
                  .then(h.bind(this.checkAndHandleRequiredMetadata, this, S))
                  .then(h.bind(this.addToUpload, this))
                  .fail(function (L) {
                    L &&
                      (L.error
                        ? s.showMessage("error", L.error.message)
                        : L.userAction &&
                          L.userAction ===
                            "cancelAddOneItemWithRequiredMetadata"
                        ? P.trigger("metadata:cancelled")
                        : L.userAction &&
                          L.userAction === "closeMetadataActionView"
                        ? P.trigger("metadata:closed")
                        : L.userAction &&
                          L.userAction === "cancelResolveNamingConflicts" &&
                          P.trigger("resolve:naming:conflicts:cancelled"));
                  })
                  .always(function (L) {
                    D && D.unblockActions(), F.resolve(L), P.close();
                  }),
                F.promise()
              );
            }
            return this.close(), !1;
          },
          addFilesToUploadCollection: function (y, S) {
            return (
              h.each(
                y,
                function (P) {
                  var F = P,
                    D = F.container || (S && S.container) || this.container,
                    L = (S && S.collection) || this.get("parentCollection");
                  F.file && (P = F.file);
                  var Q = F.newName || P.newName;
                  this.uploadFiles.add(
                    {
                      file: P,
                      newName: Q,
                      name: Q || P.name,
                      newVersion: F.newVersion,
                      id: F.id,
                      extended_data: F.data || {},
                      collection: L,
                      subType: this.get("addableType") || F.type,
                      type: F.type,
                      targetLocation: { id: D.get("id"), url: g.getUrl(D) },
                    },
                    {
                      container: D,
                      connector: D.connector,
                      enforcedRequiredAttrs: !0,
                    }
                  );
                },
                this
              ),
              this.uploadFiles
            );
          },
          setBlocker: function () {
            var y = this.get("originatingView");
            return (
              (y && y.blockActions) || (y = void 0), y && y.blockActions(), y
            );
          },
          unSetBlocker: function () {
            var y = this.get("originatingView");
            (y && y.unblockActions) || (y = void 0), y && y.unblockActions();
          },
          resolveNamingConflicts: function (y) {
            y || (y = {});
            var S = this.uploadFiles;
            if (y.skipResolveNamingConflicts) {
              var P = a.Deferred();
              return (
                h.each(
                  S.models,
                  h.bind(function (L) {
                    this.status === "version" &&
                      ((L.attributes.id = this.itemId),
                      (L.attributes.newVersion = !0));
                  }, this)
                ),
                P.resolve(S)
              );
            } else {
              var F = S.length === 1 ? l.uploadCount : l.uploadCounts,
                D = new o({
                  h1Label: h.str.sformat(F, S.length),
                  container: y.container || this.container,
                  files: S,
                  originatingView: this.get("originatingView"),
                  excludeAddVersion: y.excludeAddVersion,
                });
              return D.run();
            }
          },
          _validateFileList: function (y) {
            if (!y || y.length === 0)
              return (
                e.debug("No upload files selected") && console.log(e.last), []
              );
            var S = [],
              P = y[0],
              F = P.name || (P.file && P.file.name) || (P.get && P.get("name"));
            return F ? y : (s.showMessage("error", l.invalidFileList), []);
          },
          checkAndHandleRequiredMetadata: function (y, S) {
            var P = this,
              F = a.Deferred(),
              D = this.get("originatingView");
            return (
              D && D._blockingCounter === 0 && D.blockActions(),
              csui.require(
                ["csui/widgets/metadata/metadata.add.document.controller"],
                function (L) {
                  var Q = new L();
                  Q.addItemsRequiredMetadata(S, {
                    container: (y && y.container) || P.container,
                    addableType: 144,
                    context: P.get("context"),
                    openMetadata: y && y.openMetadata,
                    inheritance: y && y.inheritance,
                  })
                    .then(function () {
                      return P.unSetBlocker(), S;
                    })
                    .done(F.resolve)
                    .fail(F.reject);
                },
                function (L) {
                  e.warn(
                    "Failed to load MetadataAddDocumentController. {0}",
                    L
                  ) && console.warn(e.last),
                    F.reject(L);
                }
              ),
              F.promise()
            );
          },
          addToUpload: function (y) {
            var S;
            if (y && y.length > 0) {
              var P,
                F = this,
                D = new Date().getTime(),
                L = this.get("originatingView"),
                Q =
                  L &&
                  L.largeFileSettingsModel &&
                  L.largeFileSettingsModel.get("largeFileSettings"),
                q = Q && Q.min_size,
                G = F.container?.get("type") === 136,
                N,
                W;
              G &&
                ((W = F.container.get("order_next")),
                (N = F.container.get("fileOrder")
                  ? F.container.get("fileOrder")
                  : 0)),
                (S = h.map(
                  y.models,
                  function (H) {
                    var z = a.Deferred();
                    if (
                      !H.get("id") ||
                      H.get("newName") ||
                      H.get("newVersion")
                    ) {
                      var Z = H.get("newName") || H.get("file").name,
                        te =
                          (!!H.get("file").type && H.get("file").type) ||
                          c.getMimeType(Z),
                        le = H.get("size") || H.get("file").size;
                      if (
                        (H.set("mime_type", te),
                        H.set("bundleNumber", D),
                        (H.uploadContainer = F.container),
                        G &&
                          W &&
                          !H.get("newVersion") &&
                          H.set("order_new", W + N++),
                        le > q)
                      ) {
                        var ge = {
                          size: le,
                          uploadKey: "",
                          state: "pending",
                          retryCount: 0,
                          fileChunks: { slicedFiles: [], total: 0 },
                        };
                        H.set("largeFile", ge);
                      }
                      if (
                        (e.debug("Object was added - {0}", Z) &&
                          console.log(e.last),
                        !P)
                      ) {
                        P = !0;
                        var Pe =
                          this.get("pageLeavingWarning") ||
                          l.pageLeavingWarning;
                        f.enable(Pe);
                      }
                      return (
                        this.controller.scheduleFileForUpload(H),
                        this.onUploadFileAdded(H),
                        H.promise()
                          .done(function (_e) {
                            z.resolve(_e);
                          })
                          .fail(function (_e) {
                            z.reject(_e);
                          }),
                        z.promise()
                      );
                    } else
                      e.debug("Object was skipped - {0}", H.name), z.reject(H);
                    return z.promise(S);
                  },
                  this
                )),
                G && L.container.set("fileOrder", N);
            } else
              e.debug("No files were upload. All have naming conflict") &&
                console.log(e.last);
            return this.showProgress(y), a.whenAll.apply(a, S);
          },
          onFileUploadProcessed: function (y) {
            if (!this.stopParentUpdate) {
              var S = y.get("collection"),
                P = this.get("parentCollection");
              if (
                (S || (S = P),
                S !== P ||
                  (P &&
                    typeof P.url == "function" &&
                    P.url() === this.originalCollectionUrl))
              ) {
                var F = y.container,
                  D = (this.container || F).get("id"),
                  L = F.get("parent_id");
                if ((L && L.id && (L = L.id), D == L))
                  S.findWhere({ id: F.get("id") }) ||
                    ((F.isLocallyCreated = !0),
                    S.unshift(F),
                    a(".csui-new-item").closest("tbody").scrollTop(0));
                else if (D == F.get("id")) {
                  var Q = !y.get("newVersion");
                  Q &&
                    ((y.node.isLocallyCreated = !0),
                    S.unshift(y.node),
                    a(".csui-new-item").closest("tbody").scrollTop(0));
                }
              }
            }
            this._increaseUploadCount("success");
          },
          onFileUploadFailed: function (y, S) {
            this.uploadFiles && this.uploadFiles.trigger("try:again"),
              this._increaseUploadCount("failed");
          },
          showProgress: function (y) {
            this.uploadView && this.uploadView.destroy();
            var S = {
              originatingView: this.get("originatingView"),
              actionType: this.get("actionType") || b.actionType,
              allowMultipleInstances: b.allowMultipleInstances,
              hideGotoLocationSingleSet: b.hideGotoLocationSingleSet,
              hideGotoLocationMultiSet: b.hideGotoLocationMultiSet,
              context: this.get("context"),
              nextNodeModelFactory: w,
            };
            s.showProgressPanel(y, S);
          },
          _stopCollectionUpdate: function () {
            this.stopParentUpdate = !1;
          },
          _increaseUploadCount: function (y) {
            var S = this.uploadFiles.length,
              P = this._uploadCounts;
            y === "failed" ? P.failed++ : P.success++,
              ++P.complete === S &&
                (f.disable(),
                r.channel("update:facets").trigger("update:facets")),
              this.close();
          },
        }),
        k = i.Collection.extend({ model: C, comparator: "sequence" });
      return k;
    }
  ),
  csui.define(
    "csui/controls/fileupload/fileupload",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/fileupload/impl/fileupload.collection",
    ],
    function (v, d, a, h) {
      "use strict";
      return {
        newUpload: function (i, e) {
          i || (i = {}),
            e || (e = {}),
            d.extend(e, {
              parentCollection: i.collection,
              container: i.container ? i.container.clone() : void 0,
              originatingView: i.originatingView,
              context: i.context || (e && e.context),
              skipProgressBar: !!i.skipProgressBar,
            }),
            this.collection || (this.collection = new h());
          var l = this.collection.add(e);
          return (
            l.listenToOnce(
              l,
              "destroy",
              function () {
                this.collection.remove(l);
              },
              this
            ),
            l
          );
        },
      };
    }
  ),
  csui.define(
    "csui/utils/dragndrop.supported.subtypes",
    ["csui/lib/underscore", "csui-ext!csui/utils/dragndrop.supported.subtypes"],
    function (v, d) {
      "use strict";
      var a = [
        0, 136, 141, 142, 144, 202, 749, 751, 800, 801, 1307, 1308, 30205,
      ];
      return d && (a = a.concat(v.flatten(d, !0))), a;
    }
  ),
  csui.define(
    "hbs!csui/controls/draganddrop/impl/draganddrop",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <p class="csui-messageBox"><span>' +
            i.escapeExpression(
              ((t =
                (t = n(l, "fileName") || (e != null ? n(e, "fileName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "fileName",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 35 },
                      end: { line: 3, column: 47 },
                    },
                  })
                : t)
            ) +
            `</span></p>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<p class="csui-messageBox"><span>' +
            i.escapeExpression(
              ((n =
                (n = s(l, "message") || (e != null ? s(e, "message") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 33 },
                      end: { line: 1, column: 44 },
                    },
                  })
                : n)
            ) +
            `</span></p>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "fileName") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 0 },
                  end: { line: 4, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial("csui_controls_draganddrop_impl_draganddrop", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/draganddrop/impl/uploaditems",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/controls/fileupload/fileupload",
      "csui/models/fileuploads",
      "i18n!csui/controls/draganddrop/impl/nls/lang",
      "csui/controls/conflict.resolver/conflict.resolver",
      "csui/models/namequery",
      "csui/utils/deepClone/deepClone",
    ],
    function (v, d, a, h, i, e, l, u) {
      "use strict";
      return {
        uploadFiles: function (r, t, n) {
          var s = h.newUpload(t, n);
          return s.addFilesToUpload(r, n);
        },
        uploadFilesDirectly: function (r, t, n) {
          var s = h.newUpload(t, n),
            o = s.addFilesToUploadCollection(r, n);
          return s.addToUpload(o);
        },
        handleResolveConflictsAndMetadata: function (r, t) {
          var n = v.Deferred();
          return (
            this.validateItems(r)
              ? (this.addDropItemsToCollection(r, t),
                this.resolveNamingConflicts(t)
                  .done(
                    d.bind(function (s) {
                      var o = d.filter(s.models, function (c) {
                        return c.get("isFolderEmpty");
                      });
                      o.length === s.length && (t.addableType = 0),
                        this.handleRequiredMetadata(this.uploadItems, t).done(
                          d.bind(function (c) {
                            n.resolve(c);
                          }, this)
                        );
                    }, this)
                  )
                  .fail(function (s) {
                    n.reject(s),
                      t.originatingView && t.originatingView.unblockActions();
                  }))
              : n.reject(),
            n.promise()
          );
        },
        validateItems: function (r, t) {
          return r && r.length;
        },
        addDropItemsToCollection: function (r, t) {
          return (
            (this.uploadItems = new i()),
            d.each(
              r,
              d.bind(function (n) {
                n.file
                  ? this.addFileToUploadCollection(n.file, t)
                  : this.addFolderToUploadCollection(n, t);
              }, this)
            ),
            this.uploadItems
          );
        },
        addFileToUploadCollection: function (r, t) {
          var n = r.newName;
          this.uploadItems.add(
            {
              file: r,
              newName: n,
              name: n || r.name,
              extended_data: r.data || {},
              collection: t.collection,
              subType: 144,
            },
            {
              container: t.container,
              connector: t.container.connector,
              enforcedRequiredAttrs: !0,
            }
          );
        },
        addFolderToUploadCollection: function (r, t) {
          this.uploadItems.add(
            {
              container: !0,
              name: r.get("name"),
              enforcedRequiredAttrsForFolders: r.get(
                "enforcedRequiredAttrsForFolders"
              ),
              extended_data: r.data || r.get("data") || {},
              collection: t.collection,
              subType: r.get("type"),
              subItems: r.subItems,
              isFolderEmpty: r.get("isFolderEmpty"),
            },
            {
              container: t.container,
              connector: t.container.connector,
              enforcedRequiredAttrs: !0,
            }
          );
        },
        resolveNamingConflicts: function (r) {
          var t = this.uploadItems,
            n =
              t.length === 1
                ? t.models[0].get("container")
                  ? e.uploadCountFolder
                  : e.uploadCount
                : e.uploadCountsItems,
            s = new l({
              h1Label: d.str.sformat(n, t.length),
              container: (r && r.container) || this.container,
              files: t,
              excludeAddVersionforFolders: r.excludeAddVersionforFolders,
              excludeAddVersion: r.excludeAddVersion,
              originatingView: r.originatingView,
            });
          return (this.resolveNameConflicts = !0), s.run();
        },
        validateNodes: function (r, t) {
          var n = [],
            s = [],
            o,
            c = v.Deferred();
          return (
            d.each(r, function (m) {
              m.data ? n.push(m) : s.push(m);
            }),
            (t = s.length ? s[0].container : t),
            (o = new u(
              { containerId: t.get("id") },
              { connector: t.connector }
            )),
            o.queryNames(s).always(function (m, f) {
              (n = m ? n.concat(m) : n), c.resolve(n, f);
            }),
            c.promise()
          );
        },
        handleRequiredMetadata: function (r, t) {
          var n = v.Deferred();
          return (
            t.originatingView &&
              t.originatingView._blockingCounter === 0 &&
              t.originatingView.blockActions(),
            csui.require(
              [
                "csui/widgets/metadata/impl/add.items/metadata.add.item.controller",
              ],
              function (s) {
                var o = new s();
                o.addItemsRequiredMetadata(r.models, {
                  container: t && t.container,
                  context: t.context,
                  openMetadata: t.openMetadata,
                  inheritance: t.inheritance,
                  addableType: t.addableType,
                })
                  .done(function () {
                    n.resolve(r);
                  })
                  .fail(function () {
                    t.originatingView && t.originatingView.unblockActions(),
                      n.reject();
                  });
              },
              function (s) {
                n.reject(s);
              }
            ),
            n.promise()
          );
        },
        create: function (r, t) {
          var n = t.container,
            s = v.Deferred(),
            o = r.node || r,
            c,
            m = r.get("extended_data");
          if (
            ((c = {
              name: r.get("newName") || r.get("name"),
              type: r.get("type") || 0,
              parent_id: n.get("id"),
              container: !0,
              collection: t.collection,
            }),
            m && d.deepExtend(c, m),
            !o.connector)
          ) {
            if (!n)
              throw new Error("Either node or container have to be connected.");
            n.connector.assignTo(o);
          }
          var f = o.save(void 0, { data: c, wait: !0, silent: !0 });
          return (
            s.fail(function (g, w) {
              w || f.abort();
            }),
            f
              .then(function (g, w, b) {
                return r.set("id", g.id), o.fetch({ refreshCache: !0 });
              })
              .done(function (g, w, b) {
                (o.isLocallyCreated = !0), s.resolve(o);
              })
              .fail(function (g, w, b) {
                var C = new a.RequestErrorMessage(g);
                s.reject(r, C);
              }),
            s.promise()
          );
        },
      };
    }
  ),
  csui.define(
    "css!csui/controls/draganddrop/impl/draganddrop",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/draganddrop/draganddrop.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/utils/log",
      "i18n!csui/controls/draganddrop/impl/nls/lang",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/fileupload/fileupload",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/dragndrop.supported.subtypes",
      "csui/utils/base",
      "csui/utils/commands/compound.document/compound.document.util",
      "csui/models/node/node.addable.type.collection",
      "csui/models/node/node.model",
      "hbs!csui/controls/draganddrop/impl/draganddrop",
      "csui/controls/draganddrop/impl/uploaditems",
      "csui-ext!csui/utils/contexts/doc.upload.ext",
      "css!csui/controls/draganddrop/impl/draganddrop",
      "csui/lib/jquery.when.all",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w) {
      "use strict";
      var b = a.defaults({}, v.config(), {
          detectLeaveDelay: 10,
          hideDropMessageDelay: 100,
          hideWarningAlert: !1,
          fileSubTypes: [144, 801, 1307],
          folderSubTypes: [800, 1308],
          dragEnable: !0,
          dragMaxFileSize: 100,
          dragMaxFiles: 500,
        }),
        C = h.ItemView.extend({
          template: f,
          className: "csui-dropMessage",
          ui: { message: ".csui-messageBox" },
          constructor: function (y) {
            h.ItemView.prototype.constructor.call(this, y),
              (this.collection = y.collection),
              (this.container = y.container),
              (this.addableTypes = y.addableTypes),
              (this.context = y.context),
              (this.visible = !1),
              (this.highlightedTarget = y.highlightedTarget),
              (this.parentView = y.originatingView || y.parentView),
              this.listenTo(
                this.options.container,
                "change:name",
                this._resetMessage
              );
          },
          setDragParentView: function (k, y) {
            return b.dragEnable
              ? ((this._parentEl =
                  (a.isString(y) && k.$(y)) ||
                  (y.length !== void 0 && y) ||
                  (y && d(y)) ||
                  k.$el),
                this.render(),
                k.csuiDropMessage ||
                  ((k.csuiDropMessage = this.$el),
                  this._parentEl.append(k.csuiDropMessage)),
                (this.parentView = k || this.parentView),
                this.parentView.csuiDropMessage.hide(),
                this.disable(),
                this._setDragEvents(),
                !0)
              : !1;
          },
          onDestroy: function () {
            this.shouldDragAndDrop() &&
              this._parentEl &&
              this._parentEl
                .off("dragover", this.dragOver)
                .off("dragleave", this.dragLeave)
                .off("drop", this.dragDrop);
          },
          stopListeningDragEvent: function (k, y) {
            d(k) &&
              y &&
              d(k)
                .off("dragover", y.dragOver)
                .off("dragleave", y.dragLeave)
                .off("drop", y.dragDrop);
          },
          _setDragEvents: function () {
            (this.dragOver = a.bind(this.onOverView, this)),
              (this.dragLeave = a.bind(this.onLeaveView, this)),
              (this.dragDrop = a.bind(this.onDropView, this)),
              this._parentEl
                .on("dragover", this.dragOver)
                .on("dragleave", this.dragLeave)
                .on("drop", this.dragDrop);
          },
          getSupportedSubType: function () {
            var k = { type: 144, type_name: "Document" };
            return k;
          },
          enable: function (k) {
            if (
              (this.visible ||
                (k !== !1 && this.trigger("drag:over"),
                this.parentView.csuiDropMessage.show(),
                (this.visible = !0)),
              this.canAdd())
            ) {
              var y = this.getSupportedSubType();
              (this.options.addableType = y.type),
                (this.options.addableTypeName = y.type_name);
            }
          },
          disable: function (k) {
            this.trigger("drag:leave", this),
              this.parentView.leaveViewTimeout ||
                (this.parentView.leaveViewTimeout = setTimeout(
                  a.bind(function () {
                    (this.parentView.leaveViewTimeout = void 0),
                      this.parentView.csuiDropMessage.hide();
                  }, this),
                  b.hideDropMessageDelay
                ));
          },
          shouldDragAndDrop: function () {
            return b.dragEnable;
          },
          canAdd: function () {
            return this.addableTypes &&
              this.addableTypes.length &&
              this._isSupportedType(this.addableTypes, n)
              ? !0
              : !this.addableTypes;
          },
          _isSupportedType: function (k, y) {
            var S = y.filter(function (P) {
              return k.get(P);
            });
            return S[0] !== void 0;
          },
          isDndSupportedContainer: function (k) {
            return d.inArray(k.get("type"), n) !== -1;
          },
          onOverView: function (k) {
            k.preventDefault(),
              k.stopPropagation(),
              this.parentView.leaveViewTimeout &&
                (clearTimeout(this.parentView.leaveViewTimeout),
                (this.parentView.leaveViewTimeout = void 0)),
              this.leaveViewTimeout
                ? (clearTimeout(this.leaveViewTimeout),
                  (this.leaveViewTimeout = void 0))
                : this.enable(!1);
            var y = k.originalEvent && k.originalEvent.dataTransfer,
              S = y.items,
              P = S && S.length === 1 && !S[0].type,
              F =
                S &&
                S.length &&
                a.all(S, function (N) {
                  return N.kind === "file";
                }),
              D = y && y.types,
              L =
                D &&
                D.length &&
                a.any(D, function (N) {
                  return N.toLowerCase() === "files";
                }),
              Q = l.dropInvalid;
            if (
              ((this.valid = (S && F) || L),
              (y.dropEffect = "copy"),
              !this.canAdd())
            ) {
              var q = this.isDndSupportedContainer(this.parentView.container);
              (this.valid = q && this.options.isSupportedRowView),
                (Q = l.dropNotPermitted);
            }
            var G = b.fileSubTypes.indexOf(this.container.get("type")) >= 0;
            (P && G) || (this.valid && S && S.length > 1 && G)
              ? (this.currentRowHighlightedTarget ||
                  ((this.currentRowHighlightedTarget = this.highlightedTarget),
                  (this.highlightedTarget = void 0)),
                this.parentView.addableTypes &&
                  !this._isSupportedType(
                    this.parentView.addableTypes,
                    b.fileSubTypes
                  ) &&
                  (this.valid = !1))
              : this.currentRowHighlightedTarget &&
                ((this.highlightedTarget = this.currentRowHighlightedTarget),
                (this.currentRowHighlightedTarget = void 0)),
                //CSCCustom-start CSUI0001: make highlight always on container
                this.highlightedTarget = ".csui-innertablecontainer",
                //CSCCustom-end
              this.valid && this._resetMessage({ items: S }),
              this.overViewTimeout ||
                (this.overViewTimeout = setTimeout(
                  a.bind(function () {
                    (this.overViewTimeout = void 0),
                      this.valid
                        ? (this.parentView.csuiDropMessage.hasClass(
                            "csui-disabled"
                          ) &&
                            this.parentView.csuiDropMessage.removeClass(
                              "csui-disabled"
                            ),
                          this.trigger("drag:over", this, {
                            disabled: !1,
                            highlightedTarget: this.highlightedTarget,
                          }),
                          this.parentView.csuiDropMessage.show(),
                          (this.visible = !0))
                        : (!this.parentView.csuiDropMessage.hasClass(
                            "csui-disabled"
                          ) &&
                            this.parentView.csuiDropMessage.addClass(
                              "csui-disabled"
                            ),
                          this.parentView.csuiDropMessage.html(
                            this.template({ message: Q })
                          ),
                          this.parentView.csuiDropMessage.show(),
                          (this.visible = !0),
                          this.trigger("drag:over", this, { disabled: !0 }));
                  }, this),
                  b.detectLeaveDelay
                ));
          },
          onLeaveView: function (k) {
            k.preventDefault(),
              k.stopPropagation(),
              this.leaveViewTimeout ||
                (this.leaveViewTimeout = setTimeout(
                  a.bind(function () {
                    (this.leaveViewTimeout = void 0), this.disable(k);
                  }, this),
                  b.detectLeaveDelay
                )),
              this.overViewTimeout &&
                (clearTimeout(this.overViewTimeout),
                (this.overViewTimeout = void 0));
          },
          onDropView: function (k) {
            if (
              (k.preventDefault(),
              k.stopPropagation(),
              this.overViewTimeout &&
                (clearTimeout(this.overViewTimeout),
                (this.overViewTimeout = void 0)),
              this.valid)
            ) {
              var y = this,
                S = (k.originalEvent && k.originalEvent.dataTransfer) || {
                  files:
                    (k.originalEvent &&
                      k.originalEvent.target &&
                      k.originalEvent.target.files) ||
                    [],
                },
                P =
                  b.fileSubTypes.indexOf(this.container.get("type")) >= 0
                    ? y.parentView.container
                    : y.container,
                F = S.files.length === 1,
                D =
                  F &&
                  S.items &&
                  S.items[0].webkitGetAsEntry() &&
                  S.items[0].webkitGetAsEntry().isFile,
                L = window.location.href.toLowerCase().indexOf("http") === 0;
                //CSCCustom-start CSUI0002
                D = false; //block different file replacing add version, P = dataTransferEntryIsFile
                var dataTransfer = S;
                var listOfFile = dataTransfer.files; //get the files before it gets overwritten
                //CSCCustom-end
                //CSCCustom-start CSUI0003: block folder drag n drop
                var hasFolder = Object.values(listOfFile).filter(function(item) {return item.type == "" && !item.name.toLowerCase().match(".msg$")}).length;
                if(hasFolder) {
                    u.showMessage('warning', "No folders can be dropped here.");
                    y.parentView.unblockActions();
                    this.disable();
                    return;
                }
                //CSCCustom-end
              if (
                (P &&
                  P.get("type") === 136 &&
                  !P.get("fileOrder") &&
                  o.getOrderNextValue(P),
                (S.dropEffect = "copy"),
                S.files.length > b.dragMaxFiles)
              ) {
                this.showFileLimitErrorMessage(), this.disable();
                return;
              }
              if (
                y.canAdd() ||
                (y.isDndSupportedContainer(y.parentView.container) &&
                  y.options.isSupportedRowView)
              )
                if (D && b.fileSubTypes.indexOf(y.container.get("type")) >= 0)
                  y.parentView.blockActions(),
                    y.checkFiles(S).always(function (G) {
                      y.container
                        .fetch()
                        .done(function () {
                          if (G.length) {
                            const Z = G[0].file;
                            if (Z.skipUpload) {
                              y.parentView.unblockActions(),
                                u.showMessage(
                                  "error",
                                  a.str.sformat(Z.errorMessage)
                                );
                              return;
                            }
                            var N = {},
                              W = y.container.get("name"),
                              H = H || {};
                            (N = {
                              container: y.container,
                              context: y.context,
                              originatingView: y.parentView,
                            }),
                              (!y.options.isSupportedRowView ||
                                b.fileSubTypes.indexOf(
                                  y.container.get("type")
                                ) >= 0) &&
                                (N.collection = y.collection);
                            var z = y.container.actions.findWhere({
                              signature: "addversion",
                            });
                            if (z) {
                              if (
                                ((N.actionType = z.actionType || "ADD_VERSION"),
                                u.isActionInProgress(
                                  N.actionType,
                                  l.AddVersionNotAllowed,
                                  l.dialogTitle
                                ))
                              )
                                return d.Deferred().resolve().promise();
                              t.confirmQuestion(
                                a.str.sformat(l.dialogTemplate, W),
                                l.dialogTitle,
                                {}
                              ).done(function (te) {
                                y._addVersionToFile(Z, N, H);
                              });
                            } else
                              P.get("reserved")
                                ? u.showMessage(
                                    "warning",
                                    a.str.sformat(
                                      l.addVersionDeniedForReservedItem
                                    )
                                  )
                                : u.showMessage(
                                    "warning",
                                    a.str.sformat(l.addVersionDenied, W)
                                  );
                          }
                        })
                        .fail(function (N) {
                          if (N) {
                            var W = new s.Error(N);
                            u.showMessage("error", W.message);
                          }
                        })
                        .always(function () {
                          y.parentView.unblockActions();
                        });
                    });
                else if (!S.items || !L) {
                  var Q = S.types[0];
                  y.checkFiles(S).always(function (G) {
                    var N = a.filter(G, function (Z) {
                      return !(Z instanceof Error);
                    });
                    if (N && N.length) {
                      if (N.length) {
                        y.parentView.blockActions();
                        var W = {},
                          H = P.get("name"),
                          z = z || {};
                        (W = {
                          container: P,
                          context: y.context,
                          originatingView: y.parentView,
                        }),
                          (!y.options.isSupportedRowView ||
                            b.fileSubTypes.indexOf(y.container.get("type")) >=
                              0) &&
                            (W.collection = y.collection),
                          y
                            .getAddableTypes(P)
                            .then(function (Z) {
                              Z && Z.length && y._isSupportedType(Z, n)
                                ? ((W.skipProgressBar = !1),
                                  N.length &&
                                    g.uploadFiles(N, W).always(function (te) {
                                      var le = !W.collection;
                                      le && W.container.fetch();
                                    }))
                                : u.showMessage(
                                    "warning",
                                    a.str.sformat(l.addFileDenied, H)
                                  ),
                                y.parentView.unblockActions();
                            })
                            .fail(function (Z) {
                              if ((y.parentView.unblockActions(), Z)) {
                                var te = new s.Error(Z);
                                u.showMessage("error", te.message);
                              }
                            });
                      }
                    } else
                      s.isIE11() && Q === "Files"
                        ? u.showMessage("error", l.ieFolderSupportError)
                        : s.isSafari() && Q === "Files"
                        ? u.showMessage("error", l.safariFolderSupportError)
                        : u.showMessage("error", l.dropNotPermitted);
                  });
                } else
                  this._prepareForResolveConflicts(S, P)
                    .done(function (G, N, W) {
                      if (W > b.dragMaxFiles) {
                        y.showFileLimitErrorMessage();
                        return;
                      }
                      var H, z;
                      G.length &&
                        (H = a.find(G, function (ie) {
                          return !ie.file;
                        }));
                      var Z = {},
                        te = P.get("name"),
                        le = le || {};
                      Z = {
                        container: P,
                        context: y.context,
                        originatingView: y.parentView,
                        excludeAddVersionforFolders:
                          y.options.excludeAddVersionforFolders || !!H,
                        excludeAddVersion: y.options.excludeAddVersion,
                      };
                      const { isEnabled: ge, execute: Pe } = w?.[0] ?? {},
                        _e = typeof ge == "function" && ge(Z, le);
                      _e || y.parentView.blockActions(),
                        (!y.options.isSupportedRowView ||
                          b.fileSubTypes.indexOf(y.container.get("type")) >=
                            0) &&
                          (Z.collection = y.collection),
                        y
                          .getAddableTypes(P)
                          .then(function (ie) {
                            //CSCCustom-start CSUI0002: passing files to csui-metadata
                            var status = Z;
                            status.container.files = listOfFile;
                            if(status.container.attributes.securityInformation) { //make sure to empty the variable
                                delete status.container.attributes.securityInformation;
                            }
                            //CSCCustom-end
                            if (
                              ie &&
                              ie.length &&
                              (ie.find("type", [144, 801]) || ie.get(0))
                            ) {
                              if (_e) {
                                y.getFiles(N).then((ae) => {
                                  ae &&
                                    ae.length > 0 &&
                                    typeof Pe == "function" &&
                                    Pe(ae, Z, le);
                                });
                                return;
                              }
                              g.handleResolveConflictsAndMetadata(G, Z)
                                .done(function (ae) {
                                  N = N.filter(function (pe) {
                                    var ke = ae.findWhere({ name: pe.name });
                                    return (pe.node = ke), !!pe.node;
                                  });
                                  var fe = y.selectFiles(N, P, ae);
                                  fe.always(function (pe, ke, Re, Le) {
                                    if (
                                      (y.parentView.unblockActions(),
                                      pe && pe.length)
                                    )
                                      y.parentView.blockActions(),
                                        pe &&
                                          g
                                            .validateNodes(pe, P)
                                            .done(function (Ke, $e) {
                                              (le.skipProgressBar = !1),
                                                (le.openMetadata = !1),
                                                (le.inheritance = "original"),
                                                (le.UploadFileCollection =
                                                  y.options.UploadFileCollection),
                                                Ke.length &&
                                                  ((le.skipResolveNamingConflicts =
                                                    !0),
                                                  g
                                                    .uploadFilesDirectly(
                                                      Ke,
                                                      Z,
                                                      le
                                                    )
                                                    .always(function (He) {
                                                      y.updateChildrenCount(
                                                        Le,
                                                        Z
                                                      );
                                                    })),
                                                y.parentView.unblockActions();
                                            });
                                    else if (Re) {
                                      if (
                                        (y.updateChildrenCount(Le, Z), Re === 1)
                                      ) {
                                        var De =
                                          Le[0].get("newName") ||
                                          Le[0].get("name");
                                        z = a.str.sformat(
                                          l.OneFolderSuccessfullyUploaded,
                                          De
                                        );
                                      } else
                                        z = a.str.sformat(
                                          l.AllFoldersSuccessfullyUploaded,
                                          Re
                                        );
                                      u.showMessage("success", z);
                                    }
                                    ke.length &&
                                      ((z =
                                        ke.length === 1
                                          ? l.FolderCreationError
                                          : l.MultipleFolderCreationError),
                                      u.showMessage(
                                        "error",
                                        a.str.sformat(z, ke.length)
                                      ));
                                  });
                                })
                                .fail(function (ae) {
                                  if ((y.parentView.unblockActions(), ae)) {
                                    var fe = new s.Error(ae);
                                    fe.message &&
                                      u.showMessage("error", fe.message);
                                  }
                                });
                            } else
                              y.parentView.unblockActions(),
                                u.showMessage(
                                  "warning",
                                  a.str.sformat(l.addFileDenied, te)
                                );
                          })
                          .fail(function (ie) {
                            if ((y.parentView.unblockActions(), ie)) {
                              var ae = new s.Error(ie);
                              ae.message && u.showMessage("error", ae.message);
                            }
                          });
                    })
                    .fail(function (G) {
                      if ((y.parentView.unblockActions(), G)) {
                        var N = new s.Error(G);
                        N.message && u.showMessage("error", N.message);
                      }
                    });
              else {
                var q = y.container.get("name");
                u.showMessage("error", a.str.sformat(l.addTypeDenied, q));
              }
            }
            this.disable();
          },
          getFiles: async function (k) {
            let y = [];
            try {
              return (
                k.forEach((S) => {
                  const P = new Promise((F, D) => S.file(F, D));
                  y.push(P);
                }),
                await Promise.all(y)
              );
            } catch (S) {
              console.log(S);
            }
          },
          checkFileSizeLimit: function (k, y) {
            k &&
              k.size > b.dragMaxFileSize * 1048576 &&
              !k.skipUpload &&
              ((k.skipUpload = !0),
              (k.errorMessage = a.str.sformat(y, b.dragMaxFileSize)));
          },
          showFileLimitErrorMessage: function () {
            const k =
                b.dragMaxFiles === 1
                  ? l.dragMaxSingleFileError
                  : l.dragMaxFilesError,
              y = a.str.sformat(k, b.dragMaxFiles);
            u.showMessage("error", a.str.sformat(y));
          },
          getAddableTypes: function (k) {
            var y = d.Deferred();
            if (this.addableTypes) y.resolve(this.addableTypes);
            else if (!this.addableTypes) {
              var S = new c(void 0, { node: k });
              S.fetch()
                .done(function () {
                  y.resolve(S);
                })
                .fail(function (P) {
                  y.reject(P);
                });
            }
            return y.promise();
          },
          _addVersionToFile: function (k, y, S) {
            (b.actionType = y.actionType),
              csui.require(
                ["csui/controls/fileupload/impl/addversion.controller"],
                function (P) {
                  var F = new P({
                    view: y.originatingView,
                    selectedNode: y.container,
                  });
                  return F.uploadFile(k, b);
                }
              );
          },
          selectFiles: function (k, y, S) {
            return this._traverseItems(k, y, S) || this.checkFiles(k);
          },
          _prepareForResolveConflicts: function (k, y) {
            var S = k.items,
              P = d.Deferred(),
              F = [],
              D = [],
              L = [],
              Q = b.folderSubTypes.indexOf(y.get("type")) >= 0;
            const q = this;
            let G = 0;
            return (
              S &&
                (a.each(
                  S,
                  function (N) {
                    var W = d.Deferred(),
                      H =
                        (N.webkitGetAsEntry && N.webkitGetAsEntry()) ||
                        (N.getAsEntry && N.getAsEntry());
                    if (H) {
                      if ((F.push(W), L.push(H), H.isFile))
                        D.push({
                          file: { name: H.name, type: N.type },
                          container: y,
                        }),
                          G++,
                          W.resolve();
                      else if (H.isDirectory) {
                        var z = H.createReader(),
                          Z = {
                            type: Q ? y.get("type") : 0,
                            type_name: Q ? y.get("type_name") : "Folder",
                            container: !0,
                            name: H.name,
                            parent_id: y.get("id"),
                            parent: y,
                          };
                        z.readEntries(
                          function (te) {
                            const le = te.length > 0;
                            le
                              ? (q
                                  .getFilesCount(te)
                                  .then((ge) => {
                                    (G += ge), W.resolve();
                                  })
                                  .catch((ge) => {
                                    var Pe = new s.Error(ge);
                                    u.showMessage("error", Pe.message),
                                      W.reject();
                                  }),
                                a.extend(Z, {
                                  enforcedRequiredAttrsForFolders: !0,
                                }))
                              : a.extend(Z, { isFolderEmpty: !0 }),
                              (Z = new m(Z, { connector: y.connector })),
                              (Z.parent = y),
                              D.push(Z),
                              !le && W.resolve();
                          },
                          function (te) {
                            if (te) {
                              var le = new s.Error(te);
                              u.showMessage("error", le.message);
                            }
                            W.reject();
                          }
                        );
                      }
                    }
                  },
                  this
                ),
                d.when
                  .apply(d, F)
                  .done(function () {
                    P.resolve(D, L, G);
                  })
                  .fail(P.reject)),
              P.promise()
            );
          },
          getFilesCount: async function (k) {
            let y = 0;
            const S = [...k];
            for (; S.length > 0 && y <= b.dragMaxFiles; ) {
              const P = S.shift();
              if (P.isDirectory) {
                const F = P.createReader(),
                  D = await this.readEntriesAsync(F);
                S.push(...D);
              } else y++;
            }
            return y;
          },
          readEntriesAsync: function (k) {
            return new Promise((y, S) => {
              k.readEntries(
                (P) => {
                  y(P);
                },
                function (P) {
                  S(P);
                }
              );
            });
          },
          _traverseItems: function (k, y, S) {
            var P = d.Deferred(),
              F = 0,
              D = [],
              L = this,
              Q = [],
              q = [],
              G = 0;
            if (
              k &&
              a.every(
                k,
                function (z) {
                  if (z) {
                    var Z = S.findWhere({ name: z.name });
                    return (
                      (z.newName = Z.get("newName") || z.name),
                      (z.node = Z),
                      H(".", y, z),
                      !0
                    );
                  }
                },
                this
              )
            )
              return (
                F || P.resolve(),
                P.then(function () {
                  var z = "reject";
                  return (
                    D.length && (z = "resolve"),
                    d.Deferred()[z](D, Q, G, q).promise()
                  );
                })
              );
            function N() {
              return ++F;
            }
            function W() {
              F && --F, F || P.resolve();
            }
            function H(z, Z, te) {
              N();
              var le = te.node,
                ge = le && le.get("newName"),
                Pe = le && le.get("newVersion"),
                _e = !1;
              if (
                ((Z.subItems = Z.subItems ? Z.subItems : []),
                (z = z + "/" + (te.newName || te.name)),
                te.isFile)
              )
                return (
                  te.file(
                    function (ke) {
                      L.checkFileSizeLimit(ke, l.dragFileSizeError),
                        le
                          ? D.push({
                              file: ke,
                              newName: ge || te.name,
                              id: Pe && le.get("id"),
                              newVersion: Pe,
                              data: le.get("extended_data"),
                              type: le.get("type"),
                            })
                          : D.push({
                              file: ke,
                              container: Z,
                              newName: ge || te.name,
                            }),
                        Z.subItems.push({ file: ke, container: Z }),
                        W();
                    },
                    function (ke) {
                      var Re = {
                        name: te.name,
                        container: Z,
                        error: new Error(ke),
                        isFile: te.isFile,
                      };
                      Q.push(Re), W();
                    }
                  ),
                  !0
                );
              if (te.isDirectory) {
                var ie = te.createReader(),
                  ae = {
                    container: !0,
                    name: ge || te.name,
                    parent_id: Z.get("id"),
                    parent: Z,
                    enforcedRequiredAttrsForFolders: !0,
                  },
                  fe = b.folderSubTypes.indexOf(Z.get("type")) >= 0;
                (ae =
                  te.node || new m(ae, { connector: L.parentView.connector })),
                  (ae.parent = Z),
                  ae.set(
                    {
                      type: fe ? Z.get("type") : 0,
                      type_name: fe ? Z.get("type_name") : "Folder",
                    },
                    { silent: !0 }
                  );
                var pe = {};
                (_e = L.parentView.container.get("id") === Z.get("id")),
                  (pe = {
                    collection: _e ? L.collection : void 0,
                    container: Z,
                    context: L.context,
                    originatingView: L.parentView,
                  }),
                  g
                    .create(ae, pe)
                    .done(function (ke) {
                      if (ke.get("id")) {
                        G++,
                          Z.subItems.push(ke),
                          (ke.isLocallyCreated = !0),
                          _e && (L.collection.unshift(ke), q.push(ke));
                        var Re = [],
                          Le = function () {
                            ie.readEntries(
                              function (De) {
                                De.length
                                  ? ((ke.hasEntries = !0),
                                    (Re = Re.concat(De)),
                                    Le())
                                  : (Re.forEach(H.bind(L, z, ke)), W());
                              },
                              function (De) {
                                if (De) {
                                  var Ke = new s.Error(De);
                                  u.showMessage("error", Ke.message);
                                }
                                W();
                              }
                            );
                          };
                        Le();
                      } else Q.push(ke), W();
                    })
                    .fail(function (ke, Re) {
                      (ke.error = Re), Q.push(ke), W();
                    });
              } else W();
            }
          },
          checkFiles: function (k) {
            var y = k.files;
            if (y)
              return d.whenAll.apply(d, a.map(y, a.bind(S, this))).then(
                function (P) {
                  return P;
                },
                function (P) {
                  return d.Deferred().reject(P).promise();
                }
              );
            return d.Deferred().reject([]).promise();
            function S(P) {
              var F = new FileReader(),
                D = d.Deferred(),
                L,
                Q = {};
              if (
                (this.checkFileSizeLimit(P, l.dragFileAddVersionError),
                P.size === 0)
              ) {
                var q = new Error("size is 0");
                return (q.file = P), D.reject(q);
              }
              F.addEventListener("load", function () {
                (Q.file = P),
                  (Q.container = this.container),
                  D.resolve(Q),
                  (L = !0),
                  F.abort();
              }),
                F.addEventListener("error", function () {
                  if (!L) {
                    var H = new Error("No file");
                    (H.file = P), D.reject(H);
                  }
                });
              try {
                var G = Math.min(P.size, 512),
                  N = P.slice(0, G);
                F.readAsArrayBuffer(N);
              } catch (H) {
                var W = new Error(H.message);
                (W.file = P), D.reject(W);
              }
              return D.promise();
            }
          },
          _resetMessage: function (k) {
            if (this._isRendered) {
              var y = this.parentView.csuiDropMessage;
              y &&
                y.length &&
                y.html(this.template(this._getDropPossibleMessage(k)));
            }
          },
          _getDropPossibleMessage: function (k) {
            var y = k && k.items,
              S = y && y.length,
              P = S === 1 && !y[0].type,
              F = function () {
                return S && S > 1
                  ? l.MultipleFilesDropMessage
                  : S && P
                  ? l.singleFolderDropMessage
                  : S
                  ? l.singleFileDropMessage
                  : l.defaultDropMessage;
              },
              D = {},
              L = b.fileSubTypes.indexOf(this.container.get("type")) >= 0;
            return (
              (D.fileName =
                (S && S > 1 && L) || (L && P)
                  ? this.parentView.container.get("name")
                  : this.container.get("name")),
                  //CSCCustom-start CSUI0001: make highlight always on container
                  D.fileName = this.parentView.container? this.parentView.container.get('name') : this.container.get("name"),
                  //CSCCustom-end
              (D.message = F()),
              D
            );
          },
          updateChildrenCount: function (k, y) {
            y.collection
              ? a.each(k, function (S) {
                  S.hasEntries && S.fetch();
                })
              : y.container.fetch();
          },
        });
      return C;
    }
  ),
  csui.define("csui/controls/settings/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/settings/impl/nls/root/lang", {
    summaryDescriptionTitle: "Summary / description",
    columnSettingsTitle: "Column settings",
    selectColumns: "Select columns",
    searchBackToTooltip: "Go back to '{0}'",
    searchBackToAria: "Go back to '{0}'",
    addAvailableColumns: "Add columns",
    addColumnsAria: "Add table columns to show",
    removeColumn: "Remove '{0}'",
    removeColumnAria: "Remove column '{0}' ",
    removeColumnMenuAria: "Remove column '{0}' from menu",
    SearchBackToolTip: "Back",
    SearchBackAria: "Close",
    SettingsBackAria: "column settings: Go back to search settings menu",
    SummaryDescriptionBackAria: "Go back to search settings menu",
    selectcolumnsbackaria: "select Columns: Go back to column settings menu",
    selected: "Selected",
    SummaryOnly: "Summaries only",
    SummaryPreferred: "Summaries preferred",
    DescriptionOnly: "Descriptions only",
    DescriptionPreferred: "Descriptions preferred",
    SummaryAndDescription: "Summaries and descriptions",
    settingLabels: {
      standard: "Standard",
      list: "List",
      pinnedColumns: "Pinned columns",
    },
  }),
  csui.define(
    "hbs!csui/controls/settings/available.columns/impl/available.columns",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="column-header">
  <div class="icon arrow_back" tabindex="0" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backToButtonTitle") ||
                  (e != null ? n(e, "backToButtonTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backToButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 72 },
                    },
                  })
                : t)
            ) +
            '"  aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backToButtonAria") ||
                  (e != null ? n(e, "backToButtonAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backToButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 87 },
                      end: { line: 2, column: 107 },
                    },
                  })
                : t)
            ) +
            `" role="button"></div>
  <div class="column-title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 35 },
                      end: { line: 3, column: 44 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 46 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</div>
  <div class="selected-column-count"></div>
</div>
<div class="columns-list csui-normal-scrolling binf-list-group" role="menu" >
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_available.columns_impl_available.columns",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/available.columns/impl/available.column",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <span class="column-label">
    <span class="csui-column-label-category">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "categoryName") ||
                  (e != null ? n(e, "categoryName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "categoryName",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 45 },
                      end: { line: 5, column: 61 },
                    },
                  })
                : t)
            ) +
            `</span>
    <span class="csui-column-label-attribute">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "attributeName") ||
                  (e != null ? n(e, "attributeName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "attributeName",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
  </span>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="column-label">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 29 },
                      end: { line: 9, column: 37 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="column-item-container" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 42 },
                      end: { line: 1, column: 50 },
                    },
                  })
                : n)
            ) +
            `">
  <span class="icon icon-listview-checkmark"></span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "hasAttribute") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 10, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            "</div>"
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_available.columns_impl_available.column",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/settings/available.columns/available.columns.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/utils/base",
      "csui/controls/globalmessage/globalmessage",
      "i18n!csui/controls/settings/impl/nls/lang",
      "hbs!csui/controls/settings/available.columns/impl/available.columns",
      "hbs!csui/controls/settings/available.columns/impl/available.column",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = h.View.extend({
          template: r,
          attributes: {
            tabindex: "0",
            role: "checkbox",
            "aria-checked": "false",
          },
          className: "column-item",
          triggers: {
            click: "column:add",
            keydown: {
              event: "keydown:item",
              stopPropagation: !1,
              preventDefault: !1,
            },
          },
          templateContext: function () {
            var c = this.model.get("name"),
              m = c && c.replace(/\s*:[^:]*/g, ""),
              f = c && c.replace(/^[^:]*:\s*/, ""),
              g = m !== f;
            return {
              name: c,
              categoryName: m,
              attributeName: f,
              hasAttribute: g,
            };
          },
          constructor: function (m) {
            h.View.apply(this, arguments);
          },
        }),
        n = h.CollectionView.extend({
          childView: t,
          childViewEvents: {
            "column:add": "onColumnAdd",
            "keydown:item": "onChildViewKeydown",
          },
          attributes: { role: "presentation" },
          constructor: function (m) {
            h.CollectionView.apply(this, arguments), (this.focusIndex = 0);
          },
          onColumnAdd: function (c) {
            c.$el.toggleClass("selected");
            var m = c.$el.hasClass("selected");
            m ? c.$el.attr("aria-checked", !0) : c.$el.attr("aria-checked", !1),
              m
                ? (c.model.set({ isNew: !0 }),
                  this.options.availableSelectedColumnsCollection.add(c.model),
                  c.model.get("key") === "OTName"
                    ? this.options.selectedColumnsCollection.findWhere({
                        key: "OTMIMEType",
                      })
                      ? this.options.selectedColumnsCollection.add(c.model, {
                          at: 1,
                        })
                      : this.options.selectedColumnsCollection.add(c.model, {
                          at: 0,
                        })
                    : c.model.get("key") === "OTMIMEType"
                    ? this.options.selectedColumnsCollection.add(c.model, {
                        at: 0,
                      })
                    : this.options.selectedColumnsCollection.add(c.model))
                : (c.model.set({ isNew: !1 }),
                  this.options.availableSelectedColumnsCollection.remove(
                    c.model
                  ),
                  this.options.selectedColumnsCollection.remove(c.model)),
              (this.options.searchResultsView.headerView.data.display_regions =
                "{" +
                this.options.selectedColumnsCollection
                  .pluck("key")
                  .map(function (f) {
                    return "'" + f + "'";
                  })
                  .join(",") +
                "}");
          },
          onBeforeDestroy: function () {
            this.options.availableSelectedColumnsCollection &&
              (this.collection.remove(
                this.options.availableSelectedColumnsCollection.models
              ),
              this.options.availableSelectedColumnsCollection.reset());
          },
          onChildViewKeydown: function (c, m) {
            var f = this.$el.find("*[tabindex]");
            switch (m.which) {
              case 27:
                this.el
                  .closest(".csui-search-settings")
                  .querySelector(".csui-setting-icon")
                  .focus(),
                  this.options.settingsView.triggerMethod("close:menu", m),
                  m.preventDefault(),
                  m.stopPropagation();
                break;
              case 13:
              case 32:
                this.onColumnAdd(c), m.preventDefault(), m.stopPropagation();
                break;
              case 38:
                this.focusIndex > 0 && --this.focusIndex,
                  v(f[this.focusIndex]).trigger("focus"),
                  m.preventDefault(),
                  m.stopPropagation();
                break;
              case 40:
                this.focusIndex < f.length - 1 && ++this.focusIndex,
                  v(f[this.focusIndex]).trigger("focus"),
                  m.preventDefault(),
                  m.stopPropagation();
                break;
              case 9:
                this.$el
                  .parents(".available-columns-container")
                  .find(".arrow_back")
                  .trigger("focus"),
                  m.preventDefault(),
                  m.stopPropagation();
                break;
            }
          },
        }),
        s = h.View.extend({
          constructor: function () {
            h.View.apply(this, arguments),
              this.listenTo(
                this.options.availableSelectedColumnsCollection,
                "update",
                this.render
              );
          },
          templateContext: function () {
            return {
              count:
                this.options.availableSelectedColumnsCollection.length || "",
              label: l.selected,
            };
          },
          template: d.template(
            "<span title='<%=label%> <%=count%>'><%=count%></span>"
          ),
        }),
        o = h.View.extend({
          className: "csui-available-column",
          template: u,
          templateContext: function () {
            return {
              label: l.selectColumns,
              available: this.options.availableColumns,
              backToButtonTitle: d.str.sformat(
                l.searchBackToTooltip,
                l.columnSettingsTitle
              ),
              backToButtonAria: l.selectcolumnsbackaria,
            };
          },
          regions: {
            columnsList: ".columns-list",
            selectedColumnsCountView: ".selected-column-count",
          },
          ui: { backArrow: ".arrow_back" },
          events: {
            "keydown @ui.backArrow": "onKeyDownArrow",
            "click @ui.backArrow": "showSelectedColumns",
            keydown: "onKeyInView",
          },
          onKeyDownArrow: function (c) {
            var m = c.keyCode,
              f = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length;
            f &&
              (m === 13 || m === 32 || m === 37) &&
              (this.showSelectedColumns(c),
              c.preventDefault(),
              c.stopPropagation());
          },
          onKeyInView: function (c) {
            var m = this.$el.find(".column-item*[tabindex]"),
              f = 0;
            switch (c.which) {
              case 27:
                this.el
                  .closest(".csui-search-settings")
                  .querySelector(".csui-setting-icon")
                  .focus(),
                  this.options.settingsView.triggerMethod("close:menu", c),
                  c.preventDefault(),
                  c.stopPropagation();
                break;
              case 9:
                (this.availableColumnsCollectionView.focusIndex = 0),
                  v(m[f]).trigger("focus"),
                  c.preventDefault(),
                  c.stopPropagation();
                break;
            }
          },
          constructor: function (m) {
            h.View.apply(this, arguments),
              (this.options.availableSelectedColumnsCollection =
                new a.Collection());
          },
          showSelectedColumns: function (c) {
            var m = new FormData(),
              f =
                this.options.searchResultsView.headerView.data.display_regions,
              g = !!this.options.selectedColumnsCollection.filter({ isNew: !0 })
                .length,
              w = this;
            g &&
              f &&
              (this.options.searchResultsView.blockActions(),
              m.append("display_regions", f),
              this.options.settings
                .save(null, {
                  parse: !1,
                  data: m,
                  processData: !1,
                  cache: !1,
                  contentType: !1,
                })
                .done(
                  d.bind(function (b) {
                    (w.options.searchResultsView.collection.settings_changed =
                      !0),
                      w.options.tableCollection.fetch(),
                      (w.options.searchResultsView.headerView.data = {}),
                      w.options.searchResultsView.unblockActions();
                  }, this)
                )
                .fail(function (b) {
                  (b = new i.Error(b)),
                    e.showMessage("error", b.message),
                    w.options.searchResultsView.unblockActions();
                })),
              this.options.selectedColumnsCollection &&
                (this.options.selectedColumnsCollection.add(
                  this.options.collection.remove(
                    this.options.availableSelectedColumnsCollection.models
                  )
                ),
                this.options.availableSelectedColumnsCollection.reset()),
              this.options.settingsView.showSettings(
                "selectedColumnsContainer",
                this.options.selectedColumnView
              );
          },
          onRender: function () {
            (this.availableColumnsCollectionView = new n(this.options)),
              this.showChildView(
                "columnsList",
                this.availableColumnsCollectionView
              ),
              this.showChildView(
                "selectedColumnsCountView",
                new s({
                  availableSelectedColumnsCollection:
                    this.options.availableSelectedColumnsCollection,
                })
              );
          },
        });
      return o;
    }
  );
csui.define(
  "csui/lib/jquery.dataTables/js/jquery.dataTables",
  ["csui/lib/jquery"],
  function (v) {
    return (
      (function (d, a, h) {
        (function (i) {
          "use strict";
          v && !v.fn.dataTable && i(v);
        })(function (i) {
          "use strict";
          var e,
            l,
            u,
            r,
            t,
            n = {},
            s = /[\r\n]/g,
            o = /<.*?>/g,
            c = /^[\w\+\-]/,
            m = /[\w\+\-]$/,
            f = new RegExp(
              "(\\" +
                [
                  "/",
                  ".",
                  "*",
                  "+",
                  "?",
                  "|",
                  "(",
                  ")",
                  "[",
                  "]",
                  "{",
                  "}",
                  "\\",
                  "$",
                  "^",
                  "-",
                ].join("|\\") +
                ")",
              "g"
            ),
            g = /[',$%\u2009\u202F]/g,
            w = function (p) {
              return !p || p === !0 || p === "-";
            },
            b = function (p) {
              var _ = parseInt(p, 10);
              return !isNaN(_) && isFinite(p) ? _ : null;
            },
            C = function (p, _) {
              return (
                n[_] || (n[_] = new RegExp(vi(_), "g")),
                typeof p == "string" && _ !== "."
                  ? p.replace(/\./g, "").replace(n[_], ".")
                  : p
              );
            },
            k = function (p, _, T) {
              var V = typeof p == "string";
              return (
                _ && V && (p = C(p, _)),
                T && V && (p = p.replace(g, "")),
                w(p) || (!isNaN(parseFloat(p)) && isFinite(p))
              );
            },
            y = function (p) {
              return w(p) || typeof p == "string";
            },
            S = function (p, _, T) {
              if (w(p)) return !0;
              var V = y(p);
              return V && k(Q(p), _, T) ? !0 : null;
            },
            P = function (p, _, T) {
              var V = [],
                A = 0,
                I = p.length;
              if (T !== h)
                for (; A < I; A++) p[A] && p[A][_] && V.push(p[A][_][T]);
              else for (; A < I; A++) p[A] && V.push(p[A][_]);
              return V;
            },
            F = function (p, _, T, V) {
              var A = [],
                I = 0,
                M = _.length;
              if (V !== h)
                for (; I < M; I++) p[_[I]][T] && A.push(p[_[I]][T][V]);
              else for (; I < M; I++) A.push(p[_[I]][T]);
              return A;
            },
            D = function (p, _) {
              var T = [],
                V;
              _ === h ? ((_ = 0), (V = p)) : ((V = _), (_ = p));
              for (var A = _; A < V; A++) T.push(A);
              return T;
            },
            L = function (p) {
              for (var _ = [], T = 0, V = p.length; T < V; T++)
                p[T] && _.push(p[T]);
              return _;
            },
            Q = function (p) {
              return p.replace(o, "");
            },
            q = function (p) {
              var _ = [],
                T,
                V,
                A = p.length,
                I,
                M = 0;
              e: for (V = 0; V < A; V++) {
                for (T = p[V], I = 0; I < M; I++) if (_[I] === T) continue e;
                _.push(T), M++;
              }
              return _;
            };
          function G(p) {
            var _ = "a aa ai ao as b fn i m o s ",
              T,
              V,
              A = {};
            i.each(p, function (I, M) {
              (T = I.match(/^([^A-Z]+?)([A-Z])/)),
                T &&
                  _.indexOf(T[1] + " ") !== -1 &&
                  ((V = I.replace(T[0], T[2].toLowerCase())),
                  (A[V] = I),
                  T[1] === "o" && G(p[I]));
            }),
              (p._hungarianMap = A);
          }
          function N(p, _, T) {
            p._hungarianMap || G(p);
            var V;
            i.each(_, function (A, I) {
              (V = p._hungarianMap[A]),
                V !== h &&
                  (T || _[V] === h) &&
                  (V.charAt(0) === "o"
                    ? (_[V] || (_[V] = {}),
                      i.extend(!0, _[V], _[A]),
                      N(p[V], _[V], T))
                    : (_[V] = _[A]));
            });
          }
          function W(p) {
            var _ = e.defaults.oLanguage,
              T = p.sZeroRecords;
            !p.sEmptyTable &&
              T &&
              _.sEmptyTable === "No data available in table" &&
              Fe(p, p, "sZeroRecords", "sEmptyTable"),
              !p.sLoadingRecords &&
                T &&
                _.sLoadingRecords === "Loading..." &&
                Fe(p, p, "sZeroRecords", "sLoadingRecords"),
              p.sInfoThousands && (p.sThousands = p.sInfoThousands);
            var V = p.sDecimal;
            V && It(V);
          }
          var H = function (p, _, T) {
            p[_] !== h && (p[T] = p[_]);
          };
          function z(p) {
            H(p, "ordering", "bSort"),
              H(p, "orderMulti", "bSortMulti"),
              H(p, "orderClasses", "bSortClasses"),
              H(p, "orderCellsTop", "bSortCellsTop"),
              H(p, "order", "aaSorting"),
              H(p, "orderFixed", "aaSortingFixed"),
              H(p, "paging", "bPaginate"),
              H(p, "pagingType", "sPaginationType"),
              H(p, "pageLength", "iDisplayLength"),
              H(p, "searching", "bFilter");
            var _ = p.aoSearchCols;
            if (_)
              for (var T = 0, V = _.length; T < V; T++)
                _[T] && N(e.models.oSearch, _[T]);
          }
          function Z(p) {
            H(p, "orderable", "bSortable"),
              H(p, "orderData", "aDataSort"),
              H(p, "orderSequence", "asSorting"),
              H(p, "orderDataType", "sortDataType");
          }
          function te(p) {
            var _ = p.oBrowser,
              T = i("<div/>")
                .css({
                  position: "absolute",
                  top: 0,
                  left: 0,
                  height: 1,
                  width: 1,
                  overflow: "hidden",
                })
                .append(
                  i("<div/>")
                    .css({
                      position: "absolute",
                      top: 1,
                      left: 1,
                      width: 100,
                      overflow: "scroll",
                    })
                    .append(
                      i('<div class="test"/>').css({
                        width: "100%",
                        height: 10,
                      })
                    )
                )
                .appendTo("body"),
              V = T.find(".test");
            (_.bScrollOversize = V[0].offsetWidth === 100),
              (_.bScrollbarLeft = V.offset().left !== 1),
              T.remove();
          }
          function le(p, _, T, V, A, I) {
            var M = V,
              R,
              U = !1;
            for (T !== h && ((R = T), (U = !0)); M !== A; )
              p.hasOwnProperty(M) &&
                ((R = U ? _(R, p[M], M, p) : p[M]), (U = !0), (M += I));
            return R;
          }
          function ge(p, _) {
            var T = e.defaults.column,
              V = p.aoColumns.length,
              A = i.extend({}, e.models.oColumn, T, {
                nTh: _ || a.createElement("th"),
                sTitle: T.sTitle ? T.sTitle : _ ? _.innerHTML : "",
                aDataSort: T.aDataSort ? T.aDataSort : [V],
                mData: T.mData ? T.mData : V,
                idx: V,
              });
            p.aoColumns.push(A);
            var I = p.aoPreSearchCols;
            (I[V] = i.extend({}, e.models.oSearch, I[V])), Pe(p, V, null);
          }
          function Pe(p, _, T) {
            var V = p.aoColumns[_],
              A = p.oClasses,
              I = i(V.nTh);
            if (!V.sWidthOrig) {
              V.sWidthOrig = I.attr("width") || null;
              var M = (I.attr("style") || "").match(/width:\s*(\d+[pxem%]+)/);
              M && (V.sWidthOrig = M[1]);
            }
            T !== h &&
              T !== null &&
              (Z(T),
              N(e.defaults.column, T),
              T.mDataProp !== h && !T.mData && (T.mData = T.mDataProp),
              T.sType && (V._sManualType = T.sType),
              T.className && !T.sClass && (T.sClass = T.className),
              i.extend(V, T),
              Fe(V, T, "sWidth", "sWidthOrig"),
              typeof T.iDataSort == "number" && (V.aDataSort = [T.iDataSort]),
              Fe(V, T, "aDataSort"));
            var R = V.mData,
              U = Ze(R),
              Y = V.mRender ? Ze(V.mRender) : null,
              X = function (oe) {
                return typeof oe == "string" && oe.indexOf("@") !== -1;
              };
            (V._bAttrSrc =
              i.isPlainObject(R) && (X(R.sort) || X(R.type) || X(R.filter))),
              (V.fnGetData = function (oe, he, ye) {
                var je = U(oe, he, h, ye);
                return Y && he ? Y(je, he, oe, ye) : je;
              }),
              (V.fnSetData = function (oe, he, ye) {
                return hi(R)(oe, he, ye);
              }),
              typeof R != "number" && (p._rowReadObject = !0),
              p.oFeatures.bSort ||
                ((V.bSortable = !1), I.addClass(A.sSortableNone));
            var ee = i.inArray("asc", V.asSorting) !== -1,
              se = i.inArray("desc", V.asSorting) !== -1;
            !V.bSortable || (!ee && !se)
              ? ((V.sSortingClass = A.sSortableNone), (V.sSortingClassJUI = ""))
              : ee && !se
              ? ((V.sSortingClass = A.sSortableAsc),
                (V.sSortingClassJUI = A.sSortJUIAscAllowed))
              : !ee && se
              ? ((V.sSortingClass = A.sSortableDesc),
                (V.sSortingClassJUI = A.sSortJUIDescAllowed))
              : ((V.sSortingClass = A.sSortable),
                (V.sSortingClassJUI = A.sSortJUI));
          }
          function _e(p) {
            if (p.oFeatures.bAutoWidth !== !1) {
              var _ = p.aoColumns;
              ue(p);
              for (var T = 0, V = _.length; T < V; T++)
                _[T].nTh.style.width = _[T].sWidth;
            }
            var A = p.oScroll;
            (A.sY !== "" || A.sX !== "") && j(p),
              ri(p, null, "column-sizing", [p]);
          }
          function ie(p, _) {
            var T = pe(p, "bVisible");
            return typeof T[_] == "number" ? T[_] : null;
          }
          function ae(p, _) {
            var T = pe(p, "bVisible"),
              V = i.inArray(_, T);
            return V !== -1 ? V : null;
          }
          function fe(p) {
            return pe(p, "bVisible").length;
          }
          function pe(p, _) {
            var T = [];
            return (
              i.map(p.aoColumns, function (V, A) {
                V[_] && T.push(A);
              }),
              T
            );
          }
          function ke(p) {
            var _ = p.aoColumns,
              T = p.aoData,
              V = e.ext.type.detect,
              A,
              I,
              M,
              R,
              U,
              Y,
              X,
              ee,
              se,
              oe;
            for (A = 0, I = _.length; A < I; A++)
              if (((X = _[A]), (oe = []), !X.sType && X._sManualType))
                X.sType = X._sManualType;
              else if (!X.sType) {
                for (M = 0, R = V.length; M < R; M++) {
                  for (
                    U = 0, Y = T.length;
                    U < Y &&
                    (oe[U] === h && (oe[U] = He(p, U, A, "type")),
                    (se = V[M](oe[U], p)),
                    !((!se && M !== V.length - 1) || se === "html"));
                    U++
                  );
                  if (se) {
                    X.sType = se;
                    break;
                  }
                }
                X.sType || (X.sType = "string");
              }
          }
          function Re(p, _, T, V) {
            var A,
              I,
              M,
              R,
              U,
              Y,
              X,
              ee = p.aoColumns;
            if (_)
              for (A = _.length - 1; A >= 0; A--) {
                X = _[A];
                var se = X.targets !== h ? X.targets : X.aTargets;
                for (
                  i.isArray(se) || (se = [se]), M = 0, R = se.length;
                  M < R;
                  M++
                )
                  if (typeof se[M] == "number" && se[M] >= 0) {
                    for (; ee.length <= se[M]; ) ge(p);
                    V(se[M], X);
                  } else if (typeof se[M] == "number" && se[M] < 0)
                    V(ee.length + se[M], X);
                  else if (typeof se[M] == "string")
                    for (U = 0, Y = ee.length; U < Y; U++)
                      (se[M] == "_all" || i(ee[U].nTh).hasClass(se[M])) &&
                        V(U, X);
              }
            if (T) for (A = 0, I = T.length; A < I; A++) V(A, T[A]);
          }
          function Le(p, _, T, V) {
            var A = p.aoData.length,
              I = i.extend(!0, {}, e.models.oRow, { src: T ? "dom" : "data" });
            (I._aData = _), p.aoData.push(I);
            for (var M, R, U = p.aoColumns, Y = 0, X = U.length; Y < X; Y++)
              T && me(p, A, Y, He(p, A, Y)), (U[Y].sType = null);
            return (
              p.aiDisplayMaster.push(A),
              (T || !p.oFeatures.bDeferRender) && zi(p, A, T, V),
              A
            );
          }
          function De(p, _) {
            var T;
            return (
              _ instanceof i || (_ = i(_)),
              _.map(function (V, A) {
                return (T = Si(p, A)), Le(p, T.data, A, T.cells);
              })
            );
          }
          function Ke(p, _) {
            return _._DT_RowIndex !== h ? _._DT_RowIndex : null;
          }
          function $e(p, _, T) {
            return i.inArray(T, p.aoData[_].anCells);
          }
          function He(p, _, T, V) {
            var A = p.iDraw,
              I = p.aoColumns[T],
              M = p.aoData[_]._aData,
              R = I.sDefaultContent,
              U = I.fnGetData(M, V, { settings: p, row: _, col: T });
            if (U === h)
              return (
                p.iDrawError != A &&
                  R === null &&
                  (Ee(
                    p,
                    0,
                    "Requested unknown parameter " +
                      (typeof I.mData == "function"
                        ? "{function}"
                        : "'" + I.mData + "'") +
                      " for row " +
                      _,
                    4
                  ),
                  (p.iDrawError = A)),
                R
              );
            if ((U === M || U === null) && R !== null) U = R;
            else if (typeof U == "function") return U.call(M);
            return U === null && V == "display" ? "" : U;
          }
          function me(p, _, T, V) {
            var A = p.aoColumns[T],
              I = p.aoData[_]._aData;
            A.fnSetData(I, V, { settings: p, row: _, col: T });
          }
          var Oe = /\[.*?\]$/,
            Ue = /\(\)$/;
          function qe(p) {
            return i.map(p.match(/(\\.|[^\.])+/g), function (_) {
              return _.replace(/\\./g, ".");
            });
          }
          function Ze(p) {
            if (i.isPlainObject(p)) {
              var _ = {};
              return (
                i.each(p, function (V, A) {
                  A && (_[V] = Ze(A));
                }),
                function (V, A, I, M) {
                  var R = _[A] || _._;
                  return R !== h ? R(V, A, I, M) : V;
                }
              );
            } else {
              if (p === null)
                return function (V) {
                  return V;
                };
              if (typeof p == "function")
                return function (V, A, I, M) {
                  return p(V, A, I, M);
                };
              if (
                typeof p == "string" &&
                (p.indexOf(".") !== -1 ||
                  p.indexOf("[") !== -1 ||
                  p.indexOf("(") !== -1)
              ) {
                var T = function (V, A, I) {
                  var M, R, U, Y;
                  if (I !== "")
                    for (var X = qe(I), ee = 0, se = X.length; ee < se; ee++) {
                      if (((M = X[ee].match(Oe)), (R = X[ee].match(Ue)), M)) {
                        (X[ee] = X[ee].replace(Oe, "")),
                          X[ee] !== "" && (V = V[X[ee]]),
                          (U = []),
                          X.splice(0, ee + 1),
                          (Y = X.join("."));
                        for (var oe = 0, he = V.length; oe < he; oe++)
                          U.push(T(V[oe], A, Y));
                        var ye = M[0].substring(1, M[0].length - 1);
                        V = ye === "" ? U : U.join(ye);
                        break;
                      } else if (R) {
                        (X[ee] = X[ee].replace(Ue, "")), (V = V[X[ee]]());
                        continue;
                      }
                      if (V === null || V[X[ee]] === h) return h;
                      V = V[X[ee]];
                    }
                  return V;
                };
                return function (V, A) {
                  return T(V, A, p);
                };
              } else
                return function (V, A) {
                  return V[p];
                };
            }
          }
          function hi(p) {
            if (i.isPlainObject(p)) return hi(p._);
            if (p === null) return function () {};
            if (typeof p == "function")
              return function (T, V, A) {
                p(T, "set", V, A);
              };
            if (
              typeof p == "string" &&
              (p.indexOf(".") !== -1 ||
                p.indexOf("[") !== -1 ||
                p.indexOf("(") !== -1)
            ) {
              var _ = function (T, V, A) {
                for (
                  var I = qe(A),
                    M,
                    R = I[I.length - 1],
                    U,
                    Y,
                    X,
                    ee,
                    se = 0,
                    oe = I.length - 1;
                  se < oe;
                  se++
                ) {
                  if (I[se] === "__proto__")
                    throw new Error("Cannot set prototype values");
                  if (((U = I[se].match(Oe)), (Y = I[se].match(Ue)), U)) {
                    (I[se] = I[se].replace(Oe, "")),
                      (T[I[se]] = []),
                      (M = I.slice()),
                      M.splice(0, se + 1),
                      (ee = M.join("."));
                    for (var he = 0, ye = V.length; he < ye; he++)
                      (X = {}), _(X, V[he], ee), T[I[se]].push(X);
                    return;
                  } else
                    Y && ((I[se] = I[se].replace(Ue, "")), (T = T[I[se]](V)));
                  (T[I[se]] === null || T[I[se]] === h) && (T[I[se]] = {}),
                    (T = T[I[se]]);
                }
                R.match(Ue)
                  ? (T = T[R.replace(Ue, "")](V))
                  : (T[R.replace(Oe, "")] = V);
              };
              return function (T, V) {
                return _(T, V, p);
              };
            } else
              return function (T, V) {
                T[p] = V;
              };
          }
          function ui(p) {
            return P(p.aoData, "_aData");
          }
          function li(p) {
            (p.aoData.length = 0),
              (p.aiDisplayMaster.length = 0),
              (p.aiDisplay.length = 0);
          }
          function gi(p, _, T) {
            for (var V = -1, A = 0, I = p.length; A < I; A++)
              p[A] == _ ? (V = A) : p[A] > _ && p[A]--;
            V != -1 && T === h && p.splice(V, 1);
          }
          function Vi(p, _, T, V) {
            var A = p.aoData[_],
              I,
              M,
              R = function (X, ee) {
                for (; X.childNodes.length; ) X.removeChild(X.firstChild);
                X.innerHTML = He(p, _, ee, "display");
              };
            if (T === "dom" || ((!T || T === "auto") && A.src === "dom"))
              A._aData = Si(p, A, V, V === h ? h : A._aData).data;
            else {
              var U = A.anCells;
              if (U)
                if (V !== h) R(U[V], V);
                else for (I = 0, M = U.length; I < M; I++) R(U[I], I);
            }
            (A._aSortData = null), (A._aFilterData = null);
            var Y = p.aoColumns;
            if (V !== h) Y[V].sType = null;
            else {
              for (I = 0, M = Y.length; I < M; I++) Y[I].sType = null;
              di(A);
            }
          }
          function Si(p, _, T, V) {
            var A = [],
              I = _.firstChild,
              M,
              R,
              U,
              Y = 0,
              X,
              ee = p.aoColumns,
              se = p._rowReadObject;
            V = V || se ? {} : [];
            var oe = function (Je, Ie) {
                if (typeof Je == "string") {
                  var be = Je.indexOf("@");
                  if (be !== -1) {
                    var si = Je.substring(be + 1),
                      fi = hi(Je);
                    fi(V, Ie.getAttribute(si));
                  }
                }
              },
              he = function (Je) {
                if (T === h || T === Y)
                  if (
                    ((R = ee[Y]), (X = i.trim(Je.innerHTML)), R && R._bAttrSrc)
                  ) {
                    var Ie = hi(R.mData._);
                    Ie(V, X),
                      oe(R.mData.sort, Je),
                      oe(R.mData.type, Je),
                      oe(R.mData.filter, Je);
                  } else
                    se
                      ? (R._setter || (R._setter = hi(R.mData)),
                        R._setter(V, X))
                      : (V[Y] = X);
                Y++;
              };
            if (I)
              for (; I; )
                (M = I.nodeName.toUpperCase()),
                  (M == "TD" || M == "TH") && (he(I), A.push(I)),
                  (I = I.nextSibling);
            else {
              A = _.anCells;
              for (var ye = 0, je = A.length; ye < je; ye++) he(A[ye]);
            }
            return { data: V, cells: A };
          }
          function zi(p, _, T, V) {
            var A = p.aoData[_],
              I = A._aData,
              M = [],
              R,
              U,
              Y,
              X,
              ee;
            if (A.nTr === null) {
              for (
                R = T || a.createElement("tr"),
                  A.nTr = R,
                  A.anCells = M,
                  R._DT_RowIndex = _,
                  di(A),
                  X = 0,
                  ee = p.aoColumns.length;
                X < ee;
                X++
              )
                (Y = p.aoColumns[X]),
                  (U = T ? V[X] : a.createElement(Y.sCellType)),
                  M.push(U),
                  (!T || Y.mRender || Y.mData !== X) &&
                    (U.innerHTML = He(p, _, X, "display")),
                  Y.sClass && (U.className += " " + Y.sClass),
                  Y.bVisible && !T
                    ? R.appendChild(U)
                    : !Y.bVisible && T && U.parentNode.removeChild(U),
                  Y.fnCreatedCell &&
                    Y.fnCreatedCell.call(p.oInstance, U, He(p, _, X), I, _, X);
              ri(p, "aoRowCreatedCallback", null, [R, I, _]);
            }
          }
          function di(p) {
            var _ = p.nTr,
              T = p._aData;
            if (_) {
              if ((T.DT_RowId && (_.id = T.DT_RowId), T.DT_RowClass)) {
                var V = T.DT_RowClass.split(" ");
                (p.__rowc = p.__rowc ? q(p.__rowc.concat(V)) : V),
                  i(_).removeClass(p.__rowc.join(" ")).addClass(T.DT_RowClass);
              }
              T.DT_RowData && i(_).data(T.DT_RowData);
            }
          }
          function ai(p) {
            var _,
              T,
              V,
              A,
              I,
              M = p.nTHead,
              R = p.nTFoot,
              U = i("th, td", M).length === 0,
              Y = p.oClasses,
              X = p.aoColumns;
            for (
              U && (A = i("<tr/>").appendTo(M)), _ = 0, T = X.length;
              _ < T;
              _++
            )
              (I = X[_]),
                (V = i(I.nTh).addClass(I.sClass)),
                U && V.appendTo(A),
                p.oFeatures.bSort &&
                  (V.addClass(I.sSortingClass),
                  I.bSortable !== !1 &&
                    (V.attr("tabindex", p.iTabIndex).attr(
                      "aria-controls",
                      p.sTableId
                    ),
                    ei(p, I.nTh, _))),
                I.sTitle != V.html() && V.text(I.sTitle),
                mi(p, "header")(p, V, I, Y);
            if (
              (U && Fi(p.aoHeader, M),
              i(M).find(">tr>th, >tr>td").addClass(Y.sHeaderTH),
              i(R).find(">tr>th, >tr>td").addClass(Y.sFooterTH),
              R !== null)
            ) {
              var ee = p.aoFooter[0];
              for (_ = 0, T = ee.length; _ < T; _++)
                (I = X[_]),
                  (I.nTf = ee[_].cell),
                  I.sClass && i(I.nTf).addClass(I.sClass);
            }
          }
          function ji(p, _, T) {
            var V,
              A,
              I,
              M,
              R,
              U,
              Y,
              X,
              ee = [],
              se = [],
              oe = p.aoColumns.length,
              he,
              ye;
            if (_) {
              for (T === h && (T = !1), V = 0, A = _.length; V < A; V++) {
                for (
                  ee[V] = _[V].slice(), ee[V].nTr = _[V].nTr, I = oe - 1;
                  I >= 0;
                  I--
                )
                  !p.aoColumns[I].bVisible && !T && ee[V].splice(I, 1);
                se.push([]);
              }
              for (V = 0, A = ee.length; V < A; V++) {
                if (((X = ee[V].nTr), X))
                  for (; (Y = X.firstChild); ) X.removeChild(Y);
                for (I = 0, M = ee[V].length; I < M; I++)
                  if (((he = 1), (ye = 1), se[V][I] === h)) {
                    for (
                      X.appendChild(ee[V][I].cell), se[V][I] = 1;
                      ee[V + he] !== h && ee[V][I].cell == ee[V + he][I].cell;

                    )
                      (se[V + he][I] = 1), he++;
                    for (
                      ;
                      ee[V][I + ye] !== h &&
                      ee[V][I].cell == ee[V][I + ye].cell;

                    ) {
                      for (R = 0; R < he; R++) se[V + R][I + ye] = 1;
                      ye++;
                    }
                    var je = i(ee[V][I].cell);
                    he !== 1 && je.attr("rowspan", he),
                      ye !== 1 && je.attr("colspan", ye);
                  }
              }
            }
          }
          function Ai(p) {
            var _ = ri(p, "aoPreDrawCallback", "preDraw", [p]);
            if (i.inArray(!1, _) !== -1) {
              E(p, !1);
              return;
            }
            var T,
              V,
              A,
              I = [],
              M = 0,
              R = p.asStripeClasses,
              U = R.length,
              Y = p.aoOpenRows.length,
              X = p.oLanguage,
              ee = p.iInitDisplayStart,
              se = ci(p) == "ssp",
              oe = p.aiDisplay;
            (p.bDrawing = !0),
              ee !== h &&
                ee !== -1 &&
                ((p._iDisplayStart = se
                  ? ee
                  : ee >= p.fnRecordsDisplay()
                  ? 0
                  : ee),
                (p.iInitDisplayStart = -1));
            var he = p._iDisplayStart,
              ye = p.fnDisplayEnd();
            if (p.bDeferLoading) (p.bDeferLoading = !1), p.iDraw++, E(p, !1);
            else if (!se) p.iDraw++;
            else if (!p.bDestroying && !it(p)) return;
            if (oe.length !== 0)
              for (
                var je = se ? 0 : he, Je = se ? p.aoData.length : ye, Ie = je;
                Ie < Je;
                Ie++
              ) {
                var be = oe[Ie],
                  si = p.aoData[be];
                si.nTr === null && zi(p, be);
                var fi = si.nTr;
                if (U !== 0) {
                  var yi = R[M % U];
                  si._sRowStripe != yi &&
                    (i(fi).removeClass(si._sRowStripe).addClass(yi),
                    (si._sRowStripe = yi));
                }
                ri(p, "aoRowCallback", null, [fi, si._aData, M, Ie]),
                  I.push(fi),
                  M++;
              }
            else {
              var Pi = X.sZeroRecords;
              p.iDraw == 1 && ci(p) == "ajax"
                ? (Pi = X.sLoadingRecords)
                : X.sEmptyTable &&
                  p.fnRecordsTotal() === 0 &&
                  (Pi = X.sEmptyTable),
                (I[0] = i("<tr/>", { class: U ? R[0] : "" }).append(
                  i("<td />", {
                    style: "vertical-align: top;",
                    colSpan: fe(p),
                    class: p.oClasses.sRowEmpty,
                  }).html(Pi)
                )[0]);
            }
            ri(p, "aoHeaderCallback", "header", [
              i(p.nTHead).children("tr")[0],
              ui(p),
              he,
              ye,
              oe,
            ]),
              ri(p, "aoFooterCallback", "footer", [
                i(p.nTFoot).children("tr")[0],
                ui(p),
                he,
                ye,
                oe,
              ]);
            var Oi = i(p.nTBody);
            Oi.children().detach(),
              Oi.append(i(I)),
              ri(p, "aoDrawCallback", "draw", [p]),
              (p.bSorted = !1),
              (p.bFiltered = !1),
              (p.bDrawing = !1);
          }
          function Ui(p, _) {
            var T = p.oFeatures,
              V = T.bSort,
              A = T.bFilter;
            V && we(p),
              A
                ? xi(p, p.oPreviousSearch)
                : (p.aiDisplay = p.aiDisplayMaster.slice()),
              _ !== !0 && (p._iDisplayStart = 0),
              (p._drawHold = _),
              Ai(p),
              (p._drawHold = !1);
          }
          function bi(p) {
            var _ = p.oClasses,
              T = i(p.nTable),
              V = i("<div/>").insertBefore(T),
              A = p.oFeatures,
              I = i("<div/>", {
                id: p.sTableId + "_wrapper",
                class: _.sWrapper + (p.nTFoot ? "" : " " + _.sNoFooter),
              });
            (p.nHolding = V[0]),
              (p.nTableWrapper = I[0]),
              (p.nTableReinsertBefore = p.nTable.nextSibling);
            for (
              var M = p.sDom.split(""), R, U, Y, X, ee, se, oe = 0;
              oe < M.length;
              oe++
            ) {
              if (((R = null), (U = M[oe]), U == "<")) {
                if (
                  ((Y = i("<div/>")[0]), (X = M[oe + 1]), X == "'" || X == '"')
                ) {
                  for (ee = "", se = 2; M[oe + se] != X; )
                    (ee += M[oe + se]), se++;
                  if (
                    (ee == "H"
                      ? (ee = _.sJUIHeader)
                      : ee == "F" && (ee = _.sJUIFooter),
                    ee.indexOf(".") != -1)
                  ) {
                    var he = ee.split(".");
                    (Y.id = he[0].substr(1, he[0].length - 1)),
                      (Y.className = he[1]);
                  } else
                    ee.charAt(0) == "#"
                      ? (Y.id = ee.substr(1, ee.length - 1))
                      : (Y.className = ee);
                  oe += se;
                }
                I.append(Y), (I = i(Y));
              } else if (U == ">") I = I.parent();
              else if (U == "l" && A.bPaginate && A.bLengthChange) R = Ce(p);
              else if (U == "f" && A.bFilter) R = Zi(p);
              else if (U == "r" && A.bProcessing) R = x(p);
              else if (U == "t") R = B(p);
              else if (U == "i" && A.bInfo) R = at(p);
              else if (U == "p" && A.bPaginate) R = Te(p);
              else if (e.ext.feature.length !== 0) {
                for (
                  var ye = e.ext.feature, je = 0, Je = ye.length;
                  je < Je;
                  je++
                )
                  if (U == ye[je].cFeature) {
                    R = ye[je].fnInit(p);
                    break;
                  }
              }
              if (R) {
                var Ie = p.aanFeatures;
                Ie[U] || (Ie[U] = []), Ie[U].push(R), I.append(R);
              }
            }
            V.replaceWith(I);
          }
          function Fi(p, _) {
            var T = i(_).children("tr"),
              V,
              A,
              I,
              M,
              R,
              U,
              Y,
              X,
              ee,
              se,
              oe,
              he,
              ye = function (je, Je, Ie) {
                for (var be = je[Je]; be[Ie]; ) Ie++;
                return Ie;
              };
            for (p.splice(0, p.length), I = 0, U = T.length; I < U; I++)
              p.push([]);
            for (I = 0, U = T.length; I < U; I++)
              for (V = T[I], ee = 0, A = V.firstChild; A; ) {
                if (
                  A.nodeName.toUpperCase() == "TD" ||
                  A.nodeName.toUpperCase() == "TH"
                )
                  for (
                    se = A.getAttribute("colspan") * 1,
                      oe = A.getAttribute("rowspan") * 1,
                      se = !se || se === 0 || se === 1 ? 1 : se,
                      oe = !oe || oe === 0 || oe === 1 ? 1 : oe,
                      X = ye(p, I, ee),
                      he = se === 1,
                      R = 0;
                    R < se;
                    R++
                  )
                    for (M = 0; M < oe; M++)
                      (p[I + M][X + R] = { cell: A, unique: he }),
                        (p[I + M].nTr = V);
                A = A.nextSibling;
              }
          }
          function Ji(p, _, T) {
            var V = [];
            T || ((T = p.aoHeader), _ && ((T = []), Fi(T, _)));
            for (var A = 0, I = T.length; A < I; A++)
              for (var M = 0, R = T[A].length; M < R; M++)
                T[A][M].unique &&
                  (!V[M] || !p.bSortCellsTop) &&
                  (V[M] = T[A][M].cell);
            return V;
          }
          function Xi(p, _, T) {
            if (
              (ri(p, "aoServerParams", "serverParams", [_]), _ && i.isArray(_))
            ) {
              var V = {},
                A = /(.*?)\[\]$/;
              i.each(_, function (X, ee) {
                var se = ee.name.match(A);
                if (se) {
                  var oe = se[0];
                  V[oe] || (V[oe] = []), V[oe].push(ee.value);
                } else V[ee.name] = ee.value;
              }),
                (_ = V);
            }
            var I,
              M = p.ajax,
              R = p.oInstance;
            if (i.isPlainObject(M) && M.data) {
              I = M.data;
              var U = i.isFunction(I) ? I(_) : I;
              (_ = i.isFunction(I) && U ? U : i.extend(!0, _, U)),
                delete M.data;
            }
            var Y = {
              data: _,
              success: function (X) {
                var ee = X.error || X.sError;
                ee && p.oApi._fnLog(p, 0, ee),
                  (p.json = X),
                  ri(p, null, "xhr", [p, X]),
                  T(X);
              },
              dataType: "json",
              cache: !1,
              type: p.sServerMethod,
              error: function (X, ee, se) {
                var oe = p.oApi._fnLog;
                ee == "parsererror"
                  ? oe(p, 0, "Invalid JSON response", 1)
                  : X.readyState === 4 && oe(p, 0, "Ajax error", 7),
                  E(p, !1);
              },
            };
            (p.oAjaxData = _),
              ri(p, null, "preXhr", [p, _]),
              p.fnServerData
                ? p.fnServerData.call(
                    R,
                    p.sAjaxSource,
                    i.map(_, function (X, ee) {
                      return { name: ee, value: X };
                    }),
                    T,
                    p
                  )
                : p.sAjaxSource || typeof M == "string"
                ? (p.jqXHR = i.ajax(i.extend(Y, { url: M || p.sAjaxSource })))
                : i.isFunction(M)
                ? (p.jqXHR = M.call(R, _, T, p))
                : ((p.jqXHR = i.ajax(i.extend(Y, M))), (M.data = I));
          }
          function it(p) {
            return p.bAjaxDataGet
              ? (p.iDraw++,
                E(p, !0),
                Xi(p, dt(p), function (_) {
                  mt(p, _);
                }),
                !1)
              : !0;
          }
          function dt(p) {
            var _ = p.aoColumns,
              T = _.length,
              V = p.oFeatures,
              A = p.oPreviousSearch,
              I = p.aoPreSearchCols,
              M,
              R = [],
              U,
              Y,
              X,
              ee = ze(p),
              se = p._iDisplayStart,
              oe = V.bPaginate !== !1 ? p._iDisplayLength : -1,
              he = function (Je, Ie) {
                R.push({ name: Je, value: Ie });
              };
            he("sEcho", p.iDraw),
              he("iColumns", T),
              he("sColumns", P(_, "sName").join(",")),
              he("iDisplayStart", se),
              he("iDisplayLength", oe);
            var ye = {
              draw: p.iDraw,
              columns: [],
              order: [],
              start: se,
              length: oe,
              search: { value: A.sSearch, regex: A.bRegex },
            };
            for (M = 0; M < T; M++)
              (Y = _[M]),
                (X = I[M]),
                (U = typeof Y.mData == "function" ? "function" : Y.mData),
                ye.columns.push({
                  data: U,
                  name: Y.sName,
                  searchable: Y.bSearchable,
                  orderable: Y.bSortable,
                  search: { value: X.sSearch, regex: X.bRegex },
                }),
                he("mDataProp_" + M, U),
                V.bFilter &&
                  (he("sSearch_" + M, X.sSearch),
                  he("bRegex_" + M, X.bRegex),
                  he("bSearchable_" + M, Y.bSearchable)),
                V.bSort && he("bSortable_" + M, Y.bSortable);
            V.bFilter && (he("sSearch", A.sSearch), he("bRegex", A.bRegex)),
              V.bSort &&
                (i.each(ee, function (Je, Ie) {
                  ye.order.push({ column: Ie.col, dir: Ie.dir }),
                    he("iSortCol_" + Je, Ie.col),
                    he("sSortDir_" + Je, Ie.dir);
                }),
                he("iSortingCols", ee.length));
            var je = e.ext.legacy.ajax;
            return je === null ? (p.sAjaxSource ? R : ye) : je ? R : ye;
          }
          function mt(p, _) {
            var T = function (Y, X) {
                return _[Y] !== h ? _[Y] : _[X];
              },
              V = T("sEcho", "draw"),
              A = T("iTotalRecords", "recordsTotal"),
              I = T("iTotalDisplayRecords", "recordsFiltered");
            if (V) {
              if (V * 1 < p.iDraw) return;
              p.iDraw = V * 1;
            }
            li(p),
              (p._iRecordsTotal = parseInt(A, 10)),
              (p._iRecordsDisplay = parseInt(I, 10));
            for (var M = tt(p, _), R = 0, U = M.length; R < U; R++) Le(p, M[R]);
            (p.aiDisplay = p.aiDisplayMaster.slice()),
              (p.bAjaxDataGet = !1),
              Ai(p),
              p._bInitComplete || re(p, _),
              (p.bAjaxDataGet = !0),
              E(p, !1);
          }
          function tt(p, _) {
            var T =
              i.isPlainObject(p.ajax) && p.ajax.dataSrc !== h
                ? p.ajax.dataSrc
                : p.sAjaxDataProp;
            return T === "data" ? _.aaData || _[T] : T !== "" ? Ze(T)(_) : _;
          }
          function Zi(p) {
            var _ = p.oClasses,
              T = p.sTableId,
              V = p.oLanguage,
              A = p.oPreviousSearch,
              I = p.aanFeatures,
              M = '<input type="search" class="' + _.sFilterInput + '"/>',
              R = V.sSearch;
            R = R.match(/_INPUT_/) ? R.replace("_INPUT_", M) : R + M;
            var U = i("<div/>", {
                id: I.f ? null : T + "_filter",
                class: _.sFilter,
              }).append(i("<label/>").append(R)),
              Y = function () {
                var se = I.f,
                  oe = this.value ? this.value : "";
                oe != A.sSearch &&
                  (xi(p, {
                    sSearch: oe,
                    bRegex: A.bRegex,
                    bSmart: A.bSmart,
                    bCaseInsensitive: A.bCaseInsensitive,
                  }),
                  (p._iDisplayStart = 0),
                  Ai(p));
              },
              X =
                p.searchDelay !== null
                  ? p.searchDelay
                  : ci(p) === "ssp"
                  ? 400
                  : 0,
              ee = i("input", U)
                .val(A.sSearch)
                .attr("placeholder", V.sSearchPlaceholder)
                .bind(
                  "keyup.DT search.DT input.DT paste.DT cut.DT",
                  X ? de(Y, X) : Y
                )
                .bind("keypress.DT", function (se) {
                  if (se.keyCode == 13) return !1;
                })
                .attr("aria-controls", T);
            return (
              i(p.nTable).on("search.dt.DT", function (se, oe) {
                if (p === oe)
                  try {
                    ee[0] !== a.activeElement && ee.val(A.sSearch);
                  } catch {}
              }),
              U[0]
            );
          }
          function xi(p, _, T) {
            var V = p.oPreviousSearch,
              A = p.aoPreSearchCols,
              I = function (U) {
                (V.sSearch = U.sSearch),
                  (V.bRegex = U.bRegex),
                  (V.bSmart = U.bSmart),
                  (V.bCaseInsensitive = U.bCaseInsensitive);
              },
              M = function (U) {
                return U.bEscapeRegex !== h ? !U.bEscapeRegex : U.bRegex;
              };
            if ((ke(p), ci(p) != "ssp")) {
              ht(p, _.sSearch, T, M(_), _.bSmart, _.bCaseInsensitive), I(_);
              for (var R = 0; R < A.length; R++)
                st(
                  p,
                  A[R].sSearch,
                  R,
                  M(A[R]),
                  A[R].bSmart,
                  A[R].bCaseInsensitive
                );
              nt(p);
            } else I(_);
            (p.bFiltered = !0), ri(p, null, "search", [p]);
          }
          function nt(p) {
            for (
              var _ = e.ext.search, T = p.aiDisplay, V, A, I = 0, M = _.length;
              I < M;
              I++
            ) {
              for (var R = [], U = 0, Y = T.length; U < Y; U++)
                (A = T[U]),
                  (V = p.aoData[A]),
                  _[I](p, V._aFilterData, A, V._aData, U) && R.push(A);
              (T.length = 0), T.push.apply(T, R);
            }
          }
          function st(p, _, T, V, A, I) {
            if (_ !== "")
              for (
                var M, R = p.aiDisplay, U = Gi(_, V, A, I), Y = R.length - 1;
                Y >= 0;
                Y--
              )
                (M = p.aoData[R[Y]]._aFilterData[T]),
                  U.test(M) || R.splice(Y, 1);
          }
          function ht(p, _, T, V, A, I) {
            var M = Gi(_, V, A, I),
              R = p.oPreviousSearch.sSearch,
              U = p.aiDisplayMaster,
              Y,
              X,
              ee;
            if (
              (e.ext.search.length !== 0 && (T = !0),
              (X = lt(p)),
              _.length <= 0)
            )
              p.aiDisplay = U.slice();
            else
              for (
                (X ||
                  T ||
                  R.length > _.length ||
                  _.indexOf(R) !== 0 ||
                  p.bSorted) &&
                  (p.aiDisplay = U.slice()),
                  Y = p.aiDisplay,
                  ee = Y.length - 1;
                ee >= 0;
                ee--
              )
                M.test(p.aoData[Y[ee]]._sFilterRow) || Y.splice(ee, 1);
          }
          function Gi(p, _, T, V) {
            if (((p = _ ? p : vi(p)), T)) {
              var A = i.map(p.match(/"[^"]+"|[^ ]+/g) || "", function (I) {
                if (I.charAt(0) === '"') {
                  var M = I.match(/^"(.*)"$/);
                  I = M ? M[1] : I;
                }
                return I.replace('"', "");
              });
              p = "^(?=.*?" + A.join(")(?=.*?") + ").*$";
            }
            return new RegExp(p, V ? "i" : "");
          }
          function vi(p) {
            return p.replace(f, "\\$1");
          }
          var Di = i("<div>")[0],
            ot = Di.textContent !== h;
          function lt(p) {
            var _ = p.aoColumns,
              T,
              V,
              A,
              I,
              M,
              R,
              U,
              Y,
              X = e.ext.type.search,
              ee = !1;
            for (V = 0, I = p.aoData.length; V < I; V++)
              if (((Y = p.aoData[V]), !Y._aFilterData)) {
                for (R = [], A = 0, M = _.length; A < M; A++)
                  (T = _[A]),
                    T.bSearchable
                      ? ((U = He(p, V, A, "filter")),
                        X[T.sType] && (U = X[T.sType](U)),
                        U === null && (U = ""),
                        typeof U != "string" &&
                          U.toString &&
                          (U = U.toString()))
                      : (U = ""),
                    U.indexOf &&
                      U.indexOf("&") !== -1 &&
                      ((Di.innerHTML = U),
                      (U = ot ? Di.textContent : Di.innerText)),
                    U.replace && (U = U.replace(/[\r\n]/g, "")),
                    R.push(U);
                (Y._aFilterData = R), (Y._sFilterRow = R.join("  ")), (ee = !0);
              }
            return ee;
          }
          function ft(p) {
            return {
              search: p.sSearch,
              smart: p.bSmart,
              regex: p.bRegex,
              caseInsensitive: p.bCaseInsensitive,
            };
          }
          function rt(p) {
            return {
              sSearch: p.search,
              bSmart: p.smart,
              bRegex: p.regex,
              bCaseInsensitive: p.caseInsensitive,
            };
          }
          function at(p) {
            var _ = p.sTableId,
              T = p.aanFeatures.i,
              V = i("<div/>", {
                class: p.oClasses.sInfo,
                id: T ? null : _ + "_info",
              });
            return (
              T ||
                (p.aoDrawCallback.push({ fn: ct, sName: "information" }),
                V.attr("role", "status").attr("aria-live", "polite"),
                i(p.nTable).attr("aria-describedby", _ + "_info")),
              V[0]
            );
          }
          function ct(p) {
            var _ = p.aanFeatures.i;
            if (_.length !== 0) {
              var T = p.oLanguage,
                V = p._iDisplayStart + 1,
                A = p.fnDisplayEnd(),
                I = p.fnRecordsTotal(),
                M = p.fnRecordsDisplay(),
                R = M ? T.sInfo : T.sInfoEmpty;
              M !== I && (R += " " + T.sInfoFiltered),
                (R += T.sInfoPostFix),
                (R = O(p, R));
              var U = T.fnInfoCallback;
              U !== null && (R = U.call(p.oInstance, p, V, A, I, M, R)),
                i(_).html(R);
            }
          }
          function O(p, _) {
            var T = p.fnFormatNumber,
              V = p._iDisplayStart + 1,
              A = p._iDisplayLength,
              I = p.fnRecordsDisplay(),
              M = A === -1;
            return _.replace(/_START_/g, T.call(p, V))
              .replace(/_END_/g, T.call(p, p.fnDisplayEnd()))
              .replace(/_MAX_/g, T.call(p, p.fnRecordsTotal()))
              .replace(/_TOTAL_/g, T.call(p, I))
              .replace(/_PAGE_/g, T.call(p, M ? 1 : Math.ceil(V / A)))
              .replace(/_PAGES_/g, T.call(p, M ? 1 : Math.ceil(I / A)));
          }
          function K(p) {
            var _,
              T,
              V = p.iInitDisplayStart,
              A = p.aoColumns,
              I,
              M = p.oFeatures;
            if (!p.bInitialised) {
              setTimeout(function () {
                K(p);
              }, 200);
              return;
            }
            for (
              bi(p),
                ai(p),
                ji(p, p.aoHeader),
                ji(p, p.aoFooter),
                E(p, !0),
                M.bAutoWidth && ue(p),
                _ = 0,
                T = A.length;
              _ < T;
              _++
            )
              (I = A[_]), I.sWidth && (I.nTh.style.width = ne(I.sWidth));
            Ui(p);
            var R = ci(p);
            R != "ssp" &&
              (R == "ajax"
                ? Xi(
                    p,
                    [],
                    function (U) {
                      var Y = tt(p, U);
                      for (_ = 0; _ < Y.length; _++) Le(p, Y[_]);
                      (p.iInitDisplayStart = V), Ui(p), E(p, !1), re(p, U);
                    },
                    p
                  )
                : (E(p, !1), re(p)));
          }
          function re(p, _) {
            (p._bInitComplete = !0),
              _ && _e(p),
              ri(p, "aoInitComplete", "init", [p, _]);
          }
          function ve(p, _) {
            var T = parseInt(_, 10);
            (p._iDisplayLength = T), Hi(p), ri(p, null, "length", [p, T]);
          }
          function Ce(p) {
            for (
              var _ = p.oClasses,
                T = p.sTableId,
                V = p.aLengthMenu,
                A = i.isArray(V[0]),
                I = A ? V[0] : V,
                M = A ? V[1] : V,
                R = i("<select/>", {
                  name: T + "_length",
                  "aria-controls": T,
                  class: _.sLengthSelect,
                }),
                U = 0,
                Y = I.length;
              U < Y;
              U++
            )
              R[0][U] = new Option(M[U], I[U]);
            var X = i("<div><label/></div>").addClass(_.sLength);
            return (
              p.aanFeatures.l || (X[0].id = T + "_length"),
              X.children().append(
                p.oLanguage.sLengthMenu.replace("_MENU_", R[0].outerHTML)
              ),
              i("select", X)
                .val(p._iDisplayLength)
                .bind("change.DT", function (ee) {
                  ve(p, i(this).val()), Ai(p);
                }),
              i(p.nTable).bind("length.dt.DT", function (ee, se, oe) {
                p === se && i("select", X).val(oe);
              }),
              X[0]
            );
          }
          function Te(p) {
            var _ = p.sPaginationType,
              T = e.ext.pager[_],
              V = typeof T == "function",
              A = function (R) {
                Ai(R);
              },
              I = i("<div/>").addClass(p.oClasses.sPaging + _)[0],
              M = p.aanFeatures;
            return (
              V || T.fnInit(p, I, A),
              M.p ||
                ((I.id = p.sTableId + "_paginate"),
                p.aoDrawCallback.push({
                  fn: function (R) {
                    if (V) {
                      var U = R._iDisplayStart,
                        Y = R._iDisplayLength,
                        X = R.fnRecordsDisplay(),
                        ee = Y === -1,
                        se = ee ? 0 : Math.ceil(U / Y),
                        oe = ee ? 1 : Math.ceil(X / Y),
                        he = T(se, oe),
                        ye,
                        je;
                      for (ye = 0, je = M.p.length; ye < je; ye++)
                        mi(R, "pageButton")(R, M.p[ye], ye, he, se, oe);
                    } else T.fnUpdate(R, A);
                  },
                  sName: "pagination",
                })),
              I
            );
          }
          function Ne(p, _, T) {
            var V = p._iDisplayStart,
              A = p._iDisplayLength,
              I = p.fnRecordsDisplay();
            I === 0 || A === -1
              ? (V = 0)
              : typeof _ == "number"
              ? ((V = _ * A), V > I && (V = 0))
              : _ == "first"
              ? (V = 0)
              : _ == "previous"
              ? ((V = A >= 0 ? V - A : 0), V < 0 && (V = 0))
              : _ == "next"
              ? V + A < I && (V += A)
              : _ == "last"
              ? (V = Math.floor((I - 1) / A) * A)
              : Ee(p, 0, "Unknown paging action: " + _, 5);
            var M = p._iDisplayStart !== V;
            return (
              (p._iDisplayStart = V),
              M && (ri(p, null, "page", [p]), T && Ai(p)),
              M
            );
          }
          function x(p) {
            return i("<div/>", {
              id: p.aanFeatures.r ? null : p.sTableId + "_processing",
              class: p.oClasses.sProcessing,
            })
              .html(p.oLanguage.sProcessing)
              .insertBefore(p.nTable)[0];
          }
          function E(p, _) {
            p.oFeatures.bProcessing &&
              i(p.aanFeatures.r).css("display", _ ? "block" : "none"),
              ri(p, null, "processing", [p, _]);
          }
          function B(p) {
            var _ = i(p.nTable),
              T = p.oScroll;
            if (T.sX === "" && T.sY === "") return p.nTable;
            var V = T.sX,
              A = T.sY,
              I = p.oClasses,
              M = _.children("caption"),
              R = M.length ? M[0]._captionSide : null,
              U = i(_[0].cloneNode(!1)),
              Y = i(_[0].cloneNode(!1)),
              X = _.children("tfoot"),
              ee = "<div/>",
              se = function (Ie) {
                return Ie ? ne(Ie) : null;
              };
            T.sX && _.attr("width") === "100%" && _.removeAttr("width"),
              X.length || (X = null);
            var oe = i(ee, { class: I.sScrollWrapper })
              .append(
                i(ee, { class: I.sScrollHead })
                  .css({
                    overflow: "hidden",
                    position: "relative",
                    border: 0,
                    width: V ? se(V) : "100%",
                  })
                  .append(
                    i(ee, { class: I.sScrollHeadInner })
                      .css({
                        "box-sizing": "content-box",
                        width: T.sXInner || "100%",
                      })
                      .append(
                        U.removeAttr("id")
                          .css("margin-left", 0)
                          .append(R === "top" ? M : null)
                          .append(_.children("thead"))
                      )
                  )
              )
              .append(
                i(ee, { class: I.sScrollBody })
                  .css({ overflow: "auto", height: se(A), width: se(V) })
                  .append(_)
              );
            X &&
              oe.append(
                i(ee, { class: I.sScrollFoot })
                  .css({
                    overflow: "hidden",
                    border: 0,
                    width: V ? se(V) : "100%",
                  })
                  .append(
                    i(ee, { class: I.sScrollFootInner }).append(
                      Y.removeAttr("id")
                        .css("margin-left", 0)
                        .append(R === "bottom" ? M : null)
                        .append(_.children("tfoot"))
                    )
                  )
              );
            var he = oe.children(),
              ye = he[0],
              je = he[1],
              Je = X ? he[2] : null;
            return (
              V &&
                i(je).scroll(function (Ie) {
                  var be = this.scrollLeft;
                  (ye.scrollLeft = be), X && (Je.scrollLeft = be);
                }),
              (p.nScrollHead = ye),
              (p.nScrollBody = je),
              (p.nScrollFoot = Je),
              p.aoDrawCallback.push({ fn: j, sName: "scrolling" }),
              oe[0]
            );
          }
          function j(p) {
            var _ = p.oScroll,
              T = _.sX,
              V = _.sXInner,
              A = _.sY,
              I = _.iBarWidth,
              M = i(p.nScrollHead),
              R = M[0].style,
              U = M.children("div"),
              Y = U[0].style,
              X = U.children("table"),
              ee = p.nScrollBody,
              se = i(ee),
              oe = ee.style,
              he = i(p.nScrollFoot),
              ye = he.children("div"),
              je = ye.children("table"),
              Je = i(p.nTHead),
              Ie = i(p.nTable),
              be = Ie[0],
              si = be.style,
              fi = p.nTFoot ? i(p.nTFoot) : null,
              yi = p.oBrowser,
              Pi = yi.bScrollOversize,
              Oi,
              Ci,
              pi,
              Ti,
              Ri,
              Bi,
              Li = [],
              Yi = [],
              Qi = [],
              et,
              Ni,
              oi,
              Ei = function (_i) {
                var Mi = _i.style;
                (Mi.paddingTop = "0"),
                  (Mi.paddingBottom = "0"),
                  (Mi.borderTopWidth = "0"),
                  (Mi.borderBottomWidth = "0"),
                  (Mi.height = 0);
              };
            if (
              (Ie.children("thead, tfoot").remove(),
              (Ri = Je.clone().prependTo(Ie)),
              (Oi = Je.find("tr")),
              (pi = Ri.find("tr")),
              Ri.find("th, td").removeAttr("tabindex"),
              fi &&
                ((Bi = fi.clone().prependTo(Ie)),
                (Ci = fi.find("tr")),
                (Ti = Bi.find("tr"))),
              T || ((oe.width = "100%"), (M[0].style.width = "100%")),
              i.each(Ji(p, Ri), function (_i, Mi) {
                (et = ie(p, _i)), (Mi.style.width = p.aoColumns[et].sWidth);
              }),
              fi &&
                J(function (_i) {
                  _i.style.width = "";
                }, Ti),
              _.bCollapse &&
                A !== "" &&
                (oe.height = se[0].offsetHeight + Je[0].offsetHeight + "px"),
              (oi = Ie.outerWidth()),
              T === ""
                ? ((si.width = "100%"),
                  Pi &&
                    (Ie.find("tbody").height() > ee.offsetHeight ||
                      se.css("overflow-y") == "scroll") &&
                    (si.width = ne(Ie.outerWidth() - I)))
                : V !== ""
                ? (si.width = ne(V))
                : oi == se.width() && se.height() < Ie.height()
                ? ((si.width = ne(oi - I)),
                  Ie.outerWidth() > oi - I && (si.width = ne(oi)))
                : (si.width = ne(oi)),
              (oi = Ie.outerWidth()),
              J(Ei, pi),
              J(function (_i) {
                Qi.push(_i.innerHTML), Li.push(ne(i(_i).css("width")));
              }, pi),
              J(function (_i, Mi) {
                _i.style.width = Li[Mi];
              }, Oi),
              i(pi).height(0),
              fi &&
                (J(Ei, Ti),
                J(function (_i) {
                  Yi.push(ne(i(_i).css("width")));
                }, Ti),
                J(function (_i, Mi) {
                  _i.style.width = Yi[Mi];
                }, Ci),
                i(Ti).height(0)),
              J(function (_i, Mi) {
                (_i.innerHTML =
                  '<div class="dataTables_sizing" style="height:0;overflow:hidden;">' +
                  Qi[Mi] +
                  "</div>"),
                  (_i.style.width = Li[Mi]);
              }, pi),
              fi &&
                J(function (_i, Mi) {
                  (_i.innerHTML = ""), (_i.style.width = Yi[Mi]);
                }, Ti),
              Ie.outerWidth() < oi
                ? ((Ni =
                    ee.scrollHeight > ee.offsetHeight ||
                    se.css("overflow-y") == "scroll"
                      ? oi + I
                      : oi),
                  Pi &&
                    (ee.scrollHeight > ee.offsetHeight ||
                      se.css("overflow-y") == "scroll") &&
                    (si.width = ne(Ni - I)),
                  (T === "" || V !== "") &&
                    Ee(p, 1, "Possible column misalignment", 6))
                : (Ni = "100%"),
              (oe.width = ne(Ni)),
              (R.width = ne(Ni)),
              fi && (p.nScrollFoot.style.width = ne(Ni)),
              A || (Pi && (oe.height = ne(be.offsetHeight + I))),
              A && _.bCollapse)
            ) {
              oe.height = ne(A);
              var wt = T && be.offsetWidth > ee.offsetWidth ? I : 0;
              be.offsetHeight < ee.offsetHeight &&
                (oe.height = ne(be.offsetHeight + wt));
            }
            var Wi = Ie.outerWidth();
            (X[0].style.width = ne(Wi)), (Y.width = ne(Wi));
            var bt =
                Ie.height() > ee.clientHeight ||
                se.css("overflow-y") == "scroll",
              At = "padding" + (yi.bScrollbarLeft ? "Left" : "Right");
            (Y[At] = bt ? I + "px" : "0px"),
              fi &&
                ((je[0].style.width = ne(Wi)),
                (ye[0].style.width = ne(Wi)),
                (ye[0].style[At] = bt ? I + "px" : "0px")),
              se.scroll(),
              (p.bSorted || p.bFiltered) && !p._drawHold && (ee.scrollTop = 0);
          }
          function J(p, _, T) {
            for (var V = 0, A = 0, I = _.length, M, R; A < I; ) {
              for (M = _[A].firstChild, R = T ? T[A].firstChild : null; M; )
                M.nodeType === 1 && (T ? p(M, R, V) : p(M, V), V++),
                  (M = M.nextSibling),
                  (R = T ? R.nextSibling : null);
              A++;
            }
          }
          var $ = /<.*?>/g;
          function ue(p) {
            var _ = p.nTable,
              T = p.aoColumns,
              V = p.oScroll,
              A = V.sY,
              I = V.sX,
              M = V.sXInner,
              R = T.length,
              U = pe(p, "bVisible"),
              Y = i("th", p.nTHead),
              X = _.getAttribute("width"),
              ee = _.parentNode,
              se = !1,
              oe,
              he,
              ye,
              je,
              Je;
            for (oe = 0; oe < U.length; oe++)
              (he = T[U[oe]]),
                he.sWidth !== null &&
                  ((he.sWidth = Ve(he.sWidthOrig, ee)), (se = !0));
            if (!se && !I && !A && R == fe(p) && R == Y.length)
              for (oe = 0; oe < R; oe++) T[oe].sWidth = ne(Y.eq(oe).width());
            else {
              var Ie = i(_)
                .clone()
                .empty()
                .css("visibility", "hidden")
                .removeAttr("id")
                .append(i(p.nTHead).clone(!1))
                .append(i(p.nTFoot).clone(!1))
                .append(i("<tbody><tr/></tbody>"));
              Ie.find("tfoot th, tfoot td").css("width", "");
              var be = Ie.find("tbody tr");
              for (Y = Ji(p, Ie.find("thead")[0]), oe = 0; oe < U.length; oe++)
                (he = T[U[oe]]),
                  (Y[oe].style.width =
                    he.sWidthOrig !== null && he.sWidthOrig !== ""
                      ? ne(he.sWidthOrig)
                      : "");
              if (p.aoData.length)
                for (oe = 0; oe < U.length; oe++)
                  (ye = U[oe]),
                    (he = T[ye]),
                    i(Se(p, ye))
                      .clone(!1)
                      .append(he.sContentPadding)
                      .appendTo(be);
              if (
                (Ie.appendTo(ee),
                I && M
                  ? Ie.width(M)
                  : I
                  ? (Ie.css("width", "auto"),
                    Ie.width() < ee.offsetWidth && Ie.width(ee.offsetWidth))
                  : A
                  ? Ie.width(ee.offsetWidth)
                  : X && Ie.width(X),
                xe(p, Ie[0]),
                I)
              ) {
                var si = 0;
                for (oe = 0; oe < U.length; oe++)
                  (he = T[U[oe]]),
                    (Je = i(Y[oe]).outerWidth()),
                    (si +=
                      he.sWidthOrig === null
                        ? Je
                        : parseInt(he.sWidth, 10) + Je - i(Y[oe]).width());
                Ie.width(ne(si)), (_.style.width = ne(si));
              }
              for (oe = 0; oe < U.length; oe++)
                (he = T[U[oe]]),
                  (je = i(Y[oe]).width()),
                  je && (he.sWidth = ne(je));
              (_.style.width = ne(Ie.css("width"))), Ie.remove();
            }
            X && (_.style.width = ne(X)),
              (X || I) &&
                !p._reszEvt &&
                (i(d).bind(
                  "resize.DT-" + p.sInstance,
                  de(function () {
                    _e(p);
                  })
                ),
                (p._reszEvt = !0));
          }
          function de(p, _) {
            var T = _ !== h ? _ : 200,
              V,
              A;
            return function () {
              var I = this,
                M = +new Date(),
                R = arguments;
              V && M < V + T
                ? (clearTimeout(A),
                  (A = setTimeout(function () {
                    (V = h), p.apply(I, R);
                  }, T)))
                : V
                ? ((V = M), p.apply(I, R))
                : (V = M);
            };
          }
          function Ve(p, _) {
            if (!p) return 0;
            var T = i("<div/>")
                .css("width", ne(p))
                .appendTo(_ || a.body),
              V = T[0].offsetWidth;
            return T.remove(), V;
          }
          function xe(p, _) {
            var T = p.oScroll;
            if (T.sX || T.sY) {
              var V = T.sX ? 0 : T.iBarWidth;
              _.style.width = ne(i(_).outerWidth() - V);
            }
          }
          function Se(p, _) {
            var T = ce(p, _);
            if (T < 0) return null;
            var V = p.aoData[T];
            return V.nTr
              ? V.anCells[_]
              : i("<td/>").html(He(p, T, _, "display"))[0];
          }
          function ce(p, _) {
            for (var T, V = -1, A = -1, I = 0, M = p.aoData.length; I < M; I++)
              (T = He(p, I, _, "display") + ""),
                (T = T.replace($, "")),
                T.length > V && ((V = T.length), (A = I));
            return A;
          }
          function ne(p) {
            return p === null
              ? "0px"
              : typeof p == "number"
              ? p < 0
                ? "0px"
                : p + "px"
              : p.match(/\d$/)
              ? p + "px"
              : p;
          }
          function Me() {
            if (!e.__scrollbarWidth) {
              var p = i("<p/>").css({
                  width: "100%",
                  height: 200,
                  padding: 0,
                })[0],
                _ = i("<div/>")
                  .css({
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: 200,
                    height: 150,
                    padding: 0,
                    overflow: "hidden",
                    visibility: "hidden",
                  })
                  .append(p)
                  .appendTo("body"),
                T = p.offsetWidth;
              _.css("overflow", "scroll");
              var V = p.offsetWidth;
              T === V && (V = _[0].clientWidth),
                _.remove(),
                (e.__scrollbarWidth = T - V);
            }
            return e.__scrollbarWidth;
          }
          function ze(p) {
            var _,
              T,
              V,
              A,
              I = [],
              M = [],
              R = p.aoColumns,
              U,
              Y,
              X,
              ee,
              se = p.aaSortingFixed,
              oe = i.isPlainObject(se),
              he = [],
              ye = function (je) {
                je.length && !i.isArray(je[0])
                  ? he.push(je)
                  : he.push.apply(he, je);
              };
            for (
              i.isArray(se) && ye(se),
                oe && se.pre && ye(se.pre),
                ye(p.aaSorting),
                oe && se.post && ye(se.post),
                _ = 0;
              _ < he.length;
              _++
            )
              for (
                ee = he[_][0], U = R[ee].aDataSort, V = 0, A = U.length;
                V < A;
                V++
              )
                (Y = U[V]),
                  (X = R[Y].sType || "string"),
                  he[_]._idx === h &&
                    (he[_]._idx = i.inArray(he[_][1], R[Y].asSorting)),
                  I.push({
                    src: ee,
                    col: Y,
                    dir: he[_][1],
                    index: he[_]._idx,
                    type: X,
                    formatter: e.ext.type.order[X + "-pre"],
                  });
            return I;
          }
          function we(p) {
            var _,
              T,
              V,
              A,
              I,
              M,
              R,
              U,
              Y,
              X = [],
              ee = e.ext.type.order,
              se = p.aoData,
              oe = p.aoColumns,
              he,
              ye,
              je,
              Je,
              Ie,
              be = 0,
              si,
              fi = p.aiDisplayMaster,
              yi;
            for (ke(p), yi = ze(p), _ = 0, T = yi.length; _ < T; _++)
              (si = yi[_]), si.formatter && be++, ti(p, si.col);
            if (ci(p) != "ssp" && yi.length !== 0) {
              for (_ = 0, V = fi.length; _ < V; _++) X[fi[_]] = _;
              be === yi.length
                ? fi.sort(function (Pi, Oi) {
                    var Ci,
                      pi,
                      Ti,
                      Ri,
                      Bi,
                      Li = yi.length,
                      Yi = se[Pi]._aSortData,
                      Qi = se[Oi]._aSortData;
                    for (Ti = 0; Ti < Li; Ti++)
                      if (
                        ((Bi = yi[Ti]),
                        (Ci = Yi[Bi.col]),
                        (pi = Qi[Bi.col]),
                        (Ri = Ci < pi ? -1 : Ci > pi ? 1 : 0),
                        Ri !== 0)
                      )
                        return Bi.dir === "asc" ? Ri : -Ri;
                    return (
                      (Ci = X[Pi]), (pi = X[Oi]), Ci < pi ? -1 : Ci > pi ? 1 : 0
                    );
                  })
                : fi.sort(function (Pi, Oi) {
                    var Ci,
                      pi,
                      Ti,
                      Ri,
                      Bi,
                      Li,
                      Yi,
                      Qi = yi.length,
                      et = se[Pi]._aSortData,
                      Ni = se[Oi]._aSortData;
                    for (Ti = 0; Ti < Qi; Ti++)
                      if (
                        ((Li = yi[Ti]),
                        (Ci = et[Li.col]),
                        (pi = Ni[Li.col]),
                        (Yi =
                          ee[Li.type + "-" + Li.dir] || ee["string-" + Li.dir]),
                        (Bi = Yi(Ci, pi)),
                        Bi !== 0)
                      )
                        return Bi;
                    return (
                      (Ci = X[Pi]), (pi = X[Oi]), Ci < pi ? -1 : Ci > pi ? 1 : 0
                    );
                  });
            }
            p.bSorted = !0;
          }
          function Ae(p) {
            for (
              var _,
                T,
                V,
                A = p.aoColumns,
                I = ze(p),
                M = p.oLanguage.oAria,
                R = p.oLanguage.oTooltip,
                U = 0,
                Y = A.length;
              U < Y;
              U++
            ) {
              var X = A[U],
                ee = X.asSorting,
                se = X.sTitle.replace(/<.*?>/g, "").trim(),
                oe = X.nTh;
              if ((oe.removeAttribute("aria-sort"), X.bSortable)) {
                var he = h;
                I.length > 0 && I[0].col == U
                  ? ((he = I[0].dir),
                    oe.setAttribute(
                      "aria-sort",
                      I[0].dir == "asc" ? "ascending" : "descending"
                    ),
                    (V = ee[I[0].index + 1] || ee[0]))
                  : (V = ee[0]),
                  (_ = se),
                  V === "asc"
                    ? (T = R.sSortAscending)
                    : V === "desc"
                    ? (T = R.sSortDescending)
                    : (T = R.sIsUnsorted),
                  (T = T.replace(/\{0\}/g, se)),
                  oe.setAttribute("data-csui-column-current-sort-dir", he),
                  oe.setAttribute("data-csui-column-next-sort-dir", V);
              } else (_ = se), (T = h);
              _ && _.length > 0 && oe.setAttribute("aria-label", _),
                T && T.length > 0 && oe.setAttribute("title", T);
            }
          }
          function Ge(p, _, T, V) {
            var A = p.aoColumns[_],
              I = p.aaSorting,
              M = A.asSorting,
              R,
              U = function (X, ee) {
                var se = X._idx;
                return (
                  se === h && (se = i.inArray(X[1], M)),
                  se + 1 < M.length ? se + 1 : ee ? null : 0
                );
              };
            if (
              (typeof I[0] == "number" && (I = p.aaSorting = [I]),
              T && p.oFeatures.bSortMulti)
            ) {
              var Y = i.inArray(_, P(I, "0"));
              Y !== -1
                ? ((R = U(I[Y], !0)),
                  R === null
                    ? I.splice(Y, 1)
                    : ((I[Y][1] = M[R]), (I[Y]._idx = R)))
                : (I.push([_, M[0], 0]), (I[I.length - 1]._idx = 0));
            } else I.length && I[0][0] == _ ? ((R = U(I[0])), (I.length = 1), (I[0][1] = M[R]), (I[0]._idx = R)) : ((I.length = 0), I.push([_, M[0]]), (I[0]._idx = 0));
            Ui(p), typeof V == "function" && V(p);
          }
          function ei(p, _, T, V) {
            var A = p.aoColumns[T];
            ki(_, {}, function (I) {
              A.bSortable !== !1 &&
                (p.oFeatures.bProcessing
                  ? (E(p, !0),
                    setTimeout(function () {
                      Ge(p, T, I.shiftKey, V), ci(p) !== "ssp" && E(p, !1);
                    }, 0))
                  : Ge(p, T, I.shiftKey, V));
            });
          }
          function Ye(p) {
            var _ = p.aLastSort,
              T = p.oClasses.sSortColumn,
              V = ze(p),
              A = p.oFeatures,
              I,
              M,
              R;
            if (A.bSort && A.bSortClasses) {
              for (I = 0, M = _.length; I < M; I++)
                (R = _[I].src),
                  i(P(p.aoData, "anCells", R)).removeClass(
                    T + (I < 2 ? I + 1 : 3)
                  );
              for (I = 0, M = V.length; I < M; I++)
                (R = V[I].src),
                  i(P(p.aoData, "anCells", R)).addClass(
                    T + (I < 2 ? I + 1 : 3)
                  );
            }
            p.aLastSort = V;
          }
          function ti(p, _) {
            var T = p.aoColumns[_],
              V = e.ext.order[T.sSortDataType],
              A;
            V && (A = V.call(p.oInstance, p, _, ae(p, _)));
            for (
              var I,
                M,
                R = e.ext.type.order[T.sType + "-pre"],
                U = 0,
                Y = p.aoData.length;
              U < Y;
              U++
            )
              (I = p.aoData[U]),
                I._aSortData || (I._aSortData = []),
                (!I._aSortData[_] || V) &&
                  ((M = V ? A[U] : He(p, U, _, "sort")),
                  (I._aSortData[_] = R ? R(M) : M));
          }
          function ni(p) {
            if (!(!p.oFeatures.bStateSave || p.bDestroying)) {
              var _ = {
                time: +new Date(),
                start: p._iDisplayStart,
                length: p._iDisplayLength,
                order: i.extend(!0, [], p.aaSorting),
                search: ft(p.oPreviousSearch),
                columns: i.map(p.aoColumns, function (T, V) {
                  return {
                    visible: T.bVisible,
                    search: ft(p.aoPreSearchCols[V]),
                  };
                }),
              };
              ri(p, "aoStateSaveParams", "stateSaveParams", [p, _]),
                (p.oSavedState = _),
                p.fnStateSaveCallback.call(p.oInstance, p, _);
            }
          }
          function Qe(p, _) {
            var T,
              V,
              A = p.aoColumns;
            if (p.oFeatures.bStateSave) {
              var I = p.fnStateLoadCallback.call(p.oInstance, p);
              if (!(!I || !I.time)) {
                var M = ri(p, "aoStateLoadParams", "stateLoadParams", [p, I]);
                if (i.inArray(!1, M) === -1) {
                  var R = p.iStateDuration;
                  if (
                    !(R > 0 && I.time < +new Date() - R * 1e3) &&
                    A.length === I.columns.length
                  ) {
                    for (
                      p.oLoadedState = i.extend(!0, {}, I),
                        p._iDisplayStart = I.start,
                        p.iInitDisplayStart = I.start,
                        p._iDisplayLength = I.length,
                        p.aaSorting = [],
                        i.each(I.order, function (Y, X) {
                          p.aaSorting.push(X[0] >= A.length ? [0, X[1]] : X);
                        }),
                        i.extend(p.oPreviousSearch, rt(I.search)),
                        T = 0,
                        V = I.columns.length;
                      T < V;
                      T++
                    ) {
                      var U = I.columns[T];
                      (A[T].bVisible = U.visible),
                        i.extend(p.aoPreSearchCols[T], rt(U.search));
                    }
                    ri(p, "aoStateLoaded", "stateLoaded", [p, I]);
                  }
                }
              }
            }
          }
          function ii(p) {
            var _ = e.settings,
              T = i.inArray(p, P(_, "nTable"));
            return T !== -1 ? _[T] : null;
          }
          function Ee(p, _, T, V) {
            if (
              ((T =
                "DataTables warning: " +
                (p !== null ? "table id=" + p.sTableId + " - " : "") +
                T),
              V &&
                (T +=
                  ". For more information about this error, please see http://datatables.net/tn/" +
                  V),
              _)
            )
              d.console && console.log && console.log(T);
            else {
              var A = e.ext,
                I = A.sErrMode || A.errMode;
              if (I == "alert") alert(T);
              else throw new Error(T);
            }
          }
          function Fe(p, _, T, V) {
            if (i.isArray(T)) {
              i.each(T, function (A, I) {
                i.isArray(I) ? Fe(p, _, I[0], I[1]) : Fe(p, _, I);
              });
              return;
            }
            V === h && (V = T), _[T] !== h && (p[V] = _[T]);
          }
          function Ki(p, _, T) {
            var V;
            for (var A in _)
              _.hasOwnProperty(A) &&
                ((V = _[A]),
                i.isPlainObject(V)
                  ? (i.isPlainObject(p[A]) || (p[A] = {}),
                    i.extend(!0, p[A], V))
                  : T && A !== "data" && A !== "aaData" && i.isArray(V)
                  ? (p[A] = V.slice())
                  : (p[A] = V));
            return p;
          }
          function ki(p, _, T) {
            function V(A) {
              return function (I) {
                const M = v(p).find(".data-table-custom-area");
                if (
                  !Array.prototype.find.call(
                    M,
                    (U) => U === I.target || U.contains(I.target)
                  )
                )
                  return A(I);
              };
            }
            i(p)
              .on(
                "click.DT",
                _,
                V(function (A) {
                  p.blur(), T(A);
                })
              )
              .on(
                "keypress.DT",
                _,
                V(function (A) {
                  A.which === 13 && (A.preventDefault(), T(A));
                })
              )
              .on("selectstart.DT", function () {
                return !1;
              });
          }
          function We(p, _, T, V) {
            T && p[_].push({ fn: T, sName: V });
          }
          function ri(p, _, T, V) {
            var A = [];
            return (
              _ &&
                (A = i.map(p[_].slice().reverse(), function (I, M) {
                  return I.fn.apply(p.oInstance, V);
                })),
              T !== null && i(p.nTable).trigger(T + ".dt", V),
              A
            );
          }
          function Hi(p) {
            var _ = p._iDisplayStart,
              T = p.fnDisplayEnd(),
              V = p._iDisplayLength;
            _ >= T && (_ = T - V),
              (_ -= _ % V),
              (V === -1 || _ < 0) && (_ = 0),
              (p._iDisplayStart = _);
          }
          function mi(p, _) {
            var T = p.renderer,
              V = e.ext.renderer[_];
            return i.isPlainObject(T) && T[_]
              ? V[T[_]] || V._
              : (typeof T == "string" && V[T]) || V._;
          }
          function ci(p) {
            return p.oFeatures.bServerSide
              ? "ssp"
              : p.ajax || p.sAjaxSource
              ? "ajax"
              : "dom";
          }
          e = function (p) {
            (this.$ = function (I, M) {
              return this.api(!0).$(I, M);
            }),
              (this._ = function (I, M) {
                return this.api(!0).rows(I, M).data();
              }),
              (this.api = function (I) {
                return I ? new u(ii(this[l.iApiIndex])) : new u(this);
              }),
              (this.fnAddData = function (I, M) {
                var R = this.api(!0),
                  U =
                    i.isArray(I) && (i.isArray(I[0]) || i.isPlainObject(I[0]))
                      ? R.rows.add(I)
                      : R.row.add(I);
                return (M === h || M) && R.draw(), U.flatten().toArray();
              }),
              (this.fnAdjustColumnSizing = function (I) {
                var M = this.api(!0).columns.adjust(),
                  R = M.settings()[0],
                  U = R.oScroll;
                I === h || I
                  ? M.draw(!1)
                  : (U.sX !== "" || U.sY !== "") && j(R);
              }),
              (this.fnClearTable = function (I) {
                var M = this.api(!0).clear();
                (I === h || I) && M.draw();
              }),
              (this.fnClose = function (I) {
                this.api(!0).row(I).child.hide();
              }),
              (this.fnDeleteRow = function (I, M, R) {
                var U = this.api(!0),
                  Y = U.rows(I),
                  X = Y.settings()[0],
                  ee = X.aoData[Y[0][0]];
                return (
                  Y.remove(),
                  M && M.call(this, X, ee),
                  (R === h || R) && U.draw(),
                  ee
                );
              }),
              (this.fnDestroy = function (I) {
                this.api(!0).destroy(I);
              }),
              (this.fnDraw = function (I) {
                this.api(!0).draw(!I);
              }),
              (this.fnFilter = function (I, M, R, U, Y, X) {
                var ee = this.api(!0);
                M === null || M === h
                  ? ee.search(I, R, U, X)
                  : ee.column(M).search(I, R, U, X),
                  ee.draw();
              }),
              (this.fnGetData = function (I, M) {
                var R = this.api(!0);
                if (I !== h) {
                  var U = I.nodeName ? I.nodeName.toLowerCase() : "";
                  return M !== h || U == "td" || U == "th"
                    ? R.cell(I, M).data()
                    : R.row(I).data() || null;
                }
                return R.data().toArray();
              }),
              (this.fnGetNodes = function (I) {
                var M = this.api(!0);
                return I !== h
                  ? M.row(I).node()
                  : M.rows().nodes().flatten().toArray();
              }),
              (this.fnGetPosition = function (I) {
                var M = this.api(!0),
                  R = I.nodeName.toUpperCase();
                if (R == "TR") return M.row(I).index();
                if (R == "TD" || R == "TH") {
                  var U = M.cell(I).index();
                  return [U.row, U.columnVisible, U.column];
                }
                return null;
              }),
              (this.fnIsOpen = function (I) {
                return this.api(!0).row(I).child.isShown();
              }),
              (this.fnOpen = function (I, M, R) {
                return this.api(!0).row(I).child(M, R).show().child()[0];
              }),
              (this.fnPageChange = function (I, M) {
                var R = this.api(!0).page(I);
                (M === h || M) && R.draw(!1);
              }),
              (this.fnSetColumnVis = function (I, M, R) {
                var U = this.api(!0).column(I).visible(M);
                (R === h || R) && U.columns.adjust().draw();
              }),
              (this.fnSettings = function () {
                return ii(this[l.iApiIndex]);
              }),
              (this.fnSort = function (I) {
                this.api(!0).order(I).draw();
              }),
              (this.fnSortListener = function (I, M, R) {
                this.api(!0).order.listener(I, M, R);
              }),
              (this.fnUpdate = function (I, M, R, U, Y) {
                var X = this.api(!0);
                return (
                  R === h || R === null
                    ? X.row(M).data(I)
                    : X.cell(M, R).data(I),
                  (Y === h || Y) && X.columns.adjust(),
                  (U === h || U) && X.draw(),
                  0
                );
              }),
              (this.fnVersionCheck = l.fnVersionCheck);
            var _ = this,
              T = p === h,
              V = this.length;
            T && (p = {}), (this.oApi = this.internal = l.internal);
            for (var A in e.ext.internal) A && (this[A] = Pt(A));
            return (
              this.each(function () {
                var I = {},
                  M = V > 1 ? Ki(I, p, !0) : p,
                  R = 0,
                  U,
                  Y,
                  X,
                  ee,
                  se,
                  oe = this.getAttribute("id"),
                  he = !1,
                  ye = e.defaults;
                if (this.nodeName.toLowerCase() != "table") {
                  Ee(
                    null,
                    0,
                    "Non-table node initialisation (" + this.nodeName + ")",
                    2
                  );
                  return;
                }
                z(ye),
                  Z(ye.column),
                  N(ye, ye, !0),
                  N(ye.column, ye.column, !0),
                  N(ye, M);
                var je = e.settings;
                for (R = 0, U = je.length; R < U; R++) {
                  if (je[R].nTable == this) {
                    var Je = M.bRetrieve !== h ? M.bRetrieve : ye.bRetrieve,
                      Ie = M.bDestroy !== h ? M.bDestroy : ye.bDestroy;
                    if (T || Je) return je[R].oInstance;
                    if (Ie) {
                      je[R].oInstance.fnDestroy();
                      break;
                    } else {
                      Ee(je[R], 0, "Cannot reinitialise DataTable", 3);
                      return;
                    }
                  }
                  if (je[R].sTableId == this.id) {
                    je.splice(R, 1);
                    break;
                  }
                }
                (oe === null || oe === "") &&
                  ((oe = "DataTables_Table_" + e.ext._unique++),
                  (this.id = oe));
                var be = i.extend(!0, {}, e.models.oSettings, {
                  nTable: this,
                  oApi: _.internal,
                  oInit: M,
                  sDestroyWidth: i(this)[0].style.width,
                  sInstance: oe,
                  sTableId: oe,
                });
                je.push(be),
                  (be.oInstance = _.length === 1 ? _ : i(this).dataTable()),
                  z(M),
                  M.oLanguage && W(M.oLanguage),
                  M.aLengthMenu &&
                    !M.iDisplayLength &&
                    (M.iDisplayLength = i.isArray(M.aLengthMenu[0])
                      ? M.aLengthMenu[0][0]
                      : M.aLengthMenu[0]),
                  (M = Ki(i.extend(!0, {}, ye), M)),
                  Fe(be.oFeatures, M, [
                    "bPaginate",
                    "bLengthChange",
                    "bFilter",
                    "bSort",
                    "bSortMulti",
                    "bInfo",
                    "bProcessing",
                    "bAutoWidth",
                    "bSortClasses",
                    "bServerSide",
                    "bDeferRender",
                  ]),
                  Fe(be, M, [
                    "asStripeClasses",
                    "ajax",
                    "fnServerData",
                    "fnFormatNumber",
                    "sServerMethod",
                    "aaSorting",
                    "aaSortingFixed",
                    "aLengthMenu",
                    "sPaginationType",
                    "sAjaxSource",
                    "sAjaxDataProp",
                    "iStateDuration",
                    "sDom",
                    "bSortCellsTop",
                    "iTabIndex",
                    "fnStateLoadCallback",
                    "fnStateSaveCallback",
                    "renderer",
                    "searchDelay",
                    ["iCookieDuration", "iStateDuration"],
                    ["oSearch", "oPreviousSearch"],
                    ["aoSearchCols", "aoPreSearchCols"],
                    ["iDisplayLength", "_iDisplayLength"],
                    ["bJQueryUI", "bJUI"],
                  ]),
                  Fe(be.oScroll, M, [
                    ["sScrollX", "sX"],
                    ["sScrollXInner", "sXInner"],
                    ["sScrollY", "sY"],
                    ["bScrollCollapse", "bCollapse"],
                  ]),
                  Fe(be.oLanguage, M, "fnInfoCallback"),
                  We(be, "aoDrawCallback", M.fnDrawCallback, "user"),
                  We(be, "aoServerParams", M.fnServerParams, "user"),
                  We(be, "aoStateSaveParams", M.fnStateSaveParams, "user"),
                  We(be, "aoStateLoadParams", M.fnStateLoadParams, "user"),
                  We(be, "aoStateLoaded", M.fnStateLoaded, "user"),
                  We(be, "aoRowCallback", M.fnRowCallback, "user"),
                  We(be, "aoRowCreatedCallback", M.fnCreatedRow, "user"),
                  We(be, "aoHeaderCallback", M.fnHeaderCallback, "user"),
                  We(be, "aoFooterCallback", M.fnFooterCallback, "user"),
                  We(be, "aoInitComplete", M.fnInitComplete, "user"),
                  We(be, "aoPreDrawCallback", M.fnPreDrawCallback, "user");
                var si = be.oClasses;
                if (
                  (M.bJQueryUI
                    ? (i.extend(si, e.ext.oJUIClasses, M.oClasses),
                      M.sDom === ye.sDom &&
                        ye.sDom === "lfrtip" &&
                        (be.sDom = '<"H"lfr>t<"F"ip>'),
                      be.renderer
                        ? i.isPlainObject(be.renderer) &&
                          !be.renderer.header &&
                          (be.renderer.header = "jqueryui")
                        : (be.renderer = "jqueryui"))
                    : i.extend(si, e.ext.classes, M.oClasses),
                  i(this).addClass(si.sTable),
                  (be.oScroll.sX !== "" || be.oScroll.sY !== "") &&
                    (be.oScroll.iBarWidth = Me()),
                  be.oScroll.sX === !0 && (be.oScroll.sX = "100%"),
                  be.iInitDisplayStart === h &&
                    ((be.iInitDisplayStart = M.iDisplayStart),
                    (be._iDisplayStart = M.iDisplayStart)),
                  M.iDeferLoading !== null)
                ) {
                  be.bDeferLoading = !0;
                  var fi = i.isArray(M.iDeferLoading);
                  (be._iRecordsDisplay = fi
                    ? M.iDeferLoading[0]
                    : M.iDeferLoading),
                    (be._iRecordsTotal = fi
                      ? M.iDeferLoading[1]
                      : M.iDeferLoading);
                }
                var yi = be.oLanguage;
                i.extend(!0, yi, M.oLanguage),
                  yi.sUrl !== "" &&
                    (i.ajax({
                      dataType: "json",
                      url: yi.sUrl,
                      success: function (oi) {
                        W(oi), N(ye.oLanguage, oi), i.extend(!0, yi, oi), K(be);
                      },
                      error: function () {
                        K(be);
                      },
                    }),
                    (he = !0)),
                  M.asStripeClasses === null &&
                    (be.asStripeClasses = [si.sStripeOdd, si.sStripeEven]);
                var Pi = be.asStripeClasses,
                  Oi = i("tbody tr:eq(0)", this);
                i.inArray(
                  !0,
                  i.map(Pi, function (oi, Ei) {
                    return Oi.hasClass(oi);
                  })
                ) !== -1 &&
                  (i("tbody tr", this).removeClass(Pi.join(" ")),
                  (be.asDestroyStripes = Pi.slice()));
                var Ci = [],
                  pi,
                  Ti = this.getElementsByTagName("thead");
                if (
                  (Ti.length !== 0 && (Fi(be.aoHeader, Ti[0]), (Ci = Ji(be))),
                  M.aoColumns === null)
                )
                  for (pi = [], R = 0, U = Ci.length; R < U; R++) pi.push(null);
                else pi = M.aoColumns;
                for (R = 0, U = pi.length; R < U; R++)
                  ge(be, Ci ? Ci[R] : null);
                if (
                  (Re(be, M.aoColumnDefs, pi, function (oi, Ei) {
                    Pe(be, oi, Ei);
                  }),
                  Oi.length)
                ) {
                  var Ri = function (oi, Ei) {
                    return oi.getAttribute("data-" + Ei) ? Ei : null;
                  };
                  i.each(Si(be, Oi[0]).cells, function (oi, Ei) {
                    var wt = be.aoColumns[oi];
                    if (wt.mData === oi) {
                      var Wi = Ri(Ei, "sort") || Ri(Ei, "order"),
                        bt = Ri(Ei, "filter") || Ri(Ei, "search");
                      (Wi !== null || bt !== null) &&
                        ((wt.mData = {
                          _: oi + ".display",
                          sort: Wi !== null ? oi + ".@data-" + Wi : h,
                          type: Wi !== null ? oi + ".@data-" + Wi : h,
                          filter: bt !== null ? oi + ".@data-" + bt : h,
                        }),
                        Pe(be, oi));
                    }
                  });
                }
                var Bi = be.oFeatures;
                if (
                  (M.bStateSave &&
                    ((Bi.bStateSave = !0),
                    Qe(be, M),
                    We(be, "aoDrawCallback", ni, "state_save")),
                  M.aaSorting === h)
                ) {
                  var Li = be.aaSorting;
                  for (R = 0, U = Li.length; R < U; R++)
                    Li[R][1] = be.aoColumns[R].asSorting[0];
                }
                Ye(be),
                  Bi.bSort &&
                    We(be, "aoDrawCallback", function () {
                      if (be.bSorted) {
                        var oi = ze(be),
                          Ei = {};
                        i.each(oi, function (wt, Wi) {
                          Ei[Wi.src] = Wi.dir;
                        }),
                          ri(be, null, "order", [be, oi, Ei]),
                          Ae(be);
                      }
                    }),
                  We(
                    be,
                    "aoDrawCallback",
                    function () {
                      (be.bSorted || ci(be) === "ssp" || Bi.bDeferRender) &&
                        Ye(be);
                    },
                    "sc"
                  ),
                  te(be);
                var Yi = i(this)
                    .children("caption")
                    .each(function () {
                      this._captionSide = i(this).css("caption-side");
                    }),
                  Qi = i(this).children("thead");
                Qi.length === 0 && (Qi = i("<thead/>").appendTo(this)),
                  (be.nTHead = Qi[0]);
                var et = i(this).children("tbody");
                et.length === 0 && (et = i("<tbody/>").appendTo(this)),
                  (be.nTBody = et[0]);
                var Ni = i(this).children("tfoot");
                if (
                  (Ni.length === 0 &&
                    Yi.length > 0 &&
                    (be.oScroll.sX !== "" || be.oScroll.sY !== "") &&
                    (Ni = i("<tfoot/>").appendTo(this)),
                  Ni.length === 0 || Ni.children().length === 0
                    ? i(this).addClass(si.sNoFooter)
                    : Ni.length > 0 &&
                      ((be.nTFoot = Ni[0]), Fi(be.aoFooter, be.nTFoot)),
                  M.aaData)
                )
                  for (R = 0; R < M.aaData.length; R++) Le(be, M.aaData[R]);
                else
                  (be.bDeferLoading || ci(be) == "dom") &&
                    De(be, i(be.nTBody).children("tr"));
                (be.aiDisplay = be.aiDisplayMaster.slice()),
                  (be.bInitialised = !0),
                  he === !1 && K(be);
              }),
              (_ = null),
              this
            );
          };
          var Ii = [],
            Xe = Array.prototype,
            Be = function (p) {
              var _,
                T,
                V = e.settings,
                A = i.map(V, function (I, M) {
                  return I.nTable;
                });
              if (p) {
                if (p.nTable && p.oApi) return [p];
                if (p.nodeName && p.nodeName.toLowerCase() === "table")
                  return (_ = i.inArray(p, A)), _ !== -1 ? [V[_]] : null;
                if (p && typeof p.settings == "function")
                  return p.settings().toArray();
                typeof p == "string" ? (T = i(p)) : p instanceof i && (T = p);
              } else return [];
              if (T)
                return T.map(function (I) {
                  return (_ = i.inArray(this, A)), _ !== -1 ? V[_] : null;
                }).toArray();
            };
          (u = function (p, _) {
            if (!this instanceof u)
              throw "DT API must be constructed as a new object";
            var T = [],
              V = function (M) {
                var R = Be(M);
                R && T.push.apply(T, R);
              };
            if (i.isArray(p)) for (var A = 0, I = p.length; A < I; A++) V(p[A]);
            else V(p);
            (this.context = q(T)),
              _ && this.push.apply(this, _.toArray ? _.toArray() : _),
              (this.selector = { rows: null, cols: null, opts: null }),
              u.extend(this, this, Ii);
          }),
            (e.Api = u),
            (u.prototype = {
              concat: Xe.concat,
              context: [],
              each: function (p) {
                for (var _ = 0, T = this.length; _ < T; _++)
                  p.call(this, this[_], _, this);
                return this;
              },
              eq: function (p) {
                var _ = this.context;
                return _.length > p ? new u(_[p], this[p]) : null;
              },
              filter: function (p) {
                var _ = [];
                if (Xe.filter) _ = Xe.filter.call(this, p, this);
                else
                  for (var T = 0, V = this.length; T < V; T++)
                    p.call(this, this[T], T, this) && _.push(this[T]);
                return new u(this.context, _);
              },
              flatten: function () {
                var p = [];
                return new u(this.context, p.concat.apply(p, this.toArray()));
              },
              join: Xe.join,
              indexOf:
                Xe.indexOf ||
                function (p, _) {
                  for (var T = _ || 0, V = this.length; T < V; T++)
                    if (this[T] === p) return T;
                  return -1;
                },
              iterator: function (p, _, T, V) {
                var A = [],
                  I,
                  M,
                  R,
                  U,
                  Y,
                  X = this.context,
                  ee,
                  se,
                  oe,
                  he = this.selector;
                for (
                  typeof p == "string" && ((V = T), (T = _), (_ = p), (p = !1)),
                    M = 0,
                    R = X.length;
                  M < R;
                  M++
                ) {
                  var ye = new u(X[M]);
                  if (_ === "table")
                    (I = T.call(ye, X[M], M)), I !== h && A.push(I);
                  else if (_ === "columns" || _ === "rows")
                    (I = T.call(ye, X[M], this[M], M)), I !== h && A.push(I);
                  else if (
                    _ === "column" ||
                    _ === "column-rows" ||
                    _ === "row" ||
                    _ === "cell"
                  )
                    for (
                      se = this[M],
                        _ === "column-rows" && (ee = gt(X[M], he.opts)),
                        U = 0,
                        Y = se.length;
                      U < Y;
                      U++
                    )
                      (oe = se[U]),
                        _ === "cell"
                          ? (I = T.call(ye, X[M], oe.row, oe.column, M, U))
                          : (I = T.call(ye, X[M], oe, M, U, ee)),
                        I !== h && A.push(I);
                }
                if (A.length || V) {
                  var je = new u(X, p ? A.concat.apply([], A) : A),
                    Je = je.selector;
                  return (
                    (Je.rows = he.rows),
                    (Je.cols = he.cols),
                    (Je.opts = he.opts),
                    je
                  );
                }
                return this;
              },
              lastIndexOf:
                Xe.lastIndexOf ||
                function (p, _) {
                  return this.indexOf.apply(this.toArray.reverse(), arguments);
                },
              length: 0,
              map: function (p) {
                var _ = [];
                if (Xe.map) _ = Xe.map.call(this, p, this);
                else
                  for (var T = 0, V = this.length; T < V; T++)
                    _.push(p.call(this, this[T], T));
                return new u(this.context, _);
              },
              pluck: function (p) {
                return this.map(function (_) {
                  return _[p];
                });
              },
              pop: Xe.pop,
              push: Xe.push,
              reduce:
                Xe.reduce ||
                function (p, _) {
                  return le(this, p, _, 0, this.length, 1);
                },
              reduceRight:
                Xe.reduceRight ||
                function (p, _) {
                  return le(this, p, _, this.length - 1, -1, -1);
                },
              reverse: Xe.reverse,
              selector: null,
              shift: Xe.shift,
              sort: Xe.sort,
              splice: Xe.splice,
              toArray: function () {
                return Xe.slice.call(this);
              },
              to$: function () {
                return i(this);
              },
              toJQuery: function () {
                return i(this);
              },
              unique: function () {
                return new u(this.context, q(this));
              },
              unshift: Xe.unshift,
            }),
            (u.extend = function (p, _, T) {
              if (!(!_ || (!(_ instanceof u) && !_.__dt_wrapper))) {
                var V,
                  A,
                  I,
                  M,
                  R,
                  U,
                  Y = function (X, ee, se) {
                    return function () {
                      var oe = ee.apply(X, arguments);
                      return u.extend(oe, oe, se.methodExt), oe;
                    };
                  };
                for (V = 0, A = T.length; V < A; V++)
                  (R = T[V]),
                    (_[R.name] =
                      typeof R.val == "function"
                        ? Y(p, R.val, R)
                        : i.isPlainObject(R.val)
                        ? {}
                        : R.val),
                    (_[R.name].__dt_wrapper = !0),
                    u.extend(p, _[R.name], R.propExt);
              }
            }),
            (u.register = r =
              function (p, _) {
                if (i.isArray(p)) {
                  for (var T = 0, V = p.length; T < V; T++) u.register(p[T], _);
                  return;
                }
                var A,
                  I,
                  M = p.split("."),
                  R = Ii,
                  U,
                  Y,
                  X = function (se, oe) {
                    for (var he = 0, ye = se.length; he < ye; he++)
                      if (se[he].name === oe) return se[he];
                    return null;
                  };
                for (A = 0, I = M.length; A < I; A++) {
                  (Y = M[A].indexOf("()") !== -1),
                    (U = Y ? M[A].replace("()", "") : M[A]);
                  var ee = X(R, U);
                  ee ||
                    ((ee = { name: U, val: {}, methodExt: [], propExt: [] }),
                    R.push(ee)),
                    A === I - 1
                      ? (ee.val = _)
                      : (R = Y ? ee.methodExt : ee.propExt);
                }
              }),
            (u.registerPlural = t =
              function (p, _, T) {
                u.register(p, T),
                  u.register(_, function () {
                    var V = T.apply(this, arguments);
                    return V === this
                      ? this
                      : V instanceof u
                      ? V.length
                        ? i.isArray(V[0])
                          ? new u(V.context, V[0])
                          : V[0]
                        : h
                      : V;
                  });
              });
          var wi = function (p, _) {
            if (typeof p == "number") return [_[p]];
            var T = i.map(_, function (V, A) {
              return V.nTable;
            });
            return i(T)
              .filter(p)
              .map(function (V) {
                var A = i.inArray(this, T);
                return _[A];
              })
              .toArray();
          };
          r("tables()", function (p) {
            return p ? new u(wi(p, this.context)) : this;
          }),
            r("table()", function (p) {
              var _ = this.tables(p),
                T = _.context;
              return T.length ? new u(T[0]) : _;
            }),
            t("tables().nodes()", "table().node()", function () {
              return this.iterator(
                "table",
                function (p) {
                  return p.nTable;
                },
                1
              );
            }),
            t("tables().body()", "table().body()", function () {
              return this.iterator(
                "table",
                function (p) {
                  return p.nTBody;
                },
                1
              );
            }),
            t("tables().header()", "table().header()", function () {
              return this.iterator(
                "table",
                function (p) {
                  return p.nTHead;
                },
                1
              );
            }),
            t("tables().footer()", "table().footer()", function () {
              return this.iterator(
                "table",
                function (p) {
                  return p.nTFoot;
                },
                1
              );
            }),
            t("tables().containers()", "table().container()", function () {
              return this.iterator(
                "table",
                function (p) {
                  return p.nTableWrapper;
                },
                1
              );
            }),
            r("draw()", function (p) {
              return this.iterator("table", function (_) {
                Ui(_, p === !1);
              });
            }),
            r("page()", function (p) {
              return p === h
                ? this.page.info().page
                : this.iterator("table", function (_) {
                    Ne(_, p);
                  });
            }),
            r("page.info()", function (p) {
              if (this.context.length === 0) return h;
              var _ = this.context[0],
                T = _._iDisplayStart,
                V = _._iDisplayLength,
                A = _.fnRecordsDisplay(),
                I = V === -1;
              return {
                page: I ? 0 : Math.floor(T / V),
                pages: I ? 1 : Math.ceil(A / V),
                start: T,
                end: _.fnDisplayEnd(),
                length: V,
                recordsTotal: _.fnRecordsTotal(),
                recordsDisplay: A,
              };
            }),
            r("page.len()", function (p) {
              return p === h
                ? this.context.length !== 0
                  ? this.context[0]._iDisplayLength
                  : h
                : this.iterator("table", function (_) {
                    ve(_, p);
                  });
            });
          var qi = function (p, _, T) {
            if (
              (ci(p) == "ssp"
                ? Ui(p, _)
                : (E(p, !0),
                  Xi(p, [], function (A) {
                    li(p);
                    for (var I = tt(p, A), M = 0, R = I.length; M < R; M++)
                      Le(p, I[M]);
                    Ui(p, _), E(p, !1);
                  })),
              T)
            ) {
              var V = new u(p);
              V.one("draw", function () {
                T(V.ajax.json());
              });
            }
          };
          r("ajax.json()", function () {
            var p = this.context;
            if (p.length > 0) return p[0].json;
          }),
            r("ajax.params()", function () {
              var p = this.context;
              if (p.length > 0) return p[0].oAjaxData;
            }),
            r("ajax.reload()", function (p, _) {
              return this.iterator("table", function (T) {
                qi(T, _ === !1, p);
              });
            }),
            r("ajax.url()", function (p) {
              var _ = this.context;
              return p === h
                ? _.length === 0
                  ? h
                  : ((_ = _[0]),
                    _.ajax
                      ? i.isPlainObject(_.ajax)
                        ? _.ajax.url
                        : _.ajax
                      : _.sAjaxSource)
                : this.iterator("table", function (T) {
                    i.isPlainObject(T.ajax) ? (T.ajax.url = p) : (T.ajax = p);
                  });
            }),
            r("ajax.url().load()", function (p, _) {
              return this.iterator("table", function (T) {
                qi(T, _ === !1, p);
              });
            });
          var $i = function (p, _) {
              var T = [],
                V,
                A,
                I,
                M,
                R,
                U,
                Y = typeof p;
              for (
                (!p || Y === "string" || Y === "function" || p.length === h) &&
                  (p = [p]),
                  I = 0,
                  M = p.length;
                I < M;
                I++
              )
                for (
                  A = p[I] && p[I].split ? p[I].split(",") : [p[I]],
                    R = 0,
                    U = A.length;
                  R < U;
                  R++
                )
                  (V = _(typeof A[R] == "string" ? i.trim(A[R]) : A[R])),
                    V && V.length && T.push.apply(T, V);
              return T;
            },
            pt = function (p) {
              return (
                p || (p = {}),
                p.filter && !p.search && (p.search = p.filter),
                {
                  search: p.search || "none",
                  order: p.order || "current",
                  page: p.page || "all",
                }
              );
            },
            ut = function (p) {
              for (var _ = 0, T = p.length; _ < T; _++)
                if (p[_].length > 0)
                  return (
                    (p[0] = p[_]),
                    (p.length = 1),
                    (p.context = [p.context[_]]),
                    p
                  );
              return (p.length = 0), p;
            },
            gt = function (p, _) {
              var T,
                V,
                A,
                I = [],
                M = p.aiDisplay,
                R = p.aiDisplayMaster,
                U = _.search,
                Y = _.order,
                X = _.page;
              if (ci(p) == "ssp") return U === "removed" ? [] : D(0, R.length);
              if (X == "current")
                for (T = p._iDisplayStart, V = p.fnDisplayEnd(); T < V; T++)
                  I.push(M[T]);
              else if (Y == "current" || Y == "applied")
                I =
                  U == "none"
                    ? R.slice()
                    : U == "applied"
                    ? M.slice()
                    : i.map(R, function (ee, se) {
                        return i.inArray(ee, M) === -1 ? ee : null;
                      });
              else if (Y == "index" || Y == "original")
                for (T = 0, V = p.aoData.length; T < V; T++)
                  U == "none"
                    ? I.push(T)
                    : ((A = i.inArray(T, M)),
                      ((A === -1 && U == "removed") ||
                        (A >= 0 && U == "applied")) &&
                        I.push(T));
              return I;
            },
            yt = function (p, _, T) {
              return $i(_, function (V) {
                var A = b(V),
                  I,
                  M;
                if (A !== null && !T) return [A];
                var R = gt(p, T);
                if (A !== null && i.inArray(A, R) !== -1) return [A];
                if (!V) return R;
                if (typeof V == "function")
                  return i.map(R, function (Y) {
                    var X = p.aoData[Y];
                    return V(Y, X._aData, X.nTr) ? Y : null;
                  });
                var U = L(F(p.aoData, R, "nTr"));
                return V.nodeName && i.inArray(V, U) !== -1
                  ? [V._DT_RowIndex]
                  : i(U)
                      .filter(V)
                      .map(function () {
                        return this._DT_RowIndex;
                      })
                      .toArray();
              });
            };
          r("rows()", function (p, _) {
            p === h ? (p = "") : i.isPlainObject(p) && ((_ = p), (p = "")),
              (_ = pt(_));
            var T = this.iterator(
              "table",
              function (V) {
                return yt(V, p, _);
              },
              1
            );
            return (T.selector.rows = p), (T.selector.opts = _), T;
          }),
            r("rows().nodes()", function () {
              return this.iterator(
                "row",
                function (p, _) {
                  return p.aoData[_].nTr || h;
                },
                1
              );
            }),
            r("rows().data()", function () {
              return this.iterator(
                !0,
                "rows",
                function (p, _) {
                  return F(p.aoData, _, "_aData");
                },
                1
              );
            }),
            t("rows().cache()", "row().cache()", function (p) {
              return this.iterator(
                "row",
                function (_, T) {
                  var V = _.aoData[T];
                  return p === "search" ? V._aFilterData : V._aSortData;
                },
                1
              );
            }),
            t("rows().invalidate()", "row().invalidate()", function (p) {
              return this.iterator("row", function (_, T) {
                Vi(_, T, p);
              });
            }),
            t("rows().indexes()", "row().index()", function () {
              return this.iterator(
                "row",
                function (p, _) {
                  return _;
                },
                1
              );
            }),
            t("rows().remove()", "row().remove()", function () {
              var p = this;
              return this.iterator("row", function (_, T, V) {
                var A = _.aoData;
                A.splice(T, 1);
                for (var I = 0, M = A.length; I < M; I++)
                  A[I].nTr !== null && (A[I].nTr._DT_RowIndex = I);
                var R = i.inArray(T, _.aiDisplay);
                gi(_.aiDisplayMaster, T),
                  gi(_.aiDisplay, T),
                  gi(p[V], T, !1),
                  Hi(_);
              });
            }),
            r("rows.add()", function (p) {
              var _ = this.iterator(
                  "table",
                  function (V) {
                    var A,
                      I,
                      M,
                      R = [];
                    for (I = 0, M = p.length; I < M; I++)
                      (A = p[I]),
                        A.nodeName && A.nodeName.toUpperCase() === "TR"
                          ? R.push(De(V, A)[0])
                          : R.push(Le(V, A));
                    return R;
                  },
                  1
                ),
                T = this.rows(-1);
              return T.pop(), T.push.apply(T, _.toArray()), T;
            }),
            r("row()", function (p, _) {
              return ut(this.rows(p, _));
            }),
            r("row().data()", function (p) {
              var _ = this.context;
              return p === h
                ? _.length && this.length
                  ? _[0].aoData[this[0]]._aData
                  : h
                : ((_[0].aoData[this[0]]._aData = p),
                  Vi(_[0], this[0], "data"),
                  this);
            }),
            r("row().node()", function () {
              var p = this.context;
              return (
                (p.length && this.length && p[0].aoData[this[0]].nTr) || null
              );
            }),
            r("row.add()", function (p) {
              p instanceof i && p.length && (p = p[0]);
              var _ = this.iterator("table", function (T) {
                return p.nodeName && p.nodeName.toUpperCase() === "TR"
                  ? De(T, p)[0]
                  : Le(T, p);
              });
              return this.row(_[0]);
            });
          var Et = function (p, _, T, V) {
              var A = [],
                I = function (U, Y) {
                  if (U.nodeName && U.nodeName.toLowerCase() === "tr")
                    A.push(U);
                  else {
                    var X = i("<tr><td/></tr>").addClass(Y);
                    (i("td", X).addClass(Y).html(U)[0].colSpan = fe(p)),
                      A.push(X[0]);
                  }
                };
              if (i.isArray(T) || T instanceof i)
                for (var M = 0, R = T.length; M < R; M++) I(T[M], V);
              else I(T, V);
              _._details && _._details.remove(),
                (_._details = i(A)),
                _._detailsShow && _._details.insertAfter(_.nTr);
            },
            xt = function (p, _) {
              var T = p.context;
              if (T.length) {
                var V = T[0].aoData[_ !== h ? _ : p[0]];
                V._details &&
                  (V._details.remove(), (V._detailsShow = h), (V._details = h));
              }
            },
            Tt = function (p, _) {
              var T = p.context;
              if (T.length && p.length) {
                var V = T[0].aoData[p[0]];
                V._details &&
                  ((V._detailsShow = _),
                  _ ? V._details.insertAfter(V.nTr) : V._details.detach(),
                  Mt(T[0]));
              }
            },
            Mt = function (p) {
              var _ = new u(p),
                T = ".dt.DT_details",
                V = "draw" + T,
                A = "column-visibility" + T,
                I = "destroy" + T,
                M = p.aoData;
              _.off(V + " " + A + " " + I),
                P(M, "_details").length > 0 &&
                  (_.on(V, function (R, U) {
                    p === U &&
                      _.rows({ page: "current" })
                        .eq(0)
                        .each(function (Y) {
                          var X = M[Y];
                          X._detailsShow && X._details.insertAfter(X.nTr);
                        });
                  }),
                  _.on(A, function (R, U, Y, X) {
                    if (p === U)
                      for (
                        var ee, se = fe(U), oe = 0, he = M.length;
                        oe < he;
                        oe++
                      )
                        (ee = M[oe]),
                          ee._details &&
                            ee._details
                              .children("td[colspan]")
                              .attr("colspan", se);
                  }),
                  _.on(I, function (R, U) {
                    if (p === U)
                      for (var Y = 0, X = M.length; Y < X; Y++)
                        M[Y]._details && xt(_, Y);
                  }));
            },
            Ft = "",
            vt = Ft + "row().child",
            Ct = vt + "()";
          r(Ct, function (p, _) {
            var T = this.context;
            return p === h
              ? T.length && this.length
                ? T[0].aoData[this[0]]._details
                : h
              : (p === !0
                  ? this.child.show()
                  : p === !1
                  ? xt(this)
                  : T.length &&
                    this.length &&
                    Et(T[0], T[0].aoData[this[0]], p, _),
                this);
          }),
            r([vt + ".show()", Ct + ".show()"], function (p) {
              return Tt(this, !0), this;
            }),
            r([vt + ".hide()", Ct + ".hide()"], function () {
              return Tt(this, !1), this;
            }),
            r([vt + ".remove()", Ct + ".remove()"], function () {
              return xt(this), this;
            }),
            r(vt + ".isShown()", function () {
              var p = this.context;
              return (
                (p.length &&
                  this.length &&
                  p[0].aoData[this[0]]._detailsShow) ||
                !1
              );
            });
          var Dt = /^(.+):(name|visIdx|visible)$/,
            Vt = function (p, _, T, V, A) {
              for (var I = [], M = 0, R = A.length; M < R; M++)
                I.push(He(p, A[M], _));
              return I;
            },
            Ot = function (p, _, T) {
              var V = p.aoColumns,
                A = P(V, "sName"),
                I = P(V, "nTh");
              return $i(_, function (M) {
                var R = b(M);
                if (M === "") return D(V.length);
                if (R !== null) return [R >= 0 ? R : V.length + R];
                if (typeof M == "function") {
                  var U = gt(p, T);
                  return i.map(V, function (se, oe) {
                    return M(oe, Vt(p, oe, 0, 0, U), I[oe]) ? oe : null;
                  });
                }
                var Y = typeof M == "string" ? M.match(Dt) : "";
                if (Y)
                  switch (Y[2]) {
                    case "visIdx":
                    case "visible":
                      var X = parseInt(Y[1], 10);
                      if (X < 0) {
                        var ee = i.map(V, function (se, oe) {
                          return se.bVisible ? oe : null;
                        });
                        return [ee[ee.length + X]];
                      }
                      return [ie(p, X)];
                    case "name":
                      return i.map(A, function (se, oe) {
                        return se === Y[1] ? oe : null;
                      });
                  }
                else
                  return i(I)
                    .filter(M)
                    .map(function () {
                      return i.inArray(this, I);
                    })
                    .toArray();
              });
            },
            Rt = function (p, _, T, V) {
              var A = p.aoColumns,
                I = A[_],
                M = p.aoData,
                R,
                U,
                Y,
                X,
                ee;
              if (T === h) return I.bVisible;
              if (I.bVisible !== T) {
                if (T) {
                  var se = i.inArray(!0, P(A, "bVisible"), _ + 1);
                  for (Y = 0, X = M.length; Y < X; Y++)
                    (ee = M[Y].nTr),
                      (U = M[Y].anCells),
                      ee && ee.insertBefore(U[_], U[se] || null);
                } else i(P(p.aoData, "anCells", _)).detach();
                (I.bVisible = T),
                  ji(p, p.aoHeader),
                  ji(p, p.aoFooter),
                  (V === h || V) &&
                    (_e(p), (p.oScroll.sX || p.oScroll.sY) && j(p)),
                  ri(p, null, "column-visibility", [p, _, T]),
                  ni(p);
              }
            };
          r("columns()", function (p, _) {
            p === h ? (p = "") : i.isPlainObject(p) && ((_ = p), (p = "")),
              (_ = pt(_));
            var T = this.iterator(
              "table",
              function (V) {
                return Ot(V, p, _);
              },
              1
            );
            return (T.selector.cols = p), (T.selector.opts = _), T;
          }),
            t("columns().header()", "column().header()", function (p, _) {
              return this.iterator(
                "column",
                function (T, V) {
                  return T.aoColumns[V].nTh;
                },
                1
              );
            }),
            t("columns().footer()", "column().footer()", function (p, _) {
              return this.iterator(
                "column",
                function (T, V) {
                  return T.aoColumns[V].nTf;
                },
                1
              );
            }),
            t("columns().data()", "column().data()", function () {
              return this.iterator("column-rows", Vt, 1);
            }),
            t("columns().dataSrc()", "column().dataSrc()", function () {
              return this.iterator(
                "column",
                function (p, _) {
                  return p.aoColumns[_].mData;
                },
                1
              );
            }),
            t("columns().cache()", "column().cache()", function (p) {
              return this.iterator(
                "column-rows",
                function (_, T, V, A, I) {
                  return F(
                    _.aoData,
                    I,
                    p === "search" ? "_aFilterData" : "_aSortData",
                    T
                  );
                },
                1
              );
            }),
            t("columns().nodes()", "column().nodes()", function () {
              return this.iterator(
                "column-rows",
                function (p, _, T, V, A) {
                  return F(p.aoData, A, "anCells", _);
                },
                1
              );
            }),
            t("columns().visible()", "column().visible()", function (p, _) {
              return this.iterator("column", function (T, V) {
                if (p === h) return T.aoColumns[V].bVisible;
                Rt(T, V, p, _);
              });
            }),
            t("columns().indexes()", "column().index()", function (p) {
              return this.iterator(
                "column",
                function (_, T) {
                  return p === "visible" ? ae(_, T) : T;
                },
                1
              );
            }),
            r("columns.adjust()", function () {
              return this.iterator(
                "table",
                function (p) {
                  _e(p);
                },
                1
              );
            }),
            r("column.index()", function (p, _) {
              if (this.context.length !== 0) {
                var T = this.context[0];
                if (p === "fromVisible" || p === "toData") return ie(T, _);
                if (p === "fromData" || p === "toVisible") return ae(T, _);
              }
            }),
            r("column()", function (p, _) {
              return ut(this.columns(p, _));
            });
          var Bt = function (p, _, T) {
            var V = p.aoData,
              A = gt(p, T),
              I = L(F(V, A, "anCells")),
              M = i([].concat.apply([], I)),
              R,
              U = p.aoColumns.length,
              Y,
              X,
              ee,
              se,
              oe,
              he;
            return $i(_, function (ye) {
              var je = typeof ye == "function";
              if (ye === null || ye === h || je) {
                for (Y = [], X = 0, ee = A.length; X < ee; X++)
                  for (R = A[X], se = 0; se < U; se++)
                    (oe = { row: R, column: se }),
                      je
                        ? ((he = p.aoData[R]),
                          ye(oe, He(p, R, se), he.anCells[se]) && Y.push(oe))
                        : Y.push(oe);
                return Y;
              }
              return i.isPlainObject(ye)
                ? [ye]
                : M.filter(ye)
                    .map(function (Je, Ie) {
                      return (
                        (R = Ie.parentNode._DT_RowIndex),
                        { row: R, column: i.inArray(Ie, V[R].anCells) }
                      );
                    })
                    .toArray();
            });
          };
          r("cells()", function (p, _, T) {
            if (
              (i.isPlainObject(p) &&
                (typeof p.row !== h
                  ? ((T = _), (_ = null))
                  : ((T = p), (p = null))),
              i.isPlainObject(_) && ((T = _), (_ = null)),
              _ === null || _ === h)
            )
              return this.iterator("table", function (ee) {
                return Bt(ee, p, pt(T));
              });
            var V = this.columns(_, T),
              A = this.rows(p, T),
              I,
              M,
              R,
              U,
              Y,
              X = this.iterator(
                "table",
                function (ee, se) {
                  for (I = [], M = 0, R = A[se].length; M < R; M++)
                    for (U = 0, Y = V[se].length; U < Y; U++)
                      I.push({ row: A[se][M], column: V[se][U] });
                  return I;
                },
                1
              );
            return i.extend(X.selector, { cols: _, rows: p, opts: T }), X;
          }),
            t("cells().nodes()", "cell().node()", function () {
              return this.iterator(
                "cell",
                function (p, _, T) {
                  var V = p.aoData[_].anCells;
                  return V ? V[T] : h;
                },
                1
              );
            }),
            r("cells().data()", function () {
              return this.iterator(
                "cell",
                function (p, _, T) {
                  return He(p, _, T);
                },
                1
              );
            }),
            t("cells().cache()", "cell().cache()", function (p) {
              return (
                (p = p === "search" ? "_aFilterData" : "_aSortData"),
                this.iterator(
                  "cell",
                  function (_, T, V) {
                    return _.aoData[T][p][V];
                  },
                  1
                )
              );
            }),
            t("cells().render()", "cell().render()", function (p) {
              return this.iterator(
                "cell",
                function (_, T, V) {
                  return He(_, T, V, p);
                },
                1
              );
            }),
            t("cells().indexes()", "cell().index()", function () {
              return this.iterator(
                "cell",
                function (p, _, T) {
                  return { row: _, column: T, columnVisible: ae(p, T) };
                },
                1
              );
            }),
            t("cells().invalidate()", "cell().invalidate()", function (p) {
              return this.iterator("cell", function (_, T, V) {
                Vi(_, T, p, V);
              });
            }),
            r("cell()", function (p, _, T) {
              return ut(this.cells(p, _, T));
            }),
            r("cell().data()", function (p) {
              var _ = this.context,
                T = this[0];
              return p === h
                ? _.length && T.length
                  ? He(_[0], T[0].row, T[0].column)
                  : h
                : (me(_[0], T[0].row, T[0].column, p),
                  Vi(_[0], T[0].row, "data", T[0].column),
                  this);
            }),
            r("order()", function (p, _) {
              var T = this.context;
              return p === h
                ? T.length !== 0
                  ? T[0].aaSorting
                  : h
                : (typeof p == "number"
                    ? (p = [[p, _]])
                    : i.isArray(p[0]) ||
                      (p = Array.prototype.slice.call(arguments)),
                  this.iterator("table", function (V) {
                    V.aaSorting = p.slice();
                  }));
            }),
            r("orderNeutral()", function () {
              return this.iterator("table", function (p) {
                p.aaSorting = [];
              });
            }),
            r("order.listener()", function (p, _, T) {
              return this.iterator("table", function (V) {
                ei(V, p, _, T);
              });
            }),
            r(["columns().order()", "column().order()"], function (p) {
              var _ = this;
              return this.iterator("table", function (T, V) {
                var A = [];
                i.each(_[V], function (I, M) {
                  A.push([M, p]);
                }),
                  (T.aaSorting = A);
              });
            }),
            r("search()", function (p, _, T, V) {
              var A = this.context;
              return p === h
                ? A.length !== 0
                  ? A[0].oPreviousSearch.sSearch
                  : h
                : this.iterator("table", function (I) {
                    I.oFeatures.bFilter &&
                      xi(
                        I,
                        i.extend({}, I.oPreviousSearch, {
                          sSearch: p + "",
                          bRegex: _ === null ? !1 : _,
                          bSmart: T === null ? !0 : T,
                          bCaseInsensitive: V === null ? !0 : V,
                        }),
                        1
                      );
                  });
            }),
            t("columns().search()", "column().search()", function (p, _, T, V) {
              return this.iterator("column", function (A, I) {
                var M = A.aoPreSearchCols;
                if (p === h) return M[I].sSearch;
                A.oFeatures.bFilter &&
                  (i.extend(M[I], {
                    sSearch: p + "",
                    bRegex: _ === null ? !1 : _,
                    bSmart: T === null ? !0 : T,
                    bCaseInsensitive: V === null ? !0 : V,
                  }),
                  xi(A, A.oPreviousSearch, 1));
              });
            }),
            r("state()", function () {
              return this.context.length ? this.context[0].oSavedState : null;
            }),
            r("state.clear()", function () {
              return this.iterator("table", function (p) {
                p.fnStateSaveCallback.call(p.oInstance, p, {});
              });
            }),
            r("state.loaded()", function () {
              return this.context.length ? this.context[0].oLoadedState : null;
            }),
            r("state.save()", function () {
              return this.iterator("table", function (p) {
                ni(p);
              });
            }),
            (e.versionCheck = e.fnVersionCheck =
              function (p) {
                for (
                  var _ = e.version.split("."),
                    T = p.split("."),
                    V,
                    A,
                    I = 0,
                    M = T.length;
                  I < M;
                  I++
                )
                  if (
                    ((V = parseInt(_[I], 10) || 0),
                    (A = parseInt(T[I], 10) || 0),
                    V !== A)
                  )
                    return V > A;
                return !0;
              }),
            (e.isDataTable = e.fnIsDataTable =
              function (p) {
                var _ = i(p).get(0),
                  T = !1;
                return (
                  i.each(e.settings, function (V, A) {
                    (A.nTable === _ ||
                      A.nScrollHead === _ ||
                      A.nScrollFoot === _) &&
                      (T = !0);
                  }),
                  T
                );
              }),
            (e.tables = e.fnTables =
              function (p) {
                return i.map(e.settings, function (_) {
                  if (!p || (p && i(_.nTable).is(":visible"))) return _.nTable;
                });
              }),
            (e.util = { throttle: de, escapeRegex: vi }),
            (e.camelToHungarian = N),
            r("$()", function (p, _) {
              var T = this.rows(_).nodes(),
                V = i(T);
              return i([].concat(V.filter(p).toArray(), V.find(p).toArray()));
            }),
            i.each(["on", "one", "off"], function (p, _) {
              r(_ + "()", function () {
                var T = Array.prototype.slice.call(arguments);
                T[0].match(/\.dt\b/) || (T[0] += ".dt");
                var V = i(this.tables().nodes());
                return V[_].apply(V, T), this;
              });
            }),
            r("clear()", function () {
              return this.iterator("table", function (p) {
                li(p);
              });
            }),
            r("settings()", function () {
              return new u(this.context, this.context);
            }),
            r("data()", function () {
              return this.iterator("table", function (p) {
                return P(p.aoData, "_aData");
              }).flatten();
            }),
            r("destroy()", function (p) {
              return (
                (p = p || !1),
                this.iterator("table", function (_) {
                  var T = _.nTableWrapper.parentNode,
                    V = _.oClasses,
                    A = _.nTable,
                    I = _.nTBody,
                    M = _.nTHead,
                    R = _.nTFoot,
                    U = i(A),
                    Y = i(I),
                    X = i(_.nTableWrapper),
                    ee = i.map(_.aoData, function (ye) {
                      return ye.nTr;
                    }),
                    se,
                    oe;
                  (_.bDestroying = !0),
                    ri(_, "aoDestroyCallback", "destroy", [_]),
                    p || new u(_).columns().visible(!0),
                    X.off(".DT").find(":not(tbody *)").off(".DT"),
                    i(d).off(".DT-" + _.sInstance),
                    A != M.parentNode &&
                      (U.children("thead").detach(), U.append(M)),
                    R &&
                      A != R.parentNode &&
                      (U.children("tfoot").detach(), U.append(R)),
                    U.detach(),
                    X.detach(),
                    (_.aaSorting = []),
                    (_.aaSortingFixed = []),
                    Ye(_),
                    i(ee).removeClass(_.asStripeClasses.join(" ")),
                    i("th, td", M).removeClass(
                      V.sSortable +
                        " " +
                        V.sSortableAsc +
                        " " +
                        V.sSortableDesc +
                        " " +
                        V.sSortableNone
                    ),
                    _.bJUI &&
                      (i(
                        "th span." + V.sSortIcon + ", td span." + V.sSortIcon,
                        M
                      ).detach(),
                      i("th, td", M).each(function () {
                        var ye = i("div." + V.sSortJUIWrapper, this);
                        i(this).append(ye.contents()), ye.detach();
                      })),
                    !p && T && T.insertBefore(A, _.nTableReinsertBefore),
                    Y.children().detach(),
                    Y.append(ee),
                    U.css("width", _.sDestroyWidth).removeClass(V.sTable),
                    (oe = _.asDestroyStripes.length),
                    oe &&
                      Y.children().each(function (ye) {
                        i(this).addClass(_.asDestroyStripes[ye % oe]);
                      });
                  var he = i.inArray(_, e.settings);
                  he !== -1 && e.settings.splice(he, 1);
                })
              );
            }),
            (e.version = "1.10.4"),
            (e.settings = []),
            (e.models = {}),
            (e.models.oSearch = {
              bCaseInsensitive: !0,
              sSearch: "",
              bRegex: !1,
              bSmart: !0,
            }),
            (e.models.oRow = {
              nTr: null,
              anCells: null,
              _aData: [],
              _aSortData: null,
              _aFilterData: null,
              _sFilterRow: null,
              _sRowStripe: "",
              src: null,
            }),
            (e.models.oColumn = {
              idx: null,
              aDataSort: null,
              asSorting: null,
              bSearchable: null,
              bSortable: null,
              bVisible: null,
              _sManualType: null,
              _bAttrSrc: !1,
              fnCreatedCell: null,
              fnGetData: null,
              fnSetData: null,
              mData: null,
              mRender: null,
              nTh: null,
              nTf: null,
              sClass: null,
              sContentPadding: null,
              sDefaultContent: null,
              sName: null,
              sSortDataType: "std",
              sSortingClass: null,
              sSortingClassJUI: null,
              sTitle: null,
              sType: null,
              sWidth: null,
              sWidthOrig: null,
            }),
            (e.defaults = {
              aaData: null,
              aaSorting: [[0, "asc"]],
              aaSortingFixed: [],
              ajax: null,
              aLengthMenu: [10, 25, 50, 100],
              aoColumns: null,
              aoColumnDefs: null,
              aoSearchCols: [],
              asStripeClasses: null,
              bAutoWidth: !0,
              bDeferRender: !1,
              bDestroy: !1,
              bFilter: !0,
              bInfo: !0,
              bJQueryUI: !1,
              bLengthChange: !0,
              bPaginate: !0,
              bProcessing: !1,
              bRetrieve: !1,
              bScrollCollapse: !1,
              bServerSide: !1,
              bSort: !0,
              bSortMulti: !0,
              bSortCellsTop: !1,
              bSortClasses: !0,
              bStateSave: !1,
              fnCreatedRow: null,
              fnDrawCallback: null,
              fnFooterCallback: null,
              fnFormatNumber: function (p) {
                return p
                  .toString()
                  .replace(/\B(?=(\d{3})+(?!\d))/g, this.oLanguage.sThousands);
              },
              fnHeaderCallback: null,
              fnInfoCallback: null,
              fnInitComplete: null,
              fnPreDrawCallback: null,
              fnRowCallback: null,
              fnServerData: null,
              fnServerParams: null,
              fnStateLoadCallback: function (p) {
                try {
                  return JSON.parse(
                    (p.iStateDuration === -1
                      ? sessionStorage
                      : localStorage
                    ).getItem(
                      "DataTables_" + p.sInstance + "_" + location.pathname
                    )
                  );
                } catch {}
              },
              fnStateLoadParams: null,
              fnStateLoaded: null,
              fnStateSaveCallback: function (p, _) {
                try {
                  (p.iStateDuration === -1
                    ? sessionStorage
                    : localStorage
                  ).setItem(
                    "DataTables_" + p.sInstance + "_" + location.pathname,
                    JSON.stringify(_)
                  );
                } catch {}
              },
              fnStateSaveParams: null,
              iStateDuration: 7200,
              iDeferLoading: null,
              iDisplayLength: 10,
              iDisplayStart: 0,
              iTabIndex: 0,
              oClasses: {},
              oLanguage: {
                oAria: {
                  sSortedDescending: "{0} in descending order",
                  sSortedAscending: "{0} in ascending order",
                },
                oTooltip: {
                  sSortAscending: "In ascending order",
                  sSortDescending: "In descending order",
                  sIsUnsorted: "Unsorted",
                },
                oPaginate: {
                  sFirst: "First",
                  sLast: "Last",
                  sNext: "Next",
                  sPrevious: "Previous",
                },
                sEmptyTable: "No data available in table",
                sInfo: "Showing _START_ to _END_ of _TOTAL_ entries",
                sInfoEmpty: "Showing 0 to 0 of 0 entries",
                sInfoFiltered: "(filtered from _MAX_ total entries)",
                sInfoPostFix: "",
                sDecimal: "",
                sThousands: ",",
                sLengthMenu: "Show _MENU_ entries",
                sLoadingRecords: "Loading...",
                sProcessing: "Processing...",
                sSearch: "Search:",
                sSearchPlaceholder: "",
                sUrl: "",
                sZeroRecords: "No matching records found",
              },
              oSearch: i.extend({}, e.models.oSearch),
              sAjaxDataProp: "data",
              sAjaxSource: null,
              sDom: "lfrtip",
              searchDelay: null,
              sPaginationType: "simple_numbers",
              sScrollX: "",
              sScrollXInner: "",
              sScrollY: "",
              sServerMethod: "GET",
              renderer: null,
            }),
            G(e.defaults),
            (e.defaults.column = {
              aDataSort: null,
              iDataSort: -1,
              asSorting: ["asc", "desc"],
              bSearchable: !0,
              bSortable: !0,
              bVisible: !0,
              fnCreatedCell: null,
              mData: null,
              mRender: null,
              sCellType: "td",
              sClass: "",
              sContentPadding: "",
              sDefaultContent: null,
              sName: "",
              sSortDataType: "std",
              sTitle: null,
              sType: null,
              sWidth: null,
            }),
            G(e.defaults.column),
            (e.models.oSettings = {
              oFeatures: {
                bAutoWidth: null,
                bDeferRender: null,
                bFilter: null,
                bInfo: null,
                bLengthChange: null,
                bPaginate: null,
                bProcessing: null,
                bServerSide: null,
                bSort: null,
                bSortMulti: null,
                bSortClasses: null,
                bStateSave: null,
              },
              oScroll: {
                bCollapse: null,
                iBarWidth: 0,
                sX: null,
                sXInner: null,
                sY: null,
              },
              oLanguage: { fnInfoCallback: null },
              oBrowser: { bScrollOversize: !1, bScrollbarLeft: !1 },
              ajax: null,
              aanFeatures: [],
              aoData: [],
              aiDisplay: [],
              aiDisplayMaster: [],
              aoColumns: [],
              aoHeader: [],
              aoFooter: [],
              oPreviousSearch: {},
              aoPreSearchCols: [],
              aaSorting: null,
              aaSortingFixed: [],
              asStripeClasses: null,
              asDestroyStripes: [],
              sDestroyWidth: 0,
              aoRowCallback: [],
              aoHeaderCallback: [],
              aoFooterCallback: [],
              aoDrawCallback: [],
              aoRowCreatedCallback: [],
              aoPreDrawCallback: [],
              aoInitComplete: [],
              aoStateSaveParams: [],
              aoStateLoadParams: [],
              aoStateLoaded: [],
              sTableId: "",
              nTable: null,
              nTHead: null,
              nTFoot: null,
              nTBody: null,
              nTableWrapper: null,
              bDeferLoading: !1,
              bInitialised: !1,
              aoOpenRows: [],
              sDom: null,
              searchDelay: null,
              sPaginationType: "two_button",
              iStateDuration: 0,
              aoStateSave: [],
              aoStateLoad: [],
              oSavedState: null,
              oLoadedState: null,
              sAjaxSource: null,
              sAjaxDataProp: null,
              bAjaxDataGet: !0,
              jqXHR: null,
              json: h,
              oAjaxData: h,
              fnServerData: null,
              aoServerParams: [],
              sServerMethod: null,
              fnFormatNumber: null,
              aLengthMenu: null,
              iDraw: 0,
              bDrawing: !1,
              iDrawError: -1,
              _iDisplayLength: 10,
              _iDisplayStart: 0,
              _iRecordsTotal: 0,
              _iRecordsDisplay: 0,
              bJUI: null,
              oClasses: {},
              bFiltered: !1,
              bSorted: !1,
              bSortCellsTop: null,
              oInit: null,
              aoDestroyCallback: [],
              fnRecordsTotal: function () {
                return ci(this) == "ssp"
                  ? this._iRecordsTotal * 1
                  : this.aiDisplayMaster.length;
              },
              fnRecordsDisplay: function () {
                return ci(this) == "ssp"
                  ? this._iRecordsDisplay * 1
                  : this.aiDisplay.length;
              },
              fnDisplayEnd: function () {
                var p = this._iDisplayLength,
                  _ = this._iDisplayStart,
                  T = _ + p,
                  V = this.aiDisplay.length,
                  A = this.oFeatures,
                  I = A.bPaginate;
                return A.bServerSide
                  ? I === !1 || p === -1
                    ? _ + V
                    : Math.min(_ + p, this._iRecordsDisplay)
                  : !I || T > V || p === -1
                  ? V
                  : T;
              },
              oInstance: null,
              sInstance: null,
              iTabIndex: 0,
              nScrollHead: null,
              nScrollFoot: null,
              aLastSort: [],
              oPlugins: {},
            }),
            (e.ext = l =
              {
                classes: {},
                errMode: "alert",
                feature: [],
                search: [],
                internal: {},
                legacy: { ajax: null },
                pager: {},
                renderer: { pageButton: {}, header: {} },
                order: {},
                type: { detect: [], search: {}, order: {} },
                _unique: 0,
                fnVersionCheck: e.fnVersionCheck,
                iApiIndex: 0,
                oJUIClasses: {},
                sVersion: e.version,
              }),
            i.extend(l, {
              afnFiltering: l.search,
              aTypes: l.type.detect,
              ofnSearch: l.type.search,
              oSort: l.type.order,
              afnSortData: l.order,
              aoFeatures: l.feature,
              oApi: l.internal,
              oStdClasses: l.classes,
              oPagination: l.pager,
            }),
            i.extend(e.ext.classes, {
              sTable: "dataTable",
              sNoFooter: "no-footer",
              sPageButton: "paginate_button",
              sPageButtonActive: "current",
              sPageButtonDisabled: "disabled",
              sStripeOdd: "odd",
              sStripeEven: "even",
              sRowEmpty: "dataTables_empty",
              sWrapper: "dataTables_wrapper",
              sFilter: "dataTables_filter",
              sInfo: "dataTables_info",
              sPaging: "dataTables_paginate paging_",
              sLength: "dataTables_length",
              sProcessing: "dataTables_processing",
              sSortAsc: "sorting_asc",
              sSortDesc: "sorting_desc",
              sSortable: "sorting",
              sSortableAsc: "sorting_asc_disabled",
              sSortableDesc: "sorting_desc_disabled",
              sSortableNone: "sorting_disabled",
              sSortColumn: "sorting_",
              sFilterInput: "",
              sLengthSelect: "",
              sScrollWrapper: "dataTables_scroll",
              sScrollHead: "dataTables_scrollHead",
              sScrollHeadInner: "dataTables_scrollHeadInner",
              sScrollBody: "dataTables_scrollBody",
              sScrollFoot: "dataTables_scrollFoot",
              sScrollFootInner: "dataTables_scrollFootInner",
              sHeaderTH: "",
              sFooterTH: "",
              sSortJUIAsc: "",
              sSortJUIDesc: "",
              sSortJUI: "",
              sSortJUIAscAllowed: "",
              sSortJUIDescAllowed: "",
              sSortJUIWrapper: "",
              sSortIcon: "",
              sJUIHeader: "",
              sJUIFooter: "",
            }),
            (function () {
              var p = "";
              p = "";
              var _ = p + "ui-state-default",
                T = p + "css_right ui-icon ui-icon-",
                V =
                  p +
                  "fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";
              i.extend(e.ext.oJUIClasses, e.ext.classes, {
                sPageButton: "fg-button ui-button " + _,
                sPageButtonActive: "ui-state-disabled",
                sPageButtonDisabled: "ui-state-disabled",
                sPaging:
                  "dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",
                sSortAsc: _ + " sorting_asc",
                sSortDesc: _ + " sorting_desc",
                sSortable: _ + " sorting",
                sSortableAsc: _ + " sorting_asc_disabled",
                sSortableDesc: _ + " sorting_desc_disabled",
                sSortableNone: _ + " sorting_disabled",
                sSortJUIAsc: T + "triangle-1-n",
                sSortJUIDesc: T + "triangle-1-s",
                sSortJUI: T + "carat-2-n-s",
                sSortJUIAscAllowed: T + "carat-1-n",
                sSortJUIDescAllowed: T + "carat-1-s",
                sSortJUIWrapper: "DataTables_sort_wrapper",
                sSortIcon: "DataTables_sort_icon",
                sScrollHead: "dataTables_scrollHead " + _,
                sScrollFoot: "dataTables_scrollFoot " + _,
                sHeaderTH: _,
                sFooterTH: _,
                sJUIHeader: V + " ui-corner-tl ui-corner-tr",
                sJUIFooter: V + " ui-corner-bl ui-corner-br",
              });
            })();
          var St = e.ext.pager;
          function kt(p, _) {
            var T = [],
              V = St.numbers_length,
              A = Math.floor(V / 2),
              I = 1;
            return (
              _ <= V
                ? (T = D(0, _))
                : p <= A
                ? ((T = D(0, V - 2)), T.push("ellipsis"), T.push(_ - 1))
                : p >= _ - 1 - A
                ? ((T = D(_ - (V - 2), _)),
                  T.splice(0, 0, "ellipsis"),
                  T.splice(0, 0, 0))
                : ((T = D(p - 1, p + 2)),
                  T.push("ellipsis"),
                  T.push(_ - 1),
                  T.splice(0, 0, "ellipsis"),
                  T.splice(0, 0, 0)),
              (T.DT_el = "span"),
              T
            );
          }
          i.extend(St, {
            simple: function (p, _) {
              return ["previous", "next"];
            },
            full: function (p, _) {
              return ["first", "previous", "next", "last"];
            },
            simple_numbers: function (p, _) {
              return ["previous", kt(p, _), "next"];
            },
            full_numbers: function (p, _) {
              return ["first", "previous", kt(p, _), "next", "last"];
            },
            _numbers: kt,
            numbers_length: 7,
          }),
            i.extend(!0, e.ext.renderer, {
              pageButton: {
                _: function (p, _, T, V, A, I) {
                  var M = p.oClasses,
                    R = p.oLanguage.oPaginate,
                    U,
                    Y,
                    X = 0,
                    ee = function (oe, he) {
                      var ye,
                        je,
                        Je,
                        Ie,
                        be = function (fi) {
                          Ne(p, fi.data.action, !0);
                        };
                      for (ye = 0, je = he.length; ye < je; ye++)
                        if (((Ie = he[ye]), i.isArray(Ie))) {
                          var si = i("<" + (Ie.DT_el || "div") + "/>").appendTo(
                            oe
                          );
                          ee(si, Ie);
                        } else {
                          switch (((U = ""), (Y = ""), Ie)) {
                            case "ellipsis":
                              oe.append("<span>&hellip;</span>");
                              break;
                            case "first":
                              (U = R.sFirst),
                                (Y =
                                  Ie +
                                  (A > 0 ? "" : " " + M.sPageButtonDisabled));
                              break;
                            case "previous":
                              (U = R.sPrevious),
                                (Y =
                                  Ie +
                                  (A > 0 ? "" : " " + M.sPageButtonDisabled));
                              break;
                            case "next":
                              (U = R.sNext),
                                (Y =
                                  Ie +
                                  (A < I - 1
                                    ? ""
                                    : " " + M.sPageButtonDisabled));
                              break;
                            case "last":
                              (U = R.sLast),
                                (Y =
                                  Ie +
                                  (A < I - 1
                                    ? ""
                                    : " " + M.sPageButtonDisabled));
                              break;
                            default:
                              (U = Ie + 1),
                                (Y = A === Ie ? M.sPageButtonActive : "");
                              break;
                          }
                          U &&
                            ((Je = i("<a>", {
                              class: M.sPageButton + " " + Y,
                              "aria-controls": p.sTableId,
                              "data-dt-idx": X,
                              tabindex: p.iTabIndex,
                              id:
                                T === 0 && typeof Ie == "string"
                                  ? p.sTableId + "_" + Ie
                                  : null,
                            })
                              .html(U)
                              .appendTo(oe)),
                            ki(Je, { action: Ie }, be),
                            X++);
                        }
                    };
                  try {
                    var se = i(a.activeElement).data("dt-idx");
                    ee(i(_).empty(), V),
                      se !== null &&
                        i(_)
                          .find("[data-dt-idx=" + se + "]")
                          .focus();
                  } catch {}
                },
              },
            }),
            i.extend(e.ext.type.detect, [
              function (p, _) {
                var T = _.oLanguage.sDecimal;
                return k(p, T) ? "num" + T : null;
              },
              function (p, _) {
                if (p && !(p instanceof Date) && (!c.test(p) || !m.test(p)))
                  return null;
                var T = Date.parse(p);
                return (T !== null && !isNaN(T)) || w(p) ? "date" : null;
              },
              function (p, _) {
                var T = _.oLanguage.sDecimal;
                return k(p, T, !0) ? "num-fmt" + T : null;
              },
              function (p, _) {
                var T = _.oLanguage.sDecimal;
                return S(p, T) ? "html-num" + T : null;
              },
              function (p, _) {
                var T = _.oLanguage.sDecimal;
                return S(p, T, !0) ? "html-num-fmt" + T : null;
              },
              function (p, _) {
                return w(p) || (typeof p == "string" && p.indexOf("<") !== -1)
                  ? "html"
                  : null;
              },
            ]),
            i.extend(e.ext.type.search, {
              html: function (p) {
                return w(p)
                  ? p
                  : typeof p == "string"
                  ? p.replace(s, " ").replace(o, "")
                  : "";
              },
              string: function (p) {
                return w(p) ? p : typeof p == "string" ? p.replace(s, " ") : p;
              },
            });
          var _t = function (p, _, T, V) {
            return p !== 0 && (!p || p === "-")
              ? -1 / 0
              : (_ && (p = C(p, _)),
                p.replace &&
                  (T && (p = p.replace(T, "")), V && (p = p.replace(V, ""))),
                p * 1);
          };
          function It(p) {
            i.each(
              {
                num: function (_) {
                  return _t(_, p);
                },
                "num-fmt": function (_) {
                  return _t(_, p, g);
                },
                "html-num": function (_) {
                  return _t(_, p, o);
                },
                "html-num-fmt": function (_) {
                  return _t(_, p, o, g);
                },
              },
              function (_, T) {
                (l.type.order[_ + p + "-pre"] = T),
                  _.match(/^html\-/) &&
                    (l.type.search[_ + p] = l.type.search.html);
              }
            );
          }
          i.extend(l.type.order, {
            "date-pre": function (p) {
              return Date.parse(p) || 0;
            },
            "html-pre": function (p) {
              return w(p)
                ? ""
                : p.replace
                ? p.replace(/<.*?>/g, "").toLowerCase()
                : p + "";
            },
            "string-pre": function (p) {
              return w(p)
                ? ""
                : typeof p == "string"
                ? p.toLowerCase()
                : p.toString
                ? p.toString()
                : "";
            },
            "string-asc": function (p, _) {
              return p < _ ? -1 : p > _ ? 1 : 0;
            },
            "string-desc": function (p, _) {
              return p < _ ? 1 : p > _ ? -1 : 0;
            },
          }),
            It(""),
            i.extend(!0, e.ext.renderer, {
              header: {
                _: function (p, _, T, V) {
                  i(p.nTable).on("order.dt.DT", function (A, I, M, R) {
                    if (p === I) {
                      var U = T.idx;
                      _.removeClass(
                        T.sSortingClass + " " + V.sSortAsc + " " + V.sSortDesc
                      ).addClass(
                        R[U] == "asc"
                          ? V.sSortAsc
                          : R[U] == "desc"
                          ? V.sSortDesc
                          : T.sSortingClass
                      );
                    }
                  });
                },
                jqueryui: function (p, _, T, V) {
                  i("<div/>")
                    .addClass(V.sSortJUIWrapper)
                    .append(_.contents())
                    .append(
                      i("<span/>").addClass(
                        V.sSortIcon + " " + T.sSortingClassJUI
                      )
                    )
                    .appendTo(_),
                    i(p.nTable).on("order.dt.DT", function (A, I, M, R) {
                      if (p === I) {
                        var U = T.idx;
                        _.removeClass(V.sSortAsc + " " + V.sSortDesc).addClass(
                          R[U] == "asc"
                            ? V.sSortAsc
                            : R[U] == "desc"
                            ? V.sSortDesc
                            : T.sSortingClass
                        ),
                          _.find("span." + V.sSortIcon)
                            .removeClass(
                              V.sSortJUIAsc +
                                " " +
                                V.sSortJUIDesc +
                                " " +
                                V.sSortJUI +
                                " " +
                                V.sSortJUIAscAllowed +
                                " " +
                                V.sSortJUIDescAllowed
                            )
                            .addClass(
                              R[U] == "asc"
                                ? V.sSortJUIAsc
                                : R[U] == "desc"
                                ? V.sSortJUIDesc
                                : T.sSortingClassJUI
                            );
                      }
                    });
                },
              },
            }),
            (e.render = {
              number: function (p, _, T, V) {
                return {
                  display: function (A) {
                    var I = A < 0 ? "-" : "";
                    A = Math.abs(parseFloat(A));
                    var M = parseInt(A, 10),
                      R = T ? _ + (A - M).toFixed(T).substring(2) : "";
                    return (
                      I +
                      (V || "") +
                      M.toString().replace(/\B(?=(\d{3})+(?!\d))/g, p) +
                      R
                    );
                  },
                };
              },
            });
          function Pt(p) {
            return function () {
              var _ = [ii(this[e.ext.iApiIndex])].concat(
                Array.prototype.slice.call(arguments)
              );
              return e.ext.internal[p].apply(this, _);
            };
          }
          return (
            i.extend(e.ext.internal, {
              _fnExternApiFunc: Pt,
              _fnBuildAjax: Xi,
              _fnAjaxUpdate: it,
              _fnAjaxParameters: dt,
              _fnAjaxUpdateDraw: mt,
              _fnAjaxDataSrc: tt,
              _fnAddColumn: ge,
              _fnColumnOptions: Pe,
              _fnAdjustColumnSizing: _e,
              _fnVisibleToColumnIndex: ie,
              _fnColumnIndexToVisible: ae,
              _fnVisbleColumns: fe,
              _fnGetColumns: pe,
              _fnColumnTypes: ke,
              _fnApplyColumnDefs: Re,
              _fnHungarianMap: G,
              _fnCamelToHungarian: N,
              _fnLanguageCompat: W,
              _fnBrowserDetect: te,
              _fnAddData: Le,
              _fnAddTr: De,
              _fnNodeToDataIndex: Ke,
              _fnNodeToColumnIndex: $e,
              _fnGetCellData: He,
              _fnSetCellData: me,
              _fnSplitObjNotation: qe,
              _fnGetObjectDataFn: Ze,
              _fnSetObjectDataFn: hi,
              _fnGetDataMaster: ui,
              _fnClearTable: li,
              _fnDeleteIndex: gi,
              _fnInvalidate: Vi,
              _fnGetRowElements: Si,
              _fnCreateTr: zi,
              _fnBuildHead: ai,
              _fnDrawHead: ji,
              _fnDraw: Ai,
              _fnReDraw: Ui,
              _fnAddOptionsHtml: bi,
              _fnDetectHeader: Fi,
              _fnGetUniqueThs: Ji,
              _fnFeatureHtmlFilter: Zi,
              _fnFilterComplete: xi,
              _fnFilterCustom: nt,
              _fnFilterColumn: st,
              _fnFilter: ht,
              _fnFilterCreateSearch: Gi,
              _fnEscapeRegex: vi,
              _fnFilterData: lt,
              _fnFeatureHtmlInfo: at,
              _fnUpdateInfo: ct,
              _fnInfoMacros: O,
              _fnInitialise: K,
              _fnInitComplete: re,
              _fnLengthChange: ve,
              _fnFeatureHtmlLength: Ce,
              _fnFeatureHtmlPaginate: Te,
              _fnPageChange: Ne,
              _fnFeatureHtmlProcessing: x,
              _fnProcessingDisplay: E,
              _fnFeatureHtmlTable: B,
              _fnScrollDraw: j,
              _fnApplyToChildren: J,
              _fnCalculateColumnWidths: ue,
              _fnThrottle: de,
              _fnConvertToWidth: Ve,
              _fnScrollingWidthAdjust: xe,
              _fnGetWidestNode: Se,
              _fnGetMaxLenString: ce,
              _fnStringToCss: ne,
              _fnScrollBarWidth: Me,
              _fnSortFlatten: ze,
              _fnSort: we,
              _fnSortAria: Ae,
              _fnSortListener: Ge,
              _fnSortAttachListener: ei,
              _fnSortingClasses: Ye,
              _fnSortData: ti,
              _fnSaveState: ni,
              _fnLoadState: Qe,
              _fnSettingsFromNode: ii,
              _fnLog: Ee,
              _fnMap: Fe,
              _fnBindAction: ki,
              _fnCallbackReg: We,
              _fnCallbackFire: ri,
              _fnLengthOverflow: Hi,
              _fnRenderer: mi,
              _fnDataSource: ci,
              _fnRowAttributes: di,
              _fnCalculateEnd: function () {},
            }),
            (i.fn.dataTable = e),
            (i.fn.dataTableSettings = e.settings),
            (i.fn.dataTableExt = e.ext),
            (i.fn.DataTable = function (p) {
              return i(this).dataTable(p).api();
            }),
            i.each(e, function (p, _) {
              i.fn.DataTable[p] = _;
            }),
            i.fn.dataTable
          );
        });
      })(window, document),
      v.fn.dataTable
    );
  }
);
csui.define(
  "csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap",
  [
    "csui/lib/jquery",
    "csui/lib/jquery.dataTables/js/jquery.dataTables",
    "csui/lib/binf/js/binf",
  ],
  function (v, d) {
    return (
      (function (a, h, i) {
        (function (e) {
          "use strict";
          v && d.defaults.renderer != "bootstrap" && e(v, d);
        })(function (e, l) {
          "use strict";
          return (
            e.extend(!0, l.defaults, {
              dom: "<'binf-row'<'binf-col-sm-6'l><'binf-col-sm-6'f>><'binf-row'<'binf-col-sm-12'tr>><'binf-row'<'binf-col-sm-6'i><'binf-col-sm-6'p>>",
              renderer: "bootstrap",
            }),
            e.extend(l.ext.classes, {
              sWrapper: "dataTables_wrapper binf-form-inline dt-bootstrap",
              sFilterInput: "binf-form-control binf-input-sm",
              sLengthSelect: "binf-form-control binf-input-sm",
            }),
            (l.ext.renderer.pageButton.bootstrap = function (u, r, t, n, s, o) {
              var c = new l.Api(u),
                m = u.oClasses,
                f = u.oLanguage.oPaginate,
                g,
                w,
                b = function (C, k) {
                  var y,
                    S,
                    P,
                    F,
                    D = function (L) {
                      L.preventDefault(),
                        e(L.currentTarget).hasClass("binf-disabled") ||
                          c.page(L.data.action).draw(!1);
                    };
                  for (y = 0, S = k.length; y < S; y++)
                    if (((F = k[y]), e.isArray(F))) b(C, F);
                    else {
                      switch (((g = ""), (w = ""), F)) {
                        case "ellipsis":
                          (g = "&hellip;"), (w = " binf-disabled");
                          break;
                        case "first":
                          (g = f.sFirst),
                            (w = F + (s > 0 ? "" : " binf-disabled"));
                          break;
                        case "previous":
                          (g = f.sPrevious),
                            (w = F + (s > 0 ? "" : " binf-disabled"));
                          break;
                        case "next":
                          (g = f.sNext),
                            (w = F + (s < o - 1 ? "" : " binf-disabled"));
                          break;
                        case "last":
                          (g = f.sLast),
                            (w = F + (s < o - 1 ? "" : " binf-disabled"));
                          break;
                        default:
                          (g = F + 1), (w = s === F ? " binf-active" : "");
                          break;
                      }
                      g &&
                        ((P = e("<li>", {
                          class: m.sPageButton + " " + w,
                          "aria-controls": u.sTableId,
                          tabindex: u.iTabIndex,
                          id:
                            t === 0 && typeof F == "string"
                              ? u.sTableId + "_" + F
                              : null,
                        })
                          .append(e("<a>", { href: "#" }).html(g))
                          .appendTo(C)),
                        u.oApi._fnBindAction(P, { action: F }, D));
                    }
                };
              b(
                e(r)
                  .empty()
                  .html('<ul class="binf-pagination"/>')
                  .children("ul"),
                n
              );
            }),
            l.TableTools &&
              (e.extend(!0, l.TableTools.classes, {
                container: "DTTT binf-btn-group",
                buttons: {
                  normal: "binf-btn binf-btn-default",
                  disabled: "binf-disabled",
                },
                collection: {
                  container: "DTTT_dropdown binf-dropdown-menu",
                  buttons: { normal: "", disabled: "disabled" },
                },
                print: { info: "DTTT_print_info" },
                select: { row: "binf-active" },
              }),
              e.extend(!0, l.TableTools.DEFAULTS.oTags, {
                collection: { container: "ul", button: "li", liner: "a" },
              })),
            e.fn.dataTable
          );
        });
      })(window, document),
      v.fn.dataTable
    );
  }
);
csui.define(
  "csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools",
  ["csui/lib/jquery", "csui/lib/jquery.dataTables/js/jquery.dataTables"],
  function (v) {
    var d;
    return (
      (function (a, h, i) {
        var e = function (l, u) {
          "use strict";
          var r = {
            version: "1.0.4-TableTools2",
            clients: {},
            moviePath: "",
            nextId: 1,
            $: function (t) {
              return (
                typeof t == "string" && (t = h.getElementById(t)),
                t.addClass ||
                  ((t.hide = function () {
                    this.style.display = "none";
                  }),
                  (t.show = function () {
                    this.style.display = "";
                  }),
                  (t.addClass = function (n) {
                    this.removeClass(n), (this.className += " " + n);
                  }),
                  (t.removeClass = function (n) {
                    this.className = this.className
                      .replace(new RegExp("\\s*" + n + "\\s*"), " ")
                      .replace(/^\s+/, "")
                      .replace(/\s+$/, "");
                  }),
                  (t.hasClass = function (n) {
                    return !!this.className.match(
                      new RegExp("\\s*" + n + "\\s*")
                    );
                  })),
                t
              );
            },
            setMoviePath: function (t) {
              this.moviePath = t;
            },
            dispatch: function (t, n, s) {
              var o = this.clients[t];
              o && o.receiveEvent(n, s);
            },
            register: function (t, n) {
              this.clients[t] = n;
            },
            getDOMObjectPosition: function (t) {
              var n = {
                left: 0,
                top: 0,
                width: t.width ? t.width : t.offsetWidth,
                height: t.height ? t.height : t.offsetHeight,
              };
              for (
                t.style.width !== "" &&
                  (n.width = t.style.width.replace("px", "")),
                  t.style.height !== "" &&
                    (n.height = t.style.height.replace("px", ""));
                t;

              )
                (n.left += t.offsetLeft),
                  (n.top += t.offsetTop),
                  (t = t.offsetParent);
              return n;
            },
            Client: function (t) {
              (this.handlers = {}),
                (this.id = r.nextId++),
                (this.movieId = "ZeroClipboard_TableToolsMovie_" + this.id),
                r.register(this.id, this),
                t && this.glue(t);
            },
          };
          return (
            (r.Client.prototype = {
              id: 0,
              ready: !1,
              movie: null,
              clipText: "",
              fileName: "",
              action: "copy",
              handCursorEnabled: !0,
              cssEffects: !0,
              handlers: null,
              sized: !1,
              glue: function (t, n) {
                this.domElement = r.$(t);
                var s = 99;
                this.domElement.style.zIndex &&
                  (s = parseInt(this.domElement.style.zIndex, 10) + 1);
                var o = r.getDOMObjectPosition(this.domElement);
                this.div = h.createElement("div");
                var c = this.div.style;
                (c.position = "absolute"),
                  (c.left = "0px"),
                  (c.top = "0px"),
                  (c.width = o.width + "px"),
                  (c.height = o.height + "px"),
                  (c.zIndex = s),
                  typeof n < "u" && n !== "" && (this.div.title = n),
                  o.width !== 0 && o.height !== 0 && (this.sized = !0),
                  this.domElement &&
                    (this.domElement.appendChild(this.div),
                    (this.div.innerHTML = this.getHTML(
                      o.width,
                      o.height
                    ).replace(/&/g, "&amp;")));
              },
              positionElement: function () {
                var t = r.getDOMObjectPosition(this.domElement),
                  n = this.div.style;
                if (
                  ((n.position = "absolute"),
                  (n.width = t.width + "px"),
                  (n.height = t.height + "px"),
                  t.width !== 0 && t.height !== 0)
                )
                  this.sized = !0;
                else return;
                var s = this.div.childNodes[0];
                (s.width = t.width), (s.height = t.height);
              },
              getHTML: function (t, n) {
                var s = "",
                  o = "id=" + this.id + "&width=" + t + "&height=" + n;
                if (navigator.userAgent.match(/MSIE/)) {
                  var c = location.href.match(/^https/i)
                    ? "https://"
                    : "http://";
                  s +=
                    '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="' +
                    c +
                    'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="' +
                    t +
                    '" height="' +
                    n +
                    '" id="' +
                    this.movieId +
                    '" align="middle"><param name="allowFullScreen" value="false" /><param name="movie" value="' +
                    r.moviePath +
                    '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' +
                    o +
                    '"/><param name="wmode" value="transparent"/></object>';
                } else
                  s +=
                    '<embed id="' +
                    this.movieId +
                    '" src="' +
                    r.moviePath +
                    '" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' +
                    t +
                    '" height="' +
                    n +
                    '" name="' +
                    this.movieId +
                    '" align="middle" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' +
                    o +
                    '" wmode="transparent" />';
                return s;
              },
              hide: function () {
                this.div && (this.div.style.left = "-2000px");
              },
              show: function () {
                this.reposition();
              },
              destroy: function () {
                if (this.domElement && this.div) {
                  this.hide(), (this.div.innerHTML = "");
                  var t = h.getElementsByTagName("body")[0];
                  try {
                    t.removeChild(this.div);
                  } catch {}
                  (this.domElement = null), (this.div = null);
                }
              },
              reposition: function (t) {
                if (
                  (t &&
                    ((this.domElement = r.$(t)),
                    this.domElement || this.hide()),
                  this.domElement && this.div)
                ) {
                  var n = r.getDOMObjectPosition(this.domElement),
                    s = this.div.style;
                  (s.left = "" + n.left + "px"), (s.top = "" + n.top + "px");
                }
              },
              clearText: function () {
                (this.clipText = ""), this.ready && this.movie.clearText();
              },
              appendText: function (t) {
                (this.clipText += t), this.ready && this.movie.appendText(t);
              },
              setText: function (t) {
                (this.clipText = t), this.ready && this.movie.setText(t);
              },
              setCharSet: function (t) {
                (this.charSet = t), this.ready && this.movie.setCharSet(t);
              },
              setBomInc: function (t) {
                (this.incBom = t), this.ready && this.movie.setBomInc(t);
              },
              setFileName: function (t) {
                (this.fileName = t), this.ready && this.movie.setFileName(t);
              },
              setAction: function (t) {
                (this.action = t), this.ready && this.movie.setAction(t);
              },
              addEventListener: function (t, n) {
                (t = t.toString().toLowerCase().replace(/^on/, "")),
                  this.handlers[t] || (this.handlers[t] = []),
                  this.handlers[t].push(n);
              },
              setHandCursor: function (t) {
                (this.handCursorEnabled = t),
                  this.ready && this.movie.setHandCursor(t);
              },
              setCSSEffects: function (t) {
                this.cssEffects = !!t;
              },
              receiveEvent: function (t, n) {
                var s;
                switch (
                  ((t = t.toString().toLowerCase().replace(/^on/, "")), t)
                ) {
                  case "load":
                    if (
                      ((this.movie = h.getElementById(this.movieId)),
                      !this.movie)
                    ) {
                      (s = this),
                        setTimeout(function () {
                          s.receiveEvent("load", null);
                        }, 1);
                      return;
                    }
                    if (
                      !this.ready &&
                      navigator.userAgent.match(/Firefox/) &&
                      navigator.userAgent.match(/Windows/)
                    ) {
                      (s = this),
                        setTimeout(function () {
                          s.receiveEvent("load", null);
                        }, 100),
                        (this.ready = !0);
                      return;
                    }
                    (this.ready = !0),
                      this.movie.clearText(),
                      this.movie.appendText(this.clipText),
                      this.movie.setFileName(this.fileName),
                      this.movie.setAction(this.action),
                      this.movie.setCharSet(this.charSet),
                      this.movie.setBomInc(this.incBom),
                      this.movie.setHandCursor(this.handCursorEnabled);
                    break;
                  case "mouseover":
                    this.domElement &&
                      this.cssEffects &&
                      this.recoverActive &&
                      this.domElement.addClass("binf-active");
                    break;
                  case "mouseout":
                    this.domElement &&
                      this.cssEffects &&
                      ((this.recoverActive = !1),
                      this.domElement.hasClass("binf-active") &&
                        (this.domElement.removeClass("binf-active"),
                        (this.recoverActive = !0)));
                    break;
                  case "mousedown":
                    this.domElement &&
                      this.cssEffects &&
                      this.domElement.addClass("binf-active");
                    break;
                  case "mouseup":
                    this.domElement &&
                      this.cssEffects &&
                      (this.domElement.removeClass("binf-active"),
                      (this.recoverActive = !1));
                    break;
                }
                if (this.handlers[t])
                  for (var o = 0, c = this.handlers[t].length; o < c; o++) {
                    var m = this.handlers[t][o];
                    typeof m == "function"
                      ? m(this, n)
                      : typeof m == "object" && m.length == 2
                      ? m[0][m[1]](this, n)
                      : typeof m == "string" && a[m](this, n);
                  }
              },
            }),
            (a.ZeroClipboard_TableTools = r),
            (function (t, n, s) {
              (d = function (o, c) {
                !this instanceof d &&
                  alert(
                    "Warning: TableTools must be initialised with the keyword 'new'"
                  );
                var m = t.fn.dataTable.Api
                  ? new t.fn.dataTable.Api(o).settings()[0]
                  : o.fnSettings();
                return (
                  (this.s = {
                    that: this,
                    dt: m,
                    print: {
                      saveStart: -1,
                      saveLength: -1,
                      saveScroll: -1,
                      funcEnd: function () {},
                    },
                    buttonCounter: 0,
                    select: {
                      type: "",
                      selected: [],
                      preRowSelect: null,
                      postSelected: null,
                      postDeselected: null,
                      all: !1,
                      selectedClass: "",
                    },
                    custom: {},
                    swfPath: "",
                    buttonSet: [],
                    master: !1,
                    tags: {},
                  }),
                  (this.dom = {
                    container: null,
                    table: null,
                    print: { hidden: [], message: null },
                    collection: { collection: null, background: null },
                  }),
                  (this.classes = t.extend(!0, {}, d.classes)),
                  this.s.dt.bJUI &&
                    t.extend(!0, this.classes, d.classes_themeroller),
                  (this.fnSettings = function () {
                    return this.s;
                  }),
                  typeof c > "u" && (c = {}),
                  d._aInstances.push(this),
                  this._fnConstruct(c),
                  this
                );
              }),
                (d.prototype = {
                  fnGetSelected: function (o) {
                    var c = [],
                      m = this.s.dt.aoData,
                      f = this.s.dt.aiDisplay,
                      g,
                      w;
                    if (o)
                      for (g = 0, w = f.length; g < w; g++)
                        m[f[g]]._DTTT_selected && c.push(m[f[g]].nTr);
                    else
                      for (g = 0, w = m.length; g < w; g++)
                        m[g]._DTTT_selected && c.push(m[g].nTr);
                    return c;
                  },
                  fnGetSelectedData: function () {
                    var o = [],
                      c = this.s.dt.aoData,
                      m,
                      f;
                    for (m = 0, f = c.length; m < f; m++)
                      c[m]._DTTT_selected &&
                        o.push(this.s.dt.oInstance.fnGetData(m));
                    return o;
                  },
                  fnGetSelectedIndexes: function (o) {
                    var c = [],
                      m = this.s.dt.aoData,
                      f = this.s.dt.aiDisplay,
                      g,
                      w;
                    if (o)
                      for (g = 0, w = f.length; g < w; g++)
                        m[f[g]]._DTTT_selected && c.push(f[g]);
                    else
                      for (g = 0, w = m.length; g < w; g++)
                        m[g]._DTTT_selected && c.push(g);
                    return c;
                  },
                  fnIsSelected: function (o) {
                    var c = this.s.dt.oInstance.fnGetPosition(o);
                    return this.s.dt.aoData[c]._DTTT_selected === !0;
                  },
                  fnSelectAll: function (o) {
                    this._fnRowSelect(
                      o ? this.s.dt.aiDisplay : this.s.dt.aoData
                    );
                  },
                  fnSelectNone: function (o) {
                    this._fnRowDeselect(this.fnGetSelectedIndexes(o));
                  },
                  fnSelect: function (o) {
                    this.s.select.type == "single"
                      ? (this.fnSelectNone(), this._fnRowSelect(o))
                      : this._fnRowSelect(o);
                  },
                  fnDeselect: function (o) {
                    this._fnRowDeselect(o);
                  },
                  fnGetTitle: function (o) {
                    var c = "";
                    if (typeof o.sTitle < "u" && o.sTitle !== "") c = o.sTitle;
                    else {
                      var m = s.getElementsByTagName("title");
                      m.length > 0 && (c = m[0].innerHTML);
                    }
                    return "\xA1".toString().length < 4
                      ? c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g, "")
                      : c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g, "");
                  },
                  fnCalcColRatios: function (o) {
                    var c = this.s.dt.aoColumns,
                      m = this._fnColumnTargets(o.mColumns),
                      f = [],
                      g = 0,
                      w = 0,
                      b,
                      C;
                    for (b = 0, C = m.length; b < C; b++)
                      m[b] && ((g = c[b].nTh.offsetWidth), (w += g), f.push(g));
                    for (b = 0, C = f.length; b < C; b++) f[b] = f[b] / w;
                    return f.join("	");
                  },
                  fnGetTableData: function (o) {
                    if (this.s.dt) return this._fnGetDataTablesData(o);
                  },
                  fnSetText: function (o, c) {
                    this._fnFlashSetText(o, c);
                  },
                  fnResizeButtons: function () {
                    for (var o in r.clients)
                      if (o) {
                        var c = r.clients[o];
                        typeof c.domElement < "u" &&
                          c.domElement.parentNode &&
                          c.positionElement();
                      }
                  },
                  fnResizeRequired: function () {
                    for (var o in r.clients)
                      if (o) {
                        var c = r.clients[o];
                        if (
                          typeof c.domElement < "u" &&
                          c.domElement.parentNode == this.dom.container &&
                          c.sized === !1
                        )
                          return !0;
                      }
                    return !1;
                  },
                  fnPrint: function (o, c) {
                    c === i && (c = {}),
                      o === i || o ? this._fnPrintStart(c) : this._fnPrintEnd();
                  },
                  fnInfo: function (o, c) {
                    var m = t("<div/>")
                      .addClass(this.classes.print.info)
                      .html(o)
                      .appendTo("body");
                    setTimeout(function () {
                      m.fadeOut("normal", function () {
                        m.remove();
                      });
                    }, c);
                  },
                  fnContainer: function () {
                    return this.dom.container;
                  },
                  _fnConstruct: function (o) {
                    var c = this;
                    this._fnCustomiseSettings(o),
                      (this.dom.container = s.createElement(
                        this.s.tags.container
                      )),
                      (this.dom.container.className = this.classes.container),
                      this.s.select.type != "none" && this._fnRowSelectConfig(),
                      this._fnButtonDefinations(
                        this.s.buttonSet,
                        this.dom.container
                      ),
                      this.s.dt.aoDestroyCallback.push({
                        sName: "TableTools",
                        fn: function () {
                          t(c.s.dt.nTBody).off("click.DTTT_Select", "tr"),
                            t(c.dom.container).empty();
                          var m = t.inArray(c, d._aInstances);
                          m !== -1 && d._aInstances.splice(m, 1);
                        },
                      });
                  },
                  _fnCustomiseSettings: function (o) {
                    typeof this.s.dt._TableToolsInit > "u" &&
                      ((this.s.master = !0), (this.s.dt._TableToolsInit = !0)),
                      (this.dom.table = this.s.dt.nTable),
                      (this.s.custom = t.extend({}, d.DEFAULTS, o)),
                      (this.s.swfPath = this.s.custom.sSwfPath),
                      typeof r < "u" && (r.moviePath = this.s.swfPath),
                      (this.s.select.type = this.s.custom.sRowSelect),
                      (this.s.select.preRowSelect =
                        this.s.custom.fnPreRowSelect),
                      (this.s.select.postSelected =
                        this.s.custom.fnRowSelected),
                      (this.s.select.postDeselected =
                        this.s.custom.fnRowDeselected),
                      this.s.custom.sSelectedClass &&
                        (this.classes.select.row =
                          this.s.custom.sSelectedClass),
                      (this.s.tags = this.s.custom.oTags),
                      (this.s.buttonSet = this.s.custom.aButtons);
                  },
                  _fnButtonDefinations: function (o, c) {
                    for (var m, f = 0, g = o.length; f < g; f++) {
                      if (typeof o[f] == "string") {
                        if (typeof d.BUTTONS[o[f]] > "u") {
                          alert(
                            "TableTools: Warning - unknown button type: " + o[f]
                          );
                          continue;
                        }
                        m = t.extend({}, d.BUTTONS[o[f]], !0);
                      } else {
                        if (typeof d.BUTTONS[o[f].sExtends] > "u") {
                          alert(
                            "TableTools: Warning - unknown button type: " +
                              o[f].sExtends
                          );
                          continue;
                        }
                        var w = t.extend({}, d.BUTTONS[o[f].sExtends], !0);
                        m = t.extend(w, o[f], !0);
                      }
                      var b = this._fnCreateButton(
                        m,
                        t(c).hasClass(this.classes.collection.container)
                      );
                      b && c.appendChild(b);
                    }
                  },
                  _fnCreateButton: function (o, c) {
                    var m = this._fnButtonBase(o, c);
                    if (o.sAction.match(/flash/)) {
                      if (!this._fnHasFlash()) return !1;
                      this._fnFlashConfig(m, o);
                    } else
                      o.sAction == "text"
                        ? this._fnTextConfig(m, o)
                        : o.sAction == "div"
                        ? this._fnTextConfig(m, o)
                        : o.sAction == "collection" &&
                          (this._fnTextConfig(m, o),
                          this._fnCollectionConfig(m, o));
                    return (
                      this.s.dt.iTabIndex !== -1 &&
                        t(m)
                          .attr("tabindex", this.s.dt.iTabIndex)
                          .attr("aria-controls", this.s.dt.sTableId)
                          .on("keyup.DTTT", function (f) {
                            f.keyCode === 13 &&
                              (f.stopPropagation(), t(this).trigger("click"));
                          })
                          .on("mousedown.DTTT", function (f) {
                            o.sAction.match(/flash/) || f.preventDefault();
                          }),
                      m
                    );
                  },
                  _fnButtonBase: function (o, c) {
                    var m, f, g;
                    c
                      ? ((m =
                          o.sTag && o.sTag !== "default"
                            ? o.sTag
                            : this.s.tags.collection.button),
                        (f =
                          o.sLinerTag && o.sLinerTag !== "default"
                            ? o.sLiner
                            : this.s.tags.collection.liner),
                        (g = this.classes.collection.buttons.normal))
                      : ((m =
                          o.sTag && o.sTag !== "default"
                            ? o.sTag
                            : this.s.tags.button),
                        (f =
                          o.sLinerTag && o.sLinerTag !== "default"
                            ? o.sLiner
                            : this.s.tags.liner),
                        (g = this.classes.buttons.normal));
                    var w = s.createElement(m),
                      b = s.createElement(f),
                      C = this._fnGetMasterSettings();
                    return (
                      (w.className = g + " " + o.sButtonClass),
                      w.setAttribute(
                        "id",
                        "ToolTables_" +
                          this.s.dt.sInstance +
                          "_" +
                          C.buttonCounter
                      ),
                      w.appendChild(b),
                      (b.innerHTML = o.sButtonText),
                      C.buttonCounter++,
                      w
                    );
                  },
                  _fnGetMasterSettings: function () {
                    if (this.s.master) return this.s;
                    for (var o = d._aInstances, c = 0, m = o.length; c < m; c++)
                      if (this.dom.table == o[c].s.dt.nTable) return o[c].s;
                  },
                  _fnCollectionConfig: function (o, c) {
                    var m = s.createElement(this.s.tags.collection.container);
                    (m.style.display = "none"),
                      (m.className = this.classes.collection.container),
                      (c._collection = m),
                      s.body.appendChild(m),
                      this._fnButtonDefinations(c.aButtons, m);
                  },
                  _fnCollectionShow: function (o, c) {
                    var m = this,
                      f = t(o).offset(),
                      g = c._collection,
                      w = f.left,
                      b = f.top + t(o).outerHeight(),
                      C = t(n).height(),
                      k = t(s).height(),
                      y = t(n).width(),
                      S = t(s).width();
                    (g.style.position = "absolute"),
                      (g.style.left = w + "px"),
                      (g.style.top = b + "px"),
                      (g.style.display = "block"),
                      t(g).css("opacity", 0);
                    var P = s.createElement("div");
                    (P.style.position = "absolute"),
                      (P.style.left = "0px"),
                      (P.style.top = "0px"),
                      (P.style.height = (C > k ? C : k) + "px"),
                      (P.style.width = (y > S ? y : S) + "px"),
                      (P.className = this.classes.collection.background),
                      t(P).css("opacity", 0),
                      s.body.appendChild(P),
                      s.body.appendChild(g);
                    var F = t(g).outerWidth(),
                      D = t(g).outerHeight();
                    w + F > S && (g.style.left = S - F + "px"),
                      b + D > k &&
                        (g.style.top = b - D - t(o).outerHeight() + "px"),
                      (this.dom.collection.collection = g),
                      (this.dom.collection.background = P),
                      setTimeout(function () {
                        t(g).animate({ opacity: 1 }, 500),
                          t(P).animate({ opacity: 0.25 }, 500);
                      }, 10),
                      this.fnResizeButtons(),
                      t(P).click(function () {
                        m._fnCollectionHide.call(m, null, null);
                      });
                  },
                  _fnCollectionHide: function (o, c) {
                    (c !== null && c.sExtends == "collection") ||
                      (this.dom.collection.collection !== null &&
                        (t(this.dom.collection.collection).animate(
                          { opacity: 0 },
                          500,
                          function (m) {
                            this.style.display = "none";
                          }
                        ),
                        t(this.dom.collection.background).animate(
                          { opacity: 0 },
                          500,
                          function (m) {
                            this.parentNode.removeChild(this);
                          }
                        ),
                        (this.dom.collection.collection = null),
                        (this.dom.collection.background = null)));
                  },
                  _fnRowSelectConfig: function () {
                    if (this.s.master) {
                      var o = this,
                        c,
                        m,
                        f = this.s.dt,
                        g = this.s.dt.aoOpenRows;
                      t(f.nTable).addClass(this.classes.select.table),
                        this.s.select.type === "os" &&
                          (t(f.nTBody).on(
                            "mousedown.DTTT_Select",
                            "tr",
                            function (w) {
                              w.shiftKey &&
                                t(f.nTBody)
                                  .css("-moz-user-select", "none")
                                  .one(
                                    "selectstart.DTTT_Select",
                                    "tr",
                                    function () {
                                      return !1;
                                    }
                                  );
                            }
                          ),
                          t(f.nTBody).on(
                            "mouseup.DTTT_Select",
                            "tr",
                            function (w) {
                              t(f.nTBody).css("-moz-user-select", "");
                            }
                          )),
                        t(f.nTBody).on(
                          "click.DTTT_Select",
                          this.s.custom.sRowSelector,
                          function (w) {
                            var b =
                                this.nodeName.toLowerCase() === "tr"
                                  ? this
                                  : t(this).parents("tr")[0],
                              C = o.s.select,
                              k = o.s.dt.oInstance.fnGetPosition(b);
                            if (
                              b.parentNode == f.nTBody &&
                              f.oInstance.fnGetData(b) !== null
                            ) {
                              if (C.type == "os")
                                if (w.ctrlKey || w.metaKey)
                                  o.fnIsSelected(b)
                                    ? o._fnRowDeselect(b, w)
                                    : o._fnRowSelect(b, w);
                                else if (w.shiftKey) {
                                  var y = o.s.dt.aiDisplay.slice(),
                                    S = t.inArray(C.lastRow, y),
                                    P = t.inArray(k, y);
                                  if (
                                    o.fnGetSelected().length === 0 ||
                                    S === -1
                                  )
                                    y.splice(t.inArray(k, y) + 1, y.length);
                                  else {
                                    if (S > P) {
                                      var F = P;
                                      (P = S), (S = F);
                                    }
                                    y.splice(P + 1, y.length), y.splice(0, S);
                                  }
                                  o.fnIsSelected(b)
                                    ? (y.splice(t.inArray(k, y), 1),
                                      o._fnRowDeselect(y, w))
                                    : o._fnRowSelect(y, w);
                                } else
                                  o.fnIsSelected(b) &&
                                  o.fnGetSelected().length === 1
                                    ? o._fnRowDeselect(b, w)
                                    : (o.fnSelectNone(), o._fnRowSelect(b, w));
                              else
                                o.fnIsSelected(b)
                                  ? o._fnRowDeselect(b, w)
                                  : C.type == "single"
                                  ? (o.fnSelectNone(), o._fnRowSelect(b, w))
                                  : C.type == "multi" && o._fnRowSelect(b, w);
                              C.lastRow = k;
                            }
                          }
                        ),
                        f.oApi._fnCallbackReg(
                          f,
                          "aoRowCreatedCallback",
                          function (w, b, C) {
                            f.aoData[C]._DTTT_selected &&
                              t(w).addClass(o.classes.select.row);
                          },
                          "TableTools-SelectAll"
                        );
                    }
                  },
                  _fnRowSelect: function (o, c) {
                    var m = this,
                      f = this._fnSelectData(o),
                      g = f.length === 0 ? null : f[0].nTr,
                      w = [],
                      b,
                      C;
                    for (b = 0, C = f.length; b < C; b++)
                      f[b].nTr && w.push(f[b].nTr);
                    if (
                      !(
                        this.s.select.preRowSelect !== null &&
                        !this.s.select.preRowSelect.call(this, c, w, !0)
                      )
                    ) {
                      for (b = 0, C = f.length; b < C; b++)
                        (f[b]._DTTT_selected = !0),
                          f[b].nTr &&
                            t(f[b].nTr).addClass(m.classes.select.row);
                      this.s.select.postSelected !== null &&
                        this.s.select.postSelected.call(this, w),
                        d._fnEventDispatch(this, "select", w, !0);
                    }
                  },
                  _fnRowDeselect: function (o, c) {
                    var m = this,
                      f = this._fnSelectData(o),
                      g = f.length === 0 ? null : f[0].nTr,
                      w = [],
                      b,
                      C;
                    for (b = 0, C = f.length; b < C; b++)
                      f[b].nTr && w.push(f[b].nTr);
                    if (
                      !(
                        this.s.select.preRowSelect !== null &&
                        !this.s.select.preRowSelect.call(this, c, w, !1)
                      )
                    ) {
                      for (b = 0, C = f.length; b < C; b++)
                        (f[b]._DTTT_selected = !1),
                          f[b].nTr &&
                            t(f[b].nTr).removeClass(m.classes.select.row);
                      this.s.select.postDeselected !== null &&
                        this.s.select.postDeselected.call(this, w),
                        d._fnEventDispatch(this, "select", w, !1);
                    }
                  },
                  _fnSelectData: function (o) {
                    var c = [],
                      m,
                      f,
                      g;
                    if (o.nodeName)
                      (m = this.s.dt.oInstance.fnGetPosition(o)),
                        c.push(this.s.dt.aoData[m]);
                    else if (typeof o.length < "u") {
                      for (f = 0, g = o.length; f < g; f++)
                        o[f].nodeName
                          ? ((m = this.s.dt.oInstance.fnGetPosition(o[f])),
                            c.push(this.s.dt.aoData[m]))
                          : typeof o[f] == "number"
                          ? c.push(this.s.dt.aoData[o[f]])
                          : c.push(o[f]);
                      return c;
                    } else c.push(o);
                    return c;
                  },
                  _fnTextConfig: function (o, c) {
                    var m = this;
                    c.fnInit !== null && c.fnInit.call(this, o, c),
                      c.sToolTip !== "" && (o.title = c.sToolTip),
                      t(o).hover(
                        function () {
                          c.fnMouseover !== null &&
                            c.fnMouseover.call(this, o, c, null);
                        },
                        function () {
                          c.fnMouseout !== null &&
                            c.fnMouseout.call(this, o, c, null);
                        }
                      ),
                      c.fnSelect !== null &&
                        d._fnEventListen(this, "select", function (f) {
                          c.fnSelect.call(m, o, c, f);
                        }),
                      t(o).click(function (f) {
                        c.fnClick !== null && c.fnClick.call(m, o, c, null, f),
                          c.fnComplete !== null &&
                            c.fnComplete.call(m, o, c, null, null),
                          m._fnCollectionHide(o, c);
                      });
                  },
                  _fnHasFlash: function () {
                    try {
                      var o = new ActiveXObject(
                        "ShockwaveFlash.ShockwaveFlash"
                      );
                      if (o) return !0;
                    } catch {
                      if (
                        navigator.mimeTypes &&
                        navigator.mimeTypes["application/x-shockwave-flash"] !==
                          i &&
                        navigator.mimeTypes["application/x-shockwave-flash"]
                          .enabledPlugin
                      )
                        return !0;
                    }
                    return !1;
                  },
                  _fnFlashConfig: function (o, c) {
                    var m = this,
                      f = new r.Client();
                    c.fnInit !== null && c.fnInit.call(this, o, c),
                      f.setHandCursor(!0),
                      c.sAction == "flash_save"
                        ? (f.setAction("save"),
                          f.setCharSet(
                            c.sCharSet == "utf16le" ? "UTF16LE" : "UTF8"
                          ),
                          f.setBomInc(c.bBomInc),
                          f.setFileName(
                            c.sFileName.replace("*", this.fnGetTitle(c))
                          ))
                        : c.sAction == "flash_pdf"
                        ? (f.setAction("pdf"),
                          f.setFileName(
                            c.sFileName.replace("*", this.fnGetTitle(c))
                          ))
                        : f.setAction("copy"),
                      f.addEventListener("mouseOver", function (g) {
                        c.fnMouseover !== null &&
                          c.fnMouseover.call(m, o, c, f);
                      }),
                      f.addEventListener("mouseOut", function (g) {
                        c.fnMouseout !== null && c.fnMouseout.call(m, o, c, f);
                      }),
                      f.addEventListener("mouseDown", function (g) {
                        c.fnClick !== null && c.fnClick.call(m, o, c, f);
                      }),
                      f.addEventListener("complete", function (g, w) {
                        c.fnComplete !== null &&
                          c.fnComplete.call(m, o, c, f, w),
                          m._fnCollectionHide(o, c);
                      }),
                      this._fnFlashGlue(f, o, c.sToolTip);
                  },
                  _fnFlashGlue: function (o, c, m) {
                    var f = this,
                      g = c.getAttribute("id");
                    s.getElementById(g)
                      ? o.glue(c, m)
                      : setTimeout(function () {
                          f._fnFlashGlue(o, c, m);
                        }, 100);
                  },
                  _fnFlashSetText: function (o, c) {
                    var m = this._fnChunkData(c, 8192);
                    o.clearText();
                    for (var f = 0, g = m.length; f < g; f++)
                      o.appendText(m[f]);
                  },
                  _fnColumnTargets: function (o) {
                    var c = [],
                      m = this.s.dt,
                      f,
                      g,
                      w = m.aoColumns,
                      b = w.length;
                    if (typeof o == "function") {
                      var C = o.call(this, m);
                      for (f = 0, g = b; f < g; f++)
                        c.push(t.inArray(f, C) !== -1);
                    } else if (typeof o == "object") {
                      for (f = 0, g = b; f < g; f++) c.push(!1);
                      for (f = 0, g = o.length; f < g; f++) c[o[f]] = !0;
                    } else if (o == "visible")
                      for (f = 0, g = b; f < g; f++) c.push(!!w[f].bVisible);
                    else if (o == "hidden")
                      for (f = 0, g = b; f < g; f++) c.push(!w[f].bVisible);
                    else if (o == "sortable")
                      for (f = 0, g = b; f < g; f++) c.push(!!w[f].bSortable);
                    else for (f = 0, g = b; f < g; f++) c.push(!0);
                    return c;
                  },
                  _fnNewline: function (o) {
                    return o.sNewLine == "auto"
                      ? navigator.userAgent.match(/Windows/)
                        ? `\r
`
                        : `
`
                      : o.sNewLine;
                  },
                  _fnGetDataTablesData: function (o) {
                    var c,
                      m,
                      f,
                      g,
                      w,
                      b = [],
                      C = "",
                      k,
                      y = this.s.dt,
                      S,
                      P,
                      F = new RegExp(o.sFieldBoundary, "g"),
                      D = this._fnColumnTargets(o.mColumns),
                      L = typeof o.bSelectedOnly < "u" ? o.bSelectedOnly : !1;
                    if (o.bHeader) {
                      for (w = [], c = 0, m = y.aoColumns.length; c < m; c++)
                        D[c] &&
                          ((C = y.aoColumns[c].sTitle
                            .replace(/\n/g, " ")
                            .replace(/<.*?>/g, "")
                            .replace(/^\s+|\s+$/g, "")),
                          (C = this._fnHtmlDecode(C)),
                          w.push(this._fnBoundData(C, o.sFieldBoundary, F)));
                      b.push(w.join(o.sFieldSeperator));
                    }
                    L = !0;
                    var Q,
                      q = this.fnGetSelectedIndexes();
                    for (
                      L = this.s.select.type !== "none" && L && q.length !== 0,
                        L
                          ? (Q = q)
                          : u.Api
                          ? (Q = new u.Api(y)
                              .rows(o.oSelectorOpts)
                              .indexes()
                              .flatten()
                              .toArray())
                          : (Q = y.oInstance
                              .$("tr", o.oSelectorOpts)
                              .map(function (W, H) {
                                return y.oInstance.fnGetPosition(H);
                              })
                              .get()),
                        f = 0,
                        g = Q.length;
                      f < g;
                      f++
                    ) {
                      for (
                        S = y.aoData[Q[f]].nTr,
                          w = [],
                          c = 0,
                          m = y.aoColumns.length;
                        c < m;
                        c++
                      )
                        if (D[c]) {
                          var G = y.oApi._fnGetCellData(y, Q[f], c, "display");
                          o.fnCellRender
                            ? (C = o.fnCellRender(G, c, S, Q[f]) + "")
                            : typeof G == "string"
                            ? ((C = G.replace(/\n/g, " ")),
                              (C = C.replace(
                                /<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
                                "$1$2$3"
                              )),
                              (C = C.replace(/<.*?>/g, "")))
                            : (C = G + ""),
                            (C = C.replace(/^\s+/, "").replace(/\s+$/, "")),
                            (C = this._fnHtmlDecode(C)),
                            w.push(this._fnBoundData(C, o.sFieldBoundary, F));
                        }
                      b.push(w.join(o.sFieldSeperator)),
                        o.bOpenRows &&
                          ((k = t.grep(y.aoOpenRows, function (W) {
                            return W.nParent === S;
                          })),
                          k.length === 1 &&
                            ((C = this._fnBoundData(
                              t("td", k[0].nTr).html(),
                              o.sFieldBoundary,
                              F
                            )),
                            b.push(C)));
                    }
                    if (o.bFooter && y.nTFoot !== null) {
                      for (w = [], c = 0, m = y.aoColumns.length; c < m; c++)
                        D[c] &&
                          y.aoColumns[c].nTf !== null &&
                          ((C = y.aoColumns[c].nTf.innerHTML
                            .replace(/\n/g, " ")
                            .replace(/<.*?>/g, "")),
                          (C = this._fnHtmlDecode(C)),
                          w.push(this._fnBoundData(C, o.sFieldBoundary, F)));
                      b.push(w.join(o.sFieldSeperator));
                    }
                    var N = b.join(this._fnNewline(o));
                    return N;
                  },
                  _fnBoundData: function (o, c, m) {
                    return c === "" ? o : c + o.replace(m, c + c) + c;
                  },
                  _fnChunkData: function (o, c) {
                    for (var m = [], f = o.length, g = 0; g < f; g += c)
                      g + c < f
                        ? m.push(o.substring(g, g + c))
                        : m.push(o.substring(g, f));
                    return m;
                  },
                  _fnHtmlDecode: function (o) {
                    if (o.indexOf("&") === -1) return o;
                    var c = s.createElement("div");
                    return o.replace(/&([^\s]*?);/g, function (m, f) {
                      return m.substr(1, 1) === "#"
                        ? String.fromCharCode(Number(f.substr(1)))
                        : ((c.innerHTML = m), c.childNodes[0].nodeValue);
                    });
                  },
                  _fnPrintStart: function (o) {
                    var c = this,
                      m = this.s.dt;
                    this._fnPrintHideNodes(m.nTable),
                      (this.s.print.saveStart = m._iDisplayStart),
                      (this.s.print.saveLength = m._iDisplayLength),
                      o.bShowAll &&
                        ((m._iDisplayStart = 0),
                        (m._iDisplayLength = -1),
                        m.oApi._fnCalculateEnd && m.oApi._fnCalculateEnd(m),
                        m.oApi._fnDraw(m)),
                      (m.oScroll.sX !== "" || m.oScroll.sY !== "") &&
                        (this._fnPrintScrollStart(m),
                        t(this.s.dt.nTable).bind(
                          "draw.DTTT_Print",
                          function () {
                            c._fnPrintScrollStart(m);
                          }
                        ));
                    var f = m.aanFeatures;
                    for (var g in f)
                      if (g != "i" && g != "t" && g.length == 1)
                        for (var w = 0, b = f[g].length; w < b; w++)
                          this.dom.print.hidden.push({
                            node: f[g][w],
                            display: "block",
                          }),
                            (f[g][w].style.display = "none");
                    t(s.body).addClass(this.classes.print.body),
                      o.sInfo !== "" && this.fnInfo(o.sInfo, 3e3),
                      o.sMessage &&
                        t("<div/>")
                          .addClass(this.classes.print.message)
                          .html(o.sMessage)
                          .prependTo("body"),
                      (this.s.print.saveScroll = t(n).scrollTop()),
                      n.scrollTo(0, 0),
                      t(s).bind("keydown.DTTT", function (C) {
                        C.keyCode == 27 &&
                          (C.preventDefault(), c._fnPrintEnd.call(c, C));
                      });
                  },
                  _fnPrintEnd: function (o) {
                    var c = this,
                      m = this.s.dt,
                      f = this.s.print,
                      g = this.dom.print;
                    this._fnPrintShowNodes(),
                      (m.oScroll.sX !== "" || m.oScroll.sY !== "") &&
                        (t(this.s.dt.nTable).unbind("draw.DTTT_Print"),
                        this._fnPrintScrollEnd()),
                      n.scrollTo(0, f.saveScroll),
                      t("div." + this.classes.print.message).remove(),
                      t(s.body).removeClass("DTTT_Print"),
                      (m._iDisplayStart = f.saveStart),
                      (m._iDisplayLength = f.saveLength),
                      m.oApi._fnCalculateEnd && m.oApi._fnCalculateEnd(m),
                      m.oApi._fnDraw(m),
                      t(s).unbind("keydown.DTTT");
                  },
                  _fnPrintScrollStart: function () {
                    var o = this.s.dt,
                      c = o.nScrollHead.getElementsByTagName("div")[0],
                      m = c.getElementsByTagName("table")[0],
                      f = o.nTable.parentNode,
                      g,
                      w;
                    (g = o.nTable.getElementsByTagName("thead")),
                      g.length > 0 && o.nTable.removeChild(g[0]),
                      o.nTFoot !== null &&
                        ((w = o.nTable.getElementsByTagName("tfoot")),
                        w.length > 0 && o.nTable.removeChild(w[0])),
                      (g = o.nTHead.cloneNode(!0)),
                      o.nTable.insertBefore(g, o.nTable.childNodes[0]),
                      o.nTFoot !== null &&
                        ((w = o.nTFoot.cloneNode(!0)),
                        o.nTable.insertBefore(w, o.nTable.childNodes[1])),
                      o.oScroll.sX !== "" &&
                        ((o.nTable.style.width =
                          t(o.nTable).outerWidth() + "px"),
                        (f.style.width = t(o.nTable).outerWidth() + "px"),
                        (f.style.overflow = "visible")),
                      o.oScroll.sY !== "" &&
                        ((f.style.height = t(o.nTable).outerHeight() + "px"),
                        (f.style.overflow = "visible"));
                  },
                  _fnPrintScrollEnd: function () {
                    var o = this.s.dt,
                      c = o.nTable.parentNode;
                    o.oScroll.sX !== "" &&
                      ((c.style.width = o.oApi._fnStringToCss(o.oScroll.sX)),
                      (c.style.overflow = "auto")),
                      o.oScroll.sY !== "" &&
                        ((c.style.height = o.oApi._fnStringToCss(o.oScroll.sY)),
                        (c.style.overflow = "auto"));
                  },
                  _fnPrintShowNodes: function () {
                    for (
                      var o = this.dom.print.hidden, c = 0, m = o.length;
                      c < m;
                      c++
                    )
                      o[c].node.style.display = o[c].display;
                    o.splice(0, o.length);
                  },
                  _fnPrintHideNodes: function (o) {
                    for (
                      var c = this.dom.print.hidden,
                        m = o.parentNode,
                        f = m.childNodes,
                        g = 0,
                        w = f.length;
                      g < w;
                      g++
                    )
                      if (f[g] != o && f[g].nodeType == 1) {
                        var b = t(f[g]).css("display");
                        b != "none" &&
                          (c.push({ node: f[g], display: b }),
                          (f[g].style.display = "none"));
                      }
                    m.nodeName.toUpperCase() != "BODY" &&
                      this._fnPrintHideNodes(m);
                  },
                }),
                (d._aInstances = []),
                (d._aListeners = []),
                (d.fnGetMasters = function () {
                  for (var o = [], c = 0, m = d._aInstances.length; c < m; c++)
                    d._aInstances[c].s.master && o.push(d._aInstances[c]);
                  return o;
                }),
                (d.fnGetInstance = function (o) {
                  typeof o != "object" && (o = s.getElementById(o));
                  for (var c = 0, m = d._aInstances.length; c < m; c++)
                    if (
                      d._aInstances[c].s.master &&
                      d._aInstances[c].dom.table == o
                    )
                      return d._aInstances[c];
                  return null;
                }),
                (d._fnEventListen = function (o, c, m) {
                  d._aListeners.push({ that: o, type: c, fn: m });
                }),
                (d._fnEventDispatch = function (o, c, m, f) {
                  for (var g = d._aListeners, w = 0, b = g.length; w < b; w++)
                    o.dom.table == g[w].that.dom.table &&
                      g[w].type == c &&
                      g[w].fn(m, f);
                }),
                (d.buttonBase = {
                  sAction: "text",
                  sTag: "default",
                  sLinerTag: "default",
                  sButtonClass: "DTTT_button_text",
                  sButtonText: "Button text",
                  sTitle: "",
                  sToolTip: "",
                  sCharSet: "utf8",
                  bBomInc: !1,
                  sFileName: "*.csv",
                  sFieldBoundary: "",
                  sFieldSeperator: "	",
                  sNewLine: "auto",
                  mColumns: "all",
                  bHeader: !0,
                  bFooter: !0,
                  bOpenRows: !1,
                  bSelectedOnly: !1,
                  oSelectorOpts: i,
                  fnMouseover: null,
                  fnMouseout: null,
                  fnClick: null,
                  fnSelect: null,
                  fnComplete: null,
                  fnInit: null,
                  fnCellRender: null,
                }),
                (d.BUTTONS = {
                  csv: t.extend({}, d.buttonBase, {
                    sAction: "flash_save",
                    sButtonClass: "DTTT_button_csv",
                    sButtonText: "CSV",
                    sFieldBoundary: '"',
                    sFieldSeperator: ",",
                    fnClick: function (o, c, m) {
                      this.fnSetText(m, this.fnGetTableData(c));
                    },
                  }),
                  xls: t.extend({}, d.buttonBase, {
                    sAction: "flash_save",
                    sCharSet: "utf16le",
                    bBomInc: !0,
                    sButtonClass: "DTTT_button_xls",
                    sButtonText: "Excel",
                    fnClick: function (o, c, m) {
                      this.fnSetText(m, this.fnGetTableData(c));
                    },
                  }),
                  copy: t.extend({}, d.buttonBase, {
                    sAction: "flash_copy",
                    sButtonClass: "DTTT_button_copy",
                    sButtonText: "Copy",
                    fnClick: function (o, c, m) {
                      this.fnSetText(m, this.fnGetTableData(c));
                    },
                    fnComplete: function (o, c, m, f) {
                      var g = f.split(`
`).length;
                      c.bHeader && g--,
                        this.s.dt.nTFoot !== null && c.bFooter && g--;
                      var w = g == 1 ? "" : "s";
                      this.fnInfo(
                        "<h6>Table copied</h6><p>Copied " +
                          g +
                          " row" +
                          w +
                          " to the clipboard.</p>",
                        1500
                      );
                    },
                  }),
                  pdf: t.extend({}, d.buttonBase, {
                    sAction: "flash_pdf",
                    sNewLine: `
`,
                    sFileName: "*.pdf",
                    sButtonClass: "DTTT_button_pdf",
                    sButtonText: "PDF",
                    sPdfOrientation: "portrait",
                    sPdfSize: "A4",
                    sPdfMessage: "",
                    fnClick: function (o, c, m) {
                      this.fnSetText(
                        m,
                        "title:" +
                          this.fnGetTitle(c) +
                          `
message:` +
                          c.sPdfMessage +
                          `
colWidth:` +
                          this.fnCalcColRatios(c) +
                          `
orientation:` +
                          c.sPdfOrientation +
                          `
size:` +
                          c.sPdfSize +
                          `
--/TableToolsOpts--
` +
                          this.fnGetTableData(c)
                      );
                    },
                  }),
                  print: t.extend({}, d.buttonBase, {
                    sInfo:
                      "<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",
                    sMessage: null,
                    bShowAll: !0,
                    sToolTip: "View print view",
                    sButtonClass: "DTTT_button_print",
                    sButtonText: "Print",
                    fnClick: function (o, c) {
                      this.fnPrint(!0, c);
                    },
                  }),
                  text: t.extend({}, d.buttonBase),
                  select: t.extend({}, d.buttonBase, {
                    sButtonText: "Select button",
                    fnSelect: function (o, c) {
                      this.fnGetSelected().length !== 0
                        ? t(o).removeClass(this.classes.buttons.disabled)
                        : t(o).addClass(this.classes.buttons.disabled);
                    },
                    fnInit: function (o, c) {
                      t(o).addClass(this.classes.buttons.disabled);
                    },
                  }),
                  select_single: t.extend({}, d.buttonBase, {
                    sButtonText: "Select button",
                    fnSelect: function (o, c) {
                      var m = this.fnGetSelected().length;
                      m == 1
                        ? t(o).removeClass(this.classes.buttons.disabled)
                        : t(o).addClass(this.classes.buttons.disabled);
                    },
                    fnInit: function (o, c) {
                      t(o).addClass(this.classes.buttons.disabled);
                    },
                  }),
                  select_all: t.extend({}, d.buttonBase, {
                    sButtonText: "Select all",
                    fnClick: function (o, c) {
                      this.fnSelectAll();
                    },
                    fnSelect: function (o, c) {
                      this.fnGetSelected().length ==
                      this.s.dt.fnRecordsDisplay()
                        ? t(o).addClass(this.classes.buttons.disabled)
                        : t(o).removeClass(this.classes.buttons.disabled);
                    },
                  }),
                  select_none: t.extend({}, d.buttonBase, {
                    sButtonText: "Deselect all",
                    fnClick: function (o, c) {
                      this.fnSelectNone();
                    },
                    fnSelect: function (o, c) {
                      this.fnGetSelected().length !== 0
                        ? t(o).removeClass(this.classes.buttons.disabled)
                        : t(o).addClass(this.classes.buttons.disabled);
                    },
                    fnInit: function (o, c) {
                      t(o).addClass(this.classes.buttons.disabled);
                    },
                  }),
                  ajax: t.extend({}, d.buttonBase, {
                    sAjaxUrl: "/xhr.php",
                    sButtonText: "Ajax button",
                    fnClick: function (o, c) {
                      var m = this.fnGetTableData(c);
                      t.ajax({
                        url: c.sAjaxUrl,
                        data: [{ name: "tableData", value: m }],
                        success: c.fnAjaxComplete,
                        dataType: "json",
                        type: "POST",
                        cache: !1,
                        error: function () {
                          alert(
                            "Error detected when sending table data to server"
                          );
                        },
                      });
                    },
                    fnAjaxComplete: function (o) {
                      alert("Ajax complete");
                    },
                  }),
                  div: t.extend({}, d.buttonBase, {
                    sAction: "div",
                    sTag: "div",
                    sButtonClass: "DTTT_nonbutton",
                    sButtonText: "Text button",
                  }),
                  collection: t.extend({}, d.buttonBase, {
                    sAction: "collection",
                    sButtonClass: "DTTT_button_collection",
                    sButtonText: "Collection",
                    fnClick: function (o, c) {
                      this._fnCollectionShow(o, c);
                    },
                  }),
                }),
                (d.buttons = d.BUTTONS),
                (d.classes = {
                  container: "DTTT_container",
                  buttons: { normal: "DTTT_button", disabled: "DTTT_disabled" },
                  collection: {
                    container: "DTTT_collection",
                    background: "DTTT_collection_background",
                    buttons: {
                      normal: "DTTT_button",
                      disabled: "DTTT_disabled",
                    },
                  },
                  select: {
                    table: "DTTT_selectable",
                    row: "DTTT_selected selected",
                  },
                  print: {
                    body: "DTTT_Print",
                    info: "DTTT_print_info",
                    message: "DTTT_PrintMessage",
                  },
                }),
                (d.classes_themeroller = {
                  container: "DTTT_container ui-buttonset ui-buttonset-multi",
                  buttons: { normal: "DTTT_button ui-button ui-state-default" },
                  collection: {
                    container:
                      "DTTT_collection ui-buttonset ui-buttonset-multi",
                  },
                }),
                (d.DEFAULTS = {
                  sSwfPath: "../swf/copy_csv_xls_pdf.swf",
                  sRowSelect: "none",
                  sRowSelector: "tr",
                  sSelectedClass: null,
                  fnPreRowSelect: null,
                  fnRowSelected: null,
                  fnRowDeselected: null,
                  aButtons: ["copy", "csv", "xls", "pdf", "print"],
                  oTags: {
                    container: "div",
                    button: "a",
                    liner: "span",
                    collection: {
                      container: "div",
                      button: "a",
                      liner: "span",
                    },
                  },
                }),
                (d.defaults = d.DEFAULTS),
                (d.prototype.CLASS = "TableTools"),
                (d.version = "2.2.3"),
                t.fn.dataTable.Api &&
                  t.fn.dataTable.Api.register("tabletools()", function () {
                    var o = null;
                    return (
                      this.context.length > 0 &&
                        (o = d.fnGetInstance(this.context[0].nTable)),
                      o
                    );
                  }),
                typeof t.fn.dataTable == "function" &&
                typeof t.fn.dataTableExt.fnVersionCheck == "function" &&
                t.fn.dataTableExt.fnVersionCheck("1.9.0")
                  ? t.fn.dataTableExt.aoFeatures.push({
                      fnInit: function (o) {
                        var c = o.oInit,
                          m = c ? c.tableTools || c.oTableTools || {} : {};
                        return new d(o.oInstance, m).dom.container;
                      },
                      cFeature: "T",
                      sFeature: "TableTools",
                    })
                  : alert(
                      "Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download"
                    ),
                (t.fn.DataTable.TableTools = d);
            })(v, a, h),
            typeof l.fn.dataTable == "function" &&
            typeof l.fn.dataTableExt.fnVersionCheck == "function" &&
            l.fn.dataTableExt.fnVersionCheck("1.9.0")
              ? l.fn.dataTableExt.aoFeatures.push({
                  fnInit: function (t) {
                    var n =
                        typeof t.oInit.oTableTools < "u"
                          ? t.oInit.oTableTools
                          : {},
                      s = new d(t.oInstance, n);
                    return d._aInstances.push(s), s.dom.container;
                  },
                  cFeature: "T",
                  sFeature: "TableTools",
                })
              : alert(
                  "Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download"
                ),
            (l.fn.dataTable.TableTools = d),
            (l.fn.DataTable.TableTools = d),
            d
          );
        };
        v && !v.fn.dataTable.TableTools && e(v, v.fn.dataTable);
      })(window, document),
      v.fn.dataTable.TableTools
    );
  }
),
  csui.define("csui/controls/table/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/impl/nls/root/lang", {
    columnSortAscendingTooltip: "{0} - Click to sort ascending",
    columnSortDescendingTooltip: "{0} - Click to sort descending",
    columnDragSeparatorTooltip: "{0} - Drag to resize",
    searchPlaceholder: "{0}",
    searchInputTooltip: "Search {0}",
    searchByNamePlaceholder: "Name",
    searchByNameAria: "Search by name",
    searchIconTooltip: "Search in {0}",
    searchClearIconTooltip: "Clear",
    collapseSearch: "Close search",
    collapseSearchAria: "Clear all and close search",
    selectAll: "Select all items",
    selectAllAria:
      "Select all items. When selected, you can navigate to a menu of actions by pressing Shift-Tab",
    selectItem: "Select {0}",
    selectItemAria:
      "{0} Selection. When selected, you can navigate to a menu of actions by pressing Shift-Tab",
    selectItemICanNotAria: "Can not select {0}",
    selectedItemActionBarAria: "Action bar of selected items",
    nameAria: "{0}",
    noUserFound: "NO USERS FOUND",
    noResultsFound: "No results found",
    nameNoOpenAria: "{0}. Can not be opened.",
    NodeTableNoItems: "No item to display.",
    NodeTableNoSearchResult: "No results found.",
    NodeTableLoadingItems: "Loading...",
    NodeTableProcessingItems: "",
    NodeTablePageInfo: "Showing _START_ to _END_ of _TOTAL_ items",
    NodeTableEmptyPageInfo: "Showing 0 items",
    NodeTableFilteredPageInfo: "(filtered from _MAX_ total items)",
    NodeTablePageInfoSuffix: "",
    NodeTablePageThousandsSeparator: ",",
    NodeTablePagingFirst: "First",
    NodeTablePagingLast: "Last",
    NodeTablePagingPrevious: "Previous",
    NodeTablePagingNext: "Next",
    NodeTablePageSizeSelector: "Show _MENU_ items",
    NodeTablePageFilterLabel: "Filter by:",
    NodeTableSortedDescendingColumnAria: "{0} in descending order",
    NodeTableSortedAscendingColumnAria: "{0} in ascending order",
    NodeTableSortAscendingTooltip: "{0} - Click to sort ascending",
    NodeTableSortDescendingTooltip: "{0} - Click to sort descending",
    NodeTableIsUnsortedTooltip: "Unsorted",
    NodeTableSortAscendingButtonAria: "{0} - Sort ascending",
    NodeTableSortDescendingButtonAria: "{0} - Sort descending",
    MasterCompoundDocumentLabel: "Master",
    backButtonTooltip: "Go back",
    nameAndTypeAria: "{1} {0}",
    tableApplicationAria: "Table",
    TableColumnMenuSortAscending: "Sort ascending",
    TableColumnMenuSortDescending: "Sort descending",
    TableColumnMenuResizeMinWidth: "Minimum width",
    TableColumnMenuFitToContent: "Fit to content",
    selectionColumnTitle: "Selected",
    descriptionColumnTitle: "Description",
    toggleDetailsColumnTitle: "Toggle details",
    ToolbarItemMore: "More actions",
    ToolbarItemMoreAria: "More actions of {0}",
    noPermissions: "You don't have permissions to add items to this location.",
    promotedLabel: "Promoted",
    Bytes: "Bytes",
    KiloBytes: "KB",
    MegaBytes: "MB",
    GigaBytes: "GB",
    TeraBytes: "TB",
    Items: "{0} Items",
    Item: "{0} Item",
    ZeroByte: "0 Byte",
    favorite: "Favorite",
    reserved: "Reserved",
  }),
  csui.define(
    "csui/controls/table/cells/cell.registry",
    ["csui/lib/underscore"],
    function (v) {
      function d() {
        (this._columnKeys = {}),
          (this._columnOtherKeys = {}),
          (this._dataTypes = {});
      }
      return (
        v.extend(d.prototype, {
          hasCellViewByOtherKey: function (a) {
            return !!this._columnOtherKeys[a];
          },
          getCellView: function (a) {
            var h = a.get("column_type_identifier");
            if (h !== "type") {
              var i = a.get("column_key"),
                e = i && this._columnKeys[i];
              if (e) return e;
            }
            var l = a.get("type");
            return l && this._dataTypes[l.toString()];
          },
          registerByColumnKey: function (a, h) {
            if (!(v.isString(a) && a))
              throw new Error("Column key must be a non-empty string");
            this._registerCellView(this._columnKeys, a, h);
          },
          registerByOtherColumnKey: function (a, h) {
            if (!(v.isString(a) && a))
              throw new Error("Column key must be a non-empty string");
            this._registerCellView(this._columnOtherKeys, a, h);
          },
          registerByDataType: function (a, h) {
            if (!(v.isNumber(a) && a))
              throw new Error("Data type must be a non-zero number");
            this._registerCellView(this._dataTypes, a.toString(), h);
          },
          _registerCellView: function (a, h, i) {
            if (typeof i != "function")
              throw new Error("Column handler must be a function object");
            a[h] = i;
          },
        }),
        new d()
      );
    }
  ),
  csui.define("csui/utils/focusable", ["csui/lib/ally"], function (v) {
    "use strict";
    function d(h, i) {
      var e = i ? i.querySelector(h) : h;
      return v.query.focusable({
        context: e,
        includeContext: !1,
        strategy: "quick",
      });
    }
    function a(h) {
      return v.is.focusable(h);
    }
    return { findFocusables: d, isFocusable: a };
  }),
  csui.define(
    "csui/controls/table/cells/cell/cell.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/focusable",
      "i18n!csui/controls/table/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.extend({ multiValueSeparator: ", " }, v.config()),
        l = a.View.extend(
          {
            tagName: "td",
            constructor: function (r) {
              a.View.prototype.constructor.apply(this, arguments),
                this.listenTo(
                  this,
                  "before:render",
                  this._detachClickHandler
                ).listenTo(this, "before:destroy", this._detachClickHandler);
            },
            render: function () {
              return (
                this._ensureViewIsIntact(),
                this._renderContent(),
                this.bindUIElements(),
                this._attachClickHandler(),
                this.triggerMethod("render", this),
                this
              );
            },
            _renderContent: function () {
              var u = d.result(this, "className");
              u && this.$el.addClass(u);
              var r = this.options.column;
              if (r) {
                var t = r.name;
                this.$el.attr("data-csui-attribute", t),
                  this.model.get("addEmptyAttribute") &&
                    !this.model.get(t) &&
                    this.model.get(t) !== void 0 &&
                    this.el.setAttribute("data-csui-empty-cell", !0);
              }
              this.renderValue(), this._ensureAriaLabel();
            },
            _ensureAriaLabel: function () {
              if (this.needsAriaLabel !== !1) {
                if (this.needsAriaLabel === void 0) {
                  var u = h.findFocusables(this.el);
                  if (u.length === 1) return;
                }
                var r = this.getAriaLabel();
                r && this.$el.attr("aria-label", r);
              }
            },
            _attachClickHandler: function () {
              var u = this;
              this.$el.on("click." + this.cid, function (r) {
                u.triggerMethod("clicked:cell", r);
              });
            },
            _detachClickHandler: function () {
              this.$el.off("click." + this.cid);
            },
            renderValue: function () {
              var u = this.getValueText();
              this.$el.text(u), this.$el.attr("title", u);
            },
            getValueText: function () {
              var u = this.options.column;
              if (u) {
                var r = u.name,
                  t = this.model,
                  n = t.get(r + "_formatted");
                return (
                  n == null &&
                    ((n = t.get(r)),
                    (n =
                      r === "order" && n === 0
                        ? i.MasterCompoundDocumentLabel
                        : n),
                    r === "order" &&
                      typeof n == "string" &&
                      this.$el.addClass("csui-order-shortname-colomn"),
                    n == null && (n = "")),
                  this.getSingleOrMultipleValueText(n)
                );
              }
              return "";
            },
            getAriaLabel: function () {
              return this.getValueText();
            },
            getSingleOrMultipleValueText: function (u, r) {
              var t;
              return (
                (r = this._validateFormater(r)),
                Array.isArray(u)
                  ? (t = this.concatenateTextValues(u, r))
                  : (t = r(u)),
                t
              );
            },
            concatenateTextValues: function (u, r) {
              return (
                (r = this._validateFormater(r)),
                u.map(r).join(e.multiValueSeparator)
              );
            },
            _validateFormater: function (u) {
              return (
                u ||
                function (r) {
                  return r;
                }
              );
            },
          },
          {
            hasFixedWidth: !1,
            columnClassName: "",
            getValue: function (u, r) {
              var t = u.get(r.name);
              if (Array.isArray(t)) {
                for (var n = 0; n < t.length; n++)
                  if (t[n] !== void 0 && t[n] !== null) {
                    t = t[n];
                    break;
                  }
              }
              return t !== void 0 ? t : null;
            },
          }
        );
      return l;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/templated/value",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<span title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 13 },
                      end: { line: 1, column: 22 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "formattedValue") ||
                  (e != null ? n(e, "formattedValue") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 24 },
                      end: { line: 1, column: 42 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_templated_value", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/templated/templated.view",
    [
      "csui/controls/table/cells/cell/cell.view",
      "hbs!csui/controls/table/cells/templated/value",
    ],
    function (v, d) {
      "use strict";
      var a = v.extend({
        template: d,
        renderValue: function () {
          var h = this.getValueData(),
            i = h ? this.template(h) : "";
          this.$el.html(i);
        },
        getValueData: function () {
          var h = this.model,
            i = this.options.column,
            e = i.name,
            l = h.get(e),
            u = h.get(e + "_formatted");
          function r(n) {
            return n;
          }
          function t(n) {
            return u !== void 0 || u !== null ? u : (n === null && (n = ""), n);
          }
          return this.getSingleOrMultipleValueData(l, r, t);
        },
        getSingleOrMultipleValueData: function (h, i, e) {
          var l, u;
          return (
            Array.isArray(h)
              ? ((l = this.concatenateTextValues(h, i)),
                (u = this.concatenateTextValues(h, e)))
              : ((l = i(h)), (u = e(h))),
            { value: l, formattedValue: u }
          );
        },
      });
      return a;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/search/search.cell/impl/search.cell",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '    <div class="csui-table-search-cell-text ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "count") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 44 },
                  end: { line: 2, column: 97 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
    <span class="csui-table-search-cell-title">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "formattedValue") ||
                  (e != null ? s(e, "formattedValue") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 47 },
                      end: { line: 3, column: 65 },
                    },
                  })
                : n)
            ) +
            `</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "count") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 6, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          return "csui-table-search-cell-with-count";
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '        <span class="csui-count">+' +
            i.escapeExpression(
              ((t =
                (t = n(l, "count") || (e != null ? n(e, "count") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "count",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 34 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "formattedValue") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 8, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_search_search.cell_impl_search.cell",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/table/cells/search/search.cell/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define(
    "csui/controls/table/cells/search/search.cell/impl/nls/root/lang",
    { searchCellTooltip: "{0} and {1} more" }
  ),
  csui.define(
    "css!csui/controls/table/cells/search/search.cell/impl/search.cell",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/search/search.cell/search.cell.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/controls/table/cells/search/search.cell/search.cell.popover.list.view",
      "csui/utils/base",
      "i18n",
      "csui/pages/start/start.page.view",
      "hbs!csui/controls/table/cells/search/search.cell/impl/search.cell",
      "i18n!csui/controls/table/cells/search/search.cell/impl/nls/lang",
      "css!csui/controls/table/cells/search/search.cell/impl/search.cell",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = h.extend(
        {
          template: t,
          className: "csui-search-cell",
          templateHelpers: function () {
            return { count: this.collection.length };
          },
          events: {
            focus: "onFocus",
            "blur .csui-table-search-cell-text": "onBlur",
            "click .csui-count": "openPopover",
            "keydown .csui-table-search-cell-text": "onKeyInView",
          },
          constructor: function () {
            h.prototype.constructor.apply(this, arguments);
            const c = this.options?.column?.name;
            (this.columnValues = this.model.get(c + "_expand")),
              (this.formattedValue =
                this.model.get(c + "_formatted") || this.model.get(c)),
              (this.windowResizeHandler = d.bind(this._onWindowResize, this)),
              v(window).on("resize", this.windowResizeHandler);
          },
          getValueText: function () {
            return this.getValueData().formattedValueForExpandView;
          },
          _createCollection: function () {
            var o,
              c = new a.Collection();
            return (
              d.each(
                this.model.get(this.options?.column?.name + "_expand").values,
                function (m) {
                  (o = new a.Model({
                    value: m.value,
                    value_formatted: m.value_formatted || m.value,
                  })),
                    c.add(o);
                }
              ),
              c
            );
          },
          _onWindowResize: function () {
            this.popoverEl && this.closePopover();
          },
          openPopover: function (o, c) {
            if (this.collection) {
              var m = this,
                f,
                g,
                w =
                  v(".csui-result-list").width() ||
                  v(".csui-search-results-table-view"),
                b = v(window).width() !== w,
                C = u && u.settings.rtl;
              if (
                ((this.popoverEl = c || v(o.currentTarget)),
                (this.popoverView = new e({
                  originatingView: this,
                  collection: this.collection,
                })),
                this.popoverView.render(),
                this.options.searchMetadataView)
              )
                g = C ? "right" : "left";
              else {
                if (C && b)
                  f =
                    v(window).width() -
                    this.popoverEl.offset().left -
                    this.popoverEl.width();
                else {
                  var k =
                    v(".csui-search-results").width() ||
                    v(".csui-search-results-table-view").width();
                  f = k - this.popoverEl.offset().left - this.popoverEl.width();
                }
                g = f < 260 ? "left" : "right";
              }
              this.popoverEl.binf_popover({
                content: this.popoverView.$el,
                html: !0,
                placement: g,
                trigger: "manual",
              }),
                this.popoverEl.binf_popover("show"),
                (this.popover = this.popoverEl.siblings(".binf-popover")),
                this.popover.addClass("binf-invisible");
              var y = d.uniqueId("popoverLabelId"),
                S =
                  d.has(this.options.column.attributes, "completeName") &&
                  this.options.column.attributes.completeName,
                P = this.popover.find(">.binf-popover-title");
              this.popover.attr("role", "dialog"),
                P &&
                  (P.attr("id", y),
                  P.html(S),
                  this.popover.attr("aria-labelledby", y)),
                this.onShowOverviewFlyout(g),
                this.popoverEl.on(
                  "shown.binf.popover",
                  d.bind(function () {
                    (this.scrollEle = this.options.originatingView
                      ? this.options.originatingView.$el.find("#results")
                      : this.options.tableView.$el.find("tbody")),
                      this.scrollEle &&
                        this.scrollEle.one(
                          "scroll",
                          { view: this },
                          this._handleScrollEvent
                        ),
                      v(document).on(
                        "mouseup.popover",
                        { view: this },
                        this._handleClickEvent
                      ),
                      v(this.popoverView.$el.find(".csui-search-cell-value")[0])
                        .prop("tabindex", 0)
                        .trigger("focus");
                  }, this)
                ),
                this.popover.removeClass("binf-invisible");
            }
          },
          onKeyInView: function (o) {
            if (o.keyCode == 32 || o.keyCode == 13) {
              o.preventDefault(), o.stopPropagation();
              var c = v(o.target).find(".csui-count");
              this.openPopover(o, c);
            }
          },
          onFocus: function (o) {
            if (this.$el.find(".csui-count").length) {
              var c = this.$el.find(".csui-table-search-cell-text");
              c.attr("tabindex", 0),
                c.focus(),
                o.preventDefault(),
                o.stopPropagation();
            }
          },
          onBlur: function () {
            this.$el.find(".csui-table-search-cell-text").attr("tabindex", -1);
          },
          onRender: function () {
            if (this.collection) {
              var o = this.$el.find(".csui-table-search-cell-text"),
                c =
                  this.collection.length > 1
                    ? d.str.sformat(
                        n.searchCellTooltip,
                        this.formattedValue,
                        this.collection.length - 1
                      )
                    : this.formattedValue;
              o.attr("role", "button"),
                o.attr("aria-label", c),
                this.el.setAttribute("title", c);
            } else
              this.formattedValue &&
                (this.el.setAttribute("aria-label", this.formattedValue),
                this.el.setAttribute("title", this.formattedValue));
          },
          closePopover: function (o) {
            (o = o || this),
              this.popover.addClass("binf-hidden"),
              this.popoverEl.binf_popover("destroy"),
              o.popoverView && o.popoverView.destroy();
          },
          _handleClickEvent: function (o) {
            if (!v(o.target).closest(".binf-popover").length) {
              var c = o.data.view;
              v(document).off("mouseup.popover", this._handleClickEvent),
                c.closePopover(o.data.view);
            }
          },
          _handleScrollEvent: function (o) {
            var c = o.data.view;
            v(o.target).find(".binf-popover").length && c && c.closePopover();
          },
          onShowOverviewFlyout: function (o) {
            var c = this.popoverEl,
              m = r.useV2AppHeader ? "otc-header-bar" : "nav.csui-navbar",
              f = c.parent().find(".binf-popover"),
              g = f.find(".binf-arrow"),
              w = parseInt(g.css("border-top-width")),
              b = parseInt(g.css("top")),
              C = v(m).length
                ? v(m).innerHeight()
                : v(".binf-nav").parents("nav") &&
                  v(".binf-nav").parents("nav").length
                ? v(".binf-nav").parents("nav").innerHeight()
                : v("otc-header-bar").length
                ? v("otc-header-bar").innerHeight()
                : 0,
              k;
            (k = c.offset().top - (C + parseInt(g.css("top"))) + w / 2),
              k < C && ((k = C), (b = c.offset().top - (C + k)));
            var y = v(".cs-perspective-panel"),
              S = y.length > 0 ? y[0].getBoundingClientRect().top : 0;
            if (
              (l.isIE11() &&
                ((k =
                  c[0].getBoundingClientRect().top -
                  parseInt(g.css("top")) +
                  w),
                (b = c.offset().top - k + (S - C) + w / 2)),
              l.isAppleMobile())
            ) {
              const F = v(".csui-search-tool-container"),
                D = F[0].getBoundingClientRect().top;
              !F.hasClass("binf-hidden") &&
                k < D &&
                ((k = F[0].getBoundingClientRect().top),
                (b = c.offset().top - (C + k))),
                f.css({ "-webkit-transform": "translateZ(10px)" });
            }
            f.css({ position: "fixed", top: k }), g.css("top", b);
            const P = f.closest("td").length
              ? f.closest("td")
              : f.closest(".binf-list-group-item");
            if (P.length > 0) {
              let F;
              const D = P[0]
                .querySelector("span.csui-count")
                ?.getBoundingClientRect();
              o === "left"
                ? (F = parseFloat(D.left - f.width() - w / 2))
                : (F = parseFloat(D.right + w)),
                f.css({ right: "auto", left: F });
            }
          },
          getValueData: function () {
            var o,
              c = "";
            return (
              this.columnValues &&
                ((o = this.columnValues.values.length),
                (this.collection =
                  this.columnValues && this._createCollection())),
              this.columnValues &&
                this.columnValues.values.length > 0 &&
                this.columnValues.values.forEach(function (m, f) {
                  f === o - 1
                    ? (c += m.value_formatted || m.value)
                    : (c += (m.value_formatted || m.value) + ";  ");
                }),
              this.options.tableView?.collection?.enablePinnedColumnsView &&
                this.formattedValue?.length > 256 &&
                (this.trimmedText = `${this.formattedValue.substring(
                  0,
                  256
                )}...`),
              {
                formattedValue: this.trimmedText || this.formattedValue,
                formattedValueForExpandView: o ? c : this.formattedValue,
                value:
                  this.collection?.length > 1
                    ? d.str.sformat(
                        n.searchCellTooltip,
                        this.formattedValue,
                        this.collection.length - 1
                      )
                    : this.formattedValue,
                count: o && o - 1,
                collection: this.collection,
              }
            );
          },
        },
        { columnClassName: "csui-table-search-cell", hasFixedWidth: !1 }
      );
      return s;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/text/impl/text",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-table-cell-text" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 50 },
                      end: { line: 2, column: 59 },
                    },
                  })
                : t)
            ) +
            `">&nbsp;</div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-table-cell-text" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 45 },
                      end: { line: 4, column: 54 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 56 },
                      end: { line: 4, column: 65 },
                    },
                  })
                : t)
            ) +
            `</div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isEmpty") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 5, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_text_impl_text", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/text/impl/text",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/text/text.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "i18n!csui/controls/table/impl/nls/lang",
      "hbs!csui/controls/table/cells/text/impl/text",
      "css!csui/controls/table/cells/text/impl/text",
    ],
    function (v, d, a) {
      var h = v.extend(
        {
          className: "csui-truncate",
          template: a,
          renderValue: function () {
            var i = this.getValueText(),
              e = i === void 0 || i.length === 0,
              l = this.template({ value: i, isEmpty: e });
            this.$el.html(l);
          },
        },
        { hasFixedWidth: !1, columnClassName: "csui-table-cell-generic-text" }
      );
      return h;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/name/impl/name",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inactive") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(7, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 45, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-table-cell-name-div">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "promoted") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.program(5, r, 0),
                loc: {
                  start: { line: 4, column: 6 },
                  end: { line: 20, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `      <div class="csui-table-cell-name-appendix"></div>
    </div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `        <div class="csui-best-bet-container">
          <div class="csui-table-cell-name-justify-div">
            <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 91 },
                      end: { line: 7, column: 99 },
                    },
                  })
                : t)
            ) +
            `"
               aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 27 },
                      end: { line: 8, column: 45 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 47 },
                      end: { line: 8, column: 55 },
                    },
                  })
                : t)
            ) +
            `</p>
          </div>
          <div class="csui-best-bet ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedClass") ||
                  (e != null ? n(e, "promotedClass") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedClass",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 36 },
                      end: { line: 10, column: 53 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedAria") ||
                  (e != null ? n(e, "promotedAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedAria",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 67 },
                      end: { line: 10, column: 83 },
                    },
                  })
                : t)
            ) +
            `"
               title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 22 },
                      end: { line: 11, column: 39 },
                    },
                  })
                : t)
            ) +
            `">
            <span class="csui-best-bet-label">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 46 },
                      end: { line: 12, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `        <div class="csui-table-cell-name-justify-div">
          <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 89 },
                      end: { line: 17, column: 97 },
                    },
                  })
                : t)
            ) +
            `"
             aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 25 },
                      end: { line: 18, column: 43 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 45 },
                      end: { line: 18, column: 53 },
                    },
                  })
                : t)
            ) +
            `</p>
        </div>
`
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-table-cell-name-div">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "promoted") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.program(10, r, 0),
                loc: {
                  start: { line: 25, column: 6 },
                  end: { line: 42, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `      <div class="csui-table-cell-name-appendix"></div>
    </div>
`
          );
        },
        8: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `        <div class="csui-best-bet-container">
          <a href="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 19 },
                      end: { line: 27, column: 39 },
                    },
                  })
                : t)
            ) +
            `"
             class="csui-table-cell-name-value csui-table-cell-default-action csui-table-cell-name-justify-div"
             title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 29, column: 20 },
                      end: { line: 29, column: 28 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "nameAria") || (e != null ? n(e, "nameAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameAria",
                    hash: {},
                    loc: {
                      start: { line: 29, column: 42 },
                      end: { line: 29, column: 54 },
                    },
                  })
                : t)
            ) +
            `">
            <span class="csui-table-cell-name-link-text">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 57 },
                      end: { line: 30, column: 65 },
                    },
                  })
                : t)
            ) +
            `</span>
          </a>
          <div class="csui-best-bet ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedClass") ||
                  (e != null ? n(e, "promotedClass") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedClass",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 36 },
                      end: { line: 32, column: 53 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedAria") ||
                  (e != null ? n(e, "promotedAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedAria",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 67 },
                      end: { line: 32, column: 83 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 92 },
                      end: { line: 32, column: 109 },
                    },
                  })
                : t)
            ) +
            `">
            <span class="csui-best-bet-label">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 33, column: 46 },
                      end: { line: 33, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '        <a href="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 17 },
                      end: { line: 37, column: 37 },
                    },
                  })
                : t)
            ) +
            `"
           class="csui-table-cell-name-value csui-table-cell-default-action csui-table-cell-name-justify-div"
           title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 39, column: 18 },
                      end: { line: 39, column: 26 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "nameAria") || (e != null ? n(e, "nameAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameAria",
                    hash: {},
                    loc: {
                      start: { line: 39, column: 40 },
                      end: { line: 39, column: 52 },
                    },
                  })
                : t)
            ) +
            `">
          <span class="csui-table-cell-name-link-text">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 40, column: 55 },
                      end: { line: 40, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
        </a>
`
          );
        },
        12: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-table-cell-name-div">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "promoted") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(13, r, 0),
                inverse: i.program(15, r, 0),
                loc: {
                  start: { line: 48, column: 4 },
                  end: { line: 63, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="csui-table-cell-name-appendix"></div>
  </div>
`
          );
        },
        13: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <div class="csui-best-bet-container">
        <div class="csui-table-cell-name-justify-div">
          <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 51, column: 89 },
                      end: { line: 51, column: 97 },
                    },
                  })
                : t)
            ) +
            `"
             aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 52, column: 25 },
                      end: { line: 52, column: 43 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 52, column: 45 },
                      end: { line: 52, column: 53 },
                    },
                  })
                : t)
            ) +
            `</p>
        </div>
        <div class="csui-best-bet ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedClass") ||
                  (e != null ? n(e, "promotedClass") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedClass",
                    hash: {},
                    loc: {
                      start: { line: 54, column: 34 },
                      end: { line: 54, column: 51 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedAria") ||
                  (e != null ? n(e, "promotedAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedAria",
                    hash: {},
                    loc: {
                      start: { line: 54, column: 65 },
                      end: { line: 54, column: 81 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 54, column: 90 },
                      end: { line: 54, column: 107 },
                    },
                  })
                : t)
            ) +
            `">
          <span class="csui-best-bet-label">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "promotedLabel") ||
                  (e != null ? n(e, "promotedLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "promotedLabel",
                    hash: {},
                    loc: {
                      start: { line: 55, column: 44 },
                      end: { line: 55, column: 61 },
                    },
                  })
                : t)
            ) +
            `</span>
        </div>
      </div>
`
          );
        },
        15: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <div class="csui-table-cell-name-justify-div">
        <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 60, column: 87 },
                      end: { line: 60, column: 95 },
                    },
                  })
                : t)
            ) +
            `"
           aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 61, column: 23 },
                      end: { line: 61, column: 41 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 61, column: 43 },
                      end: { line: 61, column: 51 },
                    },
                  })
                : t)
            ) +
            `</p>
      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "defaultAction") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(12, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 66, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_name_impl_name", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/name/impl/name",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/name/name.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "csui/utils/node.links/node.links",
      "hbs!csui/controls/table/cells/name/impl/name",
      "i18n!csui/controls/table/impl/nls/lang",
      "css!csui/controls/table/cells/name/impl/name",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = d.extend(
        {
          template: e,
          className: function () {
            var r = "csui-truncate";
            return (
              h.isIE11() ? (r += " csui-on-IE11") : (r += " csui-not-on-IE11"),
              r
            );
          },
          constructor: function (t) {
            d.prototype.constructor.apply(this, arguments),
              this.listenTo(this, "before:render", function () {
                this.needsAriaLabel = !(
                  this.options.column.defaultAction &&
                  !this.model.get("inactive")
                );
              });
          },
          getValueData: function () {
            var r = this.model;
            r &&
              r.changed &&
              r.changed.name &&
              r.set({ OTName: r.changed.name });
            var t = this.options.column,
              n = t.attributes && t.attributes.promoted,
              s = r.get("promoted_column_info") || (n && n(r)) || {},
              o = r.get(t.name),
              c = s.message,
              m = r.get("bestbet") || r.get("nickname") || c,
              f = i.getUrl(r);
            return {
              defaultAction: t.defaultAction,
              defaultActionUrl: f,
              contextualMenu: t.contextualMenu,
              name: o,
              nameAria: v.str.sformat(l.nameAria, o),
              nameNoOpenAria: v.str.sformat(l.nameNoOpenAria, o),
              inactive: r.get("inactive"),
              promoted: m && m.length > 0,
              promotedLabel: c || l.promotedLabel,
              promotedAria: s.aria || l.promotedLabel,
              promotedClass: s.class || "",
            };
          },
        },
        {
          columnClassName: "csui-table-cell-name",
          widthFactor: 1,
          permanentColumn: !0,
        }
      );
      return a.registerByColumnKey("OTName", u), u;
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/date/impl/date",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/date/date.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/types/date",
      "css!csui/controls/table/cells/date/impl/date",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = d.extend(
        {
          className: "csui-nowrap",
          needsAriaLabel: !0,
          constructor: function () {
            d.prototype.constructor.apply(this, arguments);
          },
          formatFunction: function (e, l) {
            return l && l.includeTime
              ? h.formatExactDateTime(e)
              : h.formatExactDate(e);
          },
          getValueData: function () {
            var e = this.options.column,
              l = this.model.get(e.name),
              u = { includeTime: e.attributes.include_time !== !1 },
              r = this.formatFunction;
            function t(n) {
              return r(n, u);
            }
            return this.getSingleOrMultipleValueData(l, t, t);
          },
          getValueText: function () {
            return this.getValueData().formattedValue;
          },
        },
        {
          flexibleWidth: !0,
          columnClassName: "csui-table-cell-date",
          getValue: function (e, l) {
            var u = d.getValue(e, l);
            return u && h.deserializeDate(u);
          },
        }
      );
      return a.registerByDataType(-7, i), i;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/description/impl/description",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `    <div>&nbsp;</div>
`;
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "    <div>" +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 9 },
                      end: { line: 4, column: 18 },
                    },
                  })
                : t)
            ) +
            `</div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isEmpty") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 5, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_description_impl_description",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/description/impl/description",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/description/description.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "i18n!csui/controls/table/impl/nls/lang",
      "hbs!csui/controls/table/cells/description/impl/description",
      "css!csui/controls/table/cells/description/impl/description",
    ],
    function (v, d, a, h) {
      var i = v.extend(
        {
          template: h,
          renderValue: function () {
            var e = this.getValueText(),
              l = e === void 0 || e.length === 0,
              u = this.template({ value: e, isEmpty: l });
            this.$el.html(u);
          },
        },
        { hasFixedWidth: !1, columnClassName: "csui-table-cell-description" }
      );
      return d.registerByColumnKey("description", i), i;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/search/version/version",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <div class="csui-search-results-version csui-search-item-version-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 67 },
                      end: { line: 2, column: 74 },
                    },
                  })
                : t)
            ) +
            `">
    <a href="javascript:void(0);" class="csui-search-version-label" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionAria") ||
                  (e != null ? n(e, "versionAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 80 },
                      end: { line: 3, column: 95 },
                    },
                  })
                : t)
            ) +
            '" tabindex="0">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionText") ||
                  (e != null ? n(e, "versionText") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionText",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 110 },
                      end: { line: 3, column: 125 },
                    },
                  })
                : t)
            ) +
            `
    </a>
  </div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "visibleNoVersionText") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(4, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 7, column: 2 },
                end: { line: 9, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span class="csui-search-results-version-none">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "noVersionsText") ||
                  (e != null ? n(e, "noVersionsText") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "noVersionsText",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 53 },
                      end: { line: 8, column: 71 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "has_version") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 10, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_search_version_version",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/table/cells/search/version/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/search/version/nls/root/lang", {
    versionLabel: "v {0}",
    versionLabelAria: "Version {0}, show versions",
    noVersionsAria: "No versions",
  }),
  csui.define(
    "css!csui/controls/table/cells/search/version/version",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/search/version/version.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/accessibility",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "hbs!csui/controls/table/cells/search/version/version",
      "i18n!csui/controls/table/cells/search/version/nls/lang",
      "css!csui/controls/table/cells/search/version/version",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.isAccessibleTable(),
        r = h.extend(
          {
            className: "csui-table-cell-version",
            needsAriaLabel: !1,
            template: e,
            events: {
              "click .csui-search-results-version": "openVersionHistory",
            },
            getValueData: function () {
              var t = this.hasVersion(),
                n = this.model.get("versions"),
                s = n ? n.version_number_name : "";
              return {
                has_version: t,
                visibleNoVersionText: !t && u,
                noVersionsText: l.noVersionsAria,
                versionText: v.str.sformat(l.versionLabel, s),
                versionAria: v.str.sformat(l.versionLabelAria, s),
                cid: this.model.cid,
              };
            },
            constructor: function () {
              h.prototype.constructor.apply(this, arguments);
              const n = this.model.get("versions");
              if (!this.model.has("locked")) {
                const {
                  locked: s,
                  locked_date: o,
                  locked_user_id: c,
                  locked_user_id_expand: m,
                } = n || {};
                v.extend(this.model.attributes, {
                  locked: s,
                  locked_date: o,
                  locked_user_id: c,
                  locked_user_id_expand: m,
                });
              }
            },
            hasVersion: function () {
              return (
                this.model.get("versions") &&
                this.model.get("search_result_metadata") &&
                (this.model.get("search_result_metadata").current_version ===
                  !1 ||
                  this.model.get("search_result_metadata").version_type ===
                    "minor")
              );
            },
            openVersionHistory: function () {
              var t = { model: this.model },
                n =
                  this.options.tableView &&
                  this.options.tableView.options.parentView;
              n.openVersionHistory(t);
            },
          },
          { columnClassName: "csui-table-cell-version", hasFixedWidth: !0 }
        );
      return i.registerByColumnKey("version_id", r), r;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/search/location/impl/location",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "defaultAction") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(4, r, 0),
              loc: {
                start: { line: 2, column: 0 },
                end: { line: 20, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-table-cell-location-div">
    <a href="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 13 },
                      end: { line: 4, column: 33 },
                    },
                  })
                : t)
            ) +
            `"
       class="csui-table-cell-location-value csui-table-cell-default-action
       csui-table-cell-location-justify-div"
       title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "location") || (e != null ? n(e, "location") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "location",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 14 },
                      end: { line: 7, column: 26 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "locationAria") ||
                  (e != null ? n(e, "locationAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "locationAria",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 40 },
                      end: { line: 7, column: 56 },
                    },
                  })
                : t)
            ) +
            `">
      <span class ="csui-icon-type"></span>
      <span class="csui-table-cell-location-link-text">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "location") || (e != null ? n(e, "location") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "location",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 55 },
                      end: { line: 9, column: 67 },
                    },
                  })
                : t)
            ) +
            `</span>
    </a>
  </div>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-table-cell-location-div">
    <div class="csui-table-cell-location-justify-div">
      <span class ="csui-icon-type"></span>
      <p class="csui-table-cell-location-value csui-table-cell-no-default-action" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "location") || (e != null ? n(e, "location") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "location",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 89 },
                      end: { line: 16, column: 101 },
                    },
                  })
                : t)
            ) +
            `"
         aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 21 },
                      end: { line: 17, column: 39 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "location") || (e != null ? n(e, "location") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "location",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 41 },
                      end: { line: 17, column: 53 },
                    },
                  })
                : t)
            ) +
            `</p>
    </div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "showLocation") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 21, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_search_location_impl_location",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/parent/impl/parent.base.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/utils/commands",
      "csui/utils/commandhelper",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.ItemView.extend({
        constructor: function (u) {
          d.ItemView.prototype.constructor.apply(this, arguments),
            this.listenTo(this, "cell:node:request", function () {
              var r = h.get("goToLocation");
              if (!r) throw new Error("Invalid command: goToLocation");
              var t = {
                  nodes: new a.Collection([this.options.node]),
                  model: this.options.model,
                  context: this.options.context,
                  originatingView: this,
                },
                n = { context: this.options.context, originatingView: this };
              i.handleExecutionResults(r.execute(t, n));
            });
        },
      });
      return e;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/parent/impl/parent.with.icon",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <a href="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 13 },
                      end: { line: 2, column: 33 },
                    },
                  })
                : t)
            ) +
            '" class="csui-parent-name" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "link_label") || (e != null ? n(e, "link_label") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "link_label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 72 },
                      end: { line: 2, column: 86 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 95 },
                      end: { line: 2, column: 103 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 105 },
                      end: { line: 2, column: 113 },
                    },
                  })
                : t)
            ) +
            `</a>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "name") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 3, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_parent_impl_parent.with.icon",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/parent/impl/parent.with.icon",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/parent/impl/parent.with.icon.view",
    [
      "csui/lib/underscore",
      "csui/utils/node.links/node.links",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/table/cells/parent/impl/parent.base.view",
      "hbs!csui/controls/table/cells/parent/impl/parent.with.icon",
      "css!csui/controls/table/cells/parent/impl/parent.with.icon",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = h.extend({
        template: i,
        className: "csui-parent-location",
        triggers: { "click a.csui-parent-name": "cell:node:request" },
        events: { "click span.csui-icon-group": "_triggerEvent" },
        _triggerEvent: function () {
          this.trigger("cell:node:request");
        },
        templateHelpers: function () {
          var l = this.model.get("name"),
            u = d.getUrl(this.model),
            r = this.model.get("type_name");
          return { name: l, defaultActionUrl: u, link_label: `${l}, ${r}` };
        },
        constructor: function (u) {
          u || (u = {}),
            h.prototype.constructor.apply(this, arguments),
            (this.iconView = new a({ node: this.model, size: u.size }));
        },
        onRender: function () {
          this.model.get("name") &&
            (this.iconView.render(), this.$el.prepend(this.iconView.$el)),
            this.options.inactive &&
              this.$el.addClass("csui-inactive ").css("cursor", "default");
        },
      });
      return e;
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/search/location/impl/location",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/search/location/location.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/models/node/node.model",
      "csui/utils/base",
      "csui/utils/node.links/node.links",
      "csui/controls/node-type.icon/node-type.icon.view",
      "hbs!csui/controls/table/cells/search/location/impl/location",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/utils/defaultactionitems",
      "csui/utils/commands",
      "csui/controls/table/cells/parent/impl/parent.with.icon.view",
      "csui/models/nodeancestors",
      "csui/utils/commandhelper",
      "css!csui/controls/table/cells/search/location/impl/location",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g) {
      "use strict";
      var w = i.extend(
        {
          template: n,
          className: "csui-truncate",
          ui: {
            mimeType: ".csui-icon-type",
            location: ".csui-table-cell-location-div",
          },
          events: {
            keydown: "onKeyInView",
            "click @ui.location": "onClickLocationItem",
          },
          constructor: function (C) {
            i.prototype.constructor.apply(this, arguments);
            var k = this;
            this.listenTo(this, "render", this._createNodeTypeIcon),
              this.listenTo(this, "before:render", function () {
                this.needsAriaLabel = !(
                  this.options.column.defaultAction &&
                  !this.model.get("inactive")
                );
              }),
              this.listenTo(this.model, "change:ancestors", function (y) {
                var S = k.getDisplayName(y),
                  P = {
                    defaultAction: this.options.column.defaultAction,
                    defaultActionUrl: r.getUrl(y),
                    location: S,
                    showLocation: !0,
                    locationAria: d.str.sformat(s.nameAria, S),
                  },
                  F = P ? k.template(P) : "";
                if (
                  (k.$el.html(F), (k.parentNode = k.getParent(y)), k.parentNode)
                ) {
                  var D = new t({ node: k.parentNode });
                  k.$el.find(".csui-icon-type").length === 1 &&
                    ((k.cellRegion = new h.Region({
                      el: k.$el.find(".csui-icon-type"),
                    })),
                    k.cellRegion.show(D));
                }
              }),
              this.hasPromoted() &&
                !this.model.get("ancestors") &&
                this.model.parent.get("id") > 0 &&
                (!this.model.attributes.ancestors ||
                  (this.model.attributes.ancestors &&
                    this.model.attributes.ancestors.length === 0)) &&
                this.getAncestors(this.options, this.model)
                  .fetch()
                  .done(
                    d.bind(function (y) {
                      (this.model.attributes.ancestors = y.ancestors),
                        this.model.trigger("change:ancestors", this.model);
                    }, this)
                  );
          },
          hasBestBet: function () {
            return (
              !!this.model.get("bestbet") && !!this.model.get("bestbet").length
            );
          },
          hasNickName: function () {
            return (
              !!this.model.get("nickname") &&
              !!this.model.get("nickname").length
            );
          },
          hasPromoted: function () {
            return !!this.hasBestBet() || !!this.hasNickName();
          },
          getAncestors: function (b, C) {
            var k = C,
              y = { node: k.parent, autofetch: !1 },
              S = new f(void 0, y);
            return S;
          },
          _createNodeTypeIcon: function () {
            if (this.parentNode && this.parentNode.get("id") >= 0) {
              var b = new t({ node: this.parentNode });
              this.ui.mimeType &&
                this.ui.mimeType.length > 0 &&
                ((this.cellRegion = new h.Region({ el: this.ui.mimeType })),
                this.cellRegion.show(b));
            }
          },
          getValueData: function () {
            var b, C, k, y;
            return (
              (this.parentNode = this.getParent(this.model)),
              (b = this.options.column),
              (C = this.getDisplayName(this.model)),
              (k = this.parentNode),
              (y = r.getUrl(k)),
              C ? (this.model = this.parentNode) : (this.parentNode = void 0),
              {
                defaultAction: b.defaultAction,
                defaultActionUrl: y,
                location: C,
                showLocation: !0,
                locationAria: d.str.sformat(s.nameAria, C),
              }
            );
          },
          getParent: function (b) {
            var C = b.get("parent_id_expand"),
              k = this.getDisplayName(b),
              y = new l(
                {
                  id: C ? C.id : b.get("parent_id"),
                  type: C ? C.type : this.getType(b),
                  type_name: C ? C.type_name : this.getTypeName(b),
                  mime_type: C ? C.mime_type : null,
                  container: C ? C.container : this.isContainer(b),
                  image_url: C ? C.image_url : null,
                  name: k || "",
                },
                { connector: b.connector }
              );
            return y;
          },
          getType: function (b) {
            var C = 0;
            return (
              b.get("ancestors") &&
                b.get("ancestors").length &&
                (C =
                  b.get("ancestors")[b.get("ancestors").length - 1].type !==
                  void 0
                    ? b.get("ancestors")[b.get("ancestors").length - 1].type
                    : b
                        .get("ancestors")
                        [b.get("ancestors").length - 1].get("type")),
              C
            );
          },
          getTypeName: function (b) {
            var C = "";
            return (
              b.get("ancestors") &&
                b.get("ancestors").length &&
                (C =
                  b.get("ancestors")[b.get("ancestors").length - 1].type_name ||
                  b
                    .get("ancestors")
                    [b.get("ancestors").length - 1].get("type_name")),
              C
            );
          },
          isContainer: function (b) {
            var C = !0;
            return (
              b.get("ancestors") &&
                b.get("ancestors").length &&
                (C =
                  b.get("ancestors")[b.get("ancestors").length - 1].container ||
                  b
                    .get("ancestors")
                    [b.get("ancestors").length - 1].get("container")),
              C
            );
          },
          getDisplayName: function (b) {
            var C = "";
            return (
              b.get("ancestors") && b.get("ancestors").length
                ? (C =
                    b.get("ancestors")[b.get("ancestors").length - 1].name ||
                    b
                      .get("ancestors")
                      [b.get("ancestors").length - 1].get("name"))
                : (C = u.formatMemberName(b.get("parent_id_expand"))),
              C
            );
          },
          getValueText: function () {
            return this.getDisplayName(this.model);
          },
          getContentView: function () {
            this.parentNode || (this.parentNode = this.getParent(this.model));
            var b = new m({
              model: this.parentNode,
              context: this.options.context,
            });
            return b;
          },
          onClickLocationItem: function (b) {
            if (!u.isControlClick(b)) {
              b.preventDefault(), b.stopPropagation();
              var C = c.get("goToLocation");
              if (!C) throw new Error("Invalid command: goToLocation");
              var k = {
                  nodes: new a.Collection([this.model]),
                  model: this.parentNode,
                  context: this.options.context,
                  originatingView: this,
                },
                y = { context: this.options.context, originatingView: this };
              g.handleExecutionResults(C.execute(k, y));
            }
          },
        },
        { columnClassName: "csui-table-cell-location", permanentColumn: !1 }
      );
      return e.registerByColumnKey("OTLocation", w), w;
    }
  ),
  csui.define(
    "csui/controls/table/cells/search/description.cell.view",
    [
      "csui/controls/table/cells/text/text.view",
      "csui/controls/table/cells/cell.registry",
    ],
    function (v, d) {
      "use strict";
      var a = v.extend({
        getValueText: function () {
          var h = this.options.column;
          if (h) {
            var i = h.name,
              e = this.model,
              l = e.get(i + "_formatted");
            return (
              (this.options.tableView.selectedSettings === "DP" ||
                this.options.tableView.selectedSettings === "SP") &&
                (this.options.tableView.selectedSettings === "DP" &&
                i === "summary"
                  ? (l = e.get("description") === "" ? l : "")
                  : this.options.tableView.selectedSettings === "SP" &&
                    i === "description" &&
                    (l = e.get("summary") === "" ? l : "")),
              l == null && ((l = e.get(i)), l == null && (l = "")),
              this.getSingleOrMultipleValueText(l)
            );
          }
          return "";
        },
      });
      return (
        d.registerByColumnKey("search_description", a),
        d.registerByColumnKey("summary", a),
        a
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/datetime/datetime.view",
    [
      "csui/controls/table/cells/date/date.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
    ],
    function (v, d, a) {
      var h = v.extend({ formatFunction: a.formatDateTime });
      return d.registerByDataType(401, h), h;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/duedate/duedate",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="cellview_warning" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 40 },
                      end: { line: 2, column: 49 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "formattedValue") ||
                  (e != null ? n(e, "formattedValue") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 69 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 15 },
                      end: { line: 4, column: 24 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "formattedValue") ||
                  (e != null ? n(e, "formattedValue") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 26 },
                      end: { line: 4, column: 44 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "pastDueDate") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 5, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_duedate_duedate", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/duedate/duedate.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/date/date.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "hbs!csui/controls/table/cells/duedate/duedate",
    ],
    function (v, d, a, h, i) {
      var e = d.extend({
        template: i,
        formatFunction: h.formatDateTime,
        getValueData: function () {
          var l = this.model.get(this.options.column.name);
          return v.extend(d.prototype.getValueData.call(this), {
            pastDueDate: new Date(l) < new Date(),
          });
        },
      });
      return a.registerByColumnKey("date_due", e), e;
    }
  ),
  csui.define("csui/controls/table/cells/member/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/member/impl/nls/root/lang", {
    agentOnBehalf: "{0} on behalf of {1}",
  }),
  csui.define(
    "csui/controls/table/cells/member/member.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/text/text.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "i18n!csui/controls/table/cells/member/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.extend(
        {
          className: "csui-truncate",
          needsAriaLabel: !0,
          getValueText: function () {
            return e.getValue(this.model, this.options.column);
          },
        },
        {
          getValue: function (l, u) {
            var r = u?.attributes?.proxykey,
              t,
              n,
              s,
              o;
            r &&
              ((t = l.get(r)),
              t &&
                ((n = l.get(r + "_expand")),
                (o = n.name_formatted),
                (s = u?.attributes?.proxyWorksAs)));
            var c = u.name,
              m = l.get(c + "_expand") || l.get(c) || "",
              f = l.get("agent_id_expand") || l.get("agent_id"),
              g = f || m,
              w;
            return (
              v.isObject(g)
                ? f
                  ? (w = v.str.sformat(
                      i.agentOnBehalf,
                      h.formatMemberName(g),
                      h.formatMemberName(m)
                    ))
                  : (w = h.formatMemberName(g))
                : (w = l.get(c + "_formatted") || g.toString()),
              t && o && s ? w + s + o : w
            );
          },
          getModelExpand: function (l) {
            return { properties: [l.column.name] };
          },
        }
      );
      return (
        a.registerByDataType(14, e),
        a.registerByDataType(19, e),
        a.registerByColumnKey("owner_id", e),
        a.registerByColumnKey("user_id", e),
        a.registerByColumnKey("reserved_user_id", e),
        e
      );
    }
  ),
  csui.define("csui/controls/node.state/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/node.state/impl/nls/root/lang", {
    stateListAria: "List of states",
  }),
  csui.define(
    "css!csui/controls/node.state/impl/node.states",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/node.state/node.states.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/controls/node.state/impl/nls/lang",
      "css!csui/controls/node.state/impl/node.states",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = a.CollectionView.extend({
        tagName: "ul",
        className: "csui-node-states",
        attributes: { "aria-label": h.stateListAria },
        getChildView: function (e) {
          return e.get("iconView");
        },
        childViewOptions: function (e) {
          return v.extend(
            {
              context: this.options.context,
              model: this.options.node,
              tableView: this.options.tableView,
            },
            e.get("iconViewOptions")
          );
        },
      });
      return i;
    }
  ),
  csui.define(
    "csui/controls/table/cells/node.state/node.state.icons",
    ["csui-ext!csui/controls/table/cells/node.state/node.state.icons"],
    function (v) {
      "use strict";
      return v;
    }
  ),
  csui.define(
    "csui/controls/node.state/node.state.icons",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/table/cells/node.state/node.state.icons",
      "csui-ext!csui/controls/node.state/node.state.icons",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = d.Model.extend({
          defaults: { sequence: 100, iconView: null, iconViewOptions: null },
          constructor: function (t, n) {
            d.Model.prototype.constructor.apply(this, arguments);
          },
        }),
        e = d.Collection.extend({
          model: i,
          comparator: "sequence",
          constructor: function (t, n) {
            d.Collection.prototype.constructor.apply(this, arguments);
          },
        }),
        l = new e();
      u(a), u(h);
      function u(r) {
        if (r) {
          var t = v.flatten(r, !0);
          l.add(t);
        }
      }
      return l;
    }
  ),
  csui.define("csui/controls/table/cells/node.state/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/node.state/impl/nls/root/lang", {
    someStateIconsAria: "State available",
    stateEntryButtonAria: "State available, click to Enter",
    bool_value_true: "true",
    bool_value_false: "false",
  }),
  csui.define(
    "css!csui/controls/table/cells/node.state/impl/node.state",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/node.state/node.state.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/accessibility",
      "csui/controls/table/cells/cell/cell.view",
      "csui/controls/table/cells/cell.registry",
      "csui/controls/node.state/node.states.view",
      "csui/controls/node.state/node.state.icons",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "i18n!csui/controls/table/cells/node.state/impl/nls/lang",
      "css!csui/controls/table/cells/node.state/impl/node.state",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = l.isAccessibleTable();
      i = i(v.id);
      var m = u.extend(
        {
          needsAriaLabel: !0,
          events: {
            focus: "_focused",
            keydown: "_handleKeys",
            keyup: "_trapKeys",
            click: "_clicked",
            "blur @ui.entryButton": "_blurredEntryButton",
          },
          ui: { entryButton: "button.csui-node-states-entry" },
          constructor: function (g) {
            u.prototype.constructor.apply(this, arguments),
              (this.cellRegion = new h.Region({ el: this.el })),
              this.listenTo(this, "before:render", this._rememberFocus)
                .listenTo(this, "before:render", this._disengageKeyTrap)
                .listenTo(this, "before:render", this._destroyStateIcons)
                .listenTo(this, "render", this._restoreFocus)
                .listenTo(this, "before:destroy", this._disengageKeyTrap)
                .listenTo(this, "before:destroy", this._destroyStateIcons);
          },
          _destroyStateIcons: function () {
            this.cellRegion.empty();
          },
          _getEnabledNodeStateIcons: function () {
            var f, g;
            return (
              (f = Object.getPrototypeOf(n)),
              (g = new f.constructor(
                n.filter(function (w) {
                  var b = w.get("iconView");
                  try {
                    return (
                      b &&
                      (!b.enabled ||
                        b.enabled({
                          context: this.options.context,
                          node: this.model,
                        }))
                    );
                  } catch (C) {
                    i.warn(
                      `Evaluating an icon view failed.
{0}`,
                      C.stack
                    ) && console.warn(i.last);
                  }
                }, this)
              )),
              g
            );
          },
          renderValue: function () {
            var f = this._getEnabledNodeStateIcons();
            if (f.length) {
              f.length > 1 && this._render4MultiState();
              var g = new t({
                context: this.options.context,
                node: this.model,
                tableView: this.options.tableView,
                collection: f,
              });
              if (f.length > 1) {
                var w = this.$el.find("div.csui-node-states-multi-wrapper");
                this.cellRegion = new h.Region({ el: w });
              }
              this.cellRegion.show(g);
              var b = this;
              this.$("button.csui-node-states-entry").on("keyup", function (C) {
                (C.keyCode === 13 || C.keyCode === 32) &&
                  (b._disengageKeyTrap(),
                  b._engageKeyTrap(),
                  C.preventDefault(),
                  C.stopPropagation());
              });
            }
          },
          getAriaLabel: function () {
            var f = this.cellRegion.currentView;
            return f ? o.someStateIconsAria : null;
          },
          getAttributes: function () {
            var f = this,
              g = [];
            return (
              this._getEnabledNodeStateIcons().each(function (w) {
                var b = w.get("iconView"),
                  C = new b({ context: f.options.context, model: f.model });
                d.isFunction(C.getAttributes) &&
                  (g = g.concat(C.getAttributes()));
              }),
              d.each(g, function (w) {
                d.isBoolean(w.value) &&
                  (w.value =
                    w.value === !0 ? o.bool_value_true : o.bool_value_false);
              }),
              g
            );
          },
          _render4MultiState: function () {
            a("<button>", {
              class: "csui-node-states csui-node-states-entry",
              "aria-label": o.stateEntryButtonAria,
              tabindex: -1,
            })
              .text("")
              .appendTo(this.$el),
              a("<div>", { class: "csui-node-states-multi-wrapper" }).appendTo(
                this.$el
              );
          },
          _clicked: function (f) {
            f.target === this.ui.entryButton[0] &&
              (f.preventDefault(),
              f.stopPropagation(),
              this._disengageKeyTrap(),
              this._engageKeyTrap());
          },
          _handleKeys: function (f) {
            f.keyCode === 13 || f.keyCode === 32
              ? f.target === this.ui.entryButton[0] &&
                (f.preventDefault(),
                f.stopPropagation(),
                this._disengageKeyTrap(),
                this._engageKeyTrap())
              : this._hasEngagedKeyTrap() &&
                (f.keyCode === 27
                  ? (this._disengageKeyTrap(),
                    f.preventDefault(),
                    f.stopPropagation(),
                    this.ui.entryButton.is(":visible") &&
                      (this.$el.addClass("csui-node-states-entry-focused"),
                      this.ui.entryButton.attr("tabindex", 0).focus()))
                  : f.keyCode === 37 || f.keyCode === 38
                  ? (f.preventDefault(),
                    f.stopPropagation(),
                    this._moveFocus(-1))
                  : f.keyCode === 39 || f.keyCode === 40
                  ? (f.preventDefault(),
                    f.stopPropagation(),
                    this._moveFocus(1))
                  : this._trapKeys(f));
          },
          _trapKeys: function (f) {
            this._hasEngagedKeyTrap() &&
              f.keyCode === 9 &&
              (f.preventDefault(), f.stopPropagation());
          },
          _rememberFocus: function () {
            this._focusTrapped =
              this.el.contains(document.activeElement) &&
              this._hasEngagedKeyTrap();
          },
          _restoreFocus: function () {
            this._focusTrapped && this._engageKeyTrap();
          },
          _focused: function (f) {
            if (f.target.tagName === "TD" && this._hasEngagedKeyTrap()) {
              this._engageKeyTrap(), f.preventDefault(), f.stopPropagation();
              return;
            }
            this._disengageKeyTrap();
            var g = this._getEnabledNodeStateIcons();
            g.length > 1 &&
              (this.ui.entryButton.attr("tabindex", 0),
              this.$el.attr("tabindex", -1),
              this.$el.addClass("csui-node-states-entry-focused"),
              this.ui.entryButton.focus(),
              f.preventDefault(),
              f.stopPropagation());
          },
          _blurredEntryButton: function (f) {
            this.$el.removeClass("csui-node-states-entry-focused"),
              this.ui.entryButton.attr("tabindex", "-1");
          },
          _engageKeyTrap: function () {
            var f = e.findFocusables(this.cellRegion.el);
            f.length && ((this._keysTrapped = !0), a(f[0]).focus());
          },
          _disengageKeyTrap: function () {
            this._hasEngagedKeyTrap() && (this._keysTrapped = !1);
          },
          _hasEngagedKeyTrap: function () {
            return this._keysTrapped;
          },
          _moveFocus: function (f) {
            var g = e.findFocusables(this.cellRegion.el),
              w = g.length - 1,
              b = g.index(document.activeElement) + f;
            b < 0 ? (b = w) : b > w && (b = 0),
              (b = g[b]),
              b
                ? b.focus()
                : i.warn(
                    "Focusable elements were unexpectedly removed from {0} ({1}).",
                    i.getObjectName(this),
                    this.cid
                  ) && console.warn(i.last);
          },
        },
        {
          columnClassName: "csui-table-cell-node-state",
          permanentColumn: !0,
          flexibleWidth: !0,
          getModelFields: function (f) {
            return n.reduce(function (g, w) {
              var b = w.get("iconView");
              if (b && b.getModelFields) {
                var C = b.getModelFields(f);
                C && s.mergePropertyParameters(g, C);
              }
              return g;
            }, {});
          },
          getModelExpand: function (f) {
            return n.reduce(function (g, w) {
              var b = w.get("iconView");
              if (b && b.getModelExpand) {
                var C = b.getModelExpand(f);
                C && s.mergePropertyParameters(g, C);
              }
              return g;
            }, {});
          },
        }
      );
      return (
        r.registerByColumnKey("reserved", m),
        r.registerByOtherColumnKey("reserved_user_id", m),
        m
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/parent/impl/parent.with.text.view",
    [
      "csui/lib/underscore",
      "csui/utils/node.links/node.links",
      "csui/controls/table/cells/parent/impl/parent.base.view",
    ],
    function (v, d, a) {
      "use strict";
      var h = a.extend({
        tagName: "a",
        attributes: function () {
          return { title: this.model.get("name"), href: d.getUrl(this.model) };
        },
        template: !1,
        triggers: { click: "cell:node:request" },
        constructor: function (e) {
          a.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          this.el.textContent = this.model.get("name");
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/controls/table/cells/parent/parent.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/models/node/node.model",
      "csui/controls/table/cells/text/text.view",
      "csui/controls/table/cells/cell.registry",
      "csui/controls/table/cells/parent/impl/parent.with.icon.view",
      "csui/controls/table/cells/parent/impl/parent.with.text.view",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = h.extend(
        {
          events: { keydown: "onKeyInView" },
          constructor: function (t) {
            t || (t = {}), h.prototype.constructor.apply(this, arguments);
            var n = !1,
              s =
                t.parent ||
                this.model.get("parent_id_expand") ||
                this.model.get("parent_id") ||
                this.model.get("location_id_expand") ||
                this.model.get("location_id");
            if (this.model) {
              this.model.get("type") === 153 &&
                ((s =
                  this.model.get("workflow_id_expand") ||
                  this.model.get("workflow_id")),
                (n = !0));
              let o = this.model.get("parent_id"),
                c = this.model.collection?.node?.get("id");
              !n && (o || c) && o === c && (n = !0);
            }
            (this.parentModel = new a(s, {
              connector: t.connector || this.model.connector,
            })),
              (this.parentIconView = new e({
                model: this.parentModel,
                node: this.model,
                size: t.iconSize,
                inactive: n,
                context: this.options.context,
              })),
              (this.parentTextView = new l({
                model: this.parentModel,
                node: this.model,
                context: this.options.context,
              })),
              (this.contentRegion = new d.Region({ el: this.el }));
          },
          renderValue: function () {
            this.contentRegion.show(this.parentIconView);
          },
          getValueText: function () {
            return this.parentModel.get("name");
          },
          getContentView: function () {
            return this.parentIconView;
          },
        },
        {
          getModelExpand: function (r) {
            return { properties: ["parent_id"] };
          },
        }
      );
      return (
        i.registerByColumnKey("parent_id", u),
        i.registerByColumnKey("location_id", u),
        i.registerByColumnKey("location_name", u),
        u
      );
    }
  ),
  csui.define("csui/controls/table/cells/priority/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/priority/impl/nls/root/lang", {
    priority_name_high: "High",
    priority_name_medium: "Medium",
    priority_name_low: "Low",
    priority_no_value: "No value",
  }),
  csui.define(
    "hbs!csui/controls/table/cells/priority/impl/priority",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `    <span class="icon icon-priorityHigh"></span>
`;
        },
        3: function (i, e, l, u, r) {
          return `    <span class="icon icon-priorityMedium"></span>
`;
        },
        5: function (i, e, l, u, r) {
          return `    <span class="icon icon-priorityLow"></span>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="csui-table-cell-priority-container">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "priority_high") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 4, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "priority_medium") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 2 },
                  end: { line: 7, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "priority_low") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 8, column: 2 },
                  end: { line: 10, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <span class="csui-table-cell-priority-text" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "priority_name") ||
                  (e != null ? s(e, "priority_name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "priority_name",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 53 },
                      end: { line: 11, column: 70 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "priority_name") ||
                  (e != null ? s(e, "priority_name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "priority_name",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 72 },
                      end: { line: 11, column: 89 },
                    },
                  })
                : n)
            ) +
            `</span>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_priority_impl_priority",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/priority/impl/priority",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/priority/priority.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/accessibility",
      "i18n!csui/controls/table/cells/priority/impl/nls/lang",
      "hbs!csui/controls/table/cells/priority/impl/priority",
      "css!csui/controls/table/cells/priority/impl/priority",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.isAccessibleTable(),
        l = v.extend(
          {
            template: i,
            needsAriaLabel: !0,
            getValueData: function () {
              var u = this._getPriorityObject();
              return {
                priority: u.priority,
                priority_name: u.priority_name,
                priority_high: u.priority_high,
                priority_medium: u.priority_medium,
                priority_low: u.priority_low,
              };
            },
            getValueText: function () {
              return this._getPriorityObject().priority_name;
            },
            _getPriorityObject: function () {
              var u = {};
              u.priority = this.model.get(this.options.column.name);
              var r,
                t = this.model.get(this.options.column.name + "_name");
              return (
                (u.priority_high = !1),
                (u.priority_medium = !1),
                (u.priority_low = !1),
                u.priority === null
                  ? ((r = ""), e && (r = h.priority_no_value))
                  : u.priority > 50
                  ? ((u.priority_high = !0), (r = h.priority_name_high))
                  : u.priority === 50
                  ? ((u.priority_medium = !0), (r = h.priority_name_medium))
                  : u.priority < 50 &&
                    ((u.priority_low = !0), (r = h.priority_name_low)),
                (u.priority_name = r || t),
                u
              );
            },
          },
          { hasFixedWidth: !0, columnClassName: "csui-table-cell-priority" }
        );
      return d.registerByColumnKey("priority", l), l;
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/select/impl/select.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/select/select.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/checkbox/checkbox.view",
      "csui/controls/table/cells/cell/cell.view",
      "csui/controls/table/cells/cell.registry",
      "i18n!csui/controls/table/impl/nls/lang",
      "css!csui/controls/table/cells/select/impl/select.view",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = e.extend(
        {
          constructor: function (t) {
            r.__super__.constructor.apply(this, arguments);
          },
          renderValue: function () {
            var t = this;
            this.$el.empty();
            var n = this.model.get(r.isSelectedModelAttributeName) === !0,
              s = this.model.get("name");
            this.model.has("favorite_name") &&
              (s = this.model.get("favorite_name"));
            var o = this.model.get("selectable") !== !1,
              c = "",
              m = v.str.sformat(u.selectItemICanNotAria, s);
            o &&
              ((m = v.str.sformat(u.selectItemAria, s)),
              (c = v.str.sformat(u.selectItem, s))),
              (this.checkboxView = new i({
                checked: n ? "true" : "false",
                disabled: !o,
                ariaLabel: m,
                title: c,
              }));
            var f = new h.Region({ el: this.el });
            f.show(this.checkboxView);
            var g = this.checkboxView.model;
            this.listenTo(
              this.model,
              "change:" + r.isSelectedModelAttributeName,
              function (w, b, C) {
                this.checkboxView.setChecked(b);
              }
            ),
              this.checkboxView.listenTo(
                this.checkboxView,
                "clicked",
                function (w) {
                  w.cancel = !0;
                  var b = g.get("checked");
                  t.triggerMethod("clicked:checkbox", { checked: b });
                }
              );
          },
        },
        {
          columnKey: "_select",
          columnClassName: "csui-table-cell-_select",
          isSelectedModelAttributeName: "csuiIsSelected",
          permanentColumn: !0,
          hasFixedWidth: !0,
        }
      );
      return l.registerByColumnKey(r.columnKey, r), r;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/toggledetails/impl/toggledetails",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <a class="expand-details-row-toggle" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "expandToggleTooltip") ||
                  (e != null ? s(e, "expandToggleTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "expandToggleTooltip",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 46 },
                      end: { line: 2, column: 69 },
                    },
                  })
                : n)
            ) +
            `"
     aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "expandToggleAria") ||
                  (e != null ? s(e, "expandToggleAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "expandToggleAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 17 },
                      end: { line: 3, column: 37 },
                    },
                  })
                : n)
            ) +
            `"
     href="#csui-details-row-` +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 29 },
                      end: { line: 4, column: 35 },
                    },
                  })
                : n)
            ) +
            '" data-binf-toggle="collapse" aria-expanded="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "ariaExpanded") ||
                  (e != null ? s(e, "ariaExpanded") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "ariaExpanded",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 80 },
                      end: { line: 4, column: 96 },
                    },
                  })
                : n)
            ) +
            `"
     aria-controls="csui-details-row-` +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 37 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "ariaExpanded") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 6, column: 4 },
                  end: { line: 10, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </a>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "      " +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: { size: "xsmall", iconName: "csui_caret_up" },
              loc: {
                start: { line: 7, column: 6 },
                end: { line: 7, column: 59 },
              },
            })) != null
              ? t
              : "") +
            `
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "      " +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: { size: "xsmall", iconName: "csui_caret_down" },
              loc: {
                start: { line: 9, column: 6 },
                end: { line: 9, column: 61 },
              },
            })) != null
              ? t
              : "") +
            `
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "hasMetadataRow") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 12, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_toggledetails_impl_toggledetails",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/table/cells/toggledetails/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/toggledetails/impl/nls/root/lang", {
    expandAllTooltip: "Show all",
    expandAllAria: "Show more details of all items",
    collapseAllTooltip: "Show less",
    collapseAllAria: "Show less details of all items",
    showMoreTooltip: "Show more",
    showMoreAria: "Show more details",
    showLessTooltip: "Show less",
    showLessAria: "Show less details",
  }),
  csui.define(
    "css!csui/controls/table/cells/toggledetails/impl/toggledetails",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/toggledetails/toggledetails.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "hbs!csui/controls/table/cells/toggledetails/impl/toggledetails",
      "i18n!csui/controls/table/cells/toggledetails/impl/nls/lang",
      "css!csui/controls/table/cells/toggledetails/impl/toggledetails",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = v.extend(
        {
          template: a,
          triggers: { "click a": "toggle" },
          events: { keydown: "onKeyInView" },
          getValueData: function () {
            return {
              hasMetadataRow: this.model.get("hasMetadataRow"),
              id: this.model.cid,
              ariaExpanded: !!this.options.rowIsExpanded,
              expandToggleTooltip: this.options.rowIsExpanded
                ? h.showLessTooltip
                : h.showMoreTooltip,
              expandToggleAria: this.options.rowIsExpanded
                ? h.showLessAria
                : h.showMoreAria,
            };
          },
          onToggle: function (e) {
            var l = this.$("a").attr("href"),
              u = this.$el
                .parent()
                .parent()
                .find("[id=" + l.replace("#", "") + "]"),
              r = this;
            u.hasClass("binf-collapse") &&
              ((this.options.rowIsExpanded = !1),
              u.hasClass("binf-in")
                ? (u.binf_collapse().one("hidden.binf.collapse", function () {
                    r.trigger("toggle:detailsrow", {
                      model: r.model,
                      detailsRowIsExpanded: r.options.rowIsExpanded,
                    });
                  }),
                  u.binf_collapse("hide"))
                : (u.binf_collapse("show"),
                  (this.options.rowIsExpanded = !0),
                  this.trigger("toggle:detailsrow", {
                    model: this.model,
                    detailsRowIsExpanded: this.options.rowIsExpanded,
                  })),
              this.render(),
              this.$("a")[0].focus());
          },
        },
        {
          hasFixedWidth: !0,
          columnClassName: "csui-table-cell-_toggledetails",
          rowIsExpandedModelAttributeName: "csui-toggledetails-rowIsExpanded",
          widthFactor: 0.3333333333333333,
        }
      );
      return d.registerByColumnKey("_toggledetails", i), i;
    }
  ),
  csui.define("csui/controls/table/cells/size/impl/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define(
    "csui/controls/table/cells/size/impl/nls/root/localized.strings",
    {
      ColumnTitle: "Size",
      containerSize: {
        formatForNone: "{0} Items",
        formatForOne: "{0} Item",
        formatForTwo: "{0} Items",
        formatForFive: "{0} Items",
      },
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/size/impl/size",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/size/size.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "csui/utils/accessibility",
      "i18n!csui/controls/table/cells/size/impl/nls/localized.strings",
      "css!csui/controls/table/cells/size/impl/size",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = i.isAccessibleTable(),
        u = d.extend(
          {
            className: "csui-nowrap",
            needsAriaLabel: !0,
            getValueData: function () {
              var r = this.model,
                t = this.options.column,
                n = t.name,
                s = r.get(n),
                o = r.get("type"),
                c = r.get(n + "_formatted");
              if (s == null || c === "") {
                if (!l) return d.prototype.getValueData.apply(this, arguments);
              } else if (r.get("container"))
                o === 899 || o === 411
                  ? (c = "")
                  : c === void 0 && (c = h.formatMessage(s, e.containerSize)),
                  (s = c);
              else if (
                o === 144 ||
                o === 749 ||
                o === 736 ||
                o === 30309 ||
                o === 5574
              )
                (c = h.formatFriendlyFileSize(s)),
                  (s = h.formatExactFileSize(s));
              else return d.prototype.getValueData.apply(this, arguments);
              return { value: s, formattedValue: c };
            },
            getValueText: function () {
              var r = this.getValueData(),
                t;
              return (
                r && (r.formattedValue === void 0 || r.formattedValue === null)
                  ? (t = r && r.value)
                  : (t = r && r.formattedValue),
                t
              );
            },
            getTooltipValueText: function () {
              var r = this.getValueData(),
                t = (r && r.value) || this.getValueText();
              return t;
            },
            getAriaLabel: function () {
              var r = this.getValueData();
              return (r && r.value) || null;
            },
          },
          {
            columnClassName: "csui-table-cell-size",
            align: "right",
            flexibleWidth: !0,
          }
        );
      return (
        a.registerByColumnKey("size", u),
        a.registerByColumnKey("container_size", u),
        a.registerByColumnKey("file_size", u),
        a.registerByColumnKey("OTObjectSize", u),
        u
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/status/impl/status",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="cellview_warning" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "status_name") ||
                  (e != null ? n(e, "status_name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "status_name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 40 },
                      end: { line: 2, column: 55 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "status_name") ||
                  (e != null ? n(e, "status_name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "status_name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 57 },
                      end: { line: 2, column: 72 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "icon") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 2 },
                  end: { line: 6, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <span title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "status_name") ||
                  (e != null ? s(e, "status_name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status_name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 15 },
                      end: { line: 7, column: 30 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "status_name") ||
                  (e != null ? s(e, "status_name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "status_name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 32 },
                      end: { line: 7, column: 47 },
                    },
                  })
                : n)
            ) +
            `</span>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <span class="csui-icon ' +
            i.escapeExpression(
              ((t =
                (t = n(l, "icon") || (e != null ? n(e, "icon") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 27 },
                      end: { line: 5, column: 35 },
                    },
                  })
                : t)
            ) +
            `"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "status_late") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 8, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_status_impl_status", h), h
      );
    }
  ),
  csui.define("csui/controls/table/cells/status/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/status/impl/nls/root/lang", {
    status_name_206_0: "Pending",
    status_name_206_1: "In Progress",
    status_name_206_2: "Issue",
    status_name_206_3: "On Hold",
    status_name_153_1: "OK",
    status_name_153_2: "Halted",
    status_name_153_3: "Step Late",
    status_name_153_4: "Milestone Late",
    status_name_153_5: "Late",
    status_name_153_6: "Suspended",
    status_name_153_7: "Completed",
    status_name_153_8: "Stopped",
    status_name_153_9: "Archived",
    status_name_153_10: "Subwork Late",
  }),
  csui.define(
    "css!csui/controls/table/cells/status/impl/status",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/status/status.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "hbs!csui/controls/table/cells/status/impl/status",
      "i18n!csui/controls/table/cells/status/impl/nls/lang",
      "css!csui/controls/table/cells/status/impl/status",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = v.extend(
        {
          template: a,
          needsAriaLabel: !0,
          getValueData: function () {
            var e = this._getStatusName(),
              l = this.model.getStatusIcon && this.model.getStatusIcon(),
              u = this.model.get("type"),
              r = this.model.get(this.options.column.name),
              t = !1;
            return (
              u === 153 &&
                (r === 3 || r === 4 || r === 5 || r === 10) &&
                (t = !0),
              { status_name: e, status_late: t, icon: l }
            );
          },
          getValueText: function () {
            return this._getStatusName();
          },
          _getStatusName: function () {
            var e = this.model.get("type"),
              l = this.model.get(this.options.column.name),
              u = h["status_name_" + e + "_" + l],
              r = this.model.get(this.options.column.name + "_name");
            return u || r;
          },
          _getIcon: function () {
            var e = this.model.get(this.options.column.name + "_icon_name"),
              l = e ? "icon-status-" + e : void 0;
            return l;
          },
        },
        { hasFixedWidth: !0, columnClassName: "csui-table-cell-status" }
      );
      return d.registerByColumnKey("status", i), i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <label for="grpSelectId" class='favorite-group-label'>` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "group_label") ||
                  (e != null ? n(e, "group_label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "group_label",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 56 },
                      end: { line: 10, column: 71 },
                    },
                  })
                : t)
            ) +
            `</label>
  <div class='favorite-groups-container'></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div>
<label for="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "name_input_id") ||
                  (e != null ? s(e, "name_input_id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name_input_id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 12 },
                      end: { line: 2, column: 29 },
                    },
                  })
                : n)
            ) +
            `" class='favorite-name-label'>` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "name_label") || (e != null ? s(e, "name_label") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name_label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 59 },
                      end: { line: 2, column: 73 },
                    },
                  })
                : n)
            ) +
            `</label>
<span class="cs-icon-required category_required" aria-hidden="true"></span>
<input id="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "name_input_id") ||
                  (e != null ? s(e, "name_input_id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name_input_id",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 11 },
                      end: { line: 4, column: 28 },
                    },
                  })
                : n)
            ) +
            `" class='favorite-name-input binf-form-control' type='text' placeholder='` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "name_place_holder") ||
                  (e != null ? s(e, "name_place_holder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name_place_holder",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 101 },
                      end: { line: 4, column: 122 },
                    },
                  })
                : n)
            ) +
            "' value='" +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "favorite_name") ||
                  (e != null ? s(e, "favorite_name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "favorite_name",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 131 },
                      end: { line: 4, column: 148 },
                    },
                  })
                : n)
            ) +
            `' aria-required="true">
<div class='favorite-name-input-error-div'>
  <span class='favorite-name-input-error'></span>
</div>

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "groups") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 9, column: 0 },
                  end: { line: 12, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
<div class='favorite-buttons-container'>
  <button title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "add_button_label") ||
                  (e != null ? s(e, "add_button_label") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "add_button_label",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 17 },
                      end: { line: 15, column: 37 },
                    },
                  })
                : n)
            ) +
            `" class='add-btn binf-btn binf-btn-primary binf-btn-default'>` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "add_button_label") ||
                  (e != null ? s(e, "add_button_label") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "add_button_label",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 98 },
                      end: { line: 15, column: 118 },
                    },
                  })
                : n)
            ) +
            `</button>
  <button title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "cancel_button_label") ||
                  (e != null ? s(e, "cancel_button_label") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cancel_button_label",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 17 },
                      end: { line: 16, column: 40 },
                    },
                  })
                : n)
            ) +
            `" class='cancel-btn binf-btn binf-btn-default'>` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "cancel_button_label") ||
                  (e != null ? s(e, "cancel_button_label") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cancel_button_label",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 87 },
                      end: { line: 16, column: 110 },
                    },
                  })
                : n)
            ) +
            `</button>
</div>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites_impl_favorite.star_favorite.add.form",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.group",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<a href="#" tabindex="-1">
  <span class="favorite_group" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 46 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 48 },
                      end: { line: 2, column: 56 },
                    },
                  })
                : t)
            ) +
            `</span>
</a>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites_impl_favorite.star_favorite.add.form.group",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.groups",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<button id="grpSelectId" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"
        data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <span class="selected-group-label"></span>
  <span class="cs-icon icon-caret-down"></span>
</button>
<div class="binf-dropdown-menu favorite-groups-dropdown-container" role="menu">
  <ul class="favorite-groups-dropdown csui-normal-scrolling" role="presentation"></ul>
</div>
`;
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites_impl_favorite.star_favorite.add.form.groups",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/favorites/impl/favorite.star/favorite.add.form.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/behaviors/dropdown.menu/dropdown.menu.behavior",
      "csui/utils/namedsessionstorage",
      "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form",
      "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.group",
      "hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.groups",
      "i18n!csui/widgets/favorites/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      var n = new e(),
        s = "csuiFavoriteTabID",
        o = a.ItemView.extend({
          tagName: "li",
          attributes: function () {
            return { role: "menuitem" };
          },
          template: u,
          triggers: { "click a": "click:item" },
          constructor: function (g) {
            a.ItemView.prototype.constructor.apply(this, arguments);
          },
        }),
        c = a.CompositeView.extend({
          className: "favorite-groups-dropdown-container binf-dropdown",
          template: r,
          behaviors: { DropdownMenuBehavior: { behaviorClass: i } },
          ui: {
            toggle: ">.binf-dropdown-toggle",
            selectedLabel: ">.binf-btn >.selected-group-label",
            groupsScrollbarContainer: ".favorite-groups-dropdown",
          },
          events: { "shown.binf.dropdown": "onShownDropdown" },
          childViewContainer: ".favorite-groups-dropdown",
          childView: o,
          childEvents: {
            "click:item": "onClickItem",
            render: "_onChildRender",
          },
          _onChildRender: function (f) {
            var g = f.$el;
            f.model.get("tab_id") === this.options.favModel.get("tab_id") &&
              g.addClass("binf-active");
          },
          constructor: function (g) {
            a.CompositeView.call(this, g);
          },
          onRender: function () {
            var f = this.options.collection.findWhere({
                tab_id: this.options.favModel.get("tab_id"),
              }),
              g = f.get("name");
            this.ui.selectedLabel.text(g),
              this.ui.selectedLabel.attr("title", g),
              this.ui.toggle.attr(
                "aria-label",
                t.addFavoriteGroupLabel + " - " + g
              ),
              this.ui.toggle.binf_dropdown();
          },
          onClickItem: function (f) {
            this.$el.find("ul li").removeClass("binf-active"),
              f.$el.addClass("binf-active"),
              this.ui.toggle.binf_dropdown("toggle"),
              this.ui.toggle.trigger("focus");
            var g = f.model.get("tab_id");
            this.options.favModel.set("tab_id", g);
            var w = f.model.get("name");
            this.ui.selectedLabel.text(w),
              this.ui.selectedLabel.attr("title", w),
              this.ui.toggle.attr(
                "aria-label",
                t.addFavoriteGroupLabel + " - " + w
              ),
              n.set(s, g);
          },
          _computeDropdownMenuMaxHeight: function () {
            var f = 170,
              g = this.ui.groupsScrollbarContainer[0];
            if (!g.getBoundingClientRect) return f;
            var w = g.getBoundingClientRect();
            return (f = d(window).height() - w.top - 16), f;
          },
          onShownDropdown: function () {
            this.ui.groupsScrollbarContainer.css(
              "max-height",
              this._computeDropdownMenuMaxHeight()
            ),
              this.ui.toggle.attr("aria-expanded", "true");
          },
          closeDropdownMenu: function () {
            this.$el.hasClass("binf-open") &&
              (this.ui.toggle.attr("aria-expanded", "false"),
              this.ui.toggle.binf_dropdown("toggle", !1));
          },
        }),
        m = a.LayoutView.extend({
          template: l,
          templateHelpers: function () {
            return {
              name_label: t.addFavoriteNameLabel,
              name_place_holder: t.addFavoriteNamePlaceHolder,
              name_input_id: v.uniqueId("nameInp"),
              favorite_name: this.options.favModel.get("name"),
              groups: this.showGroups,
              group_label: t.addFavoriteGroupLabel,
              add_button_label: t.addFavoriteAddButtonLabel,
              cancel_button_label: t.addFavoriteCancelButtonLabel,
            };
          },
          regions: { favGroupsRegion: ".favorite-groups-container" },
          triggers: {
            "click .add-btn": "click:add:button",
            "click .cancel-btn": "click:cancel:button",
          },
          ui: {
            nameInput: ".favorite-name-input",
            nameInputError: ".favorite-name-input-error",
            addButton: ".add-btn",
            cancelButton: ".cancel-btn",
          },
          events: {
            "click @ui.nameInput": "onClickNameInput",
            keyup: "onKeyupEvent",
            "keyup @ui.nameInput": "onNameInputEvent",
            "blur @ui.nameInput": "onNameInputEvent",
            "keydown @ui.nameInput": "controlsOnKeydownEvent",
            "keydown @ui.addButton": "controlsOnKeydownEvent",
            "keydown @ui.cancelButton": "cancelButtonOnKeydownEvent",
          },
          constructor: function (g) {
            if (
              (a.LayoutView.call(this, g),
              (this.showGroups = !0),
              this.options.collection.length === 1 &&
                this.options.collection.at(0).get("tab_id") === -1 &&
                (this.showGroups = !1),
              this.showGroups)
            ) {
              this.groupsView = new c(g);
              var w = n.get(s),
                b = this.options.collection.findWhere({ tab_id: w });
              b || ((w = -1), n.set(s, w)),
                w &&
                  this.options.favModel &&
                  this.options.favModel.set("tab_id", w);
            }
            this.propagateEventsToRegions();
          },
          onRender: function () {
            this.showGroups &&
              (this.groupsView.render(),
              this.favGroupsRegion.show(this.groupsView)),
              this.validateNameInputAndSetAddButtonState(!0);
          },
          currentlyFocusedElement: function (f) {
            return this.ui.nameInput;
          },
          showInlineError: function (f) {
            this.ui.nameInputError.attr("title", f),
              this.ui.nameInputError.text(f);
          },
          clearInlineError: function () {
            this.ui.nameInputError.attr("title", ""),
              this.ui.nameInputError.text("");
          },
          validateNameInputAndSetAddButtonState: function (f) {
            var g = !1,
              w = this.ui.nameInput.val();
            return (
              (w = w.trim()),
              w.length < 1
                ? (g = !1)
                : w.length > 248
                ? f !== !0 && this.showInlineError(t.nameErrorMaxLengthExceed)
                : w.indexOf(":") >= 0
                ? f !== !0 && this.showInlineError(t.nameErrorContainSemiColon)
                : (this.clearInlineError(), (g = !0)),
              g
                ? (this.options.favModel.set("name", w),
                  this.ui.addButton.prop("disabled", !1))
                : this.ui.addButton.prop("disabled", !0),
              g
            );
          },
          cancelButtonOnKeydownEvent: function (f) {
            f &&
              f.keyCode === 13 &&
              (f.preventDefault(),
              f.stopPropagation(),
              this.trigger("click:cancel:button"));
          },
          controlsOnKeydownEvent: function (f) {
            f &&
              f.keyCode === 13 &&
              (f.preventDefault(),
              f.stopPropagation(),
              this.validateNameInputAndSetAddButtonState() &&
                this.trigger("click:add:button"));
          },
          onKeyupEvent: function (f) {
            f &&
              f.keyCode === 27 &&
              (f.preventDefault(), this.trigger("click:cancel:button"));
          },
          onNameInputEvent: function (f) {
            if (!(f && f.keyCode === 27))
              var g = this.validateNameInputAndSetAddButtonState();
          },
          onClickNameInput: function (f) {
            f && f.stopPropagation(),
              this.groupsView && this.groupsView.closeDropdownMenu();
          },
        });
      return v.extend(m.prototype, h), m;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites/impl/favorite.star/favorite.star.view",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class='csui-favorite-star-view-container csui-favorite-popover-container'>
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "selected") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 3, column: 4 },
                  end: { line: 16, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `      <button type="button" class="csui-favorite-star selected csui-acc-focusable"
        ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "focusable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.program(5, r, 0),
                loc: {
                  start: { line: 5, column: 8 },
                  end: { line: 5, column: 66 },
                },
              }
            )) != null
              ? t
              : "") +
            `
              title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "removeFav") || (e != null ? s(e, "removeFav") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "removeFav",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 21 },
                      end: { line: 6, column: 34 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "removeFavAria") ||
                  (e != null ? s(e, "removeFavAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "removeFavAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 48 },
                      end: { line: 6, column: 65 },
                    },
                  })
                : n)
            ) +
            `">
        ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                theme: e != null ? s(e, "iconTheme") : e,
                iconName: e != null ? s(e, "iconName") : e,
              },
              loc: {
                start: { line: 7, column: 8 },
                end: { line: 7, column: 69 },
              },
            })) != null
              ? t
              : "") +
            `
      </button>
`
          );
        },
        3: function (i, e, l, u, r) {
          return 'tabindex="0" ';
        },
        5: function (i, e, l, u, r) {
          return 'tabindex="-1"';
        },
        7: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `      <button type="button" class="csui-favorite-star csui-acc-focusable"
        ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "focusable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.program(5, r, 0),
                loc: {
                  start: { line: 11, column: 8 },
                  end: { line: 11, column: 66 },
                },
              }
            )) != null
              ? t
              : "") +
            `
        ` +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "showInFavoritesTable") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 12, column: 8 },
                  end: { line: 12, column: 73 },
                },
              }
            )) != null
              ? t
              : "") +
            `
              title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "addFav") || (e != null ? s(e, "addFav") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "addFav",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 21 },
                      end: { line: 13, column: 31 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "addFavAria") || (e != null ? s(e, "addFavAria") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "addFavAria",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 45 },
                      end: { line: 13, column: 59 },
                    },
                  })
                : n)
            ) +
            `">
        ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                theme: e != null ? s(e, "iconTheme") : e,
                iconName: e != null ? s(e, "iconName") : e,
              },
              loc: {
                start: { line: 14, column: 8 },
                end: { line: 14, column: 69 },
              },
            })) != null
              ? t
              : "") +
            `
      </button>
`
          );
        },
        8: function (i, e, l, u, r) {
          return 'aria-haspopup="dialog"';
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "enabled") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 18, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites_impl_favorite.star_favorite.star.view",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/data/node.picker.extra.data",
    [
      "csui/utils/contexts/perspective/plugins/node/utils/implement.extra.data",
      "csui-ext!csui/dialogs/node.picker/data/node.picker.extra.data",
    ],
    function (v, d) {
      "use strict";
      return v(d);
    }
  ),
  csui.define(
    "css!csui/widgets/favorites/impl/favorite.star/favorite.star.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites/favorite.star.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/models/favorite.model",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/base",
      "i18n",
      "csui/controls/progressblocker/blocker",
      "csui/utils/contexts/factories/favorites2",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/widgets/favorites/impl/favorite.star/favorite.add.form.view",
      "csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin",
      "csui/widgets/favorites/tileview.toolbaritems",
      "csui/utils/commands",
      "hbs!csui/widgets/favorites/impl/favorite.star/favorite.star.view",
      "i18n!csui/widgets/favorites/impl/nls/lang",
      "csui/models/favorite2",
      "csui/dialogs/node.picker/data/node.picker.extra.data",
      "csui/controls/icons.v2",
      "css!csui/widgets/favorites/impl/favorite.star/favorite.star.view",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w, b) {
      "use strict";
      var C = d.defaults({}, v.config() || {}, { addNewFavoriteAtFirst: !1 }),
        k = h.ItemView.extend({
          template: f,
          templateHelpers: function () {
            const y = this.model.get("name");
            return {
              enabled: this.enabled(),
              showInFavoritesTable: this.favTableOptions.isFavoritesTable,
              focusable: this.options.focusable,
              iconName: this._iconName,
              iconTheme: this.options.useIconsForDarkBackground ? "dark" : "",
              addFav: g.addFav,
              addFavAria: d.str.sformat(g.addFavAria, y),
              removeFav: g.removeFav,
              removeFavAria: d.str.sformat(g.removeFavAria, y),
              selected: this.favModel.get("selected"),
            };
          },
          events: {
            keydown: "onKeyInView",
            click: "_onClickView",
            "click button.csui-favorite-star": "_onClickStarButton",
            "click button .icon-socialFav": "_clickRemoveFavoriteStar",
            "click button .icon-socialFavOpen": "_clickAddFavoriteStar",
          },
          modelEvents: { "change:favorite": "onChangeFavorite" },
          constructor: function (S) {
            S || (S = {}),
              d.defaults(S, {
                formPopoverPlacement: "left",
                popoverAtBodyElement: !1,
                focusable: !0,
                favIcon: "csui_action_no_fav32",
                favOnIcon: "csui_action_fav32",
              }),
              (this.favTableOptions = S.favoritesTableOptions || {}),
              h.ItemView.call(this, S),
              S &&
                S.blockingParentView &&
                r.delegate(this, S.blockingParentView);
            var P = m.getSignatures(c);
            this.favGroupsCollection =
              S.context &&
              S.context.getCollection(n, {
                detached: !0,
                permanent: !0,
                favorites: {
                  options: {
                    promotedActionCommands: [],
                    nonPromotedActionCommands: P,
                  },
                },
              });
            var F = t.getLimitedResourceScope();
            this.favGroupsCollection.favorites.setResourceScope(F);
            var D = this.model && this.model.connector,
              L = {};
            this.model &&
              (L = d.extend(this._getModelDataForFavoriteModel(), {
                selected: this.model.get("favorite"),
              })),
              (this.favModel = new i(L, { connector: D })),
              this.listenTo(this.favModel, "change:selected", this.render),
              (this.uniqueViewId = "view" + d.uniqueId()),
              (this.popoverContainerClassname =
                "csui-favorite-popover-container " + this.uniqueViewId),
              (this.popoverContainerSelector =
                ".csui-favorite-popover-container." + this.uniqueViewId),
              a(window).on(
                "resize." + this.uniqueViewId,
                { view: this },
                this._onWindowResize
              );
          },
          onBeforeDestroy: function () {
            this.triggerMethod("close:add:favorite:form"),
              this.closePopover(),
              a(window).off(
                "resize." + this.uniqueViewId,
                this._onWindowResize
              );
          },
          enabled: function () {
            return !!(this.model && this.options.context);
          },
          onBeforeRender: function () {
            var y = this.favModel.get("selected");
            this._iconName = y ? this.options.favOnIcon : this.options.favIcon;
          },
          onRender: function () {
            this._previousFocusElm &&
              a(this._previousFocusElm).hasClass("csui-favorite-star") &&
              (this.$el.find("button.csui-favorite-star").trigger("focus"),
              (this._previousFocusElm = void 0)),
              (this._previousTitle = void 0),
              this.delegateEvents();
          },
          _collectionEnsureFetched: function () {
            var y = this,
              S = a.Deferred();
            return (
              this.blockActions && this.blockActions(),
              this.favGroupsCollection
                .ensureFetched()
                .always(function () {
                  y.unblockActions && y.unblockActions();
                })
                .done(function (P) {
                  S.resolve(P);
                })
                .fail(function (P) {
                  S.reject(P);
                }),
              S.promise()
            );
          },
          _onWindowResize: function (y) {
            if (
              !(l.isTouchBrowser() || l.isAppleMobile()) &&
              y &&
              y.data &&
              y.data.view
            ) {
              var S = y.data.view;
              S.showingForm && S.closePopover();
            }
          },
          _getPopoverParent: function () {
            return this.options.popoverAtBodyElement
              ? a(this.popoverContainerSelector)
              : this.$el;
          },
          _handleClickEvent: function (y) {
            if (!a(y.target).closest(".binf-popover").length) {
              var S;
              if (y && y.data && y.data.view) {
                if (((S = y.data.view), S.commandBlocked)) return;
                a(document).off("mouseup", S._handleClickEvent);
              }
              S &&
                S._getPopoverParent().find(".binf-popover").length > 0 &&
                (S.closePopover(), S._setBlocked());
            }
          },
          _handleScrollEvent: function (y) {
            if (
              !(l.isTouchBrowser() || l.isAppleMobile()) &&
              !a(y.target).closest(".binf-popover").length
            ) {
              var S;
              y &&
                y.data &&
                y.data.view &&
                ((S = y.data.view),
                a(document).off("scroll", S._handleScrollEvent)),
                S && S.closePopover();
            }
          },
          _getModelDataForFavoriteModel: function () {
            var y;
            return (
              this.favTableOptions.isFavoritesTable &&
              this.favTableOptions.selectedGroup
                ? (y = this.favTableOptions.selectedGroup.get("tab_id"))
                : (y = this.model.get("favorite_tab_id") || -1),
              {
                id: this.model.get("id"),
                name: this.model.get("favorite_name") || this.model.get("name"),
                tab_id: y,
              }
            );
          },
          _onClickView: function (y) {
            !this.enabled() ||
              this.$el.find(y.target).length > 0 ||
              this._onClickStarButton(y);
          },
          _onClickStarButton: function (y) {
            var S = this.favModel.get("selected");
            S
              ? this._clickRemoveFavoriteStar(y)
              : this._clickAddFavoriteStar(y);
          },
          _setBlocked: function () {
            (this.commandBlocked = !0),
              setTimeout(
                d.bind(function () {
                  this.commandBlocked = !1;
                }, this),
                500
              );
          },
          _clickAddFavoriteStar: function (y) {
            y && y.preventDefault(),
              !this.commandBlocked &&
                (this._getPopoverParent().find(".binf-popover").length === 0 &&
                  this._setBlocked(),
                this._capturePreviousFocusElement(),
                this.favModel.set(this._getModelDataForFavoriteModel()),
                this.favTableOptions.isFavoritesTable
                  ? (this._addFavoriteToClientSideCollection({
                      listenToEvent: !0,
                    }),
                    this.favGroupsCollection.trigger("bulk:update"))
                  : this._addFavoriteWithForm());
          },
          _clickRemoveFavoriteStar: function (y) {
            y && y.preventDefault(),
              y && y.stopPropagation(),
              !this.commandBlocked &&
                (this._setBlocked(),
                this._capturePreviousFocusElement(),
                this.favModel.set(this._getModelDataForFavoriteModel()),
                this.favTableOptions.isFavoritesTable
                  ? (this._removeFavoriteFromClientSideCollection(!0),
                    this.favGroupsCollection.trigger("bulk:update"))
                  : this._removeFavoriteFromServer());
          },
          _clickAddButton: function () {
            this.commandBlocked ||
              this._addFavoriteToServer().done(
                d.bind(function () {
                  (this._previousTitle = void 0),
                    this.disengageModalKeyboardFocusOnClose(),
                    this.closePopover(),
                    this._restorePreviousFocusAfterClosingPopover();
                }, this)
              );
          },
          _clickCancelButton: function () {
            this.closePopover();
          },
          scrollCheckToClosePopover: function () {
            if (this._elTop) {
              var y = 15,
                S = this.$el.offset().top;
              ((this._elTop && this._elTop < S - y) || this._elTop > S + y) &&
                this.closePopover();
            }
          },
          _capturePreviousFocusElement: function () {
            this._previousFocusElm = document.activeElement;
          },
          _restorePreviousFocusAfterClosingPopover: function () {
            if (this._previousFocusElm) {
              var y = a(this._previousFocusElm);
              y.hasClass("csui-favorite-star")
                ? this.$el.find("button.csui-favorite-star").trigger("focus")
                : y.trigger("focus"),
                (this._previousFocusElm = void 0);
            }
          },
          closePopover: function () {
            if (this._getPopoverParent().find(".binf-popover").length > 0) {
              a(document).off("mouseup", this._handleClickEvent),
                a(document).off("scroll wheel", this._handleScrollEvent),
                this.disengageModalKeyboardFocusOnClose(),
                this.triggerMethod("close:add:favorite:form"),
                (this.showingForm = !1),
                (this.commandBlocked = !1),
                (this._elTop = void 0);
              var y = a(this.$el.find(".csui-favorite-star")[0]);
              y.binf_popover("destroy"),
                this._previousTitle &&
                  (y.attr("title", this._previousTitle),
                  (this._previousTitle = void 0)),
                this._restorePreviousFocusAfterClosingPopover(),
                setTimeout(
                  d.bind(function () {
                    this.addForm && this.addForm.destroy(),
                      (this.addForm = void 0),
                      this.options.popoverAtBodyElement &&
                        a(this.popoverContainerSelector).remove();
                  }, this),
                  500
                );
            }
          },
          _removeFavoriteFromClientSideCollection: function (y) {
            var S = this;
            this._setModelFavorite(!1),
              this.$el.trigger("favorite:change"),
              y === !0 &&
                (this.listenToOnce(
                  this.favGroupsCollection,
                  "bulk:update:succeed",
                  function () {
                    S.stopListening(S.favGroupsCollection, "bulk:update:fail"),
                      S.favModel.set("selected", !1);
                  }
                ),
                this.listenToOnce(
                  this.favGroupsCollection,
                  "bulk:update:fail",
                  function () {
                    S.stopListening(
                      S.favGroupsCollection,
                      "bulk:update:succeed"
                    ),
                      S._setModelFavorite(!0);
                  }
                )),
              this._collectionEnsureFetched().always(function () {
                S.favGroupsCollection.each(function (P) {
                  P.favorites &&
                    P.favorites.remove({ id: S.favModel.get("id") });
                });
              });
          },
          _removeFavoriteFromServer: function () {
            var y = this;
            this.blockActions && this.blockActions(),
              this.favModel
                .removeFromFavorites()
                .always(function (S) {
                  y.unblockActions && y.unblockActions();
                })
                .done(function (S) {
                  y._removeFavoriteFromClientSideCollection();
                })
                .fail(function (S) {
                  y._showErrorMessage(y.favModel, S);
                });
          },
          _addFavoriteWithForm: function () {
            this._getPopoverParent().find(".binf-popover").length > 0 ||
              this._collectionEnsureFetched().always(
                d.bind(function () {
                  this._showAddFavoriteForm();
                }, this)
              );
          },
          _showAddFavoriteForm: function () {
            this.favModel.set(this._getModelDataForFavoriteModel()),
              this.addForm && this.addForm.destroy(),
              (this.addForm = new s({
                context: this.options.context,
                model: this.model,
                favModel: this.favModel,
                collection: this.favGroupsCollection,
              })),
              this.addForm.render(),
              this.listenTo(
                this.addForm,
                "click:add:button",
                this._clickAddButton
              ),
              this.listenTo(
                this.addForm,
                "click:cancel:button",
                this._clickCancelButton
              );
            var y = this.options.formPopoverPlacement,
              S = u && u.settings.rtl,
              P = {
                html: !0,
                content: this.addForm.el,
                trigger: "manual",
                placement: y,
              };
            if (this.options.popoverAtBodyElement) {
              var F = a("body"),
                D = this.$el.closest(".binf-modal-body");
              D && D.length > 0 && (F = a(D[0])),
                F.append(
                  '<div class="binf-widgets ' +
                    this.popoverContainerClassname +
                    '"></div>'
                ),
                (P = d.extend(P, { container: this.popoverContainerSelector }));
            }
            var L = a(this.$el.find(".csui-favorite-star")[0]);
            this._previousTitle = L.attr("title");
            var Q = L.offset().left;
            (window.devicePixelRatio === 2 &&
              a(window).width() - Q < 350 &&
              S) ||
              (Q < 350 && (y = y === "left" ? "right" : "left")),
              (P.placement = y),
              L.binf_popover(P).binf_popover("show");
            var q = this._getPopoverParent().find(".binf-popover");
            this.favGroupsCollection.length > 1 && q.addClass("show-groups");
            var G = parseInt(q.css("top"), 10) + 52;
            q.css("top", G);
            var N = q.find(".binf-arrow");
            if ((N.css("top", 20), this.options.popoverAtBodyElement === !0)) {
              let ge = l.isVisibleInWindowViewportVertically(q);
              this.$el.closest(".binf-modal-content").length &&
                (ge = this._checkAgainstScrollElement()),
                ge !== !0 &&
                  ((G = parseInt(q.css("top"), 10) - q.height() + 45),
                  q.css("top", G),
                  N.css("top", q.height() - 20));
            } else if (this.options.checkVisible) {
              var W = q.closest(".csui-normal-scrolling");
              l.isElementVisibleInParent(q, W, 90, 90) !== !0 &&
                ((G = parseInt(q.css("top"), 10) - q.height() + 45),
                q.css("top", G),
                a(this.$el.find(".binf-arrow")[0]).css("top", q.height() - 23));
            }
            var H = a(this.$el.find(".csui-favorite-star")[0]),
              z = H.offset().top + H.height() / 2,
              Z = N.offset().top + 11,
              te = z - Z;
            q.offset({ top: q.offset().top + te }),
              this.engageModalKeyboardFocusOnOpen(this.addForm.el);
            var le = d.uniqueId("popoverLabelId");
            q.find(">.binf-popover-title").attr("id", le),
              q.attr("role", "dialog"),
              q.attr("aria-labelledby", le),
              L.on(
                "shown.binf.popover",
                d.bind(function (ge) {
                  if (((this._elTop = this.$el.offset().top), this.addForm)) {
                    var Pe = this.addForm.currentlyFocusedElement();
                    Pe.trigger("focus"), Pe.select();
                  }
                  a(document).on(
                    "mouseup",
                    { view: this },
                    this._handleClickEvent
                  ),
                    this.options.popoverAtBodyElement &&
                      a(document).on(
                        "scroll wheel",
                        { view: this },
                        this._handleScrollEvent
                      ),
                    this.triggerMethod("show:add:favorite:form");
                }, this)
              ),
              (this.showingForm = !0);
          },
          _checkAgainstScrollElement: function () {
            let y = this._getPopoverParent().find(".binf-popover"),
              S = this.el;
            if (S === void 0) return !1;
            var P = S instanceof a ? S[0] : S;
            if (!P || !P.getBoundingClientRect) return !1;
            var F = P.getBoundingClientRect();
            let D = this.$el.closest(".binf-modal-body"),
              L =
                F.top >= D[0].offsetTop &&
                F.bottom <= D[0].offsetHeight &&
                y[0].getBoundingClientRect().bottom <
                  D[0].getBoundingClientRect().bottom;
            return F.bottom - D[0].offsetTop < D.height(), L;
          },
          _addFavoriteToClientSideCollection: function ({
            listenToEvent: y,
            newFavModel: S,
          }) {
            var P = this;
            this._setModelFavorite(!0),
              this.$el.trigger("favorite:change", this.favModel),
              y === !0 &&
                (this.listenToOnce(
                  this.favGroupsCollection,
                  "bulk:update:succeed",
                  function () {
                    P.stopListening(P.favGroupsCollection, "bulk:update:fail"),
                      P.favModel.set("selected", !0);
                  }
                ),
                this.listenToOnce(
                  this.favGroupsCollection,
                  "bulk:update:fail",
                  function () {
                    P.stopListening(
                      P.favGroupsCollection,
                      "bulk:update:succeed"
                    ),
                      P._setModelFavorite(!1);
                  }
                )),
              this._collectionEnsureFetched().always(
                d.bind(function () {
                  var F = S.get("tab_id"),
                    D = this.favGroupsCollection.findWhere({ tab_id: F }),
                    L = {};
                  C.addNewFavoriteAtFirst && (L.at = 0),
                    D.favorites.add(S, L),
                    (P.favGroupsCollection.collectionUpdated = !0);
                }, this)
              );
          },
          _addFavoriteToServer: function () {
            var y = a.Deferred(),
              S = this;
            return (
              this.blockActions && this.blockActions(),
              this.favModel
                .addToFavorites()
                .always(function (P) {
                  S.unblockActions && S.unblockActions();
                })
                .done(function (P) {
                  if (P?.results) {
                    let L = new w(
                      { ...S?.favModel?.attributes },
                      { connector: S.model?.connector }
                    );
                    var F = t?.getLimitedResourceScope(),
                      D = Object.keys(b?.getModelFields());
                    for (let Q = 0; Q < D?.length; Q++) {
                      let q = D[Q];
                      !F?.fields?.hasOwnProperty(q) && (F.fields[q] = "");
                    }
                    L?.setResourceScope(F),
                      L.fetch().then(function (Q) {
                        y.resolve(),
                          S?._addFavoriteToClientSideCollection({
                            newFavModel: L,
                          });
                      });
                  } else S?._showErrorMessage(S.favModel);
                })
                .fail(function (P) {
                  y.reject(P), S?._showErrorMessage(S.favModel, P);
                }),
              y.promise()
            );
          },
          _suspendPopoverBehaviors: function () {
            this._getPopoverParent().find(".binf-popover").length > 0 &&
              ((this._focusElementBeforeErrorDialog = document.activeElement),
              a(document).off("mouseup", this._handleClickEvent),
              this.disengageModalKeyboardFocusOnClose());
          },
          _resumePopoverBehaviors: function () {
            this._getPopoverParent().find(".binf-popover").length > 0 &&
              (a(document).on(
                "mouseup",
                { view: this },
                this._handleClickEvent
              ),
              this.addForm &&
                this.engageModalKeyboardFocusOnOpen(this.addForm.el),
              this._focusElementBeforeErrorDialog &&
                a(this._focusElementBeforeErrorDialog).trigger("focus"),
              (this._focusElementBeforeErrorDialog = void 0));
          },
          _showErrorMessage: function (y, S) {
            var P = new l.Error(S),
              F = g.updateFavoriteFailTitle,
              D = d.str.sformat(
                g.updateFavoriteFailMessage,
                y.get("id"),
                P.message
              );
            this._suspendPopoverBehaviors(),
              e.showError(D, F).always(
                d.bind(function () {
                  this._resumePopoverBehaviors();
                }, this)
              );
          },
          toggleFavorite: function () {
            this.model.get("favorite")
              ? this._clickRemoveFavoriteStar()
              : this._clickAddFavoriteStar();
          },
          _setModelFavorite: function (y) {
            this.model.set("favorite", y, { silent: !0 });
          },
          onChangeFavorite: function () {
            this.favModel.set("selected", this.model.get("favorite"));
          },
          onKeyInView: function (y) {
            if (y.keyCode === 32 || y.keyCode === 13) {
              if (this._getPopoverParent().find(".binf-popover").length > 0) {
                y.stopPropagation();
                return;
              }
              y.preventDefault(),
                y.stopPropagation(),
                this.enabled() && this.toggleFavorite();
            }
          },
        });
      return o.mixin(k.prototype), k;
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/favorite/impl/favorite",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/favorite/favorite.view",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/cell/cell.view",
      "csui/controls/table/cells/cell.registry",
      "csui/widgets/favorites/favorite.star.view",
      "csui/utils/high.contrast/detector!",
      "css!csui/controls/table/cells/favorite/impl/favorite",
    ],
    function (v, d, a, h, i) {
      var e = d.extend(
        {
          constructor: function (u) {
            d.prototype.constructor.apply(this, arguments);
          },
          onBeforeDestroy: function () {
            this.triggerMethod("close:add:favorite:form"),
              this.favStarView &&
                (this.favStarView.destroy(), (this.favStarView = void 0));
          },
          renderValue: function () {
            this.favStarView ||
              (this.favStarView = new h(
                v.extend(
                  {
                    checkVisible: !0,
                    popoverAtBodyElement: !0,
                    focusable: !1,
                    blockingParentView: this.options.tableView,
                    useIconsForDarkBackground: i === 1,
                  },
                  this.options
                )
              )),
              this.listenTo(
                this.favStarView,
                "show:add:favorite:form",
                function () {
                  this.triggerMethod("show:add:favorite:form");
                }
              ),
              this.listenTo(
                this.favStarView,
                "close:add:favorite:form",
                function () {
                  this.triggerMethod("close:add:favorite:form");
                }
              ),
              this.favStarView.render(),
              this.$el.append(this.favStarView.el),
              this.listenTo(this.options.tableView, "scroll", function () {
                this.favStarView && this.favStarView.closePopover();
              });
          },
        },
        { hasFixedWidth: !0, columnClassName: "csui-table-cell-favorite" }
      );
      return a.registerByColumnKey("favorite", e), e;
    }
  ),
  csui.define(
    "csui/controls/table/cells/favorite/favorite.name.view",
    [
      "csui/controls/table/cells/name/name.view",
      "csui/controls/table/cells/cell.registry",
    ],
    function (v, d) {
      var a = v.extend({});
      return d.registerByColumnKey("favorite_name", a), a;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/type.icon/impl/type.icon",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inactive") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(4, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 7, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          return `    <div class="csui-table-cell-no-default-action"></div>
`;
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <a class="csui-table-cell-default-action" href="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 52 },
                      end: { line: 5, column: 72 },
                    },
                  })
                : t)
            ) +
            `"
       aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameAndTypeAria") ||
                  (e != null ? n(e, "nameAndTypeAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameAndTypeAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 19 },
                      end: { line: 6, column: 38 },
                    },
                  })
                : t)
            ) +
            `"></a>
`
          );
        },
        6: function (i, e, l, u, r) {
          return `  <div class="csui-table-cell-no-default-action"></div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "defaultAction") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(6, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 10, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_type.icon_impl_type.icon",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/type.icon/impl/type.icon",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/type.icon/type.icon.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/node.links/node.links",
      "hbs!csui/controls/table/cells/type.icon/impl/type.icon",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/controls/icons.v2",
      "css!csui/controls/table/cells/type.icon/impl/type.icon",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = a.extend(
        {
          events: { keydown: "onKeyInView" },
          template: l,
          constructor: function (s) {
            a.prototype.constructor.apply(this, arguments),
              (this.needsAriaLabel = !this.options.column.defaultAction),
              this.listenTo(this, "render", this._createNodeTypeIcon)
                .listenTo(this, "before:render", this._destroyNodeTypeIcon)
                .listenTo(this, "before:destroy", this._destroyNodeTypeIcon);
          },
          getValueData: function () {
            var n = this.model,
              s = e.getUrl(this.model),
              o = v.str.sformat(
                u.nameAndTypeAria,
                n.get("type_name"),
                n.get("name")
              );
            return {
              defaultAction: this.options.column.defaultAction,
              defaultActionUrl: s,
              nameAndTypeAria: o,
              inactive: n.get("inactive"),
            };
          },
          _createNodeTypeIcon: function () {
            var n = new h({ node: this.model });
            (this.cellRegion = new d.Region({ el: this.$("> *") })),
              this.cellRegion.show(n);
          },
          _destroyNodeTypeIcon: function () {
            this.cellRegion &&
              (this.cellRegion.empty(), (this.cellRegion = null));
          },
          getValueText: function () {
            return this.model.get("type_name") || "";
          },
        },
        {
          noTitleInHeader: !0,
          columnClassName: "csui-table-cell-type",
          hasFixedWidth: !0,
          align: "center",
        }
      );
      return (
        i.registerByColumnKey("type", t),
        i.registerByColumnKey("OTMIMEType", t),
        t
      );
    }
  ),
  csui.define("csui/dialogs/members.picker/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/dialogs/members.picker/impl/nls/root/lang", {
    ViewDenied: 'Access denied, you do not have permission to view "{0}".',
    cancelButtonLabel: "Cancel",
    dialogTitle: "View group membership",
    serverError: "Server request failed with error code {0}.",
    backButtonTooltip: "Go back",
    missingConnector: "Missing connector information!",
    emptyMembersText: "No results found.",
    UserPickerPlaceHolder: "Enter user or group",
    addButtonLabel: "Add",
    selectPermissionLevel: "Select permission level",
    nextButtonLabel: "Next",
    doneButtonLabel: "Done",
    groupSymbolAlt: "Group symbol",
    userSymbolAlt: "User symbol",
    disabledItemTypeNameAria: "Disabled: {0}: {1}",
    itemTypeNameAria: "{0}: {1}",
    AddUserOrGroup: "Add user or group",
    AddMember: "Add member",
    userSearchPlaceHolder: "Search for user",
    addAnotherNamePlaceHolder: "Add another user or group",
    removeSelectedUser: "Remove member",
    removeSelectedUserAria: "Remove {0} from selection list",
    additionSingleUserText: "{0} added to the {1} group.",
    additionSingleUserFailureText: "{0} failed to add to the {1} group.",
    additionSinglePassMoreThanOneFail:
      "{0} added to the {1} group and {2} members failed to added to the group.",
    additionOnlyFailUsersText: "{0} members failed to add to the {1} group",
    additionOnlyAllSuccessText:
      "{0} members Successfully added to the {1} group",
    additionOnlyAllFailureText: "{0} members failed to add to the {1} group",
    additionManyUserText:
      "{0} members Successfully added, {1} members failed to add to the {2} group .",
    removalSingleUserText: "{0} removed from the {1} group.",
    removalSingleUserFailureText: "{0} failed to remove from the {1} group.",
    removalSinglePassMoreThanOneFail:
      "{0} removed from the {1} group and {2} members failed to remove from the group.",
    removalOnlyFailUsersText: "{0} members failed to remove from the {1} group",
    removalOnlyAllSuccessText:
      "{0} members Successfully removed from the {1} group",
    removalOnlyAllFailureText:
      "{0} members failed to remove from the {1} group",
    removalManyUserText:
      "{0} members Successfully removed, {1} members failed to remove from the {2} group .",
    searchIconTitle: "Open user or group search box",
    searchIconAria: "Click or press enter to open user or group search box",
    openSearchBar: "Open search bar",
    closeSearchBar: "Close search bar",
  }),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/member.list/list.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "";
        },
        3: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `  <span class="csui-item-standard csui-list-group-item" role="list">
    <div class="user-profile-row">
      <div class="user-profile-img  binf-pull-left">
        <span class="csui-icon csui-start-icon ` +
            i.escapeExpression(
              ((n =
                (n = s(l, "selected") || (e != null ? s(e, "selected") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selected",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 47 },
                      end: { line: 6, column: 59 },
                    },
                  })
                : n)
            ) +
            `"></span>

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.program(6, r, 0),
                loc: {
                  start: { line: 8, column: 8 },
                  end: { line: 21, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>

      <div class="user-profile-info  binf-pull-left">
        <div class="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 25, column: 20 },
                  end: { line: 25, column: 59 },
                },
              }
            )) != null
              ? t
              : "") +
            '"><span title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 74 },
                      end: { line: 25, column: 82 },
                    },
                  })
                : n)
            ) +
            `"
                                                                   class="binf-pull-left csui-list-item-title">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 111 },
                      end: { line: 26, column: 119 },
                    },
                  })
                : n)
            ) +
            `</span></div>
` +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isGroup") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(10, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 27, column: 8 },
                  end: { line: 30, column: 19 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>

      <div class="csui-list-inlineactions-btn"></div>
    </div>
  </span>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `          <span
              class="csui-user-default-picture-dlg csui-icon image_group_placeholder_permission"></span>
        <span><img src="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "imgSrc") || (e != null ? n(e, "imgSrc") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 24 },
                      end: { line: 11, column: 34 },
                    },
                  })
                : t)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "imgAlt") || (e != null ? n(e, "imgAlt") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 41 },
                      end: { line: 11, column: 51 },
                    },
                  })
                : t)
            ) +
            `"
                   class="binf-hidden csui-user-profile-picture-dlg csui-member-group-icon csui-icon" /></span>
        <span class="csui-icon csui-end-icon icon-sidebar-expand24 binf-hidden"></span>
`
          );
        },
        6: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `
          <span
              class="csui-user-default-picture-dlg csui-icon image_user_placeholder">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "initials") || (e != null ? n(e, "initials") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "initials",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 85 },
                      end: { line: 17, column: 97 },
                    },
                  })
                : t)
            ) +
            `</span>
        <span><img src="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "imgSrc") || (e != null ? n(e, "imgSrc") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 24 },
                      end: { line: 18, column: 34 },
                    },
                  })
                : t)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "imgAlt") || (e != null ? n(e, "imgAlt") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 41 },
                      end: { line: 18, column: 51 },
                    },
                  })
                : t)
            ) +
            `"
                   class="binf-hidden csui-user-profile-picture-dlg csui-member-group-icon csui-icon" /></span>

`
          );
        },
        8: function (i, e, l, u, r) {
          return " user-group-name ";
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `          <div><span class="binf-pull-left csui-list-item-department"
                     title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "department") || (e != null ? n(e, "department") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "department",
                    hash: {},
                    loc: {
                      start: { line: 29, column: 28 },
                      end: { line: 29, column: 42 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "department") || (e != null ? n(e, "department") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "department",
                    hash: {},
                    loc: {
                      start: { line: 29, column: 44 },
                      end: { line: 29, column: 58 },
                    },
                  })
                : t)
            ) +
            `</span></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "totalcount") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 36, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_member.list_list.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/node.picker/impl/search.list/search.location.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<span class="csui-type-location-icon" aria-hidden="true"></span><span title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 77 },
                      end: { line: 1, column: 85 },
                    },
                  })
                : t)
            ) +
            `"
                                                                      class="csui-list-item-title">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 99 },
                      end: { line: 2, column: 107 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_node.picker_impl_search.list_search.location.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/members.picker/impl/members.picker",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/member.list/list.item.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/controls/listitem/listitemstandard.view",
      "csui/utils/url",
      "csui/utils/user.avatar.color",
      "csui/utils/commonconfig.util",
      "hbs!csui/dialogs/members.picker/impl/member.list/list.item",
      "hbs!csui/dialogs/node.picker/impl/search.list/search.location.item",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "css!csui/dialogs/members.picker/impl/members.picker",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      var n = d.extend(
          { enableRemoveMember: l.enableFeatureInSmartView() || !1 },
          v.config()
        ),
        s = h.extend({
          template: u,
          searchLocationTemplate: r,
          templateHelpers: function () {
            return {
              defaultProfilePictureClass: this._isGroup()
                ? "image_group_placeholder_permission"
                : "image_user_placeholder",
              imgAlt: this._isGroup() ? t.groupSymbolAlt : t.userSymbolAlt,
              department:
                this.options.model.get("group_id_expand") &&
                this.options.model.get("group_id_expand").name,
              totalcount: !this.options.model.collection.totalCount,
              isGroup: !!this._isGroup(),
              name: this.options.model.get("name_formatted"),
              selected: this.selected ? "icon-listview-checkmark" : "",
              imgSrc:
                "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
            };
          },
          tagName: "li",
          ui: { link: ".csui-list-group-item" },
          _isUser: function () {
            return this.options.model.get("type") === 0;
          },
          _isGroup: function () {
            return this.options.model.get("type") === 1;
          },
          _isInActiveUser: function () {
            return this.options.model.get("type") < 0;
          },
          constructor: function (c) {
            h.apply(this, arguments), (this.browsed = !1);
          },
          toggleSelect: function () {
            (this.selected = !this.selected), this.isDestroyed || this.render();
          },
          toggleBrowse: function () {
            (this.browsed = !this.browsed), this.render();
          },
          assignedBrowseNSelect: function () {
            (this.browsed = this.selected = !0), this.render();
          },
          unassignBrowseNSelect: function () {
            this.isDestroyed ||
              ((this.browsed = this.selected = !1), this.render());
          },
          isSelected: function () {
            return this.selected;
          },
          isBrowsed: function () {
            return this.browsed;
          },
          setValidity: function (o) {
            this.valid = o;
          },
          onRender: function () {
            this.$el.addClass("cs-left-item-" + this.model.get("id")),
              this.$el.removeClass("select"),
              this.$el.removeClass("browse"),
              this.ui.link.removeAttr("aria-selected"),
              this.$el.attr("role", "option");
            var o = d.str.sformat(
              t.itemTypeNameAria,
              this.model.get("type_name"),
              this.model.get("name")
            );
            this.valid ||
              (o = d.str.sformat(
                t.disabledItemTypeNameAria,
                this.model.get("type_name"),
                this.model.get("name")
              )),
              this.$el.attr("aria-label", o),
              this.$el.attr("tabindex", 0),
              this.selected
                ? (this._isGroup() &&
                    this.$el.find("span").removeClass("binf-hidden"),
                  this.$el.addClass("select"),
                  this.$el.attr("aria-selected", "true"))
                : this.browsed &&
                  (this.$el.addClass("browse"),
                  (this.showInlineActionBar && n.enableRemoveMember) ||
                    this.$el
                      .find("span.csui-end-icon")
                      .removeClass("binf-hidden")),
              this._isBrowsable(this.model) &&
                (this.ui.link.attr("aria-haspopup", "true"),
                this.ui.link.attr("aria-expanded", "false")),
              this._renderPhoto();
          },
          _renderPhoto: function () {
            var o = this.model.get("photo_url"),
              c = e.getUserAvatarColor(
                this.options.model.attributes.data.properties
              );
            if (
              (this.$el
                .find(".csui-user-default-picture-dlg.image_user_placeholder")
                .css("background-color", c),
              !(this._isGroup() || o === null))
            ) {
              var m = this;
              this._resolvePhoto(o)
                .done(
                  d.bind(function (f) {
                    var g = m.$el.find(".csui-user-profile-picture-dlg");
                    m.$el
                      .find(".csui-user-default-picture-dlg")
                      .addClass("binf-hidden"),
                      (m.url = URL.createObjectURL(f)),
                      g.removeClass("binf-hidden").attr("src", m.url);
                  })
                )
                .fail(function () {
                  var f = m.$el.find(".csui-user-profile-picture-dlg");
                  f.attr(
                    "src",
                    "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="
                  );
                });
            }
          },
          _resolvePhoto: function (o) {
            var c = this.options.model.connector,
              m = c.connection,
              f = new i(m.url).getCgiScript(),
              g = a.Deferred(),
              w = i.combine(f, o),
              b = { url: w, dataType: "binary", connection: m };
            return (
              c
                .makeAjaxCall(b)
                .done(function (C, k, y) {
                  y.status === 200 ? g.resolve(C) : g.reject();
                })
                .fail(g.reject),
              g.promise()
            );
          },
          _isBrowsable: function (o) {
            return o.get("container") && o.get("perm_see_contents") !== !1;
          },
        });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/member.list/member.list",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="list-content csui-normal-scrolling">
  <ul class="binf-list-group" role="listbox"></ul>
  <div class="binf-search-location-group"></div>
</div>`;
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_member.list_member.list",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/member.list/empty.members.list",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "<p class='csui-members-empty'> " +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "emptyTableText") ||
                  (e != null ? n(e, "emptyTableText") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "emptyTableText",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 31 },
                      end: { line: 1, column: 49 },
                    },
                  })
                : t)
            ) +
            ` </p>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_member.list_empty.members.list",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/member.list/toolbaritems",
    [
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/dialogs/members.picker/impl/member.list/toolbaritems",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = { inlineActionbar: new d({ main: [] }) };
      h && e(h);
      function e(l) {
        v.each(l, function (u) {
          v.each(u, function (r, t) {
            var n = i[t];
            if (!n) throw new Error("Invalid target toolbar: " + t);
            v.each(r, function (s) {
              (s = new a(s)), n.addItem(s);
            });
          });
        });
      }
      return i;
    }
  ),
  csui.define(
    "css!csui/dialogs/members.picker/impl/member.list/member.list",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/member.list/member.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/dialogs/members.picker/impl/member.list/list.item.view",
      "csui/controls/progressblocker/blocker",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/dialogs/members.picker/impl/member.list/member.list",
      "hbs!csui/dialogs/members.picker/impl/member.list/empty.members.list",
      "csui/dialogs/members.picker/impl/member.list/toolbaritems",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "css!csui/dialogs/members.picker/impl/member.list/member.list",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = a.CompositeView.extend({
        className: "cs-list",
        template: l,
        childViewContainer: ".binf-list-group",
        childView: h,
        childViewOptions: function () {
          return {
            locationEle: this.ui.location,
            toolbarData: {
              toolbaritems: this.tileViewToolbarItems,
              collection: this.collection,
            },
            context: this.context,
            isMemberListItem: !0,
          };
        },
        childEvents: {
          "click:item": "onItemClick",
          "before:add:child": "onBeforeAddChild",
        },
        ui: {
          listParent: ".list-content",
          list: ".binf-list-group",
          location: ".binf-search-location-group",
        },
        events: { keydown: "onKeyInView" },
        onBeforeAddChild: function (s) {
          var o = this.commandType.validateTarget(s.model);
          s.setValidity(o);
        },
        onAddChild: function (s) {
          var o = s.model.get("id");
          if (
            (this.selectedItem &&
              this.selectedItem.model.get("id") === o &&
              ((this.selectedItem = s), this.toggleSelectedChild(s)),
            this.commandType.validateMember(s.model)
              ? s.$el.addClass("csui-acc-focusable")
              : s.$el.hide(),
            !this.commandType.isSelectable(s.model) &&
              !this._isBrowsable(s.model))
          ) {
            s.$el.addClass("csui-disabled");
            var c = v.str.sformat(
              t.disabledItemTypeNameAria,
              s.model.get("type_name"),
              s.model.get("name")
            );
            s.$el.attr("aria-label", c);
          }
          return (
            this._isBrowsable(s.model)
              ? (s.ui.link.attr("aria-haspopup", "true"),
                s.ui.link.attr("aria-expanded", "false"))
              : (s.ui.link.removeAttr("aria-haspopup"),
                s.ui.link.removeAttr("aria-expanded")),
            this.browsedChild &&
              this.browsedChild.model.get("id") === o &&
              ((this.browsedChild = s), this.toggleBrowsedChild(s)),
            !0
          );
        },
        collectionEvents: { sync: "syncUpdate", reset: "rebuild" },
        behaviors: { TabableRegion: { behaviorClass: e } },
        isTabable: function () {
          return this.children.find(function (s) {
            var o = s.$el;
            return o.is(":visible") && !o.is(":disabled");
          });
        },
        currentlyFocusedElement: function () {
          var s = this.$el.find(".binf-list-group-item.csui-acc-focusable");
          return s.length ? d(s[this.focusIndex]) : d();
        },
        setFocus: function () {
          var s = this.$el.find(".binf-list-group-item.csui-acc-focusable");
          d(s[this.focusIndex]).trigger("focus");
        },
        onKeyInView: function (s) {
          var o = s.keyCode,
            c = this.$el.find(".binf-list-group-item.csui-acc-focusable");
          switch (o) {
            case 38:
            case 40:
              o === 38
                ? this.focusIndex > 0 && --this.focusIndex
                : this.focusIndex < c.length && ++this.focusIndex,
                this.trigger("changed:focus"),
                d(c[this.focusIndex]).trigger("focus");
              break;
          }
        },
        constructor: function (o) {
          o || (o = {}),
            v.defaults(o, { pageSize: 30 }),
            a.CompositeView.prototype.constructor.apply(this, arguments),
            (this.jQuery = d),
            i.imbue(this),
            (this.tileViewToolbarItems = r),
            (this.context = o.context),
            (this.container = o.container),
            (this.groupId = o.groupId),
            (this.authUser = o.authUser),
            (this.selectedGroup = o.selectedGroup),
            (this.node = o.node),
            (this.edit_permission = o.edit_permission),
            (this.selectedItem = o.selection ? o.selection : null),
            (this.blockScroll = !0),
            (this.notFetching = !0),
            (this.init = !0),
            (this.nextCollectionPage = v.bind(
              this.addNextCollectionPage,
              this
            )),
            (this.removedItemCollection = []),
            (this.commandType = o.commandType),
            (this.focusIndex = 0),
            this.collection?.on("remove", this._checkOpenGroups, this),
            this.collection?.on("remove", this._enableApplyMethod, this),
            this.listenTo(this.collection, "remove", function () {
              this.collection.length === 0 && this.setEmptyMemberTemplate();
            }),
            this.listenTo(this.collection, "sync", function () {
              this.ui.listParent.find("p.csui-members-empty").remove(),
                this.collection.length === 0
                  ? this.setEmptyMemberTemplate()
                  : this.ui.listParent.removeClass("csui-members-empty");
            }),
            this.listenTo(this.collection, "request", this.setBlocker),
            this.listenTo(this.collection, "reset", this.setBlocker),
            this.listenTo(this, "browse:complete", function () {
              this.notFetching = !0;
            });
        },
        setEmptyMemberTemplate: function () {
          this.ui.listParent.addClass("csui-members-empty");
          var s = u.call(this, { emptyTableText: t.emptyMembersText });
          this.ui.listParent.append(s);
        },
        syncUpdate: function () {
          (this.nextTriggerSetting = this.options.pageSize / 2),
            (this.blockScroll = !0),
            (this.notFetching = !0),
            (this.init = !0),
            this.browsedChild &&
              !this.collection.findWhere({
                id: this.browsedChild.model.get("id"),
              }) &&
              (this.browsedChild = void 0),
            this.unblockActions(),
            this.currentlyFocusedElement().attr("tabindex", -1);
        },
        rebuild: function () {
          this.ui.listParent.find("p.csui-members-empty").remove(),
            this.collection.length === 0
              ? this.setEmptyMemberTemplate()
              : this.ui.listParent.removeClass("csui-members-empty"),
            this.reset(),
            this.trigger("dom:refresh");
        },
        reset: function () {
          this.init = !0;
        },
        stopBlocker: function () {
          return this.unblockActions(), !0;
        },
        setBlocker: function () {
          return (
            this.blockScroll && ((this.blockScroll = !1), this.blockActions()),
            !0
          );
        },
        addNextCollectionPage: function () {
          var s = this.collection.length,
            o = this.ui.list.height() - this.ui.listParent.height(),
            c = this.ui.listParent.scrollTop() / o,
            m = (s - this.nextTriggerSetting) / s;
          s &&
            s + this.context?.memberListView?.removedItems?.length <
              this.collection?.totalCount &&
            c >= m &&
            (this.notFetching &&
              ((this.notFetching = !1),
              this.collection.setSkip(
                s + this.context?.memberListView?.removedItems?.length,
                !1
              ),
              this.collection.fetch({ reset: !1, remove: !1, merge: !1 })),
            c > 0.98 && this.init && (this.setBlocker(), (this.init = !1)));
        },
        onDomRefresh: function () {
          this.scrollBar ||
            ((this.scrollBar = this.ui.listParent),
            this.scrollBar.on("scroll", this.nextCollectionPage));
        },
        onItemClick: function (s) {
          s.$el.hasClass("csui-disabled") ||
            ((this.focusIndex = s._index ?? this.focusIndex),
            this._processClickedItem(s));
        },
        _processClickedItem: function (s) {
          if (this.notFetching) {
            this.notFetching = !1;
            var o = this._isBrowsable(s.model);
            o ? this._browseSelection(s) : this._targetSelection(s),
              s.$el.trigger("blur");
          }
          return this.$el.trigger("setCurrentTabFocus"), !0;
        },
        clearSelect: function () {
          var s = this;
          return (
            this.selectedItem && s.toggleSelectedChild(this.selectedItem),
            (this.selectedItem = null),
            !0
          );
        },
        toggleSelectedChild: function (s) {
          this.commandType.isSelectable(s.model) && s.toggleSelect();
        },
        toggleBrowsedChild: function (s) {
          s && s.toggleBrowse();
        },
        _isBrowsable: function (s) {
          return s.get("type") === 1;
        },
        _targetSelection: function (s) {
          var o = s.model,
            c = o.get("id"),
            m = s.isSelected(),
            f = o.get("type");
          this.clearSelect(),
            m || ((this.selectedItem = s), this.toggleSelectedChild(s)),
            this.trigger("selection:change", { type: f, member: o, add: !m }),
            (this.notFetching = !0);
        },
        _browseSelection: function (s) {
          var o = this.commandType.isSelectableType(s.model),
            c = this.commandType.isSelectable(s.model),
            m = this.commandType.browseAllowed(s.model),
            f = s.isBrowsed(),
            g = !1,
            w = s.model.attributes.type;
          f
            ? (c && this._targetSelection(s), (this.notFetching = !0))
            : (c
                ? (this._browseNSelect(s), (g = !0))
                : ((m || o) && (this.clearSelect(), (g = !0)),
                  this.toggleBrowsedChild(s)),
              m &&
                this.trigger("selection:change", {
                  member: s.model,
                  silent: !1,
                  add: g,
                  type: w,
                }),
              this._browse(s, g));
        },
        _enableApplyMethod: function () {
          this.trigger("enable:apply");
        },
        _checkOpenGroups: function (s, o) {
          if (this._isBrowsable(s)) {
            const c = s.get("name"),
              m = this.$el.find("li.browse");
            m.length > 0 &&
              m.find('span[title="' + c + '"]').length > 0 &&
              this.trigger("remove:expanded:panel");
          }
        },
        _browse: function (s, o) {
          this.browsedChild && this.browsedChild.toggleBrowse(),
            (this.browsedChild = s),
            s.ui.link.attr("aria-expanded", "true"),
            this.trigger("browse:select", { member: s.model, add: o });
        },
        _browseNSelect: function (s) {
          this.clearSelect(),
            (this.selectedItem = s),
            s.assignedBrowseNSelect();
        },
      });
      return n;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/select.view/impl/header/header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-search-item-left-panel">
    <div class="csui-search-item-type">
      <span class="csui-type-label"> ` +
            i.escapeExpression(
              ((t =
                (t = n(l, "type") || (e != null ? n(e, "type") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "type",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 37 },
                      end: { line: 4, column: 45 },
                    },
                  })
                : t)
            ) +
            ` </span>
    </div>
    <div class="csui-search-item">
      <div class="csui-search-item-name">
        ` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 8 },
                      end: { line: 8, column: 16 },
                    },
                  })
                : t)
            ) +
            `
      </div>
    </div>
  </div>
  <div class="csui-search-item-right-panel">
    <div class="csui-search-item-location">
      <div class="csui-search-toolbar-container">
        ` +
            i.escapeExpression(
              ((t =
                (t = n(l, "location") || (e != null ? n(e, "location") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "location",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 8 },
                      end: { line: 15, column: 20 },
                    },
                  })
                : t)
            ) +
            `
      </div>
    </div>
  </div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `  <div class="csui-targetbrowse-history">
      <span class="csui-targetbrowse-arrow-back">
        <span class="icon arrow_back cs-go-back" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "backButtonTooltip") ||
                  (e != null ? s(e, "backButtonTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "backButtonTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 56 },
                      end: { line: 22, column: 77 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0"
              aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "backButtonAria") ||
                  (e != null ? s(e, "backButtonAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "backButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 26 },
                      end: { line: 23, column: 44 },
                    },
                  })
                : n)
            ) +
            `" data-cstabindex="-1" role="link"></span>
      </span>
  </div>
  <div class="csui-folder-name">
    <span class="folder-name" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 37 },
                      end: { line: 27, column: 46 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 48 },
                      end: { line: 27, column: 57 },
                    },
                  })
                : n)
            ) +
            `</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "allMembers") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 28, column: 4 },
                  end: { line: 32, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>

  <form class="cs-modal-filter">
    <div class="binf-form-group">
      <span class="icon-search-placeholder">` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: { iconName: "csui_action_search32" },
              loc: {
                start: { line: 37, column: 44 },
                end: { line: 37, column: 89 },
              },
            })) != null
              ? t
              : "") +
            `</span>
      <input class="binf-form-control cs-filter-input" placeholder="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_placeholder") ||
                  (e != null ? s(e, "search_placeholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_placeholder",
                    hash: {},
                    loc: {
                      start: { line: 38, column: 68 },
                      end: { line: 38, column: 90 },
                    },
                  })
                : n)
            ) +
            `"
             tabindex="0" data-cstabindex="-1" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_aria") ||
                  (e != null ? s(e, "search_aria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_aria",
                    hash: {},
                    loc: {
                      start: { line: 39, column: 59 },
                      end: { line: 39, column: 74 },
                    },
                  })
                : n)
            ) +
            `">
      <span class="binf-form-control-feedback cs-icon icon-formfield-clear" role="button"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "clearSearchButtonAria") ||
                  (e != null ? s(e, "clearSearchButtonAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "clearSearchButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 24 },
                      end: { line: 41, column: 49 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0" data-cstabindex="-1"></span>
      <button class="binf-btn csui-form-control-search" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "collapseSearch") ||
                  (e != null ? s(e, "collapseSearch") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "collapseSearch",
                    hash: {},
                    loc: {
                      start: { line: 42, column: 63 },
                      end: { line: 42, column: 81 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "collapseSearch") ||
                  (e != null ? s(e, "collapseSearch") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "collapseSearch",
                    hash: {},
                    loc: {
                      start: { line: 42, column: 95 },
                      end: { line: 42, column: 113 },
                    },
                  })
                : n)
            ) +
            `" aria-expanded="true" aria-haspopup="true"
              tabindex="0" data-cstabindex="-1">
      <span class="form-control-search cs-icon icon-sv-search-hide"></span>
      </button>
    </div>
  </form>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <span class="cs-icon icon-sv-search csui-acc-focusable" tabindex="0" data-cstabindex="-1"
            role="button" aria-expanded="false" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "openSearchBar") ||
                  (e != null ? n(e, "openSearchBar") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "openSearchBar",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 55 },
                      end: { line: 30, column: 72 },
                    },
                  })
                : t)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "searchInButtonAria") ||
                  (e != null ? n(e, "searchInButtonAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "searchInButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 24 },
                      end: { line: 31, column: 46 },
                    },
                  })
                : t)
            ) +
            `"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "searchView") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 48, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_select.view_impl_header_header",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/dialogs/node.picker/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/dialogs/node.picker/impl/nls/root/lang", {
    noSearchResultMessage: "No results found",
    PermissionDenied: "Permission denied",
    ViewDenied: 'Access denied, you do not have permission to view "{0}".',
    InsufficientContent: "Insufficient content to open the browse dialog",
    selectButtonLabel: "Select",
    cancelButtonLabel: "Cancel",
    copyButtonLabel: "Copy",
    moveButtonLabel: "Move",
    clearSearchButtonAria: "Clear Search",
    collapseSearch: "Clear and collapse search",
    saveFilterButtonLabel: "Save",
    placeHolderName: "Enter name",
    itemTypeNameAria: "{0}: {1}",
    selectNBrowseAria: "{0}: {1}, Press Space to select and drill down",
    selectAria: "{0}: {1}, Press Space to select",
    browseAria: "{0}: {1}, Press Enter to drill down",
    disabledItemTypeNameAria: "Disabled: {0}: {1}",
    dialogTitle: "Select an object",
    dialogTitleForContainers: "Select a Container",
    dialogTitleForDocuments: "Select a Document",
    dialogTitleForCategories: "Select a Category",
    breadcrumbAria: "Breadcrumb in Dialog",
    serverError: "Server request failed with error code {0}.",
    backButtonTooltip: "Go back",
    backToFolderView: "Go back to Folder View",
    backToSearchAria: "Go back to Search View",
    Type: "Type",
    Name: "Name",
    Location: "Location",
    searchResults: "Search results",
    searchFoundAbout: "Showing {0} items",
    searchFoundZero: "No items",
    nameCannotContainColon: "Name cannot contain a colon",
    nameCannotBeEmpty: "This is a required field.",
    SelectOneItemMessage: "{0} item selected",
    SelectManyItemsMessage: "{0} items selected",
    noValue: "(no value)",
    nodePickerChoices: "Choices",
    nodePickerChoicesIn: "Choices in {0}",
    checkboxSelectAria: "Selected {0}: {1}",
    checkboxBrowsedAria: "Browsed {0}: {1}",
    checkboxAriaSelectNBrowse: "Selected and browsed {0}: {1}",
  }),
  csui.define(
    "csui/dialogs/members.picker/impl/select.view/impl/header/header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/models/member/member.model",
      "csui/models/member/membercollection",
      "hbs!csui/dialogs/members.picker/impl/select.view/impl/header/header",
      "i18n!csui/dialogs/node.picker/impl/nls/lang",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      var s = a.ItemView.extend({
        template: r,
        tagName: "div",
        templateHelpers: function () {
          return {
            title:
              this.options.title ||
              (!!this.options &&
                !!this.options.container &&
                this.options.container.get("name")),
            search_icon_tooltip: v.str.sformat(
              i.searchIconTooltip,
              this.options.columnTitle
            ),
            search_placeholder: i.searchByNamePlaceholder,
            search_aria: i.searchByNameAria,
            search_clear_icon_tooltip: i.searchClearIconTooltip,
            backButtonTooltip: t.backButtonTooltip || i.backButtonTooltip,
            type: t.Type,
            name: t.Name,
            location: t.Location,
            searchView: this.options.searchView,
            searchInButtonAria: v.str.sformat(i.searchIconTooltip, this.title),
            clearSearchButtonAria: t.clearSearchButtonAria,
            allMembers:
              this.options.location === "member.groups"
                ? !1
                : !(this.container.id || this.container.groupId),
            openSearchBar: n.openSearchBar,
            closeSearchBar: n.closeSearchBar,
            collapseSearch: t.collapseSearch,
            backButtonAria: i.backButtonTooltip,
          };
        },
        ui: {
          searchBox: "> form.cs-modal-filter",
          openSearchIcon: "> .csui-folder-name .icon-sv-search",
          headerTitle: "> .csui-folder-name",
          searchInput: "> form .cs-filter-input",
          clearer: "> form .binf-form-control-feedback",
          tabElements: "> *[tabindex]",
          closeSearchButton: "> form .csui-form-control-search",
          backButton: ".csui-targetbrowse-arrow-back",
          placeholderSearchIcon: ".cs-modal-filter .icon-search-placeholder",
        },
        events: {
          "click @ui.placeholderSearchIcon": "placeholderSearchIconClicked",
          "click .icon-sv-search": "searchClicked",
          "click @ui.closeSearchButton": "searchClicked",
          "paste @ui.searchInput": "contentPasted",
          "change @ui.searchInput": "filterChanged",
          "click @ui.clearer": "searchFieldClearerClicked",
          "submit @ui.searchBox": "filterChanged",
          keydown: "onKeyInView",
        },
        behaviors: { TabableRegionBehavior: { behaviorClass: e } },
        constructor: function (c) {
          (this.options = c || {}),
            (this.container = c.container),
            (this.title = c.title),
            (this.headerView = this),
            a.ItemView.prototype.constructor.apply(this, arguments),
            this.container &&
              this.listenTo(this.container, "change:name", function (m) {
                (this.title = m.get("name")), this.render();
              });
        },
        onRender: function () {
          this.ui.clearer.toggle(!1),
            this.ui.searchBox.toggleClass("binf-hidden"),
            this.ui.closeSearchButton.toggleClass("binf-hidden"),
            this.ui.searchInput.hide();
          var o = this;
          this.ui.searchInput.on("keyup", function (c) {
            o.filterChanged(c);
          }),
            this.$el.find("*[data-cstabindex]").on("focus", function () {
              var c = d(this);
              o.focusedElement &&
                o.focusedElement.removeClass(e.accessibilityActiveElementClass),
                c.addClass(e.accessibilityActiveElementClass),
                (o.focusedElement = c);
            });
        },
        currentlyFocusedElement: function () {
          var o = this.$el.find("*[data-cstabindex=-1]");
          return (
            o.length && o.prop("tabindex", 0),
            this.focusedElement
              ? this.focusedElement
              : (this.$el.find(".csui-folder-name.binf-hidden").length
                  ? (this.focusElement = this.$el.find("input"))
                  : this.$el
                      .find(".csui-targetbrowse-arrow-back .cs-go-back")
                      .is(":visible")
                  ? (this.focusElement = this.$el.find(
                      ".csui-targetbrowse-arrow-back .cs-go-back"
                    ))
                  : this.$el
                      .find(".csui-folder-name .icon-sv-search")
                      .is(":visible") &&
                    (this.focusElement = this.$el.find(
                      ".csui-folder-name .icon-sv-search"
                    )),
                this.focusElement)
          );
        },
        onLastTabElement: function (o) {
          var c = this.$("[data-cstabindex=-1]"),
            m = c.length - 1;
          if (c.length) {
            var f,
              g = 0,
              w = m + 1,
              b = 1;
            o || ((g = m), (w = -1), (b = -1));
            for (var C = g; C != w; C = C + b)
              if (d(c[C]).is(":visible")) {
                g = C;
                break;
              }
            return (
              g >= 0 && g <= m && (f = c[g]),
              this.$(".csui-focus").removeClass("csui-focus"),
              d(f).hasClass(e.accessibilityActiveElementClass) && !o
            );
          }
          return !0;
        },
        onKeyInView: function (o) {
          var c = !1,
            m = d(o.target);
          switch (o.keyCode) {
            case 13:
              m.removeClass(e.accessibilityActiveElementClass),
                d(o.target).trigger("click");
              break;
            case 27:
              d(o.target).hasClass(".icon-sv-search") ||
                this.$el.trigger("tabNextRegion");
              break;
            default:
              return !0;
          }
          return c;
        },
        searchClicked: function (o) {
          o.preventDefault(),
            o.stopPropagation(),
            h.trigger("closeToggleAction"),
            this.ui.headerTitle.toggleClass("binf-hidden"),
            this.ui.searchInput.toggleClass(e.accessibilityFocusableClass),
            this.ui.clearer.toggle(!1),
            this.getValue().length &&
              (this.ui.searchInput.val(""), this.filterChanged(o)),
            this.ui.searchInput.toggle(
              200,
              "linear",
              v.bind(function () {
                this.ui.searchInput.trigger("focus");
              }, this)
            ),
            this.ui.closeSearchButton.toggleClass(
              e.accessibilityFocusableClass
            ),
            this.ui.closeSearchButton.removeClass(
              e.accessibilityActiveElementClass
            ),
            this.ui.openSearchIcon.toggleClass(e.accessibilityFocusableClass),
            this.ui.searchBox.toggleClass("binf-hidden"),
            this.ui.closeSearchButton.toggleClass("binf-hidden"),
            d(o.target).hasClass("form-control-search")
              ? (this.ui.searchInput.removeClass(
                  e.accessibilityActiveElementClass
                ),
                this.ui.openSearchIcon.addClass(
                  e.accessibilityActiveElementClass
                ),
                this.$el.trigger("setCurrentTabFocus"))
              : (this.ui.searchInput.addClass(
                  e.accessibilityActiveElementClass
                ),
                this.ui.openSearchIcon.removeClass(
                  e.accessibilityActiveElementClass
                )),
            this.trigger("changed:focus"),
            this.focusElement && this.focusElement.trigger("focus");
        },
        searchFieldClearerClicked: function (o) {
          o.preventDefault(),
            o.stopPropagation(),
            this.ui.clearer.removeClass(e.accessibilityFocusableClass),
            this.ui.clearer.removeClass(e.accessibilityActiveElementClass),
            this.ui.searchInput.val(""),
            this.filterChanged(o),
            this.ui.searchInput.trigger("focus"),
            this.ui.searchInput.addClass(e.accessibilityActiveElementClass);
        },
        placeholderSearchIconClicked: function () {
          this.ui.searchInput.trigger("focus");
        },
        getColumn: function () {
          return this.options.column;
        },
        getValue: function () {
          var o;
          return (
            (o = this.ui.searchInput.val()),
            o === this.ui.searchInput.attr("placeholder") && (o = ""),
            o
          );
        },
        setValue: function (o) {
          o &&
            o.length &&
            (this.ui.searchInput.val(o), (this.lastFilterValue = o));
        },
        getShown: function () {
          return this.ui.searchInput.hasClass("binf-show");
        },
        setShown: function (o) {
          o === !0 && this.ui.searchInput.hasClass("binf-hidden")
            ? this.ui.searchInput.toggleClass("show binf-hidden")
            : o === !1 &&
              this.ui.searchInput.hasClass("binf-show") &&
              this.ui.searchInput.toggleClass("show binf-hidden");
        },
        setFocus: function () {
          var o = this.ui.searchInput.val().length;
          this.ui.searchInput.trigger("focus"),
            this.ui.searchInput[0].setSelectionRange(o, o);
        },
        contentPasted: function (o) {
          this.applyFilter();
        },
        filterChanged: function (o) {
          return this.applyFilter(), !1;
        },
        applyFilter: function () {
          var o = this.getValue(),
            c = !!o.length;
          if (
            (this.ui.clearer.toggle(c),
            c
              ? this.ui.clearer.addClass(e.accessibilityFocusableClass)
              : this.ui.clearer.removeClass(e.accessibilityFocusableClass),
            this.lastFilterValue != o)
          ) {
            this.lastFilterValue = o;
            var m = this;
            this.filterTimeout && clearTimeout(this.filterTimeout),
              (this.filterTimeout = setTimeout(function () {
                (m.filterTimeout = void 0),
                  m.trigger("change:filterValue", {
                    name: m.getValue(),
                    collection: m.options.collection,
                  });
              }, 1e3));
          }
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/select.view/impl/select.view",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div>
  <div class="csui-mp-header cs-folder-name"></div>
</div>
<div class="csui-mp-content"></div>

`;
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_select.view_impl_select.view",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/members.picker/impl/select.view/impl/select.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/select.view/select.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/dialogs/members.picker/impl/member.list/member.list.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/dialogs/members.picker/impl/select.view/impl/header/header.view",
      "hbs!csui/dialogs/members.picker/impl/select.view/impl/select.view",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "css!csui/dialogs/members.picker/impl/select.view/impl/select.view",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      var c = i.LayoutView.extend({
        template: n,
        templateHelpers: function () {
          return {
            backButtonTooltip: o.backButtonTooltip,
            backButtonAria: o.backButtonTooltip,
          };
        },
        regions: {
          viewHeaderRegion: ".csui-mp-header",
          viewContentRegion: ".csui-mp-content",
        },
        ui: { backButton: ".csui-targetbrowse-arrow-back" },
        behaviors: { TabableRegion: { behaviorClass: r } },
        events: {
          "click @ui.backButton": "onClickFolderBack",
          "keydown @ui.backButton": "selectFolderBack",
        },
        constructor: function (f) {
          f || (f = {}),
            a.defaults(f, { pageSize: 30 }),
            i.LayoutView.prototype.constructor.call(this, f),
            (this.rendered = !1),
            (this.selectedMember = null),
            (this.collection = f.collection),
            (this.completeCollection = f.collection),
            (this.originalModels = f.collection.models),
            (this.container = f.container),
            this.propagateEventsToRegions(),
            this.setHeader(f),
            this.setListView(f),
            (this.onWinRefresh = a.bind(this.windowRefresh, this)),
            d(window).on("resize.app", this.onWinRefresh),
            this.listenTo(
              this.listView,
              "remove:expanded:panel",
              this._removeCurrentGroupExpandedPanel
            ),
            this.listenTo(this.listView, "enable:apply", this.enableDone);
        },
        windowRefresh: function () {
          var m = this.options.parentEl.height();
          (window.chrome || navigator.userAgent.indexOf("Firefox") > 0) &&
            m > 0 &&
            this.$el.css("height", m + "px");
        },
        onDestroy: function () {
          this.$el.off(), d(window).off("resize.app", this.onWinRefresh);
        },
        onRender: function () {
          var m = this,
            f = m.$el.find(".csui-mp-content");
          this.viewHeaderRegion.show(this.headerView),
            this.viewContentRegion.show(this.listView),
            this.$el.on(
              "hover",
              function () {
                f.addClass("binf-focus");
              },
              function () {
                f.removeClass("binf-focus");
              }
            ),
            (this.rendered = !0);
        },
        onDomRefresh: function () {
          this.windowRefresh();
        },
        onShow: function () {
          this.rendered || this.render(),
            a.each(this.regionManager._regions, function (m) {
              m.currentView && m.currentView.trigger("show");
            });
        },
        getNumberOfSelectItems: function () {
          return this.selectedMember !== null ? 1 : 0;
        },
        setNewSelect: function (m, f) {
          this.clearSelect(),
            this._setSelection({ member: m, add: !0, silent: f });
        },
        clearSelect: function () {
          this.listView && this.listView.clearSelect(),
            (this.selectedMember = null);
        },
        setListView: function (m) {
          m || (m = {});
          var f = {
              collection: this.collection,
              container: this.container,
              commandType: m.commandType,
              pageSize: m.pageSize,
              context: m.context,
              groupId: m.groupId,
              authUser: m.authUser,
              selectedGroup: m.selectedGroup,
              node: m.node,
              edit_permission: m.edit_permission,
            },
            g = (this.listView = new u(f));
          this.listenTo(g, "selection:change", this._setSelection)
            .listenTo(
              g,
              "browse:select",
              a.bind(this.trigger, this, "browse:select", this)
            )
            .listenTo(
              this,
              "browse:complete",
              a.bind(g.trigger, g, "browse:complete")
            );
        },
        selectFolderBack: function (m) {
          (m.keyCode === 13 || m.keyCode === 32) &&
            (m.preventDefault(),
            m.stopPropagation(),
            this.trigger("backbutton:click", this));
        },
        onClickFolderBack: function (m) {
          m.preventDefault(),
            m.stopPropagation(),
            this.trigger("backbutton:click", this);
        },
        setHeader: function () {
          var m =
            this.container &&
            (this.container.get("name") || this.options.displayName);
          (m = m === null ? this.options.locationName : m),
            (this.headerView = new t({
              title: m,
              container: this.container,
              searchView: this.options.searchView,
              location: this.options.location || this.options.initialLocation,
            })),
            this.listenTo(
              this.headerView,
              "change:filterValue",
              this.applyFilter
            );
        },
        applyFilter: function (m) {
          if (
            (a.extend(m, { type: this.options.listTypes }),
            this.collection.fetching)
          )
            this.filterValuePending = m;
          else {
            var f = this;
            this.collection.setLimit(0, this.options.pageSize, !1),
              this.collection.setFilter(m, !1),
              this.collection.fetch({ reset: !0 }).fail(function (g) {
                f.listView.stopBlocker(),
                  f.trigger("search:failed", { resp: g, view: f });
              }),
              this.listView.reset();
          }
        },
        refresh: function () {
          var m = this;
          this.collection.fetch({ reset: !0 }).fail(function () {
            m.listView.stopBlocker();
          });
        },
        stopBlocker: function () {
          this.listView.stopBlocker();
        },
        addMemberSelection: function (m) {
          this._setSelection({
            browse: !0,
            add: !0,
            breadCrumbSelection: !0,
            member: m,
            type: 1,
          });
        },
        _setSelection: function (m) {
          var f = m.member.get("id"),
            g = this.options.commandType;
          (this.selectedMember = null),
            m.add &&
              g.isSelectable(m.member) &&
              (this.selectedMember = m.member),
            m.silent || this.trigger("selection:change", m, this);
        },
        _removeCurrentGroupExpandedPanel: function (m) {
          this.trigger("remove:expanded:panel");
        },
        enableDone: function () {
          this.trigger("enable:apply");
        },
      });
      return a.extend(c.prototype, s), c;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/select.views/selectviews",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `
`;
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_select.views_selectviews",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/select.views/select.views",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "csui/models/member/member.model",
      "csui/models/member/membercollection",
      "csui/dialogs/members.picker/impl/select.view/select.view",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/commands",
      "hbs!csui/dialogs/members.picker/impl/select.views/selectviews",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/lib/jquery.ui/js/jquery-ui",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c) {
      "use strict";
      var m = h.ItemView.extend({
        className: "csui-select-lists",
        template: o,
        constructor: function (g) {
          g || (g = {}),
            a.defaults(g, { pageSize: 30 }),
            h.ItemView.prototype.constructor.call(this, g),
            (this.commandType = g.commandType),
            (this.leftView = this.rightView = null),
            (this.rootGroup = g.rootGroup),
            (this.invalidMembers = []),
            (this.ancestorCollection = g.ancestorCollection),
            (this.connector = g.connector);
        },
        onRender: function () {
          var f = this;
          this.setLeftOnly().done(function () {
            f.options.leftSelection &&
              f.$el.find(".cs-left-item-" + f.options.leftSelection).length >
                0 &&
              (f.$el
                .find(".cs-left-item-" + f.options.leftSelection)
                .trigger("click"),
              (f.options.selectException = void 0));
          }),
            this.leftView && this.leftView.render(),
            this.rightView && this.rightView.render();
        },
        onDomRefresh: function () {
          this.leftView.triggerMethod("dom:refresh", this.leftView),
            this.rightView &&
              this.rightView.triggerMethod("dom:refresh", this.rightView);
        },
        onShow: function () {
          this.leftView.triggerMethod("show"),
            this.rightView && this.rightView.triggerMethod("show");
        },
        setParentGroupAsTarget: function (f) {
          var g = this.commandType.isSelectable(f);
          return (
            this.rightView && this.rightView.clearSelect(),
            this.leftView && this.leftView.setNewSelect(f, !0),
            g
          );
        },
        getSelection: function () {
          var f = this.rightView ? this.rightView.selectedMember : null,
            g = f === null ? this.leftView.selectedMember : null;
          return f !== null ? f : g;
        },
        getNumberOfSelectItems: function () {
          return this.rightView && this.rightView.getNumberOfSelectItems() > 0
            ? this.rightView.getNumberOfSelectItems()
            : this.leftView.getNumberOfSelectItems();
        },
        leftNodeId: function () {
          var f = this.leftView.container;
          return f ? f.get("id") : -1;
        },
        setLeftOnly: function () {
          var f = this._setView(
              this.rootGroup,
              "cs-start-locations left-only",
              !1,
              this.options
            ),
            g = f.view.container,
            w = this;
          return (
            f.promise
              .done(function () {
                g && w.leftView.addMemberSelection(g),
                  (w.options.targetBrowseHistory.length > 0 ||
                    w.options.targetBrowseHistory.length > 1 ||
                    (w.options.targetBrowseHistory.length === 1 &&
                      w.options.navigateFromHistory)) &&
                    w.showBackButton();
              })
              .fail(function (b) {
                w.forceClose(b);
              }),
            (this.leftView = f.view),
            f.promise
          );
        },
        forceClose: function (f) {
          this._displayAlert(f).always(this.trigger("close"));
        },
        newLeftView: function (f, g) {
          var w = this;
          return (
            (this.options.pageSize = g),
            this._drillUp(f)
              .done(function (b) {
                (w.leftView = b),
                  w.leftView.addMemberSelection(f),
                  w.trigger("changed"),
                  w.onDomRefresh();
              })
              .fail(function (b) {
                w._displayAlert(b);
              })
          );
        },
        onSelectionChange: function (f, g) {
          var w = g && this._isRightView(g),
            b;
          return (
            f &&
              !f.breadCrumbSelection &&
              (w
                ? f.add && this.leftView.clearSelect()
                : this.rightView &&
                  (f.add && this.rightView.clearSelect(),
                  (b = this.rightView.container.id !== f.member.id))),
            f.type === 1 &&
              this._updateAncestorCollection(f.member, {
                isLeftView: !w,
                replaceRightView: b,
              }),
            (f.member.add = f.add),
            this.trigger("change:complete", f.member),
            !0
          );
        },
        onBrowse: function (f, g) {
          var w = this._isRightView(f),
            b = null;
          return (
            this.trigger("changing:selection"),
            (b = w ? this.selectRight(g) : this.selectLeft(g)),
            b
              .done(function () {
                f.trigger("browse:complete");
              })
              .fail(function () {
                f.clearSelect();
              }),
            b
          );
        },
        selectLeft: function (f) {
          var g = this;
          return this._runSelection(f, ".cs-pane-view").done(function (w) {
            w && ((g.rightView = w), g.onDomRefresh());
          });
        },
        selectRight: function (f) {
          var g = this,
            w =
              Math.floor(
                (this.leftView.collection.skipCount || 0) /
                  this.leftView.collection.topCount
              ) + 1,
            b = parseInt(this.leftView.collection.topCount) * parseInt(w),
            C = f.member.get("parentId"),
            k = this.ancestorCollection.get(C),
            y = k && this.ancestorCollection.get(k.get("parentId"));
          if (this.options.targetBrowseHistory.length === 0) {
            var S = {
              leftId: "start.location",
              rightId: k ? k.get("id") : void 0,
              rightName: k ? k.get("name") : void 0,
              rightParent: k ? k.get("parentId") : void 0,
              rightType: k ? k.get("type") : void 0,
              pageSize: b,
            };
            this.options.targetBrowseHistory.push(S);
          } else {
            var P = {
              leftId: y ? y.get("id") : null,
              leftName: y ? y.get("name") : void 0,
              leftParent: y ? y.get("parentId") : void 0,
              leftType: y ? y.get("type") : void 0,
              rightId: k ? k.get("id") : void 0,
              rightName: k ? k.get("name") : void 0,
              rightParent: k ? k.get("parentId") : void 0,
              rightType: k ? k.get("type") : void 0,
              pageSize: b,
            };
            this.options.targetBrowseHistory.push(P);
          }
          return this._runSelection(f, ".csui-panel.cs-start-locations").done(
            function (F) {
              F &&
                ((g.leftView = g.rightView),
                g.showBackButton(),
                (g.rightView = F),
                g.onDomRefresh());
            }
          );
        },
        showBackButton: function () {
          this.leftView &&
            this.options.targetBrowseHistory.length >= 1 &&
            this.leftView.headerView.ui.backButton.parent().show();
        },
        hideBackButton: function () {
          this.leftView &&
            this.options.targetBrowseHistory.length < 1 &&
            this.leftView.headerView.ui.backButton.parent().hide();
        },
        _runSelection: function (f, g) {
          var w = f.member,
            b = this,
            C = d.Deferred();
          return (
            this._drillDown(w, g)
              .done(function (k) {
                b.trigger("changed"),
                  b.trigger("change:complete", w),
                  C.resolve(k);
              })
              .fail(function (k) {
                b._displayAlert(k), b.trigger("change:complete"), C.reject();
              }),
            C
          );
        },
        _drillUp: function (f, g) {
          var w = this._setView(
              f,
              "csui-new-view left-only binf-hidden",
              "prepend"
            ),
            b = w.view,
            C = this,
            k = d.Deferred();
          return (
            b.$el.addClass("zeroWidth").removeClass("binf-hidden"),
            b.render(),
            g ||
              C._removeRightView(w.promise)
                .done(function () {
                  k.resolve(w.view);
                })
                .fail(function (y) {
                  k.reject(y);
                }),
            k
          );
        },
        _drillDown: function (f, g) {
          var w = this._setView(f, "csui-new-view", !1),
            b = null,
            C = w.view;
          return (
            C.render(),
            this.rightView
              ? (b = this._replaceView(w.promise, C, g))
              : (b = this._addRightView(w.promise, C)),
            b
          );
        },
        _showLeftOnly: function () {
          var f = this.$el.find(".csui-panel.cs-start-locations"),
            g = this.$el.find(".csui-panel.cs-pane-view.csui-slideMidLeft"),
            w = this,
            b = "100%";
          g.hide(), f.animate({ width: b }, { duration: 200, complete: C });
          function C() {
            if (g) {
              var k = g[0].selectView;
              w.cancelEventsToViewsPropagation(k),
                k.destroy(),
                g.remove(),
                (w.rightView = null);
            }
          }
        },
        _removeRightView: function (f) {
          var g = this.$el.find(".csui-new-view"),
            w = this.$el.find(".csui-panel.cs-start-locations"),
            b = this.$el.find(".cs-pane-view"),
            C = d.Deferred(),
            k = this;
          return (
            w.hide(),
            b.hide(),
            (g[0].className = "csui-panel cs-start-locations left-only"),
            f
              .done(function () {
                k._finishRightRemove(g, w, b), C.resolve();
              })
              .fail(function (y) {
                k._removeNewView(g, w, b), C.reject(y);
              }),
            C
          );
        },
        _removeNewView: function (f, g, w) {
          f || (f = this.$el.find(".csui-new-view"));
          var b = f[0].selectView;
          this.cancelEventsToViewsPropagation(b),
            b.destroy(),
            f.remove(),
            g && g.show(),
            w && w.show();
        },
        _finishRightRemove: function (f, g, w) {
          var b;
          return (
            w.length > 0 &&
              ((b = w[0].selectView),
              this.cancelEventsToViewsPropagation(b),
              b.destroy(),
              w.remove(),
              (this.rightView = null)),
            (b = g[0].selectView),
            this.cancelEventsToViewsPropagation(b),
            b.destroy(),
            g.remove(),
            (this.leftView = null),
            !0
          );
        },
        _addRightView: function (f, g) {
          var w = this.$el.find(".csui-panel.cs-start-locations"),
            b = this.$el.find(".csui-new-view"),
            C = d.Deferred(),
            k = this;
          return (
            (w[0].className = "csui-panel cs-start-locations"),
            (b[0].className = "csui-panel cs-pane-view csui-slideMidLeft"),
            f
              .done(function () {
                C.resolve(g);
              })
              .fail(function (y) {
                k._removeNewView(b),
                  w.animate({ width: "100%" }, 200),
                  k.leftView.clearSelect(),
                  k.leftView.refresh(),
                  C.reject(y);
              }),
            C
          );
        },
        _replaceView: function (f, g, w) {
          var b = this.$el.find(w),
            C = d(".csui-new-view"),
            k = d(".cs-pane-view"),
            y = d.Deferred(),
            S = this;
          switch ((b.hide(), w)) {
            case ".csui-panel.cs-start-locations":
              (k[0].className = "csui-panel cs-start-locations csui-slideLeft"),
                (C[0].className = "csui-panel cs-pane-view csui-slideMidLeft");
              break;
            case ".cs-pane-view":
              C[0].className = "csui-panel cs-pane-view csui-slideMidLeft";
          }
          return (
            f
              .done(function () {
                S._removeView(b), y.resolve(g);
              })
              .fail(function (P) {
                S._reverseRemoveView(C, w, k),
                  w === ".csui-panel.cs-start-locations" && b.show(),
                  y.reject(P);
              }),
            y
          );
        },
        _reverseRemoveView: function (f, g, w) {
          switch ((this._removeNewView(f), g)) {
            case ".csui-panel.cs-start-locations":
              (w[0].className = "csui-panel cs-pane-view csui-slideRight"),
                this.rightView.refresh();
              break;
            case ".cs-pane-view":
              this._removeView(w),
                (this.leftView.$el[0].className =
                  "csui-panel cs-start-locations left-only"),
                this.leftView.clearSelect(),
                this.leftView.refresh();
          }
          return !0;
        },
        _removeView: function (f) {
          var g = f[0].selectView;
          return (
            this.cancelEventsToViewsPropagation(g), g.destroy(), f.remove(), !0
          );
        },
        _removeExpandedPanel: function () {
          var f = this;
          let g = this.ancestorCollection.models[0];
          g.set({ useLocation: !0 }, { silent: !0 }),
            this.newLeftView(g, this.options.pageSize).done(function (w) {
              f.setParentGroupAsTarget(w.container),
                f.trigger("change:complete", w.container),
                g.unset("useLocation", { silent: !0 });
            });
        },
        _setView: function (f, g, w, b) {
          b || (b = this._getViewOptions(f, this.connector)),
            a.defaults(b, this.options, {
              invalidMembers: this.invalidMembers,
            }),
            w || (w = "append");
          var C = this._newView(b, g),
            k = this._fetchView(C);
          return (
            (C.el.selectView = C), this.$el[w](C.el), { view: C, promise: k }
          );
        },
        _fetchView: function (f) {
          return this._fetchCollection(f);
        },
        _fetchCollection: function (f) {
          if (
            (f.collection.setOrder(this.options.orderBy, !1),
            f.collection.setLimit(0, this.options.pageSize, !1),
            f.options.groupId &&
              (f.container.id === f.options.groupId ||
                f.container.groupId === f.options.groupId))
          ) {
            const g = this;
            return f.collection.fetch({
              success: function (w, b, C) {
                const k = g.options?.context?.memberListView?.removedItems?.map(
                  (S) => S.get("id")
                );
                var y = w.filter(function (S) {
                  return !k?.includes(S.get("id"));
                });
                w.reset(y);
              },
              error: function (w, b, C) {
                console.error("Error fetching collection:", b);
              },
            });
          } else
            return f.collection.fetch({ reset: !1, merge: !1, remove: !1 });
        },
        _newView: function (f, g) {
          var w = a.extend(
              {
                className: g + " csui-panel",
                parentEl: this.$el,
                initialLocation:
                  this.initialLocation && this.initialLocation.get("location"),
              },
              f
            ),
            b = new t(w);
          return (
            this.propagateEventsToViews(b),
            this.listenTo(b, "selection:change", this.onSelectionChange),
            this.listenTo(b, "backbutton:click", this._onClickBackButton),
            this.listenTo(b, "browse:select", a.bind(this.onBrowse, this)),
            this.listenTo(
              b,
              "remove:expanded:panel",
              this._removeExpandedPanel
            ),
            this.listenTo(b, "enable:apply", this._enableDone),
            b
          );
        },
        _enableDone: function () {
          this.trigger("enable:apply");
        },
        _onClickBackButton: function () {
          var f = this,
            g =
              this.options.targetBrowseHistory.length > 0
                ? this.options.targetBrowseHistory.pop()
                : void 0;
          if (
            ((this.options.navigateFromHistory =
              this.options.targetBrowseHistory.length === 1),
            g.leftId === "start.location")
          )
            this.trigger("change:location", this.options.startLocation, g);
          else if (g.leftId) {
            var w = new u(
                { id: g.leftId, name: g.leftName },
                { connector: this.connector }
              ),
              b = new u(
                { id: g.rightId, name: g.rightName },
                { connector: this.connector }
              );
            this.newLeftView(w, g.pageSize).done(function () {
              f.setParentGroupAsTarget(w),
                f.trigger("change:complete"),
                f.options.targetBrowseHistory.length > 0 &&
                  b &&
                  b.get("id") &&
                  f.$el.find(".cs-left-item-" + b.get("id")).length > 0 &&
                  f.$el.find(".cs-left-item-" + b.get("id")).trigger("click"),
                f.showBackButton();
            });
          } else {
            f.hideBackButton();
            var C = new u(
                { id: this.options.container.groupId, useLocation: !0 },
                { connector: this.connector }
              ),
              k = this.options.container.groupId;
            this.newLeftView(C, g.pageSize).done(function () {
              f.setParentGroupAsTarget(C);
              var y = f.ancestorCollection.findByIndex(g.rightId);
              f.ancestorCollection.findByIndex(g.rightId),
                f.ancestorCollection.reset(f.ancestorCollection.slice(0, y)),
                C.unset("useLocation", { silent: !0 });
            });
          }
        },
        _isRightView: function (f) {
          var g = f.$el[0].className.split(" ");
          return a.contains(g, "cs-pane-view");
        },
        _addNewPanel: function (f, g) {
          var w = document.createElement("div");
          return (w.className = f), this.$el[g](w), w;
        },
        _getViewOptions: function (f, g) {
          var w = new u(
              {
                id: f.get("id"),
                name: f.get("name"),
                parentId: f.get("parentId"),
                nodeId: f.get("nodeId"),
                categoryId: f.get("categoryId"),
                groupId: f.get("groupId"),
              },
              { connector: g }
            ),
            b = this.options.startLocation === "all.groups" ? 1 : null;
          f.get("useLocation") &&
            this.options.location &&
            (b =
              this.options.location === "member.groups"
                ? "GroupsOfCurrentUser"
                : b);
          var C = new r(void 0, {
            member: w,
            autofetch: !0,
            orderBy: this.options.orderBy,
            commands: s.getAllSignatures(),
            connector: this.connector,
            type: b,
          });
          return { container: w, collection: C };
        },
        _displayAlert: function (f) {
          var g = a.str.sformat(l.serverError, "unknown");
          return (
            f &&
              (f instanceof t
                ? (g = a.str.sformat(l.ViewDenied, f.member.get("name")))
                : f.responseJSON && (g = f.responseJSON.error)),
            n.showInformation(g)
          );
        },
        _updateAncestorCollection: function (f, g) {
          var w = this.ancestorCollection.findByIndex(f.id);
          w >= 0
            ? this.ancestorCollection.reset(
                this.ancestorCollection.slice(0, w + 1)
              )
            : (g.isLeftView &&
                g.replaceRightView &&
                this.ancestorCollection.pop(),
              this.ancestorCollection.add(f.clone()));
        },
      });
      return a.extend(m.prototype, c), m;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div class="csui-selected-member" id="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "id") || (e != null ? n(e, "id") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 38 },
                      end: { line: 1, column: 44 },
                    },
                  })
                : t)
            ) +
            `">
  <div class="member-picture binf-pull-left">
    <span class="csui-icon-paceholder csui-icon image_user_placeholder">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "initials") || (e != null ? n(e, "initials") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "initials",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 72 },
                      end: { line: 3, column: 84 },
                    },
                  })
                : t)
            ) +
            `</span>
    <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" alt="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 75 },
                      end: { line: 4, column: 83 },
                    },
                  })
                : t)
            ) +
            `"
         src="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "userImgSrc") || (e != null ? n(e, "userImgSrc") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "userImgSrc",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 14 },
                      end: { line: 5, column: 28 },
                    },
                  })
                : t)
            ) +
            `">
  </div>
  <div class="member-info binf-pull-left">
    <span class="name binf-pull-left" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 45 },
                      end: { line: 8, column: 53 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 55 },
                      end: { line: 8, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
    <span class="department binf-pull-left" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "department") || (e != null ? n(e, "department") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "department",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 51 },
                      end: { line: 9, column: 65 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "department") || (e != null ? n(e, "department") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "department",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 67 },
                      end: { line: 9, column: 81 },
                    },
                  })
                : t)
            ) +
            `</span>

  </div>
  <button type="button" class="close notification_error" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "removeSelectedUserAria") ||
                  (e != null ? n(e, "removeSelectedUserAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "removeSelectedUserAria",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 69 },
                      end: { line: 12, column: 95 },
                    },
                  })
                : t)
            ) +
            `"
          title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "removeSelectedUser") ||
                  (e != null ? n(e, "removeSelectedUser") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "removeSelectedUser",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 17 },
                      end: { line: 13, column: 39 },
                    },
                  })
                : t)
            ) +
            `"></button>
</div>
 
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_selectedMembers_impl_selectedMember",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/selectedMembers/selectedMember",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/url",
      "csui/utils/user.avatar.color",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = a.ItemView.extend({
        template: u,
        tagName: "div",
        className: "csui-userpicker-item",
        ui: {
          closeButton: ".close",
          personalizedImage: ".csui-icon-user",
          defaultImage: ".csui-icon-paceholder",
        },
        behaviors: { TabableRegion: { behaviorClass: l } },
        events: { "click @ui.closeButton": "onRemoveButtonClicked" },
        currentlyFocusedElement: function () {
          return this.ui.closeButton;
        },
        templateHelpers: function () {
          return {
            name: h.formatMemberName(this.model),
            department:
              this.model.get("group_id") && this.model.get("group_id").name,
            id: this.model.get("id"),
            initials: this.model.get("initials"),
            userImgSrc:
              "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
            removeSelectedUser: r.removeSelectedUser,
            removeSelectedUserAria: v.str.sformat(
              r.removeSelectedUserAria,
              this.model.get("name_formatted")
            ),
          };
        },
        constructor: function (s) {
          s || (s = {}),
            s.disabledMessage || (s.disabledMessage = ""),
            a.ItemView.prototype.constructor.call(this, s),
            this.listenTo(this, "render", this._assignUserColor);
        },
        onRender: function () {
          this.options.lightWeight || this._displayProfileImage();
        },
        onDestroy: function () {
          this._releasePhotoUrl();
        },
        onRemoveButtonClicked: function (n) {
          n.stopPropagation(),
            n.preventDefault(),
            this._parent.trigger("remove:selectItem", this.model);
        },
        _displayProfileImage: function () {
          var n = this._getUserPhotoUrl();
          if (
            (this.ui.personalizedImage.addClass(
              "esoc-userprofile-img-" + this.model.get("id")
            ),
            n)
          ) {
            var s = { url: n, dataType: "binary" };
            this._releasePhotoUrl(),
              this.options.model.connector.makeAjaxCall(s).always(
                v.bind(function (o, c, m) {
                  m.status === 200
                    ? this._showPersonalizedImage(o)
                    : this._showDefaultImage();
                }, this)
              );
          } else this._showDefaultImage();
        },
        _getUserPhotoUrl: function () {
          var n =
              (this.options.model && this.options.model.connector.connection) ||
              (this.options.connector && this.options.connector.connection),
            s = new i(n.url).getCgiScript(),
            o = this.model.get("photo_url");
          if (o && o.indexOf("?") > 0) return i.combine(s, o);
        },
        _showPersonalizedImage: function (n) {
          this._releasePhotoUrl(),
            (this._photoUrl = URL.createObjectURL(n)),
            this.ui.personalizedImage.attr("src", this._photoUrl),
            this.ui.defaultImage.addClass("binf-hidden"),
            this.ui.personalizedImage.removeClass("binf-hidden");
        },
        _showDefaultImage: function (n) {
          this._releasePhotoUrl(),
            this.ui.personalizedImage.addClass("binf-hidden"),
            this.ui.defaultImage.removeClass("binf-hidden");
        },
        _releasePhotoUrl: function () {
          this._photoUrl &&
            (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
        },
        _assignUserColor: function () {
          var n = e.getUserAvatarColor(this.model.attributes);
          this.ui.defaultImage.css("background", n);
        },
      });
      return t;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMemberList",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return '<div class="csui-selected-member-list"></div>';
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_selectedMembers_impl_selectedMemberList",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/selectedMembers/selectedMemberList",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/dialogs/members.picker/impl/selectedMembers/selectedMember",
      "hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMemberList",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "css!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",
    ],
    function (v, d, a, h, i, e) {
      var l = a.CollectionView.extend({
        template: i,
        className: "csui-normal-scrolling",
        childView: h,
        childViewContainer: ".csui-selected-member-list",
        childViewOptions: { collection: this.collection },
        ui: { memberListContainer: ".csui-selected-member-list" },
        constructor: function (r) {
          r || (r = {}),
            (this.collection = r.collection || new d.Collection()),
            a.CollectionView.prototype.constructor.apply(this, arguments),
            this.listenTo(
              this,
              "show:selectItem",
              v.bind(function (t) {
                this.collection.add(t);
              }, this)
            );
        },
        onRender: function () {
          this.listenTo(
            this,
            "remove:selectItem",
            v.bind(function (u) {
              this.collection.remove(u);
            }, this)
          );
        },
      });
      return v.extend(l.prototype, e), l;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/members.picker",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div id="csui-mp-selected-member-list-container"
     class="csui-mp-selected-member-list-container"></div>
<div id="csui-mp-breadcrumbs" class="cs-breadcrumb">
  <div role="navigation" class="breadcrumb-inner"></div>
  <div class="searchheader-inner"></div>
</div>
<div id="csui-mp-selectviews"></div>
`;
        },
      });
      return (
        a.registerPartial("csui_dialogs_members.picker_impl_members.picker", h),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/members.picker.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/models/member/member.model",
      "csui/dialogs/members.picker/impl/select.views/select.views",
      "csui/dialogs/members.picker/impl/selectedMembers/selectedMemberList",
      "csui/controls/breadcrumbs/breadcrumbs.view",
      "csui/models/memberancestorcollection",
      "hbs!csui/dialogs/members.picker/impl/members.picker",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      var c = h.LayoutView.extend({
        template: s,
        regions: {
          breadcrumbRegion: "#csui-mp-breadcrumbs > .breadcrumb-inner",
          searchHeaderRegion: "#csui-mp-breadcrumbs > div.searchheader-inner",
          selectViewRegion: "#csui-mp-selectviews",
          selectedMemberListRegion: "#csui-mp-selected-member-list-container",
        },
        ui: {
          breadcrumb: "#csui-mp-breadcrumbs",
          breadcrumbContent: ".breadcrumb-inner",
          selectViews: "#csui-mp-selectviews",
        },
        constructor: function (f) {
          f || (f = {}),
            h.LayoutView.prototype.constructor.call(this, f),
            this.propagateEventsToRegions(),
            (this.rootGroup = f.container),
            (this.ancestorCollection = new n(
              this.rootGroup.clone(),
              f,
              f.context
            )),
            (f.rootGroup = this.rootGroup),
            (f.ancestorCollection = this.ancestorCollection),
            this.setBreadcrumbs(f),
            this.setViews(f),
            (this.onWinRefresh = a.bind(this.windowRefresh, this)),
            d(window).on("resize.app", this.onWinRefresh);
        },
        windowRefresh: function () {
          var m = d(".cs-breadcrumb"),
            f = m.is(":visible") ? m.height() : 0,
            g = this.$el.height() - f;
          window.chrome && g > 0,
            this.selectViews.triggerMethod("dom:refresh", this.selectViews);
        },
        onDestroy: function () {
          d(window).off("resize.app", this.onWinRefresh);
        },
        onRender: function () {
          this.options.searchView &&
            this.searchHeaderRegion.show(this.searchHeaderView),
            this.breadcrumbs && this.breadcrumbRegion.show(this.breadcrumbs),
            (this.selectViews.options.navigateFromHistory =
              this.options.navigateFromHistory),
            this.selectViewRegion.show(this.selectViews),
            this.selectedMemberListRegion.show(this.selectedMemberList);
        },
        onDomRefresh: function () {
          this.windowRefresh();
        },
        onShow: function () {
          a.each(this.regionManager.regions, function (m) {
            m.currentView && m.currentView.trigger("show");
          }),
            this.options.adduserorgroup &&
              this.ancestorCollection.length === 1 &&
              (this.ui.breadcrumb.hide(),
              this.ui.selectViews.addClass("csui-full-height"));
        },
        setViews: function (m) {
          var f = (this.selectViews = new u(m));
          (this.selectedMemberList = new r()),
            this.listenTo(f, "changed", this.updateBreadcrumbs),
            this.listenTo(
              f,
              "change:location",
              a.bind(this.trigger, this, "change:location")
            ),
            this.listenTo(
              f,
              "change:complete",
              a.bind(this.trigger, this, "change:complete")
            ),
            this.listenTo(f, "close", this.close),
            this.listenTo(
              this.selectedMemberList,
              "add:child remove:child",
              this.onMemberListChange
            ),
            this.listenTo(f, "enable:apply", this.onEnableDone);
        },
        onEnableDone: function () {
          this.trigger("enable:apply");
        },
        onMemberListChange: function () {
          this.adjustSelectViews(),
            this.trigger("update:button", this.selectedMemberList.collection);
        },
        adjustSelectViews: function () {
          var m =
              this.selectedMemberList.collection.length < 3
                ? this.selectedMemberList.collection.length
                : 3,
            f = m
              ? m *
                this.selectedMemberList.$el
                  .find(".csui-userpicker-item")
                  .height()
              : 0,
            g = f ? "calc(100% - " + f + "px)" : "100%";
          this.selectViews.$el.find(".list-content").css({ height: g });
        },
        getSelection: function () {
          return this.selectViews.getSelection();
        },
        getNumberOfSelectItems: function () {
          return this.selectViews.getNumberOfSelectItems();
        },
        close: function () {
          this.destroy(), this.trigger("close");
        },
        updateBreadcrumbs: function () {
          return (
            this.options.adduserorgroup && this.ancestorCollection.length === 1
              ? (this.ui.breadcrumb.hide(),
                this.ui.selectViews.addClass("csui-full-height"))
              : (this.ui.breadcrumb.show(),
                this.ui.breadcrumbContent.show(),
                this.ui.selectViews.removeClass("csui-full-height")),
            this.windowRefresh(),
            this.adjustSelectViews(),
            !0
          );
        },
        setBreadcrumbs: function (m) {
          return (
            (this.breadcrumbs = new t({
              node: m.rootGroup,
              collection: m.ancestorCollection,
            })),
            this.setBreadcrumbEvents(),
            !0
          );
        },
        setBreadcrumbEvents: function () {
          this.listenTo(this.breadcrumbs, "before:defaultAction", function (m) {
            var f = this.selectViews,
              g = this;
            m.node.set({ useLocation: !0 }, { silent: !0 }),
              f.newLeftView(m.node, f.options.pageSize).done(function (w) {
                f.setParentGroupAsTarget(w.container),
                  g.trigger("change:complete", w.container),
                  m.node.unset("useLocation", { silent: !0 });
              });
          });
        },
      });
      return a.extend(c.prototype, o), c;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/start.location.collection",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.config(),
        l = e.startLocations || [],
        u = e.masks || {};
      a.isArray(l) || (l = Array.prototype.concat.apply([], a.values(l))),
        (u = a.reduce(
          a.values(u),
          function (o, c) {
            return {
              blacklist: o.blacklist.concat(c.blacklist || []),
              whitelist: o.whitelist.concat(c.whitelist || []),
            };
          },
          { blacklist: [], whitelist: [] }
        )),
        (u = {
          blacklist: a.unique(u.blacklist),
          whitelist: a.unique(u.whitelist),
        });
      function r(o) {
        var c = o.lastIndexOf("/");
        return c >= 0 ? o : "csui/dialogs/members.picker/start.locations/" + o;
      }
      function t(o) {
        return (
          !a.contains(u.blacklist, o) &&
          (!u.whitelist.length || a.contains(u.whitelist, o))
        );
      }
      l = a.chain(l).map(r).filter(t).unique().value();
      var n = i.Model.extend({
          defaults: {
            id: null,
            name: null,
            icon: null,
            invalid: !1,
            factory: null,
            unselectable: !0,
          },
          constructor: function (c, m) {
            i.Model.prototype.constructor.apply(this, arguments);
          },
          sync: function (o, c, m) {
            if (o !== "read")
              throw new Error("Only fetching the widget is supported.");
            var f = this;
            return (
              m || (m = {}),
              this._resolveFactory(m)
                .then(function () {
                  var g = f.get("factory");
                  return g.updateLocationModel(f);
                })
                .then(
                  function () {
                    var g = f.toJSON();
                    m.success && m.success(g, m), f.trigger("sync", f, g, m);
                  },
                  function () {
                    var g = f.get("error");
                    return (
                      m.error && m.error(g, m),
                      f.trigger("error", f, g, m),
                      h.Deferred().reject(g)
                    );
                  }
                )
            );
          },
          _resolveFactory: function (o) {
            var c = this,
              m = h.Deferred(),
              f = this.getFactoryData(),
              g = this.getFactoryModulePath(f);
            return (
              v(
                [g],
                function (w) {
                  c.set("factory", new w(o)), m.resolve();
                },
                function (w) {
                  c.set("error", w), o.ignoreErrors ? m.resolve() : m.reject(w);
                }
              ),
              m.promise()
            );
          },
          getFactoryData: function () {
            var o = this.get("id"),
              c = o.lastIndexOf("/"),
              m;
            return (
              c < 0
                ? (m = "csui/dialogs/members.picker/start.locations/" + o)
                : ((m = o), (o = o.substring(c + 1))),
              { name: o, path: m }
            );
          },
          getFactoryModulePath: function (o) {
            return o.path + "/" + o.name + ".factory";
          },
        }),
        s = i.Collection.extend({
          model: n,
          constructor: function (c) {
            c || (c = {});
            var m = c.startLocations;
            m
              ? (m = a
                  .chain(m)
                  .concat(["current.group"])
                  .map(r)
                  .filter(t)
                  .unique()
                  .value())
              : (m = l);
            var f = a.map(m, function (g) {
              return { id: g };
            });
            i.Collection.prototype.constructor.call(this, f, c);
          },
          sync: function (o, c, m) {
            if (o !== "read")
              throw new Error(
                "Only fetching the start locations is supported."
              );
            var f = this;
            return (
              m || (m = {}),
              this._resolveFactories(m).then(function () {
                if (m.removeInvalid !== !1) {
                  var g = f.where({ invalid: !0 });
                  f.remove(g);
                }
                var w = f.toJSON();
                m.success && m.success(w, m), f.trigger("sync", f, w, m);
              })
            );
          },
          _resolveFactories: function (o) {
            var c = this.filter(function (g) {
                return g.has("id") && !(g.has("factory") || g.has("error"));
              }),
              m = a.defaults(
                { ignoreErrors: !0 },
                a.omit(o, "success", "error")
              ),
              f = a.invoke(c, "fetch", m);
            return h.when.apply(h, f);
          },
        });
      return s;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/command.type",
    [
      "module",
      "csui/lib/underscore",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
    ],
    function (v, d, a) {
      var h = v.config(),
        i = function (e) {
          var l = e.initialContainer;
          (this.unselectableMembers = e.unselectableMembers),
            (this.selectableMembers = e.selectableMembers),
            (this.invalidMembers = e.invalidMembers),
            (this.selectableTypes = e.selectableTypes || []),
            (this.unselectableTypes = e.unselectableTypes || []),
            (this.showAllTypes = e.showAllTypes || !1),
            (this.parentId = l ? l.get("id") : -1),
            (this.addButtonLabel = e.addButtonLabel || a.addButtonLabel);
        };
      return (
        d.extend(i.prototype, {
          getSelectableMemberTypes: function () {
            return this.showAllTypes ? [] : this.selectableTypes;
          },
          validateTarget: function (e) {
            var l = e.data ? e.data.id : e.get("id"),
              u = e.get("type"),
              r = d.every(this.unselectableMembers, function (t) {
                return l !== t;
              });
            return (
              this.browseAllowed(e) &&
                (r = d.every(this.unselectableTypes, function (t) {
                  return u !== t;
                })),
              r
            );
          },
          validId: function (e) {
            var l = e.data ? e.data.id : e.get("id");
            return l !== this.parentId;
          },
          validateAddableTypes: function (e) {
            return !e.addable_types;
          },
          isSelectableType: function (e) {
            var l = e.get("type");
            if (!l && l !== 0) return !1;
            var u = d.every(this.unselectableTypes, function (r) {
              return l !== r;
            });
            return (
              u &&
                !d.isEmpty(this.selectableTypes) &&
                ((u = d.indexOf(this.selectableTypes, l) !== -1),
                !u &&
                  this.browseAllowed(e) &&
                  d.indexOf(this.selectableTypes, -1) > -1 &&
                  (u = !0)),
              u
            );
          },
          isSelectable: function (e) {
            var l = e.data ? e.data.id : e.get("id");
            if (e.get("unselectable")) return !1;
            var u = this.isSelectableType(e);
            return (
              u &&
                (u = d.every(this.unselectableMembers, function (r) {
                  return l !== r;
                })),
              this.selectableMembers && (u = e.get("type") === 1),
              u
            );
          },
          browseAllowed: function (e) {
            return e.get("type") === 1;
          },
          validateMember: function (e) {
            var l = this._hasValidId(e);
            return (
              l &&
                !this.showAllTypes &&
                (this.browseAllowed(e) ||
                  (this.selectableTypes.length > 0 &&
                    this.selectableTypes.indexOf(e.get("type")) === -1 &&
                    (l = !1))),
              l
            );
          },
          _hasValidId: function (e) {
            return d.every(this.invalidmembers, function (l) {
              return l.get("id") !== e.get("id");
            });
          },
        }),
        i
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <span class="cs-icon ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "iconClass") || (e != null ? n(e, "iconClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 38 },
                    },
                  })
                : t)
            ) +
            `"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<a role="menuitem" tabindex="-1" href="#" class="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "class") || (e != null ? s(e, "class") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "class",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 49 },
                      end: { line: 1, column: 58 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "icon") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 4, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <span class="cs-label">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 25 },
                      end: { line: 5, column: 33 },
                    },
                  })
                : n)
            ) +
            `</span>
</a>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_node.picker_impl_header_start.location.selector_start.location.selector.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<button id="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "id") || (e != null ? n(e, "id") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 12 },
                      end: { line: 1, column: 18 },
                    },
                  })
                : t)
            ) +
            `" class="binf-btn binf-btn-default binf-dropdown-toggle csui-acc-focusable"
        data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
        aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "labelSelectLocation") ||
                  (e != null ? n(e, "labelSelectLocation") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "labelSelectLocation",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 20 },
                      end: { line: 3, column: 43 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "iconClass") || (e != null ? n(e, "iconClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 15 },
                      end: { line: 4, column: 28 },
                    },
                  })
                : t)
            ) +
            `"></span>
  <span class="cs-label">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 25 },
                      end: { line: 5, column: 33 },
                    },
                  })
                : t)
            ) +
            `</span>
  <span class="cs-icon icon-caret-down"></span>
</button>
<div class="csui-separator"></div>
<ul class="binf-dropdown-menu" role="menu" aria-labelledby="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "id") || (e != null ? n(e, "id") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 60 },
                      end: { line: 9, column: 66 },
                    },
                  })
                : t)
            ) +
            `"></ul>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_node.picker_impl_header_start.location.selector_start.location.selector",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/dialogs/node.picker/start.locations/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/dialogs/node.picker/start.locations/impl/nls/root/lang", {
    labelNoSelection: "Go to...",
    labelSearch: "Search",
    labelCurrentLocation: "Current location",
    labelFavorites: "Favorites",
    labelEnterpriseVolume: "Enterprise volume",
    labelPersonalVolume: "Personal volume",
    labelPerspectiveAssetsVolume: "Perspective assets volume",
    labelRecentContainers: "Recent locations",
    labelSelectLocation: "Select location",
    labelSupportAssetsVolume: "Support assets volume",
  }),
  csui.define(
    "css!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.item",
      "hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
      "css!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
          tagName: "li",
          attributes: { role: "presentation" },
          template: i,
          templateHelpers: function () {
            return { iconClass: t(this.model) };
          },
          triggers: { "click >a": "click:link" },
          constructor: function () {
            a.ItemView.prototype.constructor.apply(this, arguments),
              this.listenTo(this.model, "change", this.render),
              this.listenTo(this.model, "activate", this._activate),
              this.listenTo(this.model, "deactivate", this._deactivate);
          },
          _activate: function () {
            (this._parent.activeModel = this.model),
              this.el.classList.add("binf-active");
          },
          _deactivate: function () {
            this.el.classList.remove("binf-active");
          },
        }),
        r = a.CompositeView.extend({
          className: "dropdown-locations",
          template: e,
          childView: u,
          childViewContainer: "> .binf-dropdown-menu",
          behaviors: { TabableRegion: { behaviorClass: h } },
          ui: {
            toggle: "> .binf-dropdown-toggle",
            selectedLabel: ">.binf-dropdown-toggle >.cs-label",
            selectedIcon:
              ">.binf-dropdown-toggle >.cs-icon:not(.icon-caret-down)",
            selectedLocation:
              ">.binf-dropdown-toggle >span:not(.icon-caret-down)",
          },
          events: { keyup: "onKeyInView" },
          constructor: function (s) {
            a.CompositeView.prototype.constructor.apply(this, arguments),
              (this.selected = new d.Model()),
              this.options.selected
                ? this._setSelection(this.options.selected.attributes)
                : this.resetSelection(),
              (this.activeModel = this.selected),
              this.listenTo(this.collection, "change", this._refreshSelection),
              this.listenTo(this.selected, "change", this._updateSelection),
              this.listenTo(d, "closeToggleAction", this._closeToggle);
          },
          filter: function (n, s, o) {
            return !n.get("hide");
          },
          currentlyFocusedElement: function () {
            return this.$el.find("button");
          },
          accDeactivateTabableRegion: function () {
            this._closeToggle();
          },
          reset: function () {
            this.resetSelection();
          },
          resetSelection: function () {
            this.selected.set({
              id: v.uniqueId(),
              name: l.labelNoSelection,
              icon: "",
            });
          },
          serializeData: function () {
            var n = v.pick(this.selected.toJSON(), ["id", "name", "icon"]);
            return v.defaults({ id: v.uniqueId() }, n);
          },
          templateHelpers: function () {
            return {
              search: l.labelSearch,
              iconClass: t(this.selected),
              labelSelectLocation: l.labelSelectLocation,
            };
          },
          onKeyInView: function (n) {
            var s = this.$el.hasClass("binf-open");
            if (n.keyCode === 27 && s)
              return (
                this.$el.removeClass("binf-open"),
                this.$('*[tabindex = "0"]').trigger("focus"),
                !1
              );
          },
          onRender: function () {
            this.ui.toggle.binf_dropdown(),
              this.options.selected &&
                this.options.selected.trigger("activate");
          },
          onChildviewClickLink: function (n) {
            this.ui.selectedLabel.removeClass("select-prompt"),
              this._setSelection(n.model.attributes),
              this.ui.toggle.binf_dropdown("toggle"),
              this.ui.selectedLocation.removeClass("binf-hide"),
              this.triggerMethod("change:location", n.model),
              this.$el.trigger("setCurrentTabFocus");
          },
          hideDropDownLabel: function (n) {
            var s = this.selected.get("factory"),
              o = s.getLocationParameters().container,
              c = o && o.get("id"),
              m = n && n.get("id");
            n && m !== c
              ? (this._setSelection({ name: l.labelSelectLocation, id: "" }),
                this.ui.selectedLabel.addClass("select-prompt"),
                this.ui.selectedIcon.addClass("binf-hide"))
              : m === c &&
                this.ui.selectedLabel[0].innerHTML !== o.get("name") &&
                this.activeModel &&
                this.activeModel.get("name") !== l.labelCurrentLocation &&
                ((this.selected.attributes.name = o.get("name")),
                this._updateSelection());
          },
          _setSelection: function (n) {
            this.selected.set(n);
          },
          _updateSelection: function () {
            this.ui.selectedLabel.text(this.selected.get("name")),
              this.ui.selectedIcon.attr("class", t(this.selected)),
              this.collection.get(this.activeModel).trigger("deactivate");
            var n = this.collection.get(this.selected);
            n && n.trigger("activate");
          },
          _refreshSelection: function (n) {
            n.get("id") === this.selected.get("id") &&
              this._setSelection(n.attributes);
          },
          _closeToggle: function () {
            var n = this.$el;
            n.hasClass &&
              n.hasClass("binf-open") &&
              this.ui.toggle.binf_dropdown("toggle"),
              this.ui.toggle &&
                this.ui.toggle.attr &&
                this.ui.toggle.attr("aria-expanded", "false");
          },
        });
      function t(n) {
        var s = n.get("icon") || "";
        return (
          s && s.indexOf("-") < 0 && (s = "icon-menu-" + s), "cs-icon " + s
        );
      }
      return r;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/header/user.search/user.search",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-user-search-container">
  <div class="csui-user-search-bar"></div>
</div><a href="javascript:void(0);" class="icon icon-global-search csui-header-userpicker-icon
         icon-header-search csui-acc-focusable" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "searchIconTitle") ||
                  (e != null ? n(e, "searchIconTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "searchIconTitle",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 55 },
                      end: { line: 4, column: 74 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0"
         data-cstabindex="-1" role="button" aria-expanded="false"
         aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "searchIconAria") ||
                  (e != null ? n(e, "searchIconAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "searchIconAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 21 },
                      end: { line: 6, column: 39 },
                    },
                  })
                : t)
            ) +
            '"></a>'
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_header_user.search_user.search",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/header/user.search/user.search.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "i18n",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "hbs!csui/dialogs/members.picker/impl/header/user.search/user.search",
    ],
    function (v, d, a, h, i, e, l) {
      var u = a.ItemView.extend({
        className: "csui-user-lookup",
        template: l,
        templateHelpers: {
          searchIconTitle: e.searchIconTitle,
          searchIconAria: e.searchIconAria,
        },
        ui: {
          input: ".cs-search",
          userPickerIcon: ".csui-header-userpicker-icon",
        },
        events: { "click @ui.userPickerIcon": "userPickerIconClicked" },
        initialize: function (r) {
          this.options = r;
        },
        constructor: function (t) {
          var n = this;
          t || (t = {}),
            t.data || (t.data = {}),
            (this.options = t),
            (this.direction = i.settings.rtl ? "left" : "right"),
            a.ItemView.prototype.constructor.call(this, t);
        },
        onShow: function () {
          var r = this;
          csui.require(
            ["csui/controls/userpicker/userpicker.view"],
            function (t) {
              r.pickerView = new t({
                context: r.options.context,
                limit: 5,
                memberFilter: { type: [0, 1] },
                widgetoptions: r.options,
                placeholder: r.options.placeHolder || e.UserPickerPlaceHolder,
                prettyScrolling: !0,
                scrollContainerHeight: "auto",
                model: r.options.userPickerModel,
                id_input: d.uniqueId(
                  "csui-inline-permissions-user-picker-input"
                ),
                lightWeight: !1,
              });
              var n = new a.Region({ el: r.$el.find(".csui-user-search-bar") });
              n.show(r.pickerView),
                r.listenTo(r.pickerView, "item:change", r.processItemChange),
                r.listenTo(r.pickerView, "item:clear", r.processItemChange);
            }
          );
        },
        processItemChange: function () {
          var r = arguments.length > 0 && arguments[0].item;
          (this.param = r),
            this.trigger("show:selectItem", this.param),
            this.processAfterSelect();
        },
        processAfterSelect: function () {
          this.pickerView.ui.searchbox.val() !== "" &&
            this.pickerView &&
            this.pickerView.ui &&
            this.pickerView.ui.searchclear &&
            this.pickerView.ui.searchclear.trigger("click");
        },
        updatePlaceHolder: function (r) {
          r
            ? this.$el
                .find("input")
                .attr("placeholder", e.addAnotherNamePlaceHolder)
            : this.$el
                .find("input")
                .attr("placeholder", e.UserPickerPlaceHolder);
        },
        currentlyFocusedElement: function (r) {
          if (this.$el) {
            var t = this.$el.find("*[data-cstabindex=-1]");
            t.length && t.prop("tabindex", 0);
            var n = !!r && r.shiftKey;
            !n &&
            this.$el.find(".search-bar").length &&
            this.$el.find(".search-bar").is(":visible")
              ? (this.focusElement = this.$el.find(".csui-input"))
              : this.$el.find("a.csui-acc-focusable").length &&
                (this.focusElement = this.$el.find("a.csui-acc-focusable"));
          }
          return this.focusElement;
        },
        userPickerIconClicked: function (r) {
          if (
            (v(document).bind(
              "click." + this.cid + " keydown." + this.cid,
              this,
              this._hideSearchBar
            ),
            this.ui.input.toggleClass(h.accessibilityFocusableClass),
            !this.$el.find(".csui-user-search-container").is(":visible"))
          ) {
            if (this.$el && this.$el.parents()) {
              var t = this;
              this.hideStartLocations(),
                this.$el
                  .find(".csui-user-search-container")
                  .show(
                    "blind",
                    { direction: this.direction },
                    "200",
                    function () {
                      t.$el
                        .find(".csui-user-search-container input")
                        .trigger("focus");
                    }
                  );
            }
          }
          this.ui.userPickerIcon.attr("aria-expanded", !0);
        },
        _hideSearchBar: function (r) {
          var t = r || window.event,
            n = v(".csui-user-search-container"),
            s = r.data;
          n.is(":visible") &&
            ((t.type === "keydown" && (t.keyCode === 27 || t.which === 27)) ||
              (!v(t.target).closest(n).length &&
                t.type === "click" &&
                !v(t.target).closest(".csui-header-userpicker-icon").length)) &&
            (s.$el.find(".csui-user-search-container input").val(""),
            s.$el
              .find(n)
              .hide(
                "blind",
                { direction: r.data.direction },
                "200",
                function () {
                  s.showStartLocations(), (s.focusedElement = void 0);
                  var o = s.currentlyFocusedElement();
                  o.trigger("focus");
                }
              ),
            v(document).unbind("click." + s.cid + " keydown." + s.cid),
            s.ui.userPickerIcon instanceof Object &&
              s.ui.userPickerIcon.attr("aria-expanded", !1));
        },
        showStartLocations: function (r) {
          this.trigger("show:startLocation");
        },
        hideStartLocations: function (r) {
          this.trigger("hide:startLocation");
        },
      });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/members.picker/impl/header/members.picker.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <h2 class="member-title">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 27 },
                      end: { line: 2, column: 36 },
                    },
                  })
                : n)
            ) +
            `</h2><span class="csui-separator"></span>
  <div class="csui-target-controls">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "locationSelector") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 7, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="csui-member-picker-container">
      <div class="csui-member-picker"></div>
    </div>
  </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="csui-start-locations binf-dropdown ' +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "displayStartLocation") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 53 },
                  end: { line: 6, column: 50 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></div>
`
          );
        },
        3: function (i, e, l, u, r) {
          return "binf-hidden";
        },
        5: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <h2 class="member-title member-picker-view-header">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 53 },
                      end: { line: 13, column: 62 },
                    },
                  })
                : n)
            ) +
            `</h2><span
      class="csui-view-separator csui-separator binf-hidden"></span>
  <div class="csui-target-controls">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isNotDeleted") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(6, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 16, column: 4 },
                  end: { line: 24, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
`
          );
        },
        6: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `      <div class="csui-member-picker-container">
        <span class="csui-member-picker"></span>
        <span tabindex="-1" class="csui-add-member binf-hidden"
              title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "addMemberTitle") ||
                  (e != null ? s(e, "addMemberTitle") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "addMemberTitle",
                    hash: {},
                    loc: {
                      start: { line: 20, column: 21 },
                      end: { line: 20, column: 39 },
                    },
                  })
                : n)
            ) +
            `">
          ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                size: "large",
                states: "true",
                iconName: "csui_action_add32",
              },
              loc: {
                start: { line: 21, column: 10 },
                end: { line: 21, column: 79 },
              },
            })) != null
              ? t
              : "") +
            `
        </span>
      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "adduserorgroup") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(5, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 26, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_members.picker_impl_header_members.picker.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/members.picker/impl/header/members.picker.header",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/members.picker/impl/header/members.picker.header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/icons.v2",
      "csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.view",
      "csui/dialogs/members.picker/impl/header/user.search/user.search.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/commands/permissions/permission.util",
      "hbs!csui/dialogs/members.picker/impl/header/members.picker.header",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "css!csui/dialogs/members.picker/impl/header/members.picker.header",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      var n = a.LayoutView.extend({
        template: r,
        className: "cs-header-control",
        regions: {
          startLocations: ".csui-start-locations",
          userSearch: ".csui-member-picker",
        },
        templateHelpers: function () {
          return {
            adduserorgroup: this.options.adduserorgroup,
            locationSelector: this.options.locationSelector,
            displayStartLocation: this.options.displayStartLocation,
            isNotDeleted: !(
              this.options.headerViewoptions.selectedGroup &&
              this.options.headerViewoptions.selectedGroup.get(
                "right_id_expand"
              ).deleted
            ),
            title: this.options.title ? this.options.title : t.dialogTitle,
            addMemberTitle: t.AddMember,
          };
        },
        ui: {
          addIcon: ".csui-add-member",
          memberPickerContainer: ".csui-member-picker-container",
          viewSeparator: ".csui-view-separator",
          headerTitle: ".member-picker-view-header",
        },
        events: {
          "click @ui.addIcon": "onAddMemberClick",
          keyup: "onKeyInView",
        },
        onAddMemberClick: function (s) {
          s.stopPropagation(),
            s.preventDefault(),
            this.ui.addIcon.addClass("binf-hidden"),
            this.ui.viewSeparator.removeClass("binf-hidden"),
            this.ui.headerTitle.html(t.AddUserOrGroup),
            this.editPermission && this.showUserSearchView(s),
            this.trigger("enable:add");
        },
        behaviors: { TabableRegion: { behaviorClass: l } },
        currentlyFocusedElement: function (s) {
          if (this.$el) {
            var o = this.$("*[tabindex]:visible");
            return o.length && o.prop("tabindex", 0), !!o[0] && d(o[0]);
          }
        },
        onKeyInView: function (s) {
          s.keyCode === 13 &&
            d(s.target).hasClass("csui-add-member") &&
            d(s.target).trigger("click");
        },
        initialize: function () {
          var s = this.options;
          s.locationSelector &&
            s.adduserorgroup &&
            ((this.startLocationView = new i({
              collection: this.options.locations,
              title: this.options.dialogTitle,
              selected: this.options.initialLocation,
            })),
            (s.placeHolder =
              this.options.selectedMember !== void 0
                ? t.addAnotherNamePlaceHolder
                : t.userSearchPlaceHolder),
            (s.addAnotherNamePlaceHolder = t.addAnotherNamePlaceHolder),
            (this.options = s));
        },
        onRender: function () {
          var s = this.options;
          (this.editPermission = u.hasEditPermission(s)),
            this.editPermission
              ? this.ui.addIcon.removeClass("binf-hidden")
              : this.ui.addIcon.addClass("binf-hidden"),
            this.options.showUserPicker &&
              (this.ui.addIcon.addClass("binf-hidden"),
              this.showUserSearchView(),
              this.trigger("enable:add")),
            this.startLocationView &&
              s.adduserorgroup &&
              (this.startLocations.show(this.startLocationView),
              this.options.showUserPicker &&
                (this.showUserSearchView(),
                this.userSearchView.on(
                  "show:startLocation",
                  this.showStartLocations,
                  this
                ),
                this.userSearchView.on(
                  "hide:startLocation",
                  this.hideStartLocations,
                  this
                )));
        },
        showUserSearchView: function (s) {
          (this.userSearchView = new e(this.options)),
            this.userSearch.show(this.userSearchView),
            this.userSearchView.userPickerIconClicked(s),
            this.userSearchView.on("show:selectItem", this.selectUsers, this);
        },
        selectUsers: function (s) {
          s && this.trigger("show:selectItem", s);
        },
        showStartLocations: function () {
          this.startLocationView.$el.removeClass("binf-hidden");
        },
        hideStartLocations: function () {
          this.startLocationView.$el.addClass("binf-hidden");
        },
        onDestroy: function () {
          this.startLocationView && this.startLocationView.destroy();
        },
      });
      return n;
    }
  ),
  csui.define(
    "csui/controls/wizard/step/footer.view",
    [
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (v, d) {
      var a = v.ItemView.extend({
          tagName: "button",
          className: "binf-btn",
          template: !1,
          triggers: { click: "click" },
          behaviors: { TabableRegion: { behaviorClass: d } },
          constructor: function (e) {
            v.View.prototype.constructor.apply(this, arguments);
          },
          isTabable: function () {
            return (
              this.$el.is(":not(:disabled)") && this.$el.is(":not(:hidden)")
            );
          },
          currentlyFocusedElement: function () {
            return (
              this.$el.prop("tabindex") === -1 && this.$el.prop("tabindex", 0),
              this.$el
            );
          },
          onRender: function () {
            var i = this.$el,
              e = this.model.attributes;
            i.text(e.label),
              i.addClass(
                e.default
                  ? "binf-btn-primary cs-add-button"
                  : "binf-btn-default"
              ),
              e.toolTip && i.attr("title", e.toolTip),
              e.separate && i.addClass("cs-separate"),
              this.updateButton(e);
          },
          updateButton: function (i) {
            var e = this.$el;
            i || (i = {}),
              i.hidden !== void 0 &&
                (i.hidden
                  ? e.addClass("binf-hidden")
                  : e.removeClass("binf-hidden")),
              i.disabled !== void 0 && e.prop("disabled", i.disabled);
          },
        }),
        h = v.CollectionView.extend({
          childView: a,
          constructor: function (e) {
            v.CollectionView.prototype.constructor.apply(this, arguments),
              this.listenTo(
                this,
                "update:button",
                this.selectedMemberCollection,
                this
              );
          },
          onDomRefresh: function () {
            this.children.each(function (i) {
              i.trigger("dom:refresh");
            });
          },
          selectedMemberCollection: function (i) {
            this.selectedMemberCollection = i;
          },
          getButtons: function () {
            return this.children.toArray();
          },
          updateButton: function (i, e) {
            var l = this.collection.get(i);
            l
              ? this.children.findByModel(l).updateButton(e)
              : a.updateButton &&
                a.updateButton(this.$('[data-cs-id="' + i + '"]'), e);
          },
          getPreviousButton: function () {
            return this.children.toArray()[0];
          },
          getNextButton: function () {
            var i = this.children.toArray();
            return i[i.length - 1];
          },
        });
      return h;
    }
  ),
  csui.define(
    "hbs!csui/controls/wizard/step/impl/step.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "actionIconNameLeft") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 10, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "iconNameLeft") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(7, r, 0),
                inverse: i.program(9, r, 0),
                loc: {
                  start: { line: 11, column: 2 },
                  end: { line: 30, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '    <h4 class="tile-title binf-modal-title">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 44 },
                      end: { line: 31, column: 53 },
                    },
                  })
                : n)
            ) +
            `</h4>
  </div>

    <div class="cs-header-control"></div>

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "showCloseBtn") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(17, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 36, column: 2 },
                  end: { line: 41, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <span class="tile-type-action-icon cs-icon-left" tabindex="0">
      ` +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                iconName: e != null ? n(e, "actionIconNameLeft") : e,
              },
              loc: {
                start: { line: 4, column: 6 },
                end: { line: 4, column: 61 },
              },
            })) != null
              ? t
              : "") +
            `
    </span>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "actionIconLeft") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(5, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 7, column: 4 },
                end: { line: 9, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span class="tile-type-action-icon cs-icon-left ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "actionIconLeft") ||
                  (e != null ? n(e, "actionIconLeft") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "actionIconLeft",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 54 },
                      end: { line: 8, column: 72 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0"></span>
`
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <span class="tile-type-icon cs-icon-left">
      ` +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                iconName: e != null ? n(e, "iconNameLeft") : e,
              },
              loc: {
                start: { line: 13, column: 6 },
                end: { line: 13, column: 55 },
              },
            })) != null
              ? t
              : "") +
            `
    </span>
    <div class="tile-title">
`
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "iconLeft") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(10, r, 0),
              inverse: i.program(12, r, 0),
              loc: {
                start: { line: 17, column: 4 },
                end: { line: 29, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span class="tile-type-icon cs-icon-left ' +
            i.escapeExpression(
              ((t =
                (t = n(l, "iconLeft") || (e != null ? n(e, "iconLeft") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconLeft",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 47 },
                      end: { line: 18, column: 59 },
                    },
                  })
                : t)
            ) +
            `"></span>
      <div class="tile-title">
`
          );
        },
        12: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "imageLeftUrl") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(13, r, 0),
              inverse: i.program(15, r, 0),
              loc: {
                start: { line: 21, column: 6 },
                end: { line: 28, column: 13 },
              },
            }
          )) != null
            ? t
            : "";
        },
        13: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '          <div class="tile-type-image ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "imageLeftClass") ||
                  (e != null ? n(e, "imageLeftClass") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imageLeftClass",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 38 },
                      end: { line: 22, column: 56 },
                    },
                  })
                : t)
            ) +
            `">
            <img src="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "imageLeftUrl") ||
                  (e != null ? n(e, "imageLeftUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imageLeftUrl",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 22 },
                      end: { line: 23, column: 38 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true" alt="">
          </div>
        <div class="tile-title">
`
          );
        },
        15: function (i, e, l, u, r) {
          return `        <div class="tile-title cs-text-only">
`;
        },
        17: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="cs-close" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "dialogCloseButtonTooltip") ||
                  (e != null ? n(e, "dialogCloseButtonTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "dialogCloseButtonTooltip",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 35 },
                      end: { line: 37, column: 63 },
                    },
                  })
                : t)
            ) +
            `">
        <div class="icon circular ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "iconRight") || (e != null ? n(e, "iconRight") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconRight",
                    hash: {},
                    loc: {
                      start: { line: 38, column: 34 },
                      end: { line: 38, column: 47 },
                    },
                  })
                : t)
            ) +
            '" tabindex="0" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "dialogCloseAria") ||
                  (e != null ? n(e, "dialogCloseAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "dialogCloseAria",
                    hash: {},
                    loc: {
                      start: { line: 38, column: 74 },
                      end: { line: 38, column: 93 },
                    },
                  })
                : t)
            ) +
            `"
             role="button"></div>
      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "expandedHeader") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 43, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_wizard_step_impl_step.header", h), h
      );
    }
  ),
  csui.define("csui/controls/wizard/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/wizard/impl/nls/root/lang", {
    dialogCloseButtonTooltip: "Close",
    dialogCloseAria: "Close dialog",
    back: "Back",
    next: "Next",
    cancel: "Cancel",
  }),
  csui.define("css!csui/controls/wizard/impl/wizard", [], function () {}),
  csui.define(
    "csui/controls/wizard/step/impl/header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/controls/wizard/step/impl/step.header",
      "i18n!csui/controls/wizard/impl/nls/lang",
      "css!csui/controls/wizard/impl/wizard",
    ],
    function (v, d, a, h, i, e) {
      var l = a.ItemView.extend({
        template: i,
        behaviors: { TabableRegion: { behaviorClass: h } },
        ui: { headerControl: ".cs-header-control" },
        events: { keydown: "onKeyInView" },
        templateHelpers: function () {
          return {
            iconLeft: this.options.iconLeft,
            actionIconLeft: this.options.actionIconLeft,
            imageLeftUrl: this.options.imageLeftUrl,
            imageLeftClass: this.options.imageLeftClass,
            title: this.options.title,
            showCloseBtn: this.options.showCloseBtn,
            iconRight: this.options.iconRight || "cs-icon-cross",
            expandedHeader: this.options.expandedHeader,
            dialogCloseButtonTooltip: e.dialogCloseButtonTooltip,
            dialogCloseAria: e.dialogCloseAria,
          };
        },
        constructor: function (r) {
          a.View.prototype.constructor.apply(this, arguments);
        },
        isTabable: function () {
          return this.$("*[tabindex]").length > 0;
        },
        currentlyFocusedElement: function (u) {
          var r = this.$("*[tabindex]");
          return (
            r.length && r.prop("tabindex", 0),
            u && u.shiftKey ? d(r[r.length - 1]) : d(r[0])
          );
        },
        onLastTabElement: function (u, r) {
          return u && r.target === this.$("*[tabindex]")[0];
        },
        onKeyInView: function (u) {
          var r = u.keyCode;
          (r === 13 || r === 32) && d(u.target).trigger("click");
        },
        onRender: function () {
          var u = this.options.headers || [];
          u.length &&
            v.each(
              u,
              function (t) {
                var n = this._renderHeader(t);
                this.$el.append(n);
              },
              this
            );
          var r = this.options.headerControl;
          r &&
            (this.ui.headerControl.append(r.$el),
            r.render(),
            r.trigger("dom:refresh")),
            this.options.actionIconLeft && this._adjustTitleCSS();
        },
        onDomRefresh: function () {
          var u = this.options.headerControl;
          u && (u.triggerMethod("dom:refresh"), u.triggerMethod("after:show"));
        },
        _renderHeader: function (u) {
          var r = d('<div class="modal-header-item"></div>').text(u.label);
          return u.class && r.addClass(u.class), u.id && r.attr("id", u.id), r;
        },
        _adjustTitleCSS: function (u) {
          this.$el.find("div.tile-title").addClass("tile-action-icon-tittle");
        },
      });
      return l;
    }
  ),
  csui.define(
    "hbs!csui/controls/wizard/step/impl/wizard.step",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `  <div class="binf-modal-dialog binf-modal-lg" role="dialog">
`;
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "midSize") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(4, r, 0),
              inverse: i.program(6, r, 0),
              loc: {
                start: { line: 4, column: 2 },
                end: { line: 8, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        4: function (i, e, l, u, r) {
          return `    <div class="binf-modal-dialog binf-modal-md" role="dialog">
`;
        },
        6: function (i, e, l, u, r) {
          return `    <div class="binf-modal-dialog" role="dialog">
`;
        },
        8: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="binf-modal-body cs-dialog cs-dialog-bodymessage">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "bodyMessage") ||
                  (e != null ? n(e, "bodyMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "bodyMessage",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 67 },
                      end: { line: 16, column: 82 },
                    },
                  })
                : t)
            ) +
            `</div>
`
          );
        },
        10: function (i, e, l, u, r) {
          return `      <div class="binf-modal-body"></div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "largeSize") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 9, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
  <div class="binf-modal-content" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "dialogTxtAria") ||
                  (e != null ? s(e, "dialogTxtAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "dialogTxtAria",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 46 },
                      end: { line: 11, column: 63 },
                    },
                  })
                : n)
            ) +
            `">

    <div class="tile-header binf-modal-header"></div>

` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "bodyMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.program(10, r, 0),
                loc: {
                  start: { line: 15, column: 4 },
                  end: { line: 19, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `
    <div class="binf-modal-footer binf-hidden"></div>

  </div>

</div>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_wizard_step_impl_wizard.step", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/wizard/step/wizard.step.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/controls/wizard/step/footer.view",
      "csui/controls/wizard/step/impl/header.view",
      "hbs!csui/controls/wizard/step/impl/wizard.step",
      "csui/utils/log",
      "i18n!csui/controls/wizard/impl/nls/lang",
      "i18n",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      n = n(v.id);
      var c = i.LayoutView.extend({
        className: function () {
          var m = "cs-wizard-step cs-dialog binf-modal binf-fade";
          return (
            this.options.className &&
              (m += " " + d.result(this.options, "className")),
            m
          );
        },
        attributes: { tabindex: "-1", role: "dialog", "aria-hidden": "true" },
        template: t,
        behaviors: {
          TabablesBehavior: {
            behaviorClass: l,
            recursiveNavigation: !0,
            containTabFocus: !0,
          },
        },
        regions: {
          body: ".binf-modal-body",
          header: ".binf-modal-header",
          footer: ".binf-modal-footer",
        },
        ui: {
          header: ".binf-modal-header",
          footer: ".binf-modal-footer",
          body: ".binf-modal-body",
        },
        events: {
          "hide.binf.modal": "onHiding",
          "hidden.binf.modal": "onHidden",
          "click .cs-close": "onClickClose",
          "shown.binf.modal": "onShown",
          keydown: "onKeyInView",
          setCurrentTabFocus: "setCurrentTabFocus",
          tabNextRegion: "tabNextRegion",
          "click .tile-type-action-icon": "onClickActionIcon",
        },
        templateHelpers: function () {
          return {
            largeSize: this.options.largeSize,
            midSize: this.options.midSize,
            bodyMessage: this.options.bodyMessage,
            dialogTxtAria: this.options.dialogTxtAria,
          };
        },
        constructor: function () {
          i.LayoutView.prototype.constructor.apply(this, arguments),
            this.listenToOnce(this, "before:hide", l.popTabableHandler),
            this.propagateEventsToRegions();
        },
        onKeyInView: function (m) {
          m.keyCode === 27 &&
            (m.preventDefault(),
            m.stopPropagation(),
            this.destroy(),
            this.trigger("close:wizard"));
        },
        setCurrentTabFocus: function () {
          (this.focusOnLastRegion = !0), this.$el.trigger("focus");
        },
        tabNextRegion: function () {
          this.trigger("changed:focus");
        },
        onRender: function () {
          this.$el
            .addClass(c.prototype.className.call(this))
            .attr("tabindex", 0),
            this._renderHeader(),
            this.options.view && this.body.show(this.options.view),
            this._renderFooter();
        },
        onShow: function () {
          a(window).scrollTop(0),
            this.$el.binf_modal({
              backdrop: "static",
              keyboard: !1,
              paddingWhenOverflowing: !1,
            });
        },
        kill: function () {
          return (
            c.__super__.destroy.apply(this, arguments),
            this._scrollToBegin(),
            !0
          );
        },
        destroy: function () {
          return (
            this.$el.is(":visible")
              ? (this.$el.binf_modal("hide"),
                a("body").removeClass("binf-modal-open"))
              : c.__super__.destroy.apply(this, arguments),
            this._scrollToBegin(),
            this
          );
        },
        updateButton: function (m, f) {
          var g = this.footerView;
          if (!g.updateButton)
            throw new Error("Dialog footer does not support button updating.");
          g.updateButton(m, f);
        },
        showView: function (m) {
          this.body.show(m), m.triggerMethod("after:show");
        },
        onShown: function () {
          this.options.view &&
            (this.options.view.triggerMethod("dom:refresh"),
            this.options.view.triggerMethod("after:show")),
            this.headerView &&
              (this.headerView.triggerMethod("dom:refresh"),
              this.headerView.triggerMethod("after:show")),
            this.footerView &&
              (this.footerView.triggerMethod("dom:refresh"),
              this.footerView.triggerMethod("after:show"));
        },
        onHiding: function () {
          this.triggerMethod("before:hide");
        },
        onHidden: function () {
          this.triggerMethod("hide"), this.destroy();
        },
        onClickClose: function (m) {
          m.preventDefault(), m.stopPropagation(), this.trigger("close:wizard");
        },
        onClickActionIcon: function (m) {
          this.options.view.trigger("click:actionIcon");
        },
        onClickButton: function (m) {
          if (m.model.get("id") === "Add") this.trigger("add:member");
          else {
            var f = m.model.attributes;
            f.click && f.click({ dialog: this, button: this.$el }),
              f.close && this.trigger("close:wizard"),
              f.apply && this.trigger("apply:clicked"),
              f.id === "previous" && this.trigger("switch:view");
          }
        },
        _scrollToBegin: function () {
          if (o.settings.rtl === !0) {
            var m = a("body").width();
            a("body").scrollLeft(m);
          } else
            a("body").scrollLeft(0), a(".csui-add-permission").trigger("focus");
        },
        _renderHeader: function () {
          var m = (this.headerView = this.options.headerView),
            f =
              this.options.standardHeader !== void 0
                ? this.options.standardHeader
                : !this.options.template;
          if (
            (m &&
              (m.editpermission =
                !!this.options.wizard &&
                !!this.options.wizard.edit_permission &&
                this.options.wizard.edit_permission),
            m)
          )
            this.header.show(m);
          else {
            var g = {
              iconLeft: this.options.iconLeft,
              actionIconLeft: this.options.actionIconLeft,
              imageLeftUrl: this.options.imageLeftUrl,
              imageLeftClass: this.options.imageLeftClass,
              title: this.options.title,
              iconRight: this.options.iconRight || "cs-icon-cross",
              headers: this.options.headers,
              headerControl: this.options.headerControl,
              expandedHeader: f,
              el: this.ui.header[0],
            };
            (m = this.headerView = new r(g)),
              m.render(),
              this.header.attachView(m),
              this.headerView.trigger("dom:refresh");
          }
        },
        _renderFooter: function () {
          var m = (this.footerView = this.options.footerView);
          if (m) this.ui.footer.removeClass("binf-hidden"), this.footer.show(m);
          else {
            var f = [];
            this.options.isFirstStep ||
              f.push({
                id: "previous",
                label: this.options.previousButtonLabel || s.back,
                toolTip: this.options.previousButtonLabel || s.back,
                default: !1,
                disabled: !1,
                separate: !0,
                click: d.bind(this.onClickPreviousButton, this),
              });
            var g = {
                id: "next",
                label: this.options.nextButtonLabel || s.next,
                toolTip: this.options.nextButtonLabel || s.next,
                default: !0,
                disabled:
                  this.options.disableNext === void 0
                    ? !0
                    : this.options.disableNext,
                click: d.bind(this.onClickNextButton, this),
              },
              w = {
                id: "done",
                label: this.options.doneButtonLabel || s.next,
                toolTip: this.options.doneButtonLabel || s.next,
                default: !0,
                disabled:
                  this.options.disableDone === void 0
                    ? !0
                    : this.options.disableDone,
                click: d.bind(this.onClickDoneButton, this),
              };
            this.options.nextButton
              ? f.push(g)
              : this.options.doneButton && f.push(w),
              f.push({
                id: "cancel",
                label: s.cancel,
                toolTip: s.cancel,
                close: !0,
              });
            var b = this.options.buttons || f;
            b.length && this.ui.footer.removeClass("binf-hidden"),
              (m = this.footerView =
                new u({
                  collection: new h.Collection(b),
                  wizardView: this,
                  el: this.ui.footer[0],
                })),
              this.listenTo(m, "childview:click", this.onClickButton),
              m.render(),
              this.footer.attachView(m);
          }
        },
        showPreviousButton: function () {
          var m = this.footer.currentView.getPreviousButton();
          m.$el.removeClass("binf-hidden");
        },
        hidePreviousButton: function () {
          var m = this.footer.currentView.getPreviousButton();
          m.$el.addClass("binf-hidden");
        },
        validate: function () {
          return this.body.currentView && this.body.currentView.validate
            ? this.body.currentView.validate()
            : !0;
        },
        onClickNextButton: function () {
          this.trigger("next:clicked");
        },
        onClickDoneButton: function () {
          this.trigger("done:clicked");
        },
        onClickPreviousButton: function () {
          this.trigger("previous:clicked");
        },
      });
      return d.extend(c.prototype, e), c;
    }
  ),
  csui.define(
    "hbs!csui/controls/wizard/impl/wizard",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return "";
        },
      });
      return a.registerPartial("csui_controls_wizard_impl_wizard", h), h;
    }
  ),
  csui.define(
    "csui/controls/wizard/wizard.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/controls/wizard/step/wizard.step.view",
      "hbs!csui/controls/wizard/impl/wizard",
      "csui/utils/non-emptying.region/non-emptying.region",
      "csui/utils/log",
      "i18n",
      "css!csui/controls/wizard/impl/wizard",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s) {
      var o = { FORWARD: "forward", BACKWARD: "backward", CLOSE: "close" },
        c = i.LayoutView.extend({
          id: "wizard",
          template: r,
          lastElementFocused: [],
          behaviors: {
            TabablesBehavior: {
              behaviorClass: l,
              recursiveNavigation: !0,
              containTabFocus: !0,
            },
          },
          className: function () {
            var m = "cs-wizard";
            return (
              this.options.className &&
                (m += " " + d.result(this.options, "className")),
              m
            );
          },
          templateHelpers: function () {
            return {};
          },
          constructor: function (f) {
            f || (f = {}),
              i.LayoutView.prototype.constructor.apply(this, arguments),
              this.propagateEventsToRegions();
          },
          initialize: function () {
            (this.currentStep = 0),
              (this.stepViews = []),
              (this.direction = "right");
          },
          show: function (m) {
            var f = a.fn.binf_modal.getDefaultContainer(),
              g = new t({ el: f });
            return (
              (this.edit_permission = m.editpermission), g.show(this), this
            );
          },
          onRender: function () {
            return this.renderCurrentStep(), this;
          },
          renderCurrentStep: function () {
            if (
              ((this.currentView = this.getCurrentView()),
              this.currentView._isRendered)
            )
              this.showCurrentView();
            else {
              var m = new t({ el: this.el });
              m.show(this.currentView);
            }
          },
          getCurrentView: function () {
            if (this.currentStep < this.stepViews.length)
              return this.stepViews[this.currentStep];
            var m = this.currentStep,
              f = new u(
                d.extend(this.options.steps[m], {
                  wizard: this,
                  isFirstStep: this.isFirstStep(),
                })
              );
            return (
              this.stepViews.push(f),
              this.listenTo(f, "next:clicked", this.nextStep)
                .listenTo(f, "previous:clicked", this.prevStep)
                .listenTo(f, "done:clicked", this.save)
                .listenTo(f, "apply:clicked", this.apply)
                .listenTo(f, "add:member", this.addMember)
                .listenTo(f, "close:wizard", this.closeWizard),
              f
            );
          },
          nextStep: function () {
            this.currentView.validate() &&
              (this.isLastStep()
                ? this.save()
                : (this.hideCurrentView(),
                  (this.currentStep += 1),
                  (this.direction = s && s.settings.rtl ? "left" : "right"),
                  this.renderCurrentStep(),
                  this.handleFocus(o.FORWARD)));
          },
          prevStep: function () {
            this.isFirstStep() ||
              (this.hideCurrentView(),
              (this.currentStep -= 1),
              (this.direction = s && s.settings.rtl ? "right" : "left"),
              this.renderCurrentStep(),
              this.handleFocus(o.BACKWARD));
          },
          hideCurrentView: function () {
            this.currentView.$el.addClass("binf-hidden");
          },
          showCurrentView: function () {
            this.currentView.$el.removeClass("binf-hidden");
          },
          addDirection: function () {
            this.currentView.$el.find(".binf-modal-dialog").removeClass("left"),
              this.currentView.$el
                .find(".binf-modal-dialog")
                .removeClass("right"),
              this.currentView.$el
                .find(".binf-modal-dialog")
                .addClass(this.direction);
          },
          updateButton: function (m, f) {
            if (!this.currentView.updateButton)
              throw new Error(
                "Dialog footer does not support button updating."
              );
            this.currentView.updateButton(m, f);
          },
          apply: function () {
            this.trigger("apply:result");
          },
          save: function () {
            this.trigger("save:result");
          },
          addMember: function () {
            this.trigger("add:member");
          },
          isFirstStep: function () {
            return this.currentStep === 0;
          },
          isLastStep: function () {
            return this.currentStep === this.options.steps.length - 1;
          },
          onBeforeDestroy: function () {
            d.each(this.stepViews, function (m, f) {
              m.destroy();
            });
          },
          closeWizard: function () {
            this.trigger("closing:wizard"),
              this.handleFocus(o.CLOSE),
              this.destroy();
          },
          getStepViewByStepNumber: function (m) {
            return this.stepViews && m < this.stepViews.length
              ? this.stepViews[m]
              : null;
          },
          handleFocus: function (m) {
            if (m === o.FORWARD)
              this.lastElementFocused.push(document.activeElement),
                this.currentView.el.focus();
            else if (m === o.BACKWARD) {
              if (this.lastElementFocused.length > 0) {
                var f = this.lastElementFocused.pop();
                f.focus();
              }
            } else
              this.lastElementFocused.splice(0, this.lastElementFocused.length);
          },
        });
      return d.extend(c.prototype, e), c;
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/edit/permission.level.selector/impl/permission.level.selector",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <li class="csui-permission-level-item" data-optionid="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "id") : e, e)) +
            '" role="option" aria-label="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "name") : e, e)) +
            `">
      <a tabindex="-1" href="#">
        <span class="cs-icon"></span>
        <span class="cs-label">` +
            i.escapeExpression(i.lambda(e != null ? n(e, "name") : e, e)) +
            `</span>
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "showActionIcon") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 8 },
                  end: { line: 9, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </a>
    </li>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '          <span class="csui-icon ' +
            i.escapeExpression(
              i.lambda(e != null ? t(e, "actionIcon") : e, e)
            ) +
            `"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<ul class="csui-permission-levels" role="listbox">
` +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "permissionLevelOptions") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 12, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `</ul>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_edit_permission.level.selector_impl_permission.level.selector",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/widgets/permissions/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/permissions/impl/nls/root/lang", {
    properties: "Properties",
    versions: "Versions",
    general: "General",
    UserPickerPlaceHolder: "Enter name or group",
    PermissionLookupPlaceHolder: "Enter name or group for permissions lookup",
    right_id: "User / Group",
    permission_level: "Permission level",
    goBackTooltip: "Go back",
    emptyPermissionListMsg: "{0} was not found in this permissions list.",
    addMemberToGroup:
      "Add {0} as a member to a group that currently has permissions",
    grantAccessToMember:
      "Grant access to a group in which {0} is already a member",
    permissionLevelFullControl: "Full control",
    permissionLevelWrite: "Write",
    permissionLevelRead: "Read",
    permissionLevelCustom: "Custom...",
    permissionLevelNone: "None",
    FullControl: "Full control",
    Write: "Write",
    Read: "Read",
    Custom: "Custom",
    None: "None",
    see: "See",
    see_contents: "See contents",
    modify: "Modify",
    edit_attributes: "Edit attributes",
    add_items: "Add items",
    reserve: "Reserve",
    delete_versions: "Delete version",
    delete: "Delete",
    edit_permissions: "Edit permissions",
    saveButtonLabel: "Ok",
    cancelButtonLabel: "Cancel",
    applyButtonLabel: "Apply",
    AddDropdownTitle: "Add",
    AddUserOrGroup: "Add user or group",
    NoOwnerAssigned: "No owner assigned",
    addMajorVersion: "Add major version",
    allUsersAndGroups: "Users and Groups",
    addUsersAndGroups: "Add user or group",
    addButtonLabel: "Add",
    addButtonTooltip: "Add member to group",
    cancelButtonTooltip: "Close dialog",
    noPermissionsAvailable: "Permissions page is not available for {0}",
  }),
  csui.define(
    "css!csui/widgets/permissions/impl/permissions",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/models/permission/nodepermission.model",
      "hbs!csui/widgets/permissions/impl/edit/permission.level.selector/impl/permission.level.selector",
      "i18n!csui/widgets/permissions/impl/nls/lang",
      "css!csui/widgets/permissions/impl/permissions",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
        _permissionLevelOptions: void 0,
        selected: void 0,
        openSelectedProperties: !1,
        className: "cs-permission-level-selector",
        template: e,
        behaviors: { TabableRegion: { behaviorClass: h } },
        events: {
          "click li[data-optionid]": "onClickOption",
          keydown: "onKeyInView",
        },
        constructor: function (t) {
          t || (t = {}),
            a.ItemView.prototype.constructor.apply(this, arguments);
        },
        initialize: function () {
          (this.focusIndex = 0), this._setupPermissionLevelOptions();
          var r =
            this.options.selected ||
            this.options.permissionModel.getPermissionLevel();
          v.indexOf(v.pluck(this._permissionLevelOptions, "id"), r) !== -1
            ? this._setSelected(r)
            : this._setSelected(i.PERMISSION_LEVEL_NONE);
        },
        onKeyInView: function (r) {
          var t = r.keyCode,
            n = this.$el.find("a[tabindex]");
          if (n.length) {
            if (r.keyCode === 13)
              d(n[this.focusIndex])
                .parent()
                .trigger("click", { isEnterKey: !0 }),
                r.stopPropagation(),
                r.preventDefault();
            else if (t === 38 || t === 40)
              t === 38
                ? this.focusIndex > 0 && --this.focusIndex
                : this.focusIndex < n.length - 1 && ++this.focusIndex,
                d(n[this.focusIndex]).trigger("focus"),
                r.stopPropagation(),
                r.preventDefault();
            else if (t === 9) {
              var s = this.$el
                .parents("body")
                .find(".csui-edit-permission-popover-container .binf-popover");
              s.binf_popover("destroy");
            }
          }
        },
        onClickOption: function (r, t) {
          r.preventDefault(),
            r.stopPropagation(),
            this._setSelected(
              parseInt(d(r.currentTarget).attr("data-optionid"))
            ),
            this._showSelected(),
            this.trigger("permission:level:selected"),
            t?.isEnterKey || this.$el.trigger("setCurrentTabFocus");
        },
        templateHelpers: function () {
          return { permissionLevelOptions: this._permissionLevelOptions };
        },
        currentlyFocusedElement: function () {
          var r = this.$el.find("a[tabindex]");
          if (r.length) return d(r[this.focusIndex]);
        },
        accDeactivateTabableRegion: function () {},
        onRender: function () {
          this._showSelected();
        },
        _getOptionName: function (r) {
          var t, n;
          return (
            (t = v.indexOf(v.pluck(this._permissionLevelOptions, "id"), r)),
            (n = t === -1 ? "" : this._permissionLevelOptions[t].name),
            n
          );
        },
        _setupPermissionLevelOptions: function () {
          (this._permissionLevelOptions = []),
            typeof i.PERMISSION_LEVEL_NONE < "u" &&
              this._permissionLevelOptions.push({
                id: i.PERMISSION_LEVEL_NONE,
                name: l.permissionLevelNone,
              }),
            typeof i.PERMISSION_LEVEL_READ < "u" &&
              this._permissionLevelOptions.push({
                id: i.PERMISSION_LEVEL_READ,
                name: l.permissionLevelRead,
              }),
            typeof i.PERMISSION_LEVEL_WRITE < "u" &&
              this._permissionLevelOptions.push({
                id: i.PERMISSION_LEVEL_WRITE,
                name: l.permissionLevelWrite,
              }),
            typeof i.PERMISSION_LEVEL_FULL_CONTROL < "u" &&
              this._permissionLevelOptions.push({
                id: i.PERMISSION_LEVEL_FULL_CONTROL,
                name: l.permissionLevelFullControl,
              }),
            this.options.nodeModel.get("permissions_model") !== "simple" &&
              typeof i.PERMISSION_LEVEL_CUSTOM < "u" &&
              this._permissionLevelOptions.push({
                id: i.PERMISSION_LEVEL_CUSTOM,
                name: l.permissionLevelCustom,
                showActionIcon: !0,
              });
        },
        _setSelected: function (r) {
          this.selected = r;
        },
        _showSelected: function () {
          var r = this.$el.find("li[data-optionid]");
          r.find(".cs-icon").removeClass("icon-listview-checkmark"),
            r.removeAttr("aria-selected");
          var t = this.$el.find("li[data-optionid=" + this.selected + "]");
          t.find(".cs-icon").addClass("icon-listview-checkmark"),
            t.attr("aria-selected", "true");
        },
        _showOpenSelectedProperties: function () {
          this.openSelectedProperties === !0
            ? (this.ui.toggle.attr("aria-expanded", "true"),
              this.ui.iconOpenSelectedProperties
                .removeClass("icon-checkbox")
                .addClass("icon-checkbox-selected"))
            : (this.ui.toggle.attr("aria-expanded", "false"),
              this.ui.iconOpenSelectedProperties
                .removeClass("icon-checkbox-selected")
                .addClass("icon-checkbox"));
        },
        getSelectedPermissions: function () {
          var r = this.options.nodeModel;
          return i.getPermissionsByLevelExceptCustom(
            this.selected,
            this.options.isContainer,
            r && r.get("advanced_versioning"),
            r && r.get("advancedVersioningEnabled")
          );
        },
      });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/controls/tree/impl/treeview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <div class="csui-tree-child ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeSplit") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 30 },
                  end: { line: 2, column: 69 },
                },
              }
            )) != null
              ? t
              : "") +
            " " +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeClass") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 70 },
                  end: { line: 3, column: 30 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
      <input type="checkbox" id="node_` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 38 },
                      end: { line: 4, column: 48 },
                    },
                  })
                : n)
            ) +
            '" tabindex="-1" name="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 70 },
                      end: { line: 4, column: 80 },
                    },
                  })
                : n)
            ) +
            `"
             aria-label="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeName") || (e != null ? s(e, "nodeName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeName",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 25 },
                      end: { line: 5, column: 37 },
                    },
                  })
                : n)
            ) +
            `" class="csui-tree-checkbox
    ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "readonly") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(6, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 6, column: 4 },
                  end: { line: 7, column: 49 },
                },
              }
            )) != null
              ? t
              : "") +
            '" ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "readonly") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.program(13, r, 0),
                loc: {
                  start: { line: 7, column: 51 },
                  end: { line: 8, column: 52 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
    <label for="node_` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 21 },
                      end: { line: 9, column: 31 },
                    },
                  })
                : n)
            ) +
            `"></label>
    <span class="csui-node-name">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeName") || (e != null ? s(e, "nodeName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeName",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 33 },
                      end: { line: 10, column: 45 },
                    },
                  })
                : n)
            ) +
            `</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeSplit") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(16, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 11, column: 2 },
                  end: { line: 18, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
  <ul></ul>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            " " +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitClass") || (e != null ? n(e, "splitClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitClass",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 48 },
                      end: { line: 2, column: 62 },
                    },
                  })
                : t)
            )
          );
        },
        4: function (i, e, l, u, r) {
          return " nodeClass";
        },
        6: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "checked") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(7, r, 0),
              inverse: i.program(9, r, 0),
              loc: {
                start: { line: 6, column: 20 },
                end: { line: 7, column: 42 },
              },
            }
          )) != null
            ? t
            : "";
        },
        7: function (i, e, l, u, r) {
          return `  icon-checkbox-on_disabled
    `;
        },
        9: function (i, e, l, u, r) {
          return " icon-checkbox-disabled";
        },
        11: function (i, e, l, u, r) {
          return "disabled ";
        },
        13: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "checked") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(14, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 7, column: 84 },
                end: { line: 8, column: 45 },
              },
            }
          )) != null
            ? t
            : "";
        },
        14: function (i, e, l, u, r) {
          return ' tabindex="-1"  checked';
        },
        16: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="csui-tree-split ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitClass") || (e != null ? n(e, "splitClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitClass",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 34 },
                      end: { line: 12, column: 48 },
                    },
                  })
                : t)
            ) +
            `">
        <div class="csui-splitcontrol-label">
          <span title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitName") || (e != null ? n(e, "splitName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitName",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 23 },
                      end: { line: 14, column: 36 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitName") || (e != null ? n(e, "splitName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitName",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 38 },
                      end: { line: 14, column: 51 },
                    },
                  })
                : t)
            ) +
            `</span>
        </div>
      </div>
      <div class="csui-separator"></div>
`
          );
        },
        18: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '    <div class="csui-tree-child ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeSplit") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 22, column: 32 },
                  end: { line: 22, column: 71 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
      <input type="checkbox" id="node_` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 38 },
                      end: { line: 23, column: 48 },
                    },
                  })
                : n)
            ) +
            '" name="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 56 },
                      end: { line: 23, column: 66 },
                    },
                  })
                : n)
            ) +
            `"
             aria-label="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeName") || (e != null ? s(e, "nodeName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeName",
                    hash: {},
                    loc: {
                      start: { line: 24, column: 25 },
                      end: { line: 24, column: 37 },
                    },
                  })
                : n)
            ) +
            `"  tabindex="-1" class="csui-tree-checkbox
             ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeClass") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 25, column: 13 },
                  end: { line: 25, column: 47 },
                },
              }
            )) != null
              ? t
              : "") +
            `
        ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "readonly") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(19, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 26, column: 8 },
                  end: { line: 27, column: 49 },
                },
              }
            )) != null
              ? t
              : "") +
            '" ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "readonly") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.program(22, r, 0),
                loc: {
                  start: { line: 27, column: 51 },
                  end: { line: 28, column: 37 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
      <label for="node_` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeId") || (e != null ? s(e, "nodeId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeId",
                    hash: {},
                    loc: {
                      start: { line: 29, column: 23 },
                      end: { line: 29, column: 33 },
                    },
                  })
                : n)
            ) +
            `"></label>
      <span class="csui-node-name">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "nodeName") || (e != null ? s(e, "nodeName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nodeName",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 35 },
                      end: { line: 30, column: 47 },
                    },
                  })
                : n)
            ) +
            `</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "nodeSplit") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(25, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 31, column: 6 },
                  end: { line: 38, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        19: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "checked") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(20, r, 0),
              inverse: i.program(9, r, 0),
              loc: {
                start: { line: 26, column: 24 },
                end: { line: 27, column: 42 },
              },
            }
          )) != null
            ? t
            : "";
        },
        20: function (i, e, l, u, r) {
          return ` icon-checkbox-on_disabled
    `;
        },
        22: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "checked") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(23, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 27, column: 84 },
                end: { line: 28, column: 30 },
              },
            }
          )) != null
            ? t
            : "";
        },
        23: function (i, e, l, u, r) {
          return " checked";
        },
        25: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '        <div class="csui-tree-split ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitClass") || (e != null ? n(e, "splitClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitClass",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 36 },
                      end: { line: 32, column: 50 },
                    },
                  })
                : t)
            ) +
            `">
          <div class="csui-splitcontrol-label">
            <span title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitName") || (e != null ? n(e, "splitName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitName",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 25 },
                      end: { line: 34, column: 38 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "splitName") || (e != null ? n(e, "splitName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "splitName",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 40 },
                      end: { line: 34, column: 53 },
                    },
                  })
                : t)
            ) +
            `</span>
          </div>
        </div>
        <div class="csui-separator"></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isNodesExists") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(18, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 40, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return a.registerPartial("csui_controls_tree_impl_treeview", h), h;
    }
  ),
  csui.define("css!csui/controls/tree/impl/treeview", [], function () {}),
  csui.define(
    "csui/controls/tree/tree.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!csui/controls/tree/impl/treeview",
      "css!csui/controls/tree/impl/treeview",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = i.CompositeView.extend({
          template: e,
          templateHelpers: function () {
            return {
              isNodesExists: !!(
                this.model.nodes && this.model.nodes.length > 0
              ),
              readonly: this.model.attributes
                ? this.model.attributes.readonly
                : !1,
            };
          },
          tagName: "li",
          childViewContainer: "ul",
          className: "csui-tree-root",
          events: { "click input.csui-tree-checkbox": "onNodeClicked" },
          initialize: function () {
            this.collection = this.model.nodes;
          },
          onNodeClicked: function (r) {
            this.trigger("Node:clicked", r.target);
          },
        }),
        u = i.CollectionView.extend({
          tagName: "ul",
          className: "csui-tree-container",
          childView: l,
          childEvents: { "Node:clicked": "onChildNodeClicked" },
          onChildNodeClicked: function (r, t) {
            t.checked
              ? this.trigger("node:selected", t)
              : this.trigger("node:unselected", t);
          },
        });
      return u;
    }
  ),
  csui.define(
    "csui/models/permission/permissionlevel",
    ["module", "csui/lib/jquery", "csui/lib/underscore", "csui/lib/backbone"],
    function (v, d, a, h) {
      "use strict";
      var i = h.Model.extend({
          initialize: function () {
            var l = this.get("nodes");
            l && ((this.nodes = new e(l)), this.unset("nodes"));
          },
        }),
        e = h.Collection.extend({ model: i });
      return e;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes.data",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/models/permission/permissionlevel",
      "i18n!csui/widgets/permissions/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      function e(l) {
        var u = l.readonly !== !1,
          r = l.permissions || [],
          t = [
            {
              nodeName: i.see,
              nodeId: "see",
              readonly: u,
              checked: r.indexOf("see") >= 0,
              nodes: [
                {
                  nodeName: i.see_contents,
                  nodeId: "see_contents",
                  nodeClass: "",
                  nodeSplit: !0,
                  splitName: i.Read,
                  splitClass: "csui-split-read",
                  readonly: u,
                  checked: r.indexOf("see_contents") >= 0,
                },
                {
                  nodeName: i.modify,
                  nodeId: "modify",
                  readonly: u,
                  checked: r.indexOf("modify") >= 0,
                  nodes: [
                    {
                      nodeName: i.edit_attributes,
                      nodeId: "edit_attributes",
                      readonly: u,
                      checked: r.indexOf("edit_attributes") >= 0,
                    },
                    {
                      nodeName: i.reserve,
                      nodeId: "reserve",
                      readonly: u,
                      checked: r.indexOf("reserve") >= 0,
                      nodes: [
                        {
                          nodeName: i.addMajorVersion,
                          nodeId: "add_major_version",
                          readonly: u,
                          checked: r.indexOf("add_major_version") >= 0,
                        },
                      ],
                    },
                    {
                      nodeName: i.delete_versions,
                      nodeId: "delete_versions",
                      readonly: u,
                      checked: r.indexOf("delete_versions") >= 0,
                      nodes: [
                        {
                          nodeName: i.delete,
                          nodeId: "delete",
                          nodeSplit: !0,
                          splitName: i.Write,
                          splitClass: "csui-split-write",
                          readonly: u,
                          checked: r.indexOf("delete") >= 0,
                          nodes: [
                            {
                              nodeName: i.edit_permissions,
                              nodeId: "edit_permissions",
                              nodeSplit: !0,
                              splitName: i.FullControl,
                              splitClass: "csui-split-fullcontrol",
                              readonly: u,
                              checked: r.indexOf("edit_permissions") >= 0,
                            },
                          ],
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ];
        if (l.node) {
          var n;
          l.node.get("container")
            ? (t[0].nodes[1].nodes.splice(1, 0, {
                nodeName: i.add_items,
                nodeId: "add_items",
                readonly: u,
                checked: r.indexOf("add_items") >= 0,
              }),
              (n = d.findWhere(t[0].nodes[1].nodes, { nodeName: i.reserve })),
              l.node.get("advancedVersioningEnabled") ||
                n.nodes.splice(
                  d.findIndex(n.nodes, { nodeName: i.addMajorVersion }),
                  1
                ))
            : l.node.get("advanced_versioning") ||
              ((n = d.findWhere(t[0].nodes[1].nodes, { nodeName: i.reserve })),
              n.nodes.splice(
                d.findIndex(n.nodes, { nodeName: i.addMajorVersion }),
                1
              ));
        }
        return new h(t);
      }
      return { getPermissionAttributes: e };
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-permission-attribute-buttons-container">
    <button class="cs-save-btn binf-btn binf-btn-primary
  binf-btn-default" tabindex="-1">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "save_button_label") ||
                  (e != null ? n(e, "save_button_label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "save_button_label",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 34 },
                      end: { line: 6, column: 55 },
                    },
                  })
                : t)
            ) +
            `</button>
    <button class="cs-cancel-btn binf-btn binf-btn-default"
            tabindex="-1">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "cancel_button_label") ||
                  (e != null ? n(e, "cancel_button_label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cancel_button_label",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 26 },
                      end: { line: 8, column: 49 },
                    },
                  })
                : t)
            ) +
            `</button>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-permission-attribute-tree csui-normal-scrolling"></div>

` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "showButtons") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 0 },
                  end: { line: 10, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_edit_permission.attributes_impl_permission.attributes",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/edit/permission.attributes/permission.attributes.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/tree/tree.view",
      "csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes.data",
      "hbs!csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes",
      "i18n!csui/widgets/permissions/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      const n = "edit_permissions",
        s = "edit_attributes",
        o = "add_items",
        c = "delete",
        m = "delete_versions",
        f = "reserve",
        g = "add_major_version";
      var w = a.LayoutView.extend({
        className: "csui-permission-attributes",
        template: r,
        regions: { treeRegion: ".csui-permission-attribute-tree" },
        events: {
          "click button.cs-save-btn": "onClickSave",
          "click button.cs-cancel-btn": "onClickCancel",
          keydown: "_handleKeyEvents",
        },
        behaviors: { TabableRegionBehavior: { behaviorClass: e } },
        _handleKeyEvents: function (b) {
          if (b && b.keyCode === 9) {
            var C = this.$tabableElements.index(b.target);
            b.shiftKey && C === 0
              ? (C = this.$tabableElements.length - 1)
              : !b.shiftKey && C === this.$tabableElements.length - 1
              ? (C = 0)
              : (C = void 0),
              C !== void 0 &&
                (b.preventDefault(),
                this.$tabableElements.eq(C).trigger("focus"));
          }
        },
        currentlyFocusedElement: function (b) {
          return (
            this.$tabableElements.prop("tabindex", 0),
            b && b.shiftKey
              ? this.$tabableElements.eq([this.$tabableElements.length - 1])
              : this.$tabableElements.eq(0)
          );
        },
        onLastTabElement: function (b, C) {
          var k = this.$tabableElements.index(C.target);
          return (
            (b && k === 0) || (!b && k === this.$tabableElements.length - 1)
          );
        },
        templateHelpers: function () {
          var b = this.options.showButtons;
          return (
            b === void 0 && (b = !this.options.readonly),
            {
              save_button_label: t.saveButtonLabel,
              cancel_button_label: t.cancelButtonLabel,
              showButtons: b,
            }
          );
        },
        constructor: function (C) {
          C || (C = {}),
            a.LayoutView.prototype.constructor.call(this, C),
            (this.options = C);
        },
        onRender: function () {
          var b = u.getPermissionAttributes({
            readonly: this.options.readonly,
            node: this.options.node,
            permissions:
              this.options.permissions || this.model.get("permissions"),
          });
          (this.treeView = new l({ collection: b })),
            this.treeRegion.show(this.treeView),
            this.listenTo(
              this.treeView,
              "node:selected",
              this.onPermissionNodeSelected
            ),
            this.listenTo(
              this.treeView,
              "node:unselected",
              this.onPermissionNodeUnselected
            ),
            (this.$tabableElements = this.$("*[tabindex]")),
            this.listenTo(
              this,
              "adjust:splitbar:separator",
              this.adjustSplitBarandSeparatorPositions
            );
        },
        onPermissionNodeSelected: function (b) {
          var C = this.treeView,
            k;
          switch (b.attributes.name.value) {
            case n:
              C.$el.find("input:checkbox").each(function (S, P) {
                P.checked = !0;
              }),
                (k = C.$el.find("input.csui-tree-checkbox"));
              break;
            case s:
            case m:
            case f:
              (C.$el.find("#node_see")[0].checked = !0),
                (C.$el.find("#node_see_contents")[0].checked = !0),
                (C.$el.find("#node_modify")[0].checked = !0),
                (k = C.$el
                  .find(b)
                  .closest(".csui-tree-root")
                  .parents(".csui-tree-root")
                  .children(".csui-tree-child")
                  .find("input.csui-tree-checkbox"));
              break;
            case o:
              (C.$el.find("#node_see")[0].checked = !0),
                (C.$el.find("#node_modify")[0].checked = !0),
                (k = C.$el
                  .find(b)
                  .closest(".csui-tree-root")
                  .parents(".csui-tree-root")
                  .children(".csui-tree-child")
                  .find("input.csui-tree-checkbox"));
              break;
            case c:
              (C.$el.find("#node_see")[0].checked = !0),
                (C.$el.find("#node_see_contents")[0].checked = !0),
                (C.$el.find("#node_modify")[0].checked = !0),
                (C.$el.find("#node_delete_versions")[0].checked = !0),
                (k = C.$el
                  .find(b)
                  .closest(".csui-tree-root")
                  .parents(".csui-tree-root")
                  .children(".csui-tree-child")
                  .find("input.csui-tree-checkbox"));
              break;
            case g:
              (C.$el.find("#node_see")[0].checked = !0),
                (C.$el.find("#node_see_contents")[0].checked = !0),
                (C.$el.find("#node_modify")[0].checked = !0),
                (C.$el.find("#node_reserve")[0].checked = !0),
                (k = C.$el
                  .find(b)
                  .closest(".csui-tree-root")
                  .parents(".csui-tree-root")
                  .children(".csui-tree-child")
                  .find("input.csui-tree-checkbox"));
              break;
            default:
              k = C.$el
                .find(b)
                .closest(".csui-tree-root")
                .parents(".csui-tree-root")
                .children(".csui-tree-child")
                .find("input.csui-tree-checkbox");
              break;
          }
          k.prop("checked", !0),
            k.length &&
              this.options.node.attributes.type !== 0 &&
              (C.$el.find("#node_see_contents")[0].checked = !0);
        },
        onPermissionNodeUnselected: function (b) {
          var C = this.treeView,
            k;
          b.attributes.name.value === "see_contents"
            ? (k = C.$el
                .find(b)
                .closest(".csui-tree-root")
                .siblings(".csui-tree-root")
                .find("input.csui-tree-checkbox")
                .filter((y, S) => S.id !== "node_modify"))
            : ((k = C.$el
                .find(b)
                .closest(".csui-tree-root")
                .children("ul")
                .find("input.csui-tree-checkbox")),
              (!k.length || b.attributes.name.value === "reserve") &&
                (C.$el.find("#node_edit_permissions")[0].checked = !1)),
            k.prop("checked", !1);
        },
        onClickSave: function () {
          var b = this.getSelectedPermissions();
          this.trigger("permission:attribute:save:clicked", b);
        },
        onClickCancel: function () {
          this.trigger("permission:attribute:cancel:clicked");
        },
        onDestroy: function () {},
        getSelectedPermissions: function () {
          for (
            var b = this.treeView.$el.find("input.csui-tree-checkbox"),
              C = [],
              k = 0;
            k < b.length;
            k++
          )
            b[k].checked && C.push(b[k].name);
          return C;
        },
        adjustSplitBarandSeparatorPositions: function () {
          for (
            var b = this.$el.find(
                ".csui-permission-attribute-tree .csui-tree-container"
              ),
              C,
              k,
              y,
              S = b.find(".csui-tree-split"),
              P = S.length - 1,
              F = 0;
            P >= 0, F < S.length;
            P--, F++
          )
            (k = v(S[P]).width() * F),
              (y = v(S[P]).closest(".csui-tree-child").find(".csui-separator")),
              S[P] === S[S.length - 1]
                ? (C = b.outerHeight() + 28)
                : ((C = Math.round(
                    v(S[P]).closest("li").position().top +
                      v(S[P]).closest(".csui-tree-child").outerHeight()
                  )),
                  (k = k + F)),
              i && i.settings.rtl
                ? (v(S[P]).css({ height: C, left: k }),
                  v(S[P])
                    .find("span")
                    .css({
                      width: C,
                      right: -(C / 2 - 15),
                      top: C / 2 - 15,
                      direction: "ltr",
                      "text-align": "right",
                      transform: "rotate(-90deg)",
                    }),
                  y.css({ left: k }),
                  v(S[P])
                    .closest(".csui-tree-child")
                    .css({ "padding-left": k + v(S[P]).width() }))
                : (v(S[P]).css({ height: C, right: k }),
                  v(S[P])
                    .find("span")
                    .css({ width: C, left: -(C / 2 - 15), top: C / 2 - 15 }),
                  y.css({ right: k }),
                  v(S[P])
                    .closest(".csui-tree-child")
                    .css({ "padding-right": k + v(S[P]).width() }));
        },
      });
      return w;
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/apply.permission",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-apply-permission-content">
  <span class="csui-apply-permission-message">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "permissionMessage") ||
                  (e != null ? n(e, "permissionMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "permissionMessage",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 46 },
                      end: { line: 2, column: 67 },
                    },
                  })
                : t)
            ) +
            `</span>
</div>
<div class="csui-apply-permission-subfolder-container">
  <div class="csui-apply-permission-sub-folder">
    <span class="csui-apply-permission-sub-folder-label"></span>
    <div class="required-fields-switch"></div>
  </div>
  <div class="csui-apply-permission-subitems-container">
    <div class="csui-apply-subitems-message"></div>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_edit_apply.permission_impl_apply.permission",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/include.subitems",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary
  csui-permisison-subItem">
    <input type="checkbox" class="csui-subtypes-option" name="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "itemName") || (e != null ? n(e, "itemName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemName",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 62 },
                      end: { line: 4, column: 74 },
                    },
                  })
                : t)
            ) +
            '" id="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 80 },
                      end: { line: 4, column: 89 },
                    },
                  })
                : t)
            ) +
            `"
           value="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 18 },
                      end: { line: 5, column: 27 },
                    },
                  })
                : t)
            ) +
            `">
    <label class="csui-subtype-name" for="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "itemName") || (e != null ? n(e, "itemName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemName",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 42 },
                      end: { line: 6, column: 54 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "itemName") || (e != null ? n(e, "itemName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemName",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 63 },
                      end: { line: 6, column: 75 },
                    },
                  })
                : t)
            ) +
            `">
      <span class="cs-ellipsis">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "itemName") || (e != null ? n(e, "itemName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemName",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 32 },
                      end: { line: 7, column: 44 },
                    },
                  })
                : t)
            ) +
            `
        (` +
            i.escapeExpression(
              ((t =
                (t = n(l, "total") || (e != null ? n(e, "total") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "total",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 9 },
                      end: { line: 8, column: 18 },
                    },
                  })
                : t)
            ) +
            " " +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "itemTitle") || (e != null ? n(e, "itemTitle") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemTitle",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 19 },
                      end: { line: 8, column: 32 },
                    },
                  })
                : t)
            ) +
            `)
  </span>
    </label>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "each").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "subItems") : e,
            {
              name: "each",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 12, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_edit_apply.permission_impl_include.subitems",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/apply.permission/impl/nls/root/lang",
    {
      applyPermissionHeaderTitle: "Apply permissions",
      removePermissionHeaderTitle: "Remove {0}",
      restorePublicAccessHeaderTitle: "Restore public access",
      applytoSubFolder: "Apply to sub-folders",
      applytoSubFolderWithCount: "Apply to sub-folders ( {0} )",
      applyToSubItemsTitle: "Include special items in {0} and sub-folders",
      applyToItem: "Permissions will be applied to all items in {0}.",
      applyToThresholdExceeded:
        "Permissions will be applied to large number of items in {0}.",
      removeThresholdExceeded:
        "Permissions will be removed from large number of items in {0}",
      removeToItem: "Permissions will be removed from all items in {0}",
      RestorePermissions: "Permissions will be restored to all items in {0}.",
      includeSubItems: "Including {0}",
      publicAccess: "Public Access",
      item: "item",
      items: "items",
      204: "Task lists",
      207: "Channels",
      215: "Discussions",
      298: "Collections",
      3030202: "Communities",
    }
  ),
  csui.define(
    "csui/models/permission/permission.precheck",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/permission/permission.precheck.server.adaptor",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = h.Model.extend({
        constructor: function (t, n) {
          t || (t = {}),
            n || (n = {}),
            h.Model.prototype.constructor.call(this, t, n),
            (this.options = d.pick(n, ["connector"])),
            this.makeConnectable(n);
        },
      });
      return e.mixin(u.prototype), l.mixin(u.prototype), u;
    }
  ),
  csui.define(
    "csui/utils/permissions/permissions.subtypesWithFolder",
    ["csui-ext!csui/utils/permissions/permissions.subtypesWithFolder"],
    function (v) {
      "user strict";
      const d = [0, 136, 204, 207, 215, 298, 3030202];
      return v ? [...d, ...v.flat()] : d;
    }
  ),
  csui.define(
    "csui/utils/permissions/permissions.precheck",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/taskqueue",
      "csui/models/permission/permission.precheck",
      "csui/utils/permissions/permissions.subtypesWithFolder",
    ],
    function (v, d, a, h, i, e, l) {
      var u = v.config();
      d.defaults(u, { parallelism: 6 });
      var r = {
        includeSubTypesWithFolder: function () {
          return l;
        },
        includeSubTypes: function () {
          return [204, 207, 215, 298, 3030202];
        },
        fetchPermissionsPreCheck: function (t) {
          (this.options = t),
            (this.connector = t.connector || t.model.connector),
            (this.options.applyTo.subTypes = []);
          var n = this,
            s = this.includeSubTypesWithFolder(),
            o = new i({ parallelism: u.parallelism }),
            c = n.options.model
              ? n.options.model.get("id")
              : n.options.node.get("id"),
            m = d.map(s, function (f) {
              var g = a.Deferred();
              return (
                o.pending.add({
                  worker: function () {
                    var w = new e(
                      { id: c, subType: f, include_sub_items: !1 },
                      { connector: n.connector }
                    );
                    return (
                      w
                        .fetch()
                        .then(
                          d.bind(function (b) {
                            b.results.data.subtypes_info !== void 0 &&
                              n.options.applyTo.subTypes.push(
                                b.results.data.subtypes_info[0].id
                              ),
                              (n.options.applyTo.thresholdExceeded =
                                b.results.data.threshold_exceeded),
                              g.resolve(b);
                          })
                        )
                        .fail(function (b) {
                          g.reject(b);
                        }),
                      g.promise()
                    );
                  },
                }),
                g.promise(m)
              );
            });
          return a.whenAll.apply(a, m);
        },
      };
      return r;
    }
  ),
  csui.define(
    "csui/utils/permissions/permissions.subtypesForFolders",
    ["csui-ext!csui/utils/permissions/permissions.subtypesForFolders"],
    function (v) {
      "user strict";
      const d = [0, 136];
      return v ? [...d, ...v.flat()] : d;
    }
  ),
  csui.define(
    "csui/widgets/permissions/edit/apply.permission/apply.permission.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/apply.permission",
      "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/include.subitems",
      "i18n!csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang",
      "csui/utils/taskqueue",
      "csui/utils/permissions/permissions.precheck",
      "csui/models/permission/permission.precheck",
      "csui/controls/progressblocker/blocker",
      "csui/utils/permissions/permissions.subtypesForFolders",
      "csui/lib/handlebars.helpers.xif",
      "css!csui/widgets/permissions/impl/permissions",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c) {
      "use strict";
      var m = v.config();
      d.defaults(m, { parallelism: 5 });
      var f = i.ItemView.extend({
        className: "csui-apply-permission",
        template: l,
        includeSubitemsTemplate: u,
        templateHelpers: function () {
          let g;
          const w = this.options.model?.get("name");
          return (
            this.options.applyTo?.thresholdExceeded
              ? this.options.removePermission
                ? (g = d.str.sformat(r.removeThresholdExceeded, w))
                : (g = d.str.sformat(r.applyToThresholdExceeded, w))
              : this.options.removePermission
              ? (g = d.str.sformat(r.removeToItem, w))
              : (g = d.str.sformat(r.applyToItem, w)),
            this.options.restorePublicAccess &&
              (g = d.str.sformat(r.RestorePermissions, w)),
            { permissionMessage: g }
          );
        },
        ui: {
          applyPermissionMsg: ".csui-apply-permission-message",
          appplyToSubFolderContainer: ".csui-apply-permission-sub-folder",
          appplyToSubFolder: ".csui-apply-permission-sub-folder-label",
          applyToSubItemsContainer: "csui-apply-permission-subitems-container",
          applyToSubItemsTitle: ".csui-apply-subitems-message",
          subItemsCheckBox: ".csui-subtypes-option",
        },
        behaviors: { TabableRegion: { behaviorClass: e } },
        events: { keydown: "onKeyInView" },
        constructor: function (w) {
          var b = this;
          (b._ = d),
            (b.userSelectionCount = 0),
            w || (w = {}),
            (w.removePermission = w.removePermission || !1),
            i.ItemView.prototype.constructor.apply(this, arguments),
            o.imbue(this);
        },
        initialize: function () {
          this.focusIndex = 0;
        },
        onKeyInView: function (g) {
          var w = g.keyCode,
            b = this.$el.find("*[tabindex]");
          b.length &&
            (g.keyCode === 13
              ? (a(b[this.focusIndex]).parent().trigger("click"),
                g.stopPropagation(),
                g.preventDefault())
              : (w === 38 || w === 40) &&
                (w === 38
                  ? this.focusIndex > 0 && --this.focusIndex
                  : this.focusIndex < b.length - 1 && ++this.focusIndex,
                a(b[this.focusIndex]).trigger("focus"),
                g.stopPropagation(),
                g.preventDefault()));
        },
        currentlyFocusedElement: function () {
          var g = this.$el.find("*[tabindex]");
          if (g.length) return a(g[this.focusIndex]);
        },
        onRender: function () {
          var g = this;
          this.options.model &&
            this.options.model.get("container") &&
            (this.options.applyTo || this.options.model.get("applyTo")
              ? ((this.options.applyTo = this.options.applyTo
                  ? this.options.applyTo
                  : this.options.model.get("applyTo")),
                this.loadSubFolderDeatils(this),
                this.loadSpecialItems(
                  this.options.applyTo.subTypes,
                  this.options.applyTo.thresholdExceeded
                ))
              : ((this.options.applyTo = {}),
                this.blockActions && this.blockActions(),
                n.fetchPermissionsPreCheck(this.options).done(function () {
                  g.model.set({ applyTo: g.options.applyTo }, { silent: !0 }),
                    g.unblockActions && g.unblockActions(),
                    g.loadSubFolderDeatils(g),
                    g.loadSpecialItems(
                      g.options.applyTo.subTypes,
                      g.options.applyTo.thresholdExceeded
                    );
                })));
        },
        loadSubFolderDeatils: function (g) {
          let w = -1;
          if (
            (g.options.applyTo?.subTypes.some((C) => c.includes(C)) && (w = 1),
            w >= 0)
          ) {
            g.ui.appplyToSubFolderContainer.removeClass("binf-hidden"),
              g.$(g.ui.appplyToSubFolder).html(r.applytoSubFolder),
              (g.requiredFieldSwitchModel = new h.Model({ data: !1 }));
            var b = d.uniqueId("appplyToSubFolder");
            g.ui.appplyToSubFolder.attr("id", b),
              csui.require(
                ["csui/controls/form/fields/booleanfield.view"],
                function (C) {
                  (g.requiredFieldSwitchView = new C({
                    mode: "writeonly",
                    model: g.requiredFieldSwitchModel,
                    labelId: b,
                  })),
                    g.requiredFieldSwitchView.render(),
                    g.requiredFieldSwitchView.on("field:changed", function (k) {
                      (g.subFolderSelected = k.fieldvalue),
                        k.fieldvalue
                          ? g.options.subTypes
                            ? g.loadSpecialItems(
                                g.options.subTypes,
                                g.options.thresholdExceeded
                              )
                            : g
                                .fetchSubFoldersSubItems(g.options)
                                .then(function (y) {
                                  g.loadSpecialItems(
                                    g.options.subTypes,
                                    g.options.thresholdExceeded
                                  );
                                })
                          : g.options.applyTo &&
                            g.loadSpecialItems(
                              g.options.applyTo.subTypes,
                              g.options.applyTo.thresholdExceeded
                            );
                    }),
                    g
                      .$(".required-fields-switch")
                      .append(g.requiredFieldSwitchView.$el);
                }
              );
          } else
            g.ui &&
              g.ui.applyToSubItemsContainer &&
              g.ui.appplyToSubFolderContainer.addClass("binf-hidden");
        },
        loadSpecialItems: function (g, w) {
          var b = this,
            C = g,
            k = w,
            y = b.options.applyTo && b.options.applyTo.subTypes.indexOf(0),
            S = b.model.get("name"),
            P =
              this.options.permissionModel &&
              this.options.permissionModel.get("right_id_expand") &&
              this.options.permissionModel.get("right_id_expand")
                .name_formatted,
            F = "";
          (P =
            this.options.permissionModel &&
            this.options.permissionModel.get("type") === "public"
              ? r.publicAccess
              : P),
            C.indexOf(204) >= 0 &&
              (F = F === "" ? F + r[204] : F + ", " + r[204]),
            C.indexOf(207) >= 0 &&
              (F = F === "" ? F + r[207] : F + ", " + r[207]),
            C.indexOf(215) >= 0 &&
              (F = F === "" ? F + r[215] : F + ", " + r[215]),
            C.indexOf(298) >= 0 &&
              (F = F === "" ? F + r[298] : F + ", " + r[298]),
            C.indexOf(3030202) >= 0 &&
              (F = F === "" ? F + r[3030202] : F + ", " + r[3030202]),
            F !== ""
              ? (b.ui.applyToSubItemsContainer.removeClass("binf-hidden"),
                b.ui.applyToSubItemsTitle.html(
                  d.str.sformat(r.includeSubItems, F)
                ))
              : (b.ui.applyToSubItemsTitle.html &&
                  b.ui.applyToSubItemsTitle.html(""),
                b.ui.applyToSubItemsContainer.addClass &&
                  b.ui.applyToSubItemsContainer.addClass("binf-hidden"));
        },
        fetchSubFoldersSubItems: function (g) {
          (this.options = g), (this.options.subTypes = []);
          var w = this,
            b = n.includeSubTypes(),
            C = new t({ parallelism: m.parallelism }),
            k = w.model.get("id"),
            y = d.map(b, function (S) {
              var P = a.Deferred();
              return (
                C.pending.add({
                  worker: function () {
                    var F = new s(
                      { id: k, subType: S, include_sub_items: !0 },
                      { connector: w.model.connector }
                    );
                    return (
                      F.fetch()
                        .then(
                          d.bind(function (D) {
                            D.results.data.subtypes_info !== void 0 &&
                              w.options.subTypes.push(
                                D.results.data.subtypes_info[0].id
                              ),
                              (w.options.thresholdExceeded =
                                D.results.data.threshold_exceeded),
                              P.resolve(D);
                          })
                        )
                        .fail(function (D) {
                          P.reject(D);
                        }),
                      P.promise()
                    );
                  },
                }),
                P.promise(y)
              );
            });
          return a.whenAll.apply(a, y);
        },
        getApplyToFlag: function () {
          return this.subFolderSelected;
        },
      });
      return f;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/start.location.collection",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.config(),
        l = e.startLocations || [],
        u = e.masks || {};
      a.isArray(l) || (l = Array.prototype.concat.apply([], a.values(l))),
        (u = a.reduce(
          a.values(u),
          function (o, c) {
            return {
              blacklist: o.blacklist.concat(c.blacklist || []),
              whitelist: o.whitelist.concat(c.whitelist || []),
            };
          },
          { blacklist: [], whitelist: [] }
        )),
        (u = {
          blacklist: a.unique(u.blacklist),
          whitelist: a.unique(u.whitelist),
        });
      function r(o) {
        var c = o.lastIndexOf("/");
        return c >= 0 ? o : "csui/dialogs/node.picker/start.locations/" + o;
      }
      function t(o) {
        return (
          !a.contains(u.blacklist, o) &&
          (!u.whitelist.length || a.contains(u.whitelist, o))
        );
      }
      l = a.chain(l).map(r).filter(t).unique().value();
      var n = i.Model.extend({
          defaults: {
            id: null,
            name: null,
            icon: null,
            invalid: !1,
            factory: null,
            unselectable: !0,
          },
          constructor: function (c, m) {
            i.Model.prototype.constructor.apply(this, arguments);
          },
          sync: function (o, c, m) {
            if (o !== "read")
              throw new Error("Only fetching the widget is supported.");
            var f = this;
            return (
              m || (m = {}),
              this._resolveFactory(m)
                .then(function () {
                  var g = f.get("factory");
                  return g.updateLocationModel(f);
                })
                .then(
                  function () {
                    var g = f.toJSON();
                    m.success && m.success(g, m), f.trigger("sync", f, g, m);
                  },
                  function () {
                    var g = f.get("error");
                    return (
                      m.error && m.error(g, m),
                      f.trigger("error", f, g, m),
                      h.Deferred().reject(g)
                    );
                  }
                )
            );
          },
          _resolveFactory: function (o) {
            var c = this,
              m = h.Deferred(),
              f = this.getFactoryData(),
              g = this.getFactoryModulePath(f);
            return (
              v(
                [g],
                function (w) {
                  c.set("factory", new w(o)), m.resolve();
                },
                function (w) {
                  c.set("error", w), o.ignoreErrors ? m.resolve() : m.reject(w);
                }
              ),
              m.promise()
            );
          },
          getFactoryData: function () {
            var o = this.get("id"),
              c = o.lastIndexOf("/"),
              m;
            return (
              c < 0
                ? (m = "csui/dialogs/node.picker/start.locations/" + o)
                : ((m = o), (o = o.substring(c + 1))),
              { name: o, path: m }
            );
          },
          getFactoryModulePath: function (o) {
            return o.path + "/" + o.name + ".factory";
          },
        }),
        s = i.Collection.extend({
          model: n,
          constructor: function (c) {
            c || (c = {});
            var m = c.startLocations;
            m
              ? (m = a
                  .chain(m)
                  .concat(["search.location", "default.location"])
                  .map(r)
                  .filter(t)
                  .unique()
                  .value())
              : (m = l);
            var f = a.map(m, function (g) {
              return { id: g };
            });
            i.Collection.prototype.constructor.call(this, f, c);
          },
          sync: function (o, c, m) {
            if (o !== "read")
              throw new Error(
                "Only fetching the start locations is supported."
              );
            var f = this;
            return (
              m || (m = {}),
              this._resolveFactories(m).then(function () {
                if (m.removeInvalid !== !1) {
                  var g = f.where({ invalid: !0 });
                  f.remove(g);
                }
                var w = f.toJSON();
                m.success && m.success(w, m), f.trigger("sync", f, w, m);
              })
            );
          },
          _resolveFactories: function (o) {
            var c = this.filter(function (g) {
                return g.has("id") && !(g.has("factory") || g.has("error"));
              }),
              m = a.defaults(
                { ignoreErrors: !0 },
                a.omit(o, "success", "error")
              ),
              f = a.invoke(c, "fetch", m);
            return h.whenAll.apply(h, f);
          },
        });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/controls/item.title/impl/name/name",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <span class="csui-multilingual-icon-label">
      <button  class="icon csui-multilingual-icon">
        ` +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "small",
                iconName: "csui_action_language_switcher24",
              },
              loc: {
                start: { line: 13, column: 8 },
                end: { line: 13, column: 91 },
              },
            })) != null
              ? t
              : "") +
            `
      </button>
    </span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<h2 class="csui-item-name">
<button class="csui-item-name-readonly binf-btn title csui-acc-focusable" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "itemTitleAria") ||
                  (e != null ? s(e, "itemTitleAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "itemTitleAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 81 },
                      end: { line: 2, column: 98 },
                    },
                  })
                : n)
            ) +
            `"
     aria-expanded="false" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "itemTitleAria") ||
                  (e != null ? s(e, "itemTitleAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "itemTitleAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 39 },
                      end: { line: 3, column: 56 },
                    },
                  })
                : n)
            ) +
            `">
  <span class="csui-item-name-block">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 37 },
                      end: { line: 4, column: 45 },
                    },
                  })
                : n)
            ) +
            `</span>
</button>
</h2>
<div class="csui-item-name-edit title-edit-div">
  <input class="title-input" placeholder="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "placeholderName") ||
                  (e != null ? s(e, "placeholderName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "placeholderName",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 42 },
                      end: { line: 8, column: 61 },
                    },
                  })
                : n)
            ) +
            '" type="text" value="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 82 },
                      end: { line: 8, column: 90 },
                    },
                  })
                : n)
            ) +
            `"
          title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "edit_name_tooltip") ||
                  (e != null ? s(e, "edit_name_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "edit_name_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 17 },
                      end: { line: 9, column: 38 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "mlDataEnabled") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 10, column: 2 },
                  end: { line: 16, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <button type="button" class="csui-undo csui-edit-save inline-edit-icon" disabled title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "save_edit_name_tooltip") ||
                  (e != null ? s(e, "save_edit_name_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "save_edit_name_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 90 },
                      end: { line: 17, column: 116 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 18, column: 4 },
                end: { line: 18, column: 78 },
              },
            })) != null
              ? t
              : "") +
            `
  </button>
  <button type="button" class="csui-undo csui-edit-cancel inline-edit-icon" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "cancel_edit_name_tooltip") ||
                  (e != null ? s(e, "cancel_edit_name_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cancel_edit_name_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 20, column: 83 },
                      end: { line: 20, column: 111 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 21, column: 4 },
                end: { line: 21, column: 77 },
              },
            })) != null
              ? t
              : "") +
            `
  </button>
  <div class="csui-item-name-error title-error binf-text-danger" title=""></div>
</div>`
          );
        },
      });
      return a.registerPartial("csui_controls_item.title_impl_name_name", h), h;
    }
  ),
  csui.define("csui/controls/item.title/impl/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/item.title/impl/nls/root/localized.strings", {
    editNameTooltip: "Edit Name",
    cancelEditNameTooltip: "Cancel",
    placeHolderName: "Enter name",
    showMore: "Show more",
    showMoreAria: "Show more actions of {0}",
    saveEditNameTooltip: "Save",
    itemTitleAria: "{0}, click to rename",
  }),
  csui.define(
    "css!csui/controls/item.title/impl/name/name",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/item.title/impl/name/name.view",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "hbs!csui/controls/item.title/impl/name/name",
      "i18n!csui/controls/item.title/impl/nls/localized.strings",
      "csui/utils/commandhelper",
      "csui/behaviors/item.name/item.name.behavior",
      "csui/utils/contexts/factories/ancestors",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "css!csui/controls/item.title/impl/name/name",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      var c = i.ItemView.extend({
        className: "csui-item-name",
        template: u,
        templateHelpers: function () {
          return {
            name: this.model.get("name"),
            edit_name_tooltip: r.editNameTooltip,
            cancel_edit_name_tooltip: r.cancelEditNameTooltip,
            save_edit_name_tooltip: r.saveEditNameTooltip,
            placeholderName: r.placeHolderName,
            mlDataEnabled: this.metadataLanguages.enabled,
            itemTitleAria: a.str.sformat(
              r.itemTitleAria,
              this.model.get("name")
            ),
          };
        },
        ui: {
          name: ".csui-item-name-readonly",
          nameReadonly: ".csui-item-name-readonly",
          nameEdit: ".csui-item-name-edit",
          nameEditDiv: ".csui-item-name-edit",
          nameInput: ".csui-item-name-edit>input",
          inputName: ".csui-item-name-edit>input",
          nameEditCancelIcon: ".csui-item-name-edit>.csui-edit-cancel",
          titleError: ".csui-item-name-error",
          saveButtonInEditMode: ".csui-edit-save",
          globeIcon: ".csui-multilingual-icon",
        },
        modelEvents: { change: "render" },
        events: {
          keydown: "onKeyInView",
          "input @ui.inputName": "onChangeName",
          "click @ui.globeIcon": "onClickGlobeIcon",
          "keydown @ui.globeIcon": "onKeyDownGlobeIcon",
        },
        behaviors: { ItemName: { behaviorClass: n, autoSave: !1 } },
        constructor: function (f) {
          var g = this;
          f || (f = {}),
            i.ItemView.prototype.constructor.call(this, f),
            (this.placeHolderName = r.placeHolderName),
            (this.metadataLanguages = l.getMetadataLanguageInfo()),
            (g.saveMldata = ""),
            this.listenTo(this, "ml:value:updated", function (w) {
              g.model.set("name_multilingual", w.value_multilingual, {
                silent: !0,
              }),
                g.targetElement.val(w.value),
                (g.saveMldata = w),
                (g.enableAddButton = !!w.value.trim()),
                g.ui.saveButtonInEditMode.prop("disabled", !g.enableAddButton),
                g.refreshTabableElements();
            }),
            this.listenTo(this.model.actions, "reset update", function () {
              this._checkAndEnableOrDisableEditing();
            });
        },
        onClickGlobeIcon: function () {
          this._showLanguagePopover();
        },
        onKeyDownGlobeIcon: function (m) {
          (m.keyCode === 13 || m.keyCode === 32) &&
            this.multiLingualForm &&
            this.keyDownOnGlobeIcon(m);
        },
        onChangeName: function (m) {
          if (this.ui.saveButtonInEditMode.length) {
            var f = this.ui.inputName.val().trim();
            (this.enableAddButton = !1),
              (this.enableAddButton = this.isSaveEnabled(m.target.value)),
              a.isFunction(this.updateMLdata) && this.updateMLdata(m),
              this.ui.saveButtonInEditMode.prop(
                "disabled",
                !this.enableAddButton
              );
          }
          this.refreshTabableElements();
        },
        isSaveEnabled: function (m) {
          return (
            (m = m.trim()),
            !(!m.length || (m === this.model.get("name") && !this.saveMldata))
          );
        },
        refreshTabableElements: function () {
          this.tabableElements = this.$el
            .find("input:not([disabled]),  button:not([disabled])")
            .filter(":visible")
            .toArray();
        },
        _moveTab: function (m) {
          (this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
            m.target
          )),
            m.shiftKey
              ? this.currentlyFocusedElementIndex > 0
                ? ((this.currentlyFocusedElementIndex -= 1),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : ((this.currentlyFocusedElementIndex =
                    this.tabableElements.length - 1),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
              : this.currentlyFocusedElementIndex <
                this.tabableElements.length - 1
              ? ((this.currentlyFocusedElementIndex += 1),
                d(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus"))
              : ((this.currentlyFocusedElementIndex = 0),
                d(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus")),
            m.stopPropagation(),
            m.preventDefault();
        },
        onRender: function () {
          var m = this;
          (this.editing = !1), this.ui.nameEdit.addClass("binf-hidden");
          const { originatingView: f } = this.options;
          if (
            (f?.el
              .querySelector(".csui-item-title-menu")
              ?.classList.contains("binf-hidden") &&
              f.el
                .querySelector(".csui-item-title-menu")
                .classList.remove("binf-hidden"),
            this._checkAndEnableOrDisableEditing(),
            this.metadataLanguages.enabled)
          ) {
            this.ui.nameInput.addClass("csui-multilingual-input");
            var g = this.ui.nameInput,
              w = m.ui.globeIcon;
            csui.require(
              [
                "csui/controls/multilingual.text.picker/multilingual.popover.mixin",
              ],
              function (b) {
                b.mixin(c.prototype);
                var C = {
                  parentView: m,
                  targetElement: g,
                  mlGlobeIcon: w,
                  validationRequired: !1,
                  multilingualData: m.model.get("name_multilingual"),
                };
                m._loadMultiLingualPopover(C);
              }
            );
          }
        },
        _checkAndEnableOrDisableEditing: function () {
          var m = d(this.ui.name);
          if (m.length && this.ItemNameBehavior._isEditingEnabled()) {
            var f = a.str.sformat(r.itemTitleAria, this.model.get("name"));
            m.attr("aria-label", f),
              m.attr("title", f),
              m.prop("disabled", !1),
              m.addClass("csui-acc-focusable");
          } else
            m.removeAttr("aria-label"),
              m.removeAttr("title"),
              m.prop("disabled", !0),
              m.removeClass("csui-acc-focusable");
        },
        _validateAndSave: function () {
          var m = this.model.get("name"),
            f = this.getInputBoxValue();
          if (
            ((f = f.trim()), m !== f || this.model.changed.name_multilingual)
          ) {
            var g = this.validate(f);
            if (g === !0) {
              var w = this;
              this.setInputBoxValue(f), this.setValue(f), w._blockActions();
              var b = { name: f };
              this.model.changed.name_multilingual &&
                w.saveMldata &&
                a.extend(b, {
                  name_multilingual: this.model.changed.name_multilingual,
                });
              var C = this.options.context,
                k = w.options.model,
                y = !!b.name;
              k.save(b, { wait: !0, patch: !0, silent: y })
                .then(function () {
                  y && k.set("name", m, { silent: !0 }),
                    k
                      .fetch()
                      .done(function (S) {
                        w._unblockActions(),
                          w.options.originatingView.unblockActions();
                      })
                      .fail(function (S) {
                        w._unblockActions();
                        var P = w._getErrorMessageFromResponse(S);
                        e.error("Saving failed. ", P) && console.error(P);
                      }),
                    w._toggleEditMode(!1);
                })
                .fail(function (S) {
                  w._unblockActions(),
                    w.saveMldata &&
                      w.model.set({ name_multilingual: w.prevMultilingualVal });
                  var P = w._getErrorMessageFromResponse(S);
                  w.setValue(m), w._toggleEditMode(!0), w.showInlineError(P);
                });
            }
          } else this.clearInlineError(), this._toggleEditMode(!1);
        },
        _blockActions: function () {
          var m = this.options.originatingView;
          m && m.blockActions && m.blockActions();
        },
        _unblockActions: function () {
          var m = this.options.originatingView;
          m && m.unblockActions && m.unblockActions();
        },
        onKeyInView: function (m) {
          return this.ItemNameBehavior.onKeyInView(m);
        },
        _toggleEditMode: function (m) {
          this.ItemNameBehavior._toggleEditMode(m);
        },
        onClickName: function (m) {
          return this.ItemNameBehavior.onClickName(m);
        },
        getValue: function () {
          return this.ItemNameBehavior.getValue();
        },
        setValue: function (m) {
          return this.ItemNameBehavior.setValue(m);
        },
        getInputBoxValue: function () {
          return this.ItemNameBehavior.getInputBoxValue();
        },
        setInputBoxValue: function (m) {
          return this.ItemNameBehavior.setInputBoxValue(m);
        },
        validate: function (m) {
          return this.ItemNameBehavior.validate(m);
        },
        setEditModeFocus: function () {
          return this.ItemNameBehavior.setEditModeFocus();
        },
        showInlineError: function (m) {
          return this.ItemNameBehavior.showInlineError(m);
        },
        clearInlineError: function () {
          return this.ItemNameBehavior.clearInlineError();
        },
        _getErrorMessageFromResponse: function (m) {
          return this.ItemNameBehavior._getErrorMessageFromResponse(m);
        },
      });
      return a.extend(c.prototype, o), c;
    }
  ),
  csui.define(
    "hbs!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="binf-dropdown">
  <button id="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "btnId") || (e != null ? n(e, "btnId") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "btnId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 14 },
                      end: { line: 2, column: 23 },
                    },
                  })
                : t)
            ) +
            `" type="button" class="binf-btn binf-dropdown-toggle csui-acc-focusable"
          data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
          aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "showMoreAria") ||
                  (e != null ? n(e, "showMoreAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "showMoreAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 22 },
                      end: { line: 4, column: 38 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "showMoreTooltip") ||
                  (e != null ? n(e, "showMoreTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "showMoreTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 47 },
                      end: { line: 4, column: 66 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="csui-button-icon icon-expandArrowDown" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "showMoreTooltip") ||
                  (e != null ? n(e, "showMoreTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "showMoreTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 63 },
                      end: { line: 5, column: 82 },
                    },
                  })
                : t)
            ) +
            `">
    </span>
  </button>
  <ul class="binf-dropdown-menu csui-normal-scrolling" role="menu"></ul>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_item.title_impl_dropdown.menu_dropdown.menu",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/item.title/impl/dropdown.menu/dropdown.menu.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/toolbar/toolitem.view",
      "csui/models/nodes",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/behaviors/dropdown.menu/dropdown.menu.behavior",
      "csui/controls/toolbar/flyout.toolitem.view",
      "csui/utils/commands",
      "csui/utils/commandhelper",
      "csui/controls/mixins/dynamic.toolitems/dynamic.toolitems.mixin",
      "csui-ext!csui/controls/item.title/dropdown.menu/dropdown.menu.view",
      "csui/utils/log",
      "i18n",
      "hbs!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",
      "i18n!csui/controls/item.title/impl/nls/localized.strings",
      "css!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w, b) {
      "use strict";
      f = f(v.id);
      var C = i.CompositeView.extend({
        className: "csui-item-title-dropdown-menu",
        template: w,
        templateHelpers: function () {
          return {
            btnId: a.uniqueId("dropdownMenuButton"),
            showMoreTooltip: b.showMore,
            showMoreAria: a.str.sformat(b.showMoreAria, this.model.get("name")),
          };
        },
        getChildView: function (k) {
          return k.get("flyout") ? n : e;
        },
        childViewContainer: "ul.binf-dropdown-menu",
        childViewOptions: function (k) {
          return {
            command:
              this.collection.commands &&
              this.collection.commands.findWhere({
                signature: k.get("signature"),
              }),
            noMenuRoles: void 0,
          };
        },
        ui: { dropdownToggle: ".binf-dropdown-toggle" },
        behaviors: {
          TabableRegionBehavior: { behaviorClass: r },
          DropdownMenuBehavior: { behaviorClass: t },
        },
        constructor: function (y) {
          (y.collection = new u(y.toolItems, {
            status: this._createCommandStatus(y),
            commands: this.commands,
            mask: y.toolItemsMask,
          })),
            (y.reorderOnSort = !0),
            i.CompositeView.prototype.constructor.apply(this, arguments),
            a.defaults(this.options, y.toolItems.options),
            (this.commands = y.commands || s),
            y.el && d(y.el).addClass(a.result(this, "className")),
            this.listenTo(
              this,
              "childview:toolitem:action",
              this._triggerMenuItemAction
            )
              .listenTo(this.model, "sync", this.render)
              .listenTo(this, "close:menu", this._closeToggle)
              .listenTo(h, "closeToggleAction", this._closeToggle)
              .listenTo(this.model, "change", this.render)
              .listenTo(
                this.options.collection,
                "add remove reset",
                this._setCaretVisibility
              ),
            this.model.delayedActions &&
              this.listenTo(
                this.model.delayedActions,
                "request",
                this._hide
              ).listenTo(this.model.delayedActions, "sync error", this._show),
            this.model.actions &&
              this.listenTo(this.model.actions, "update", this.render),
            m && m.forEach((S) => S(this)),
            this.makeDynamicToolItems({
              model: this.model,
              toolbarItems: { headerMenuToolbar: this.options.toolItems },
              toolbarNames: ["headerMenuToolbar"],
              eventArgs: {
                context: this.options.context,
                model: this.model,
                originatingView: this.options.originatingView,
              },
            });
        },
        _createCommandStatus: function (k) {
          return {
            nodes: new l([k.model]),
            container: k.model,
            context: k.context,
          };
        },
        _updateCollectionStatus: function () {
          var k = this._createCommandStatus(this.options);
          this.options.collection.setStatus(k);
        },
        _setCaretVisibility: function () {
          this.options.collection.length === 0
            ? this.$el.addClass("binf-hidden")
            : this.$el.removeClass("binf-hidden");
        },
        onBeforeRender: function () {
          this._updateCollectionStatus(), this._setCaretVisibility();
        },
        onRender: function () {
          this.model.delayedActions &&
            this.model.delayedActions.fetching &&
            this._hide(),
            this.ui.dropdownToggle.binf_dropdown();
          var k = this;
          this.ui.dropdownToggle.on("binf.dropdown.after.show", function () {
            k.adjustDropdown();
          }),
            d(window).on(
              "resize.item.title.dropdown.menu",
              a.bind(this.adjustDropdown, this)
            ),
            this.delegateEvents();
        },
        adjustDropdown: function () {
          var k =
              (this.options.originatingView &&
                this.options.originatingView.$el) ||
              (this.options.containerClass &&
                this.$el.closest(this.options.containerClass)),
            y = g && g.settings.rtl;
          if (k) {
            var S = k.height(),
              P = this.$el.find("ul.binf-dropdown-menu"),
              F = this.options.offset || 52,
              D = S - F;
            P.css("max-height", D + "px");
            var L =
              d(".csui-toolbar-caption").width() -
              d(".csui-item-title").width();
            (L = d(".csui-rightToolbar").width() + L / 2 + 24),
              L < P.width() &&
                (y
                  ? P.css({ left: 0, right: "auto" })
                  : P.css({ left: "auto", right: 0 }));
          }
        },
        currentlyFocusedElement: function () {
          return d(this.ui.dropdownToggle);
        },
        _hide: function () {
          this.$el.addClass("binf-invisible");
        },
        _show: function () {
          this.$el.removeClass("binf-invisible");
        },
        _closeToggle: function () {
          this.isRendered &&
            (this.ui.dropdownToggle.parent().hasClass("binf-open") &&
              this.ui.dropdownToggle.binf_dropdown("toggle"),
            this.ui.dropdownToggle.attr("aria-expanded", "false"));
        },
        _triggerMenuItemAction: function (k, y) {
          this.ui.dropdownToggle.binf_dropdown("toggle");
          var S = y.toolItem,
            P = S.get("signature"),
            F = this.commands.get(P),
            D = {
              context: this.options.context,
              nodes: new l([this.model]),
              container: this.model,
              originatingView: this.options.originatingView,
              collection: this.options.originatingView.collection,
            };
          try {
            if (F)
              if (a.isFunction(F.execute)) {
                var L = F.execute(D);
                o.handleExecutionResults(L, {
                  command: F,
                  suppressSuccessMessage: D.suppressSuccessMessage,
                  suppressFailMessage: D.suppressFailMessage,
                });
              } else this.trigger(P.toLowerCase(), this);
            else throw new Error('Command "' + P + '" not found.');
          } catch (Q) {
            f.warn(
              `Executing the command "{0}" failed.
{1}`,
              F.get("signature"),
              Q.stack
            ) && console.warn(f.last);
          }
        },
      });
      return c.mixin(C.prototype), C;
    }
  ),
  csui.define(
    "csui/controls/item.title/impl/node.state/node.state.view",
    [
      "module",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/log",
      "csui/controls/node.state/node.states.view",
      "csui/controls/node.state/node.state.icons",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      h = h(v.id);
      var l = d.View.extend({
        className: "csui-node-state",
        constructor: function (r) {
          d.View.prototype.constructor.apply(this, arguments),
            (this.cellRegion = new d.Region({ el: this.el })),
            this.listenTo(
              this,
              "before:render",
              this._destroyStateIcons
            ).listenTo(this, "before:destroy", this._destroyStateIcons),
            this.listenTo(this.model, "change", this.render);
        },
        _destroyStateIcons: function () {
          this.cellRegion.empty();
        },
        render: function () {
          return (
            this._ensureViewIsIntact(),
            this.triggerMethod("before:render", this),
            this._renderContent(),
            this.bindUIElements(),
            this.triggerMethod("render", this),
            this
          );
        },
        _getEnabledNodeStateIcons: function () {
          var u, r;
          return (
            (u = Object.getPrototypeOf(e)),
            (r = new u.constructor(
              e.filter(function (t) {
                var n = t.get("iconView");
                try {
                  return (
                    n &&
                    (!n.enabled ||
                      n.enabled({
                        context: this.options.context,
                        node: this.model,
                      }))
                  );
                } catch (s) {
                  h.warn(
                    `Evaluating an icon view failed.
{0}`,
                    s.stack
                  ) && console.warn(h.last);
                }
              }, this)
            )),
            r
          );
        },
        _renderContent: function () {
          this._renderValue();
        },
        _renderValue: function () {
          var u = this._getEnabledNodeStateIcons();
          if (u.length) {
            var r = new i({
              context: this.options.context,
              node: this.model,
              tableView: this.options.tableView,
              collection: u,
            });
            this.cellRegion.show(r);
          }
        },
        onDomRefresh: function () {
          a.findFocusables(this.el).addClass("csui-acc-focusable");
        },
      });
      return l;
    }
  ),
  csui.define(
    "hbs!csui/controls/item.title/impl/item.title",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-item-title-icon"></div>
<div class="csui-item-title-name"></div>
<div  class="csui-item-title-version"></div>
<div class="csui-item-title-menu"></div>
<div class="csui-item-title-node-state"></div>
`;
        },
      });
      return (
        a.registerPartial("csui_controls_item.title_impl_item.title", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/item.title/impl/item.title",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/item.title/item.title.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/item.title/impl/name/name.view",
      "csui/controls/item.title/impl/dropdown.menu/dropdown.menu.view",
      "csui/controls/item.title/impl/node.state/node.state.view",
      "hbs!csui/controls/item.title/impl/item.title",
      "csui/utils/contexts/factories/ancestors",
      "css!csui/controls/item.title/impl/item.title",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = "csui-item-title-version-style",
        o = h.LayoutView.extend({
          className: "csui-item-title",
          template: t,
          ui: {
            icon: ".csui-item-title-icon",
            name: ".csui-item-title-name",
            menu: ".csui-item-title-menu",
            nodeState: ".csui-item-title-node-state",
            versionNumberState: ".csui-item-title-version",
          },
          regions: {
            iconRegion: "@ui.icon",
            nameRegion: "@ui.name",
            menuRegion: "@ui.menu",
            nodeStateRegion: "@ui.nodeState",
          },
          constructor: function (m = {}) {
            h.LayoutView.prototype.constructor.call(this, m);
          },
          initialize: function () {
            (this.iconView = new e({
              originatingView: this.options?.originatingView,
              node: this.options.model,
            })),
              (this.nameView = new l({
                context: this.options.context,
                model: this.options.model,
                originatingView: this.options.originatingView,
                nameSchema: this.options.nameSchema,
              })),
              this.listenTo(this.nameView, "changed:editmode", function (c) {
                c
                  ? this.ui.menu.addClass("binf-hidden")
                  : this.ui.menu.removeClass("binf-hidden");
              }),
              (this.menuView = new u({
                context: this.options.context,
                model: this.options.model,
                originatingView: this.options.originatingView,
                toolItems: this.options.toolItems,
                toolItemsMask: this.options.toolItemsMask,
                commands: this.options.commands,
              })),
              this.listenTo(this.menuView, "rename", function () {
                this.nameView._toggleEditMode.call(this.nameView, !0);
              }),
              (this.nodeStateView = new r({
                context: this.options.context,
                model: this.options.model,
                tableView: this.options.originatingView,
              }));
          },
          getSourceOfCompoundDocuments: function (c) {
            if (!c || c.length === 0) return !1;
            var m = c.length,
              f = c[m - 1];
            if (f && f.type === 136) {
              var g = c[m - 2];
              return g && (g.type === 138 || g.type === 139) ? g : !1;
            }
            return !1;
          },
          getAncestorModels: function (c) {
            var m = v.Deferred();
            return (
              this.options.originatingView.connector
                .makeAjaxCall({ url: this.getURL(c) })
                .then(function (f) {
                  return m.resolve(f);
                })
                .catch(function (f) {
                  return m.reject(f);
                }),
              m.promise()
            );
          },
          getURL: function (c) {
            var m = "";
            return (
              c &&
                ((m = this.options.originatingView.connector
                  .getConnectionUrl()
                  .getApiBase("v2")),
                m && (m += "nodes/" + Math.abs(c) + "/releases")),
              m
            );
          },
          getVesionNoNType: function (c, m) {
            if (!c || !m || m.length === 0) return !1;
            for (var f, g = m.length, w = 0; w < g; w++)
              if (
                m[w].data &&
                m[w].data.properties &&
                m[w].data.properties.id &&
                m[w].data.properties.id === c
              ) {
                f =
                  m[w].data.properties.release +
                  "." +
                  m[w].data.properties.revision;
                break;
              }
            return f;
          },
          onRender: function () {
            this.nodeStateRegion.show(this.nodeStateView);
            var c = this.options.context.getModel(n);
            c.node.attributes.type === 136
              ? this.checkForRelUnderCompDoc(c)
              : (this.iconRegion.show(this.iconView),
                this.nameRegion.show(this.nameView),
                this.menuRegion.show(this.menuView));
          },
          checkForRelUnderCompDoc: function (c) {
            this.listenTo(c, "sync", function () {
              var m = c.toJSON(),
                f = this.getSourceOfCompoundDocuments(m);
              if (f && (f.type === 138 || f.type === 139)) {
                this.removeHeaderIcons4CompoundDoc(this);
                var g = this;
                this.getAncestorModels(f.parent_id)
                  .done(function (w) {
                    var b = g.getVesionNoNType(f.id, w.results);
                    g.showVersionNo(g, b, f);
                  })
                  .catch(function (w) {
                    console.warn(w), g.showVersionNo(g);
                  });
              } else this.showVersionNo(this);
            });
          },
          showVersionNo: function (c, m, f) {
            var g = c.$(c.ui.versionNumberState);
            if (!c || !(f instanceof Object) || !m) {
              g.html(""), g.removeClass(s), c.showHeaderIcons4CompoundDoc(c);
              return;
            }
            g.html(m),
              g.addClass(s),
              (c.options.model.attributes.type = f.type),
              (c.options.model.attributes.type_name = f.type_name),
              (c.iconView = new e({ node: c.options.model })),
              c.showHeaderIcons4CompoundDoc(c);
          },
          showHeaderIcons4CompoundDoc: function (c) {
            (c.nameView = new l({
              context: c.options.context,
              model: c.options.model,
              originatingView: c.options.originatingView,
              nameSchema: c.options.nameSchema,
            })),
              (c.menuView = new u({
                context: c.options.context,
                model: c.options.model,
                originatingView: c.options.originatingView,
                toolItems: c.options.toolItems,
                toolItemsMask: c.options.toolItemsMask,
                commands: c.options.commands,
              })),
              c.listenTo(c.menuView, "rename", function () {
                c.nameView._toggleEditMode.call(c.nameView, !0);
              }),
              c.listenTo(c.nameView, "changed:editmode", function (m) {
                m
                  ? c.ui.menu.addClass("binf-hidden")
                  : c.ui.menu.removeClass("binf-hidden");
              }),
              c.iconRegion.show(c.iconView),
              c.nameRegion.show(c.nameView),
              c.menuRegion.show(c.menuView);
          },
          removeHeaderIcons4CompoundDoc: function (c) {
            c.iconRegion.empty(), c.nameRegion.empty(), c.menuRegion.empty();
          },
          onDomRefresh: function () {
            d.each(this.regionManager._regions, function (c) {
              c.currentView && c.currentView.triggerMethod("dom:refresh");
            });
          },
          onShow: function () {
            d.each(this.regionManager._regions, function (c) {
              c.currentView && c.currentView.triggerMethod("show");
            });
          },
          onAfterShow: function () {
            d.each(this.regionManager._regions, function (c) {
              c.currentView && c.currentView.triggerMethod("after:show");
            });
          },
          closeMenu: function () {
            this.menuView && this.menuView.trigger("close:menu");
          },
        });
      return o;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform.registry",
    ["csui/lib/underscore"],
    function (v) {
      function d() {
        this._addableTypes = {};
      }
      return (
        v.extend(d.prototype, {
          getInlineFormView: function (a) {
            return this._addableTypes[a];
          },
          registerByAddableType: function (a, h) {
            if (!v.isNumber(a))
              throw new Error("addableType key must be a number");
            this._addableTypes[a] = h;
          },
        }),
        new d()
      );
    }
  ),
  csui.define("csui/controls/table/inlineforms/folder/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/inlineforms/folder/impl/nls/root/lang", {
    CancelButtonLabel: "Cancel",
    NewNamePlaceholder: "Enter name",
  }),
  csui.define("csui/controls/table/inlineforms/inlineform/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/inlineforms/inlineform/impl/nls/root/lang", {
    EditCancelTooltip: "Cancel",
    SaveEditTooltip: "Save",
    CancelButtonLabel: "Cancel",
    SaveButtonLabel: "Save",
    AddButtonLabel: "Add",
    ExtendedAdd: "Extended add dialog",
    ExtendedAddAria: "Open extended add dialog",
    ActionFailedMessage: "Action failed",
    ShortcutPickerTitle: "Shortcut",
    ShortcutNamePlaceholder: "Enter a new Shortcut name",
    NameMustNotBeEmpty: "Shortcut name cannot be empty.",
    NoShortcutSelected: "No Shortcut target selected.",
  }),
  csui.define(
    "css!csui/controls/table/inlineforms/inlineform/impl/inlineform",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform/inlineform.view",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/utils/log",
      "i18n!csui/controls/table/inlineforms/inlineform/impl/nls/lang",
      "csui/lib/marionette",
      "csui/models/nodechildren",
      "csui/utils/commands/add.item.metadata",
      "csui/utils/commands/properties",
      "csui/models/nodes",
      "csui/utils/commandhelper",
      "csui/behaviors/keyboard.navigation/tabkey.behavior",
      "csui/lib/jsonpath",
      "csui/models/nodecreateforms",
      "css!csui/controls/table/inlineforms/inlineform/impl/inlineform",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m) {
      var f = l.ItemView.extend(
        {
          className: "csui-inlineform",
          ui: {
            inputFieldName: ".csui-inlineform-input-name",
            cancelButton: ".csui-btn-cancel",
            editCancelButton: ".csui-btn-edit-cancel",
            saveButton: ".csui-btn-save",
            metadataButton: ".csui-btn-metadata",
          },
          events: {
            "keyup @ui.inputFieldName": "keyReleased",
            "input @ui.inputFieldName": "mouseRightCicked",
            "focusin @ui.inputFieldName": "onFocusInWrite",
            "keydown @ui.editCancelButton": "cancelEditKeyPressed",
            "submit form": "saveClicked",
            "click @ui.saveButton": "saveClicked",
            "click @ui.cancelButton": "cancelClicked",
            "click @ui.editCancelButton": "cancelClicked",
            "click @ui.metadataButton": a.debounce(function (g) {
              this.metadataIconClicked(g);
            }, 500),
            keydown: "onKeyInView",
          },
          behaviors: { TabKeyBehavior: { behaviorClass: o } },
          _templateHelpers: function () {
            var g = this.model.get("csuiInlineFormErrorMessage"),
              w = !1,
              b = this.model.get("type");
            (w = !this.model.get("name")),
              (w = w || this.checkCustomFieldsModel());
            var C = {
              name: this.model.get("name"),
              EditCancelTooltip: e.EditCancelTooltip,
              SaveEditTooltip: e.SaveEditTooltip,
              CancelButtonLabel: a.isUndefined(this.options.cancelTitle)
                ? e.CancelButtonLabel
                : this.options.cancelTitle,
              disableSaveBtn: w,
              SaveButtonLabel: this._isEditMode()
                ? e.SaveButtonLabel
                : e.AddButtonLabel,
              formModeIsEdit: this._isEditMode(),
              haveErrorMessage: !!g,
              extendedAdd: e.ExtendedAdd,
              extendedAddAria: e.ExtendedAddAria,
            };
            return (
              C.haveErrorMessage &&
                ((C.errorMessage = g), (C.errorMsgId = a.uniqueId("err"))),
              C
            );
          },
          constructor: function (w) {
            (this.options = w || {}),
              l.ItemView.prototype.constructor.apply(this, arguments);
          },
          onDomRefresh: function () {
            this.refreshTabableElements();
            var g = this.model.get("csuiInlineFormErrorMessage");
            this.tabableElements &&
              this.tabableElements[0] &&
              d(this.tabableElements[0]).trigger("focus"),
              this.ui.metadataButton.length &&
                (this.ui.metadataButton.attr(
                  "title",
                  this.options.ExtendedAdd || e.ExtendedAdd
                ),
                this.ui.metadataButton.attr(
                  "aria-label",
                  this.options.ExtendedAddAria || e.ExtendedAddAria
                ),
                this.options.AriaHasPopUp === void 0
                  ? this.ui.metadataButton.attr("aria-haspopup", !0)
                  : this.ui.metadataButton.attr(
                      "aria-haspopup",
                      this.options.AriaHasPopUp
                    ));
          },
          cancelClicked: function (g) {
            g.preventDefault(), g.stopPropagation(), this.cancel();
          },
          onKeyInView: function (g) {
            if (g.keyCode === 9) return this._moveTab(g), !0;
          },
          refreshTabableElements: function () {
            this.tabableElements = this.$el
              .find("input:not([disabled]),  button:not([disabled])")
              .filter(":visible")
              .toArray();
          },
          _moveTab: function (g) {
            (this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
              g.target
            )),
              g.shiftKey
                ? this.currentlyFocusedElementIndex > 0
                  ? ((this.currentlyFocusedElementIndex -= 1),
                    d(
                      this.tabableElements[this.currentlyFocusedElementIndex]
                    ).trigger("focus"))
                  : ((this.currentlyFocusedElementIndex =
                      this.tabableElements.length - 1),
                    d(
                      this.tabableElements[this.currentlyFocusedElementIndex]
                    ).trigger("focus"))
                : this.currentlyFocusedElementIndex <
                  this.tabableElements.length - 1
                ? ((this.currentlyFocusedElementIndex += 1),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : ((this.currentlyFocusedElementIndex = 0),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus")),
              g.stopPropagation(),
              g.preventDefault();
          },
          saveClicked: function (g) {
            if ((g.preventDefault(), g.stopPropagation(), this.model.get("id")))
              this._saveIfOk();
            else {
              var w = this;
              (w.required = !1),
                w._getCategoryID().done(function () {
                  w.required ? w._openMetadataPage() : w._saveIfOk();
                });
            }
          },
          _getCategoryID: function () {
            var g = this,
              w = g.options.model.collection.node.get("id"),
              b = this.model.get("type"),
              C = g.options.model.connector,
              k = d.Deferred(),
              y = new m(void 0, { node: this.model, docParentId: w, type: b });
            return (
              (this.xhr = this.model.get("xhr") || new XMLHttpRequest()),
              y
                .fetch()
                .then(
                  a.bind(function (S, P, F) {
                    a.any(S.forms, function (D) {
                      if (D.hasOwnProperty("role_name")) {
                        var L = g._checkForAlpacaRequiredFields(D),
                          Q = c(
                            D.schema.properties,
                            "$..[?(@.required===true)]"
                          );
                        a.isArray(Q) && Q.length > 0 && !L && (g.required = !0);
                      }
                    }),
                      (g.model.attributes.forms = S),
                      (g.model.attributes.xhr = this.xhr),
                      k.resolve();
                  })
                )
                .fail(function (S) {
                  k.reject();
                }),
              k.promise()
            );
          },
          _checkForAlpacaRequiredFields: function (g) {
            var w = !0,
              b = g.data || g.get("data"),
              C = g.options || g.get("options"),
              k = g.schema || g.get("schema"),
              y = [],
              S = c(k, "$..[?(@.required===true)]", { resultType: "PATH" }),
              P = c(C, "$..[?(@.validate===false)]", { resultType: "PATH" }),
              F = [];
            a.each(P, function (G) {
              var N = G.toString().match(/(\'[\w]*\')/g);
              N && F.push(N[N.length - 1].replace(/'/g, ""));
            });
            var D = [];
            a.each(S, function (G) {
              var N = G.toString().match(/(\'[\w]*\')/g);
              N && D.push(N[N.length - 1].replace(/'/g, ""));
            });
            var L = function (G, N) {
                var W = N.filter(function (H) {
                  return G.indexOf(H) === -1;
                });
                return W;
              },
              Q = L(F, D);
            if (Q) {
              var q = !1;
              a.each(Q, function (G) {
                if (
                  ((y = c(
                    b,
                    "$.." + G.toString(),
                    { resultType: "PATH" }.toArray
                  )),
                  a.each(y, function (N) {
                    var W = function (H) {
                      if (H instanceof Array && (H !== null || H !== ""))
                        a.each(H, function (z) {
                          W(z);
                        });
                      else if (H === null || H === "") {
                        q = !0;
                        return;
                      }
                    };
                    if (!q) W(N);
                    else {
                      w = !1;
                      return;
                    }
                  }),
                  q)
                ) {
                  w = !1;
                  return;
                }
              });
            }
            return w;
          },
          _openMetadataPage: function () {
            var g = "{0}:metadataIconClicked {1}",
              w = this;
            w.viewToModelData();
            var b = new n();
            b.push(w.options.model);
            var C = {
                nodes: b,
                container: w.options.model.collection.node,
                collection: w.options.model.collection,
              },
              k = { context: w.options.context };
            k = a.extend(k, { addableType: w.constructor.CSSubType });
            var y = new r();
            y.execute(C, k)
              .then(function (S) {
                if (
                  (delete w.model.inlineFormView,
                  w.model.unset("csuiInlineFormErrorMessage", { silent: !0 }),
                  w.trigger("editEnded", this),
                  S.name)
                )
                  return w._removeLastElement(), w.model.fetch();
              })
              .fail(function (S) {
                w.cancel();
              });
          },
          cancelEditKeyPressed: function (g) {
            g.keyCode === 9 &&
              (g.shiftKey ||
                (g.preventDefault(), g.stopPropagation(), this._saveIfOk()));
          },
          onFocusInWrite: function (g) {
            var w = d(g.target)[0],
              b = w.value,
              C = b ? b.length : 0;
            this.model.get("type") === 144 &&
              b.lastIndexOf(".") > 0 &&
              b.lastIndexOf(".") < b.length - 1 &&
              (C = b.lastIndexOf(".")),
              (w.selectionEnd = C);
          },
          toggleButton: function (g) {
            if (this.ui.saveButton.length) {
              var w = this.ui.inputFieldName.val().trim(),
                b = !1;
              (b = this.isSaveEnabled(g.target.value)),
                (b = b && this.checkCustomFieldsInputVal()),
                this.ui.saveButton.prop("disabled", !b);
            }
            this.refreshTabableElements();
          },
          checkCustomFieldsModel: function () {
            return !1;
          },
          checkCustomFieldsInputVal: function () {
            return !0;
          },
          mouseRightCicked: function (g) {
            var w = this;
            w.toggleButton(g);
          },
          isSaveEnabled: function (g) {
            return (g = g.trim()), !(!g.length || g === this.model.get("name"));
          },
          keyReleased: function (g) {
            if (
              (this.leftInputFieldTimer &&
                clearTimeout(this.leftInputFieldTimer),
              g.keyCode === 27)
            ) {
              this.cancel(), g.preventDefault(), g.stopPropagation();
              return;
            }
            this.toggleButton(g);
          },
          cancel: function (g) {
            g || (g = {}),
              this.destroy(),
              this.model.get("id") === void 0
                ? this.model.destroy()
                : (delete this.model.inlineFormView,
                  this.model.set("csuiInlineFormErrorMessage", "dummy", {
                    silent: !0,
                  }),
                  this.model.unset("csuiInlineFormErrorMessage", {
                    silent: g.silent,
                  }));
          },
          _isEditMode: function () {
            return this.model.get("id") !== void 0;
          },
          viewToModelData: function () {
            this._viewToModelData(), this._viewToModelDataExtended();
          },
          _viewToModelData: function () {
            this.model.set("name", this._getInputName(), { silent: !0 });
          },
          _viewToModelDataExtended: function () {},
          _getInputName: function () {
            var g = this.ui.inputFieldName,
              w = g.val();
            return (w = w.trim()), w;
          },
          _saveIfOk: function () {},
          _save: function (g) {
            var w = this.options.originatingView;
            w && w.blockActions && w.blockActions();
            var b =
                this.model.get("id") === void 0
                  ? "_saveNewModel"
                  : "_updateModel",
              C = this[b](g);
            return (
              w && w.unblockActions && C.always(a.bind(w.unblockActions, w)),
              C.done(a.bind(this.destroy, this)),
              C
            );
          },
          _updateModel: function (g) {
            var w = "{0}:_updateModel {1}",
              b = this.model.inlineFormView;
            delete this.model.inlineFormView;
            var C = this.model.mustRefreshAfterPut !== !1 ? g : void 0,
              k = this.model.mustRefreshAfterPut !== !1 ? void 0 : g,
              y = this,
              S =
                y.options.originatingView &&
                y.options.originatingView.thumbnailView;
            return this.model
              .save(k, {
                data: C,
                patch: !0,
                wait: !0,
                silent: !0,
                skipSetValue: S,
              })
              .then(function () {
                if (
                  (y.model.set(g, { silent: !0 }),
                  y.model.mustRefreshAfterPut !== !1)
                )
                  return y.model.fetch();
                y.model.set("csuiInlineFormErrorMessage", "dummy", {
                  silent: !0,
                }),
                  y.model.unset("csuiInlineFormErrorMessage");
              })
              .fail(function (P) {
                y.model.inlineFormView = b;
                var F = a.keys(g),
                  D = a.pick(a.clone(y.model.attributes), F);
                y.model.set(g, { silent: !0 });
                var L = y._getErrorMessageFromResponse(P);
                y.model.set("csuiInlineFormErrorMessage", L),
                  i.error("Saving failed. ", L) && console.error(i.last),
                  y.model.set(D, { silent: !0 });
              });
          },
          onRender: function () {
            var g = this,
              w =
                g.options.originatingView &&
                g.options.originatingView.thumbnailView,
              b = this.model.get("csuiInlineFormErrorMessage");
            b &&
              w &&
              setTimeout(function () {
                var C = g.$el.find(".csui-inlineform-group-error").height(),
                  k = g.$el.find(".csui-text-danger").height();
                g._isEditMode()
                  ? g.$el.addClass("csui-inlineform-edit")
                  : g.$el.removeClass("csui-inlineform-edit"),
                  C < k
                    ? g.$el.find(".binf-text-danger").addClass("add-ellipsis")
                    : g.$el
                        .find(".binf-text-danger")
                        .removeClass("add-ellipsis");
              });
          },
          _saveNewModel: function (g) {
            var w = "{0}:_saveNewModel {1}",
              b = this.model.inlineFormView;
            delete this.model.inlineFormView, this.model.set(g, { silent: !0 });
            var C = a.clone(this.model.attributes);
            delete C.hasMetadataRow,
              delete C.csuiInlineFormErrorMessage,
              delete C.forms,
              delete C.xhr;
            var k = this;
            return this.model
              .save(void 0, { data: C, wait: !0, silent: !0 })
              .then(function () {
                if (k.model.mustRefreshAfterPut !== !1)
                  return k._removeLastElement(), k.model.fetch();
                k.model.set("csuiInlineFormErrorMessage", "dummy", {
                  silent: !0,
                }),
                  k.model.unset("csuiInlineFormErrorMessage");
              })
              .fail(function (y) {
                (k.model.inlineFormView = b), k.model.trigger("error", k.model);
                var S = k._getErrorMessageFromResponse(y);
                k.model.set("csuiInlineFormErrorMessage", S),
                  i.error("Saving failed. ", S) && console.error(i.last);
              });
          },
          _getErrorMessageFromResponse: function (g) {
            var w;
            if (g && g.responseJSON && g.responseJSON.error)
              w = g.responseJSON.error;
            else {
              var b = h.MessageHelper.toHtml();
              h.MessageHelper.reset(), (w = d(b).text());
            }
            return w;
          },
          metadataIconClicked: function (g) {
            var w = "{0}:metadataIconClicked {1}";
            g.preventDefault(), g.stopPropagation(), this.viewToModelData();
            var b = this,
              C = new n();
            C.push(this.model);
            var k = {
                nodes: C,
                container: this.model.collection.node,
                collection: this.model.collection,
              },
              y = { context: this.options.context };
            if (this.model.get("id") === void 0) {
              y = a.extend(y, { addableType: this.constructor.CSSubType });
              var S = new r();
              S.execute(k, y)
                .then(function (F) {
                  if (
                    (delete b.model.inlineFormView,
                    b.model.unset("csuiInlineFormErrorMessage", { silent: !0 }),
                    b.trigger("editEnded", this),
                    F.name)
                  )
                    return b.model.fetch();
                })
                .done(function () {
                  b.options.originatingView.$el
                    .find(
                      ".csui-nodetable .csui-new-item a.csui-table-cell-name-value"
                    )
                    .first()
                    .trigger("focus");
                })
                .fail(function (F) {
                  b.cancel(),
                    b.options.originatingView.$el
                      .find(".csui-addToolbar .binf-dropdown-toggle")
                      .trigger("focus");
                });
            } else {
              k = a.extend(k, {
                originatingView: this.options.originatingView,
              });
              var P = new t();
              P.execute(k, y).always(function (F) {
                b.cancel();
              });
            }
          },
          _removeLastElement: function () {
            this.model.collection &&
              this.model.collection.length > 0 &&
              this.model.collection.length > this.model.collection.topCount &&
              ((this.model.collection.isPoped = !0),
              this.model.collection.pop());
          },
        },
        { CSSubType: void 0 }
      );
      return f;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/folder/impl/folder",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "csui-form-error";
        },
        3: function (i, e, l, u, r) {
          return "csui-inlineform-error";
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "name",
                  hash: {},
                  loc: {
                    start: { line: 6, column: 33 },
                    end: { line: 6, column: 41 },
                  },
                })
              : t)
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t =
                n(l, "namePlaceholder") ||
                (e != null ? n(e, "namePlaceholder") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "namePlaceholder",
                  hash: {},
                  loc: {
                    start: { line: 6, column: 49 },
                    end: { line: 6, column: 68 },
                  },
                })
              : t)
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-describedby="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 47 },
                      end: { line: 7, column: 61 },
                    },
                  })
                : t)
            ) +
            '"'
          );
        },
        11: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <div class="csui-inlineform-group csui-inlineform-group-error" role="alert" id="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 82 },
                      end: { line: 17, column: 96 },
                    },
                  })
                : t)
            ) +
            `">
    <div class="binf-text-danger" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 41 },
                      end: { line: 18, column: 57 },
                    },
                  })
                : t)
            ) +
            `"><span
        class="csui-text-danger">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 33 },
                      end: { line: 19, column: 49 },
                    },
                  })
                : t)
            ) +
            `</span></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<form class="csui-inlineform-group csui-inlineform-group-folder-name ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 69 },
                  end: { line: 2, column: 44 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
  <input type="text" value="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 28 },
                      end: { line: 3, column: 36 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 51 },
                      end: { line: 3, column: 70 },
                    },
                  })
                : n)
            ) +
            `"
         class="binf-form-control csui-inlineform-input-name ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 61 },
                  end: { line: 5, column: 59 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
         aria-label="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "name") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 6, column: 21 },
                  end: { line: 6, column: 75 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
    ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 4 },
                  end: { line: 7, column: 69 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
    <button type="submit" class="csui-btn-save" disabled title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 64 },
                      end: { line: 8, column: 83 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 97 },
                      end: { line: 8, column: 116 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 9, column: 6 },
                end: { line: 9, column: 80 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
    <button type="reset" class="csui-btn-cancel csui-inline" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 68 },
                      end: { line: 11, column: 89 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 24 },
                      end: { line: 12, column: 45 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 13, column: 6 },
                end: { line: 13, column: 79 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
</form>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 16, column: 0 },
                  end: { line: 21, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_folder_impl_folder",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/folder/impl/folder",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/generic/generic.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/controls/table/inlineforms/folder/impl/nls/lang",
      "csui/controls/table/inlineforms/inlineform.registry",
      "csui/controls/table/inlineforms/inlineform/inlineform.view",
      "hbs!csui/controls/table/inlineforms/folder/impl/folder",
      "css!csui/controls/table/inlineforms/folder/impl/folder",
    ],
    function (v, d, a, h, i, e, l) {
      var u = e.extend(
        {
          className: function () {
            var r = "csui-inlineform-generic";
            return (
              e.prototype.className &&
                (r += " " + d.result(e.prototype, "className")),
              r
            );
          },
          template: l,
          templateHelpers: function () {
            var r = this._templateHelpers(),
              t = d.extend(r, { namePlaceholder: h.NewNamePlaceholder });
            return t;
          },
          ui: {},
          events: {},
          constructor: function (t) {
            (this.options = t || {}),
              (this.ui = d.extend({}, this.ui, e.prototype.ui)),
              (this.events = d.extend({}, this.events, e.prototype.events)),
              a.ItemView.prototype.constructor.apply(this, arguments);
          },
          _saveIfOk: function () {
            var r = this._getInputName(),
              t = this.model.get("name");
            r.length > 0 && r === t
              ? this.cancel()
              : r.length > 0 && this._save({ name: r });
          },
        },
        { CSSubType: NaN }
      );
      return i.registerByAddableType(u.CSSubType, u), u;
    }
  ),
  csui.define("csui/controls/table/inlineforms/base/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/inlineforms/base/impl/nls/root/lang", {
    EditCancelTooltip: "Cancel",
    SaveEditTooltip: "Save",
    CancelButtonLabel: "Cancel",
    SaveButtonLabel: "Save",
    AddButtonLabel: "Add",
    ExtendedAdd: "Extended add dialog",
    ExtendedAddAria: "Open extended add dialog",
    ActionFailedMessage: "Action failed",
    NewNamePlaceholder: "Enter name",
    UrlNamePlaceholder: "Enter website name",
    UrlNameAria: "Website name",
    UrlAddressPlaceholder: "Web address",
    UrlAddressAria: "Web address",
    UrlInvalidFormat: "The format of the Web address is invalid.",
    clearIconAriaLabel: "Clear",
    browseIconAriaLabel: "Browse",
  }),
  csui.define(
    "hbs!csui/controls/table/inlineforms/base/views/textfield/impl/textfield.view",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "csui-inlineform-error";
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "name",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 31 },
                    end: { line: 4, column: 39 },
                  },
                })
              : t)
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t =
                n(l, "namePlaceholder") ||
                (e != null ? n(e, "namePlaceholder") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "namePlaceholder",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 47 },
                    end: { line: 4, column: 66 },
                  },
                })
              : t)
          );
        },
        7: function (i, e, l, u, r) {
          return ' aria-invalid="true" ';
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<input type="text" value="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 26 },
                      end: { line: 1, column: 34 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 49 },
                      end: { line: 1, column: 68 },
                    },
                  })
                : n)
            ) +
            `"
       class="binf-form-control csui-inlineform-type-` +
            i.escapeExpression(
              ((n =
                (n = s(l, "prefix") || (e != null ? s(e, "prefix") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "prefix",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 53 },
                      end: { line: 2, column: 63 },
                    },
                  })
                : n)
            ) +
            " " +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 64 },
                  end: { line: 3, column: 57 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
       aria-label="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "name") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.program(5, r, 0),
                loc: {
                  start: { line: 4, column: 19 },
                  end: { line: 4, column: 73 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
         ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(7, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 9 },
                  end: { line: 5, column: 61 },
                },
              }
            )) != null
              ? t
              : "") +
            "/>"
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_base_views_textfield_impl_textfield.view",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/base/views/textfield/impl/textfield",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/views/textfield/textfield.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/controls/table/inlineforms/base/views/textfield/impl/textfield.view",
      "css!csui/controls/table/inlineforms/base/views/textfield/impl/textfield",
    ],
    function (v, d, a, h) {
      var i = a.View.extend({
        className: function () {
          return (
            "csui-inlineform-text-field csui-inlineform-type-" + this.fieldName
          );
        },
        ui: { inputFieldName: "input" },
        events: {
          "input @ui.inputFieldName": "toggleSaveButton",
          "focusin @ui.inputFieldName": "onFocusInWrite",
        },
        template: h,
        templateContext: function () {
          var e = this.parentView.model.get("csuiInlineFormErrorMessage"),
            l = this.parentView.model.get("type") === 140,
            u = this.parentView.model.get("isInvalidUrl"),
            r = l && this.fieldName === "url" && !u,
            t = l && this.fieldName === "name" && u,
            n = {
              haveErrorMessage: t || r ? !1 : !!e,
              name: this.parentView.model.get(this.fieldName),
              namePlaceholder: this.model.get("namePlaceholder"),
              prefix: this.fieldName,
            };
          return (
            n.haveErrorMessage &&
              ((n.errorMessage = e), (n.errorMsgId = d.uniqueId("err"))),
            n
          );
        },
        constructor: function (l) {
          (this.parentView = l.parentView),
            (this.fieldName = l.model.get("fieldName")),
            a.View.prototype.constructor.apply(this, arguments);
        },
        toggleSaveButton: function (e) {
          this.updateFieldModel(e.target.value),
            this.parentView.trigger("enable:save:btn"),
            this.onInputValueChanged(e);
        },
        onRender: function () {
          var e = this.parentView.model.get("csuiInlineFormErrorMessage");
          e &&
            this.$el
              .find("input.csui-inlineform-error")
              .attr("aria-errormessage", this.options.node.get("errorid"));
        },
        onInputValueChanged: function (e) {},
        updateFieldModel: function (e) {
          var l = this.parentView.model.get(this.fieldName),
            u = !1;
          if (((e = e.trim()), !e.length || e === l)) {
            var r = this.parentView.model.get("id") === void 0;
            r && l ? (u = this.model.get("required") ? !!e : !0) : (u = !1);
          } else u = !0;
          return this.model.set({ validField: u, value: e }), u;
        },
        onFocusInWrite: function (e) {
          var l = v(e.target)[0],
            u = l.value,
            r = u ? u.length : 0;
          this.model.get("type") === 144 &&
            u.lastIndexOf(".") > 0 &&
            u.lastIndexOf(".") < u.length - 1 &&
            (r = u.lastIndexOf(".")),
            (l.selectionEnd = r);
        },
        isReadyToSave: function () {
          var e = this._getInputName(),
            l = !1;
          if (e.length > 0) {
            var u = this.model.get("regex");
            l = u ? e.match(this.model.get("regex")) !== null : !0;
          }
          return l && this.model.set("value", e), l;
        },
        _getInputName: function () {
          if (this.model.get("regex")) return this._getInputUrl();
          var e = this.ui.inputFieldName,
            l = e.val();
          return (l = l.trim()), l;
        },
        _getInputUrl: function () {
          var e = this.ui.inputFieldName,
            l = v(e).val().trim();
          return (
            l.length &&
              !l.match(this.model.get("regex")) &&
              ((l = l.match(/^[a-zA-Z]+:\/\//) ? l : "http://" + l),
              this.model.set("value", l)),
            (InvalidUrlValue = !l.match(this.model.get("regex"))),
            this.parentView.model.set(
              { isInvalidUrl: InvalidUrlValue },
              { silent: !0 }
            ),
            l
          );
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "csui-inlineform-error";
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "name",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 31 },
                    end: { line: 4, column: 39 },
                  },
                })
              : t)
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t =
                n(l, "namePlaceholder") ||
                (e != null ? n(e, "namePlaceholder") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "namePlaceholder",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 47 },
                    end: { line: 4, column: 66 },
                  },
                })
              : t)
          );
        },
        7: function (i, e, l, u, r) {
          return ' aria-invalid="true" ';
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<input type="text" value="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 26 },
                      end: { line: 1, column: 34 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 49 },
                      end: { line: 1, column: 68 },
                    },
                  })
                : n)
            ) +
            `"
       class="binf-form-control csui-inlineform-type-` +
            i.escapeExpression(
              ((n =
                (n = s(l, "prefix") || (e != null ? s(e, "prefix") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "prefix",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 53 },
                      end: { line: 2, column: 63 },
                    },
                  })
                : n)
            ) +
            " " +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 64 },
                  end: { line: 3, column: 57 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
       aria-label="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "name") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.program(5, r, 0),
                loc: {
                  start: { line: 4, column: 19 },
                  end: { line: 4, column: 73 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
      ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(7, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 6 },
                  end: { line: 5, column: 58 },
                },
              }
            )) != null
              ? t
              : "") +
            `/>
<span class="csui-multilingual-icon-label">
<button type="button" class="icon csui-multilingual-icon">
  ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "small",
                iconName: "csui_action_language_switcher24",
              },
              loc: {
                start: { line: 8, column: 2 },
                end: { line: 8, column: 85 },
              },
            })) != null
              ? t
              : "") +
            `
</button>
</span>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_base_views_textfield_impl_multilingual.textfield",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view",
    [
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/controls/multilingual.text.picker/multilingual.popover.mixin",
      "csui/controls/table/inlineforms/base/views/textfield/textfield.view",
      "hbs!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",
      "css!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",
    ],
    function (v, d, a, h, i) {
      var e = h.extend({
        template: i,
        constructor: function (u) {
          this.listenTo(this, "ml:value:updated", function (r) {
            this.onMultiLingualPopoverClose(r);
          }),
            (u = u || {}),
            (u.connector =
              u.parentView &&
              u.parentView.model &&
              u.parentView.model.connector),
            h.prototype.constructor.apply(this, arguments);
        },
        ui: function () {
          return v.extend({}, h.prototype.ui, {
            mlGlobeIcon: ".csui-multilingual-icon",
          });
        },
        events: function () {
          return v.extend({}, h.prototype.events, {
            "click @ui.mlGlobeIcon": "_showLanguagePopover",
            "keydown @ui.mlGlobeIcon": "onKeyDownGlobeIcon",
          });
        },
        onKeyDownGlobeIcon: function (l) {
          (l.keyCode === 13 || l.keyCode === 32) &&
            this.multiLingualForm &&
            this.keyDownOnGlobeIcon(l);
        },
        loadAdditionalInfo: function () {
          var l = this,
            u = this.parentView.model,
            r = u.get("name_multilingual"),
            t = this.model,
            n = u.get("id");
          this.$el.addClass("csui-multilingual-input");
          var s = u.get("csuiInlineFormErrorMessage");
          s &&
            this.$el
              .find("input.csui-inlineform-error")
              .attr("aria-errormessage", this.options.node.get("errorid"));
          var o = this.parentView.options.originatingView;
          o && o.blockActions && o.blockActions(),
            (this.targetElement = this.ui.inputFieldName),
            (this.metadataLanguages =
              this.options.metadataLanguages || d.getMetadataLanguageInfo());
          var c = {
            parentView: this,
            targetElement: this.targetElement,
            validationRequired: !1,
            mlGlobeIcon: this.ui.mlGlobeIcon,
          };
          r && t.set("name_multilingual", r, { silent: !0 }),
            n && t.set("id", n, { silent: !0 }),
            this.requiredInfoAvilable("name_multilingual").then(function () {
              (c.multilingualData = l.model.get("name_multilingual")),
                l._loadMultiLingualPopover(c),
                !r &&
                  u.set("name_multilingual", t.get("name_multilingual"), {
                    silent: !0,
                  }),
                o && o.unblockActions && o.unblockActions(),
                l._openMLFlyoutInEditMode();
            });
        },
        onInputValueChanged: function (l) {
          v.isFunction(this.updateMLdata) && this.updateMLdata(l);
        },
        onRender: function () {
          this.loadAdditionalInfo();
        },
        onBeforeDestroy: function () {
          this.multiLingualForm &&
            this.multiLingualForm.trigger("ml:hide:popover");
        },
        onMultiLingualPopoverClose: function (l) {
          (this.prevMultilingualVal = this.model.get("name_multilingual")),
            this.model.set("name_multilingual", l.value_multilingual, {
              silent: !0,
            }),
            this.targetElement.val(l.value),
            (this.saveMldata = l),
            this.model.set({ validField: !!l.value.trim(), value: l.value }),
            this.options.parentView.trigger("enable:save:btn");
        },
      });
      return a.mixin(e.prototype), e;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield.view",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <option value="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 19 },
                      end: { line: 4, column: 28 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "displayName") ||
                  (e != null ? n(e, "displayName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "displayName",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 30 },
                      end: { line: 4, column: 45 },
                    },
                  })
                : t)
            ) +
            `</option>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<select type="text" value="" class="binf-form-control csui-inlineform-input-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "prefix") || (e != null ? s(e, "prefix") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "prefix",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 76 },
                      end: { line: 1, column: 86 },
                    },
                  })
                : n)
            ) +
            `">
<option value="">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 17 },
                      end: { line: 2, column: 36 },
                    },
                  })
                : n)
            ) +
            `</option>
` +
            ((t = s(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "selectEnum") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 5, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            "</select>"
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_base_views_selectfield_impl_selectfield.view",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/views/selectfield/selectfield.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield.view",
      "css!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield",
    ],
    function (v, d, a) {
      var h = d.View.extend({
        className: function () {
          return "csui-inlineform-type-" + this.fieldName;
        },
        ui: { inputFieldName: "select" },
        events: { "change @ui.inputFieldName": "toggleSaveButton" },
        templateContext: function () {
          var i = this.parentView.model.get("csuiInlineFormErrorMessage"),
            e = {
              haveErrorMessage: !!i,
              name: this.parentView.model.get(this.fieldName),
              namePlaceholder: this.model.get("namePlaceholder"),
              prefix: this.fieldName,
              selectEnum: this.selectEnum,
            };
          return (
            e.haveErrorMessage &&
              ((e.errorMessage = i), (e.errorMsgId = v.uniqueId("err"))),
            e
          );
        },
        template: a,
        constructor: function (e) {
          (this.parentView = e.parentView),
            (this.fieldName = e.model.get("fieldName")),
            (this.selectEnum = []),
            d.View.prototype.constructor.apply(this, arguments),
            this.fetchDropDownValues();
        },
        toggleSaveButton: function (i) {
          this.updateFieldModel(i.target.value),
            this.parentView.trigger("enable:save:btn");
        },
        updateFieldModel: function (i) {
          return (
            (i = i.trim()),
            !i.length || i === this.parentView.model.get(this.fieldName)
              ? (this.model.set({ validField: !1, value: i }), !1)
              : (this.model.set({ validField: !0, value: i }), !0)
          );
        },
        isReadyToSave: function () {
          var i = this._getInputName();
          return i.length > 0;
        },
        _getInputName: function () {
          var i = this.ui.inputFieldName,
            e = i.val();
          return (e = e && e.trim()), e;
        },
        fetchDropDownValues: function () {
          var i = {
              context: this.options.context,
              node: this.parentView.model,
            },
            e = this.model.get("getData");
          v.isFunction(e) &&
            e(i).always(
              v.bind(function (l) {
                (this.selectEnum = l), this.render(), this.bindUIElements();
              }, this)
            );
        },
      });
      return h;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/base/views/nodepicker/impl/inlineform.nodepicker.field",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "csui-inlineform-error";
        },
        3: function (i, e, l, u, r) {
          return "csui-nodepicker-required ";
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t =
                n(l, "anchorTitleShort") ||
                (e != null ? n(e, "anchorTitleShort") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "anchorTitleShort",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 42 },
                    end: { line: 4, column: 62 },
                  },
                })
              : t)
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t =
                n(l, "namePlaceholder") ||
                (e != null ? n(e, "namePlaceholder") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "namePlaceholder",
                  hash: {},
                  loc: {
                    start: { line: 4, column: 70 },
                    end: { line: 4, column: 89 },
                  },
                })
              : t)
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-errormessage="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 44 },
                      end: { line: 6, column: 58 },
                    },
                  })
                : t)
            ) +
            '" aria-invalid="true" '
          );
        },
        11: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-required="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "isRequired") || (e != null ? n(e, "isRequired") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "isRequired",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 127 },
                      end: { line: 9, column: 141 },
                    },
                  })
                : t)
            ) +
            '"  '
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<input type="text" class="binf-form-control cs-inline-nodepicker csui-inlineform-type-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "prefix") || (e != null ? s(e, "prefix") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "prefix",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 86 },
                      end: { line: 1, column: 96 },
                    },
                  })
                : n)
            ) +
            " " +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 97 },
                  end: { line: 2, column: 57 },
                },
              }
            )) != null
              ? t
              : "") +
            " " +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isRequired") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 58 },
                  end: { line: 2, column: 108 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
      value="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "anchorTitleShort") ||
                  (e != null ? s(e, "anchorTitleShort") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "anchorTitleShort",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 13 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 48 },
                      end: { line: 3, column: 67 },
                    },
                  })
                : n)
            ) +
            `"
      aria-label="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "anchorTitleShort") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 4, column: 18 },
                  end: { line: 4, column: 96 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
      title="` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "anchorTitleShort") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 5, column: 13 },
                  end: { line: 5, column: 91 },
                },
              }
            )) != null
              ? t
              : "") +
            '" ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 93 },
                  end: { line: 6, column: 87 },
                },
              }
            )) != null
              ? t
              : "") +
            ` readonly disabled />
<span class="csui-inlineform-nodepicker-icon-container">
      <button type="button" class="csui-inlineform-nodepicker-icon csui-icon formfield_clear" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "clearIconAriaLabelTooltip") ||
                  (e != null ? s(e, "clearIconAriaLabelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "clearIconAriaLabelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 106 },
                      end: { line: 8, column: 135 },
                    },
                  })
                : n)
            ) +
            `" ></button>
      <button type="button" class="csui-inlineform-nodepicker-icon csui-icon icon-cs-browse" ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isRequired") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 9, column: 93 },
                  end: { line: 9, column: 151 },
                },
              }
            )) != null
              ? t
              : "") +
            ' aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "browseIconAriaLabelTooltip") ||
                  (e != null ? s(e, "browseIconAriaLabelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "browseIconAriaLabelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 164 },
                      end: { line: 9, column: 194 },
                    },
                  })
                : n)
            ) +
            `"></button>
</span>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_base_views_nodepicker_impl_inlineform.nodepicker.field",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/base/views/nodepicker/impl/inlineform.nodepicker.field",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/views/nodepicker/inlineform.nodepicker.field.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/base",
      "csui/models/node/node.model",
      "csui/controls/table/inlineforms/base/views/textfield/textfield.view",
      "csui/utils/commands",
      "csui/models/nodeancestors",
      "csui/utils/defaultactionitems",
      "i18n!csui/controls/table/inlineforms/base/impl/nls/lang",
      "hbs!csui/controls/table/inlineforms/base/views/nodepicker/impl/inlineform.nodepicker.field",
      "css!csui/controls/table/inlineforms/base/views/nodepicker/impl/inlineform.nodepicker.field",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      var n = i.extend({
        template: t,
        templateContext: function () {
          var s = {
            id: this.parentView.model.get("classificationId"),
            anchorTitleShort: this.parentView.model.get("anchorTitleShort"),
            anchorTitle: this.parentView.model.get("anchorTitle"),
            namePlaceholder: this.model.get("namePlaceholder"),
            prefix: this.fieldName,
            isRequired: this.model.get("required"),
            browseIconAriaLabelTooltip: `${r.browseIconAriaLabel} ${
              this.fieldName ? this.fieldName : ""
            }`,
            clearIconAriaLabelTooltip: `${r.clearIconAriaLabel} ${
              this.fieldName ? this.fieldName : ""
            }`,
          };
          return s;
        },
        constructor: function (o) {
          (o = o || {}),
            (o.connector =
              o.parentView &&
              o.parentView.model &&
              o.parentView.model.connector),
            i.prototype.constructor.apply(this, arguments),
            (this.node = new h(void 0, {
              connector: this.connector,
              autofetch: !0,
              commands: u.getAllCommandSignatures(e),
            })),
            (this.ancestors = new l(void 0, {
              node: this.node,
              autofetch: !0,
            })),
            this.listenTo(this.node, "sync", this._renderNode).listenTo(
              this.node,
              "error",
              this._renderError
            ),
            this.listenTo(this.ancestors, "sync", this._renderNode).listenTo(
              this.ancestors,
              "error",
              this._renderError
            ),
            (this._isReadyToSave = !0);
        },
        ui: function () {
          return v.extend({}, i.prototype.ui, {
            browseIcon: ".icon-cs-browse",
            clearIcon: ".formfield_clear",
            writeArea: ".cs-inline-nodepicker",
          });
        },
        events: function () {
          return v.extend({}, i.prototype.events, {
            "click @ui.browseIcon": "_showNodePicker",
            "click @ui.writeArea": "_showNodePicker",
            "click @ui.clearIcon": "onClickClearIcon",
            "keydown @ui.browseIcon": "onKeyDownBrowseIcon",
          });
        },
        onKeyDownBrowseIcon: function (s) {
          (s.keyCode === 13 || s.keyCode === 32) && this._showNodePicker(s);
        },
        _showNodePicker: function (s) {
          this._isReadyToSave &&
            ((this._isReadyToSave = !1),
            this._getNodePicker(s).then(
              v.bind(function (o) {
                o.show()
                  .done(
                    v.bind(function (c) {
                      var m = c.nodes[0],
                        f = m.get("id");
                      (this.node = m),
                        (this.pickerArgs = c),
                        (this.editVal = f),
                        this.mapNodeIdToFieldValue(f).then(
                          v.bind(function (g) {
                            this.updateFieldModel(f),
                              this._renderNode(),
                              this.ui.writeArea.addClass(
                                "csui-inline-nodepicker-hasvalue"
                              ),
                              this.editVal && !this.model.get("required")
                                ? this.ui.clearIcon.trigger("focus")
                                : this.ui.browseIcon.trigger("focus"),
                              this.options.parentView.trigger(
                                "enable:save:btn"
                              );
                          }, this)
                        );
                    }, this)
                  )
                  .fail(v.bind(function () {}, this))
                  .always(
                    v.bind(function () {
                      this.editVal && !this.model.get("required")
                        ? this.ui.clearIcon.trigger("focus")
                        : this.ui.browseIcon.trigger("focus"),
                        (this._isReadyToSave = !0);
                    }, this)
                  );
              }, this)
            ));
        },
        _getNodePicker: function (s) {
          var o = d.Deferred(),
            c = this;
          return (
            csui.require(
              ["csui/dialogs/node.picker/node.picker"],
              function (m) {
                var f = c.model.get("parameters"),
                  g = f.dialogTitle || c.fieldName || "",
                  w = {
                    connector: c.connector,
                    dialogTitle: v.str.sformat(g.toLowerCase()),
                    selectableTypes: f.select_types || "",
                    unselectableTypes: f.nonselect_types || "",
                    globalSearch: !1,
                    context: c.options.context,
                    initialContainer: { id: f.initial_container || "" },
                    unselectableNodes: f.unselectable_nodes || "",
                    startLocation: f.start_location || "",
                    startLocations: f.start_locations || "",
                    resolveShortcuts: !0,
                    resultOriginalNode: !0,
                    isKeyEvent: s?.type === "keydown",
                  };
                v.extend(w, f);
                var b = new m(w);
                o.resolve(b);
              },
              function (m) {
                o.reject(m);
              }
            ),
            o.promise()
          );
        },
        mapNodeIdToFieldValue: function (s) {
          return d.Deferred().resolve(s).promise();
        },
        updateFieldModel: function (s) {
          return (
            this.model.set({ validField: !0, value: s, id: this.editVal }),
            this.parentView.model.set({ classificationId: s }, { silent: !0 }),
            !0
          );
        },
        onClickClearIcon: function (s) {
          ((s.type === "keydown" && (s.keyCode === 13 || s.keyCode === 32)) ||
            s.type === "click") &&
            (this.ui.writeArea.removeClass("csui-inline-nodepicker-hasvalue"),
            (this.editVal = ""),
            this.model.set({ validField: !1, value: "", id: this.editVal }),
            (this._isReadyToSave = !0),
            (this.node = new h(void 0, {
              connector: this.connector,
              autofetch: !0,
              commands: u.getAllCommandSignatures(e),
            })),
            this._renderNode(),
            this.ui.browseIcon.trigger("focus"));
        },
        _renderNode: function () {
          var s = this.ancestors.pluck("name").join(" > "),
            o = this._prepareFieldText();
          this.parentView.model.set(
            { anchorTitle: s, anchorTitleShort: o },
            { silent: !0 }
          ),
            this._renderField(s, o);
        },
        _renderError: function () {
          this._renderField(
            r.originalNodeUnavailableTooltip,
            r.originalNodeUnavailable
          );
        },
        _renderField: function (s, o) {
          var c, m;
          (this.model.attributes.options = {}),
            v.extend(this.model.attributes.options, {
              buttonDisabled: c,
              disabledClass: m,
              anchorTitle: s,
              anchorTitleShort: o,
            }),
            this.render();
        },
        _prepareFieldText: function () {
          var s = this.node.get("name");
          return s;
        },
        onInputValueChanged: function (s) {
          this._isReadyToSave = !0;
        },
        isReadyToSave: function () {
          return (
            this.model?.get("id") ||
              (this.parentView.model?.get("classificationId") &&
                this.model?.set(
                  "id",
                  this.parentView.model?.get("classificationId")
                )),
            !!(this.model?.get("required")
              ? this.model?.get("required") && !!this.model?.get("id")
              : !0)
          );
        },
      });
      return n;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/base.inline.form.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/utils/base",
      "csui/utils/log",
      "csui/lib/jsonpath",
      "csui/models/nodes",
      "csui/lib/radio",
      "csui/models/nodecreateforms",
      "csui/utils/commands/add.item.metadata",
      "i18n!csui/controls/table/inlineforms/base/impl/nls/lang",
      "csui/controls/table/inlineforms/base/views/textfield/textfield.view",
      "csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view",
      "csui/controls/table/inlineforms/base/views/selectfield/selectfield.view",
      "csui/controls/table/inlineforms/base/views/nodepicker/inlineform.nodepicker.field.view",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f) {
      var g = h.CollectionView.extend({
        className: "csui-inlineform-field-container",
        childView: function (w) {
          var b,
            C = w.get("type") || "";
          switch (C) {
            case "text":
              b = o;
              break;
            case "multilingualtextfield":
              b = c;
              break;
            case "select":
              b = m;
              break;
            case "nodePicker":
              b = f;
              break;
            default:
              b = o;
          }
          return b;
        },
        childViewOptions: function () {
          return {
            context: this.options.context,
            formType: this.options.model.get("type"),
            regExp: this.options.model.get("regex"),
            node: this.options.node,
            options: this.options,
            parentView: this,
          };
        },
        constructor: function (b) {
          (b = b || {}),
            (b.collection = new a.Collection(this.getFieldModels(b))),
            h.CollectionView.prototype.constructor.apply(this, arguments);
        },
        checkAllformFields: function () {
          return this.model.get("id")
            ? this.collection.findIndex({ validField: !0 }) !== -1
            : this.collection.findIndex({ validField: !1 }) === -1;
        },
        _saveIfOk: function () {
          var w = !0,
            b = {};
          if (
            (this.children.each(function (C) {
              var k = C.model,
                y = k.get("fieldName") + "_multilingual";
              (w = w && C.isReadyToSave()),
                (b[k.get("fieldName")] = k.get("value")),
                k.get("type") === "multilingualtextfield" &&
                  k.attributes[y] &&
                  (b[y] = k.get(y)),
                k.get("type") === "nodePicker" &&
                  (b[k.get("fieldName")] = k.get("id"));
            }),
            w)
          )
            this._save(b).fail(
              function (C) {
                this.model.set(this.model.changed, { silent: !0 });
              }.bind(this)
            );
          else {
            let C = this.model.get("originalname")
                ? this.model.get("originalname")
                : this.model.get("name"),
              k = this.model.get("originalurl")
                ? this.model.get("originalurl")
                : this.model.get("url");
            this.model.set({ originalname: C, originalurl: k }, { silent: !0 }),
              this.model.set({ name: b.name, url: b.url }, { silent: !0 }),
              this.model.set("csuiInlineFormErrorMessage", s.UrlInvalidFormat);
          }
        },
        _getErrorMessageFromResponse: function (w) {
          var b;
          if (w && w.responseJSON && w.responseJSON.error)
            b = w.responseJSON.error;
          else {
            var C = i.MessageHelper.toHtml();
            i.MessageHelper.reset(), (b = v(C).text());
          }
          return b;
        },
        saveForm: function () {
          if (this.model.get("id")) this._saveIfOk();
          else {
            var w = this;
            (w.required = !1),
              w._getCategoryID().done(function () {
                w.required ? w._openMetadataPage() : w._saveIfOk();
              });
          }
        },
        viewToModelData: function () {
          this.children.each(
            d.bind(function (w) {
              this.model.set(w.model.get("fieldName"), w.model.get("value"), {
                silent: !0,
              });
            }, this)
          );
        },
        _removeLastElement: function () {
          this.model.collection &&
            this.model.collection.length > 0 &&
            this.model.collection.length > this.model.collection.topCount &&
            ((this.model.collection.isPoped = !0), this.model.collection.pop());
        },
        _getCategoryID: function () {
          var w = this,
            b = w.options.model.collection.node.get("id"),
            C = this.model.get("type"),
            k = w.options.model.connector,
            y = v.Deferred(),
            S = new t(void 0, { node: this.model, docParentId: b, type: C });
          return (
            S.type === 1 && y.resolve(),
            (this.xhr = this.model.get("xhr") || new XMLHttpRequest()),
            S.fetch()
              .then(
                d.bind(function (P, F, D) {
                  d.any(P.forms, function (L) {
                    if (L.hasOwnProperty("role_name")) {
                      var Q = w._checkForAlpacaRequiredFields(L),
                        q = l(L.schema.properties, "$..[?(@.required===true)]");
                      d.isArray(q) && q.length > 0 && !Q && (w.required = !0);
                    }
                  }),
                    (w.model.attributes.forms = P),
                    (w.model.attributes.xhr = this.xhr),
                    y.resolve();
                })
              )
              .fail(function (P) {
                y.reject();
              }),
            y.promise()
          );
        },
        _save: function (w) {
          var b = this.options.originatingView;
          b && b.blockActions && b.blockActions();
          var C =
              this.model.get("id") === void 0
                ? "_saveNewModel"
                : "_updateModel",
            k = this[C](w);
          return (
            b && b.unblockActions && k.always(d.bind(b.unblockActions, b)),
            k.done(
              d.bind(function () {
                this.trigger("end:of:edit"),
                  r.channel("update:facets").trigger("update:facets");
              }, this)
            ),
            k
          );
        },
        _checkForAlpacaRequiredFields: function (w) {
          var b = !0,
            C = w.data || w.get("data"),
            k = w.options || w.get("options"),
            y = w.schema || w.get("schema"),
            S = [],
            P = l(y, "$..[?(@.required===true)]", { resultType: "PATH" }),
            F = l(k, "$..[?(@.validate===false)]", { resultType: "PATH" }),
            D = [];
          d.each(F, function (N) {
            var W = N.toString().match(/(\'[\w]*\')/g);
            W && D.push(W[W.length - 1].replace(/'/g, ""));
          });
          var L = [];
          d.each(P, function (N) {
            var W = N.toString().match(/(\'[\w]*\')/g);
            W && L.push(W[W.length - 1].replace(/'/g, ""));
          });
          var Q = function (N, W) {
              var H = W.filter(function (z) {
                return N.indexOf(z) === -1;
              });
              return H;
            },
            q = Q(D, L);
          if (q) {
            var G = !1;
            d.each(q, function (N) {
              if (
                ((S = l(
                  C,
                  "$.." + N.toString(),
                  { resultType: "PATH" }.toArray
                )),
                d.each(S, function (W) {
                  var H = function (z) {
                    if (z instanceof Array && (z !== null || z !== ""))
                      d.each(z, function (Z) {
                        H(Z);
                      });
                    else if (z === null || z === "") {
                      G = !0;
                      return;
                    }
                  };
                  if (!G) H(W);
                  else {
                    b = !1;
                    return;
                  }
                }),
                G)
              ) {
                b = !1;
                return;
              }
            });
          }
          return b;
        },
        _saveNewModel: function (w) {
          var b = "{0}:_saveNewModel {1}",
            C = this.model.inlineFormView;
          delete this.model.inlineFormView, this.model.set(w, { silent: !0 });
          var k = d.clone(this.model.attributes);
          delete k.hasMetadataRow,
            delete k.csuiInlineFormErrorMessage,
            delete k.forms,
            delete k.xhr;
          var y = this;
          return this.model
            .save(void 0, { data: k, wait: !0, silent: !0 })
            .then(function () {
              if (y.model.mustRefreshAfterPut !== !1)
                return y._removeLastElement(), y.model.fetch();
              y.model.set("csuiInlineFormErrorMessage", "dummy", {
                silent: !0,
              }),
                y.model.unset("csuiInlineFormErrorMessage");
            })
            .fail(function (S) {
              (y.model.inlineFormView = C), y.model.trigger("error", y.model);
              var P = y._getErrorMessageFromResponse(S);
              y.model.set("csuiInlineFormErrorMessage", P),
                e.error("Saving failed. ", P) && console.error(e.last);
            });
        },
        _updateModel: function (w) {
          var b = "{0}:_updateModel {1}",
            C = this.model.inlineFormView;
          delete this.model.inlineFormView;
          var k = this.model.mustRefreshAfterPut !== !1 ? w : void 0,
            y = this.model.mustRefreshAfterPut !== !1 ? void 0 : w,
            S = this,
            P =
              S.options.originatingView &&
              S.options.originatingView.thumbnailView;
          return this.model
            .save(y, {
              data: k,
              patch: !0,
              wait: !0,
              silent: !0,
              skipSetValue: P,
            })
            .then(function () {
              if (
                (S.model.set(w, { silent: !0 }),
                S.model.mustRefreshAfterPut !== !1)
              )
                return S.model.fetch();
              S.model.set("csuiInlineFormErrorMessage", "dummy", {
                silent: !0,
              }),
                S.model.unset("csuiInlineFormErrorMessage");
            })
            .fail(function (F) {
              S.model.inlineFormView = C;
              var D = d.keys(w),
                L = d.pick(d.clone(S.model.attributes), D);
              S.model.set(w, { silent: !0 });
              var Q = S._getErrorMessageFromResponse(F);
              S.model.set("csuiInlineFormErrorMessage", Q),
                e.error("Saving failed. ", Q) && console.error(e.last),
                S.model.set(L, { silent: !0 });
            });
        },
        _openMetadataPage: function () {
          var w = "{0}:metadataIconClicked {1}",
            b = this;
          b.viewToModelData();
          var C = new u();
          C.push(b.options.model);
          var k = {
              nodes: C,
              container: b.options.model.collection.node,
              collection: b.options.model.collection,
            },
            y = { context: b.options.context };
          b.children.each(function (P) {
            var F = P.model,
              D = F.get("fieldName") + "_multilingual",
              L = F.attributes[D];
            F.get("type") === "multilingualtextfield" &&
              L &&
              b.model.set(D, L, { silent: !0 });
          }),
            (y = d.extend(y, { addableType: b.model.get("type") }));
          var S = new n();
          S.execute(k, y)
            .then(function (P) {
              if (
                (delete b.model.inlineFormView,
                b.model.unset("csuiInlineFormErrorMessage", { silent: !0 }),
                b.trigger("end:of:edit", this),
                P.name)
              )
                return b._removeLastElement(), b.model.fetch();
            })
            .fail(function (P) {
              b.trigger("cancel:edit:form");
            });
        },
        getFieldModels: function (w) {
          var b = w.node,
            C = w.showOnlyDefaultField,
            k = b.get("form").fields,
            y = [],
            S = i.getMetadataLanguageInfo(),
            P = w.model.get("id") === void 0;
          for (var F in k)
            if (k[F] !== void 0) {
              var D = k[F];
              (!(C && D.type !== "text") ||
                !(C && D.type !== "multilingualtextfield")) &&
                ((D.fieldName = F),
                (D.type =
                  D.type === "text" && D.multilingual && S.enabled
                    ? "multilingualtextfield"
                    : D.type),
                (D.validField = D.required
                  ? !!(P && w.model.get(D.fieldName))
                  : !0),
                y.push(D));
            }
          return y;
        },
      });
      return g;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform/inlineform.schemas",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/models/mixins/rules.matching/rules.matching.mixin",
      "csui-ext!csui/inlineform/inlineform.schemas",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = d.Model.extend({
        defaults: { sequence: 100, form: null },
        constructor: function (r, t) {
          d.Model.prototype.constructor.call(this, r, t),
            this.makeRulesMatching(t);
        },
      });
      a.mixin(i.prototype);
      var e = d.Collection.extend({
          model: i,
          comparator: "sequence",
          constructor: function (r, t) {
            d.Collection.prototype.constructor.call(this, r, t);
          },
          findByNode: function (u) {
            return this.find(function (r) {
              return r.matchRules(u, r.attributes);
            });
          },
          getFormFieldsSchema: function (u) {
            var r = this.findByNode(u.node);
            return r;
          },
        }),
        l = new e();
      return h && l.add(v.flatten(h, !0)), l;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/base/impl/inline.edit",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "csui-form-error";
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-inlineform-group csui-inlineform-group-error" >
    <div class="binf-text-danger" role="alert" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 54 },
                      end: { line: 16, column: 70 },
                    },
                  })
                : t)
            ) +
            `">
      <span class="csui-text-danger"  id="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 42 },
                      end: { line: 17, column: 56 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 58 },
                      end: { line: 17, column: 74 },
                    },
                  })
                : t)
            ) +
            `</span></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<form class="csui-inlineform-group  ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 36 },
                  end: { line: 1, column: 83 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
  <div class="csui-inlineform-region"></div>
  <div class="csui-inline-action-button-wrapper">
    <button type="submit" class="csui-btn-save csui-edit-save" disabled title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 79 },
                      end: { line: 4, column: 98 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 24 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 6, column: 6 },
                end: { line: 6, column: 80 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
    <button type="reset" class="csui-btn-cancel csui-inline csui-edit-cancel" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 85 },
                      end: { line: 8, column: 106 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 24 },
                      end: { line: 9, column: 45 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 10, column: 6 },
                end: { line: 10, column: 79 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
  </div>
</form>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 14, column: 0 },
                  end: { line: 19, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_base_impl_inline.edit",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/base/impl/inline.edit",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/base/inline.edit.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/controls/table/inlineforms/base/base.inline.form.view",
      "csui/controls/table/inlineforms/inlineform/inlineform.schemas",
      "i18n!csui/controls/table/inlineforms/base/impl/nls/lang",
      "hbs!csui/controls/table/inlineforms/base/impl/inline.edit",
      "css!csui/controls/table/inlineforms/base/impl/inline.edit",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = h.View.extend({
        className: "csui-inline-editform",
        template: u,
        regions: {
          inlineFormRegion: {
            el: ".csui-inlineform-region",
            replaceElement: !0,
          },
        },
        ui: {
          cancelButton: ".csui-btn-cancel",
          editCancelButton: ".csui-btn-edit-cancel",
          saveButton: ".csui-btn-save",
        },
        events: {
          "click @ui.saveButton": "saveClicked",
          "click @ui.cancelButton": "cancelClicked",
          keydown: "onKeyInView",
        },
        templateContext: function () {
          var t = this.model.get("csuiInlineFormErrorMessage"),
            n = {
              haveErrorMessage: !!t,
              formModeIsEdit: this._isEditMode(),
              EditCancelTooltip: l.EditCancelTooltip,
              SaveEditTooltip: l.SaveEditTooltip,
              CancelButtonLabel: l.CancelButtonLabel,
              SaveButtonLabel: l.AddButtonLabel,
            };
          return (
            n.haveErrorMessage &&
              ((n.errorMessage = t),
              (n.errorMsgId = d.uniqueId("err")),
              this.options.node.set("errorid", n.errorMsgId)),
            n
          );
        },
        constructor: function (n) {
          n || (n = {});
          var s = { node: new a.Model({ type: n.model.get("type") }) };
          (n.otherOptions = n.otherOptions || (n.otherOptions = {})),
            d.extend(s, n.otherOptions);
          var o = e.getFormFieldsSchema(s);
          o ||
            ((s = { node: new a.Model({ type: -1 }) }),
            (o = e.getFormFieldsSchema(s))),
            (n.node = o),
            h.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          var t = this.options.originatingView,
            n,
            s;
          t && this.listenTo(t, "disable:blocking", this.setFocus),
            (this.options.showOnlyDefaultField =
              this._isEditMode() || !!this.errorMessage),
            (this.baseInlineFormView = new i(this.options)),
            this.getRegion("inlineFormRegion").show(this.baseInlineFormView),
            this.listenTo(
              this.baseInlineFormView,
              "enable:save:btn",
              this._enableSaveBtn
            )
              .listenTo(
                this.baseInlineFormView,
                "cancel:edit:form",
                function () {
                  this.trigger("cancel:edit:form"), this.cancel();
                }
              )
              .listenTo(this.baseInlineFormView, "end:of:edit", function () {
                this.trigger("end:of:edit"), this.destroy();
              }),
            (n =
              this.baseInlineFormView.collection &&
              this.baseInlineFormView.collection.length),
            (s = this.model.get("isInvalidUrl") ? "csui-invalid-url" : ""),
            this.$el.addClass(s + " csui-field-size-" + n);
        },
        onDomRefresh: function () {
          this._enableSaveBtn(), this.setFocus();
        },
        setFocus: function () {
          this.refreshTabableElements();
          let t = 0;
          this.tabableElements.forEach((n, s) => {
            if (v(n).hasClass("csui-inlineform-error")) {
              t = s;
              return;
            }
          }),
            this.tabableElements &&
              this.tabableElements[t] &&
              v(this.tabableElements[t]).trigger("focus");
        },
        _isEditMode: function () {
          return this.model.get("id") !== void 0;
        },
        onKeyInView: function (t) {
          if (t.keyCode === 9) return this._moveTab(t), !0;
          if (t.keyCode === 27 && !v(t.target).is("button")) {
            this.cancel(), t.preventDefault(), t.stopPropagation();
            return;
          }
        },
        refreshTabableElements: function () {
          this.tabableElements = this.$el
            .find(
              "input:not([disabled]),  select:not([disabled]), button:not([disabled])"
            )
            .filter(":visible")
            .toArray();
        },
        currentlyFocusedElement: function () {
          if (!this.currentlyFocusedElementIndex) {
            !this.tabableElements && this.refreshTabableElements();
            let t = 0;
            return (
              this.tabableElements.forEach((n, s) => {
                if (v(n).hasClass("csui-inlineform-error")) {
                  t = s;
                  return;
                }
              }),
              v(this.tabableElements[t])
            );
          }
          return v(this.tabableElements[this.currentlyFocusedElementIndex]);
        },
        _moveTab: function (t) {
          (this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
            t.target
          )),
            t.shiftKey
              ? this.currentlyFocusedElementIndex > 0
                ? ((this.currentlyFocusedElementIndex -= 1),
                  v(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : ((this.currentlyFocusedElementIndex =
                    this.tabableElements.length - 1),
                  v(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
              : this.currentlyFocusedElementIndex <
                this.tabableElements.length - 1
              ? ((this.currentlyFocusedElementIndex += 1),
                v(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus"))
              : ((this.currentlyFocusedElementIndex = 0),
                v(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus")),
            t.stopPropagation(),
            t.preventDefault();
        },
        _enableSaveBtn: function () {
          var t = this.baseInlineFormView.checkAllformFields();
          this._isRendered && this.ui.saveButton.prop("disabled", !t),
            this.refreshTabableElements();
        },
        saveClicked: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            this.baseInlineFormView.saveForm();
        },
        cancelClicked: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            this.model.get("originalurl") &&
              this.model.set(
                {
                  name: this.model.get("originalname"),
                  url: this.model.get("originalurl"),
                },
                { silent: !0 }
              ),
            this.trigger("cancel:edit:form"),
            this.cancel();
        },
        cancel: function (t) {
          t || (t = {}),
            this.destroy(),
            this.model.get("id") === void 0
              ? this.model.destroy()
              : (delete this.model.inlineFormView,
                this.model.set("csuiInlineFormErrorMessage", "dummy", {
                  silent: !0,
                }),
                this.model.unset("csuiInlineFormErrorMessage", {
                  silent: t.silent,
                }));
        },
      });
      return r;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform.factory",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/table/inlineforms/inlineform.registry",
      "csui/controls/table/inlineforms/generic/generic.view",
      "csui/controls/table/inlineforms/base/inline.edit.view",
      "csui/controls/table/inlineforms/inlineform/inlineform.schemas",
      "csui-ext!csui/controls/table/inlineforms/inlineform.factory",
    ],
    function (v, d, a, h, i, e) {
      function l() {}
      return (
        v.extend(l.prototype, {
          getInlineFormView: function (u) {
            var r = a.getInlineFormView(u);
            if (!r) {
              var t = { node: new d.Model({ type: u }) },
                n = e.getFormFieldsSchema(t);
              n &&
                ((r = i),
                (Object.getPrototypeOf(r).addableCommandInfo =
                  n.attributes.addableCommandInfo));
            }
            return r;
          },
        }),
        new l()
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/tabletoolbar/impl/tabletoolbar",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div class="csui-tabletoolbar tile-nav" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toolbarAria") ||
                  (e != null ? n(e, "toolbarAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toolbarAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 52 },
                      end: { line: 1, column: 67 },
                    },
                  })
                : t)
            ) +
            `" role="toolbar">
  <div class="csui-navigationToolbar"></div>
  <div class="csui-filterToolbar" ></div>
  <div class="csui-addToolbar" ></div>
  <div class="csui-leftToolbar" ></div>
  <div class="csui-otherToolbar" ></div>
  <div class="csui-toolbar-caption" ></div>
  <div class="csui-rightToolbar" ></div>
</div>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_tabletoolbar_impl_tabletoolbar", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/tabletoolbar/impl/tabletoolbar",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/tabletoolbar/tabletoolbar.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/models/node/node.model",
      "csui/models/nodes",
      "csui/controls/toolbar/toolitem.model",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/controls/toolbar/toolbar.view",
      "csui/controls/item.title/item.title.view",
      "csui/controls/toolbar/delayed.toolbar.view",
      "csui/utils/commands/add",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/table/inlineforms/inlineform.factory",
      "hbs!csui/controls/tabletoolbar/impl/tabletoolbar",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/controls/mixins/dynamic.toolitems/dynamic.toolitems.mixin",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/utils/commands",
      "csui/utils/accessibility",
      "csui/utils/nodesprites",
      "csui-ext!csui/controls/tabletoolbar/tabletoolbar.view",
      "csui/lib/jquery.when.all",
      "css!csui/controls/tabletoolbar/impl/tabletoolbar",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y
    ) {
      "use strict";
      var S = a.LayoutView.extend({
        template: c,
        templateHelpers: function () {
          return { toolbarAria: s.ToolbarAria };
        },
        regions: {
          navigationToolbarRegion: ".csui-navigationToolbar",
          filterToolbarRegion: ".csui-filterToolbar",
          addToolbarRegion: ".csui-addToolbar",
          leftToolbarRegion: ".csui-leftToolbar",
          otherToolbarRegion: ".csui-otherToolbar",
          toolbarCaptionRegion: ".csui-toolbar-caption",
          rightToolbarRegion: ".csui-rightToolbar",
        },
        behaviors: { TabableRegion: { behaviorClass: g } },
        toolbarItemSelector:
          "a." +
          g.accessibilityFocusableClass +
          ":visible,button." +
          g.accessibilityFocusableClass +
          ":visible,otc-button." +
          g.accessibilityFocusableClass +
          ":visible,div." +
          g.accessibilityFocusableClass +
          ":visible",
        events: { keydown: "onKeyInView" },
        currentlyFocusedElement: function () {
          var P = this.$(this.toolbarItemSelector),
            F = P.length ? v(P[this.accNthToolbarItemFocused]) : null;
          return F;
        },
        constructor: function (F) {
          F || (F = {}),
            (this.context = F.context),
            (this.commandController =
              F.toolbarCommandController ||
              new w({ commands: F.commands || b })),
            (this.addableTypes = F.addableTypes),
            (this.originatingView = F.originatingView || this),
            (this.blockingParentView = F.blockingParentView),
            (this.selectedNodes = new i()),
            (this.accNthToolbarItemFocused = 0),
            (this.toolbarNames = [
              "navigation",
              "filter",
              "add",
              "left",
              "other",
              "right",
            ]),
            a.LayoutView.prototype.constructor.apply(this, arguments),
            this.listenTo(this, "before:regions:reinitialize", this.initialize);
        },
        initialize: function (P) {
          this.container =
            P.container || (this.collection && this.collection.node);
          var F = {
            context: this.context,
            nodes: this.selectedNodes,
            container: P.removeContainer ? void 0 : this.container,
            collection: this.collection,
            originatingView: this.originatingView,
            data: { addableTypes: this.addableTypes },
          };
          d.each(
            this.toolbarNames,
            function (L) {
              var Q = L + "Toolbar",
                q = this.options.toolbarItems[Q];
              if (q) {
                var G =
                    this.options.toolbarItemsMasks &&
                    this.options.toolbarItemsMasks.toolbars[Q],
                  N = new l(q, {
                    status: F,
                    commands: this.commandController.commands,
                    mask: G,
                  });
                this.container &&
                  this.listenTo(
                    this.container.actions,
                    "reset update",
                    function () {
                      N.refilter();
                    }
                  );
                var W = u,
                  H = new W(
                    d.extend(
                      {
                        collection: N,
                        toolbarName: L,
                        toolbarCommandController: this.commandController,
                        toolbarItemsMask: G,
                        originatingView: this.originatingView,
                        blockingParentView: this.blockingParentView,
                        noMenuRoles: !0,
                      },
                      q.options
                    )
                  );
                (this[L + "ToolbarView"] = H),
                  H.closeDropdown &&
                    H.listenTo(
                      this,
                      "changed:focus close:dropdown",
                      H.closeDropdown
                    ),
                  H.closeSubMenu &&
                    H.listenTo(this, "close:subMenu", H.closeSubMenu),
                  this.listenTo(
                    H,
                    "childview:toolitem:action",
                    this._toolbarItemClicked
                  )
                    .listenTo(H, "dom:refresh", function () {
                      this.triggerMethod("refresh:tabindexes");
                    })
                    .listenTo(
                      this.commandController,
                      "after:execute:command",
                      function (z) {
                        if (z && z.cancelled) {
                          var Z = this.$el.find(
                              "[data-csui-command=" +
                                z.commandSignature.toLowerCase() +
                                "] a"
                            ),
                            te = Z.length
                              ? Z.closest("ul.csui-more-dropdown-menu")
                              : {};
                          te.length
                            ? te
                                .siblings("a.binf-dropdown-toggle")
                                .trigger("focus")
                            : Z.trigger("focus");
                        }
                      }
                    ),
                  H instanceof t &&
                    this.listenTo(this.selectedNodes, "reset", function () {
                      H.actionState.set(
                        "showMessage",
                        !!this.selectedNodes.length
                      );
                    });
              }
            },
            this
          ),
            this.options.toolbarItems.addToolbar &&
              this.addableTypes &&
              (this._updateAddToolbar(),
              this.listenTo(
                this.addableTypes,
                "reset",
                this._updateAddToolbar,
                this
              )),
            this.options.headermenuItems &&
              this.options.headermenuItems.headerMenuToolbar &&
              this.container &&
              ((this.captionView = new r({
                model: this.container,
                toolItems: this.options.headermenuItems.headerMenuToolbar,
                toolItemsMask: this.options.headermenuItemsMask,
                context: this.context,
                commands: this.commandController.commands,
                originatingView: this.originatingView,
                nameSchema: this.options.nameSchema,
              })),
              this.captionView.listenTo(
                this,
                "changed:focus",
                this.captionView.closeMenu
              )),
            this.propagateEventsToRegions();
          var D = this;
          y &&
            y.forEach(function (L) {
              L(D);
            }),
            this.makeDynamicToolItems({
              collection: this.collection,
              toolbarItems: this.options.toolbarItems,
              toolbarNames: this.toolbarNames
                .filter((L) => L !== "add")
                .map((L) => (L === "other" ? "tableHeader" : L))
                .map((L) => `${L}Toolbar`)
                .filter((L) => this.options.toolbarItems[L]),
              eventArgs: {
                context: this.context,
                container: this.container,
                collection: this.collection,
                selection: this.selectedNodes,
                addableTypes: this.addableTypes,
              },
            });
        },
        _moveTo: function (P) {
          P.preventDefault(),
            P.stopPropagation(),
            this.trigger("changed:focus", this),
            this.currentlyFocusedElement().trigger("focus");
        },
        onKeyInView: function (P) {
          var F;
          if (
            !(
              v(P.target).is(":input") &&
              !v(P.target).hasClass(g.accessibilityFocusableClass)
            )
          )
            switch (P.keyCode) {
              case 9:
                this.trigger("close:dropdown");
                break;
              case 37:
                (F = this.$(this.toolbarItemSelector)),
                  this.accNthToolbarItemFocused > 0 &&
                    this.accNthToolbarItemFocused--,
                  this._moveTo(P);
                break;
              case 39:
                (F = this.$(this.toolbarItemSelector)),
                  this.accNthToolbarItemFocused < F.length - 1 &&
                    this.accNthToolbarItemFocused++,
                  this._moveTo(P);
                break;
              case 35:
                v(P.target).closest("ul").hasClass("binf-dropdown-menu") ||
                  ((F = this.$(this.toolbarItemSelector)),
                  (this.accNthToolbarItemFocused = F.length - 1),
                  this._moveTo(P));
                break;
              case 36:
                v(P.target).closest("ul").hasClass("binf-dropdown-menu") ||
                  ((this.accNthToolbarItemFocused = 0), this._moveTo(P));
                break;
            }
        },
        _updateAddToolbar: function () {
          var P = [];
          this.addableTypes.remove(this.addableTypes.findWhere({ type: 1 })),
            this.addableTypes.each(function (D) {
              var L = D.get("type"),
                Q = n.isAddableTypeWithoutInlineForm(L),
                q;
              if ((Q || (q = o.getInlineFormView(L)), Q || q)) {
                var G = "Add",
                  N = "add",
                  W = q && Object.getPrototypeOf(q).addableCommandInfo;
                if (q && d.isObject(W)) {
                  var H = W;
                  (G = H.signature || G), (N = H.group || N);
                } else if (
                  q &&
                  d.isFunction(q.prototype.getAddableCommandInfo)
                ) {
                  var z = q.prototype.getAddableCommandInfo();
                  (G = z.signature || G), (N = z.group || N);
                }
                var Z = D.get("type_name");
                Z = k.findTypeByNode(new h({ type: L, type_name: Z })) || Z;
                var te = new e({
                  signature: G,
                  name: Z,
                  title: d.str.sformat(s.AddToolbarItemsTitle, Z),
                  type: L,
                  group: N,
                  commandData: { type: L, addableTypes: this.addableTypes },
                  toolItemRole: "menuitem",
                });
                d.isFunction(this.options.updateAddToolItem) &&
                  this.options.updateAddToolItem(te),
                  P.push(te);
              }
            }, this);
          var F = this;
          P.length
            ? (this.stopListening(this.addToolbarView, "toolbar.show").listenTo(
                this.addToolbarView,
                "toolbar.show",
                function () {
                  this.addToolbarView.startLazyLoading(),
                    this._requestAddToolbar(P).always(function (D) {
                      F.addToolbarView.collection.silentFetch = !0;
                      var L = [],
                        Q = [];
                      if (D)
                        for (var q = 0; q < D.length; q++)
                          F._orderTheSequence(D[q], L, Q);
                      F._setToolBarItems(L, P),
                        F._resetAddToolbar(P),
                        F.addToolbarView.stopLazyLoading(),
                        F.stopListening(F.addToolbarView, "toolbar.show"),
                        F.addToolbarView.appendLazyActions();
                    });
                }
              ),
              this._resetAddToolbar(P))
            : this._requestAddToolbar(P).always(function (D) {
                var L = [],
                  Q = [];
                if (D)
                  for (var q = 0; q < D.length; q++)
                    F._orderTheSequence(D[q], L, Q);
                F._setToolBarItems(L, P), F._resetAddToolbar(P);
              });
        },
        _requestAddToolbar: function (P) {
          var F = [];
          return (
            this.triggerMethod("before:updateAddToolbar", {
              context: this.context,
              container: this.container,
              addableTypes: this.addableTypes,
              toolbarItems: P,
              async: function () {
                var D = v.Deferred();
                return (
                  F.push(D),
                  function (L) {
                    D.resolve(L);
                  }
                );
              },
            }),
            v.whenAll.apply(v, F)
          );
        },
        _orderTheSequence: function (P, F, D) {
          return (
            P &&
              P.toolItems &&
              P.sequence &&
              P.toolItems.length > 0 &&
              (F.length > 0
                ? P.sequence < D[D.length - 1]
                  ? this._swapArrayPositionOfToolbarItems(F, D, P)
                  : this._pushToToolbarItemsData(F, D, P)
                : this._pushToToolbarItemsData(F, D, P)),
            F
          );
        },
        _pushToToolbarItemsData: function (P, F, D) {
          P.push(D.toolItems), F.push(D.sequence);
        },
        _swapArrayPositionOfToolbarItems: function (P, F, D) {
          var L = P.pop(),
            Q = F.pop();
          this._pushToToolbarItemsData(P, F, D), P.push(L), F.push(Q);
        },
        _setToolBarItems: function (P, F) {
          var D = P;
          if (d.isArray(D)) {
            var L = D.length;
            if (!(L <= 0))
              for (var Q = 0; Q < L; Q++)
                for (var q = D[Q], G = 0; G < q.length; G++)
                  q[G].set("toolItemRole", "menuitem"), F.push(q[G]);
          }
        },
        _resetAddToolbar: function (P) {
          this.options.creationToolItemsMask &&
            (P = this.options.creationToolItemsMask.maskItems(P)),
            this.options.toolbarItems.addToolbar.reset(P);
        },
        _toolbarItemClicked: function (P, F) {
          var D = {
            context: this.context,
            nodes: this.selectedNodes.clone(),
            container: this.container,
            collection: this.collection,
            originatingView: this.originatingView,
            toolItemView: P,
          };
          this.commandController.toolitemClicked(F.toolItem, D);
        },
        updateForSelectedChildren: function (P) {
          const F = P.models || P;
          this.selectedNodes.reset(F);
        },
        onRender: function () {
          C.isAccessibleMode() &&
            this.el.firstElementChild.classList.add("csui-wrap-text"),
            this.options.height && this.$el.height(this.options.height),
            d.each(
              this.toolbarNames,
              function (P) {
                var F = this[P + "ToolbarView"];
                F &&
                  (F.collection.refilter(), this[P + "ToolbarRegion"].show(F));
              },
              this
            ),
            this.captionView &&
              this.toolbarCaptionRegion.show(this.captionView);
        },
      });
      return d.extend(S.prototype, m), f.mixin(S.prototype), S;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/root/lang",
    {
      ApplyPropertiesAria: "Select properties handling",
      KeepOriginalProperties: "Keep original categories",
      ApplyDestinationProperties: "Apply destination categories",
      CombineAllProperties: "Combine all categories",
      OpenSelectedProperties: "Open properties page",
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/node.picker",
    [
      "module",
      "nuc/lib/jquery",
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "csui/utils/base",
      "csui/utils/log",
      "nuc/contexts/factories/connector",
      "nuc/models/node/node.model",
      "nuc/models/node.children2/node.children2",
      "nuc/models/nodeancestors",
      "smart/controls/node.picker/node.picker",
      "csui/utils/contexts/factories/node",
      "csui/utils/contexts/factories/next.node",
      "csui/controls/multilingual.text.picker/multilingual.popover.mixin",
      "csui/dialogs/node.picker/start.locations/start.location.collection",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/utils/node.links/node.links",
      "csui/models/node/node.addable.type.factory",
      "csui/controls/tabletoolbar/tabletoolbar.view",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitems.mask",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/utils/commands",
      "csui/controls/table/inlineforms/inlineform.factory",
      "csui/dialogs/node.picker/data/node.picker.extra.data",
      "i18n!csui/dialogs/node.picker/impl/nls/lang",
      "i18n!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/lang",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D,
      L
    ) {
      var Q = a.extend(
        {
          initialLocationLookupOrder: [
            "csui/dialogs/node.picker/start.locations/recent.containers",
            "csui/dialogs/node.picker/start.locations/current.location",
            "csui/dialogs/node.picker/start.locations/favorites",
          ],
        },
        v.config()
      );
      let q = [],
        G = [],
        N = !1;
      Object.keys(Q.extensions ?? {}).forEach((z) => {
        (q = a.union(q, Q.extensions[z].includes ?? [])),
          (G = a.union(G, Q.extensions[z].excludes ?? [])),
          Q.extensions[z].always && (N = !0);
      }),
        (q = a.difference(q, G));
      function W(z, Z = !1) {
        let te = F.getModelFields();
        return (
          Z &&
            z.setFields &&
            ((te.properties = te.properties ?? []), z.setFields(te)),
          z
        );
      }
      function H(z = {}) {
        let Z = z?.command ?? "",
          te = N && G.indexOf(Z) === -1;
        z.nodeIndicators = te || q.indexOf(Z) !== -1;
        let le = {
          id: { KEEP_ORIGINAL_PROPERTIES: 1, APPLY_DESTINATION_PROPERTIES: 2 },
          name: {
            KEEP_ORIGINAL_PROPERTIES: L.KeepOriginalProperties,
            APPLY_DESTINATION_PROPERTIES: L.ApplyDestinationProperties,
          },
        };
        z.includeCombineProperties &&
          ((le.id.COMBINE_ALL_PROPERTIES = 3),
          (le.name.COMBINE_ALL_PROPERTIES = L.CombineAllProperties));
        let ge = [
          {
            id: le.id.KEEP_ORIGINAL_PROPERTIES,
            name: le.name.KEEP_ORIGINAL_PROPERTIES,
          },
          {
            id: le.id.APPLY_DESTINATION_PROPERTIES,
            name: le.name.APPLY_DESTINATION_PROPERTIES,
          },
        ];
        z.includeCombineProperties &&
          ge.push({
            id: le.id.COMBINE_ALL_PROPERTIES,
            name: le.name.COMBINE_ALL_PROPERTIES,
          }),
          n.call(
            this,
            a.extend(
              {
                multiLingualPopoverMixin: c,
                isMlDataEnabled: i.getMetadataLanguageInfo().enabled,
                metadataLanguages:
                  z?.metadataLanguagesBase || i.getMetadataLanguageInfo(),
                initialLocationLookupOrder: Q.initialLocationLookupOrder,
                applyPropertiesOptions: z?.applyPropertiesOptions || ge,
                getNodeTypeIconView: H.prototype.getNodeTypeIconView,
                nodeLinks: g,
                getLocations: H.prototype.getLocations,
                getConnector: H.prototype.getConnector,
                getInitalContainer: H.prototype.getInitalContainer,
                getAncestorsCollection: H.prototype.getAncestorsCollection,
                onClickAncestor: H.prototype.onClickAncestor,
                fetchContainer: H.prototype.fetchContainer,
                fetchCollection: H.prototype.fetchCollection,
                synchronizeTreeCollection:
                  H.prototype.synchronizeTreeCollection,
                getViewOptions: H.prototype.getViewOptions,
                resetCollStartPosition: H.prototype.resetCollStartPosition,
                selectViewRefresh: H.prototype.selectViewRefresh,
                fetchCollectionOnScroll: H.prototype.fetchCollectionOnScroll,
                getAddableTypes: H.prototype.getAddableTypes,
                addEventHandlers: H.prototype.addEventHandlers,
                initializeToolbar: H.prototype.initializeToolbar,
              },
              z
            )
          );
      }
      return (
        (H.prototype = Object.create(n.prototype)),
        a.extend(H.prototype, {
          getLocations: function (z) {
            let Z = new m(z);
            return new Promise((te) => {
              Z.fetch({
                connector: z.connector,
                container: z.initialContainer,
                removeInvalid: !1,
              }).always(() => {
                te(Z);
              });
            });
          },
          getNodeTypeIconView: function (z) {
            return new f(z);
          },
          getConnector: function (z) {
            var Z;
            if (z.context) Z = z.context.getObject(l);
            else if (z.initialSelection || z.initialContainer) {
              var te = z.initialSelection,
                le = te ? (a.isArray(te) ? te : te.models) : void 0,
                ge = z.initialContainer || le[0];
              Z = ge && ge.connector;
            }
            return Z;
          },
          getInitalContainer: function (z) {
            var Z = z.initialContainer;
            if (Z == null || a.isEmpty(Z)) {
              var te = z.context && z.context.getModel(s);
              te != null && te.parent != null && te.parent.isFetchable()
                ? te.parent.get("id") === 1 || te.get("container")
                  ? (Z = te.clone())
                  : (Z = te.parent.clone())
                : (Z = null);
            } else
              Z instanceof h.Model ||
                (Z = new u(Z, { connector: z.connector }));
            return Z;
          },
          getAncestorsCollection: function (z) {
            var Z = new u({ id: z }, { connector: this.connector }),
              te = { node: Z, autofetch: !0 },
              le = new t(void 0, te),
              ge = { node: Z, ancestorColl: le };
            return ge;
          },
          onClickAncestor: function (z, Z) {
            var te = (this.context = this.options.context);
            this._nextNode = this.options.node || te.getModel(o);
            var le = { node: Z };
            if ((this.trigger("before:defaultAction", le), !le.cancel)) {
              var ge = Z.get("id");
              this._nextNode.get("id") === ge &&
                this._nextNode.unset("id", { silent: !0 });
              var Pe = this.context && this.context.viewStateModel,
                _e = Pe && Pe.get("state");
              _e &&
                this.context.viewStateModel.set("state", a.omit(_e, "filter"), {
                  silent: !0,
                }),
                this._nextNode.trigger("before:change:id", Z, this),
                this._nextNode.set("id", ge);
            }
            this.$el.trigger("setCurrentTabFocus");
          },
          fetchContainer: function (z) {
            return (
              z.container &&
                z.container.get("id") &&
                z.container.ensureFetched(),
              !0
            );
          },
          fetchCollection: function (z) {
            var Z = d.Deferred(),
              te = this;
            if (z.options.treeView) Z.resolve(z.collection);
            else {
              (z.collection = W(z.collection, z.options.nodeIndicators)),
                z.collection.setOrder(this.orderBy, !1),
                z.collection.setFilter({ type: z.options?.listTypes }, !1),
                z.collection.setLimit(
                  0,
                  this.pageSize || z.options.pageSize,
                  !1
                ),
                z.collection.includeResources &&
                  z.collection.includeResources(this.includeResources),
                z.options?.checkPermissions &&
                  z.listenTo(z.collection, "sync", function () {
                    z.collection.forEach((ge) => {
                      H.prototype._isUnselectable(ge, z.options.context) &&
                        ge.set("unselectable", !0);
                    });
                  });
              var le = z.collection.fetch({ reset: !1, merge: !1, remove: !1 });
              le.done(function (ge) {
                z.listView.resolveShortcuts(z.collection).always(function () {
                  Z.resolve(z.collection);
                });
              }).fail(function (ge) {
                Z.reject(ge);
              });
            }
            return Z;
          },
          synchronizeTreeCollection: function (z) {
            this.groupsCollection = z?.groupsCollection;
            var Z = this,
              te = this.groupsCollection.at(0),
              le = { favorite_name: this.options?.filterValue },
              ge = z?.groupChildrenCollection;
            if (this.groupsCollection.length === 1 && te.get("tab_id") === -1) {
              Z.showFlatList = !0;
              var Pe = new ge(void 0, z);
              Pe.reset(te[z?.groupsLocationName]?.models || []),
                Pe.setFilter(le),
                z?.treeViewOptions?.checkPermissions &&
                  Pe.forEach((ae) => {
                    H.prototype._isUnselectable(ae, z.context) &&
                      ae.set("unselectable", !0);
                  }),
                !Z.options?.filterValue || Z.options?.filterValue?.length === 0
                  ? Z.collection.reset(Pe.models)
                  : Z.listenTo(Pe, "sync", function () {
                      Z.collection.reset(Pe.models);
                    });
            } else {
              var _e = [];
              Z.showFlatList = !1;
              var ie = new h.Collection();
              a.each(this.groupsCollection.models, function (ae) {
                var fe = new ge(void 0, z);
                fe.reset(ae[z?.groupsLocationName]?.models),
                  fe?.setFilter(le),
                  z?.treeViewOptions?.checkPermissions &&
                    fe.forEach((Re) => {
                      H.prototype._isUnselectable(Re, z.context) &&
                        Re.set("unselectable", !0);
                    });
                var pe = new h.Model(ae.attributes);
                if (
                  ((pe.childrenCollection = fe),
                  pe.get("tab_id") === -1 && pe.set("flatten", !0),
                  ie.add(pe),
                  Z.options?.filterValue && Z.options?.filterValue?.length > 0)
                ) {
                  var ke = d.Deferred();
                  _e.push(ke.promise()),
                    Z.listenTo(fe, "sync", function () {
                      pe.childrenCollection.length === 0 && ie.remove(pe),
                        ke.resolve();
                    });
                }
              }),
                Z.options?.filterValue && Z.options?.filterValue.length > 0
                  ? d.when.apply(d, _e).then(function () {
                      Z.collection.reset(ie.models);
                    })
                  : Z.collection.reset(ie.models);
            }
          },
          _isUnselectable: function (z, Z) {
            let te = Z._user;
            if (
              !te ||
              te.get("privilege_system_admin_rights") ||
              !z.get("container") ||
              !(z.get("data") && z.get("data").permissions) ||
              z
                .get("data")
                .permissions.filter(
                  (_e) =>
                    _e.type === "public" &&
                    _e.permissions?.includes("add_items")
                ).length > 0
            )
              return !1;
            let le = te.get("id");
            if (
              z
                .get("data")
                .permissions.filter(
                  (_e) =>
                    _e.right_id === le && _e.permissions?.includes("add_items")
                ).length > 0
            )
              return !1;
            let ge = Z._groups;
            if (!ge) return !1;
            let Pe = ge.map((_e) => _e.data?.properties?.id);
            return !(
              z
                .get("data")
                .permissions.filter(
                  (_e) =>
                    Pe.includes(_e.right_id) &&
                    _e.permissions?.includes("add_items")
                ).length > 0
            );
          },
          getViewOptions: function (z, Z) {
            var te = z instanceof h.Model,
              le = te ? z : new u({ id: z }, { connector: Z }),
              ge = new r(void 0, {
                node: le,
                autofetch: !0,
                orderBy: this.orderBy,
                commands: "default,open",
                includeResources: ["show_hidden"],
              });
            return (
              (this.collection = W(this.collection)),
              { container: le, collection: ge, fetchContainer: !te }
            );
          },
          resetCollStartPosition: function (z, Z) {
            (z.collection = W(z.collection, z.options.nodeIndicators)),
              z.collection.setLimit(0, z.options?.pageSize, !1),
              z.collection.setFilter(Z, !1);
            let te = this;
            z.collection
              .fetch({ reset: !0 })
              .done(function (le) {
                let ge = a.str.sformat(D.searchFoundAbout, le?.results?.length);
                te.masterView.trigger("make:anouncement", { message: ge });
              })
              .fail(function (le) {
                z.listView.stopBlocker(),
                  z.trigger("search:failed", { resp: le, view: z });
              }),
              z.listView.reset();
          },
          selectViewRefresh: function (z) {
            (z.collection = W(z.collection, z.options.nodeIndicators)),
              z.collection.fetch({ reset: !0 }).fail(function () {
                z.listView.stopBlocker();
              });
          },
          fetchCollectionOnScroll: function (z) {
            (z.collection = W(z.collection)),
              z.collection.setSkip(z.collection.length, !1),
              z.collection.fetch({ reset: !1, remove: !1, merge: !1 });
          },
          getAddableTypes: function (z) {
            var Z = z.context.getCollection(w, {
              options: { node: z.container },
              attributes: { id: z?.container?.get("id") },
              temporary: !0,
            });
            return new Promise((te) => {
              Z.ensureFetched().then(function () {
                var le = Z.filter((Pe) =>
                  z.addableTypes?.includes(Pe.get("type"))
                );
                if (le.length) {
                  var ge = [];
                  le.forEach((Pe) => {
                    ge.push({
                      type: Pe.get("type"),
                      type_name: Pe.get("type_name"),
                    });
                  }),
                    te(ge);
                }
              });
            });
          },
          addEventHandlers: function (z) {
            z.listenTo(z, "save:form", function (Z) {
              H.prototype._saveForm(Z);
            });
          },
          _saveForm: function (z) {
            var Z = z.get("id") === void 0 ? "_saveNewModel" : "",
              te = this[Z](z);
            return (
              te.done(
                a.bind(function () {
                  z.trigger("edit:ended", z);
                }, this)
              ),
              te
            );
          },
          _saveNewModel: function (z) {
            var Z = "{0}:_saveNewModel {1}",
              te = z.inlineFormView;
            delete z.inlineFormView;
            var le = a.clone(z.attributes);
            delete le.smartInlineFormErrorMessage;
            var ge = this;
            return z
              .save(void 0, { data: le, wait: !0, silent: !0 })
              .then(function () {
                z.set("smartInlineFormErrorMessage", "dummy", { silent: !0 }),
                  z.unset("smartInlineFormErrorMessage");
              })
              .fail(function (Pe) {
                (z.inlineFormView = te), z.trigger("error", ge.model);
                var _e = H.prototype._getErrorMessageFromResponse(Pe);
                z.set("smartInlineFormErrorMessage", _e),
                  e.error("Saving failed. ", _e) && console.error(e.last);
              });
          },
          _getErrorMessageFromResponse: function (z) {
            var Z;
            if (z && z.responseJSON && z.responseJSON.error)
              Z = z.responseJSON.error;
            else {
              var te = base.MessageHelper.toHtml();
              i.MessageHelper.reset(), (Z = d(te).text());
            }
            return Z;
          },
          initializeToolbar: function (z) {
            function Z(_e) {
              var ie = _e.$el.find(".csui-tabletoolbar");
              ie && ie.removeAttr("aria-label role");
            }
            var te = z.options.context.getCollection(w, {
                options: { node: z.container },
                attributes: { id: z.container.get("id") },
                temporary: !0,
              }),
              le = z;
            te.ensureFetched().then(function () {
              le?.tableToolbarView?.addToolbarView._adjustToFit();
            }),
              (z.commandController = new y({ commands: S }));
            var ge = {
                addToolbar: new C(
                  { add: [] },
                  {
                    maxItemsShown: z.options.addableTypes.length > 1 ? 0 : 1,
                    dropDownIconName: "csui_action_add32",
                    dropDownText: D.ToolbarItemAddItem,
                    addTrailingDivider: !1,
                  }
                ),
              },
              Pe = a.map(z.options.addableTypes, function (_e) {
                return { signature: "Add", commandData: { type: _e } };
              });
            return (
              (z.tableToolbarView = new b({
                context: z.options.context,
                toolbarItems: ge,
                container: z.container,
                collection: z.options.collection,
                originatingView: z,
                blockingParentView: z.options.blockingParentView || z,
                addableTypes: te,
                toolbarCommandController: z.commandController,
                creationToolItemsMask:
                  z.options.creationToolItemsMask ||
                  new k({ whitelist: Pe }, { normalize: !1 }),
                updateAddToolItem: a.bind(function (_e) {
                  z.options.addableTypes.length === 1 &&
                    _e.set({
                      renderIconAndText: !1,
                      renderTextOnly: !1,
                      iconName: "csui_action_add32",
                      dropDownIconName: "csui_action_add32",
                    });
                }, z),
              })),
              z.tableToolbarView.render(),
              Z(z.tableToolbarView),
              z.listenTo(
                z.commandController,
                "before:execute:command",
                H.prototype.beforeExecuteCommand
              ),
              z.listenTo(
                z.commandController,
                "after:execute:command",
                H.prototype.toolbarActionTriggered
              ),
              z.tableToolbarView
            );
          },
          beforeExecuteCommand: function (z) {
            var Z = this.options.collection.filter(function (te) {
              return !!te.inlineFormView;
            });
            this.options.collection.remove(Z);
          },
          toolbarActionTriggered: function (z) {
            if (!(!z || z.cancelled) && z.status.forwardToTable) {
              var Z = P.getInlineFormView(z.addableType);
              if (Z) {
                var te = z.newNodes[0];
                te.error ||
                  (te.set("parent_id", this.container.get("id")),
                  (te.isLocallyCreated = !0),
                  (te.inlineFormView = Z),
                  this.options.collection.add(te, { at: 0 }),
                  this.listenTo(te, "destroy", function () {
                    this.tableToolbarView.$el.find("a").trigger("focus");
                  }));
              }
            }
          },
        }),
        (H.defaults = a.extend({}, n.defaults)),
        H
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/members.picker.wizard",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/dialogs/members.picker/impl/members.picker.view",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/member",
      "csui/models/member/member.model",
      "csui/models/member/membercollection",
      "csui/models/permission/nodepermission.model",
      "csui/dialogs/members.picker/start.locations/start.location.collection",
      "csui/dialogs/members.picker/impl/command.type",
      "csui/dialogs/members.picker/impl/header/members.picker.header.view",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "csui/utils/log",
      "csui/utils/url",
      "csui/controls/progressblocker/blocker",
      "csui/controls/wizard/wizard.view",
      "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",
      "csui/widgets/permissions/edit/permission.attributes/permission.attributes.view",
      "csui/widgets/permissions/edit/apply.permission/apply.permission.view",
      "csui/utils/taskqueue",
      "csui/controls/globalmessage/globalmessage",
      "i18n",
      "csui/utils/commonconfig.util",
      "css!csui/dialogs/members.picker/impl/members.picker",
      "csui/dialogs/node.picker/node.picker",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D
    ) {
      "use strict";
      var L = d.extend(
        {
          initialLocationLookupOrder: [
            "csui/dialogs/members.picker/start.locations/recent.groups",
            "csui/dialogs/members.picker/start.locations/member.groups",
            "csui/dialogs/members.picker/start.locations/acl.groups",
            "csui/dialogs/members.picker/start.locations/all.members",
          ],
        },
        v.config()
      );
      d.defaults(L, {
        parallelism: 3,
        enableRemoveMember: D.enableFeatureInSmartView() || !1,
      });
      var Q = {
        initialSelection: [],
        dialogTitle: m.dialogTitle,
        orderBy: "name asc",
      };
      function q(N) {
        if (
          (N || (N = {}),
          (this.options = d.defaults(N, Q, { pageSize: 30 })),
          this.options.connector ||
            (this.options.connector = this._getConnector(this.options)),
          !this.options.connector)
        ) {
          var W = m.missingConnector;
          throw (f.error(W) && console.error(W), new Error(W));
        }
        (this.options.targetBrowseHistory = []),
          (this.options.navigateFromHistory = !1),
          (this.options.initialContainer = this._getInitalContainer(
            this.options
          )),
          (this.options.unselectableMembers = this._getArrayOfNodeIds(
            N.unselectableMembers
          )),
          (this.options.selectableMembers = this._getArrayOfNodeIds(
            N.selectableMembers
          )),
          (this.options.commandType = new o(this.options));
      }
      let G = [];
      return (
        d.extend(q.prototype, {
          show: function () {
            return (
              (this._locations = new s(this.options)),
              this._locations
                .fetch({
                  connector: this.options.connector,
                  container: this.options.initialContainer,
                  nodeId: this.options.nodeModel
                    ? this.options.nodeModel.get("id")
                    : void 0,
                  removeInvalid: !1,
                })
                .done(d.bind(this._showWizard, this)),
              (this._deferred = a.Deferred()),
              this._deferred.promise()
            );
          },
          _showWizard: function () {
            (this._steps = this._createWizardSteps()),
              (this._wizard = new b({ steps: this._steps })),
              w.imbue(this._wizard),
              (this._wizard.options.editpermission =
                this.membersPickerView.options.edit_permission),
              (this._wizard.options.groupId =
                this.membersPickerView.options.groupId),
              (this._wizard.options.id =
                this.membersPickerView.options.groupId),
              (this._wizard.options.add = this.membersPickerView.options.add),
              (this.membersPickerView.selectViews.initialLocation =
                this.initialLocation),
              this._wizard.show(this._wizard.options),
              this._wizard.on("save:result", this.onClickFinishButton, this),
              this._wizard.on("add:member", this.onClickApplyButton, this),
              this._wizard.on("apply:result", this.onClickApplyButton, this),
              this._wizard.on("closing:wizard", this.onClickCancelButton, this),
              this._wizard.currentView.headerView.on(
                "show:selectItem",
                this.selectUsers,
                this
              ),
              this._wizard.currentView.headerView.on(
                "enable:add",
                this.enableAdd,
                this
              ),
              this.options.selectedMember &&
                this.selectUsers(this.options.selectedMember);
          },
          _createHeaderControl: function (N) {
            var W = this.options,
              H = W.locationSelector == null ? !0 : W.locationSelector,
              z = W.displayStartLocation == null ? !1 : W.displayStartLocation,
              Z = new c({
                locations: this._locations,
                headerViewoptions: this.options,
                title: W.dialogTitle,
                context: W.context,
                node: this.options.node,
                authUser: this.options.authUser,
                hasEditPermissionAction: this.options.edit_permission,
                initialLocation: N,
                displayStartLocation: z,
                adduserorgroup: W.adduserorgroup ? W.adduserorgroup : !1,
                showUserPicker: W.showUserPicker,
                locationSelector: H,
                selectedMember: W.selectedMember,
                initialSelection: W.initialSelection,
              });
            return (
              W.adduserorgroup &&
                Z.startLocationView.on(
                  "change:location",
                  this.onChangeLocation,
                  this
                ),
              Z.on("hide:parentDialog", this.parentdialogdestroy, this),
              Z
            );
          },
          parentdialogdestroy: function (N) {
            this._wizard.destroy();
          },
          _createPickerView: function (N, W) {
            this.options.startLocation ||
              (this.options.startLocation = this._locations.at(0));
            var H = this.options,
              z = N.get("factory"),
              Z = z.getLocationParameters(this.options);
            d.defaults(Z, this.options, { leftSelection: W });
            var te = new e(Z);
            return (
              te.on("update:button", this.updateButton, this),
              te.on("enable:apply", this.enableDone, this),
              te
                .on("changing:selection", this._blockDialog, this)
                .on("change:location", this.onChangeLocation, this),
              H.adduserorgroup &&
                te.on("change:complete", this.onSelectionChange, this),
              (this.membersPickerView = te),
              te
            );
          },
          _createPermissionLevelSelectorView: function () {
            var N = new C({
              selected: 1,
              isContainer: this.options.nodeModel
                ? this.options.nodeModel.get("container")
                : !0,
              nodeModel: this.options.nodeModel,
            });
            return (
              N.on(
                "permission:level:selected",
                this.onPermissionLevelSelection,
                this
              ),
              N
            );
          },
          _createPermissionLevelSubItemsView: function () {
            var N = new y({
              selected: 2,
              context: this.options.context,
              model: this.options.nodeModel,
              applyTo: this.options.applyTo,
            });
            return (
              N.on(
                "permission:level:selected",
                this.onPermissionLevelSelection,
                this
              ),
              N
            );
          },
          dialogClassName: function () {
            var N = "target-browse";
            return (
              this.options &&
                this.options.userClassName &&
                (N = N + " " + this.options.userClassName),
              N
            );
          },
          _createWizardSteps: function () {
            this.initialLocation = this._getInitialLocation();
            var N = this.options,
              W = this._createHeaderControl(this.initialLocation),
              H = this._createPickerView(this.initialLocation),
              z = !!(
                N.nodeModel &&
                N.nodeModel.get("container") &&
                N.nodeModel.get("permissions_model") === "advanced"
              ),
              Z = "memberPickerHeader",
              te = d.uniqueId("permissionLevel"),
              le,
              ge,
              Pe;
            if (N.adduserorgroup && !N.showUserPicker && z)
              return (
                (le = {
                  title: N.dialogTitle,
                  adduserorgroup: N.adduserorgroup ? N.adduserorgroup : !1,
                  headerView: W,
                  view: H,
                  className: this.dialogClassName,
                  nextButton: !0,
                  userClassName: this.options.dialogClass,
                  attributes: { "aria-labelledby": Z },
                  largeSize: !0,
                }),
                (ge = {
                  title: N.dialogTitle,
                  headers: [
                    {
                      label: m.selectPermissionLevel,
                      class: "csui-permission-level-select",
                      id: te,
                    },
                  ],
                  nextButtonLabel: m.nextButtonLabel,
                  nextButton: !0,
                  disableNext: !1,
                  view: this._createPermissionLevelSelectorView(),
                  className: this.dialogClassName() + " csui-permissions-level",
                  attributes: { "aria-labelledby": Z, "aria-describedby": te },
                }),
                (Pe = {
                  title: N.dialogTitle,
                  doneButtonLabel: m.doneButtonLabel,
                  disableDone: !1,
                  doneButton: !0,
                  view: this._createPermissionLevelSubItemsView(),
                  className:
                    this.dialogClassName() + " csui-permissions-apply-dialog",
                  attributes: { "aria-labelledby": Z },
                }),
                [le, ge, Pe]
              );
            if (N.adduserorgroup && !N.showUserPicker && !z)
              return (
                (le = {
                  title: N.dialogTitle,
                  adduserorgroup: N.adduserorgroup ? N.adduserorgroup : !1,
                  headerView: W,
                  view: H,
                  className: this.dialogClassName,
                  nextButton: !0,
                  userClassName: this.options.dialogClass,
                  attributes: { "aria-labelledby": Z },
                  largeSize: !0,
                }),
                (ge = {
                  title: N.dialogTitle,
                  headers: [
                    {
                      label: m.selectPermissionLevel,
                      class: "csui-permission-level-select",
                      id: te,
                    },
                  ],
                  doneButtonLabel: m.doneButtonLabel,
                  disableDone: !1,
                  doneButton: !0,
                  view: this._createPermissionLevelSelectorView(),
                  className: this.dialogClassName() + " csui-permissions-level",
                  attributes: { "aria-labelledby": Z, "aria-describedby": te },
                }),
                [le, ge]
              );
            var _e = {
              title: N.dialogTitle,
              adduserorgroup: N.adduserorgroup ? N.adduserorgroup : !1,
              showUserPicker: N.showUserPicker,
              headerView: W,
              view: H,
              className: this.dialogClassName,
              userClassName: this.options.dialogClass,
              attributes: { "aria-labelledby": "memberPickerHeader" },
              largeSize: !0,
              buttons: N.buttons,
            };
            return [_e];
          },
          _blockDialog: function () {
            return this._wizard.blockWithoutIndicator(), !0;
          },
          onHideDialog: function () {
            this._deferred &&
              (this._result
                ? this._deferred.resolve(this._result)
                : this._deferred.state() === "pending" &&
                  this._deferred.reject({ cancelled: !0 }));
          },
          normalizeLocationName: function (N) {
            return N.lastIndexOf("/") >= 0
              ? N
              : `csui/dialogs/members.picker/start.locations/${N}`;
          },
          onChangeLocation: function (N, W) {
            N.get || (N = this._locations.get(this.normalizeLocationName(N))),
              (this.options.targetBrowseHistory = []);
            var H =
              this.membersPickerView &&
              this.membersPickerView.selectedMemberList &&
              this.membersPickerView.selectedMemberList.collection.models;
            this._steps[0].view.destroy(),
              this.membersPickerView.trigger("change:complete"),
              (this.options.location = N.get("location")),
              (this.options.startLocation = this.options.location);
            var z = W && W.rightId;
            this._steps[0].view = this._createPickerView(N, z);
            var Z = N.get("factory").container;
            this._wizard.currentView.showView(this._steps[0].view),
              H && this.selectUsers(H);
          },
          selectUsers: function (N) {
            this.membersPickerView &&
              this.membersPickerView.selectedMemberList &&
              this.membersPickerView.selectedMemberList.trigger(
                "show:selectItem",
                N
              );
          },
          onClickCancelButton: function () {
            (G = []),
              this.options.context?.memberListView?.removedItems &&
                (this.options.context.memberListView.removedItems = []);
          },
          enableDone: function () {
            const N =
              this.options.context?.memberListView?.removedItems?.length;
            N &&
              G.push(this.options.context?.memberListView?.removedItems[N - 1]);
            const W = this._wizard.currentView.footerView.children._views;
            d.each(
              W,
              function (H) {
                H.model.get("id") === "Apply" && H.$el.removeAttr("disabled");
              },
              this
            );
          },
          enableAdd: function () {
            if (!L.enableRemoveMember) {
              var N = this._wizard.currentView.footerView.children._views;
              d.each(
                N,
                function (W) {
                  W.model.get("id") === "Add" &&
                    W.$el.removeClass("binf-hidden");
                },
                this
              );
            }
          },
          updateButton: function (N) {
            this._wizard.currentView.footerView &&
              this._wizard.currentView.footerView.trigger("update:button", N),
              (this.locationId =
                !!this._wizard.currentView.headerView.options &&
                !!this._wizard.currentView.headerView.options
                  .headerViewoptions &&
                this._wizard.currentView.headerView.options.headerViewoptions
                  .locationID);
            var W = this._wizard.currentView.footerView.children._views;
            d.each(
              W,
              function (z) {
                (z.model.get("id") === "Add" ||
                  z.model.get("id") === "Apply") &&
                  ((N.models.length > 0 || G?.length > 0) &&
                  this._wizard.options.add
                    ? this.options.selectedMember && !this.locationId
                      ? z.$el.attr("disabled", "disabled")
                      : z.$el.removeAttr("disabled")
                    : z.$el.attr("disabled", "disabled"));
              },
              this
            );
            var H = N.models.length > 0;
            this._wizard.currentView.headerView &&
              this._wizard.currentView.headerView.userSearchView &&
              this._wizard.currentView.headerView.userSearchView.updatePlaceHolder(
                H
              );
          },
          onClickFinishButton: function () {
            var N, W, H, z;
            this &&
            this.getMemberPickerView() &&
            this.getMemberPickerView().getSelection()
              ? ((N = this.getMemberPickerView().getSelection()),
                (W = this.getPermissionLevelView().getSelectedPermissions()),
                (z = !!(
                  this.options.nodeModel.get("container") &&
                  this.options.nodeModel.get("permissions_model") === "advanced"
                )),
                z && (H = this.getPermissionsApplyView().getApplyToFlag()),
                (this._result = {
                  members: N,
                  permissions: W,
                  apply_to: z ? (H ? 2 : 3) : 0,
                }),
                this._wizard.destroy(),
                this.onHideDialog())
              : this._wizard.currentView.updateButton("next", { disabled: !0 });
          },
          onClickApplyButton: function () {
            this.membersPickerView.selectedMemberList.collection.models.length >
              0 && this.onClickAddButton(),
              G.length > 0 && this.removeMembers(),
              this.options.context?.memberListView?.removedItems &&
                (this.options.context.memberListView.removedItems = []),
              this._wizard.destroy(),
              this.onHideDialog();
          },
          removeMembers: function () {
            const N = this._wizard.options.groupId,
              W = this.options.connector.getConnectionUrl().getApiBase("v2");
            let H = this,
              z =
                (this.getMemberPickerView().getSelection() &&
                  this.getMemberPickerView()
                    .getSelection()
                    .get("name_formatted")) ||
                this.membersPickerView.options.displayName,
              Z = {},
              te = this.options.connector;
            H.groupName = z;
            const le = [],
              ge = [];
            let Pe = 0,
              _e = 0,
              ie = 0;
            const ae = new S({ parallelism: L.parallelism }),
              fe = G,
              pe = d.map(fe, function (ke) {
                var Re = a.Deferred();
                const Le = ke.get("name_formatted") || ke.get("name");
                return (
                  ae.pending.add({
                    worker: function () {
                      const De = ke.id;
                      return (
                        (Z = {
                          type: "DELETE",
                          id: N,
                          url: `${W}/members/${N}/members?member_id=${De}`,
                        }),
                        te
                          .makeAjaxCall(Z)
                          .done(function (Ke) {
                            (Pe += 1), le.push(Le), Re.resolve(ke);
                          }, H)
                          .fail(function (Ke) {
                            (_e += 1), ge.push(Le), Re.resolve(ke);
                          }, H),
                        Re.promise()
                      );
                    },
                  }),
                  ie++,
                  Re.promise()
                );
              });
            a.whenAll.apply(a, pe).then(function (ke) {
              switch (((G = []), !0)) {
                case Pe === 1 && _e === 0:
                  P.showMessage(
                    "success",
                    d.str.sformat(m.removalSingleUserText, le[0], H.groupName)
                  );
                  break;
                case Pe === 0 && _e === 1:
                  P.showMessage(
                    "error",
                    d.str.sformat(
                      m.removalSingleUserFailureText,
                      ge[0],
                      H.groupName
                    )
                  );
                  break;
                case Pe === 1 && _e > 0:
                  P.showMessage(
                    "success",
                    d.str.sformat(
                      m.removalSinglePassMoreThanOneFail,
                      le[0],
                      H.groupName,
                      _e
                    )
                  );
                  break;
                case Pe > 0 && _e > 0:
                  P.showMessage(
                    "success",
                    d.str.sformat(m.removalManyUserText, Pe, _e, H.groupName)
                  );
                  break;
                case Pe > 0 && _e === 0:
                  P.showMessage(
                    "success",
                    d.str.sformat(m.removalOnlyAllSuccessText, Pe, H.groupName)
                  );
                  break;
                case Pe === 0 && _e > 0:
                  P.showMessage(
                    "error",
                    d.str.sformat(m.removalOnlyAllFailureText, _e, H.groupName)
                  );
                  break;
                default:
                  break;
              }
            });
          },
          onClickAddButton: function (N, W) {
            var H = this._wizard.options.groupId,
              z = this.options.connector.getConnectionUrl().getApiBase("v2"),
              Z = this,
              te =
                (this.getMemberPickerView().getSelection() &&
                  this.getMemberPickerView()
                    .getSelection()
                    .get("name_formatted")) ||
                this.membersPickerView.options.displayName,
              le = {},
              ge = {},
              Pe = this.options.connector,
              _e =
                !!this._wizard.currentView.headerView.options &&
                !!this._wizard.currentView.headerView.options
                  .headerViewoptions &&
                this._wizard.currentView.headerView.options.headerViewoptions
                  .locationID;
            (H = _e || H), (Z.groupName = te);
            const ie = [],
              ae = [];
            let fe = 0,
              pe = 0;
            var ke = new S({ parallelism: L.parallelism }),
              Re = 0,
              Le =
                this.membersPickerView &&
                this.membersPickerView.selectedMemberList &&
                this.membersPickerView &&
                this.membersPickerView.selectedMemberList.collection.models,
              De = d.map(Le, function (Ke) {
                var $e = a.Deferred();
                return (
                  ke.pending.add({
                    worker: function () {
                      le = { member_id: Ke.id };
                      const He = Ke.get("name_formatted") || Ke.get("name");
                      var me = new r({}, { id: H, connector: Pe });
                      return (
                        me
                          .save(le, {
                            type: "POST",
                            processData: !1,
                            metadataPartName: "body",
                          })
                          .done(function (Oe) {
                            (fe += 1), ie.push(He), $e.resolve(Ke);
                          }, Z)
                          .fail(function (Oe) {
                            (pe += 1), ae.push(He), $e.resolve(Ke);
                          }, Z),
                        $e.promise()
                      );
                    },
                  }),
                  Re++,
                  $e.promise(De)
                );
              });
            a.whenAll.apply(a, De).then(function (Ke) {
              fe === 1 && pe === 0
                ? P.showMessage(
                    "success",
                    d.str.sformat(m.additionSingleUserText, ie[0], Z.groupName)
                  )
                : fe === 0 && pe === 1
                ? P.showMessage(
                    "error",
                    d.str.sformat(
                      m.additionSingleUserFailureText,
                      ae[0],
                      Z.groupName
                    )
                  )
                : fe === 1 && pe > 0
                ? P.showMessage(
                    "success",
                    d.str.sformat(
                      m.additionSinglePassMoreThanOneFail,
                      ie[0],
                      Z.groupName,
                      pe
                    )
                  )
                : fe > 0 && pe > 0
                ? P.showMessage(
                    "success",
                    d.str.sformat(m.additionManyUserText, fe, pe, Z.groupName)
                  )
                : fe > 0 && pe === 0
                ? P.showMessage(
                    "success",
                    d.str.sformat(m.additionOnlyAllSuccessText, fe, Z.groupName)
                  )
                : fe === 0 &&
                  pe > 0 &&
                  P.showMessage(
                    "error",
                    d.str.sformat(m.additionOnlyAllFailureText, pe, Z.groupName)
                  );
            });
          },
          _getArrayOfNodeIds: function (N) {
            return N && !d.isEmpty(N) && N[0] instanceof h.Model
              ? d.map(N, function (W) {
                  return W.get("right_id");
                })
              : N;
          },
          _getInitalContainer: function (N) {
            var W = this.options.initialContainer;
            return (
              W == null || d.isEmpty(W) || !(W instanceof h.Model)
                ? (W = new r(
                    { groupId: N.groupId, displayName: N.displayName },
                    { connector: N.connector }
                  ))
                : W == null,
              W
            );
          },
          _getConnector: function (N) {
            var W;
            if (N.context) W = N.context.getObject(l);
            else if (N.initialSelection || N.initialContainer) {
              var H = N.initialSelection,
                z = H ? (d.isArray(H) ? H : H.models) : void 0,
                Z = N.initialContainer || z[0];
              W = Z && Z.connector;
            }
            return W;
          },
          _getInitialLocation: function () {
            var N = this.options.startLocation,
              W;
            if (N) {
              var H = N.lastIndexOf("/");
              H < 0 && (N = "csui/dialogs/members.picker/start.locations/" + N),
                (W = this._locations.get(N));
            }
            return (
              !N &&
                this.options.groupId &&
                (W = this._locations.get(
                  "csui/dialogs/members.picker/start.locations/current.group"
                )),
              W
            );
          },
          onSelectionChange: function (N) {
            var W = this.getMemberPickerView().getNumberOfSelectItems() > 0,
              H;
            N && N.get("id") && (this.options.locationID = N.get("id")),
              (this._wizard.options.add = N && N.add),
              this._wizard.destroyBlockingView();
            var z = this.getMemberPickerHeader();
            if (
              (this.options.saveFilter && z && z.ui.saveFilter
                ? ((H = !!z.ui.saveFilter.val().trim()),
                  H && W
                    ? this._wizard.updateButton("next", { disabled: !1 })
                    : this._wizard.updateButton("next", { disabled: !0 }))
                : (this._wizard.updateButton("next", { disabled: !W }),
                  this.membersPickerView &&
                  this.membersPickerView.selectedMemberList.collection.models
                    .length > 0 &&
                  N &&
                  N.get("id") &&
                  N.add &&
                  !N.get("deleted")
                    ? this._wizard.updateButton("Add", { disabled: !1 })
                    : this._wizard.updateButton("Add", { disabled: !0 })),
              this.isCustom)
            ) {
              this._steps[1].view = this._createPermissionLevelSelectorView();
              var Z = this._wizard.getStepViewByStepNumber(1);
              Z.showView(this._steps[1].view), (this.isCustom = !1);
            }
          },
          onPermissionLevelSelection: function () {
            var N = this.getPermissionLevelView();
            if (N.selected === n.PERMISSION_LEVEL_CUSTOM) {
              var W = new k({
                permissions: [],
                readonly: !1,
                showButtons: !1,
                node: this.options.nodeModel,
              });
              (this._steps[1].view = W),
                this._wizard.currentView.showView(this._steps[1].view),
                (this.isCustom = !0),
                W.trigger("adjust:splitbar:separator");
            }
            this._wizard.updateButton("next", { disabled: !1 });
          },
          getMemberPickerView: function () {
            return this._steps[0].view;
          },
          getMemberPickerHeader: function () {
            return this._steps[0].headerView;
          },
          getPermissionLevelView: function () {
            return this._steps[1].view;
          },
          getPermissionsApplyView: function () {
            return this._steps[2].view;
          },
        }),
        q
      );
    }
  ),
  csui.define("csui/controls/table/cells/user/impl/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define(
    "csui/controls/table/cells/user/impl/nls/root/localized.strings",
    {
      publicAccess: "Public Access",
      noOwnerAssigned: "No owner assigned",
      noGroupAssigned: "No group assigned",
      addOwnerOrGroup: "Add owner or owner group",
      ownerAccessTitle: "Owner access",
      ownerAria: "Owner {0}",
      groupOwnerAccessTitle: "Group owner access",
      groupOwnerAria: "Group owner {0}",
      roleAccessTitle: "Role access",
      roleAria: "Role {0}",
      groupAccessTile: "Group access",
      groupAria: "Group {0}",
      userAria: "User {0}",
      addButtonLabel: "Add",
      cancelButtonLabel: "Cancel",
      ApplyButtonLabel: "Apply",
      addButtonTooltip: "Add member to group",
      cancelButtonTooltip: "Close dialog",
      addOwner: "Add Owner",
      addOwnerGroup: "Add Owner Group ",
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/user/impl/user",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `  <div class="csui-profileimg binf-pull-left">
    <span class="csui-icon-paceholder csui-icon icon_permmision_public"
          title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "publicAccessLabel") ||
                  (e != null ? s(e, "publicAccessLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "publicAccessLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 17 },
                      end: { line: 5, column: 38 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "publicAccessLabel") ||
                  (e != null ? s(e, "publicAccessLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "publicAccessLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 52 },
                      end: { line: 5, column: 73 },
                    },
                  })
                : n)
            ) +
            `"></span>
  </div>
  <div class="member-info` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "disabled") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 25 },
                  end: { line: 7, column: 62 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
    <div class="">
      <span class="csui-user-display-name csui-public">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "publicAccessLabel") ||
                  (e != null ? s(e, "publicAccessLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "publicAccessLabel",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 55 },
                      end: { line: 9, column: 76 },
                    },
                  })
                : n)
            ) +
            `</span>
    </div>
  </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          return " binf-disabled";
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "showProfileImg") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 13, column: 2 },
                  end: { line: 26, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="member-info">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "addOwnerOrGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(22, r, 0),
                inverse: i.program(24, r, 0),
                loc: {
                  start: { line: 28, column: 4 },
                  end: { line: 38, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
`
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '    <div class="csui-profileimg' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "disabled") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 14, column: 31 },
                  end: { line: 14, column: 68 },
                },
              }
            )) != null
              ? t
              : "") +
            ` binf-pull-left">
    <span class="csui-icon ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isOwner") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(6, r, 0),
                inverse: i.program(8, r, 0),
                loc: {
                  start: { line: 15, column: 27 },
                  end: { line: 18, column: 69 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 78 },
                      end: { line: 18, column: 87 },
                    },
                  })
                : n)
            ) +
            `">
          ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isUser") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(16, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 19, column: 10 },
                  end: { line: 19, column: 43 },
                },
              }
            )) != null
              ? t
              : "") +
            `</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isOwner") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(18, r, 0),
                inverse: i.program(20, r, 0),
                loc: {
                  start: { line: 20, column: 6 },
                  end: { line: 24, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        6: function (i, e, l, u, r) {
          return " icon_permmision_owner ";
        },
        8: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `
      ` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isOwnerGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.program(11, r, 0),
                loc: {
                  start: { line: 16, column: 6 },
                  end: { line: 18, column: 62 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        9: function (i, e, l, u, r) {
          return " icon_permmision_owner_group ";
        },
        11: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ` csui-icon-paceholder
      ` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(12, r, 0),
                inverse: i.program(14, r, 0),
                loc: {
                  start: { line: 17, column: 6 },
                  end: { line: 18, column: 55 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        12: function (i, e, l, u, r) {
          return ` image_group_placeholder_permission
      `;
        },
        14: function (i, e, l, u, r) {
          return " image_user_placeholder_permission";
        },
        16: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t = n(l, "initials") || (e != null ? n(e, "initials") : e)) !=
              null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "initials",
                  hash: {},
                  loc: {
                    start: { line: 19, column: 24 },
                    end: { line: 19, column: 36 },
                  },
                })
              : t)
          );
        },
        18: function (i, e, l, u, r) {
          return "";
        },
        20: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '        <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" src="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "usrImgSrc") || (e != null ? n(e, "usrImgSrc") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "usrImgSrc",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 79 },
                      end: { line: 22, column: 92 },
                    },
                  })
                : t)
            ) +
            `"
             alt="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 18 },
                      end: { line: 23, column: 26 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 35 },
                      end: { line: 23, column: 43 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "userTypeAria") ||
                  (e != null ? n(e, "userTypeAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "userTypeAria",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 57 },
                      end: { line: 23, column: 73 },
                    },
                  })
                : t)
            ) +
            `">
`
          );
        },
        22: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <div class="csui-add-owner-or-group">
        <span class="csui-user-display-name binf-disabled">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 30, column: 59 },
                      end: { line: 30, column: 67 },
                    },
                  })
                : t)
            ) +
            `</span>
        <span class="csui-icon"></span>
      </div>
`
          );
        },
        24: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `      <div class="">
        <span class="csui-user-display-name` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "disabled") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 35, column: 43 },
                  end: { line: 35, column: 80 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
              aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "userTypeAria") ||
                  (e != null ? s(e, "userTypeAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "userTypeAria",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 26 },
                      end: { line: 36, column: 42 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 44 },
                      end: { line: 36, column: 52 },
                    },
                  })
                : n)
            ) +
            `</span>
      </div>
`
          );
        },
        26: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isOwnerOrOwnerGroup") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(27, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 42, column: 2 },
                  end: { line: 44, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "addOwnerOrGroup") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(29, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 45, column: 2 },
                  end: { line: 47, column: 13 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        27: function (i, e, l, u, r) {
          return `    <div class="csui-inline-owner-change"></div>
`;
        },
        29: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "inlineToolBarPlaceholderClass") ||
                  (e != null ? n(e, "inlineToolBarPlaceholderClass") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "inlineToolBarPlaceholderClass",
                    hash: {},
                    loc: {
                      start: { line: 46, column: 16 },
                      end: { line: 46, column: 49 },
                    },
                  })
                : t)
            ) +
            ` binf-hidden"></div>
`
          );
        },
        31: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-selected-user-ingroup">
    <span class="icon icon-toolbar-more"></span>
    <span class="csui-selected-username">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "selectedUsername") ||
                  (e != null ? n(e, "selectedUsername") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "selectedUsername",
                    hash: {},
                    loc: {
                      start: { line: 53, column: 41 },
                      end: { line: 53, column: 61 },
                    },
                  })
                : t)
            ) +
            `</span>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-user-container">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isPublicPermission") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 2, column: 0 },
                  end: { line: 40, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "includeInlineToolBarPlaceholder") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(26, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 41, column: 0 },
                  end: { line: 48, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "selectedUsername") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(31, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 50, column: 0 },
                  end: { line: 55, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_user_impl_user", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/user/user.view",
    [
      "module",
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/utils/url",
      "csui/dialogs/members.picker/members.picker.wizard",
      "csui/utils/contexts/factories/connector",
      "csui/utils/user.avatar.color",
      "csui/utils/commonconfig.util",
      "i18n!csui/controls/table/cells/user/impl/nls/localized.strings",
      "hbs!csui/controls/table/cells/user/impl/user",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g) {
      var w = v.config();
      h.defaults(w, { enableRemoveMember: m.enableFeatureInSmartView() || !1 });
      var b = l.extend(
        {
          template: g,
          ui: {
            personalizedImage: ".csui-icon-user",
            defaultImage: ".csui-icon-paceholder",
            userDisplayName: ".csui-user-display-name",
            addOwnerOrGroup: ".csui-add-owner-or-group",
            addOwnerOrGroupIcon: ".csui-add-owner-or-group .icon-edit",
            userPlaceHolder: ".image_user_placeholder_permission",
          },
          events: function () {
            var C = r.isTouchBrowser()
              ? { "click @ui.addOwnerOrGroup": "addOwnerOrGroupIconClicked" }
              : {
                  "mouseover @ui.personalizedImage": "showMiniProfilePopup",
                  "mouseover @ui.defaultImage": "showMiniProfilePopup",
                  "mouseover @ui.userDisplayName": "showMiniProfilePopup",
                  "mouseover @ui.addOwnerOrGroup": "showAddOwnerOrGroupIcon",
                  "mouseleave @ui.personalizedImage": "removeUnderline",
                  "mouseleave @ui.defaultImage": "removeUnderline",
                  "mouseleave @ui.userDisplayName": "removeUnderline",
                  "mouseleave @ui.addOwnerOrGroup": "removeAddOwnerOrGroupIcon",
                  "click @ui.addOwnerOrGroupIcon": "addOwnerOrGroupIconClicked",
                  keydown: "onKeyInView",
                };
            return (
              h.extend(C, {
                "click @ui.userDisplayName": "showUserProfileDialog",
                "click @ui.personalizedImage": "showUserProfileDialog",
                "click @ui.defaultImage": "showUserProfileDialog",
              }),
              C
            );
          },
          getValueData: function () {
            var C = this.prepareUserType(),
              k = this.model.get("right_id_expand"),
              y = k && k.type,
              S = C === "owner",
              P = C === "group",
              F = !S && !P && y === 0,
              D = C === "custom" && y === 1,
              L = C === "custom" && y === 848,
              Q = this.getDisplayName(),
              q = S
                ? f.ownerAccessTitle
                : P
                ? f.groupOwnerAccessTitle
                : L
                ? f.roleAccessTitle
                : D
                ? f.groupAccessTile
                : F
                ? Q
                : "public",
              G = S
                ? f.ownerAria
                : P
                ? f.groupOwnerAria
                : L
                ? f.roleAria
                : D
                ? f.groupAria
                : F
                ? f.userAria
                : "public",
              N = h.str.sformat(G, Q);
            return {
              includeInlineToolBarPlaceholder:
                this.options.includeInlineToolBarPlaceholder,
              inlineToolBarPlaceholderClass:
                this.options.inlineToolBarPlaceholderClass,
              name: Q,
              disabled: this.hasPermissions(),
              showProfileImg: !this.options.showOnlyUserName,
              isPublicPermission: C === "public",
              publicAccessLabel: f.publicAccess,
              isOwner: S,
              userTypeAria: N,
              isOwnerGroup: P,
              isOwnerOrOwnerGroup: S || P,
              initials: k ? k.initials : "",
              isUser: F,
              title: q,
              isGroup: D,
              addOwnerOrGroup: this.addOwnerOrGroup,
              usrImgSrc:
                "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
              selectedUsername:
                this.model.selectedUser && this.model.selectedUser.get("name"),
            };
          },
          constructor: function C(k) {
            C.__super__.constructor.apply(this, arguments);
            var y = this.options.column.attributes;
            (this.options.connector = this.options.context.getModel(o)),
              this.options.includeInlineToolBarPlaceholder === void 0 &&
                (this.options.includeInlineToolBarPlaceholder =
                  y && y.containsInlineActions),
              this.options.inlineToolBarPlaceholderClass ||
                (this.options.inlineToolBarPlaceholderClass =
                  "csui-inlinetoolbar"),
              (this.noOwnerOrGroup =
                this.model.get("type") === "owner" && this.hasPermissions()),
              this.noOwnerOrGroup &&
                ((this.commands = t),
                (this.addOwnerOrGroupCommand = this.commands.findWhere({
                  signature: "addownerorgroup",
                })),
                (this.status = {
                  context: this.options.context,
                  permissionCollection: this.model.collection,
                  connector: this.options.connector,
                  applyTo: this.options.applyTo,
                  nodeId: this.model.collection.options.nodeId,
                  nodeModel: this.model.collection.options.node,
                  originatingView: this.options.originatingView,
                  authUser: this.options.originatingView.options.authUser,
                }),
                (this.addOwnerOrGroup =
                  this.noOwnerOrGroup &&
                  this.addOwnerOrGroupCommand &&
                  this.addOwnerOrGroupCommand.enabled(this.status))),
              this.listenTo(this, "render", this._assignUserColor);
          },
          onRender: function () {
            var C = this.model.get("right_id_expand");
            C
              ? ((this.isGroup = C.type === 1), (this.userId = C.id))
              : ((this.isGroup = !0), (this.userId = -1));
            var k = this.options.showOnlyUserName,
              y =
                this.model.get("type") === "owner" ||
                this.model.get("type") === "group";
            !k && !y && this._displayProfileImage();
          },
          onDestroy: function () {
            this._releasePhotoUrl();
          },
          prepareUserType: function () {
            return !!this.model && this.model.get("type");
          },
          hasPermissions: function () {
            var C = !1;
            return this.model.get("permissions") || (C = !0), C;
          },
          getDisplayName: function () {
            var C,
              k = this.options.authUser.get("privilege_system_admin_rights");
            return (
              this.model.get("right_id_expand")
                ? (C = r.formatMemberName(this.model.get("right_id_expand")))
                : this.model.get("type") === "owner" && this.hasPermissions()
                ? k && this.addOwnerOrGroup
                  ? (C = f.addOwnerOrGroup)
                  : !k && this.addOwnerOrGroup
                  ? w && w.AdminRestoreOwner && w.AdminRestoreOwnerGroup
                    ? (C = f.noOwnerAssigned)
                    : w && w.AdminRestoreOwner
                    ? (C = f.addOwnerGroup)
                    : w && w.AdminRestoreOwnerGroup
                    ? (C = f.addOwner)
                    : (C = f.addOwnerOrGroup)
                  : (C = f.noOwnerAssigned)
                : this.model.get("type") === "group" &&
                  this.hasPermissions() &&
                  (C = f.noGroupAssigned),
              C
            );
          },
          _displayProfileImage: function () {
            var C = this._getUserPhotoUrl();
            if (
              (this.ui.personalizedImage.addClass(
                "esoc-userprofile-img-" + this.userId
              ),
              this.ui.defaultImage.addClass(
                "esoc-user-default-avatar-" + this.userId
              ),
              C)
            ) {
              var k = { url: C, dataType: "binary" };
              this._releasePhotoUrl(),
                this.options.connector.makeAjaxCall(k).always(
                  h.bind(function (y, S, P) {
                    P.status === 200
                      ? this._showPersonalizedImage(y)
                      : this._showDefaultImage();
                  }, this)
                );
            } else this._showDefaultImage();
          },
          _getUserPhotoUrl: function () {
            var C = this.options.connector.connection,
              k = new n(C.url).getCgiScript(),
              y = this.model.get("right_id_expand")
                ? this.model.get("right_id_expand").photo_url
                : null;
            if (y && y.indexOf("?") > 0) return n.combine(k, y);
          },
          _showPersonalizedImage: function (C) {
            this._releasePhotoUrl(),
              (this._photoUrl = URL.createObjectURL(C)),
              typeof this.ui.personalizedImage == "object" &&
                (this.ui.personalizedImage.attr("src", this._photoUrl),
                this.ui.personalizedImage.removeClass("binf-hidden")),
              typeof this.ui.defaultImage == "object" &&
                this.ui.defaultImage.addClass("binf-hidden");
          },
          _showDefaultImage: function (C) {
            this._releasePhotoUrl(),
              typeof this.ui.personalizedImage == "object" &&
                this.ui.personalizedImage.addClass("binf-hidden"),
              typeof this.ui.defaultImage == "object" &&
                this.ui.defaultImage.removeClass("binf-hidden");
          },
          showAddOwnerOrGroupIcon: function () {
            this.addOwnerOrGroupCommand &&
              this.addOwnerOrGroupCommand.enabled(this.status) &&
              this.ui.addOwnerOrGroup.find(".csui-icon").addClass("icon-edit");
          },
          removeAddOwnerOrGroupIcon: function () {
            this.ui.addOwnerOrGroup.find(".csui-icon").removeClass("icon-edit");
          },
          addOwnerOrGroupIconClicked: function () {
            var C = this;
            this.addOwnerOrGroupCommand &&
              this.addOwnerOrGroupCommand.enabled(this.status) &&
              this.addOwnerOrGroupCommand.execute(this.status).done(
                h.bind(function (k) {
                  if (k.get("addOwnerGroup")) {
                    var y = C.options.updateModelSilent
                      ? C.options.updateModelSilent
                      : !1;
                    C.model &&
                      C.model.collection &&
                      C.model.collection.addOwnerOrGroup(k, y);
                  }
                })
              );
          },
          _releasePhotoUrl: function () {
            this._photoUrl &&
              (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
          },
          removeUnderline: function (C) {
            this.isGroup ||
              this.userId === -3 ||
              (this.ui.personalizedImage.removeClass("cs-user-photo-hover"),
              this.ui.defaultImage.removeClass("cs-user-photo-hover"),
              this.ui.userDisplayName
                .removeClass("cs-user-container-hover")
                .addClass("cs-user-container-no-hover"));
          },
          onKeyInView: function (C) {
            (C.keyCode === 32 || C.keyCode === 13) &&
              this.showUserProfileDialog(C);
          },
          showUserProfileDialog: function (C) {
            if (!(this.userId < 0))
              if (this.isGroup) {
                var k = this,
                  y = new s({
                    context: k.options.context,
                    connector: k.options.connector,
                    groupId: k.model.attributes.right_id,
                    edit_permission:
                      k.options.hasEditPermissionAction ||
                      k.options.column.attributes.containsInlineActions,
                    dialogClass: "cs-permission-group-picker",
                    startLocations: ["current.group"],
                    authUser: k.options.originatingView.user,
                    selectedGroup: k.model,
                    node:
                      k.options.originatingView &&
                      k.options.originatingView.model,
                    displayName: r.formatMemberName(
                      this.model.get("right_id_expand")
                    ),
                    unselectableTypes: [0, 1],
                    add: !0,
                    buttons: [
                      {
                        id: "Add",
                        label: f.addButtonLabel,
                        default: !0,
                        hidden: !0,
                        disabled: !0,
                        toolTip: f.addButtonTooltip,
                      },
                      {
                        id: "Apply",
                        label: f.ApplyButtonLabel,
                        default: !0,
                        hidden: !w.enableRemoveMember,
                        disabled: !0,
                        apply: !0,
                      },
                      {
                        id: "Cancel",
                        label: f.cancelButtonLabel,
                        disabled: !1,
                        close: !0,
                        toolTip: f.cancelButtonTooltip,
                      },
                    ],
                  }),
                  S = this;
                y.show()
                  .always(function () {
                    S.$el.trigger("focus");
                  })
                  .done();
                return;
              } else
                C.preventDefault(),
                  C.stopPropagation(),
                  this.userWidgetView
                    ? ((this.dialogOpen = !0),
                      this.ui.personalizedImage.addClass("cs-user-photo-hover"),
                      this.ui.defaultImage.addClass("cs-user-photo-hover"),
                      this.ui.userDisplayName
                        .removeClass("cs-user-container-no-hover")
                        .addClass("cs-user-container-hover"),
                      a(".popover.esoc-mini-profile-popover").hide(),
                      this.userWidgetView.showUserProfileDialog(C))
                    : this.setUserWidget("showUserProfileDialog", C);
          },
          showMiniProfilePopup: function (C) {
            this.isGroup ||
              this.userId === -3 ||
              (this.userWidgetView
                ? (this.ui.personalizedImage.addClass("cs-user-photo-hover"),
                  this.ui.defaultImage.addClass("cs-user-photo-hover"),
                  this.ui.userDisplayName
                    .removeClass("cs-user-container-no-hover")
                    .addClass("cs-user-container-hover"),
                  this.userWidgetView.showMiniProfilePopup(C))
                : this.setUserWidget("showMiniProfilePopup", C));
          },
          setUserWidget: function (C, k) {
            var y = this;
            csui.require(
              ["esoc/controls/userwidget/userwidget.view"],
              function (S) {
                (y.userWidgetView = new S({
                  userid: y.userId,
                  context: y.options.context,
                  baseElement: y.ui.userDisplayName,
                  showUserProfileLink: !0,
                  showMiniProfile: !0,
                  loggedUserId: y.userId,
                  connector: y.options.connector,
                })),
                  y[C](k);
              }
            );
          },
          _assignUserColor: function () {
            var C = this.model.get("right_id_expand"),
              k = c.getUserAvatarColor(C);
            this.ui.userPlaceHolder.css("background", k);
          },
        },
        { hasFixedWidth: !1, widthFactor: 2 }
      );
      return u.registerByColumnKey("right_id", b), b;
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<h4 class="binf-modal-title">
  <span class="icon icon-notification-information"></span>
  <span class="title-text csui-apply-permission-header-title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 69 },
                      end: { line: 3, column: 78 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 80 },
                      end: { line: 3, column: 89 },
                    },
                  })
                : t)
            ) +
            `</span>
</h4>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_edit_apply.permission_impl_header_apply.permission.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header",
      "i18n!csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang",
      "css!csui/widgets/permissions/impl/permissions",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.ItemView.extend({
        template: h,
        templateHelpers: function () {
          var l = "";
          if (this.options.removePermission) {
            var u =
              this.options.permissionModel &&
              this.options.permissionModel.get("right_id_expand") &&
              this.options.permissionModel.get("right_id_expand")
                .name_formatted;
            (u =
              this.options.permissionModel &&
              this.options.permissionModel.get("type") === "public"
                ? i.publicAccess
                : u),
              (l = v.str.sformat(i.removePermissionHeaderTitle, u));
          } else
            this.options.restorePublicAccess
              ? (l = i.restorePublicAccessHeaderTitle)
              : (l = i.applyPermissionHeaderTitle);
          return { title: l };
        },
        constructor: function (u) {
          u || (u = {}),
            a.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/widgets/permissions/edit/edit.permission.helper",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/dialog/dialog.view",
      "i18n",
      "csui/models/permission/nodepermission.model",
      "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",
      "csui/widgets/permissions/edit/permission.attributes/permission.attributes.view",
      "csui/widgets/permissions/edit/apply.permission/apply.permission.view",
      "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/permissions/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = a.Object.extend({
        constructor: function (f) {
          a.Object.prototype.constructor.apply(this, arguments);
        },
        initialize: function (m) {
          this.uniqueViewId = "view" + v.uniqueId();
        },
        _showSelectPermissionLevelPopover: function () {
          this.permissionLevelSelectorView &&
            this.permissionLevelSelectorView.destroy(),
            (this.permissionLevelSelectorView = new u({
              permissionModel: this.options.permissionModel,
              nodeModel: this.options.originatingView.model,
            })),
            this.permissionLevelSelectorView.render(),
            this.listenTo(
              this.permissionLevelSelectorView,
              "permission:level:selected",
              this._permissionLevelSelected
            ),
            (this.currentPopoverView = this.permissionLevelSelectorView),
            (this.popoverContainerClassname = ""),
            this.showPopover();
        },
        showCustomPermissionPopover: function () {
          this.permissionAttributesView &&
            this.permissionAttributesView.destroy(),
            (this.permissionAttributesView = new r({
              model: this.options.permissionModel,
              readonly: this.options.readonly,
              node:
                this.options.originatingView &&
                this.options.originatingView.model,
            })),
            this.permissionAttributesView.render(),
            this.listenTo(
              this.permissionAttributesView,
              "permission:attribute:save:clicked",
              this.permissionAttributesSelected
            ),
            this.listenTo(
              this.permissionAttributesView,
              "permission:attribute:cancel:clicked",
              this.closePopover
            ),
            (this.currentPopoverView = this.permissionAttributesView),
            (this.popoverContainerClassname =
              "csui-permission-attribute-popover-container "),
            this.showPopover();
        },
        _permissionLevelSelected: function () {
          this._blockActions();
          var m = this.permissionLevelSelectorView.selected,
            f = this.options.nodeModel || this.options.originatingView.model,
            g = f.get("advancedVersioningEnabled");
          m !== l.PERMISSION_LEVEL_CUSTOM
            ? (this.showingPopover && this.closePopover(!0),
              (this.permissions = l.getPermissionsByLevelExceptCustom(
                m,
                this.options.originatingView
                  ? this.options.originatingView.model.get("container")
                  : !0,
                this.options.originatingView &&
                  this.options.originatingView.model.get("advanced_versioning"),
                !!g
              )),
              this.options.originatingView &&
              this.options.originatingView.model &&
              this.options.originatingView.model.get("container") &&
              this.options.originatingView.model.get("permissions_model") ===
                "advanced"
                ? ((this._applyDialog = this.showApplyPermissionDialog()),
                  this._applyDialog.show())
                : this.triggerMethod("permissions:selected", {
                    permissions: this.permissions,
                  }))
            : this.showCustomPermissionPopover(),
            this.unblockActions();
        },
        showApplyPermissionDialog: function () {
          var m = new n();
          this._view = new t({
            context:
              this.options.context || this.options.originatingView.context,
            model: this.options.nodeModel || this.options.originatingView.model,
            applyTo: this.options.applyTo,
            permissionModel: this.options.permissionModel,
          });
          var f = new i({
            headerView: m,
            view: this._view,
            className: "csui-permissions-apply-dialog",
            midSize: !0,
            buttons: [
              {
                id: "apply",
                label: o.applyButtonLabel,
                toolTip: o.applyButtonLabel,
                default: !0,
                click: v.bind(this.onClickApplyButton, this),
              },
              {
                label: o.cancelButtonLabel,
                toolTip: o.cancelButtonLabel,
                close: !0,
              },
            ],
          });
          return (
            f.listenTo(f, "hide", v.bind(this.onHideDialog, this)),
            s.imbue(f),
            f
          );
        },
        onClickApplyButton: function (m) {
          var f = m.dialog.$el
              .find(".csui-subtypes-option:checked")
              .map(function () {
                return this.value;
              })
              .toArray(),
            g = m.dialog.options.view.model.get("container"),
            w =
              m.dialog.options.view.options.permissionModel &&
              m.dialog.options.view.options.permissionModel.get("right_id"),
            b = m.dialog.options.view.model.get("permissions_model"),
            C =
              g && b === "advanced" && m.dialog.options.view.subFolderSelected
                ? 2
                : g && b === "advanced"
                ? 3
                : 0,
            k = this.triggerMethod("permissions:selected", {
              permissions: this.permissions,
              apply_to: C,
              right_id: w,
              include_sub_types: f,
            });
          this._applyDialog.destroy(), this._blockActions();
        },
        onHideDialog: function () {
          var m = this.options.originatingView;
          this.unblockActions(), m && m.trigger("unblock:view:actions");
        },
        _blockActions: function () {
          var m = this.options.originatingView;
          m && m.blockActions && m.blockActions();
        },
        _unblockActions: function () {
          var m = this.options.originatingView;
          m && m.unblockActions && m.unblockActions();
        },
        unblockActions: function () {
          this._unblockActions();
        },
        permissionAttributesSelected: function (m) {
          (this.permissions = m), this.showingPopover && this.closePopover(!0);
          var f = this.options.nodeModel
            ? this.options.nodeModel
            : this.options.originatingView &&
              this.options.originatingView.model;
          f.get("container")
            ? ((this._applyDialog = this.showApplyPermissionDialog()),
              this._applyDialog.show())
            : this.triggerMethod("permissions:selected", {
                permissions: this.permissions,
              });
        },
        showPopover: function () {
          var m = this.options.popoverPlacement,
            f = !1;
          e &&
            e.settings.rtl &&
            ((m = m === "left" ? "right" : "left"), (f = !0));
          var g = {
            html: !0,
            content: v.bind(function () {
              return this.currentPopoverView.el;
            }, this),
            trigger: "manual",
            placement: m,
          };
          this.options.popoverAtBodyElement &&
            ((this.popoverContainerClassname +=
              "csui-edit-permission-popover-container " + this.uniqueViewId),
            (this.popoverContainerSelector =
              ".csui-edit-permission-popover-container." + this.uniqueViewId),
            this.$popoverEl
              ? this._getPopoverParent().addClass(
                  this.popoverContainerClassname
                )
              : d("body").append(
                  '<div class="binf-widgets ' +
                    this.popoverContainerClassname +
                    '"></div>'
                ),
            (g = v.extend(g, { container: this.popoverContainerSelector }))),
            (this.$popoverEl = this.options.popoverTargetElement),
            this.$popoverEl.binf_popover(g).binf_popover("show");
          var w = this._getPopoverParent().find(".binf-popover"),
            b = w.find(".csui-permission-attribute-tree"),
            C;
          b.length &&
            this.permissionAttributesView.trigger("adjust:splitbar:separator"),
            e && e.settings.rtl
              ? (C =
                  parseInt(w.css("left")) + w.find(".binf-arrow").outerWidth())
              : (C =
                  parseInt(w.css("left")) - w.find(".binf-arrow").outerWidth()),
            w.css("left", C),
            this.$popoverEl.on(
              "shown.binf.popover",
              v.bind(function (k) {
                this.currentPopoverView &&
                  this.currentPopoverView.currentlyFocusedElement &&
                  this.currentPopoverView
                    .currentlyFocusedElement()
                    .trigger("focus"),
                  d(document).on(
                    "mousedown." + this.uniqueViewId,
                    { view: this },
                    this._handleClickEvent
                  ),
                  d(window).on(
                    "resize." + this.uniqueViewId,
                    { view: this },
                    this._onWindowResize
                  ),
                  this.options.popoverAtBodyElement &&
                    (d(document).on(
                      "scroll",
                      { view: this },
                      this._handleScrollEvent
                    ),
                    this.options.originatingView &&
                      this.listenToOnce(
                        this.options.originatingView,
                        "scroll",
                        function (y) {
                          (y.data = { view: this }), this._handleScrollEvent(y);
                        }
                      )),
                  d("body").on(
                    "keydown." + this.uniqueViewId,
                    { view: this },
                    this._handleKeyEvents
                  ),
                  this.triggerMethod("shown:permission:level:popover");
              }, this)
            ),
            this.$popoverEl.on(
              "hidden.binf.popover",
              v.bind(function (k) {
                this.$popoverEl.trigger("focus"),
                  this.currentPopoverView && this.currentPopoverView.destroy(),
                  (this.currentPopoverView = void 0),
                  this.options.popoverAtBodyElement &&
                    d(this.popoverContainerSelector).remove();
              }, this)
            ),
            d(this.popoverContainerSelector)
              .find("h3.binf-popover-title")
              .html(o.edit_permissions),
            (this.showingPopover = !0);
        },
        _onWindowResize: function (m) {
          if (m && m.data && m.data.view) {
            var f = m.data.view;
            f.showingPopover && f.closePopover();
          }
        },
        _handleKeyEvents: function (m) {
          if (m && m.data && m.data.view) {
            var f = m.data.view;
            ((f.getOption("readonly") &&
              (m.keyCode === 9 || m.keyCode === 13)) ||
              m.keyCode === 27) &&
              f.showingPopover &&
              f.closePopover();
          }
        },
        _handleClickEvent: function (m) {
          if (!d(m.target).closest(".binf-popover").length) {
            var f;
            m &&
              m.data &&
              m.data.view &&
              ((f = m.data.view),
              d(document).off(
                "mousedown." + this.uniqueViewId,
                f._handleClickEvent
              )),
              f && f.closePopover(),
              f._unblockActions();
          }
        },
        _handleScrollEvent: function (m) {
          if (!d(m.target).closest(".binf-popover").length) {
            var f;
            m &&
              m.data &&
              m.data.view &&
              ((f = m.data.view),
              d(document).off("scroll", f._handleScrollEvent)),
              f.currentPopoverView && f && f.closePopover(),
              f._unblockActions();
          }
        },
        closePopover: function (m) {
          this.$popoverEl &&
            this.$popoverEl.data("binf.popover") &&
            (d(document).off(
              "mousedown." + this.uniqueViewId,
              this._handleClickEvent
            ),
            d(document).off("scroll", this._handleScrollEvent),
            d(window).off("resize." + this.uniqueViewId, this._onWindowResize),
            this.currentPopoverView &&
              this.currentPopoverView.$el.off("keydown", this._handleKeyEvents),
            this.$popoverEl.binf_popover("destroy"),
            (this.showingPopover = !1),
            m || this.triggerMethod("closed:permission:level:popover"),
            this.$popoverEl.trigger("focus"));
        },
        _getPopoverParent: function () {
          return this.options.popoverAtBodyElement
            ? d(this.popoverContainerSelector)
            : this.$popoverEl.parent();
        },
        onBeforeDestroy: function () {
          this.closePopover(!0);
        },
      });
      return c;
    }
  ),
  csui.define(
    "csui/controls/table/cells/permission/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/table/cells/permission/impl/nls/root/localized.strings",
    {
      FullControl: "Full control",
      Write: "Write",
      Read: "Read",
      Custom: "Custom",
      None: "None",
      see: "See",
      see_contents: "See contents",
      modify: "Modify",
      edit_attributes: "Edit attributes",
      add_items: "Add items",
      reserve: "Reserve",
      delete_versions: "Delete version",
      delete: "Delete",
      permissionfor: "{0} Permission for {1}",
      publicaccess: "Public Access",
      edit_permissions: "Edit permissions",
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/permission/impl/permission.level",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-permission-level-container csui-fadeout">
    <span class="csui-permission-level" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "permissionLevelAria") ||
                  (e != null ? n(e, "permissionLevelAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "permissionLevelAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 52 },
                      end: { line: 3, column: 75 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 77 },
                      end: { line: 3, column: 86 },
                    },
                  })
                : t)
            ) +
            `</span>
    <div class="csui-tree"></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "value") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 6, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_permission_impl_permission.level",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/permission/permission.level.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/widgets/permissions/edit/edit.permission.helper",
      "csui/utils/commandhelper",
      "csui/utils/commands",
      "i18n!csui/controls/table/cells/permission/impl/nls/localized.strings",
      "hbs!csui/controls/table/cells/permission/impl/permission.level",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = i.extend(
        {
          template: n,
          ui: {
            permissionLevel: ".csui-permission-level",
            permissionTree: ".csui-tree",
          },
          events: {
            "click @ui.permissionLevel": "onClickPermissionLevel",
            keydown: "onKeyInView",
          },
          onKeyInView: function (o) {
            (o.keyCode === 32 || o.keyCode === 13) &&
              this.$el.find(".csui-permission-level").trigger("click");
          },
          getValueData: function () {
            var o = this.model.get("permissions"),
              c = this.model.getPermissionLevel(o),
              m;
            return (
              this.model.get("type") === "public"
                ? (m = t.publicaccess)
                : (m =
                    this.model && this.model.get("right_id_expand")
                      ? this.model.get("right_id_expand").name
                      : ""),
              c === null
                ? i.prototype.getValueData.apply(this, arguments)
                : ((c = this.getPermissionLevel(c)),
                  {
                    value: c,
                    permissionLevelAria: d.str.sformat(t.permissionfor, c, m),
                    formattedValue: c,
                  })
            );
          },
          getPermissionLevel: function (o) {
            var c = null;
            switch (o) {
              case 0:
                c = t.None;
                break;
              case 1:
                c = t.Read;
                break;
              case 2:
                c = t.Write;
                break;
              case 3:
                c = t.FullControl;
                break;
              case 4:
                c = t.Custom;
                break;
            }
            return c;
          },
          constructor: function o(c) {
            o.__super__.constructor.apply(this, arguments), (this.$ = v);
          },
          onClickPermissionLevel: function (o) {
            var c = [0, 1];
            c.indexOf(
              this.options.model.get("right_id_expand") &&
                this.options.model.get("right_id_expand").type
            ) < 0 && this.options.model.get("type") === "custom"
              ? this._handlePermissionLevelFocus({ cellView: this })
              : (this._handlePermissionLevelClicked({ cellView: this }),
                this.trigger("cell:content:clicked", this));
          },
          _handlePermissionLevelClicked: function (o) {
            this._hidePopovers();
            var c = this.options.originatingView,
              m = o.cellView;
            if (!m.$el.data("binf.popover")) {
              var f = o.command ? o.command : r.get("EditPermission"),
                g = {
                  model: m.model,
                  targetView: { permissions: m },
                  originatingView: this.options.originatingView,
                  applyTo: c && c.options.applyTo,
                  authUser: this.options.authUser,
                  admin_permissions:
                    this.options.hasEditPermissionAction &&
                    this.options.originatingView.model.get(
                      "permissions_model"
                    ) !== "simple",
                },
                w = m.$el.closest(".csui-table-row");
              if (
                (w.addClass("active-row"),
                c && c.trigger("block:view:actions"),
                f.enabled(g))
              ) {
                var b = f.execute(g);
                u.handleExecutionResults(b, {
                  command: f,
                  suppressSuccessMessage: g.suppressSuccessMessage,
                  suppressFailMessage: g.suppressFailMessage,
                })
                  .done(function (k) {
                    f.allowCollectionRefetch &&
                      c.collection.totalCount > c.collection.topCount &&
                      c &&
                      c.collection.fetch();
                  })
                  .always(function () {
                    c && c.trigger("unblock:view:actions", m.options),
                      w.removeClass("active-row"),
                      c && c.unblockActions(),
                      m.$el.trigger("focus");
                  });
              } else {
                var C = new l({
                  permissionModel: m.model,
                  popoverPlacement: "left",
                  popoverAtBodyElement:
                    c && c.options.originatingView
                      ? !(c && c.options.originatingView.options.isExpandedView)
                      : !0,
                  popoverTargetElement: m.$el,
                  readonly: !0,
                  originatingView: c,
                });
                C.showCustomPermissionPopover(),
                  C.listenTo(C, "closed:permission:level:popover", function () {
                    C.destroy(),
                      c && c.trigger("unblock:view:actions"),
                      m.$el
                        .closest(".csui-table-row")
                        .removeClass("active-row");
                  });
              }
            }
          },
          _handlePermissionLevelFocus: function (o) {
            this._hidePopovers();
            var c = this.options.originatingView,
              m = o.cellView;
            if (!m.$el.data("binf.popover")) {
              m.$el.closest(".csui-table-row").addClass("active-row"),
                c && c.trigger("block:view:actions");
              var f = new l({
                permissionModel: m.model,
                popoverPlacement: "left",
                popoverAtBodyElement:
                  c && c.options.originatingView
                    ? !(c && c.options.originatingView.options.isExpandedView)
                    : !0,
                popoverTargetElement: m.$el,
                readonly: !0,
                originatingView: c && c,
              });
              f.showCustomPermissionPopover(),
                f.listenTo(f, "closed:permission:level:popover", function () {
                  f.destroy(),
                    c && c.trigger("unblock:view:actions"),
                    m.$el.closest(".csui-table-row").removeClass("active-row"),
                    m.$el.trigger("focus");
                });
            }
          },
          _hidePopovers: function () {
            if (
              this.$el.parents("body") &&
              this.$el
                .parents("body")
                .find(".csui-edit-permission-popover-container .binf-popover")
            ) {
              var o = this.$el
                .parents("body")
                .find(".csui-edit-permission-popover-container .binf-popover");
              o.data("binf.popover") && o.binf_popover("destroy");
            }
          },
        },
        {
          hasFixedWidth: !1,
          columnClassName: "csui-permission-level",
          widthFactor: 1,
        }
      );
      return e.registerByColumnKey("permissions", s), s;
    }
  ),
  csui.define(
    "csui/controls/table/cells/add.permission/add.permission.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "i18n!csui/controls/table/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = i.extend(
        {
          className: "csui-row-inlinetoolbar",
          events: { keydown: "onKeyInView" },
          onKeyInView: function (r) {
            (r.keyCode === 32 || r.keyCode === 13) &&
              document.activeElement === this.el &&
              (this.options.originatingView &&
                this.options.originatingView.trigger(
                  "permission:inlineaction:clicked",
                  { cellView: this }
                ),
              this.$el.find("a.binf-dropdown-toggle").trigger("click"),
              r.preventDefault(),
              r.stopPropagation());
          },
          renderValue: function () {
            var r = d.result(this, "className");
            r && this.$el.addClass(r),
              this.$el.attr({
                "aria-label": l.ToolbarItemMore,
                role: "button",
              });
          },
          _onWindowResize: function () {
            this.$el.find(".binf-dropdown.binf-open").length &&
              this.$el.find(".binf-dropdown").removeClass("binf-open");
          },
          constructor: function r(t) {
            r.__super__.constructor.apply(this, arguments),
              (this.windowResizeHandler = d.bind(this._onWindowResize, this)),
              v(window).on("resize", this.windowResizeHandler);
          },
        },
        {
          hasFixedWidth: !0,
          noTitleInHeader: !0,
          isToolbar: !0,
          columnClassName: "csui-add-permission",
          widthFactor: 0.3333333333333333,
        }
      );
      return e.registerByColumnKey("addpermissions", u), u;
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/versionnumber/impl/versionnumber",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/versionnumber/versionnumber.view",
    [
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/cell.registry",
      "csui/utils/base",
      "css!csui/controls/table/cells/versionnumber/impl/versionnumber",
    ],
    function (v, d, a) {
      "use strict";
      var h = v.extend(
        { className: "csui-nowrap", needsAriaLabel: !0 },
        {
          hasFixedWidth: !0,
          columnClassName: "csui-table-cell-version_number_name",
        }
      );
      return d.registerByColumnKey("version_number_name", h), h;
    }
  ),
  csui.define(
    "csui/controls/table/cells/cell.factory",
    [
      "csui/lib/underscore",
      "csui/controls/table/cells/cell.registry",
      "csui/controls/table/cells/search/search.cell/search.cell.view",
      "csui/controls/table/cells/text/text.view",
      "csui/controls/table/cells/name/name.view",
      "csui/controls/table/cells/date/date.view",
      "csui/controls/table/cells/description/description.view",
      "csui/controls/table/cells/search/version/version.view",
      "csui/controls/table/cells/search/location/location.view",
      "csui/controls/table/cells/search/description.cell.view",
      "csui/controls/table/cells/datetime/datetime.view",
      "csui/controls/table/cells/duedate/duedate.view",
      "csui/controls/table/cells/member/member.view",
      "csui/controls/table/cells/node.state/node.state.view",
      "csui/controls/table/cells/parent/parent.view",
      "csui/controls/table/cells/priority/priority.view",
      "csui/controls/table/cells/select/select.view",
      "csui/controls/table/cells/toggledetails/toggledetails.view",
      "csui/controls/table/cells/size/size.view",
      "csui/controls/table/cells/status/status.view",
      "csui/controls/table/cells/favorite/favorite.view",
      "csui/controls/table/cells/favorite/favorite.name.view",
      "csui/controls/table/cells/type.icon/type.icon.view",
      "csui/controls/table/cells/user/user.view",
      "csui/controls/table/cells/permission/permission.level.view",
      "csui/controls/table/cells/add.permission/add.permission.view",
      "csui/controls/table/cells/versionnumber/versionnumber.view",
      "csui-ext!csui/controls/table/cells/cell.factory",
    ],
    function (v, d, a, h, i) {
      function e() {}
      return (
        v.extend(e.prototype, {
          hasCellViewByOtherKey: function (l) {
            return d.hasCellViewByOtherKey(l);
          },
          getCellView: function (l) {
            if (l.get("isNaming") === !0) return i;
            var u = d.getCellView(l);
            return u || (l?.collection?.searchResultsColumns ? a : h);
          },
        }),
        new e()
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/searchbox/searchbox",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <div class="search-box csui-table-searchbox cs-item-picker' +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "show_input") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 60 },
                  end: { line: 2, column: 105 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
         role="combobox" aria-expanded="false" aria-haspopup="listbox">
    <input type="text" class="csui-table-search-input typeahead"
        placeholder="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_placeholder") ||
                  (e != null ? s(e, "search_placeholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_placeholder",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 21 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_input_tooltip") ||
                  (e != null ? s(e, "search_input_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_input_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 52 },
                      end: { line: 5, column: 76 },
                    },
                  })
                : n)
            ) +
            `" aria-autocomplete="list">
    <span class="icon-search-placeholder" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_input_tooltip") ||
                  (e != null ? s(e, "search_input_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_input_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 49 },
                      end: { line: 6, column: 73 },
                    },
                  })
                : n)
            ) +
            '">' +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                theme: e != null ? s(e, "iconTheme") : e,
                size: "contain",
                iconName: "csui_action_search32",
              },
              loc: {
                start: { line: 6, column: 75 },
                end: { line: 7, column: 77 },
              },
            })) != null
              ? t
              : "") +
            `</span>
    <span class="typeahead sbclearer binf-hidden formfield_clear" role="button" aria-expanded="false"
        title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_clear_icon_tooltip") ||
                  (e != null ? s(e, "search_clear_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_clear_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 15 },
                      end: { line: 9, column: 44 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_clear_icon_tooltip") ||
                  (e != null ? s(e, "search_clear_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_clear_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 58 },
                      end: { line: 9, column: 87 },
                    },
                  })
                : n)
            ) +
            `"
        tabindex="0"></span>
  </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          return " binf-hidden";
        },
        4: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <div class="search-box csui-table-searchbox' +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "show_input") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 13, column: 45 },
                  end: { line: 13, column: 90 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
    <span class="icon-search-placeholder" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_input_tooltip") ||
                  (e != null ? s(e, "search_input_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_input_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 49 },
                      end: { line: 14, column: 73 },
                    },
                  })
                : n)
            ) +
            '">' +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                theme: e != null ? s(e, "iconTheme") : e,
                size: "contain",
                iconName: "csui_action_search32",
              },
              loc: {
                start: { line: 14, column: 75 },
                end: { line: 15, column: 75 },
              },
            })) != null
              ? t
              : "") +
            `</span>
    <input type="search" class="csui-table-search-input"
       placeholder="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_placeholder") ||
                  (e != null ? s(e, "search_placeholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_placeholder",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 20 },
                      end: { line: 17, column: 42 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_input_tooltip") ||
                  (e != null ? s(e, "search_input_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_input_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 51 },
                      end: { line: 17, column: 75 },
                    },
                  })
                : n)
            ) +
            '" value="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_value") ||
                  (e != null ? s(e, "search_value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_value",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 84 },
                      end: { line: 17, column: 100 },
                    },
                  })
                : n)
            ) +
            `">
    <span class="fadeout csui-icon" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_input_tooltip") ||
                  (e != null ? s(e, "search_input_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_input_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 43 },
                      end: { line: 18, column: 67 },
                    },
                  })
                : n)
            ) +
            `"></span>
    <span class="sbclearer binf-hidden formfield_clear" role="button" aria-expanded="false"
          title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_clear_icon_tooltip") ||
                  (e != null ? s(e, "search_clear_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_clear_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 20, column: 17 },
                      end: { line: 20, column: 46 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_clear_icon_tooltip") ||
                  (e != null ? s(e, "search_clear_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_clear_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 20, column: 60 },
                      end: { line: 20, column: 89 },
                    },
                  })
                : n)
            ) +
            `"
          tabindex="0"></span>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isTypeAhead") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 23, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `<div class="csui-table-search-icon" role="button" aria-expanded="false"
     aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_icon_tooltip") ||
                  (e != null ? s(e, "search_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 17 },
                      end: { line: 25, column: 40 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "search_icon_tooltip") ||
                  (e != null ? s(e, "search_icon_tooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "search_icon_tooltip",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 49 },
                      end: { line: 25, column: 72 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0">
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table_cells_searchbox_searchbox", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/searchbox/searchbox",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/searchbox/searchbox.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/icon/icon.view",
      "csui/utils/high.contrast/detector!",
      "i18n!csui/controls/table/impl/nls/lang",
      "hbs!csui/controls/table/cells/searchbox/searchbox",
      "css!csui/controls/table/cells/searchbox/searchbox",
    ],
    function (v, d, a, h, i, e, l) {
      var u = a.ItemView.extend({
        className: "csui-table-column-search",
        template: l,
        templateHelpers: function () {
          return {
            isTypeAhead: this.options.isTypeAhead,
            search_value: this.lastFilterValue,
            show_input:
              !this.options.isTypeAhead && this.lastFilterValue !== void 0,
            search_icon_tooltip: d.str.sformat(
              e.searchIconTooltip,
              this.options.columnTitle
            ),
            search_placeholder: d.str.sformat(
              e.searchPlaceholder,
              this.options.columnTitle
            ),
            search_input_tooltip: d.str.sformat(
              e.searchInputTooltip,
              this.options.columnTitle
            ),
            search_clear_icon_tooltip: e.searchClearIconTooltip,
            iconTheme: this.iconTheme,
          };
        },
        ui: {
          itemPicker: "div.cs-item-picker",
          searchBox: ".csui-table-searchbox",
          searchInput: ".csui-table-search-input",
          searchInputFadeout: ".fadeout",
          clearer: ".sbclearer",
          searchGlassContainer: ".csui-table-search-icon",
          searchPlaceholderIcon: ".icon-search-placeholder",
        },
        events: {
          "keyup @ui.searchInput": "filterChanged",
          keydown: "onKeyInView",
          "paste @ui.searchInput": "filterChanged",
          "change @ui.searchInput": "filterChanged",
          "click @ui.searchInput": "_searchFieldInputClicked",
          "click @ui.searchInputFadeout": "_searchFieldInputClicked",
          "click @ui.clearer": "_searchFieldClearerClicked",
          "click @ui.searchGlassContainer": "_searchFieldGlassClicked",
          click: "_searchBoxClicked",
          "click @ui.searchPlaceholderIcon": "setFocusToInput",
        },
        valueChangedEventName: "change:filterValue",
        constructor: function (t, n) {
          (this.options = n || {}),
            a.ItemView.prototype.constructor.apply(this, arguments),
            (this.lastFilterValue = t),
            (this.lastFocused = "I"),
            (this.iconTheme = i === 1 ? "dark" : "light"),
            (this.searchGlassIconView = new h({
              iconName: "csui_action_search32",
              size: "contain",
              theme: this.iconTheme,
            }));
        },
        onRender: function () {
          var r = new a.Region({ el: this.ui.searchGlassContainer });
          r.show(this.searchGlassIconView),
            this.searchGlassIconView.el.setAttribute("aria-hidden", !0),
            this.ui.searchBox.hasClass("binf-hidden") ||
              (this.showClearerIfFilterHasValue(),
              this.triggerMethod("opened"),
              this.triggerMethod("changed:focus", this.lastFocused),
              this.setIconAndState());
        },
        onDestroy: function () {
          this.filterTimeout &&
            (clearTimeout(this.filterTimeout), (this.filterTimeout = void 0));
        },
        onKeyInView: function (r) {
          if (this.getShown()) {
            if (r.keyCode === 27) {
              this.hideAndClear(), this.triggerMethod("changed:focus");
              return;
            }
            switch (
              ((r.keyCode === 13 || r.keyCode === 32) &&
                (v(r.target).hasClass("sbclearer") &&
                  this._searchFieldClearerClicked(r),
                v(r.target).hasClass("csui-table-search-icon") &&
                  this._searchFieldGlassClicked(r)),
              this.lastFocused)
            ) {
              case "I":
                var t = this.ui.searchInput[0].selectionStart,
                  n = this.getValue();
                switch (r.keyCode) {
                  case 13:
                    r.stopPropagation(),
                      r.preventDefault(),
                      n.length > 0 &&
                        this.triggerMethod(this.valueChangedEventName, {
                          column: this.options.column,
                          keywords: n,
                        });
                    break;
                  case 37:
                    t > 0 && r.stopPropagation();
                    break;
                  case 39:
                    n.length > 0 && t < n.length
                      ? r.stopPropagation()
                      : (this._moveFocusRight(),
                        r.stopPropagation(),
                        r.preventDefault());
                    break;
                  case 35:
                    (this.ui.searchInput[0].selectionStart = n.length),
                      (this.ui.searchInput[0].selectionEnd = n.length),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                  case 36:
                    (this.ui.searchInput[0].selectionStart = 0),
                      (this.ui.searchInput[0].selectionEnd = 0),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                }
                break;
              case "C":
                switch (r.keyCode) {
                  case 13:
                  case 32:
                    this._searchFieldClearerClicked(r);
                    break;
                  case 37:
                    (this.lastFocused = "I"),
                      this.triggerMethod("changed:focus", this.lastFocused),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                  case 39:
                    (this.lastFocused = "G"),
                      this.triggerMethod("changed:focus", this.lastFocused),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                }
                break;
              case "G":
                switch (r.keyCode) {
                  case 13:
                  case 32:
                    this.hideAndClear(),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                  case 37:
                    this._moveFocusLeft(),
                      r.stopPropagation(),
                      r.preventDefault();
                    break;
                  case 39:
                    r.preventDefault();
                    break;
                }
                break;
            }
          } else
            (r.keyCode === 13 || r.keyCode === 32) &&
              (r.preventDefault(), r.stopPropagation(), this.showSearchInput());
        },
        currentlyFocusedElement: function () {
          if (this.getShown())
            switch (this.lastFocused) {
              case "I":
                return this.ui.searchInput;
              case "C":
                return this.ui.clearer;
              case "G":
                return this.ui.searchGlassContainer;
              default:
                return v();
            }
          else return this.ui.searchGlassContainer;
        },
        setFocusToInput: function () {
          (this.lastFocused = "I"),
            this.triggerMethod("changed:focus", this.lastFocused),
            this.ui.searchInput[0].focus();
        },
        setFocusToGlass: function () {
          (this.lastFocused = "G"),
            this.triggerMethod("changed:focus", this.lastFocused);
        },
        showSearchInput: function () {
          this.ui.searchBox.removeClass("binf-hidden"),
            this.setIconAndState(),
            this.setFocusToInput(),
            this.triggerMethod("opened");
        },
        setIconAndState: function () {
          (this.showInputField = !0),
            this.$el.addClass("csui-searchbox-shown"),
            this.options.isTypeAhead &&
              this.ui.searchBox.attr(
                "aria-controls",
                this.options.pickerListId
              ),
            this.ui.searchGlassContainer.attr("title", e.collapseSearch),
            this.ui.searchGlassContainer.attr(
              "aria-label",
              e.collapseSearchAria
            ),
            this.ui.searchGlassContainer.attr("aria-expanded", "true"),
            this.options.isTypeAhead &&
              this.ui.itemPicker.attr("aria-expanded", "true"),
            this.searchGlassIconView.setIcon("csui_action_close32");
        },
        hideAndClear: function (r) {
          (this.showInputField = !1),
            this.ui.searchBox
              .addClass("binf-hidden")
              .removeAttr("aria-controls"),
            this.$el.removeClass("csui-searchbox-shown"),
            this.ui.searchGlassContainer.attr(
              "title",
              this.templateHelpers().search_icon_tooltip
            ),
            this.ui.searchGlassContainer.attr(
              "aria-label",
              this.templateHelpers().search_icon_tooltip
            ),
            this.ui.searchGlassContainer.attr("aria-expanded", "false"),
            this.searchGlassIconView.setIcon("csui_action_search32"),
            this.options.isTypeAhead &&
              this.ui.itemPicker.attr("aria-expanded", "false"),
            this.ui.clearer.addClass("binf-hidden"),
            (this.lastFocused = "I"),
            this.filterTimeout &&
              (clearTimeout(this.filterTimeout), (this.filterTimeout = void 0)),
            this.hideAndClearPostAction(r);
        },
        hideAndClearPostAction: function (r) {
          r ||
            (this.setValue(),
            this.triggerMethod(this.valueChangedEventName, {
              column: this.options.column,
              keywords: "",
            })),
            (this.lastFilterValue = void 0),
            this.triggerMethod("closed");
        },
        toggleSearch: function () {
          this.ui.searchBox.hasClass("binf-hidden")
            ? this.showSearchInput()
            : this.hideAndClear();
        },
        showClearerIfFilterHasValue: function () {
          var r = this.getValue(),
            t = !!r.length;
          return (
            t
              ? this.ui.clearer.removeClass("binf-hidden")
              : this.ui.clearer.addClass("binf-hidden"),
            r
          );
        },
        getColumn: function () {
          return this.options.column;
        },
        getValue: function () {
          return this.ui.searchInput.val();
        },
        setValue: function (r) {
          (r = r || ""), this.ui.searchInput.val(r), (this.lastFilterValue = r);
        },
        getShown: function () {
          return !this.ui.searchBox.hasClass("binf-hidden");
        },
        setFocus: function () {
          var r = this.ui.searchInput.val().length;
          (this.lastFocused = "I"),
            setTimeout(
              d.bind(function () {
                this.ui.searchInput[0].setSelectionRange &&
                  (this.ui.searchInput.trigger("focus"),
                  this.ui.searchInput[0].setSelectionRange(r, r));
              }, this),
              500
            );
        },
        filterChanged: function () {
          var r = this.showClearerIfFilterHasValue();
          if (this.lastFilterValue !== r) {
            this.lastFilterValue = r;
            var t = this;
            this.filterTimeout && clearTimeout(this.filterTimeout),
              (this.filterTimeout = setTimeout(function () {
                t.filterTimeout = void 0;
                var n = t.getValue();
                t.triggerMethod(t.valueChangedEventName, {
                  column: t.options.column,
                  keywords: n,
                });
              }, 1e3));
          }
        },
        _hasFilterValue: function () {
          var r = this.ui.searchInput.val();
          return r.length > 0;
        },
        _moveFocusLeft: function () {
          var r = this._hasFilterValue();
          r
            ? ((this.lastFocused = "C"),
              this.triggerMethod("changed:focus", this.lastFocused))
            : ((this.lastFocused = "I"),
              this.triggerMethod("changed:focus", this.lastFocused));
        },
        _moveFocusRight: function () {
          var r = this._hasFilterValue();
          r
            ? ((this.lastFocused = "C"),
              this.triggerMethod("changed:focus", this.lastFocused))
            : ((this.lastFocused = "G"),
              this.triggerMethod("changed:focus", this.lastFocused));
        },
        _searchFieldInputClicked: function (r) {
          r.stopPropagation(), this.setFocusToInput();
        },
        _searchFieldClearerClicked: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            (this.showInputField = !0),
            this.setValue(),
            this.ui.clearer.addClass("binf-hidden"),
            (this.lastFilterValue = ""),
            this.setFocusToInput(),
            this.triggerMethod(this.valueChangedEventName, {
              column: this.options.column,
              keywords: "",
            });
        },
        _searchFieldGlassClicked: function (r) {
          r.stopPropagation(), this.toggleSearch();
        },
        _searchBoxClicked: function (r) {
          r.stopPropagation(), this.getShown() || this.toggleSearch();
        },
      });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/searchbox/empty.results",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<li class="csui-typeahead-no-results">
  ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "noresultsfound") ||
                  (e != null ? n(e, "noresultsfound") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "noresultsfound",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 20 },
                    },
                  })
                : t)
            ) +
            `
</li>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_searchbox_empty.results",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/table/cells/searchbox/typeahead.searchbox.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/table/cells/searchbox/searchbox.view",
      "csui/utils/contexts/factories/connector",
      "csui/utils/base",
      "i18n!csui/controls/table/impl/nls/lang",
      "hbs!csui/controls/table/cells/searchbox/empty.results",
      "csui/lib/bootstrap3-typeahead",
      "css!csui/controls/table/cells/searchbox/searchbox",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = h.extend({
        valueChangedEventName: "item:change",
        events: function () {
          return d.defaults(
            {
              "keyup @ui.searchInput": "taFilterChanged",
              keydown: "onKeyInViewUserFilter",
              "paste @ui.searchInput": "taFilterChanged",
              "change @ui.searchInput": "taFilterChanged",
            },
            h.prototype.events
          );
        },
        taFilterChanged: function (t) {
          this.showClearerIfFilterHasValue();
        },
        onKeyInViewUserFilter: function (t) {
          (this.getShown() && this.lastFocused == "I" && t.keyCode == 13) ||
            this.onKeyInView(t);
        },
        constructor: function (n) {
          if (
            ((this.defaultOptions = {
              items: "all",
              delay: 200,
              minLength: 0,
              autoSelect: !0,
              handleNoResults: !0,
              prettyScrolling: !0,
              emptyTemplate: u({ noresultsfound: l.noResultsFound }),
            }),
            n.context)
          )
            this.context = n.context;
          else throw new Error("Context is missing in the constructor options");
          (n.isTypeAhead = !0),
            h.prototype.constructor.apply(this, [void 0, arguments[0]]),
            (this.source = this.options.source),
            (this.collection = this.options.collection);
          var s = this.options.context.getObject(i),
            o = d.isFunction(this.source);
          if (this.source)
            this.source = o ? d.bind(this.source, this) : this.source;
          else
            throw new Error(
              "typeahead.seachbox options require a source to be set"
            );
          n.sorter
            ? (this.sorter = n.sorter)
            : (this.sorter = o ? this._sortMembers : null),
            n.matcher
              ? (this.matcher = n.matcher)
              : (this.matcher = o ? this._matchMembers : null),
            this.listenTo(
              this,
              "render",
              d.bind(this.initializeTypeahead, this)
            );
        },
        initializeTypeahead: function () {
          d.defaults(this.options, this.defaultOptions);
          var t = {
            matcher: this.matcher,
            sorter: this.sorter,
            source: this.source,
            displayText:
              this.options.displayText &&
              d.bind(this.options.displayText, this),
            highlighter:
              this.options.highlighter &&
              d.bind(this.options.highlighter, this),
            afterSelect: d.bind(
              this.options.afterSelect || this._afterSelect,
              this
            ),
            updater: d.bind(this.options.updater || this._updater, this),
            accessibility: d.bind(
              this.options.accessibility || this._accessibility,
              this
            ),
            appendTo: this.ui.searchBox,
          };
          this.lastFilterValue !== void 0 &&
            this.$el.addClass("csui-searchbox-shown"),
            this.$el.prop("title", ""),
            this.ui.searchInput.typeahead(d.extend(this.options, t));
        },
        hideAndClearPostAction: function (t) {
          this.getFilterValue() !== void 0 &&
            !t &&
            (this.setValue(),
            this.triggerMethod(this.valueChangedEventName, {
              column: this.options.filter,
              keywords: "",
            })),
            this.ui.searchInput.val(""),
            (this.lastFilterValue = void 0),
            this.triggerMethod("closed");
        },
        _updater: function (t) {
          var n = t.clone();
          return n.set("name", e.formatMemberName(n)), n;
        },
        _matchMembers: function (t) {
          return !0;
        },
        _sortMembers: function (t) {
          return t;
        },
        _searchFieldClearerClicked: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            (this.showInputField = !0),
            this.ui.searchInput.val(""),
            this.ui.clearer.addClass("binf-hidden"),
            (this.lastFilterValue = ""),
            this.setFocusToInput(),
            this.triggerMethod(this.valueChangedEventName, {
              column: this.options.filter,
              keywords: "",
            });
        },
        _afterSelect: function (t) {
          var n = this.options.clearOnSelect ? "" : e.formatMemberName(t);
          this.ui.searchBox.val(n),
            this.trigger(this.valueChangedEventName, {
              column: this.options.filter,
              keywords: t.get("id"),
            });
        },
        setValue: function (t) {
          this.lastFilterValue = t === "" ? void 0 : t;
        },
        getFilterValue: function () {
          return this.lastFilterValue;
        },
        getColumn: function () {
          return this.options.filter;
        },
        _accessibility: function (t) {
          this.ui.searchInput.attr("aria-activedescendant", t.attr("id"));
        },
      });
      return r;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/rows/metadata/impl/metadatarow",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `      <div class="binf-form-group binf-col-xs-12"
           data-csui-attribute="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 32 },
                      end: { line: 5, column: 40 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isRegion") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 6, column: 10 },
                  end: { line: 18, column: 17 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '              <div title="' +
            i.escapeExpression(i.lambda(e != null ? t(e, "titleAttr") : e, e)) +
            '" id="' +
            i.escapeExpression(
              i.lambda(e != null ? t(e, "regionLabelId") : e, e)
            ) +
            `"
                     class="binf-col-xs-4 binf-col-sm-3 binf-col-md-2 binf-control-label">` +
            i.escapeExpression(i.lambda(e != null ? t(e, "label") : e, e)) +
            `</div>

              <div id="` +
            i.escapeExpression(i.lambda(e != null ? t(e, "id") : e, e)) +
            `" class="binf-col-xs-8 binf-col-sm-9 binf-col-md-10
              binf-form-control-static csui-content-view" aria-labelledby="` +
            i.escapeExpression(
              i.lambda(e != null ? t(e, "regionLabelId") : e, e)
            ) +
            `"></div>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '              <label for="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "id") : e, e)) +
            '" title="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "titleAttr") : e, e)) +
            `"
                     class="binf-col-xs-4 binf-col-sm-3 binf-col-md-2 binf-control-label">` +
            i.escapeExpression(i.lambda(e != null ? n(e, "label") : e, e)) +
            `</label>
              <input id="` +
            i.escapeExpression(i.lambda(e != null ? n(e, "id") : e, e)) +
            '" type="text" readonly value="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "value") : e, e)) +
            `"
                     ` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "tooltip") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 16, column: 21 },
                  end: { line: 16, column: 72 },
                },
              }
            )) != null
              ? t
              : "") +
            `
                     class="binf-col-xs-8 binf-col-sm-9 binf-col-md-10 binf-form-control-static">
`
          );
        },
        5: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            'title="' +
            i.escapeExpression(i.lambda(e != null ? t(e, "tooltip") : e, e)) +
            '"'
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="binf-row">
  <div class="cs-form binf-form-horizontal">
` +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "meta") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 4 },
                  end: { line: 20, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_rows_metadata_impl_metadatarow",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/rows/metadata/impl/metadatarow",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/rows/metadata/metadatarow.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "hbs!csui/controls/table/rows/metadata/impl/metadatarow",
      "css!csui/controls/table/rows/metadata/impl/metadatarow",
      "css!csui/controls/form/impl/form",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = a.ItemView.extend({
        className: "csui-table-metadata-view binf-container-fluid",
        template: h,
        templateHelpers: function () {
          var e = this,
            l = [],
            u;
          return (
            d.each(
              this.options.columns,
              function (r) {
                (u = new r.CellView({
                  context: this.options.context,
                  column: r,
                  model: this.options.model,
                  nameEdit: !1,
                })),
                  (l = l.concat(this._getColumnAttributes(r, u)));
              },
              this
            ),
            (this._contentViews = []),
            d.each(l, function (r) {
              (r.id = d.uniqueId(r.name)),
                r.contentView &&
                  ((r.id = d.uniqueId(r.name)),
                  (r.isRegion = !0),
                  (r.regionLabelId = d.uniqueId("rl_" + r.id)),
                  e._contentViews.push({
                    view: r.contentView,
                    regionElementId: r.id,
                  }));
            }),
            { meta: l }
          );
        },
        _getColumnAttributes: function (e, l) {
          var u = [];
          if (d.isFunction(l.getAttributes)) u = l.getAttributes();
          else {
            var r = l.getValueText(),
              t = d.isFunction(l.getTooltipValueText)
                ? l.getTooltipValueText()
                : r;
            (e.name === "size" && (r === 0 || r === null || r === "")) ||
              u.push({
                label: e.title,
                titleAttr: e.titleAttr || e.title,
                value: r,
                tooltip: t,
                name: e.name,
                contentView: d.isFunction(l.getContentView)
                  ? l.getContentView()
                  : void 0,
              });
          }
          return u;
        },
        constructor: function (l) {
          a.ItemView.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          d.each(
            this._contentViews,
            function (e) {
              var l = this.$el.find("#" + e.regionElementId),
                u = new a.Region({ el: l });
              u.show(e.view);
            },
            this
          );
        },
        currentlyFocusedElement: function () {
          return v();
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/rows/error/impl/errorrow",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div class="binf-text-danger" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 37 },
                      end: { line: 1, column: 53 },
                    },
                  })
                : t)
            ) +
            '><span class="csui-text-danger">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 85 },
                      end: { line: 1, column: 101 },
                    },
                  })
                : t)
            ) +
            `</span></div>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table_rows_error_impl_errorrow", h), h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/rows/error/impl/errorrow",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/rows/error/errorrow.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "hbs!csui/controls/table/rows/error/impl/errorrow",
      "css!csui/controls/table/rows/error/impl/errorrow",
    ],
    function (v, d, a) {
      var h = d.ItemView.extend({
        className: "csui-table-error-view binf-container-fluid",
        template: a,
        templateHelpers: function () {
          return {
            errorMessage: this.options.errorMessage
              ? this.options.errorMessage
              : "",
          };
        },
        ui: {},
        events: {},
        constructor: function (e) {
          (this.options = e || {}),
            d.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/controls/table/impl/table.header.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.View.extend(
        {
          constructor: function t(n) {
            t.__super__.constructor.apply(this, arguments),
              (this._getActiveInlineForm = n._getActiveInlineForm),
              (this.searchBoxes = n.searchBoxes),
              (this.alternativeHeaderView = n.alternativeHeaderView),
              (this.displayedColumns = n.displayedColumns),
              (this.accFocusedColumn = n.accFocusedColumn || 0),
              (this.accSearchFocused = n.accSearchFocused || !1),
              (this.accMenuFocused = n.accMenuFocused || !1),
              (this.tableView = n.tableView),
              this.alternativeHeaderView &&
                (this.listenTo(
                  this.alternativeHeaderView,
                  "focusout",
                  function (s) {
                    var o = this.$(
                        ">tr>th:not(.csui-alternative-table-header)"
                      ),
                      c = -1,
                      m,
                      f;
                    if (s.direction === "left") {
                      for (m = 0; m < o.length; m++)
                        if (
                          ((f = v(o[m])),
                          f.hasClass(t.ClassNameColumnForAlternativeHeader))
                        ) {
                          c = m - 1;
                          break;
                        }
                    } else
                      for (m = o.length - 1; m > 0; m--)
                        if (
                          ((f = v(o[m])),
                          f.hasClass(t.ClassNameColumnForAlternativeHeader) &&
                            m + 1 < o.length)
                        ) {
                          c = m + 1;
                          break;
                        }
                    c >= 0 && (this.accFocusedColumn = c),
                      this._accSetFocusToCurrentlyFocusedElement();
                  }
                ),
                this.listenTo(
                  this.alternativeHeaderView,
                  "changed:focus",
                  this._accSetFocusToCurrentlyFocusedElement
                ));
          },
          behaviors: {
            TabableRegion: { behaviorClass: e, initialActivationWeight: 100 },
          },
          events: { keydown: "onKeyInView", click: "_onHeaderClicked" },
          _onHeaderClicked: function (t) {
            function n(c, m, f) {
              var g = m.find((w) => c.classList.contains(w));
              if (!g) {
                const w = "." + m.join(", ."),
                  b = v(c).closest(w, f);
                b.length > 0 && (g = m.find((C) => b[0].classList.contains(C)));
              }
              return g;
            }
            const s = v(t.target).closest("th", this.el);
            if (s.length > 0) {
              const c = s.attr("data-csui-attribute"),
                m = this._findColumnIndexByName(c);
              if (m > -1) {
                var o = [
                  "csui-table-column-search",
                  "csui-column-header-menu",
                  "csui-focusable-table-column-header",
                  "csui-nowrap-table__cell-wrapper",
                ];
                const f = n(t.target, o, s);
                f &&
                  ((this.accFocusedColumn = m),
                  (this.accSearchFocused = !1),
                  (this.accMenuFocused = !1),
                  f === "csui-table-column-search"
                    ? (this.accSearchFocused = !0)
                    : f === "csui-column-header-menu" &&
                      (this.accMenuFocused = !0));
              }
            }
          },
          findStickyColumns: function () {
            this._haveSticky = !1;
            var t,
              n = this.$el.find("tr");
            if (n.length > 0) {
              var s = n[0];
              (t = s.querySelector("th.csui-nowrap-table__column_last-sticky")),
                t && (this._haveSticky = !0);
            }
            if (this._haveSticky) {
              var o = t.getBoundingClientRect();
              this._rightBorderPinned = o.x + o.width;
            }
          },
          render: function () {
            this.triggerMethod("before:render", this);
            var t = this.$(">tr>th"),
              n = this.$(">tr>th>.csui-table-column-search");
            (this._columnCount = t.length),
              (this._searchBoxCount = n.length),
              this.triggerMethod("render", this);
          },
          remove: function () {
            return this.stopListening(), this.undelegateEvents(), this;
          },
          onDomRefresh: function () {
            this.findStickyColumns();
          },
          currentlyFocusedElement: function () {
            r.call(this);
            var t = this._getColumnSelector(
                this.displayedColumns[this.accFocusedColumn]
              ),
              n = this.$(t);
            if (n.is(":visible"))
              if (this.accSearchFocused) {
                var s = this._findActiveSearchBoxView();
                s ? (n = s.currentlyFocusedElement()) : (n = v());
              } else if (this.accMenuFocused) {
                const c = this._findActiveColumnMenuView();
                c ? (n = c.$(".binf-dropdown-toggle")) : (n = v());
              } else {
                var o = v(n[0]).find(".csui-focusable-table-column-header");
                o.length > 0 && (n = o);
              }
            return n;
          },
          _getColumnSelector: function (t) {
            var n = t.attributes.column_key,
              s = 'tr>th[data-csui-attribute="' + n + '"]';
            return s;
          },
          _rightIsNextColumn: function () {
            if (this.accMenuFocused) return !0;
            var t = this.displayedColumns[this.accFocusedColumn],
              n = this._getColumnSelector(t),
              s = n + " .csui-column-header-menu",
              o = this.$(s);
            if (o.length) return !1;
            var c = n + " .csui-table-column-search",
              m = this.$(c);
            return this.accSearchFocused || m.length === 0;
          },
          onKeyInView: function (t) {
            var n, s;
            function o() {
              for (g = this.accFocusedColumn - 1; g >= 0; )
                if (
                  ((n = this._getColumnSelector(this.displayedColumns[g])),
                  (s = this.$(n)),
                  s.is(":visible") &&
                    s.find(".csui-focusable-table-column-header").length > 0)
                ) {
                  if (
                    ((this.accFocusedColumn = g),
                    (this.accSearchFocused = this.accMenuFocused = !1),
                    (f = s.find(".csui-column-header-menu")),
                    (this.accMenuFocused = f.length > 0),
                    this.accMenuFocused)
                  ) {
                    (b = this._findActiveColumnMenuView()),
                      b && b.$(".binf-dropdown-toggle")[0].focus();
                    break;
                  }
                  (m = s.find(".csui-table-column-search")),
                    (this.accSearchFocused = m.length > 0),
                    this.accSearchFocused &&
                      ((w = this._findActiveSearchBoxView()),
                      w && w.getShown() && w.setFocusToGlass());
                  break;
                } else g--;
            }
            var c, m, f, g, w, b;
            if (!this._getActiveInlineForm())
              switch (t.keyCode) {
                case 9:
                  (f = this.$el.find(
                    '.csui-column-header-menu .binf-dropdown-toggle[aria-expanded="true"]'
                  )),
                    f.trigger("click");
                  break;
                case 32:
                case 13:
                  t.ctrlKey ||
                    t.metaKey ||
                    (!this.accSearchFocused &&
                      !this.accMenuFocused &&
                      this.options.displayedColumns[this.accFocusedColumn]
                        .orderable &&
                      (t.preventDefault(),
                      t.stopPropagation(),
                      this.trigger("sorting:toggle", this.accFocusedColumn)));
                  break;
                case 37:
                  (f = this.$el.find(
                    '.csui-column-header-menu .binf-dropdown-toggle[aria-expanded="true"]'
                  )),
                    f.trigger("click"),
                    i && i.settings.rtl
                      ? this._handleRightArrowKey(n, s, w, c)
                      : this._handleLeftArrowKey(w, o),
                    t.preventDefault(),
                    t.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated();
                  break;
                case 39:
                  (f = this.$el.find(
                    '.csui-column-header-menu .binf-dropdown-toggle[aria-expanded="true"]'
                  )),
                    f.trigger("click"),
                    i && i.settings.rtl
                      ? this._handleLeftArrowKey(w, o)
                      : this._handleRightArrowKey(n, s, w, c),
                    t.preventDefault(),
                    t.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated();
                  break;
                case 35:
                  if (
                    ((this.accFocusedColumn = this.displayedColumns.length - 1),
                    (c = this.accFocusedColumn + 1),
                    (this.accSearchFocused = this.accMenuFocused = !1),
                    (f = this.$(
                      ">tr>th:nth-child(" + c + ") .csui-column-header-menu"
                    )),
                    (this.accMenuFocused = f.length > 0),
                    this.accMenuFocused)
                  ) {
                    (b = this._findActiveColumnMenuView()),
                      b && b.$(".binf-dropdown-toggle")[0].focus(),
                      t.preventDefault(),
                      t.stopPropagation(),
                      this.trigger("closeOtherControls"),
                      this._accSetFocusAfterTabableRegionActivated();
                    break;
                  }
                  (m = this.$(
                    ">tr>th:nth-child(" + c + ") .csui-table-column-search"
                  )),
                    (this.accSearchFocused = m.length > 0),
                    this.accSearchFocused &&
                      ((w = this._findActiveSearchBoxView()),
                      w && w.getShown() && w.setFocusToInput()),
                    t.preventDefault(),
                    t.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated();
                  break;
                case 36:
                  (this.accFocusedColumn = 0),
                    (this.accSearchFocused = !1),
                    (this.accMenuFocused = !1),
                    t.preventDefault(),
                    t.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated();
                  break;
                case 121:
                  t.shiftKey &&
                    (this.searchBoxes &&
                      this.searchBoxes.length > 0 &&
                      ((w = this.searchBoxes[0]),
                      w.showSearchInput(),
                      this.listenToOnce(
                        w,
                        "closed",
                        this._accSetFocusAfterTabableRegionActivated
                      )),
                    t.stopPropagation(),
                    t.preventDefault());
                  break;
              }
          },
          _handleLeftArrowKey: function (t, n) {
            if (this.accMenuFocused)
              if (
                ((this.accMenuFocused = !1),
                (t = this._findActiveSearchBoxView()),
                t)
              )
                (this.accSearchFocused = !0),
                  t.getShown() && t.setFocusToInput();
              else {
                const s = this._getColumnSelector(
                    this.displayedColumns[this.accFocusedColumn]
                  ),
                  o = this.$(s);
                u.call(this, this.accFocusedColumn, o) || n.call(this);
              }
            else
              this.accSearchFocused
                ? ((t = this._findActiveSearchBoxView()),
                  t && t.getShown()
                    ? n.call(this)
                    : (this.accSearchFocused = !1))
                : n.call(this);
          },
          _handleRightArrowKey: function (t, n, s, o) {
            if (this._rightIsNextColumn()) {
              o = this.accFocusedColumn + 1;
              for (var c; o < this.displayedColumns.length; )
                if (
                  ((t = this._getColumnSelector(this.displayedColumns[o])),
                  (n = this.$(t)),
                  this._isHeaderCellFocusable(n) &&
                    (this._findActiveSearchBoxView(o) ||
                      this._findActiveColumnMenuView(o) ||
                      u.call(this, o, n)))
                ) {
                  (c = !0),
                    (this.accFocusedColumn = o),
                    (this.accSearchFocused = !1),
                    (this.accMenuFocused = !1);
                  break;
                } else o = o + 1;
              if (((s = this._findActiveSearchBoxView()), s && s.getShown()))
                (this.accSearchFocused = !0), s.setFocusToInput();
              else if (
                ((t = this._getColumnSelector(
                  this.displayedColumns[this.accFocusedColumn]
                )),
                (n = this.$(t)),
                !u.call(this, this.accFocusedColumn, n))
              ) {
                const m = this._findActiveColumnMenuView();
                m &&
                  ((this.accMenuFocused = !0),
                  m.$(".binf-dropdown-toggle")[0].focus());
              }
            } else if (
              this.accSearchFocused ||
              !this._findActiveSearchBoxView()
            ) {
              (this.accSearchFocused = !1), (this.accMenuFocused = !0);
              const m = this._findActiveColumnMenuView();
              m && m.$(".binf-dropdown-toggle")[0].focus();
            } else
              (this.accSearchFocused = !0),
                (s = this._findActiveSearchBoxView()),
                s && s.getShown() && s.setFocusToInput();
          },
          _scrollIfNeeded: function (t) {
            var n = t[0],
              s = n.classList.contains("csui-nowrap-table__column_sticky");
            if (!s) {
              var o = n.getBoundingClientRect(),
                c = o.x;
              if (c <= this._rightBorderPinned) {
                var m = this.tableView.$el.find("table.binf-table").parent()[0],
                  f = Math.round(m.scrollLeft - (this._rightBorderPinned - c));
                setTimeout(function () {
                  m.scrollTo({ left: f, behavior: "smooth" });
                }, 0);
              }
            }
          },
          _accSetFocusToCurrentlyFocusedElement: function () {
            var t = this.currentlyFocusedElement();
            t.length > 0 &&
              ((t = v(t[0])),
              this.trigger("changed:focus", this),
              this._isVisible(t) &&
                (t.trigger("focus"), this._scrollIfNeeded(t)));
          },
          _isVisible: function (t) {
            return v(t).is(":visible");
          },
          _accSetFocusAfterTabableRegionActivated: function () {
            if (!this._getActiveInlineForm()) {
              var t = this._findActiveSearchBoxView();
              (t && t.getShown()) ||
                this._accSetFocusToCurrentlyFocusedElement();
            }
          },
          _accSearchBoxFocused: function (t) {
            (this.accFocusedColumn = t.columnIndex),
              (this.accSearchFocused = !0),
              (this.accMenuFocused = !1),
              this._accSetFocusToCurrentlyFocusedElement();
          },
          _accColumnMenuFocused: function (t) {
            (this.accFocusedColumn = t.columnIndex),
              (this.accSearchFocused = !1),
              (this.accMenuFocused = !0),
              this._accSetFocusToCurrentlyFocusedElement();
          },
          _findActiveSearchBoxView: function (t) {
            var n = this.searchBoxes,
              s = this.displayedColumns,
              o = s[t ?? this.accFocusedColumn].name.toLowerCase(),
              c = d.find(n, function (m) {
                return m.options.columnName?.toLowerCase() === o;
              });
            return c;
          },
          _findActiveColumnMenuView: function (t) {
            const n =
              this.displayedColumns[
                t ?? this.accFocusedColumn
              ].name.toLowerCase();
            return this.tableView.columnMenus.find(
              (o) => o.options.columnName?.toLowerCase() === n
            );
          },
          _findColumnIndexByName: function (t) {
            t = t.toLowerCase();
            for (var n = 0; n < this.displayedColumns.length; n++)
              if (this.displayedColumns[n].name.toLowerCase() === t) return n;
            return -1;
          },
          _isHeaderCellFocusable: function (t) {
            return (
              t.is(":visible") &&
              t.find(".csui-focusable-table-column-header").length > 0
            );
          },
        },
        { ClassNameColumnForAlternativeHeader: "csui-undefined" }
      );
      function u(t, n) {
        return (
          this.displayedColumns[t].orderable ||
          (!this.displayedColumns[t].resizeSpan && n.width())
        );
      }
      function r() {
        this.accFocusedColumn >= this.displayedColumns.length &&
          (this.displayedColumns.length > 0
            ? (this.accFocusedColumn = this.displayedColumns.length - 1)
            : (this.accFocusedColumn = 0));
      }
      return l;
    }
  ),
  csui.define(
    "csui/controls/table/impl/table.body.view",
    [
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/focusable",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.View.extend(
        {
          constructor: function u(r) {
            u.__super__.constructor.apply(this, arguments),
              (this._getActiveInlineForm = r._getActiveInlineForm),
              (this.startInlineFormForEdit = r.startInlineFormForEdit),
              (this.collection = r.collection),
              (this.displayedColumns = r.displayedColumns),
              (this.nameColumnIndex =
                u.getNameColumnIndex(r.displayedColumns) || 0),
              (this.accFocusedCell = r.accFocusedCell || {
                column: this.nameColumnIndex,
                row: 0,
              }),
              (this.tableView = r.tableView);
              window.aiPlusRenderIngestionStatus(r.collection);
              // console.log(1, r.collection);
          },
          events: { keydown: "onKeyInView" },
          behaviors: {
            TabableRegion: { behaviorClass: i, initialActivationWeight: 99 },
          },
          findStickyColumns: function () {
            this._haveSticky = !1;
            let u,
              r = this.$el.find("tr");
            if (
              (r.length > 0 &&
                ((u = r[0].querySelector(
                  "td.csui-nowrap-table__column_last-sticky"
                )),
                u && (this._haveSticky = !0)),
              this._haveSticky)
            ) {
              const t = u.getBoundingClientRect();
              if (
                ((this._rightBorderPinned = t.x + t.width),
                (r = this.tableView.el.querySelectorAll("thead > tr")),
                r.length > 0)
              ) {
                const s = r[r.length - 1].getBoundingClientRect();
                this._headerRowBottom = s.top + s.height;
              }
            }
          },
          render: function () {
            this.triggerMethod("before:render", this);
            var u = this.$el.parent().find("thead>tr>th");
            (this._columnCount = u.length), this.triggerMethod("render", this);
          },
          remove: function () {
            return this.stopListening(), this.undelegateEvents(), this;
          },
          onDomRefresh: function () {
            this.findStickyColumns();
          },
          currentlyFocusedElement: function () {
            if (!this.tableView.table) return v();
            const u = this._getActiveInlineForm();
            if (u && u.currentlyFocusedElement)
              return u.currentlyFocusedElement();
            if (this.accFocusedCell) {
              var r = this.collection.at(this.accFocusedCell.row),
                t = l.call(this.tableView, r);
              if (t.accFocusedViewIndex !== void 0) return v();
              var n = v(
                  this.tableView.table.row(this.accFocusedCell.row).node()
                ),
                s = n.children()[this.accFocusedCell.column],
                o = a.findFocusables(s);
              return o.length === 1 ? v(o[0]) : v(s);
            } else return v();
          },
          onClickedCell: function (u) {
            (this.accFocusedCell.row = u.rowIndex),
              (this.accFocusedCell.column = u.colIndex),
              this._accSetFocusAfterTabableRegionActivated();
          },
          onKeyInView: function (u) {
            var r,
              t,
              n = v();
            if (!this._getActiveInlineForm())
              if (u.keyCode === 37)
                h && h.settings.rtl
                  ? this.accFocusedCell.column <
                      this.displayedColumns.length - 1 &&
                    this.accFocusedCell.column++
                  : this.accFocusedCell.column > 0 &&
                    this.accFocusedCell.column--,
                  u.preventDefault(),
                  u.stopPropagation(),
                  this.trigger("closeOtherControls"),
                  this._accSetFocusAfterTabableRegionActivated();
              else if (u.keyCode === 38) {
                if (
                  (u.preventDefault(),
                  u.stopPropagation(),
                  this.trigger("closeOtherControls"),
                  (r = this.collection.at(this.accFocusedCell.row)),
                  (t = l.call(this.tableView, r)),
                  t.accFocusedViewIndex === void 0)
                )
                  if (this.accFocusedCell.row > 0) this.accFocusedCell.row--;
                  else return;
                else
                  t.accFocusedViewIndex > 0
                    ? t.accFocusedViewIndex--
                    : delete t.accFocusedViewIndex;
                this._accSetFocusAfterTabableRegionActivated();
              } else if (u.keyCode === 39)
                h && h.settings.rtl
                  ? this.accFocusedCell.column > 0 &&
                    this.accFocusedCell.column--
                  : this.accFocusedCell.column <
                      this.displayedColumns.length - 1 &&
                    this.accFocusedCell.column++,
                  u.preventDefault(),
                  u.stopPropagation(),
                  this.trigger("closeOtherControls"),
                  this._accSetFocusAfterTabableRegionActivated();
              else if (u.keyCode === 40) {
                (r = this.collection.at(this.accFocusedCell.row)),
                  (t = l.call(this.tableView, r));
                var s = t.accFocusedViewIndex;
                for (
                  t.accFocusedViewIndex === void 0 &&
                  t.views.length > 0 &&
                  (t.accFocusedViewIndex = -1);
                  n.length === 0;

                ) {
                  if (
                    t.accFocusedViewIndex !== void 0 &&
                    t.accFocusedViewIndex + 1 < t.views.length
                  )
                    t.accFocusedViewIndex = t.accFocusedViewIndex + 1;
                  else if (this.accFocusedCell.row + 1 < this.collection.length)
                    delete t.accFocusedViewIndex,
                      this.accFocusedCell.row++,
                      (r = this.collection.at(this.accFocusedCell.row)),
                      r && (t = l.call(this.tableView, r));
                  else {
                    t.accFocusedViewIndex = s;
                    break;
                  }
                  n = this.currentlyFocusedElement();
                }
                u.preventDefault(),
                  u.stopPropagation(),
                  this.trigger("closeOtherControls"),
                  this._accSetFocusAfterTabableRegionActivated();
              } else
                u.keyCode === 33
                  ? ((this.accFocusedCell.row = 0),
                    (r = this.collection.at(this.accFocusedCell.row)),
                    (t = l.call(this.tableView, r)),
                    delete t.accFocusedViewIndex,
                    u.preventDefault(),
                    u.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated())
                  : u.keyCode === 34
                  ? (this.collection.length > 0
                      ? ((this.accFocusedCell.row = this.collection.length - 1),
                        (r = this.collection.at(this.accFocusedCell.row)),
                        (t = l.call(this.tableView, r)),
                        delete t.accFocusedViewIndex)
                      : (this.accFocusedCell.row = 0),
                    u.preventDefault(),
                    u.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated())
                  : u.keyCode === 35
                  ? ((this.accFocusedCell.column =
                      this.displayedColumns.length - 1),
                    u.preventDefault(),
                    u.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated())
                  : u.keyCode === 36
                  ? ((this.accFocusedCell.column = 0),
                    u.preventDefault(),
                    u.stopPropagation(),
                    this.trigger("closeOtherControls"),
                    this._accSetFocusAfterTabableRegionActivated())
                  : u.keyCode === 113 &&
                    ((r = this.collection.at(this.accFocusedCell.row)),
                    r && this.startInlineFormForEdit(r),
                    u.preventDefault(),
                    u.stopPropagation());
          },
          _scrollIfNeeded: function (u) {
            const r = u[0];
            if (!r.classList.contains("csui-nowrap-table__column_sticky")) {
              let n, s;
              const o = r.getBoundingClientRect(),
                c = o.x,
                m = o.y,
                f = this.tableView.$el.find("table.binf-table").parent()[0];
              c <= this._rightBorderPinned &&
                ((n = Math.round(f.scrollLeft - (this._rightBorderPinned - c))),
                setTimeout(function () {
                  f.scrollTo({ left: n, behavior: "smooth" });
                }, 0)),
                m < this._headerRowBottom &&
                  (s = Math.round(f.scrollTop - (this._headerRowBottom - m)));
              const g = { behavior: "smooth" };
              n !== void 0 && (g.left = n),
                s !== void 0 && (g.top = s),
                (n !== void 0 || s !== void 0) &&
                  setTimeout(function () {
                    f.scrollTo(g);
                  }, 0);
            }
          },
          _accSetFocusAfterTabableRegionActivated: function () {
            if (!this._getActiveInlineForm()) {
              var u = this.currentlyFocusedElement();
              if (u.length > 0) {
                var r = v(u);
                this.trigger("changed:focus", this),
                  this._isVisible(r) &&
                    (r.trigger("focus"), this._scrollIfNeeded(u));
              }
            }
          },
          _isVisible: function (u) {
            return v(u).is(":visible");
          },
        },
        {
          getNameColumnIndex: function (u) {
            if (u)
              for (var r = 0; r < u.length; r++) {
                var t = u[r];
                if (t.isNaming) return r;
              }
          },
        }
      );
      function l(u) {
        var r;
        return (
          u && (r = this._detailRowViewsByModelId[u.id || u.get("id")]),
          r || { views: [] }
        );
      }
      return e;
    }
  ),
  csui.define(
    "csui/controls/table/impl/column.menu/state.toolitem.view",
    ["csui/lib/underscore", "csui/controls/toolbar/toolitem.view"],
    function (v, d) {
      var a = d.extend({
        constructor: function () {
          d.prototype.constructor.apply(this, arguments);
        },
        render: function () {
          if (this._inDropDown) {
            const h = this.model.get("dropdown");
            if (h) {
              const i = v.pick(this.options, d.STATE_PARAMS);
              d.STATE_PARAMS.forEach((l) => delete this.options[l]),
                v.extend(this.options, v.pick(h, d.STATE_PARAMS));
              const e = d.prototype.render.apply(this, arguments);
              return (
                d.STATE_PARAMS.forEach((l) => delete this.options[l]),
                v.extend(this.options, i),
                e
              );
            }
          }
          return d.prototype.render.apply(this, arguments);
        },
        restoreRenderState: function () {
          return (
            (this._inDropDown = !1),
            d.prototype.restoreRenderState.apply(this, arguments)
          );
        },
        renderTextOnly: function (h) {
          return (
            h && (this._inDropDown = !0),
            d.prototype.renderTextOnly.apply(this, arguments)
          );
        },
      });
      return a;
    }
  ),
  csui.define(
    "csui/controls/table/impl/column.menu/toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/table/impl/column.menu/state.toolitem.view",
      "i18n",
      "smart/themes/carbonfiber/ot-icons/icons_smart_action",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = {
        tableColumnToolbar: new a(
          {
            sort: [
              {
                signature: "TableColumnSortAscending",
                name: d.TableColumnMenuSortAscending,
                iconNameForOn: "csui_smart_utility_checkmark16",
                icon: "icon",
                dropdown: { renderIconAndText: !0 },
                customView: !0,
                commandData: { customView: h },
              },
              {
                signature: "TableColumnSortDescending",
                name: d.TableColumnMenuSortDescending,
                iconNameForOn: "csui_smart_utility_checkmark16",
                icon: "icon",
                dropdown: { renderIconAndText: !0 },
                customView: !0,
                commandData: { customView: h },
              },
            ],
            resize: [
              {
                signature: "TableColumnResizeMinWidth",
                name: d.TableColumnMenuResizeMinWidth,
              },
              {
                signature: "TableColumnResizeFitToContent",
                name: d.TableColumnMenuFitToContent,
              },
            ],
          },
          { maxItemsShown: 0, dropDownIconName: "csui_action_more32" }
        ),
      };
      return (
        (e.clone = function () {
          return a.cloneToolbarItems(this);
        }),
        e
      );
    }
  ),
  csui.define(
    "csui/controls/table/impl/column.menu/toolbaritems.masks",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = ["tableColumnToolbar"];
      function e() {
        var l = v.config(),
          u = new h();
        this.toolbars = d.reduce(
          i,
          function (r, t) {
            var n = new a(u, { normalize: !1 });
            return (
              d.each(l, function (s, o) {
                (s = s[t]), s && n.extendMask(s);
              }),
              n.storeMask(),
              (r[t] = n),
              r
            );
          },
          {}
        );
      }
      return (e.toolbars = i), e;
    }
  ),
  csui.define(
    "csui/controls/table/impl/column.menu/commands",
    ["csui/models/command", "csui/models/commands"],
    function (v, d) {
      var a = v.extend({
          defaults: { signature: "TableColumnSortAscending" },
          enabled: function (u, r) {
            const n = (u.originatingView.table || u.table).order()[0];
            return (
              u.toolItem.set(
                "stateIsOn",
                n && n[0] === u.data.orderIndex && n[1] === "asc"
              ),
              u.originatingView.displayedColumns[u.data.orderIndex].orderable
            );
          },
          execute: function (u, r) {
            u.toolItem.get("stateIsOn") ||
              u.originatingView.table
                .column(u.data.orderIndex)
                .order("asc")
                .draw();
          },
        }),
        h = v.extend({
          defaults: { signature: "TableColumnSortDescending" },
          enabled: function (u, r) {
            const n = (u.originatingView.table || u.table).order()[0];
            return (
              u.toolItem.set(
                "stateIsOn",
                n && n[0] === u.data.orderIndex && n[1] === "desc"
              ),
              u.originatingView.displayedColumns[u.data.orderIndex].orderable
            );
          },
          execute: function (u, r) {
            u.toolItem.get("stateIsOn") ||
              u.originatingView.table
                .column(u.data.orderIndex)
                .order("desc")
                .draw();
          },
        }),
        i = v.extend({
          defaults: { signature: "TableColumnResizeMinWidth" },
          enabled: function (u, r) {
            return u.originatingView.displayedColumns[u.data.columnIndex]
              .hasResizeHandle;
          },
          execute: function (u, r) {
            const n = u.originatingView.displayedColumns[u.data.resizeIndex];
            u.originatingView._setColumnToWidth(
              u.data.resizeIndex,
              n.columnMinWidth
            );
          },
        }),
        e = v.extend({
          defaults: { signature: "TableColumnResizeFitToContent" },
          enabled: function (u, r) {
            return u.originatingView.displayedColumns[u.data.columnIndex]
              .hasResizeHandle;
          },
          execute: function (u, r) {
            u.originatingView._fitColumnToContent(u.data.resizeIndex);
          },
        }),
        l = new d([new a(), new h(), new i(), new e()]);
      return l;
    }
  ),
  csui.define(
    "css!csui/controls/table/impl/table.css-vars",
    [],
    function () {}
  ),
  csui.define("css!csui/controls/table/impl/table", [], function () {}),
  csui.define(
    "css!csui/controls/table/impl/table.csslint-ignore",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/table.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap",
      "csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/utils/log",
      "csui/utils/base",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/table/cells/cell.factory",
      "csui/models/nodechildrencolumn",
      "csui/controls/progressblocker/blocker",
      "csui/utils/contexts/factories/connector",
      "csui/behaviors/default.action/impl/defaultaction",
      "csui/controls/checkbox/checkbox.view",
      "csui/controls/disclosure/disclosure.view",
      "csui/controls/table/cells/select/select.view",
      "csui/controls/table/cells/searchbox/searchbox.view",
      "csui/controls/table/cells/searchbox/typeahead.searchbox.view",
      "csui/controls/table/inlineforms/inlineform.factory",
      "csui/controls/table/rows/metadata/metadatarow.view",
      "csui/controls/table/rows/error/errorrow.view",
      "csui/controls/table/impl/table.header.view",
      "csui/controls/table/impl/table.body.view",
      "csui/utils/accessibility",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/controls/mixins/view.state/node.view.state.mixin",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/controls/toolbar/toolbar.view",
      "csui/controls/table/impl/column.menu/toolbaritems",
      "csui/controls/table/impl/column.menu/toolbaritems.masks",
      "csui/controls/table/impl/column.menu/commands",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "i18n",
      "i18n!csui/controls/table/cells/toggledetails/impl/nls/lang",
      "css!csui/controls/table/impl/table.css-vars",
      "css!csui/controls/table/impl/table",
      "css!csui/controls/table/impl/table.csslint-ignore",
      "csui/lib/jquery.mousehover",
      "csui/lib/jquery.scrollbarwidth",
      "csui/lib/jquery.renametag",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D,
      L,
      Q,
      q,
      G,
      N,
      W,
      H,
      z,
      Z,
      te,
      le,
      ge
    ) {
      "use strict";
      r = r(v.id);
      var Pe = v.config(),
        _e = L.isAccessibleTable(),
        ie = i.View.extend(
          {
            className: function () {
              var x = "csui-nodetable";
              return _e && (x += " csui-wrap-text"), x;
            },
            constructor: function (E) {
              E || (E = {}),
                a.defaults(Pe, {
                  minNumberOfToolbarItems: E.minNumberOfToolbarItems,
                }),
                a.defaults(Pe, { minNumberOfToolbarItems: 2 }),
                (this.tableColumnsWrappingOn = !E.tableColumnsWrappingOff);
              var B = E.focusView ? E.focusView : "tableBody";
              if (
                ((this.accFocusedState = {
                  focusView: B,
                  headerColumn: 0,
                  body: { column: 0, row: 0 },
                }),
                (this.context = E.context),
                (this.enableViewState =
                  E.enableViewState &&
                  this.context &&
                  this.context.viewStateModel.get("enabled")),
                (this.orderByFromServer = ""),
                (this._allSelectedNodes =
                  E.allSelectedNodes || new h.Collection()),
                (this.expandedDetailRows = {}),
                (this._showEmptyViewText = !0),
                (this.columnHeadersVisible = !0),
                (this.columnsWithSearch = E.columnsWithSearch || []),
                a.each(
                  this.columnsWithSearch,
                  a.bind(function (J, $) {
                    this.columnsWithSearch[$] =
                      this.columnsWithSearch[$].toLowerCase();
                  }, this)
                ),
                (this.columnMenus = []),
                (this.columnsWithTypeaheadSearchbox =
                  a.keys(E.columnsWithTypeaheadSearchbox) || []),
                a.each(
                  this.columnsWithTypeaheadSearchbox,
                  a.bind(function (J, $) {
                    this.columnsWithTypeaheadSearchbox[$] =
                      this.columnsWithTypeaheadSearchbox[$].toLowerCase();
                  }, this)
                ),
                (this.searchBoxes = []),
                E.filterBy &&
                  a.each(
                    E.filterBy,
                    a.bind(function (J, $) {
                      E.collection.filters && (E.collection.filters[$] = J);
                    }, this)
                  ),
                E.actionItems && E.commands
                  ? ((this.defaultActionController = new f({
                      actionItems: E.actionItems,
                      commands: E.commands,
                    })),
                    (this.checkModelHasAction =
                      this.defaultActionController.hasAction.bind(
                        this.defaultActionController
                      )))
                  : (this.checkModelHasAction = function () {
                      return !0;
                    }),
                (this.additionalColumns = E.additionalColumns || []),
                !E.collection)
              )
                throw new Error(
                  "table.view options require a collection to be set"
                );
              i.View.prototype.constructor.apply(this, arguments);
              var j = {
                enableSorting: !0,
                selectColumn: !0,
                haveToggleAllDetailsRows: this.tableColumnsWrappingOn && !_e,
                haveDetailsRowExpandCollapseColumn:
                  this.tableColumnsWrappingOn && !_e,
                selectRows: "multiple",
                selectAllColumnHeader: !0,
                nameEdit: !0,
                maxColumnsDisplayed: 25,
                pinnedAreaMaxFactor: 0.6,
                spacing: "medium",
              };
              switch ((a.defaults(this.options, j), this.options.selectRows)) {
                case "single":
                  this.options.selectAllColumnHeader = !1;
                  break;
                case "multiple":
                  break;
                default:
                  (this.options.selectRows = "none"),
                    (this.options.selectAllColumnHeader = !1),
                    (this.options.selectColumn = !1);
              }
              if (
                (this.options.orderBy || this.enableViewState
                  ? (this.collection.setOrder(this.options.orderBy, !1),
                    delete this.options.orderBy)
                  : this.options.collection.orderBy ||
                    this.collection.setOrder("name asc", !1),
                this.options.blockingParentView
                  ? c.delegate(this, this.options.blockingParentView)
                  : c.imbue(this),
                (this.connector = this.options.connector),
                this.connector || (this.connector = this.context.getObject(m)),
                (this.columns = this.options.columns),
                !this.columns &&
                  ((this.columns = this.collection.columns), !this.columns))
              )
                throw new Error(
                  "table.view options require columns or collection.columns to be set"
                );
              (this._ViewCollection = h.Collection.extend({
                model: this.collection.model,
              })),
                (this.selectedChildren = new this._ViewCollection()),
                this.listenTo(this.selectedChildren, "reset", function () {
                  this._showOrHideAlternativeHeaderView();
                }),
                this.listenTo(
                  this.collection,
                  "reset",
                  this._handleResponseSortBy
                )
                  .listenTo(this.collection, "reset", this._handleModelsReset)
                  .listenTo(this.collection, "update", this._handleModelsUpdate)
                  .listenTo(this.collection, "remove", this._handleModelRemove)
                  .listenTo(this.collection, "change", this.updateRow)
                  .listenTo(this.collection, "request", this.blockActions)
                  .listenTo(this.collection, "sync", this.unblockActions)
                  .listenTo(this.collection, "sync", this._handlePendingFilter)
                  .listenTo(this.collection, "new:page", this.resetScrollToTop)
                  .listenTo(
                    this.collection,
                    "reset",
                    this._updateSelectedChildren
                  )
                  .listenTo(
                    this.collection,
                    "remove",
                    this._updateSelectedChildren
                  )
                  .listenTo(this.collection, "destroy", this.unblockActions)
                  .listenTo(this.collection, "error", this.unblockActions)
                  .listenTo(
                    this.columns,
                    "update reset remain",
                    this._handleColumnsReset
                  ),
                this.enableViewState &&
                  this.listenTo(
                    this.context.viewStateModel,
                    "change:state",
                    this.onViewStateChanged
                  ),
                this.listenTo(
                  this.collection,
                  "orderBy:change",
                  this._collectionOrderByChanged
                )
                  .listenTo(
                    this.collection,
                    "filter:change",
                    this._collectionFilterChanged
                  )
                  .listenTo(
                    this.collection,
                    "filter:clear",
                    this._collectionFilterCleared
                  ),
                this.options.tableColumns &&
                  this.listenTo(
                    this.options.tableColumns,
                    "reset update",
                    this._handleTableColumnsReset
                  ),
                this.context &&
                  this.listenTo(
                    this.context,
                    "request:perspective",
                    this._handlePerspectiveContextRequest
                  )
                    .listenTo(
                      this.context,
                      "request request:perspective",
                      this._handleContextRequest
                    )
                    .listenTo(this.context, "sync", this._handleContextSync)
                    .listenTo(
                      this.context,
                      "sync error error:perspective",
                      this._handleContextFinish
                    )
                    .listenTo(this.context, "request", this.blockActions)
                    .listenTo(this.context, "sync", this.unblockActions),
                this.listenTo(this.collection, "reset", function () {
                  this.isRendered && this.table && di.call(this);
                }),
                this.listenTo(this.collection, "reset", this.setFocusToFirstRow)
                  .listenTo(this.collection, "add", this.setFocusToFirstRow)
                  .listenTo(this.collection, "remove", this.setFocusToFirstRow)
                  .listenTo(
                    this.collection,
                    "destroy",
                    this.setFocusToFirstRow
                  ),
                this.collection.fetching &&
                  (this.blockActions(), this.disableEmptyViewText()),
                this.disableEmptyViewText(),
                this.listenTo(this, "dom:refresh", this._handleDomRefresh),
                this.listenTo(
                  this,
                  "show:descriptions",
                  this.showDetailRowDescriptions
                ),
                this.listenTo(this, "clickDefaultPreAction", function (J) {
                  this.triggerMethod("execute:defaultAction", J.node);
                }),
                this.collection.node &&
                  (this.listenTo(
                    this.collection.node,
                    "change:id",
                    this.setFocusToFirstRow
                  ),
                  this.listenTo(
                    this.collection.node,
                    "change:id",
                    this._clearSearchBoxes
                  ),
                  this.listenTo(
                    this.collection.node,
                    "change:id",
                    this._clearExpandedRows
                  ),
                  this.listenTo(
                    this.collection.node,
                    "change:id",
                    function () {}
                  )),
                (this._nowrapTableResizeObserver = new ResizeObserver(() => {
                  if (this._el_lastPinnedHeader) {
                    var J = Ce.call(this);
                    if (J.areaWidth > J.maxWidth) {
                      var $ = Te.call(this);
                      if ($ >= 0) {
                        const de = this.displayedColumns[$],
                          xe = this._el_headerCells[$].getBoundingClientRect(),
                          Se = Math.max(
                            xe.width - (J.areaWidth - J.maxWidth),
                            de.columnMinWidth
                          );
                        r.debug(
                          "table do resize: {0} area: {1}->{2} column: {3} {4}->{5}",
                          J.maxWidth,
                          J.areaWidth,
                          J.areaWidth - (de.columnWidth - Se),
                          $,
                          de.columnWidth,
                          Se
                        ) && console.log(r.last),
                          ve.call(this, $, { value: Se }),
                          re.call(this),
                          this.hoveredRow &&
                            this._destroyOldAndCreateNewInlineBar({
                              sender: this,
                              target: this.hoveredRow,
                              node: this.table.row(this.hoveredRow).data(),
                            });
                      } else
                        r.debug(
                          "table no resize: {0} area: {1}",
                          J.maxWidth,
                          J.areaWidth
                        ) && console.log(r.last);
                    }
                  }
                  if (this._el_verticalStickyDivider) {
                    var ue = Math.min(
                      this._el_wrapper.clientHeight,
                      this._el_table.clientHeight
                    );
                    this._el_verticalStickyDivider.style.height = `${ue}px`;
                  }
                })),
                (this._nowrapHeaderResizeObserver = new ResizeObserver((J) => {
                  if (J && J.length) {
                    const $ = J.map(
                      (ue) => +ue.target.getAttribute("csui-resize-spacing")
                    ).filter(Boolean);
                    [...new Set($)].forEach((ue) => {
                      const de = this.displayedColumns[ue - 1],
                        Ve = this._el_headerCells[ue - 1];
                      if (Ve) {
                        for (
                          var xe, Se = ue;
                          Se < this.displayedColumns.length;
                          ++Se
                        )
                          if (this.displayedColumns[Se].hasResizeHandle) {
                            xe = Se;
                            break;
                          }
                        const ne = this._el_headerCells[xe]?.querySelector(
                          ".csui-column-resize-handle"
                        );
                        if (ne) {
                          let Me;
                          le.settings.rtl
                            ? (Me =
                                Ve.getBoundingClientRect().left >
                                ne.getBoundingClientRect().right)
                            : (Me =
                                Ve.getBoundingClientRect().right <
                                ne.getBoundingClientRect().left),
                            Me
                              ? (Ve.classList.remove(
                                  "csui-resize-handle-padding"
                                ),
                                Ve.classList.remove(
                                  "csui-resize-handle-spacing"
                                ))
                              : (Ve.classList.add(
                                  de.filterable
                                    ? "csui-resize-handle-padding"
                                    : "csui-resize-handle-spacing"
                                ),
                                Ve.classList.remove(
                                  de.filterable
                                    ? "csui-resize-handle-spacing"
                                    : "csui-resize-handle-padding"
                                ));
                        }
                      }
                    });
                  }
                })),
                this.tableColumnsWrappingOn &&
                  !_e &&
                  ((this.resizeHandler = a.debounce(
                    a.bind(this._adjustColumnsIfViewResized, this),
                    50
                  )),
                  addEventListener("resize", this.resizeHandler)),
                this.listenTo(this, "before:destroy", function () {
                  this._nowrapTableResizeObserver.disconnect(),
                    this._nowrapHeaderResizeObserver.disconnect(),
                    this.tableColumnsWrappingOn &&
                      !_e &&
                      removeEventListener("resize", this.resizeHandler),
                    !this.tableColumnsWrappingOn &&
                      this._tableScrollHandler &&
                      (this._el_wrapper.removeEventListener(
                        "scroll",
                        this._tableScrollHandler
                      ),
                      delete this._tableScrollHandler),
                    Fi.call(this);
                }),
                this.options.inlineBar && this._setInlineBarEvents(),
                (this._tableColumnsResetTime = this._columnsResetTime = 1),
                (this._columnsComputeTime = 0),
                (this._isResizing = !1);
            },
            events: {
              keydown: "onKeyInView",
              "pointerdown thead": "_clearTextSelection",
            },
            _clearTextSelection: function (x) {
              x.button === 0 && document.getSelection().empty();
            },
            render: function () {
              if (this._renderingTableDelayedAsync) {
                r.debug("render: currently in async render -> skip") &&
                  console.log(r.last);
                return;
              }
              if (
                (this._initializeLocalizableLabels(),
                !(this.columns && this.columns.length))
              ) {
                this.collection && this.collection.length
                  ? (r.debug("No columns -> skip render") &&
                      console.log(r.last),
                    this._renderFake())
                  : (r.debug("No columns and no rows -> render empty text") &&
                      console.log(r.last),
                    this._renderEmpty());
                return;
              }
              r.debug("render") && console.log(r.last),
                (this._startTableRendering = new Date()),
                performance &&
                  performance.mark &&
                  performance.mark("start_table_render"),
                this._ensureViewIsIntact(),
                this._inlineBarShouldDestroy(),
                this.table &&
                  (it.call(this),
                  this._toggleExpandAllRegion &&
                    (this._toggleExpandAllRegion.destroy(),
                    delete this._toggleExpandAllRegion),
                  Fi.call(this)),
                !this.tableColumnsWrappingOn || this._canMeasureTableSize()
                  ? ((this._renderTableDelayed = !1),
                    this._beforeRenderTable(),
                    this._preRenderTable(),
                    this._renderTable())
                  : ((this._renderTableDelayed = !0),
                    (this._renderingTableDelayedAsync = !1),
                    this._beforeRenderTable(),
                    this._renderFake());
            },
            onBeforeRender: function () {
              this._startBeforeTableRendering = new Date();
            },
            onRender: function () {
              var x = new Date(),
                E = x - this._startBeforeTableRendering;
              if (this._startTableRendering) {
                var B = x - this._startTableRendering;
                r.debug(
                  "TIMINGS: rendering totally " +
                    B +
                    "ms. beforeRender...render " +
                    E +
                    "ms"
                ) && console.log(r.last),
                  performance &&
                    performance.mark &&
                    (performance.mark("end_table_render"),
                    performance.measure(
                      "table_render",
                      "start_table_render",
                      "end_table_render"
                    ));
              } else
                r.debug("TIMINGS: beforeRender...render took " + E + "ms") &&
                  console.log(r.last);
              delete this._startTableRendering;
            },
            _adjustColumnsInNoWrapMode: function (x, E, B) {
              if (!this.tableColumnsWrappingOn) {
                if (
                  (B.columnWidth != null
                    ? (E.classList.remove("csui-column-adapt"),
                      E.classList.add("csui-column-sized"))
                    : (E.classList.remove("csui-column-sized"),
                      E.classList.add("csui-column-adapt")),
                  x.get("customization_pinned"))
                ) {
                  E.classList.add("csui-nowrap-table__column_sticky"),
                    B.lastPinned &&
                      E.classList.add("csui-nowrap-table__column_last-sticky");
                  const $ = a.str.sformat("{0}px", B.stickyOffset);
                  le.settings.rtl ? (E.style.right = $) : (E.style.left = $);
                }
                if (B.columnWidth != null) {
                  var j = a.str.sformat("{0}px", B.columnWidth);
                  (E.style.width = "unset"),
                    (E.style.minWidth = j),
                    (E.style.maxWidth = j);
                } else if (B.columnMinWidth) {
                  var J = a.str.sformat("{0}px", B.columnMinWidth);
                  E.style.minWidth = J;
                }
              }
            },
            _handleDomRefresh: function () {
              if (!this.tableColumnsWrappingOn) {
                r.debug(
                  "onDomRefresh: column wrapping off -> skip handling delayed rendering"
                ) && console.log(r.last),
                  this.activeInlineForm &&
                    this.activeInlineForm.triggerMethod(
                      "dom:refresh",
                      this.activeInlineForm
                    ),
                  this.columnMenus.forEach((E) => {
                    E.triggerMethod("dom:refresh", E);
                  });
                return;
              }
              if (this._renderingTableDelayedAsync)
                r.debug(
                  "_handleDomRefresh: currently in async render -> skip"
                ) && console.log(r.last);
              else {
                if (this._renderTableDelayed)
                  if (
                    (r.debug(
                      "_handleDomRefresh -> need to render table delayed"
                    ) && console.log(r.last),
                    (this._startTableRendering = new Date()),
                    this._canMeasureTableSize())
                  ) {
                    (this._renderingTableDelayedAsync = !0),
                      r.debug(
                        "_handleDomRefresh: el is visible -> start rendering (async)"
                      ) && console.log(r.last);
                    var x = this;
                    (x._renderTableDelayed = !1),
                      (x._renderingTableDelayedAsync = !1),
                      x._beforeRenderTable(),
                      x._preRenderTable(),
                      x._renderTable();
                  } else
                    document.body.contains(this.el)
                      ? r.debug(
                          "_handleDomRefresh: el is in DOM but still not measurable -> skip render"
                        ) && console.log(r.last)
                      : r.warn(
                          "WARNING: _handleDomRefresh: el is not in DOM and therefore not measurable -> skip render (dom:refresh should not be triggered on table.view if table.view is not attached to the DOM)"
                        ) && console.log(r.last);
                else
                  r.debug(
                    "_handleDomRefresh -> checking if columns must be adjusted"
                  ) && console.log(r.last),
                    this._adjustColumnsIfViewResized();
                this.activeInlineForm &&
                  this.activeInlineForm.triggerMethod(
                    "dom:refresh",
                    this.activeInlineForm
                  );
              }
            },
            _canMeasureTableSize: function () {
              var x =
                document.body.contains(this.el) &&
                (this.el.offsetWidth ||
                  this.el.offsetHeight ||
                  this.el.getClientRects().length);
              return x;
            },
            _renderFake: function () {
              r.debug("_renderFake") && console.log(r.last),
                (this.isRendered = !0),
                this.triggerMethod("render", this);
            },
            _renderEmpty: function () {
              r.debug("_renderEmpty") && console.log(r.last),
                this.triggerMethod("before:render", this),
                this.showOrHideZeroRecordsMessage(),
                (this.isRendered = !0),
                this.triggerMethod("render", this);
            },
            _beforeRenderTable: function () {
              r.debug("_beforeRenderTable") && console.log(r.last),
                (this.isRendered = !1),
                this.triggerMethod("before:render", this),
                this._ensureFreshColumns(),
                this.updateCollectionParameters();
            },
            _preRenderTable: function () {
              if (
                (r.debug("_preRenderTable") && console.log(r.last),
                this._extraWidthForToolbarItems === void 0 &&
                  ((this._extraWidthForToolbarItems = 0),
                  this.options.inlineBar && this.options.inlineBar.viewClass))
              ) {
                var x = this.options.inlineBar.viewClass;
                if (x.estimateWidthForToolbarItems) {
                  var E = Pe.minNumberOfToolbarItems,
                    B = 13;
                  this._extraWidthForToolbarItems = Math.floor(
                    x.estimateWidthForToolbarItems(E, B)
                  );
                }
              }
              if (this.tableColumnsWrappingOn) {
                var j = this.$el.outerWidth();
                (j -= d.scrollbarWidth()),
                  (this.maxColumnsDisplayed =
                    this._calculateMaxColumnsDisplayed(j)),
                  r.debug(
                    "Table width is " +
                      j +
                      ". Displaying max. " +
                      this.maxColumnsDisplayed +
                      " columns"
                  ) && console.log(r.last),
                  this._setColumnsWrappedByAvailableWidth(),
                  r.debug(
                    "Columns displayed: " +
                      this.displayedColumns.length +
                      ", wrapped: " +
                      this.wrappedColumns.length
                  ) && console.log(r.last);
              }
            },
            _renderTable: function () {
              r.debug("_renderTable") && console.log(r.last),
                this.$el.addClass("csui-nodetable"),
                this._isSingleSelectionEnabled() &&
                  this.$el.addClass("csui-single-select"),
                $e.call(this),
                (this.accFocusedState.body.row = 0),
                (this.accFocusedState.body.column =
                  D.getNameColumnIndex(this.displayedColumns) || 0),
                this.showOrHideZeroRecordsMessage();
              const x = this._getScrollContainer();
              if (
                (x.addClass("csui-normal-scrolling"),
                this.tableColumnsWrappingOn && x.addClass("csui-no-scroll-x"),
                this.$el.parent().length > 0)
              ) {
                var E = this.$el.parent().css("display");
                E.indexOf("flex") < 0 &&
                  this.$el.addClass("csui-not-in-flex-container");
              }
              this.$el.removeClass("csui-not-ready"),
                this.tableColumnsWrappingOn &&
                  (this._adjustColumns(),
                  (this._previousViewWidth =
                    this._calculateActualTableWidth())),
                !this.tableColumnsWrappingOn &&
                  this._el_wrapper &&
                  ((this._tableScrollHandler = a.bind(
                    this._handleScrollEvent,
                    this
                  )),
                  this._el_wrapper.addEventListener(
                    "scroll",
                    this._tableScrollHandler
                  ),
                  this._el_wrapper.addEventListener(
                    "touchmove",
                    this._tableScrollHandler
                  )),
                (this.isRendered = !0),
                this.triggerMethod("render", this);
            },
            _handleScrollEvent: function (x) {
              if (this.inlineBarView) {
                var E = this.inlineBarView.el.closest("tr");
                Ne.call(this, E) && this._inlineBarShouldDestroy();
              } else
                this.hoveredRow &&
                  this._destroyOldAndCreateNewInlineBar({
                    sender: this,
                    target: this.hoveredRow,
                    node: this.table.row(this.hoveredRow).data(),
                  });
              x.target.scrollLeft > 0
                ? this._el_table.classList.add(
                    "csui-table-horizontally-scrolled"
                  )
                : this._el_table.classList.remove(
                    "csui-table-horizontally-scrolled"
                  ),
                this._hidePopovers();
            },
            _hidePopovers: function () {
              const x = d("body").find(".binf-popover");
              x && x.binf_popover("destroy");
            },
            _drawTable: function () {
              this.table
                ? (this._inlineBarShouldDestroy(),
                  this.triggerMethod("before:render", this),
                  this.table.draw(),
                  this._adjustColumns(),
                  this.triggerMethod("render", this))
                : this.render();
            },
            _calculateMaxColumnsDisplayed: function (x) {
              var E = 90,
                B = 0,
                j = 0,
                J,
                $;
              a.each(
                this.allColumns,
                function (Se) {
                  Se.attributes &&
                    Se.attributes.permanentColumn === !0 &&
                    ((J = Se.attributes && Se.attributes.widthFactor),
                    ($ = J ? E * J : E),
                    Se.isNaming && ($ += this._extraWidthForToolbarItems),
                    (j += $),
                    B++);
                },
                this
              );
              for (var ue = 0; ue < this.allColumns.length; ue++) {
                var de = this.allColumns[ue],
                  Ve,
                  xe;
                if (de.attributes && !de.attributes.permanentColumn) {
                  if (
                    ((J = de.attributes && de.attributes.widthFactor),
                    (Ve = E),
                    ($ = J ? Ve * J : Ve),
                    (j += $),
                    j > x)
                  )
                    break;
                  B++;
                }
              }
              return (
                B > this.options.maxColumnsDisplayed &&
                  (B = this.options.maxColumnsDisplayed),
                B < 1 && (B = 1),
                B
              );
            },
            _ensureFreshColumns: function () {
              (this._tableColumnsResetTime > this._columnsComputeTime ||
                this._columnsResetTime > this._columnsComputeTime ||
                ae.call(this)) &&
                this._getColumns();
            },
            _getColumns: function () {
              this.trigger("buildingColumnDefinitions", { sender: this });
              const x = [
                  "customization_resizeable",
                  "customization_resize_span",
                  "customization_min_width",
                ],
                E =
                  this.options.tableColumns?.reduce(
                    (ne, Me) => ((ne[Me.get("key")] = Me), ne),
                    {}
                  ) || {};
              var B = [];
              if (this.options.tableColumns) {
                let ze = function (we) {
                  if (
                    !(
                      we.get("onlyIfNoWrapTableMode") &&
                      this.tableColumnsWrappingOn
                    )
                  ) {
                    var Ae = we.get("key");
                    if ((Ae === ue && we.set("isNaming", !0), Me[Ae])) {
                      var Ge = this._columnModelsByKey[Ae];
                      Ae === ue && Ge.set("isNaming", !0);
                      var ei = s.getCellView(Ge),
                        Ye = [
                          "permanentColumn",
                          "noTitleInHeader",
                          "titleIconInHeader",
                          "title",
                          "align",
                          "widthFactor",
                          "isNaming",
                        ];
                      const ti = Ge.get("type") && Ge.get("definitions_order"),
                        ni = a.extend({}, we.attributes, Ge.attributes);
                      if (
                        (a.each(Ye, function (Qe) {
                          var ii = ti ? ni[Qe] : we.get(Qe);
                          ii
                            ? Ge.set(Qe, ii, { silent: !0 })
                            : ei[Qe] && Ge.set(Qe, ei[Qe], { silent: !0 });
                        }),
                        Ae === "description")
                      ) {
                        const Qe = "is_default_column",
                          ii = ti ? ni[Qe] : we.get(Qe);
                        ii != null
                          ? Ge.set(Qe, ii, { silent: !0 })
                          : ei[Qe] && Ge.set(Qe, ei[Qe], { silent: !0 });
                      }
                      a.each(
                        ie.columnCustomizationKeys,
                        function (Qe) {
                          var ii = "customization_" + Qe,
                            Ee = we.get(ii),
                            Fe = Ge.get(ii);
                          (x.includes(ii) ||
                            (Ee !== void 0 && Fe === void 0)) &&
                            Ge.set(ii, Ee, { silent: !0 });
                        },
                        this
                      ),
                        de.push(Ge);
                    } else
                      r.warn(
                        "Client side column with key '" +
                          Ae +
                          "' is not part of server columns"
                      ) && console.log(r.last);
                  }
                };
                var j = this.options.tableColumns.deepClone();
                this._columnModelsByKey = Object.fromEntries(
                  this.columns.map((we) => [we.get("column_key"), we])
                );
                var J, $;
                const ne = this.getDisplayableColumns();
                ne.forEach(function (we) {
                  var Ae = we.get("column_key");
                  we.get("isNaming") === !0 &&
                    (($ = Ae), we.unset("isNaming", { silent: !0 }));
                  var Ge = j.findWhere({ key: Ae }),
                    ei = ke(Ge, we, { withCustomizations: !0 });
                  Ge
                    ? (ei !== Ge.get("sequence") &&
                        (Ge.set("sequence", ei),
                        j.remove(Ge, { silent: !0 }),
                        j.add(Ge, { silent: !0 })),
                      Ge.get("isNaming") === !0 && (J = Ge.get("key")))
                    : j.add({ key: Ae, sequence: ei, permanentColumn: !1 });
                }, this);
                var ue = J || $ || "name",
                  de = [];
                this.tableColumnsWrappingOn ||
                  Ai(this, ne, this._columnModelsByKey);
                const Me = Object.fromEntries(
                  ne.map((we) => [we.get("column_key"), we])
                );
                j.each(ze.bind(this)),
                  de.length > 0 &&
                    (this.tableColumnsWrappingOn
                      ? Ai(this, de, this._columnModelsByKey)
                      : this.options.selectColumn &&
                        de[0].get("column_key") !== "_select" &&
                        ((E._select = new h.Model({
                          key: "_select",
                          sequence: 1,
                          permanentColumn: !0,
                          customization_resizeable: !1,
                          customization_width: 32,
                        })),
                        ze.call(this, E._select),
                        de.unshift(de.pop())),
                    (de = Ui(this, de, this._columnModelsByKey)));
                var Ve = [],
                  xe = [];
                if (this.tableColumnsWrappingOn) Ve = de;
                else {
                  const we =
                    de.length > 0 &&
                    de[0].get("column_key") === "_select" &&
                    de.shift();
                  a.each(
                    de,
                    function (Ae) {
                      var Ge = Ae.get("customization_pinned");
                      Ge ? xe.push(Ae) : Ve.push(Ae);
                    },
                    this
                  ),
                    we &&
                      (xe.length > 0 &&
                        we.set("customization_pinned", !0, { silent: !0 }),
                      we.get("customization_pinned")
                        ? xe.unshift(we)
                        : Ve.unshift(we));
                }
                var Se = xe.length > 0 ? xe.length - 1 : void 0;
                B = a.map(
                  xe.concat(Ve),
                  function (we) {
                    var Ae = we.get("column_key"),
                      Ge = s.getCellView(we),
                      ei = we.get("title") || we.get("name");
                    !ei &&
                      Ae !== "_toggledetails" &&
                      console.log("No accessible text for column header " + Ae);
                    var Ye = {
                        CellView: Ge,
                        name: Ae,
                        attributes: {},
                        noTitleInHeader: we.get("noTitleInHeader"),
                        titleIconInHeader: we.get("titleIconInHeader"),
                        isNaming: we.get("isNaming"),
                        title: ei,
                        titleAttr: we.get("titleAttr"),
                        orderable: !!we.get("sort"),
                        filterable:
                          !!we.get("filter") ||
                          a.indexOf(this.columnsWithSearch, Ae.toLowerCase()) >
                            -1,
                        className: Ge.columnClassName,
                        defaultAction: we.get("default_action"),
                        contextualMenu: we.get("contextual_menu"),
                        customHeader: we.get("customHeader"),
                        data: function (ni, Qe) {
                          if (Qe === "orderBy")
                            return we.get("sort_key") || we.get("column_key");
                          if (Qe === "filterBy")
                            return we.get("filter_key") || we.get("column_key");
                          if (Qe === "set")
                            throw new Error(
                              "Setting column value not implemented"
                            );
                          return Ge.getValue(ni, Ye);
                        },
                        render: function () {
                          return "";
                        },
                      },
                      ti = we.get("align");
                    return (
                      ti &&
                        (window.csui &&
                          window.csui.rtl &&
                          ((ti === "left" && (ti = "right")) ||
                            (ti === "right" && (ti = "left"))),
                        (Ye.className += " csui-align-" + ti)),
                      a.extend(Ye.attributes, we.attributes),
                      Ye
                    );
                  },
                  this
                );
              } else
                r.warn(
                  "No client side columns defined in this.options.tableColumns"
                );
              if (
                ((this.allColumns = B),
                (this.displayedColumns = []),
                (this.wrappedColumns = []),
                this.tableColumnsWrappingOn)
              )
                (this.allColumns = B =
                  B.filter((ne) => !ne.attributes || fe(ne.attributes))),
                  a.each(
                    B,
                    function (ne) {
                      ne.attributes &&
                        ne.attributes.permanentColumn === !0 &&
                        ((ne.columnWrapped = !1),
                        this.displayedColumns.push(ne));
                    },
                    this
                  );
              else {
                var ce;
                a.each(
                  B,
                  (ne) => {
                    if (fe(ne.attributes)) {
                      const we = this.displayedColumns.length;
                      this.displayedColumns.push(ne);
                      var Me = this.displayedColumns.length;
                      (ne.lastPinned = we === Se),
                        (ne.resizeable =
                          ne.attributes.customization_resizeable == null ||
                          ne.attributes.customization_resizeable === !0),
                        (ne.isResizeColumn =
                          ne.hasResizeHandle =
                          ne.isSpacingColumn =
                            ne.resizeable),
                        ne.resizeable
                          ? (ne.resizeNumber = Me)
                          : (ne.attributes.customization_width = E[
                              ne.name
                            ]?.get("customization_width"));
                      var ze = ne.attributes.customization_resize_span;
                      ze &&
                        (ce = {
                          startColumn: ne,
                          startIndex: we,
                          resizeNumber: void 0,
                          resizeColumn: void 0,
                          includedColumns: [],
                          endKey: ze,
                        }),
                        ce &&
                          (ce.includedColumns.push(ne),
                          !ce.resizeColumn &&
                            ne.resizeable &&
                            ((ce.resizeColumn = ne), (ce.resizeNumber = Me)),
                          ce.resizeColumn &&
                            ne.filterable &&
                            ((ce.paddingColumn = ne), (ce.paddingNumber = Me)),
                          ce.endKey === ne.name &&
                            (ce.startColumn !== ne &&
                              ce.includedColumns.forEach((Ae, Ge) => {
                                const ei = ce.paddingNumber || ce.resizeNumber;
                                (Ae.spacingNumber =
                                  ce.startIndex + Ge >= ei ? ei : void 0),
                                  (Ae.isSpacingColumn = ce.paddingNumber
                                    ? Ae === ce.paddingColumn
                                    : Ae === ce.resizeColumn),
                                  (Ae.resizeSpan = !0),
                                  (Ae.resizeStart = Ae === ce.startColumn),
                                  (Ae.resizeEnd = Ae.name === ce.endKey),
                                  (Ae.resizeNumber = ce.resizeNumber),
                                  (Ae.isResizeColumn = Ae === ce.resizeColumn),
                                  (Ae.hasResizeHandle =
                                    ce.resizeColumn && Ae.name === ce.endKey),
                                  Ae.isResizeColumn ||
                                    (Ae.attributes.customization_width = E[
                                      Ae.name
                                    ]?.get("customization_width"));
                              }),
                            (ce = void 0))),
                        ne.lastPinned && (ce = void 0);
                    }
                  },
                  this
                ),
                  ve.call(this);
              }
              (this._columnsComputeTime = new Date().getTime()),
                this.trigger("columnDefinitionsBuilt", {
                  sender: this,
                  columns: B,
                });
            },
            _setColumnsWrappedByAvailableWidth: function () {
              if (
                this.allColumns.length &&
                (this.maxColumnsDisplayed || this.options.maxColumnsDisplayed)
              ) {
                var x =
                  this.maxColumnsDisplayed || this.options.maxColumnsDisplayed;
                (this.displayedColumns = []), (this.wrappedColumns = []);
                var E = 0;
                a.each(
                  this.allColumns,
                  function (B) {
                    B.attributes &&
                      B.attributes.permanentColumn === !0 &&
                      ((B.columnWrapped = !1), E++);
                  },
                  this
                ),
                  _e
                    ? ((this.displayedColumns = a.clone(this.allColumns)),
                      (this.wrappedColumns = []))
                    : (a.each(
                        this.allColumns,
                        function (B) {
                          (!B.attributes ||
                            B.attributes.permanentColumn !== !0) &&
                            (E++,
                            x
                              ? (B.columnWrapped = E > x)
                              : (B.columnWrapped = !1));
                        },
                        this
                      ),
                      (this.displayedColumns = a.where(this.allColumns, {
                        columnWrapped: !1,
                      })),
                      (this.wrappedColumns = a.where(this.allColumns, {
                        columnWrapped: !0,
                      })));
              }
            },
            _calculateActualTableWidth: function () {
              var x = this.$el.outerWidth();
              if (this._el_tableBody) {
                var E = this._el_tableBody.scrollHeight,
                  B = d(this._el_tableBody).innerHeight();
                E > B && (x -= d.scrollbarWidth());
              }
              return x;
            },
            _adjustColumnsIfViewResized: function () {
              if (this.isRendered && this.columns && this.columns.length > 0) {
                var x = this._calculateActualTableWidth();
                if (x !== this._previousViewWidth) {
                  var E = this._previousViewWidth + 100,
                    B = this._previousViewWidth - 100;
                  if (x > E || x < B) {
                    var j = this._calculateMaxColumnsDisplayed(x);
                    j !== this.maxColumnsDisplayed
                      ? (r.debug(
                          "adjust columns if view resized: maxColumnsDisplayed differ -> render new table"
                        ) && console.log(r.last),
                        this.render())
                      : (r.debug(
                          "adjust columns if view resized: maxColumnsDisplayed equal -> adjust columns"
                        ) && console.log(r.last),
                        this._adjustColumns()),
                      (this._previousViewWidth = x);
                  } else
                    r.debug(
                      "adjust columns if view resized: table width changed minimally -> adjust columns"
                    ) && console.log(r.last),
                      this._adjustColumns();
                } else
                  r.debug(
                    "adjust columns if view resized: width not changed -> skip"
                  ) && console.log(r.last);
              }
            },
            enableEmptyViewText: function () {
              this._showEmptyViewText = !0;
            },
            disableEmptyViewText: function () {
              this._showEmptyViewText = !1;
            },
            _updateSelectedChildren: function () {
              if (this.isRendered && !this.deletingNodes && this.table) {
                var x = this.getSelectedChildren();
                this.selectedChildren.reset(x);
              }
            },
            _setInlineBarEvents: function () {
              this.listenTo(this, "closeOther", this._inlineBarShouldDestroy),
                this.options.inlineBar.options.forceInlineBarOnClick
                  ? this.listenTo(this, "row:clicked", function (x) {
                      if (this.inlineBarView) {
                        var E = this.inlineBarView.model.get("id"),
                          B = x.node.get("id");
                        if (E === B) return;
                      }
                      this.options.inlineBar.viewClass &&
                        this._destroyOldAndCreateNewInlineBar(x);
                    })
                  : this.options.inlineBar.options.showInlineBarOnHover &&
                    (this.listenTo(
                      this,
                      "enterTableRow",
                      this._destroyOldAndCreateNewInlineBar
                    ),
                    this.listenTo(
                      this,
                      "leaveTableRow",
                      this._inlineBarShouldDestroy
                    )),
                this.listenTo(this.collection, "reset", this._destroyInlineBar),
                this.collection.node &&
                  this.listenTo(
                    this.collection.node,
                    "change:id",
                    this._destroyInlineBar
                  );
            },
            _showInlineBar: function (x) {
              var E =
                this._allSelectedNodes.length === 0 &&
                this.getSelectedChildren().length === 0;
              if (E)
                if (this.inlineBarView) this._savedHoverEnterArgs = x;
                else {
                  if (
                    ((this._savedHoverEnterArgs = null),
                    !this.tableColumnsWrappingOn && Ne.call(this, x.target))
                  )
                    return;
                  (this.inlineBarView = new this.options.inlineBar.viewClass(
                    a.extend(
                      {
                        context: this.options.context,
                        originatingView: this.options.originatingView,
                        commands: this.defaultActionController.commands,
                        model: x.node,
                      },
                      this.options.inlineBar.options
                    )
                  )),
                    this.listenToOnce(
                      this.inlineBarView,
                      "destroy",
                      function () {
                        this.inlineBarView &&
                          this.stopListening(this.inlineBarView),
                          this._savedHoverEnterArgs &&
                            this._destroyOldAndCreateNewInlineBar(
                              this._savedHoverEnterArgs
                            );
                      },
                      this
                    );
                  var B = this.getNameCell(x.target);
                  if (B && B.length === 1) {
                    var j = B.find(".csui-table-cell-name-appendix"),
                      J = new i.Region({ el: j });
                    J.show(this.inlineBarView),
                      this.inlineBarView.$el.parent().length > 0 &&
                        B.addClass("csui-table-actionbar-shown");
                    //CSCCustom-start CSUI0001: remove add version from + toolbar
                    if(this.inlineBarView.$el.parent().length > 0) {
                        var nameCell = B;
                        if(nameCell.find('li[data-csui-command="addversion"]')) {
                            nameCell.find('li[data-csui-command="addversion"]').hide();
                        }
                    }
                    //CSCCustom-end
                  }
                }
            },
            _inlineBarShouldDestroy: function () {
              this._destroyInlineBar();
            },
            _destroyOldAndCreateNewInlineBar: function (x) {
              this._inlineBarShouldDestroy(),
                this.lockedForOtherContols || this._showInlineBar.call(this, x);
            },
            _destroyInlineBar: function () {
              if (this.inlineBarView) {
                var x = this.inlineBarView.$el.parent();
                x
                  .closest(".csui-table-actionbar-shown")
                  .removeClass("csui-table-actionbar-shown"),
                  this.inlineBarView.destroy(),
                  (this.inlineBarView = null);
              }
            },
            _clearExpandedRows: function () {
              this.isRendered && (this.expandedDetailRows = {});
            },
            onKeyInView: function (x) {
              if (x.keyCode === 9 && this.activeInlineForm) {
                if (
                  (x.preventDefault(),
                  x.stopPropagation(),
                  d(document.activeElement).parents(".csui-inline-editform")
                    .length === 0)
                ) {
                  var E = this.$el.find(".csui-inline-editform input")[0];
                  E && E.focus();
                }
                return;
              }
            },
            currentlyFocusedElement: function () {
              if (a.isFunction(this.activeInlineForm?.currentlyFocusedElement))
                return this.activeInlineForm.currentlyFocusedElement();
              if (this.accFocusedState.focusView === "tableHeader") {
                if (this.tableCaptionView)
                  return this.tableCaptionView.currentlyFocusedElement();
              } else if (this.tableBodyView)
                return this.tableBodyView.currentlyFocusedElement();
              return d();
            },
            setFocusToFirstRow: function () {
              this.isRendered &&
                ((this.accFocusedState.body.row = 0),
                (this.accFocusedState.body.column =
                  D.getNameColumnIndex(this.displayedColumns) || 0));
            },
            renderError: function () {
              this.table ||
                (Xi.call(this),
                d("<div></div>", { id: "message" })
                  .html(t.MessageHelper.toHtml())
                  .appendTo(this.$el));
            },
            _plugHeaderBodyViews: function () {
              var x = this;
              (this.tableCaptionView = new F({
                el: this.$("thead"),
                displayedColumns: this.displayedColumns,
                searchBoxes: this.searchBoxes,
                _getActiveInlineForm: a.bind(function () {
                  return this.activeInlineForm;
                }, this),
                accFocusedColumn: this.accFocusedState.headerColumn,
                accSearchFocused: this.accFocusedState.accSearchFocused,
                accMenuFocused: this.accFocusedState.accMenuFocused,
                tableView: this,
              })),
                this.propagateEventsToViews(this.tableCaptionView),
                this.tableCaptionView.listenTo(
                  this.tableCaptionView,
                  "closeOtherControls",
                  function () {
                    x.trigger("closeOther");
                  }
                ),
                this.tableCaptionView.listenTo(
                  this.tableCaptionView,
                  "sorting:toggle",
                  function (E) {
                    if (x.displayedColumns[E].orderable) {
                      var B = "asc",
                        j = x.table.order();
                      if (a.isArray(j) && j.length > 0) {
                        var J = j[0][0],
                          $ = j[0][1];
                        J === E && $ === B && (B = "desc");
                      }
                      x.table.order([E, B]).draw();
                    }
                  }
                ),
                this.tableCaptionView.$el
                  .off("focusin." + x.cid)
                  .on("focusin." + x.cid, function () {
                    x.accFocusedState.focusView = "tableHeader";
                  }),
                this.tableCaptionView.render(),
                i.triggerMethodOn(this.tableCaptionView, "before:show"),
                i.triggerMethodOn(this.tableCaptionView, "show"),
                (this.tableBodyView = new D({
                  el: d(this._el_tableBody),
                  collection: this.collection,
                  displayedColumns: this.displayedColumns,
                  _getActiveInlineForm: a.bind(function () {
                    return this.activeInlineForm;
                  }, this),
                  startInlineFormForEdit: a.bind(
                    this.startInlineFormForEdit,
                    this
                  ),
                  accFocusedCell: this.accFocusedState.body,
                  tableView: this,
                })),
                this.propagateEventsToViews(this.tableBodyView),
                this.tableBodyView.listenTo(
                  this.tableBodyView,
                  "closeOtherControls",
                  function () {
                    x.trigger("closeOther");
                  }
                ),
                this.tableBodyView.$el
                  .off("focusin." + x.cid)
                  .on("focusin." + x.cid, function () {
                    x.accFocusedState.focusView = "tableBody";
                  }),
                this.tableBodyView.render(),
                i.triggerMethodOn(this.tableBodyView, "before:show"),
                this.tableBodyView.triggerMethod("show");
            },
            _destroyTableHeaderAndBodyViews: function () {
              this.tableCaptionView &&
                ((this.accFocusedState.headerColumn =
                  this.tableCaptionView.accFocusedColumn),
                (this.accFocusedState.accSearchFocused =
                  this.tableCaptionView.accSearchFocused),
                (this.accFocusedState.accMenuFocused =
                  this.tableCaptionView.accMenuFocused),
                this.tableCaptionView.destroy(),
                (this.tableCaptionView = null)),
                this.tableBodyView &&
                  (this.tableBodyView.destroy(), (this.tableBodyView = null));
            },
            setDeletingNodesState: function (x) {
              this.deletingNodes = x;
            },
            _handleContextRequest: function () {
              this._fetchingContext ||
                ((this._fetchingContext = !0),
                (this._columnsReset = !1),
                (this._collectionReset = !1),
                this.context.perspective &&
                  !this._fetchingPerspectiveContext &&
                  (this._columnsReset = this.columns.length > 0));
            },
            _handlePerspectiveContextRequest: function () {
              this._fetchingPerspectiveContext = !0;
            },
            _handleContextSync: function () {
              this._fetchingContext &&
                ((this._fetchingContext = !1),
                this._columnsReset
                  ? (r.debug(
                      "_handleContextSync: columns reset -> full render"
                    ) && console.log(r.last),
                    this.render())
                  : this._collectionReset &&
                    this.isRendered &&
                    (r.debug("_handleContextSync: collection reset -> draw") &&
                      console.log(r.last),
                    this._drawTable()));
            },
            _handleContextFinish: function () {
              (this._fetchingContext = !1),
                (this._fetchingPerspectiveContext = !1),
                this.unblockActions();
            },
            _handleTableColumnsReset: function () {
              (this._tableColumnsResetTime = new Date().getTime()),
                this._fetchingContext
                  ? ((this._columnsReset = !0),
                    r.debug("_handleTableColumnsReset: fetching -> skip") &&
                      console.log(r.last))
                  : (r.debug("_handleTableColumnsReset -> full render") &&
                      console.log(r.last),
                    this.render());
            },
            _handleColumnsReset: function () {
              (this._columnsResetTime = new Date().getTime()),
                this._fetchingContext
                  ? ((this._columnsReset = !0),
                    this._collectionReset
                      ? (r.debug(
                          "_handleColumnsReset: fetching -> collection was reset -> handleContextSync"
                        ) && console.log(r.last),
                        this._handleContextSync())
                      : r.debug("_handleColumnsReset: fetching -> skip") &&
                        console.log(r.last))
                  : (r.debug("_handleColumnsReset -> full render") &&
                      console.log(r.last),
                    this.render());
            },
            _dataTablesOrderNeutral: function () {
              var x = this.collection && this.collection.orderBy;
              if (this.table && x && x.length > 0) {
                x = x.split(" ");
                var E = x[0],
                  B = this._getColumnIndexFromColumnName(E);
                B === -1 && (B = this._getColumnIndexFromSortKey(E)),
                  B === -1 && this.table.orderNeutral();
              }
            },
            _handleModelsReset: function () {
              //PSD
              // this.collection.models = this.collection.models.filter(item => item.attributes.type !== 749);
              //PSD
              this._dataTablesOrderNeutral(),
                this.enableEmptyViewText(),
                this._fetchingContext
                  ? ((this._collectionReset = !0),
                    this._columnsReset
                      ? (r.debug(
                          "ModelsReset: fetching and columns reset -> handleContextSync"
                        ) && console.log(r.last),
                        this._handleContextSync())
                      : r.debug("ModelsReset: fetching -> skip") &&
                        console.log(r.last))
                  : this.isRendered
                  ? (r.debug("ModelsReset: -> draw") && console.log(r.last),
                    this._drawTable())
                  : (r.debug(
                      "ModelsReset: table not rendered -> full render"
                    ) && console.log(r.last),
                    this.render());
            },
            _handleModelsUpdate: function (x, E) {
              if (this.isRendered) {
                //PSD
                // this.collection.models = this.collection.models.filter(item => item.attributes.type !== 749);
                //PSD
                var B = E.changes.added;
                if (
                  B.length > 0 &&
                  this.table &&
                  (a.each(B, function (J) {
                    J.unset(b.isSelectedModelAttributeName);
                  }),
                  r.debug("_handleModelsUpdate: -> draw") &&
                    console.log(r.last),
                  this._drawTable(),
                  this.tableColumnsWrappingOn)
                ) {
                  var j = a.find(B, function (J) {
                    if (J.get("description") && J.get("description").length > 0)
                      return !0;
                  });
                  j && this.trigger("refresh:rightTableToolbar");
                }
              }
            },
            _handleModelRemove: function (x, E, B) {
              if (this.isRendered)
                if (
                  (E.node &&
                    (E.node.get("versionable") ||
                      E.node.get("versionable") === null) &&
                    E.node.fetch({ refreshCache: !0 }),
                  this.deletingNodes === !0)
                ) {
                  if (x) {
                    var j;
                    this.table
                      .rows(function (J, $, ue) {
                        return $.get("id") === x.get("id") ? ((j = J), !0) : !1;
                      })
                      .data(),
                      j !== void 0 &&
                        d(this.$el.find(this.table.row(j).node())).hide();
                  }
                } else
                  r.debug("_handleModelRemove: -> draw") && console.log(r.last),
                    this._drawTable();
            },
            updateRow: function (x) {
              if (this.isRendered && this.table) {
                var E = a.keys(x.changedAttributes());
                if (!(E.length === 1 && E[0] === "favorite")) {
                  var B = this.collection.indexOf(x);
                  if (B !== void 0) {
                    if (this.table) {
                      var j = d(this.table.row(B).node()),
                        J = this.table.row(B).child();
                      if (a.keys(x.changed).length === 1) {
                        if (x.changed[b.isSelectedModelAttributeName] != null) {
                          var $ = x.get(b.isSelectedModelAttributeName);
                          $
                            ? (j.addClass("binf-active"),
                              a.each(J, function (de) {
                                d(de).addClass("binf-active");
                              }))
                            : (j.removeClass("binf-active"),
                              a.each(J, function (de) {
                                d(de).removeClass("binf-active");
                              })),
                            di.call(this);
                          return;
                        }
                        if (x.changed.csuiDelayedActionsRetrieved != null)
                          return;
                      }
                      x.get("isCut") === !0
                        ? (j && j.addClass("csui-cut-row"),
                          J && J.addClass("csui-cut-row"))
                        : (j && j.removeClass("csui-cut-row"),
                          J && J.removeClass("csui-cut-row"));
                    }
                    this.activeInlineForm &&
                      this.activeInlineForm.model !== x &&
                      this.cancelAnyExistingInlineForm({ silent: !0 });
                    var ue = this._getScrollContainer().scrollTop();
                    r.debug("updateRow: -> draw") && console.log(r.last),
                      this.triggerMethod("before:render"),
                      this.table.row(B).invalidate(),
                      this.table.draw(),
                      this._getScrollContainer().scrollTop(ue),
                      this.triggerMethod("render"),
                      this.table &&
                        (this.activeInlineForm &&
                          this.activeInlineForm.triggerMethod(
                            "dom:refresh",
                            this.activeInlineForm
                          ),
                        this._adjustColumns());
                  }
                }
              }
            },
            onAfterShow: function () {
              this._adjustColumns();
            },
            getNameCell: function (x) {
              var E = D.getNameColumnIndex(this.displayedColumns);
              if (E !== void 0) {
                var B = d(x).children()[E];
                return d(B);
              }
            },
            updateCollectionParameters: function () {
              var x = this.collection,
                E = this.context,
                B = x.makeFieldsV2,
                j = x.makeExpandableV2,
                J = {},
                $ = {};
              this.collection.setFields &&
                (this._ensureFreshColumns(),
                (B || j) &&
                  x.getResourceScope &&
                  x.setResourceScope &&
                  (this._originalCollectionScope
                    ? x.setResourceScope(this._originalCollectionScope)
                    : (this._originalCollectionScope = x.getResourceScope())),
                a.each(
                  this.allColumns,
                  function (ue) {
                    var de = ue.CellView;
                    if (de) {
                      if (B && de.getModelFields) {
                        var Ve = de.getModelFields({
                          collection: x,
                          context: E,
                          column: ue,
                        });
                        Ve && te.mergePropertyParameters(J, Ve);
                      }
                      if (j && de.getModelExpand) {
                        var xe = de.getModelExpand({
                          collection: x,
                          context: E,
                          column: ue,
                        });
                        xe && te.mergePropertyParameters($, xe);
                      }
                      de.updateCollectionParameters &&
                        de.updateCollectionParameters({
                          collection: x,
                          context: E,
                          column: ue,
                        });
                    }
                  },
                  this
                ),
                a.isEmpty(J) || x.setFields(J),
                a.isEmpty($) || x.setExpand($));
            },
            clearFilter: function (x, E) {
              return (
                this.table &&
                  (E &&
                    !d.isEmptyObject(this.options.filter) &&
                    (this.options.filter = a.omit(
                      this.options.filter,
                      E.split(",")
                    )),
                  this.options.filter && delete this.options.filter.name,
                  this.table.search("").columns().search("").draw()),
                this
              );
            },
            setFilter: function (x) {
              this.table &&
                (d.isEmptyObject(this.options.filter)
                  ? (this.options.filter = x)
                  : (this.options.filter = a.extend(this.options.filter, x)),
                this._drawTable());
            },
            resetOrder: function (x) {
              return this.collection.resetOrder(), this;
            },
            getScreenRowCount: function (x) {
              var E = this.table && Oe.call(this);
              if (E) {
                var B = d("#" + E.dom.table.id),
                  j =
                    (B &&
                      B[0].childNodes[1] &&
                      B[0].childNodes[1].clientHeight) ||
                    0,
                  J = B && B.dataTable().$("tbody tr"),
                  $ = (J[0] && J[0].clientHeight) || 0;
                return $ > 0 ? Math.floor(j / $) : 0;
              }
              return 0;
            },
            getSelectedChildren: function () {
              var x = {};
              return (
                (x[b.isSelectedModelAttributeName] = !0),
                this.collection.where(x)
              );
            },
            clearChildrenSelection: function () {
              var x = this.table && Oe.call(this);
              x && x.fnSelectNone();
            },
            getFocusedChild: function () {
              if (this.accFocusedState.body.row)
                return this.collection.at(this.accFocusedState.body.row);
            },
            cancelFetch: function () {
              this.table && this.table.clear();
            },
            showDetailRowDescriptions: function (x) {
              this.tableColumnsWrappingOn &&
                this.options.descriptionRowView &&
                ((this.options.descriptionRowViewOptions.showDescriptions = x),
                a.each(this._detailRowsDescriptionTRs, function (E) {
                  x
                    ? E.rowEl.removeClass("binf-hidden")
                    : E.rowEl.addClass("binf-hidden"),
                    E.view.trigger("dom:refresh");
                }),
                this.trigger("dom:refresh"));
            },
            enableLocationColumn: function (x) {
              this.options.locationColumn !== x &&
                (this.options.locationColumn = x);
            },
            enableRefresh: function (x) {
              this.refreshEnabled = x;
            },
            applyFilter: function (x) {
              if (this.options.clientSideDataOperation)
                this.clientSideSearch(x.column);
              else {
                var E = {};
                a.keys(x).indexOf("column") === -1
                  ? (E = x)
                  : (E[x.column] = x.keywords),
                  this.collection.fetching
                    ? (this.filterValuePending = E)
                    : this.collection.setFilter(E, !1) &&
                      (this.collection.resetLimit(!1),
                      this.collection.fetch({ reset: !0 }));
              }
            },
            cancelAnyExistingInlineForm: function (x) {
              this.activeInlineForm && this.activeInlineForm.cancel(x);
            },
            startCreateNewModel: function (x, E) {
              this.cancelAnyExistingInlineForm(),
                this.collection &&
                  this.collection.node &&
                  (x.set("parent_id", this.collection.node.get("id")),
                  (x.isLocallyCreated = !0),
                  (x.inlineFormView = E),
                  this.collection.add(x, { at: 0 }));
            },
            startInlineFormForEdit: function (x) {
              if (this.collection.contains(x)) {
                this.cancelAnyExistingInlineForm();
                var E = y.getInlineFormView(x.get("type"));
                E || (E = y.getInlineFormView(-1)),
                  E &&
                    ((x.inlineFormView = E),
                    x.set("csuiInlineFormErrorMessage", "dummy", {
                      silent: !0,
                    }),
                    x.unset("csuiInlineFormErrorMessage"));
              }
            },
            showOrHideZeroRecordsMessage: function () {
              if (
                (this.$el.find("div.csui-table-empty").remove(),
                this.collection.length === 0)
              ) {
                d(this._el_tableBody).empty(),
                  this.$el.addClass("csui-table-empty"),
                  this._setEmptyViewText();
                var x =
                    "csui-table-empty csui-table-empty-default" +
                    (this.canAddItemsToContainer && this.addItemsPermissions
                      ? " csui-can-add-items"
                      : ""),
                  E = d(
                    "<div class='" +
                      x +
                      "'><p class='csui-no-result-message' role='status'>" +
                      this.emptyTableText +
                      "</p></div>"
                  );
                E.attr("title", this.emptyTableText),
                  this._showEmptyViewText || E.addClass("csui-state-loading"),
                  this.$el.append(E),
                  this.trigger("refresh:rightTableToolbar");
              } else
                this.$el.removeClass("csui-table-empty"),
                  this._renderedEmptyTable && (this._previousViewWidth = 0);
              this._renderedEmptyTable = this.collection.length === 0;
            },
            _setEmptyViewText: function () {
              if (((this.emptyTableText = ""), this._showEmptyViewText)) {
                var x = this.options.customLabels
                  ? this.options.customLabels
                  : this.localizableLabels;
                if (this.options.customLabels && x.emptyTableText)
                  this.emptyTableText = x.emptyTableText;
                else {
                  (this.emptyTableText = this.addItemsPermissions
                    ? x.zeroRecords
                    : u.noPermissions),
                    (this.emptyTableText = this.canAddItemsToContainer
                      ? this.emptyTableText
                      : x.zeroRecords);
                  var E = a.size(this.collection.filters);
                  E > 1
                    ? (this.emptyTableText = x.emptySearchTable)
                    : E === 1 &&
                      this.collection.filters.name &&
                      (this.emptyTableText = x.emptySearchTable);
                }
              }
            },
            setCustomLabels: function (x) {
              var E =
                this.getOption("customLabels") ||
                this.getOption("tableTexts") ||
                {};
              a.isFunction(E) && (E = E.call(this)),
                (this.options.customLabels = this._fillDefaultLocalizableLabels(
                  x,
                  E
                ));
              function B($, ue) {
                return a.reduce(
                  a.keys($),
                  function (de, Ve) {
                    var xe = $[Ve];
                    if (a.isObject(xe)) {
                      var Se = ue[Ve] || (ue[Ve] = {});
                      return de || B(xe, Se);
                    }
                    var ce = ue[Ve] != xe;
                    return (ue[Ve] = xe), de || ce;
                  },
                  !1
                );
              }
              if (this.table) {
                var j = a.deepClone(this.options.customLabels);
                e.camelToHungarian(e.defaults.oLanguage, j);
                var J = B(j, this.table.settings()[0].oLanguage);
                J && this.collection.length === 0 && this._drawTable();
              }
            },
            _fillDefaultLocalizableLabels: function () {
              var x = Array.prototype.slice.call(arguments),
                E = { paginate: {}, aria: {}, tooltip: {} };
              a.each(x, function (j) {
                j.zeroRecordsMsg != null &&
                  j.zeroRecords == null &&
                  ((j.zeroRecords = j.zeroRecordsMsg), delete j.zeroRecordsMsg),
                  a.defaults(E, j),
                  a.defaults(E.paginate, j.paginate),
                  a.defaults(E.aria, j.aria);
              });
              function B(j) {
                a.each(a.keys(j), function (J) {
                  var $ = j[J];
                  a.isObject($)
                    ? B($)
                    : ($ === !1 || $ === null) && delete j[J];
                });
              }
              return (
                B(E),
                a.defaults(E, {
                  emptyTable: u.NodeTableNoItems,
                  emptySearchTable: u.NodeTableNoSearchResult,
                  zeroRecords: u.NodeTableNoItems,
                  loadingRecords: u.NodeTableLoadingItems,
                  processing: u.NodeTableProcessingItems,
                  info: u.NodeTablePageInfo,
                  infoEmpty: u.NodeTableEmptyPageInfo,
                  infoFiltered: u.NodeTableFilteredPageInfo,
                  infoThousands: u.NodeTablePageThousandsSeparator,
                  infoPostFix: u.NodeTablePageInfoSuffix,
                  lengthMenu: u.NodeTablePageSizeSelector,
                  search: u.NodeTablePageFilterLabel,
                }),
                a.defaults(E.paginate, {
                  first: u.NodeTablePagingFirst,
                  last: u.NodeTablePagingLast,
                  previous: u.NodeTablePagingPrevious,
                  next: u.NodeTablePagingNext,
                }),
                a.defaults(E.aria, {
                  sortedDescending: u.NodeTableSortedDescendingColumnAria,
                  sortedAscending: u.NodeTableSortedAscendingColumnAria,
                }),
                a.defaults(E.tooltip, {
                  sortAscending: u.NodeTableSortAscendingTooltip,
                  sortDescending: u.NodeTableSortDescendingTooltip,
                  isUnsorted: u.NodeTableIsUnsortedTooltip,
                }),
                E
              );
            },
            _initializeLocalizableLabels: function () {
              var x =
                this.getOption("customLabels") ||
                this.getOption("tableTexts") ||
                {};
              a.isFunction(x) && (x = x.call(this)),
                (this.localizableLabels =
                  this._fillDefaultLocalizableLabels(x));
            },
            _handlePendingFilter: function () {
              this.isRendered &&
                (a.isEmpty(this.filterValuePending) ||
                  (this.collection.resetLimit(!1),
                  this.collection.setFilter(this.filterValuePending),
                  (this.filterValuePending = {})));
            },
            _handleResponseSortBy: function () {
              var x = this.collection.sorting;
              if (x && x.sort && x.sort.length > 0 && x.sort[0].value) {
                var E = x.sort[0].value,
                  B = E.indexOf("_"),
                  j = E.substring(B + 1),
                  J = E.substring(0, B),
                  $,
                  ue = this.collection.sortingColumnKey,
                  de =
                    ue && ue.lastIndexOf("_formatted") === -1
                      ? ue
                      : this._getSortableColumnKey(j);
                ($ = this._getColumnIndexFromColumnName(de)),
                  $ === -1 && ($ = this._getColumnIndexFromSortKey(de)),
                  this.table && $ !== -1 && this.table.order([parseInt($), J]);
                var Ve = de + " " + J;
                this.orderByFromServer || (this.orderByFromServer = Ve);
                var xe = this.collection.setOrder(Ve, !1);
                if (
                  (this.table && gi.call(this, this.table.order(), de),
                  ue && this.enableViewState && xe)
                ) {
                  var Se = de + " " + J;
                  this.getViewStateOrderBy() !== Se &&
                    this.setViewStateOrderBy([Se], { default: !0 });
                }
              }
            },
            clientSideSearch: function (x) {
              var E = {};
              a.each(this.searchBoxes, function (B) {
                var j = B.getColumn(),
                  J = B.getValue();
                J.length && (E[j] = J);
              }),
                this.collection.resetLimit(!1),
                this.collection.setFilter(E);
            },
            resetScrollToTop: function () {
              this.isRendered && this._getScrollContainer().scrollTop(0);
            },
            _getScrollContainer: function () {
              return this.tableColumnsWrappingOn
                ? d(this._el_tableBody)
                : d(this._el_wrapper);
            },
            _clearSearchBoxes: function () {
              this.isRendered &&
                a.each(this.searchBoxes, function (x) {
                  x.hideAndClear();
                });
            },
            _adjustColumns: function () {
              if (
                !this.tableColumnsWrappingOn ||
                _e ||
                !this.displayedColumns ||
                !this.$el.is(":visible")
              )
                return;
              if (
                (ri("adjusted_colstyles_js_" + this.cid),
                this.collection.node &&
                  this.collection.node.get("type") === 136)
              ) {
                var x = a.findWhere(this.displayedColumns, { name: "order" });
                x && (x.CellView.hasFixedWidth = !0);
              }
              var E = this.$el.width();
              this.$el.find(".csui-normal-scrolling").hasScroll() &&
                (E -= d.scrollbarWidth());
              var B = 0,
                j = 0,
                J,
                $ = d(this._el_headerCells);
              if (this.collection.length > 0)
                if (this.activeInlineForm) {
                  var ue = this.collection.at(0).get("id"),
                    de = this.activeInlineForm.model.get("id");
                  if (ue === de)
                    if (this.collection.length > 1) {
                      var Ve = d(
                        this.$el.find(
                          "table>tbody>tr:not(.csui-table-row-shows-inlineform) .csui-table-cell-_select"
                        )[0]
                      ).closest("tr");
                      J = Ve.children();
                    } else
                      (J = $),
                        this.$el
                          .find(".csui-inlineform-parent")
                          .addClass("csui-inline-form-full-width");
                  else
                    J = this.$el.find("table>tbody>tr:first-child").children();
                } else
                  J = this.$el.find("table>tbody>tr:first-child").children();
              else J = $;
              var xe = {},
                Se = [],
                ce = this.displayedColumns,
                ne = 0,
                Me,
                ze = 0,
                we = 0,
                Ae = 0,
                Ge = this._extraWidthForToolbarItems,
                ei = a.findWhere(ce, { isNaming: !0 });
              ei || (Ge = 0),
                J.each(function (mi) {
                  if (mi < ce.length) {
                    var ci = d(this),
                      Ii = Math.max(ci.outerWidth(), d($[mi]).outerWidth()),
                      Xe = ce[mi];
                    if (Xe.CellView.hasFixedWidth) (j += Ii), B++;
                    else {
                      var Be =
                        (Xe.attributes && Xe.attributes.widthFactor) || 1;
                      Be && Be !== 1
                        ? ((xe[mi] = Be), (ne += Be))
                        : Xe.CellView && Xe.CellView.flexibleWidth
                        ? ((we += Ii), Ae++)
                        : (Se.push(mi), (ne += 1)),
                        Be > ze && ((ze = Be), (Me = mi));
                    }
                  }
                });
              var Ye = E - j - we - Ge,
                ti = ce.length - B - Ae,
                ni = ti > 0 ? Ye / ti : 0,
                Qe = 0,
                ii = ne / ti;
              a.each(xe, function (mi, ci) {
                var Ii = mi / ii,
                  Xe = ni * Ii;
                Qe + Xe > Ye && ((Xe = Ye - Qe), Xe < 0 && (Xe = 0)),
                  (Xe = Math.floor(Xe)),
                  (xe[ci] = Xe),
                  (Qe += Xe);
              });
              var Ee;
              Se.length > 0
                ? ((ni = (Ye - Qe) / Se.length / ii),
                  (ni = Math.floor(ni)),
                  (Ee = Ye - Qe - ni * Se.length))
                : ((ni = 0), (Ee = Ye - Qe)),
                (Ee = Math.floor(Ee));
              var Fe = {},
                Ki = `#{0} [data-csui-attribute="{1}"] {2} 
`,
                ki = "",
                We = this;
              J.each(function (mi) {
                if (!(mi >= ce.length)) {
                  var ci = d(this),
                    Ii = 0,
                    Xe = ce[mi];
                  Xe.isNaming && (Ii = Ge);
                  var Be;
                  if (Xe.CellView.hasFixedWidth || Xe.CellView.flexibleWidth) {
                    var wi =
                      Math.max(ci.outerWidth(), d($[mi]).outerWidth()) + Ii;
                    Be = a.str.sformat("{width: {0}px}", wi);
                  } else {
                    var qi;
                    xe[mi] && xe[mi] > 0 ? (qi = xe[mi]) : (qi = ni),
                      mi === Me && Ee && (qi += Ee),
                      (qi += Ii),
                      (Be = a.str.sformat(
                        "{min-width: {0}px; max-width: {1}px}",
                        qi,
                        qi
                      ));
                  }
                  (ki += a.str.sformat(
                    Ki,
                    We.cid,
                    Xe.attributes.column_key,
                    Be
                  )),
                    (Fe[Xe.className] = Be);
                }
              }),
                (ki += `#${We.cid} td.csui-details-row:only-child[colspan="${J.length}"] > :only-child {width: ${E}px;}`),
                Hi("adjusted_colstyles_js_" + We.cid, ki),
                (this.cachedColumnWidths = Fe),
                this.accFocusedState.body.column > ce.length - 1 &&
                  (this.accFocusedState.body.column = ce.length - 1);
              function ri(mi) {
                var ci = document.getElementById(mi);
                ci && document.getElementsByTagName("head")[0].removeChild(ci);
              }
              function Hi(mi, ci) {
                var Ii = document.createElement("style");
                (Ii.type = "text/css"),
                  (Ii.id = mi),
                  (Ii.innerHTML = ci),
                  document.getElementsByTagName("head")[0].appendChild(Ii);
              }
              this._showOrHideAlternativeHeaderView();
            },
            _showOrHideAlternativeHeaderView: function () {
              this._alternativeHeaderRegion &&
                (this.selectedChildren.length > 0
                  ? this._alternativeHeaderRegion.$el.addClass(
                      "csui-table-alternative-header-visible"
                    )
                  : this._alternativeHeaderRegion.$el.removeClass(
                      "csui-table-alternative-header-visible"
                    ));
            },
            _createAlternativeHeaderView: function () {
              var x = this.options.alternativeHeader.options,
                E,
                B;
              if (x && x.toolbarItems && x.toolbarItems.tableHeaderToolbar) {
                var j = x.toolbarItems.tableHeaderToolbar;
                E = j ? j.options : void 0;
                var J = {
                  nodes: this.selectedChildren,
                  container: this.collection.node,
                  context: this.context,
                  collection: this.collection,
                };
                (this._alternativeHeaderCommandController =
                  x.toolbarCommandController ||
                  new N({ commands: x.commands })),
                  (B = new G(j, {
                    status: J,
                    commands: this._alternativeHeaderCommandController.commands,
                    delayedActions: this.collection.delayedActions,
                    mask: x.toolbarItemsMask,
                  }));
              }
              var $ = new this.options.alternativeHeader.viewClass(
                a.extend(
                  {
                    collection: B,
                    toolbarName: "tableHeader",
                    originatingView: this.options.parentView,
                    keyboardNavigationEnabled: !0,
                    selectedNodes: this.selectedChildren,
                  },
                  E
                )
              );
              return (
                this._alternativeHeaderCommandController &&
                  (this.listenTo(
                    this._alternativeHeaderCommandController,
                    "before:execute:command",
                    function (ue) {
                      r.debug(
                        "command " + ue.commandSignature + " is starting"
                      ) && console.log(r.last),
                        (this.lockedForOtherContols = !0),
                        this._destroyInlineBar(),
                        $.trigger("before:execute:command", ue);
                    }
                  ),
                  this.listenTo(
                    this._alternativeHeaderCommandController,
                    "after:execute:command",
                    function (ue) {
                      r.debug("command is finished") && console.log(r.last),
                        (this.lockedForOtherContols = !1),
                        $.trigger("after:execute:command", ue);
                    }
                  )),
                $
              );
            },
            _toolbarItemClicked: function (x, E) {
              var B = this.getSelectedChildren(),
                j = {
                  context: this.context,
                  nodes: new this._ViewCollection(B),
                  container: this.collection.node,
                  collection: this.collection,
                  originatingView: this.options.originatingView,
                  toolItemView: x,
                };
              this._alternativeHeaderCommandController.toolitemClicked(
                E.toolItem,
                j
              );
            },
            _getSortableColumnKey: function (x) {
              var E = x;
              return (
                (x = x.toLowerCase()),
                a.find(this.displayedColumns, function (B, j) {
                  if (
                    B.attributes.sort_key === x ||
                    B.name.toLowerCase() === x ||
                    B.attributes.column_key === x
                  )
                    return (E = B.attributes.column_key), !0;
                }),
                E
              );
            },
            _getColumnIndexFromColumnName: function (x) {
              var E = -1;
              return (
                this.displayedColumns &&
                  this.displayedColumns.some(function (B, j) {
                    if (B.name == x) return (E = j), !0;
                  }, this),
                E
              );
            },
            _getColumnIndexFromSortKey: function (x) {
              var E = -1;
              return (
                this.displayedColumns &&
                  this.displayedColumns.some(function (B, j) {
                    if (B.attributes.sort_key == x) return (E = j), !0;
                  }, this),
                E
              );
            },
            _collectionOrderByChanged: function () {
              var x = this.collection.orderBy;
              if (x && this.table) {
                x = x.split(" ");
                var E = x[0],
                  B = x[1],
                  j = this._getColumnIndexFromColumnName(E),
                  J = this.table.order(),
                  $,
                  ue;
                j === -1 && (j = this._getColumnIndexFromSortKey(E)),
                  J && J.length > 0 && (($ = J[0][0]), (ue = J[0][1])),
                  j !== -1 &&
                    ($ !== j || ue !== B) &&
                    (this.table.order([parseInt(j), B]),
                    this.collection.fetch());
              }
            },
            _collectionFilterChanged: function () {
              (!this.searchBoxes || this.searchBoxes.length === 0) &&
                Vi.call(this);
              var x = this.collection.filters;
              a.each(this.searchBoxes, function (E) {
                var B = E.getColumn(),
                  j = x[B];
                (j !== void 0 && j !== "") || E.showInputField
                  ? (E.getShown() || E.showSearchInput(), E.setValue(j))
                  : E.getShown() && E.hideAndClear();
              }),
                this.enableViewState &&
                  this.setViewStateFilter(this.collection.getFilterAsObject());
            },
            _collectionFilterCleared: function () {
              a.each(this.searchBoxes, function (x) {
                x.hideAndClear();
              }),
                this.enableViewState && this.setViewStateFilter("");
            },
            onViewStateChanged: function () {
              var x = this.context.viewStateModel,
                E = x.getViewState("filter", !0);
              this.enableViewState &&
                (E
                  ? JSON.stringify(this.collection.getFilterAsObject()) !== E &&
                    this.applyFilter(this.getViewStateFilterAsObject(E))
                  : this.collection.filters && this.collection.clearFilter());
            },
            getViewStateFilterAsObject: function (x) {
              var E = {};
              try {
                E = JSON.parse(x);
              } catch {}
              return E;
            },
            _isSingleSelectionEnabled: function () {
              return this.options.selectRows === "single";
            },
            _setColumnToWidth: function (x, E) {
              ct(this._el_table, x).forEach(function (J) {
                (J.style.width = "unset"),
                  (J.style.minWidth = ""),
                  (J.style.maxWidth = "");
              }),
                this._saveNewWidthToLocalStorage(x, E);
            },
            _fitColumnToContent: function (x) {
              const E = this,
                B = ct(E._el_table, x),
                j = B[0];
              B.forEach(function ($) {
                ($.style.width = "unset"),
                  ($.style.minWidth = ""),
                  ($.style.maxWidth = "");
              }),
                ve.call(E, x, {}),
                re.call(E);
              const J = Math.ceil(j.getBoundingClientRect().width);
              this._saveNewWidthToLocalStorage(x, J);
            },
            _saveNewWidthToLocalStorage: function (x, E) {
              const B = this,
                j = B.displayedColumns[x];
              B._columnModelsByKey[j.name].set({ customization_width: E }),
                (j.attributes.customization_width = E),
                ve.call(B, x),
                re.call(B),
                _e ||
                  B.columnMenus
                    .find((ue) => ue.options.resizeName === j.name)
                    .collection.refilter();
            },
            getDisplayableColumns: function () {
              return pe.call(this, { withCustomizations: !1 });
            },
            getDisplayedColumns: function () {
              return pe.call(this, { withCustomizations: !0 });
            },
          },
          {
            columnCustomizationKeys: [
              "resizeable",
              "resize_span",
              "min_width",
              "width",
              "pinned",
              "hidden",
              "order",
            ],
            columnCustomizationMinWidth: 112,
          }
        );
      ie.version = "1.0";
      function ae() {
        if (this._columnModelsByKey && this.columns) {
          const x = this.columns.at(0);
          if (x && x !== this._columnModelsByKey[x.get("column_key")])
            return !0;
        }
      }
      function fe(x) {
        const E = x.customization_hidden;
        return E == null ? x.is_default_column !== !1 : !E;
      }
      function pe(x) {
        const E = Object.fromEntries(
            this.options.tableColumns.map((J) => [J.get("key"), J])
          ),
          B = this.columns.filter((J) => {
            var $;
            const ue = J.get("column_key");
            return (
              (!x.withCustomizations || fe(J.attributes)) &&
                (E[ue] && E[ue].get("sequence") !== null
                  ? ($ = !0)
                  : J.get("type") &&
                    J.get("definitions_order") &&
                    ($ = !s.hasCellViewByOtherKey(ue))),
              $
            );
          });
        return a.sortBy(B, (J) => ke(E[J.get("column_key")], J, x));
      }
      function ke(x, E, B) {
        let j =
          B.withCustomizations && E
            ? E.get
              ? E.get("customization_order")
              : E.customization_order
            : void 0;
        if (
          !j &&
          ((j = x ? (x.get ? x.get("sequence") : x.sequence) : void 0),
          j == null)
        ) {
          const J = E
            ? E.get
              ? E.get("definitions_order")
              : E.definitions_order
            : void 0;
          J && (j = J);
        }
        return j;
      }
      function Re(x) {
        var E = x.attr("class"),
          B = [];
        return (
          E &&
            E.length &&
            E.split &&
            ((E = d.trim(E)), (E = E.replace(/\s+/g, " ")), (B = E.split(" "))),
          B
        );
      }
      function Le(x, E, B) {
        var j = 0,
          J = this.displayedColumns,
          $ = J.length;
        if (
          (this.wrappedColumns.length === 0 &&
            $ > 0 &&
            J[$ - 1].name === "_toggledetails" &&
            ($ = $ - 1),
          B && B.firstColumnIndex >= 0)
        ) {
          if ($ > 0 && B.firstColumnIndex < $) {
            var ue = d(E.children()[0]);
            B.lastColumnIndex &&
              B.lastColumnIndex >= B.firstColumnIndex &&
              ((j = B.lastColumnIndex - B.firstColumnIndex + 1),
              j > 1 && ue.attr("colspan", j),
              E.attr("style", ""));
            for (var de = 0; de < B.firstColumnIndex; de++)
              E.prepend("<td></td>");
            var Ve = $ - B.firstColumnIndex - j;
            if (B.displayInEntireRow) B.descriptionColspan = Ve + 1;
            else if (Ve > 0)
              for (var xe = 0; xe < Ve; xe++) E.append("<td></td>");
          }
        } else {
          var Se = d(x).children(),
            ce = E.children();
          ce.length === 1 &&
            Se.length > 1 &&
            ((j = Se.length),
            this.wrappedColumns.length === 0 && j > 0 && (j = j - 1),
            ce.attr("colspan", j));
        }
      }
      function De(x, E) {
        var B = x.id || x.get("id"),
          j = this._detailRowViewsByModelId[B];
        j || ((j = { views: [] }), (this._detailRowViewsByModelId[B] = j)),
          j.views.push(E);
      }
      function Ke(x, E, B, j) {
        var J,
          $ = j.get("csuiErrorMessage");
        if ($) {
          var ue = new P({ errorMessage: $ });
          ue.render(),
            x.row(E).child(ue.el, "csui-details-row").show(),
            d(B).addClass("csui-has-details-row"),
            (J = x.row(E).child()),
            j.isLocallyCreated && J.addClass("csui-new-item"),
            j.get("id") !== void 0 && J.addClass("csui-saved-item");
        } else {
          var de = [],
            Ve,
            xe;
          if (!this.tableColumnsWrappingOn || _e) J = d();
          else {
            if (this.options.descriptionRowView) {
              var Se = j.get("description") && j.get("description").length > 0;
              if (
                (((!Se && this.options.descriptionRowViewOptions.showSummary) ||
                  this.options.descriptionRowViewOptions.showSummaryOnly) &&
                  (Se = j.get("summary") && j.get("summary").length > 0),
                Se)
              ) {
                var ce = !1;
                this.options.descriptionRowViewOptions &&
                  this.options.descriptionRowViewOptions
                    .collapsedHeightIsOneLine &&
                  (ce = !0);
                var ne = new this.options.descriptionRowView({
                  model: j,
                  collapsedHeightIsOneLine: ce,
                  tableView: this,
                });
                ne.render(),
                  (xe = d('<td class="csui-details-row"></td>')),
                  (Ve = d(
                    '<tr class="csui-details-row csui-details-row-description"></tr>'
                  )),
                  xe.appendTo(Ve),
                  ne.triggerMethod("before:show"),
                  ne.$el.appendTo(xe),
                  ne.triggerMethod("show"),
                  Le.call(this, B, Ve, this.options.descriptionRowViewOptions),
                  this.options.descriptionRowViewOptions &&
                    (this.options.descriptionRowViewOptions
                      .displayInEntireRow &&
                      this.options.descriptionRowViewOptions
                        .descriptionColspan &&
                      xe.attr(
                        "colspan",
                        this.options.descriptionRowViewOptions
                          .descriptionColspan
                      ),
                    this.options.descriptionRowViewOptions.showDescriptions ||
                      Ve.addClass("binf-hidden")),
                  this._detailRowsDescriptionTRs.push({ rowEl: Ve, view: ne }),
                  De.call(this, j, ne),
                  de.push(Ve[0]);
              }
            }
            if (this.wrappedColumns.length > 0) {
              var Me = new S({
                context: this.context,
                model: j,
                columns: this.wrappedColumns,
              });
              Me.render(),
                (xe = d('<td class="csui-details-row"></td>')),
                (Ve = d(
                  '<tr class="csui-details-row csui-details-row-metadata"></tr>'
                )),
                xe.appendTo(Ve),
                this.options.haveDetailsRowExpandCollapseColumn &&
                this.options.haveToggleAllDetailsRows
                  ? this.detailsRowsAreExpanded ||
                    this.expandedDetailRows[j.id || j.get("id")]
                    ? Ve.addClass("binf-collapse binf-in")
                    : Ve.addClass("binf-collapse")
                  : Ve.addClass("binf-collapse binf-in"),
                Ve.attr("id", "csui-details-row-" + j.cid),
                Me.triggerMethod("before:show"),
                Me.$el.appendTo(xe),
                Me.triggerMethod("show"),
                Le.call(this, B, Ve),
                j.set("hasMetadataRow", !0, { silent: !0 }),
                De.call(this, j, Me),
                de.push(Ve[0]);
            } else j.set("hasMetadataRow", !1, { silent: !0 });
            x.row(E).child(de, "csui-details-row").show(),
              (J = x.row(E).child());
          }
        }
        return J.length > 0 && d(B).addClass("csui-has-details-row"), J;
      }
      function $e() {
        if (this.allColumns.length) {
          this.trigger("creatingTable", { sender: this });
          var x = this;
          (x.hoveredRowDataId = void 0),
            (this._detailRowsDescriptionTRs = []),
            (this._detailRowViewsByModelId = {});
          var E = !0;
          Xi.call(this);
          var B = new t.Url(this.connector.connection.url).getOrigin(!0),
            j = t.Url.combine(B, this.connector.connection.supportPath),
            J = Ue.call(this);
          this.csuiDestroyRowCallbacks = [];
          var $ = a.extend(
            {
              columns: a.map(this.displayedColumns, function (ce) {
                return (
                  ce.attributes.initialSortingDescending &&
                    (ce.asSorting = ["desc", "asc"]),
                  ce
                );
              }),
              jQueryUI: !1,
              autoWidth: !1,
              deferRender: E,
              serverSide: E,
              language: x.localizableLabels,
              ajax: function (ce, ne, Me) {
                if (this.refreshEnabled !== !1) {
                  var ze = this.api();
                  ze.context.length > 0 &&
                    (x.options.clientSideDataOperation
                      ? tt.call(x, ze, ce, Me, ne)
                      : mt.call(x, ze, ce, Me, ne));
                }
              },
              initComplete: function (ce, ne) {
                x.trigger("tableFrameRendered", { sender: x, target: this[0] });
              },
              preDrawCallback: function () {
                (x._el_wrapper = this[0].parentElement),
                  (x._el_tableBody = this.find("tbody")[0]);
              },
              drawCallback: function () {
                var ce = d(this);
                if (
                  (ce.addClass("csui-table-spacing-medium"),
                  x.collection &&
                    (x.collection.length === 0 ||
                    (x.collection.length === 1 &&
                      x.collection.at(0).inlineFormView)
                      ? ce.addClass("csui-table-empty")
                      : ce.removeClass("csui-table-empty"),
                    x.showOrHideZeroRecordsMessage()),
                  (x.hoveredRowDataId = void 0),
                  (x.hoveredRow = void 0),
                  x.options.haveDetailsRowExpandCollapseColumn &&
                    x.options.haveToggleAllDetailsRows &&
                    !ce.find(
                      "td.csui-table-cell-_toggledetails > .expand-details-row-toggle"
                    ).length &&
                    x.collection.length)
                ) {
                  x.displayedColumns = a.filter(
                    x.displayedColumns,
                    function (Me) {
                      return Me.sName !== "_toggledetails";
                    }
                  );
                  var ne = ce.find(".csui-table-cell-_toggledetails");
                  ne.remove();
                }
                x._el_headerCells.each(function (Me) {
                  if (x.displayedColumns.length > Me) {
                    var ze = x.displayedColumns[Me];
                    if (ze.titleAttr) {
                      var we = ze.titleAttr;
                      ze.orderable &&
                        (we =
                          d(this).attr("data-csui-column-next-sort-dir") ===
                          "desc"
                            ? a.str.sformat(
                                u.columnSortDescendingTooltip,
                                ze.titleAttr
                              )
                            : a.str.sformat(
                                u.columnSortAscendingTooltip,
                                ze.titleAttr
                              )),
                        d(this).attr("title", we);
                    }
                  }
                  var Ae = d(this).find(
                    "div.csui-focusable-table-column-header"
                  );
                  if (
                    (Ae.hasClass("csui-empty") &&
                      (Ae.hasClass("csui-iconButSorted") ||
                        (d(this).removeAttr("title"), Ae.removeAttr("role")),
                      Ae.removeClass("csui-iconButSorted")),
                    Ae.attr("role") === "button")
                  ) {
                    var Ge = Ae.attr("aria-label");
                    if (!Ge) {
                      var ei = d(this).attr("data-csui-column-next-sort-dir"),
                        Ye =
                          ei === "desc"
                            ? u.NodeTableSortDescendingButtonAria
                            : ei === "asc"
                            ? u.NodeTableSortAscendingButtonAria
                            : "LaLaLa",
                        ti = d(this).attr("data-csui-attribute"),
                        ni = a.find(x.displayedColumns, function (ii) {
                          return ii.name === ti;
                        }),
                        Qe = ni.titleAttr || ni.title;
                      (Ye = a.str.sformat(Ye, Qe)), Ae.attr("aria-label", Ye);
                    }
                  }
                  d(this).removeAttr("data-csui-column-current-sort-dir"),
                    d(this).removeAttr("data-csui-column-next-sort-dir");
                }),
                  ce.find("tr:not(.csui-details-row)").each(function () {
                    d(this)
                      .find("> *")
                      .last()
                      .addClass("csui-table-cell-last-visible");
                  }),
                  x.trigger("tableBodyRendered", {
                    sender: x,
                    target: x._el_tableBody,
                  }),
                  x._plugHeaderBodyViews();
              },
              headerCallback: function (ce, ne, Me, ze, we) {
                var Ae = d(this);
                if (
                  ((x._el_headerCells = this.find(">thead>tr>th")),
                  a.find(x.searchBoxes, function (ii) {
                    return ii.getShown();
                  }))
                ) {
                  x.collection.length &&
                    x._selectAllCheckboxRegion &&
                    x._selectAllCheckboxRegion.currentView.model.get(
                      "disabled"
                    ) &&
                    x._selectAllCheckboxRegion.currentView.model.set(
                      "disabled",
                      !1
                    );
                  return;
                }
                var Ge = [b.columnClassName, "csui-table-cell-_toggledetails"],
                  ei,
                  Ye = this.api().order();
                if (Ye.length > 0) {
                  var ti = Ye[0];
                  ti.length > 0 && (ei = ti[0]);
                }
                delete x._el_lastPinnedHeader,
                  x._nowrapHeaderResizeObserver.disconnect();
                var ni = x._el_headerCells.length;
                x._el_headerCells.each(function (ii) {
                  var Ee = d(this);
                  if (Ee.length > 0 && x.displayedColumns.length > ii) {
                    var Fe = x.displayedColumns[ii],
                      Ki = x._columnModelsByKey[Fe.name];
                    if (
                      (Ee.attr("data-csui-attribute", Fe.name),
                      x._adjustColumnsInNoWrapMode.call(x, Ki, Ee[0], Fe),
                      Fe.lastPinned && (x._el_lastPinnedHeader = Ee[0]),
                      x.tableColumnsWrappingOn ||
                        ((!Fe.resizeSpan || Fe.resizeStart) &&
                          (ni = x._el_headerCells.length - ii),
                        (Ee[0].style["z-index"] = ni)),
                      a.find(Ge, function (Hi) {
                        return Ee.hasClass(Hi);
                      }) === void 0)
                    ) {
                      d(this).empty(),
                        Ee.attr("aria-label") === void 0 &&
                          Ee.attr(
                            "aria-label",
                            Fe.title ? Fe.title : u[Fe.name]
                          ),
                        Fe.titleIconInHeader &&
                          Ee.attr("title") === void 0 &&
                          Ee.attr("title", Fe.title);
                      var ki = d(
                          '<div class="csui-focusable-table-column-header"></div>'
                        ),
                        We = Fe.titleIconInHeader && ei === ii,
                        ri =
                          Fe.noTitleInHeader === !0 &&
                          (!Fe.titleIconInHeader || We);
                      if ((_e && (ri = !1), ri))
                        ki.addClass("csui-empty"),
                          We &&
                            (ki.addClass("csui-iconButSorted"),
                            ki.attr("role", "button"));
                      else {
                        Fe.attributes.sort && ki.attr("role", "button");
                        let Hi;
                        Fe.titleIconInHeader
                          ? (Hi = d(
                              '<span class="csui-icon csui-table-header-icon ' +
                                Fe.titleIconInHeader +
                                '">'
                            ))
                          : (Hi = d(
                              '<div class="csui-table-column-text"></div>'
                            ).text(Fe.title)),
                          Fe.customHeader &&
                            (Fe.customHeader.render(),
                            Hi.append(Fe.customHeader.$el),
                            Fe.customHeader.trigger("dom:added")),
                          ki.append(Hi);
                      }
                      x.tableColumnsWrappingOn ||
                        (Fe.resizeSpan && Ee.addClass("csui-resize-span"),
                        Fe.resizeStart && Ee.addClass("csui-resize-start"),
                        Fe.resizeEnd && Ee.addClass("csui-resize-end"),
                        Fe.isResizeColumn &&
                          Ee.addClass("csui-column-resizing"),
                        Fe.hasResizeHandle &&
                          Ee.addClass("csui-column-resizable"),
                        Fe.resizeNumber &&
                          (Ee.addClass("csui-resize-" + Fe.resizeNumber),
                          Ee.on(
                            "mouseenter",
                            {
                              table: this.closest("table"),
                              resizeNumber: Fe.resizeNumber,
                            },
                            O
                          ),
                          Ee.on(
                            "mouseleave",
                            {
                              table: this.closest("table"),
                              resizeNumber: Fe.resizeNumber,
                            },
                            K
                          )),
                        Fe.isSpacingColumn &&
                          Ee.addClass(
                            Fe.filterable
                              ? "csui-resize-handle-padding"
                              : "csui-resize-handle-spacing"
                          ),
                        Fe.spacingNumber &&
                          (Ee.attr("csui-resize-spacing", Fe.spacingNumber),
                          x._nowrapHeaderResizeObserver.observe(Ee[0]))),
                        d(this).append(ki);
                    }
                  }
                }),
                  hi.call(x, ce),
                  ui.call(x, ce),
                  gi.call(x, this.api().order()),
                  Vi.call(x);
                function Qe(ii, Ee) {
                  var Fe = ii + "__cell-wrapper";
                  Ae.parent().addClass(ii),
                    x._el_headerCells.each(function () {
                      var Ki = d(this);
                      if (
                        Ki.find("> ." + Fe).length === 0 &&
                        Ki.find(Ee).length
                      ) {
                        var ki = d("<div>", { class: Fe });
                        Ki.wrapInner(ki);
                      }
                    });
                }
                _e
                  ? Qe("csui-accessibility-table", ".csui-table-column-search")
                  : x.tableColumnsWrappingOn ||
                    Qe("csui-nowrap-table", ".csui-table-column-search"),
                  ht.call(x, this.api()),
                  x.trigger("tableHeaderRendered", { sender: x, target: ce });
              },
              footerCallback: function (ce, ne, Me, ze, we) {
                x.trigger("tableFooterRendered", { sender: x, target: ce });
              },
              rowCallback: function (ce, ne, Me) {
                var ze = d(ce),
                  we = Ke.call(x, this.api(), Me, ce, ne),
                  Ae = x._allSelectedNodes.get(ne);
                Ae && ne.set(b.isSelectedModelAttributeName, !0);
                var Ge = ne.get(b.isSelectedModelAttributeName);
                Ge
                  ? (ze.addClass("binf-active"),
                    a.each(we, function (Be) {
                      d(Be).addClass("binf-active");
                    }))
                  : (ze.removeClass("binf-active"),
                    a.each(we, function (Be) {
                      d(Be).removeClass("binf-active");
                    })),
                  ne.isLocallyCreated &&
                    (ze.addClass("csui-new-item"),
                    we.addClass("csui-new-item")),
                  ne.get("id") !== void 0
                    ? (ze.addClass("csui-saved-item"),
                      we.addClass("csui-saved-item"),
                      ne.set("inactive", !x.checkModelHasAction(ne), {
                        silent: !0,
                      }))
                    : ne.set("inactive", !0, { silent: !0 }),
                  ne.get("isCut") === !0 &&
                    (ze && ze.addClass("csui-cut-row"),
                    we && we.addClass("csui-cut-row"));
                var ei = [],
                  Ye = ne.inlineFormView !== void 0;
                Ye && ze.addClass("csui-table-row-shows-inlineform");
                var ti = 0,
                  ni,
                  Qe = [];
                x.csuiDestroyRowCallbacks.push(mi, Hi);
                for (var ii = 0; ii < x.displayedColumns.length; ii++) {
                  var Ee = x.displayedColumns[ii];
                  if (Ee.CellView) {
                    var Fe = d(ze.children()[ii]);
                    if (Fe.length === 0) continue;
                    if (
                      x.tableColumnsWrappingOn &&
                      x.cachedColumnWidths &&
                      x.cachedColumnWidths[Ee.className] &&
                      !Ee.CellView.hasFixedWidth
                    ) {
                      var Ki = x.cachedColumnWidths[Ee.className];
                      Fe.css(Ki);
                    }
                    x._adjustColumnsInNoWrapMode.call(
                      x,
                      x._columnModelsByKey[Ee.name],
                      Fe[0],
                      Ee
                    ),
                      Ee.isNaming && Fe.attr("role", "rowheader");
                    var ki = {
                      el: Fe,
                      tableView: x,
                      column: Ee,
                      model: ne,
                      context: x.context,
                      originUrl: B,
                      supportUrl: j,
                      nameEdit: x.options.nameEdit,
                      favoritesTableOptions: x.options.favoritesTableOptions,
                      rowIndex: Me,
                    };
                    Ee.name === "_toggledetails" &&
                      (ki.rowIsExpanded =
                        x.detailsRowsAreExpanded ||
                        x.expandedDetailRows[ne.id || ne.get("id")]);
                    var We = new Ee.CellView(ki);
                    if (
                      (Ee.name === "_toggledetails" &&
                        x.listenTo(We, "toggle:detailsrow", function (Be) {
                          x.expandedDetailRows[
                            Be.model.id || Be.model.get("id")
                          ] = Be.detailsRowIsExpanded;
                        }),
                      x.tableColumnsWrappingOn ||
                        (Ee.resizeSpan &&
                          We.el.classList.add("csui-resize-span"),
                        Ee.resizeStart &&
                          We.el.classList.add("csui-resize-start"),
                        Ee.resizeEnd && We.el.classList.add("csui-resize-end"),
                        Ee.isResizeColumn &&
                          We.el.classList.add("csui-column-resizing"),
                        Ee.hasResizeHandle &&
                          We.el.classList.add("csui-column-resizable"),
                        Ee.resizeNumber &&
                          We.el.classList.add(
                            "csui-resize-" + Ee.resizeNumber
                          )),
                      Ye && x.tableColumnsWrappingOn
                        ? Ee.name === "type"
                          ? (We.render(),
                            x.listenTo(We, "type:clicked", function () {
                              x.triggerMethod("type:clicked");
                            }))
                          : (Ee.isNaming || Ee.name === "name") && !ni
                          ? ((ti = 1), (ni = Fe))
                          : Ee.name !== "_select" &&
                            Ee.name !== "order" &&
                            (ti++, Qe.push(Fe))
                        : Ye && !x.tableColumnsWrappingOn
                        ? Ee.name === "type"
                          ? (We.render(),
                            x.listenTo(We, "type:clicked", function () {
                              x.triggerMethod("type:clicked");
                            }))
                          : (Ee.isNaming || Ee.name === "name") && !ni
                          ? ((ti = 1), (ni = Fe))
                          : We.render()
                        : We.render(),
                      x.listenTo(We, "cellCloseOther", function () {
                        x.cancelAnyExistingInlineForm(),
                          x.trigger("closeOther", We),
                          (x.lockedForOtherContols = !0),
                          a.each(ei, function (Be) {
                            Be !== We && Be.triggerMethod("closeOther");
                          });
                      }),
                      x.listenTo(We, "cellAllowOther", function () {
                        x.trigger("allowOther", We),
                          (x.lockedForOtherContols = !1),
                          a.each(ei, function (Be) {
                            Be !== We && Be.triggerMethod("allowOther");
                          });
                      }),
                      x.listenTo(We, "cancelEdit", function () {
                        var Be = x.collection.at(0);
                        Be &&
                          Be.get("id") === void 0 &&
                          ((Be.csuiIsRemoved = !0), x.collection.remove(Be));
                      }),
                      x.listenTo(We, "show:add:favorite:form", function () {
                        x._destroyInlineBar(), (x.lockedForOtherContols = !0);
                      }),
                      x.listenTo(We, "close:add:favorite:form", function () {
                        x.lockedForOtherContols = !1;
                      }),
                      Me >= 0)
                    ) {
                      var ri = function (Be, wi) {
                        x.trigger("clicked:cell", {
                          cellView: We,
                          rowIndex: Me,
                          colIndex: Be,
                          model: ne,
                        });
                      };
                      x.listenTo(We, "clicked:cell", ri.bind(null, ii)),
                        x.listenTo(We, "clicked:checkbox", function (Be) {
                          if (ne.get("selectable") !== !1) {
                            var wi = Oe.call(x);
                            Be.checked === "false"
                              ? (x._isSingleSelectionEnabled() &&
                                  x._allSelectedNodes.reset(),
                                wi.fnSelect(ce))
                              : wi.fnDeselect(ce);
                          }
                        });
                    }
                    ei.push(We);
                  }
                }
                function Hi() {
                  var Be = x._detailRowViewsByModelId || {};
                  Object.keys(Be).forEach(function (wi) {
                    var qi = Be[wi].views;
                    qi.forEach(function ($i) {
                      x.stopListening($i), $i.destroy();
                    });
                  }),
                    (x._detailRowsDescriptionTRs = []),
                    (x._detailRowViewsByModelId = {}),
                    (x.hoveredRowDataId = void 0);
                }
                function mi() {
                  var Be = ei;
                  setTimeout(function () {
                    for (var wi = 0; wi < Be.length; wi++)
                      x.stopListening(Be[wi]), Be[wi].destroy();
                  }, 0);
                }
                function ci(Be, wi) {
                  wi === void 0 && (wi = d());
                  var qi = !0,
                    $i = Be._DT_RowIndex;
                  if (
                    (x.hoveredRowDataId &&
                      x.hoveredRowDataId === $i &&
                      (qi = !1),
                    (x.hoveredRowDataId = $i),
                    qi)
                  ) {
                    if (x.hoveredRow) {
                      d(x.hoveredRow).removeClass("csui-state-hover");
                      var pt = x.table.row(x.hoveredRow).child();
                      pt && pt.removeClass("csui-state-hover");
                    }
                    var ut = x.table.row(Be).data();
                    if (ut) {
                      var gt = ut.id || ut.get("id");
                      if (gt !== void 0) {
                        var yt = {
                          sender: x,
                          targets: [Be],
                          nodes: ai.call(x, [Be]),
                        };
                        x.trigger("selectingTableRow", yt),
                          yt.cancel ||
                            ((x.hoveredRow = Be),
                            d(Be).addClass("csui-state-hover"),
                            wi.addClass("csui-state-hover"));
                      }
                    }
                  }
                }
                function Ii(Be, wi) {
                  wi === void 0 && (wi = d()),
                    d(Be).removeClass("csui-state-hover"),
                    wi.removeClass("csui-state-hover"),
                    (x.hoveredRowDataId = void 0),
                    (x.hoveredRow = void 0);
                }
                if (Ye && ni) {
                  a.each(Qe, function (Be) {
                    Be.remove();
                  }),
                    ni.addClass("csui-inlineform-parent"),
                    ti > 1 && ni.attr("colspan", ti),
                    x.trigger("closeOther"),
                    ne.inlineFormView &&
                      (x.activeInlineForm && x.activeInlineForm.destroy(),
                      (x.activeInlineForm = new ne.inlineFormView({
                        model: ne,
                        originatingView: x.options.originatingView,
                        context: x.context,
                      }))),
                    x.activeInlineForm.listenTo(
                      x.activeInlineForm,
                      "destroy",
                      function () {
                        (x.lockedForOtherContols = !1),
                          x.activeInlineForm.model.get("id") &&
                            setTimeout(function () {
                              (x.accFocusedState.focusView = "tableBody"),
                                x.trigger("changed:focus"),
                                x.currentlyFocusedElement().trigger("focus");
                            }, 1),
                          delete x.activeInlineForm,
                          x.trigger("destroy:inlineform");
                      }
                    );
                  var Xe = new i.Region({ el: ni });
                  Xe.show(x.activeInlineForm), x.trigger("show:inlineform");
                } else
                  ze.mousehover(
                    function () {
                      var Be = {
                        sender: x,
                        target: ce,
                        node: x.table.row(ce).data(),
                      };
                      (Be.node && Be.node === x.inlineBarView?.options.model) ||
                        x.trigger("enterTableRow", Be);
                    },
                    function () {
                      var Be = {
                        sender: x,
                        target: ce,
                        node: x.table.row(ce).data(),
                      };
                      x.trigger("leaveTableRow", Be);
                    },
                    { namespace: x.cid }
                  ),
                    ze.mousehover(
                      function () {
                        ci.call(x, ce, we);
                      },
                      function () {
                        Ii.call(x, ce, we);
                      },
                      { namespace: x.cid }
                    ),
                    we.mousehover(
                      function () {
                        ci.call(x, ce, we);
                      },
                      function () {},
                      { namespace: x.cid }
                    );
                x.trigger("tableRowRendered", {
                  sender: x,
                  target: ce,
                  node: ne,
                  expandedRows: we,
                });
              },
            },
            J
          );
          E || ($.data = this.collection.models);
          var ue = d("<table></table>")
            .addClass("binf-table")
            .attr("id", this.cid);
          this._el_table = ue[0];
          var de = a.isFunction(this.options.tableAria)
            ? this.options.tableAria()
            : this.options.tableAria;
          if (
            (de && ue.attr("aria-label", de),
            !_e &&
              this.tableColumnsWrappingOn &&
              this.$el.addClass("csui-not-ready"),
            this._nowrapTableResizeObserver.disconnect(),
            this.tableColumnsWrappingOn || ue.addClass("csui-nowrap-table"),
            ue.appendTo(this.el),
            (this.table = ue.DataTable($)),
            this.tableColumnsWrappingOn ||
              (this._nowrapTableResizeObserver.observe(this._el_table),
              this._nowrapTableResizeObserver.observe(this._el_wrapper)),
            this._isSingleSelectionEnabled() &&
              Si.call(this, this._allSelectedNodes),
            d(this.$el.children()[0]).attr("tabindex", "-1"),
            zi.call(this, J.selectedNodesById),
            this.collection.length > 0 &&
              J.currentScollPosition !== void 0 &&
              this._getScrollContainer().scrollTop(J.currentScollPosition),
            this.table
              .on("click", ".csui-table-cell-default-action", function (ce) {
                Zi.call(x, ce, "DefaultPre");
              })
              .on("click", "a#parentAction", function (ce) {
                Zi.call(x, ce, "Parent");
              })
              .on("click", "a#menuAction", function (ce) {
                Zi.call(x, ce, "Menu");
              })
              .on("click", "input[id^='selectAction']", function (ce) {
                ce.stopPropagation();
                var ne = d(ce.target),
                  Me = ne.closest("td,th");
                Me.trigger("click");
              })
              .on("processing", function (ce, ne, Me) {
                He.call(x, ne, Me);
              })
              .on("destroy", function (ce, ne) {})
              .on("preDraw", function (ce, ne) {
                (!ne.oFeatures.bServerSide || ne.bDrawing) &&
                  (Ji.call(x),
                  x.activeInlineForm && x.activeInlineForm.destroy(),
                  x._destroyTableHeaderAndBodyViews());
              }),
            ue.on("order.dt", function () {
              if (x.displayedColumns) {
                var ce = [];
                a.each(x.table.order(), function (ne) {
                  var Me = ne[0],
                    ze = x.displayedColumns[Me].attributes.column_key;
                  ze && (ne[1] ? ce.push(ze + " " + ne[1]) : ce.push(ze));
                }),
                  (x.collection && x.collection.isSortOptionSelected) ||
                    (ce.length && x.collection.setOrder(ce.join()));
              }
            }),
            this.options.alternativeHeader)
          ) {
            r.warn(
              "Using of options.alternativeHeader with table.view is deprecated. Please use csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view instead and render this view ouside of table.view. The behavior csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior might help using it."
            ) && console.log(r.last),
              this.$el.find(".csui-table-alternative-header").remove();
            var Ve = d('<div class="csui-table-alternative-header"></div>');
            this.$el.prepend(Ve),
              (this._alternativeHeaderRegion = new i.Region({ el: Ve }));
            var xe = this._createAlternativeHeaderView();
            this._alternativeHeaderRegion.show(xe),
              this.triggerMethod("alternativeHeader:show", xe),
              this.listenTo(
                xe,
                "childview:toolitem:action",
                this._toolbarItemClicked
              );
          }
          if (
            (d(this._el_columnResizeIndicator).remove(),
            delete this._el_columnResizeIndicator,
            !this.tableColumnsWrappingOn)
          ) {
            var Se = d('<div class="csui-column-resize-indicator"></div>');
            this.$el.prepend(Se), (this._el_columnResizeIndicator = Se[0]);
          }
          this.trigger("tableCreated", { sender: this });
        }
      }
      function He(x, E) {
        this.disablingOverlay ||
          (this.disablingOverlay = d("<div id='disabling_overlay'></div>")
            .hide()
            .prependTo(this.table)),
          E ? this.disablingOverlay.show() : this.disablingOverlay.hide();
      }
      function me(x) {
        this.disablingOverlay &&
          (this.disablingOverlay.remove(), (this.disablingOverlay = void 0));
      }
      function Oe() {
        return (
          this.tableTools ||
          (this.tableTools = l.fnGetInstance(this.table.table().node()))
        );
      }
      function Ue() {
        var x;
        switch (this.options.paginationStyle) {
          case "all_buttons":
            x = { pagingType: "full_numbers" };
            break;
          case "two_buttons":
            x = { pagingType: "two_button" };
            break;
          case "infinite_scrolling":
            x = {
              scrollCollapse: !0,
              scrollY: this.options.pageSize
                ? this.options.pageSize * 25 - 1 + "px"
                : "249px",
            };
            break;
          default:
            x = { paging: !1 };
        }
        this.recreated ||
          (this.recreated = this.columns.length || this.columns.fetched),
          (x.order = qe.call(this, this.collection.orderBy)),
          (x.ordering = Ze.call(this));
        var E = this.options.selectRows;
        if (E === "none") x.dom = '<"H"lfr>t<"F"ip>';
        else {
          x.dom = '<"H"lTfr>t<"F"ip>';
          var B = this;
          x.tableTools = {
            aButtons: [],
            sRowSelect: E,
            fnPreRowSelect: function (j, J, $) {
              if (B._rebuildingTable) return;
              function ue() {
                var ce = B.table.row(J[0]).data();
                if (!ce.inlineFormView) {
                  var ne = { sender: B, target: J[0], node: ce };
                  return B.triggerMethod("row:clicked", ne), !ne.cancel;
                }
              }
              function de() {
                var ce = ai.call(B, J),
                  ne = { sender: B, targets: J, nodes: ce };
                return (
                  B.trigger(
                    $ ? "selectingTableRow" : "unselectingTableRow",
                    ne
                  ),
                  !ne.cancel
                );
              }
              if (
                (i.triggerMethodOn(B.tableBodyView, "before:render"),
                J && J.length > 0)
              ) {
                var Ve = ue();
                if (Ve)
                  if (B.options.selectColumn) {
                    var xe = j && j.target,
                      Se = !xe || d(j.target).hasClass(b.columnClassName);
                    return Se ? de() : !1;
                  } else return de();
                else return !1;
              } else return !0;
            },
            fnRowSelected: function (j) {
              B._rebuildingTable ||
                (a.isArray(j) &&
                  j.length > 0 &&
                  (a.each(j, function (J) {
                    var $ = B.table.row(J).data(),
                      ue = d(J);
                    $.set(b.isSelectedModelAttributeName, !0);
                  }),
                  di.call(B),
                  i.triggerMethodOn(B.tableBodyView, "render"),
                  B.trigger("closeOther"),
                  B.selectedChildren.reset(B.getSelectedChildren()),
                  B.trigger("tableRowSelected", {
                    sender: B,
                    targets: j,
                    nodes: ai.call(B, j),
                  })));
            },
            fnRowDeselected: function (j) {
              B._rebuildingTable ||
                (a.isArray(j) &&
                  j.length > 0 &&
                  (a.each(j, function (J) {
                    var $ = B.table.row(J).data(),
                      ue = d(J);
                    $.set(b.isSelectedModelAttributeName, !1);
                  }),
                  di.call(B),
                  i.triggerMethodOn(B.tableBodyView, "render"),
                  B.selectedChildren.reset(B.getSelectedChildren()),
                  B.trigger("tableRowUnselected", {
                    sender: B,
                    targets: j,
                    nodes: ai.call(B, j),
                  })));
            },
          };
        }
        return (
          x.searching ||
            x.lengthChange ||
            (x.dom = x.dom
              .replace('"H"', "")
              .replace("l", "")
              .replace("f", "")),
          x.info ||
            x.pagingType ||
            (x.dom = x.dom
              .replace('"F"', "")
              .replace("i", "")
              .replace("p", "")),
          dt.call(this, x),
          x
        );
      }
      function qe(x) {
        var E = [];
        x &&
          (E = a.map(
            x.split(","),
            function (j) {
              j = j.split(" ");
              var J = j[0],
                $ = ji.call(this, J);
              if (
                $ !== void 0 &&
                ((J = this.displayedColumns[$].attributes.column_key),
                this.columns.findWhere({ column_key: J }).get("sort"))
              )
                return [$, j[1] || "asc"];
            },
            this
          ));
        var B = a.filter(E, function (j) {
          return !!j;
        });
        return B;
      }
      function Ze() {
        if (this.options.enableSorting !== !0) return !1;
        var x = a.find(this.displayedColumns, function (E) {
          return E.attributes && E.attributes.sort === !0;
        });
        return !!x;
      }
      function hi(x) {
        function E(J) {
          (this.detailsRowsAreExpanded = !this.detailsRowsAreExpanded),
            this._clearExpandedRows(),
            (this._detailRowsDescriptionTRs = []),
            this._drawTable(),
            this.options.descriptionRowViewOptions &&
            this.options.descriptionRowViewOptions.showDescriptions
              ? this.showDetailRowDescriptions(!0)
              : this.trigger("dom:refresh"),
            this.collection.isSortOptionSelected &&
              (this.collection.isSortOptionSelected = !1);
        }
        if (
          this.options.haveDetailsRowExpandCollapseColumn &&
          this.options.haveToggleAllDetailsRows &&
          this.collection.length
        ) {
          var B = d("th.csui-table-cell-_toggledetails", x);
          if (B.length > 0 && !this._toggleExpandAllRegion) {
            var j = new w({
              titleDisclosed: ge.expandAllTooltip,
              titleExpanded: ge.collapseAllTooltip,
              ariaLabelDisclosed: ge.expandAllAria,
              ariaLabelExpanded: ge.collapseAllAria,
            });
            this.listenTo(j.model, "change:expanded", E),
              (this._toggleExpandAllRegion = new i.Region({ el: B })),
              this._toggleExpandAllRegion.show(j);
          }
        }
      }
      function ui(x) {
        var E = this,
          B = d("th:first-child", x);
        if (B.length === 0) return;
        function j() {
          var de = [],
            Ve = [],
            xe = [],
            Se = [],
            ce,
            ne;
          if (
            E._selectAllCheckboxRegion &&
            E._selectAllCheckboxRegion.currentView
          ) {
            h.trigger("closeToggleAction");
            var Me = E._selectAllCheckboxRegion.currentView,
              ze = Me.model.get("checked");
            switch (ze) {
              case "true":
                E.collection.each(function (we) {
                  we.get(b.isSelectedModelAttributeName) &&
                    ((ce = E.collection.indexOf(we)),
                    (ne = E.table.row(ce)),
                    Se.push(we),
                    xe.push(ne.node()));
                });
                break;
              default:
                E.collection.each(function (we) {
                  we.get("selectable") !== !1
                    ? we.get(b.isSelectedModelAttributeName) ||
                      ((ce = E.collection.indexOf(we)),
                      (ne = E.table.row(ce)),
                      Ve.push(we),
                      de.push(ne.node()))
                    : we.get(b.isSelectedModelAttributeName) &&
                      ((ce = E.collection.indexOf(we)),
                      (ne = E.table.row(ce)),
                      Se.push(we),
                      xe.push(ne.node()));
                });
            }
            xe.length > 0 &&
              (E.trigger("tableRowUnselected", {
                sender: E,
                targets: xe,
                nodes: Se,
              }),
              Se.forEach(function (we) {
                we.set(b.isSelectedModelAttributeName, !1);
              })),
              de.length > 0 &&
                (Ve.forEach(function (we) {
                  we.set(b.isSelectedModelAttributeName, !0);
                }),
                E.trigger("tableRowSelected", {
                  sender: E,
                  targets: de,
                  nodes: Ve,
                })),
              E.selectedChildren.reset(E.getSelectedChildren()),
              di.call(this),
              E.trigger("dom:refresh");
          }
        }
        function J() {
          var de = $.el.querySelector("otc-checkbox");
          d(de).addClass("csui-focusable-table-column-header");
        }
        if (this.options.selectColumn && this.options.selectAllColumnHeader) {
          if (!this._selectAllCheckboxRegion) {
            var $ = new g({
              checked: !1,
              disabled: !1,
              ariaLabel: u.selectAllAria,
              title: u.selectAll,
            });
            this.listenTo($, "clicked", function (de) {
              (de.cancel = !0), j.call(E);
            }),
              this.listenTo($, "render", function () {
                J();
              }),
              (this._selectAllCheckboxRegion = new i.Region({ el: B })),
              this._selectAllCheckboxRegion.show($),
              J();
          }
          if (this.collection.length) {
            this._selectAllCheckboxRegion.currentView.setDisabled(!1);
            var ue = this.collection.where({ csuiIsSelected: !0 }).length;
            ue > 0 && di.call(this);
          } else this._selectAllCheckboxRegion.currentView.setDisabled(!0);
        }
      }
      function li() {
        a.each(this.searchBoxes, function (x) {
          x.destroy();
        }),
          this.searchBoxes.splice(0, this.searchBoxes.length);
      }
      function gi(x, E) {
        if (x && x.length > 0 && x[0].length > 1) {
          var B = this,
            j = x[0],
            J = j[0],
            $ = j[1];
          if (J < this.displayedColumns.length) {
            var ue = "icon-sortArrowUnknown";
            $ === "asc"
              ? (ue = "icon-sortArrowUp")
              : $ === "desc" && (ue = "icon-sortArrowDown");
            var de = '<span class="csui-sort-arrow ' + ue + '"></span>',
              Ve = B.$("th:eq(" + J + ") .csui-focusable-table-column-header");
            B.$el.find(".csui-sort-arrow").remove(),
              Ve.append(de),
              a.find(B.searchBoxes, function (xe) {
                var Se = xe.getColumn();
                if (E === Se && xe.getShown())
                  return (
                    B.$el.find(".csui-sort-arrow").addClass("binf-hidden"), !0
                  );
              });
          }
        }
      }
      function Vi() {
        var x = this;
        li.call(x),
          this._el_headerCells &&
            this._el_headerCells.each(function (E) {
              if (
                d(this).find(".csui-table-column-search").length === 0 &&
                x.displayedColumns.length > E
              ) {
                var B = x.displayedColumns[E].name.toLowerCase(),
                  j = x.displayedColumns[E].title;
                if (
                  (x.displayedColumns[E].noTitleInHeader === !0 && (j = ""),
                  x.displayedColumns[E].filterable === !0)
                ) {
                  var J =
                      x.displayedColumns[E].data &&
                      x.displayedColumns[E].data(void 0, "filterBy"),
                    $,
                    ue =
                      x.columnsWithTypeaheadSearchbox &&
                      a.indexOf(x.columnsWithTypeaheadSearchbox, B) !== -1,
                    de = {
                      column: J,
                      columnName: B,
                      columnTitle: j,
                      context: x.options.context,
                    };
                  if (ue) {
                    var Ve = x.options.columnsWithTypeaheadSearchbox[B];
                    a.extend(de, Ve), ($ = new k(de));
                  } else {
                    var xe = x.collection.filters && x.collection.filters[B];
                    $ = new C(xe, de);
                  }
                  x.searchBoxes.push($),
                    $.off($.valueChangedEventName).on(
                      $.valueChangedEventName,
                      function (Me) {
                        x.applyFilter(Me);
                      }
                    );
                  var Se = d(this).find(".csui-table-column-search"),
                    ce = d(this).find(".csui-table-column-text"),
                    ne = this;
                  $.off("opened").on("opened", function () {
                    ce.addClass("binf-hidden"),
                      d(ne).find(".csui-sort-arrow").addClass("binf-hidden"),
                      d(ne).removeAttr("title"),
                      d(ne).attr("aria-label", j),
                      (x.searchColumn = B);
                  }),
                    $.off("closed").on("closed", function () {
                      ce.removeClass("binf-hidden"),
                        d(ne)
                          .find(".csui-sort-arrow")
                          .removeClass("binf-hidden"),
                        d(ne).hasClass("sorting_asc")
                          ? (d(ne).attr(
                              "title",
                              u.NodeTableSortDescendingTooltip
                            ),
                            d(ne).attr(
                              "aria-label",
                              a.str.sformat(
                                u.NodeTableSortedAscendingColumnAria,
                                j
                              )
                            ))
                          : d(ne).hasClass("sorting_desc")
                          ? (d(ne).attr(
                              "title",
                              u.NodeTableSortAscendingTooltip
                            ),
                            d(ne).attr(
                              "aria-label",
                              a.str.sformat(
                                u.NodeTableSortedDescendingColumnAria,
                                j
                              )
                            ))
                          : d(ne).attr(
                              "title",
                              u.NodeTableSortAscendingTooltip
                            ),
                        (x.collection.filters[B] = void 0);
                    }),
                    $.off("changed:focus").on("changed:focus", function () {
                      x.tableCaptionView &&
                        x.tableCaptionView._accSearchBoxFocused({
                          columnName: B,
                          columnIndex: E,
                        });
                    }),
                    $.render(),
                    d(this).append($.el),
                    B === x.searchColumn && $.setFocus();
                }
              }
            });
      }
      function Si(x) {
        x &&
          x.forEach(
            function (E) {
              zi.call(this, E.get("id"));
            }.bind(this)
          );
      }
      function zi(x) {
        this.table &&
          x &&
          a.each(
            this.table.rows(),
            function (E) {
              a.each(
                E,
                function (B) {
                  var j = this.table.row(B).data(),
                    J = !1;
                  if (this._allSelectedNodes.length)
                    J = !!this._allSelectedNodes.get(j);
                  else {
                    var $ = j.id || j.get("id");
                    J = !!x[$];
                  }
                  if (J) {
                    var ue = Oe.call(this),
                      de = this.table.row(B).node();
                    ue.fnSelect(de);
                  }
                },
                this
              );
            },
            this
          );
      }
      function di() {
        if (
          this._selectAllCheckboxRegion &&
          this._selectAllCheckboxRegion.currentView
        ) {
          var x = this._selectAllCheckboxRegion.currentView;
          if (this.collection.length) {
            x.setDisabled(!1);
            var E = this.collection.filter(function (J) {
                return J.get(b.isSelectedModelAttributeName);
              }),
              B;
            this.table
              ? (B = this.table
                  .rows()
                  .nodes()
                  .to$()
                  .find(".csui-checkbox:not([disabled])").length)
              : (B = this.collection.length);
            var j = E.length >= B;
            E.length > 0 && !j
              ? x.setChecked("mixed")
              : x.setChecked(E.length > 0);
          } else x.model.set("checked", !1), x.setDisabled(!0);
        }
      }
      function ai(x) {
        return a.map(
          x,
          function (E) {
            var B = this.table.row(E).index();
            return this.table.row(B).data();
          },
          this
        );
      }
      function ji(x) {
        x = x.toLowerCase();
        var E;
        return (
          a.find(this.displayedColumns, function (B, j) {
            if (
              B.attributes.sort_key === x ||
              B.name.toLowerCase() === x ||
              B.attributes.column_key === x
            )
              return (E = j), !0;
          }),
          E
        );
      }
      function Ai(x, E, B) {
        var j = x.options;
        if (
          j.selectColumn &&
          !(E.length > 0 && E[0].get("column_key") === "_select")
        ) {
          const J = new o({
            column_key: "_select",
            name: u.selectionColumnTitle,
            sortable: !1,
            alignment: "center",
            permanentColumn: !0,
          });
          E.unshift(J), (B[J.get("column_key")] = J);
        }
      }
      function Ui(x, E, B) {
        var j = x.options;
        if (
          (j.additionalColumns &&
            j.additionalColumns.length > 0 &&
            a.each(j.additionalColumns, function ($, ue) {
              const de = new o($);
              E.push(de), (B[de.get("column_key")] = de);
            }),
          _e && j.enforceDescriptionColumnInAccessibleMode)
        ) {
          var J = E.some(function ($) {
            if ($.get("column_key") === "description")
              return $.set("is_default_column", !0, { silent: !0 }), !0;
          });
          if (!J) {
            const $ = new o({
              column_key: "description",
              is_default_column: !0,
              name: u.descriptionColumnTitle,
              sortable: !1,
              permanentColumn: !0,
            });
            E.push($), (B[$.get("column_key")] = $);
          }
        }
        if (j.haveDetailsRowExpandCollapseColumn) {
          const $ = new o({
            column_key: "_toggledetails",
            name: "",
            sortable: !1,
            alignment: "center",
            permanentColumn: !0,
            title: "",
            noTitleInHeader: !0,
          });
          E.push($), (B[$.get("column_key")] = $);
        }
        return E;
      }
      function bi() {
        me.call(this), Ji.call(this), this._destroyTableHeaderAndBodyViews();
      }
      function Fi() {
        bi.call(this),
          this.table &&
            (this.trigger("destroyingTable", { sender: this }),
            this._inlineBarShouldDestroy(),
            li.call(this),
            st.call(this),
            this._alternativeHeaderRegion &&
              (this._alternativeHeaderRegion.empty(),
              delete this._alternativeHeaderRegion),
            this._selectAllCheckboxRegion &&
              (this._selectAllCheckboxRegion.empty(),
              delete this._selectAllCheckboxRegion),
            delete this._detailRowsDescriptionTRs,
            delete this._detailRowViewsByModelId,
            this.table.destroy(),
            Xi.call(this),
            delete this.table,
            delete this.tableTools,
            this.trigger("tableDestroyed", { sender: this }));
      }
      function Ji() {
        a.each(this.csuiDestroyRowCallbacks, function (x) {
          x();
        }),
          (this.csuiDestroyRowCallbacks = []);
      }
      function Xi() {
        d("> table , > #message", this.$el).remove();
      }
      function it() {
        var x = this.collection,
          E = this.table.rows(".selected").data(),
          B = {};
        a.each(E, function (j) {
          j.get(b.isSelectedModelAttributeName) &&
            (B[j.id || j.get("id")] = !0);
        }),
          (this.stateBeforeRebuild = {
            pageLength: x ? x.topCount : this.options.pageSize,
            selectedNodesById: B,
            currentScollPosition: this._getScrollContainer().scrollTop(),
          });
      }
      function dt(x) {
        this.stateBeforeRebuild &&
          (a.extend(x, this.stateBeforeRebuild),
          delete this.stateBeforeRebuild);
      }
      function mt(x, E, B, j) {
        if (
          this.refreshEnabled !== !1 &&
          (this.columns.length || this.columns.fetched)
        ) {
          var J = xi.call(this, E, B);
          J && this.collection.fetch();
          var $ = { sEcho: nt(E, "sEcho"), data: this.collection.models };
          this.trigger("settingServerData", { sender: this, result: $ }),
            j($),
            this._isSingleSelectionEnabled() &&
              Si.call(this, this._allSelectedNodes);
        }
      }
      function tt(x, E, B, j) {
        if (this.options.clientSideDataOperation) {
          xi.call(this, E, B);
          var J = { sEcho: nt(E, "sEcho"), data: this.collection.models };
          this.trigger("settingServerData", { sender: this, result: J }), j(J);
        }
      }
      function Zi(x, E) {
        if (!t.isControlClick(x)) {
          x.preventDefault();
          var B = d(x.target),
            j = B.closest("tr"),
            J = j[0]._DT_RowIndex;
          if (J !== void 0) {
            var $ = this.table.row(J).data();
            this.trigger("click" + E + "Action", {
              sender: this,
              target: B[0],
              node: $,
              event: x,
            });
          }
        }
      }
      function xi(x, E) {
        var B = E.aoColumns,
          j = [];
        a.each(E.oInstance.api().table().order(), function (ue) {
          var de = ue[0],
            Ve = B[de].attributes.column_key;
          Ve && (ue[1] ? j.push(Ve + " " + ue[1]) : j.push(Ve));
        });
        var J = !1;
        if (
          (j.length && (J = this.collection.setOrder(j.join(), !1)),
          this.enableViewState)
        ) {
          var $ = !1;
          this.getViewStateOrderBy() || ($ = !0),
            j.length > 0 && this.setViewStateOrderBy(j, { default: $ });
        }
        return J;
      }
      function nt(x, E) {
        return x ? x[E] : void 0;
      }
      function st() {
        a.each(this.columnMenus, function (x) {
          x.destroy();
        }),
          this.columnMenus.splice(0, this.columnMenus.length);
      }
      function ht(x) {
        if (
          (this.$el.find(".csui-column-menu-container").remove(),
          delete this._el_columnMenuContainer,
          this._el_headerCells.find(".csui-column-header-menu").remove(),
          this._el_headerCells.find(".csui-vertical-sticky-divider").remove(),
          this._el_headerCells.find(".csui-column-resize-handle").remove(),
          delete this._el_verticalStickyDivider,
          st.call(this),
          this.tableColumnsWrappingOn)
        )
          return;
        if (!this.tableColumnsWrappingOn) {
          var E = d('<div class="csui-column-menu-container"></div>');
          this.$el.prepend(E), (this._el_columnMenuContainer = E[0]);
        }
        const B = this;
        B.displayedColumns.forEach(function (j, J) {
          var $ = B._el_headerCells
            .filter('th[data-csui-attribute="' + j.attributes.column_key + '"]')
            .get(0);
          if ($) {
            if (j.hasResizeHandle && !_e) {
              const de = j.resizeSpan
                  ? B.displayedColumns[j.resizeNumber - 1].sTitle
                  : j.title,
                Ve = d(
                  '<div class="csui-column-header-menu data-table-custom-area"></div>'
                ).appendTo(d($));
              t.isTouchBrowser() && Ve.addClass("csui-visible");
              const xe = new N({ commands: Z });
              xe.on("after:execute:command", () => {
                const ei = B._el_headerCells
                  .filter(
                    'th[data-csui-attribute="' + j.attributes.column_key + '"]'
                  )
                  .get(0);
                d(ei)
                  .find(
                    '.csui-column-header-menu .binf-dropdown-toggle[aria-expanded="true"]'
                  )
                  .trigger("click"),
                  B.tableCaptionView &&
                    B.tableCaptionView._accColumnMenuFocused({
                      columnName: j.name,
                      columnIndex: J,
                    });
              });
              const Se = {
                orderIndex: j.resizeSpan ? j.resizeNumber - 1 : J,
                resizeIndex: j.resizeSpan ? j.resizeNumber - 1 : J,
                columnIndex: J,
              };
              j.resizeSpan;
              const ce = {
                  context: B.context,
                  data: Se,
                  table: x,
                  originatingView: B,
                },
                ne = H.tableColumnToolbar,
                Me = new z(),
                ze = new G(ne, {
                  status: ce,
                  commands: xe.commands,
                  mask: Me.toolbars.tableColumnToolbar,
                }),
                we = new i.Region({ el: Ve }),
                Ae = `${B.cid}-column${J}`;
              d(`[id="${Ae}"]`).remove(),
                d(`<div id="${Ae}"></div>`).appendTo(B._el_columnMenuContainer);
              const Ge = new W(
                a.extend(
                  {
                    dropDownTarget: `[id='${Ae}']`,
                    dropDownText: u.ToolbarItemMore,
                    dropDownAria: a.str.sformat(u.ToolbarItemMoreAria, de),
                    collection: ze,
                    toolbarName: "tableColumn",
                    columnName: j.name,
                    resizeName: B.displayedColumns[Se.resizeIndex].name,
                    toolbarCommandController: xe,
                    toolbarItemsMask: Me.toolbars.tableColumnToolbar,
                    originatingView: B,
                    blockingParentView: B,
                    noMenuRoles: !1,
                  },
                  ne.options
                )
              );
              B.listenTo(
                Ge,
                "childview:toolitem:action",
                function (ei, Ye) {
                  var ti = this.getSelectedChildren(),
                    ni = {
                      context: this.context,
                      data: Se,
                      nodes: new this._ViewCollection(ti),
                      container: this.collection.node,
                      collection: this.collection,
                      originatingView: this,
                      toolItemView: ei,
                    };
                  xe.toolitemClicked(Ye.toolItem, ni);
                }.bind(B)
              ),
                B.columnMenus.push(Ge),
                we.show(Ge);
            }
            if (
              (j.lastPinned &&
                ((B._el_verticalStickyDivider = d(
                  '<div class="csui-vertical-sticky-divider data-table-custom-area"></div>'
                )[0]),
                (B._el_verticalStickyDivider.style.height = `${B._el_table.clientHeight}px`),
                d($).append(B._el_verticalStickyDivider)),
              j.hasResizeHandle)
            ) {
              const de = d(
                  '<div class="csui-column-resize-handle data-table-custom-area"></div>'
                ),
                Ve = a.str.sformat(
                  u.columnDragSeparatorTooltip,
                  B.displayedColumns[j.resizeNumber - 1].title
                );
              de.attr("title", Ve);
              var ue = {
                columnIndex: J,
                resizeIndex: j.resizeNumber - 1,
                tableView: B,
              };
              de.on("pointerout", ue, lt),
                de.on("pointerdown", ue, ft),
                de.on("pointermove", ue, at),
                de.on("pointerup", ue, rt),
                de.on("mouseenter", ue, vi),
                de.on("mouseleave", ue, Di),
                d($).append(de);
            }
          }
        });
      }
      function Gi(x) {
        const E = x.data.tableView,
          B = x.target.parentElement,
          j = B.getBoundingClientRect(),
          J = le.settings.rtl ? "borderLeftWidth" : "borderRightWidth",
          $ = +(window.getComputedStyle(B)[J] || "").replace("px", "") || 0,
          ue = le.settings.rtl ? j.left : j.right - $;
        (x.data.pageX =
          ue - x.pageX - (E._el_columnResizeIndicator.clientWidth - $) / 2),
          (x.data.pageX =
            x.data.pageX -
            E._el_columnResizeIndicator.parentElement.getBoundingClientRect()
              .x),
          (E._el_columnResizeIndicator.style.left = `${
            x.pageX + x.data.pageX
          }px`);
        const de = this.closest("table").parentElement.clientHeight;
        E._el_columnResizeIndicator.style.height = `${de}px`;
      }
      function vi(x) {
        x.data.tableView._isResizing ||
          (Gi.call(this, x),
          x.data.tableView._el_columnResizeIndicator.classList.add(
            "csui-state-hover"
          ));
      }
      function Di(x) {
        x.data.tableView._el_columnResizeIndicator.classList.remove(
          "csui-state-hover"
        );
      }
      function ot(x) {
        const E = x.data.tableView;
        (E._isResizing = !1),
          this.releasePointerCapture(x.pointerId),
          E._el_columnResizeIndicator.classList.remove("csui-state-active");
      }
      function lt(x) {
        x.data.tableView._isResizing && ot.call(this, x);
      }
      function ft(x) {
        const E = x.data.tableView;
        if (E._isResizing) {
          ot.call(this, x);
          return;
        }
        if (x.button !== 0) return;
        if (
          ((E._isResizing = !0),
          this.setPointerCapture(x.pointerId),
          Gi.call(this, x),
          x.data.resizeIndex === x.data.columnIndex)
        )
          x.data.baseWidth =
            x.target.parentElement.getBoundingClientRect().width;
        else {
          const j = E._el_headerCells[x.data.resizeIndex];
          x.data.baseWidth = j.getBoundingClientRect().width;
        }
        if (
          ((x.data.baseX = x.pageX),
          E.displayedColumns[x.data.resizeIndex].attributes
            .customization_pinned)
        ) {
          const j = Ce.call(E);
          (x.data.areaWidth = j.areaWidth), (x.data.maxWidth = j.maxWidth);
        }
        E._el_columnResizeIndicator.classList.add("csui-state-active");
      }
      function rt(x) {
        const E = x.data.tableView;
        if (!E._isResizing) return;
        (E._isResizing = !1),
          E._el_columnResizeIndicator.classList.remove("csui-state-active"),
          this.releasePointerCapture(x.pointerId);
        const B = x.data.resizeIndex,
          j = x.pageX - x.data.baseX,
          J = le.settings.rtl ? x.data.baseWidth - j : x.data.baseWidth + j,
          $ = E.displayedColumns[B],
          ue = $.columnMinWidth;
        var de = J;
        J < ue
          ? (de = ue)
          : $.attributes.customization_pinned &&
            x.data.areaWidth - x.data.baseWidth + J > x.data.maxWidth &&
            (x.data.maxWidth > x.data.areaWidth
              ? (de = x.data.baseWidth + x.data.maxWidth - x.data.areaWidth)
              : (de = x.data.baseWidth)),
          de !== x.data.baseWidth &&
            (r.debug(
              "table dragged width: {0} area: {1}->{2} column: {3} {4}->{5}",
              x.data.maxWidth,
              x.data.areaWidth,
              x.data.areaWidth - (x.data.baseWidth - de),
              B,
              x.data.baseWidth,
              de
            ) && console.log(r.last),
            E._setColumnToWidth(B, de)),
          E.tableBodyView.findStickyColumns.call(E.tableBodyView);
      }
      function at(x) {
        const E = x.data.tableView;
        if (!E._isResizing) return;
        const B = x.pageX - x.data.baseX,
          j = le.settings.rtl ? x.data.baseWidth - B : x.data.baseWidth + B,
          J = E.displayedColumns[x.data.resizeIndex],
          $ = J.columnMinWidth;
        var ue = x.pageX;
        if (j < $) {
          const de = x.data.baseWidth - $;
          ue = le.settings.rtl ? x.data.baseX + de : x.data.baseX - de;
        } else if (
          J.attributes.customization_pinned &&
          x.data.areaWidth - x.data.baseWidth + j > x.data.maxWidth
        )
          if (x.data.maxWidth > x.data.areaWidth) {
            const de = x.data.maxWidth - x.data.areaWidth;
            ue = le.settings.rtl ? x.data.baseX - de : x.data.baseX + de;
          } else ue = x.data.baseX;
        E._el_columnResizeIndicator.style.left = `${ue + x.data.pageX}px`;
      }
      function ct(x, E) {
        const B = [],
          j = E + 1;
        return (
          x.querySelectorAll("tr:not(.csui-details-row)").forEach(function ($) {
            const ue = $.querySelector(
              "th:nth-child(" + j + "), td:nth-child(" + j + ")"
            );
            B.push(ue);
          }),
          B
        );
      }
      function O(x) {
        const E = x.data.resizeNumber;
        x.data.table
          .querySelectorAll("th.csui-resize-" + E + ", td.csui-resize-" + E)
          .forEach(function (j) {
            j.classList.add("csui-column-highlight");
          });
      }
      function K(x) {
        const E = x.data.resizeNumber;
        x.data.table
          .querySelectorAll("th.csui-resize-" + E + ", td.csui-resize-" + E)
          .forEach(function (j) {
            j.classList.remove("csui-column-highlight");
          });
      }
      function re() {
        const x = this;
        x._el_table.querySelectorAll("tr").forEach(function (B) {
          B.querySelectorAll("th, td").forEach(function (J, $) {
            var ue = x.displayedColumns[$];
            x._adjustColumnsInNoWrapMode(x._columnModelsByKey[ue.name], J, ue);
          });
        });
      }
      function ve(x = 0, E = void 0) {
        for (var B = x; B < this.displayedColumns.length; ++B) {
          const $ = this.displayedColumns[B];
          $.attributes.customization_min_width &&
            ($.columnMinWidth = $.attributes.customization_min_width),
            $.isResizeColumn &&
              !$.columnMinWidth &&
              ($.columnMinWidth = ie.columnCustomizationMinWidth);
          const ue = B === x && E ? E.value : $.attributes.customization_width,
            de = +ue;
          var j = void 0,
            J = ue === 0 || !!de;
          if (
            (J
              ? ((j = de || 0),
                $.isResizeColumn &&
                  j < $.columnMinWidth &&
                  (j = $.columnMinWidth))
              : $.attributes.customization_pinned &&
                !$.lastPinned &&
                !E &&
                (j = $.columnMinWidth || ie.columnCustomizationMinWidth),
            B === 0 && j != null && (j = j + 18),
            ($.columnWidth = j),
            $.attributes.customization_pinned)
          )
            if (!B) $.stickyOffset = 0;
            else {
              const Ve = this.displayedColumns[B - 1];
              Ve.stickyOffset != null && Ve.columnWidth != null
                ? ($.stickyOffset = Ve.stickyOffset + Ve.columnWidth)
                : ($.stickyOffset = void 0);
            }
        }
      }
      function Ce() {
        const x = this._el_wrapper.getBoundingClientRect(),
          E = Math.round(x.width * this.options.pinnedAreaMaxFactor),
          B = this._el_lastPinnedHeader
            ? this._el_lastPinnedHeader.getBoundingClientRect()
            : void 0;
        var j;
        if (B) {
          const J = le.settings.rtl ? x.right - B.right : B.x - x.x;
          j = B.width + J;
        }
        return { areaWidth: j, maxWidth: E };
      }
      function Te() {
        for (var x, E = 0; E < this.displayedColumns.length; ++E) {
          var B = this.displayedColumns[E];
          if (
            !B.attributes.customization_pinned ||
            (B.isResizeColumn && B.columnWidth > B.columnMinWidth && (x = E),
            B.lastPinned)
          )
            break;
        }
        return x;
      }
      function Ne(x) {
        var E = this.getNameCell(x);
        const B = E && E[0],
          j = this.el.querySelector("thead tr");
        if (B && j) {
          var J = B.getBoundingClientRect().top,
            $ = j.getBoundingClientRect().bottom;
          return J < $;
        }
      }
      return (
        a.extend(ie.prototype, Q),
        a.extend(ie.prototype, q),
        ie.prototype._eventsToPropagateToViews.push("clicked:cell"),
        ie
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/selected.columns/impl/selected.columns",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="column-header">
  <div class="icon arrow_back" tabindex="0"  title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backButtonTitle") ||
                  (e != null ? n(e, "backButtonTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 52 },
                      end: { line: 2, column: 71 },
                    },
                  })
                : t)
            ) +
            '"   aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "ColumnSettingsBackAria") ||
                  (e != null ? n(e, "ColumnSettingsBackAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "ColumnSettingsBackAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 87 },
                      end: { line: 2, column: 113 },
                    },
                  })
                : t)
            ) +
            `" role="button"></div>
  <div class="column-title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 35 },
                      end: { line: 3, column: 44 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 46 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</div>
</div>
<div class="add-button" tabindex="0" role="button" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "addColumnsAria") ||
                  (e != null ? n(e, "addColumnsAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "addColumnsAria",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 63 },
                      end: { line: 5, column: 81 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="icon icon-columnsadd" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "addAvailableColumns") ||
                  (e != null ? n(e, "addAvailableColumns") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "addAvailableColumns",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 44 },
                      end: { line: 6, column: 67 },
                    },
                  })
                : t)
            ) +
            `"></span>
</div>
<div class="columns-list csui-normal-scrolling binf-list-group"  role="menu">
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_selected.columns_impl_selected.columns",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/selected.columns/impl/selected.column",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="column-label" data-csui-key="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 44 },
                      end: { line: 4, column: 53 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="csui-column-label-category">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "categoryName") ||
                  (e != null ? n(e, "categoryName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "categoryName",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 45 },
                      end: { line: 5, column: 61 },
                    },
                  })
                : t)
            ) +
            `</span>
    <span class="csui-column-label-attribute">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "attributeName") ||
                  (e != null ? n(e, "attributeName") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "attributeName",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
  </span>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="column-label" data-csui-key="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 44 },
                      end: { line: 9, column: 53 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 55 },
                      end: { line: 9, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span>
`
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <div class="remove-button icon circle_delete csui-icon-v2-state-el" tabindex="0" role="button" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "removeColumnAria") ||
                  (e != null ? s(e, "removeColumnAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "removeColumnAria",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 109 },
                      end: { line: 13, column: 129 },
                    },
                  })
                : n)
            ) +
            '"  title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "removeColumn") ||
                  (e != null ? s(e, "removeColumn") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "removeColumn",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 139 },
                      end: { line: 13, column: 155 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "xsmall",
                iconName: "csui_action_close32",
              },
              loc: {
                start: { line: 14, column: 4 },
                end: { line: 14, column: 76 },
              },
            })) != null
              ? t
              : "") +
            `
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="column-item-container" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 42 },
                      end: { line: 1, column: 50 },
                    },
                  })
                : n)
            ) +
            `">
  <span class="icon icon-draggable-handle6"></span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "hasAttribute") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 10, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isRemovable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 12, column: 0 },
                  end: { line: 16, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_selected.columns_impl_selected.column",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/settings/selected.columns/selected.columns.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/utils/base",
      "csui/controls/globalmessage/globalmessage",
      "i18n!csui/controls/settings/impl/nls/lang",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/settings/available.columns/available.columns.view",
      "csui/controls/table/table.view",
      "hbs!csui/controls/settings/selected.columns/impl/selected.columns",
      "hbs!csui/controls/settings/selected.columns/impl/selected.column",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s) {
      "use strict";
      var o = h.View.extend({
          template: s,
          className: function () {
            return (
              "column-item" +
              (this.model.get("isNew") ? " csui-new-column-item" : "")
            );
          },
          attributes: { "data-value": "column", role: "menuitem" },
          ui: { removeBtn: ".remove-button" },
          triggers: {
            keydown: {
              event: "keydown:item",
              stopPropagation: !1,
              preventDefault: !1,
            },
            "click @ui.removeBtn": {
              event: "column:remove",
              stopPropagation: !1,
              preventDefault: !1,
            },
          },
          templateContext: function () {
            var f = ["OTName", "OTMIMEType"],
              g = this.model.get("key"),
              w = this.model.get("name"),
              b = w && w.replace(/\s*:[^:]*/g, ""),
              C = w && w.replace(/^[^:]*:\s*/, ""),
              k = b !== C;
            return {
              name: w,
              categoryName: b,
              attributeName: C,
              hasAttribute: k,
              label: g,
              isRemovable: !(f.indexOf(g) > -1),
              removeColumn: d.str.sformat(l.removeColumn, w),
              removeColumnAria: d.str.sformat(l.removeColumnMenuAria, w),
            };
          },
          constructor: function (g) {
            h.View.apply(this, arguments),
              g && g.isTabularView && this.$el.attr("draggable", !0),
              this.model.set(
                "sequence",
                this.model &&
                  this.model.collection &&
                  this.model.collection.findIndex(this.model)
              );
          },
        }),
        c = h.CollectionView.extend({
          className: "csui-selected-column",
          childView: o,
          childViewOptions: function () {
            return {
              isTabularView: this.options && this.options.isTabularView,
            };
          },
          childViewEvents: {
            "column:remove": "onColumnRemove",
            "keydown:item": "onChildViewKeydown",
          },
          constructor: function (g) {
            g || (g = {}),
              (this.options = g),
              (this.focusIndex = 0),
              h.CollectionView.apply(this, g);
          },
          onColumnRemove: function (f) {
            this.options.availableColumnsCollection.add(
              this.options.collection.remove(f.model)
            ),
              this.options.settingsView.$el.css(
                "height",
                this.options.settingsView.currentCard.outerHeight()
              ),
              (this.options.searchResultsView.headerView.data.display_regions =
                "{" +
                this.collection
                  .pluck("key")
                  .map(function (g) {
                    return "'" + g + "'";
                  })
                  .join(",") +
                "}");
          },
          attachHtml: function (f, g, w) {
            h.CollectionView.prototype.attachHtml.call(this, f, g, w),
              !this.options.isTabularView ||
              g.model.get("key") === "OTName" ||
              g.model.get("key") === "OTMIMEType"
                ? (g.$el.addClass("drag-disabled"),
                  g.$el.removeAttr("draggable"))
                : this.attachDragListeners(g);
          },
          _getItemKey: function (f) {
            return f.find("[data-csui-key]").attr("data-csui-key");
          },
          attachDragListeners: function (f) {
            var g = this,
              w = f.$el,
              b = function () {
                g.$el.find(".csui-dragline").remove(), delete g._dropAfter;
              };
            w.on("dragstart", function (C) {
              (g._dragData = { sourceKey: g._getItemKey(v(C.currentTarget)) }),
                C.originalEvent.dataTransfer.setData("text", "");
            }),
              w.on("dragover", function (C) {
                if (!(!g._dragData || g._dragData.sourceKey === void 0)) {
                  C.preventDefault();
                  var k = v('<div class="csui-dragline">'),
                    y = v(C.currentTarget).height();
                  C.offsetY > y / 2
                    ? (g._dropAfter === void 0 || g._dropAfter === !1) &&
                      (b(), v(C.currentTarget).after(k), (g._dropAfter = !0))
                    : (g._dropAfter === void 0 || g._dropAfter === !0) &&
                      (b(), v(C.currentTarget).before(k), (g._dropAfter = !1));
                }
              }),
              w.on(
                "drop",
                d.bind(function (C) {
                  !g._dragData ||
                    g._dragData.sourceKey === void 0 ||
                    this.onSubItemDrop(g, C);
                }, this)
              ),
              w.on("dragleave", function () {
                b();
              }),
              w.on("dragend", function (C) {
                C.preventDefault(), b(), delete g._dragData;
              });
          },
          onSubItemDrop: function (f, g) {
            var w = f,
              b =
                (w._dragData && w._dragData.sourceKey) ||
                w.keyDragSource ||
                null,
              C = w._getItemKey(v(g.currentTarget)),
              k = w.collection.findWhere({ key: b }),
              y = w.collection.findWhere({ key: C }),
              S = w.collection.indexOf(k),
              P = w.collection.indexOf(y),
              F = this.$el.find("*[tabindex]"),
              D,
              L,
              Q;
            g.preventDefault(),
              !(S === P || !S) &&
                (w._dropAfter === !0 && P++,
                S < P && P--,
                w.collection.remove(k),
                w.collection.add(k, { at: P }),
                w.$el.find(".csui-dragline").remove(),
                w.keyDragSource &&
                  (w.$el.find(".active").removeClass("active"),
                  v(w.$el.children()[P]).addClass("active"),
                  w.$el.find(".active > *[tabindex]").trigger("focus"),
                  (D = w._getItemKey(w.$el.find(".active"))),
                  (L = w.collection.findWhere({ key: D })),
                  (Q = w.collection.indexOf(L) - 1),
                  (this.focusIndex = Q - 1)),
                w.triggerMethod("reorder", k),
                w._dragData && w._dragData.sourceKey && delete w._dropAfter,
                (this.options.settingsView.isChanged = !0),
                (this.options.searchResultsView.headerView.data.display_regions =
                  "{" +
                  this.collection
                    .pluck("key")
                    .map(function (q) {
                      return "'" + q + "'";
                    })
                    .join(",") +
                  "}"));
          },
          onSubItemPaste: function (f, g) {
            var w = f,
              b = v('<div class="csui-dragline">');
            w.$el.find(".csui-dragline").remove(),
              g.keyCode === 40
                ? v(g.currentTarget).after(b)
                : v(g.currentTarget).siblings(".active").before(b);
          },
          onChildViewKeydown: function (f, g) {
            var w = i.isMacintosh(),
              b = g.keyCode,
              C = this.$el.find("*[tabindex]"),
              k = !1,
              y;
            if (
              this.options.isTabularView &&
              ((w && g.metaKey && !g.ctrlKey) ||
                (!w && !g.metaKey && g.ctrlKey))
            )
              g.preventDefault(),
                g.stopPropagation(),
                b === 88
                  ? (this.keyDragSource = this._getItemKey(v(g.currentTarget)))
                  : b === 86 &&
                    (this.onSubItemDrop(this, g),
                    (this.keyDragSource = void 0));
            else if (b === 27)
              this.el
                .closest(".csui-search-settings")
                .querySelector(".csui-setting-icon")
                .focus(),
                this.options.settingsView.triggerMethod("close:menu", g),
                g.preventDefault(),
                g.stopPropagation();
            else if (b === 13 || b === 32)
              this.onColumnRemove(f, g),
                g.stopPropagation(),
                C.length - 1 === this.focusIndex && --this.focusIndex,
                (C = this.$el.find("*[tabindex]")),
                C.length === 0
                  ? ((y = this.$el
                      .parents(".selected-columns-container")
                      .find(".add-button")),
                    y.trigger("focus"))
                  : (v(C[this.focusIndex])
                      .closest(".column-item")
                      .addClass("active"),
                    v(C[this.focusIndex]).trigger("focus"));
            else if (
              C.length &&
              ((b === 38 || b === 40) &&
                (v(C[this.focusIndex])
                  .closest(".column-item")
                  .removeClass("active"),
                b === 38
                  ? this.focusIndex > 0 && (--this.focusIndex, (k = !0))
                  : this.focusIndex < C.length - 1 &&
                    (++this.focusIndex, (k = !0)),
                v(C[this.focusIndex])
                  .closest(".column-item")
                  .addClass("active"),
                v(C[this.focusIndex]).trigger("focus"),
                this.keyDragSource &&
                  k &&
                  (this.onSubItemPaste(this, g), (k = !1)),
                g.stopPropagation(),
                g.preventDefault()),
              g.keyCode === 9)
            ) {
              if (
                (v(C[this.focusIndex])
                  .closest(".column-item")
                  .removeClass("active"),
                g.shiftKey && this.options.availableColumnsCollection.length)
              )
                (y = this.$el
                  .parents(".selected-columns-container")
                  .find(".add-button")),
                  y.trigger("focus");
              else {
                var S = this.$el
                  .parents(".selected-columns-container")
                  .find(".arrow_back");
                S.trigger("focus");
              }
              g.stopPropagation(), g.preventDefault();
            }
          },
        }),
        m = h.View.extend({
          constructor: function (g) {
            h.View.apply(this, arguments);
          },
          template: n,
          templateContext: {
            label: l.columnSettingsTitle,
            backButtonTitle: l.SearchBackToolTip,
            backButtonAria: l.SearchBackAria,
            ColumnSettingsBackAria: l.SettingsBackAria,
            addAvailableColumns: l.addAvailableColumns,
            addColumnsAria: l.addColumnsAria,
          },
          behaviors: { TabableRegionBehavior: { behaviorClass: u } },
          regions: { columnsList: ".columns-list" },
          ui: { backArrow: ".arrow_back", addButton: ".add-button" },
          events: {
            "click @ui.backArrow": "showSettingsView",
            "keydown @ui.backArrow": "onKeydownBackArrow",
            "click @ui.addButton": "showAvailableColumns",
            keydown: "onKeyInView",
          },
          onKeydownBackArrow: function (f) {
            var g = f.keyCode,
              w = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length;
            w &&
              (g === 13 || g === 32 || g === 37) &&
              (this.showSettingsView(f),
              f.preventDefault(),
              f.stopPropagation());
          },
          currentlyFocusedElement: function (f) {
            var g = this.$("*[tabindex]");
            return (
              g.length && g.prop("tabindex", 0),
              f && f.shiftKey ? v(g[g.length - 1]) : v(g[0])
            );
          },
          onKeyInView: function (f) {
            var g = f.keyCode,
              w = this.$el.find(".add-button"),
              b = 0,
              C = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length;
            C
              ? g === 27
                ? (this.el
                    .closest(".csui-search-settings")
                    .querySelector(".csui-setting-icon")
                    .focus(),
                  this.options.settingsView.triggerMethod("close:menu", f),
                  f.preventDefault(),
                  f.stopPropagation())
                : w.length &&
                  (g === 9
                    ? (f.shiftKey
                        ? v(document.activeElement).hasClass("arrow_back")
                          ? ((w = this.$el.find(".circle_delete")),
                            (b = this.selectedColumnsCollectionView.focusIndex =
                              w.length - 1),
                            v(w[b]).closest(".column-item").addClass("active"),
                            v(w[b]).trigger("focus"))
                          : this.$el.find(".arrow_back").trigger("focus")
                        : ((b = 0),
                          (v(document.activeElement).hasClass("arrow_back") &&
                            this.options.availableColumnsCollection.length) ||
                            ((w = this.$el.find(".circle_delete")),
                            (this.selectedColumnsCollectionView.focusIndex = 0),
                            v(w[b]).closest(".column-item").addClass("active")),
                          v(w[b]).trigger("focus")),
                      f.preventDefault(),
                      f.stopPropagation())
                    : (g === 13 || g === 32) &&
                      (this.showAvailableColumns(f),
                      f.preventDefault(),
                      f.stopPropagation()))
              : (f.stopPropagation(), f.preventDefault());
          },
          showSettingsView: function (f) {
            var g = new FormData(),
              w =
                this.options.searchResultsView.headerView.data.display_regions;
            w &&
              (this.options.searchResultsView.blockActions(),
              g.append("display_regions", w),
              this.options.settings
                .save(null, {
                  parse: !1,
                  data: g,
                  processData: !1,
                  cache: !1,
                  contentType: !1,
                })
                .done(
                  d.bind(function (b) {
                    (this.options.searchResultsView.collection.settings_changed =
                      !0),
                      this.options.tableCollection.fetch(),
                      (this.options.settingsView.isChanged = !1),
                      (this.options.searchResultsView.headerView.data = {}),
                      this.options.searchResultsView.unblockActions();
                  }, this)
                )
                .fail(
                  d.bind(function (b) {
                    (b = new i.Error(b)),
                      e.showMessage("error", b.message),
                      this.options.searchResultsView.unblockActions();
                  }, this)
                )),
              this.options.settingsView.showSettings(
                "settingsDropDownContainer",
                this.options.settingsView.settingsDropDownView
              );
          },
          showAvailableColumns: function () {
            var f =
                this.options.settings && this.options.settings.get("display"),
              g,
              w;
            f &&
              f.display_regions &&
              ((g = f.display_regions.available),
              (w = f.display_regions.selected)),
              this.options.settingsView.showSettings(
                "availableColumnsContainer",
                new r({
                  selectedColumnView: this,
                  settingsView: this.options.settingsView,
                  tableCollection: this.options.tableCollection,
                  collection: g,
                  selectedColumnsCollection: w,
                  settings: this.options.settings,
                  searchResultsView: this.options.searchResultsView,
                })
              );
          },
          onRender: function () {
            this.options.availableColumnsCollection.length ||
              this.ui.addButton.addClass("binf-hidden"),
              (this.selectedColumnsCollectionView = new c(this.options)),
              this.showChildView(
                "columnsList",
                this.selectedColumnsCollectionView
              ),
              this.listenTo(
                this.options.availableColumnsCollection,
                "update",
                d.bind(function () {
                  this.options.availableColumnsCollection.length
                    ? this.ui.addButton.removeClass("binf-hidden")
                    : this.ui.addButton.addClass("binf-hidden");
                }, this)
              );
          },
        });
      return m;
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/summary.description/impl/summary.descriptions",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="column-header"  >
  <div class="icon arrow_back" tabindex="0" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backButtonTitle") ||
                  (e != null ? n(e, "backButtonTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 70 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backButtonAria") ||
                  (e != null ? n(e, "backButtonAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 84 },
                      end: { line: 2, column: 102 },
                    },
                  })
                : t)
            ) +
            `" role="button"></div>
  <div class="column-title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 35 },
                      end: { line: 3, column: 44 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 46 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</div>
</div>
<div class="columns-list binf-list-group" ></div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_summary.description_impl_summary.descriptions",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/summary.description/impl/summary.description",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "selected";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="column-item-container" tabindex="0" aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 60 },
                      end: { line: 1, column: 68 },
                    },
                  })
                : n)
            ) +
            `" role='radio' aria-checked="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "checked") || (e != null ? s(e, "checked") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "checked",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 97 },
                      end: { line: 1, column: 108 },
                    },
                  })
                : n)
            ) +
            `">
  <span class="icon icon-listview-checkmark ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "selected") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 44 },
                  end: { line: 2, column: 75 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></span>
  <span class="column-label" id="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "key") || (e != null ? s(e, "key") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "key",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 33 },
                      end: { line: 3, column: 40 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 49 },
                      end: { line: 3, column: 57 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 59 },
                      end: { line: 3, column: 67 },
                    },
                  })
                : n)
            ) +
            `</div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_settings_summary.description_impl_summary.description",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/settings/summary.description/summary.description.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/controls/globalmessage/globalmessage",
      "i18n!csui/controls/settings/impl/nls/lang",
      "csui/utils/base",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/controls/settings/summary.description/impl/summary.descriptions",
      "hbs!csui/controls/settings/summary.description/impl/summary.description",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = h.View.extend({
          template: t,
          className: "column-item",
          templateContext: function () {
            return {
              name: this._nameResolver(),
              label: this.model.get("key"),
              checked: !!this.model.get("selected"),
            };
          },
          ui: { itemContainer: ".column-item-container" },
          attributes: { role: "presentation" },
          triggers: {
            "click @ui.itemContainer": "click:itemContainer",
            "keydown @ui.itemContainer": {
              event: "keydown:itemContainer",
              stopPropagation: !1,
              preventDefault: !1,
            },
          },
          constructor: function (m) {
            m || (m = {}),
              (this.options = m),
              h.View.call(this, m),
              this.listenTo(this.model, "change", this.render);
          },
          _nameResolver: function () {
            var c = this.model.get("key"),
              m;
            switch (c) {
              case "SO": {
                m = e.SummaryOnly;
                break;
              }
              case "SP": {
                m = e.SummaryPreferred;
                break;
              }
              case "DO": {
                m = e.DescriptionOnly;
                break;
              }
              case "DP": {
                m = e.DescriptionPreferred;
                break;
              }
              case "SD": {
                m = e.SummaryAndDescription;
                break;
              }
              default:
                m = this.model.get("name");
            }
            return m;
          },
        }),
        s = h.CollectionView.extend({
          childView: n,
          childViewOptions: {},
          attributes: { role: "menu" },
          constructor: function (m) {
            m || (m = {}),
              (this.options = m),
              (this.focusIndex = 0),
              h.CollectionView.call(this, m);
          },
          onChildviewClickItemContainer: function (c) {
            this.selectSummary(c);
          },
          selectSummary: function (c) {
            this.collection.findWhere({ selected: !0 }).unset("selected"),
              c.model.set("selected", !0),
              (this.options.searchResultsView.headerView.data.summary_description =
                c.model.get("key")),
              (this.options.selectedCollection = c.model.get("key")),
              (this.options.settingsView.model.get(
                "display"
              ).summary_description.selected = c.model.get("key")),
              c.$el.find(".column-item-container").trigger("focus");
          },
          onChildviewKeydownItemContainer: function (c, m) {
            var f = m.keyCode,
              g = this.$el.find("*[tabindex]");
            if (f === 27)
              this.el
                .closest(".csui-search-settings")
                .querySelector(".csui-setting-icon")
                .focus(),
                this.options.settingsView.triggerMethod("close:menu", m),
                m.preventDefault(),
                m.stopPropagation();
            else if (f === 13 || f === 32)
              this.selectSummary(c), m.stopPropagation(), m.preventDefault();
            else if (
              g.length &&
              ((f === 38 || f === 40) &&
                (f === 38
                  ? this.focusIndex > 0 && --this.focusIndex
                  : this.focusIndex < g.length - 1 && ++this.focusIndex,
                v(g[this.focusIndex]).trigger("focus"),
                m.stopPropagation(),
                m.preventDefault()),
              m.keyCode === 9)
            ) {
              var w = this.$el
                .parents(".csui-summary-description-list")
                .find(".arrow_back");
              w.trigger("focus"), m.stopPropagation(), m.preventDefault();
            }
          },
        }),
        o = h.View.extend({
          template: r,
          className: "csui-summary-description-list",
          ui: { backArrow: ".arrow_back" },
          events: {
            "click @ui.backArrow": "onClickBackArrow",
            "keydown @ui.backArrow": "onKeyPressBackArrow",
            keydown: "onKeyInView",
          },
          regions: { columnsList: ".columns-list" },
          behaviors: { TabableRegionBehavior: { behaviorClass: u } },
          currentlyFocusedElement: function (c) {
            var m = this.$("*[tabindex]");
            return (
              m.length && m.prop("tabindex", 0),
              c && c.shiftKey ? v(m[m.length - 1]) : v(m[0])
            );
          },
          templateContext: function () {
            var c = this;
            return (
              d.each(
                this.options.availableCollection &&
                  this.options.availableCollection.models,
                function (m, f) {
                  m.get("key") === c.options.selectedCollection &&
                    (m.set("selected", !0), m.set("checked", !0));
                }
              ),
              {
                label: e.summaryDescriptionTitle,
                available:
                  this.options.availableCollection &&
                  this.options.availableCollection.models,
                backButtonTitle: e.SearchBackToolTip,
                backButtonAria: e.SummaryDescriptionBackAria,
              }
            );
          },
          constructor: function (m) {
            m || (m = {}), (this.options = m), h.View.call(this, m);
          },
          onClickBackArrow: function (c) {
            this.showSettingsView(c);
          },
          onKeyPressBackArrow: function (c) {
            var m = c.keyCode,
              f = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length;
            f &&
              (m === 13 || m === 32 || m === 37) &&
              (this.showSettingsView(c),
              c.stopPropagation(),
              c.preventDefault());
          },
          showSettingsView: function (c) {
            var m = new FormData(),
              f =
                this.options.searchResultsView.headerView.data
                  .summary_description;
            f &&
              (this.options.searchResultsView.blockActions(),
              m.append("summary_description", f),
              this.options.settings
                .save(null, {
                  parse: !1,
                  data: m,
                  processData: !1,
                  cache: !1,
                  contentType: !1,
                })
                .done(
                  d.bind(function (g) {
                    this.options.settingsView.trigger(
                      "update:showSummaryDescriptions"
                    ),
                      (this.options.searchResultsView.collection.settings_changed =
                        !1),
                      (this.options.searchResultsView.headerView.data = {}),
                      this.options.searchResultsView.unblockActions();
                  }, this)
                )
                .fail(function (g) {
                  (g = new l.Error(g)),
                    i.showMessage("error", g.message),
                    this.options.searchResultsView.unblockActions();
                })),
              this.options.settingsView.showSettings(
                "settingsDropDownContainer",
                this.options.settingsView.settingsDropDownView
              );
          },
          onRender: function () {
            (this.summaryDescriptionCollectionView = new s(this.options)),
              this.showChildView(
                "columnsList",
                this.summaryDescriptionCollectionView
              );
          },
          onKeyInView: function (c) {
            var m = c.keyCode,
              f = this.$el.find(".column-item-container"),
              g = 0;
            m === 27
              ? (this.el
                  .closest(".csui-search-settings")
                  .querySelector(".csui-setting-icon")
                  .focus(),
                this.options.settingsView.triggerMethod("close:menu", c),
                c.preventDefault(),
                c.stopPropagation())
              : f.length &&
                (m === 9 || m === 16) &&
                (c.shiftKey ? (g = f.length - 1) : (g = 0),
                (this.summaryDescriptionCollectionView.focusIndex = 0),
                v(f[g]).trigger("focus"),
                c.stopPropagation(),
                c.preventDefault());
          },
        });
      return o;
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/impl/settings.dropdown",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <a class="csui-settings-option ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "classname") || (e != null ? n(e, "classname") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "classname",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 33 },
                      end: { line: 2, column: 46 },
                    },
                  })
                : t)
            ) +
            '" id="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "id") || (e != null ? n(e, "id") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 52 },
                      end: { line: 2, column: 58 },
                    },
                  })
                : t)
            ) +
            '" href="javascript:void(0);" tabindex="-1" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 108 },
                      end: { line: 2, column: 117 },
                    },
                  })
                : t)
            ) +
            `" aria-haspopup="menu" role="menuitem">
  <span class="csui-settings-option-title">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 43 },
                      end: { line: 3, column: 52 },
                    },
                  })
                : t)
            ) +
            `</span>
  <span class="icon icon-next-card"></span>
  </a>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <a class="csui-settings-option ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "classname") || (e != null ? n(e, "classname") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "classname",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 33 },
                      end: { line: 7, column: 46 },
                    },
                  })
                : t)
            ) +
            '" id="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "id") || (e != null ? n(e, "id") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 52 },
                      end: { line: 7, column: 58 },
                    },
                  })
                : t)
            ) +
            '" href="javascript:void(0);" tabindex="-1" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 108 },
                      end: { line: 7, column: 117 },
                    },
                  })
                : t)
            ) +
            '" role="radio" aria-checked = "' +
            i.escapeExpression(
              ((t =
                (t = n(l, "selected") || (e != null ? n(e, "selected") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "selected",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 148 },
                      end: { line: 7, column: 160 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="icon icon-listview-checkmark"></span>
    <span class="csui-settings-option-title">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 45 },
                      end: { line: 9, column: 54 },
                    },
                  })
                : t)
            ) +
            `</span>
  </a>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "showNextCard") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 11, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial("csui_controls_settings_impl_settings.dropdown", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/settings/impl/settings.dropdown.view",
    [
      "require",
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/controls/globalmessage/globalmessage",
      "i18n!csui/controls/settings/impl/nls/lang",
      "csui/utils/base",
      "csui/controls/settings/selected.columns/selected.columns.view",
      "csui/controls/settings/summary.description/summary.description.view",
      "smart/controls/table.settings/table.settings.columns.side.panel.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/commonconfig.util",
      "hbs!csui/controls/settings/impl/settings.dropdown",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m) {
      "use strict";
      let f = d.config();
      h.defaults(f, {
        enableCustomConfiguration: c.enableFeatureInSmartView() || !1,
      });
      var g = e.View.extend({
          tagName: "li",
          template: m,
          className: "binf-list-group-item",
          templateContext: function () {
            return { checked: !!this.model.get("selected") };
          },
          triggers: {
            "click a": { event: "show:settings" },
            "keydown a": {
              event: "show:settings:dropdown",
              preventDefault: !1,
            },
          },
          constructor: function (C) {
            C || (C = {}),
              (this.options = C),
              C.settingsView.options.tableCollection?.prevSearchDisplayStyle?.toLowerCase() ===
                C.model.get("id").toLowerCase() && C.model.set("selected", !0),
              e.View.call(this, C);
          },
          showColumnsSettings: function (b) {
            var C = this.model && this.model.get("display"),
              k,
              y;
            C &&
              C.display_regions &&
              ((k = C.display_regions.selected),
              (y = C.display_regions.available)),
              k &&
                k.where({ isNew: !0 }).map(function (S) {
                  S.set({ isNew: !1 }, { silent: !0 });
                }),
              this.options.showSettings(
                "selectedColumnsContainer",
                new t({
                  settingsDropDownView: this,
                  tableCollection: this.options.tableCollection,
                  collection: k,
                  availableColumnsCollection: y,
                  settings: this.model,
                })
              );
          },
          showSummaryOrDescription: function (b) {
            var C = this.model && this.model.get("display"),
              k,
              y;
            C.summary_description &&
              C.summary_description.available &&
              ((k = C.summary_description.available),
              (y = C.summary_description.selected)),
              this.options.originatingView.showSettings(
                "summaryOrDescriptionContainer",
                new n({
                  settingsDropDownView: this,
                  selectedCollection: y,
                  availableCollection: k,
                  collection: k,
                  settings: this.model,
                })
              );
          },
        }),
        w = e.CollectionView.extend({
          constructor: function () {
            (this.focusIndex = 0),
              e.CollectionView.apply(this, arguments),
              (this.enablePinnedColumns =
                this.options.settingsView.enablePinnedColumns);
          },
          className: "binf-list-group",
          tagName: "ul",
          attributes: {
            role: "menu",
            id: "search-setting-wrapper",
            "aria-label": "search settings",
          },
          childView: g,
          childViewEvents: {
            "show:settings:dropdown": "onShowSettingsDropdown",
            "show:settings": "onShowSettings",
          },
          childViewOptions: function () {
            return { settingsView: this.options.settingsView };
          },
          behaviors: { TabableRegionBehavior: { behaviorClass: o } },
          currentlyFocusedElement: function (b) {
            var C = this.$("*[tabindex]");
            return (
              C.length && C.prop("tabindex", 0),
              b && b.shiftKey ? a(C[C.length - 1]) : a(C[0])
            );
          },
          mergeConfiguredColumns: function (b, C, k) {
            return (
              C.forEach((y) => {
                let S = b.find((P) => P.get(k) === y.get(k));
                S && Object.assign(S.attributes, y.attributes);
              }),
              b
            );
          },
          getColumnSequence: function (b, C, k) {
            let y =
              k.withCustomizations && C
                ? C.get
                  ? C.get("customization_order")
                  : C.customization_order
                : void 0;
            return (
              y ||
                ((y = b ? (b.get ? b.get("sequence") : b.sequence) : void 0),
                y == null &&
                  ((y = C
                    ? C.get
                      ? C.get("definitions_order")
                      : C.definitions_order
                    : void 0),
                  !y && y !== void 0 && (y = void 0))),
              y
            );
          },
          collectRemovedColumns: function (b) {
            let C = [],
              k,
              y,
              S,
              P;
            return (
              b.forEach((F, D, L) => {
                const Q = F.get("column_key");
                if (
                  (k &&
                    (F.get("customization_pinned") === S
                      ? (P.push(Q),
                        Q === k && (C.push(...P), (k = ""), (y = ""), (P = [])))
                      : (k = "")),
                  !k)
                ) {
                  const q = F.get("customization_resize_span");
                  q &&
                    q !== Q &&
                    ((k = q),
                    (y = Q),
                    (S = F.get("customization_pinned")),
                    (P = []));
                }
              }),
              C
            );
          },
          panelAllColumn: function (b) {
            return {
              id: b.get("id"),
              name: b.get("name"),
              type: b.get("type"),
              permanent: b.get("permanent"),
              pinned: b.get("pinned"),
              default: b.get("default"),
              label: b.get("label"),
              group: b.get("group"),
              permanentAtEnd: b.get("permanentAtEnd"),
            };
          },
          showTableSidePanel() {
            csui.require(
              [
                "csui/models/widget/search.results/search.metadata/search.columns",
              ],
              h.bind(function (b) {
                let C,
                  k,
                  y,
                  S,
                  P = this.model && this.model.get("display"),
                  F,
                  D;
                P &&
                  P.display_regions &&
                  ((F = P.display_regions.selected),
                  (D = P.display_regions.available));
                const L = b.deepClone().models;
                let Q = this.options.searchResultsView.columns.models;
                (Q = this.mergeConfiguredColumns(Q, L, "key")),
                  (S = Object.fromEntries(L.map((te) => [te.get("key"), te]))),
                  (y = h.sortBy(Q, (te) =>
                    this.getColumnSequence(S[te.get("column_key")], te, {
                      withCustomizations: !1,
                    })
                  ));
                const q = this.collectRemovedColumns(y);
                function G(te) {
                  const le = te.get("column_key");
                  return q.includes(le);
                }
                function N(te) {
                  const le = te.get("column_key") || te.get("key"),
                    ge = S[le];
                  return {
                    id: le,
                    name:
                      (ge && (ge.get("name") || ge.get("title"))) ||
                      te.get("name") ||
                      te.get("titleAttr"),
                    type: te.get("type"),
                    permanent: ge ? ge.get("permanentColumn") === !0 : !1,
                    pinned: ge ? ge.get("customization_pinned") === !0 : !1,
                    default: te.get("is_default_column") !== !1,
                    label: te.get("additional_name"),
                    group: te.get("column_group"),
                    permanentAtEnd: ge ? ge.get("permanentAtEnd") === !0 : !1,
                  };
                }
                k = new i.Collection(h.reject(y, G).map(N));
                const W =
                  this.options.searchResultsView.headerView
                    .displayRegionsAllColumns;
                if (W) C = new i.Collection(W);
                else {
                  const te = k.models.reduce(
                    (le, ge) => (
                      le[
                        ge.get("permanentAtEnd")
                          ? "permanentAtEndList"
                          : "selectedColumnsList"
                      ].push(ge),
                      le
                    ),
                    { permanentAtEndList: [], selectedColumnsList: [] }
                  );
                  C = new i.Collection([
                    ...te.selectedColumnsList,
                    ...D.map(N),
                    ...te.permanentAtEndList,
                  ]);
                }
                function H(te) {
                  return (
                    "{" +
                    te
                      .pluck("id")
                      .map(function (le) {
                        return "'" + le + "'";
                      })
                      .join(",") +
                    "}"
                  );
                }
                const z = H(k);
                k
                  .stopListening(k, "update reset")
                  .listenTo(k, "update reset", () => {
                    const te = H(k);
                    te !== z &&
                      ((this.options.searchResultsView.headerView.displayRegionsAllColumns =
                        C.map(this.panelAllColumn)),
                      (this.options.searchResultsView.headerView.data.display_regions =
                        te),
                      this.showSelectedColumns());
                  }),
                  new s({
                    allColumns: C,
                    selectedColumns: k,
                    orderBy: ["name"],
                  }).show();
              }, this)
            );
          },
          onShowSettings: function (b, C) {
            if (
              this.enablePinnedColumns &&
              (C.currentTarget.id === "standardView" ||
                C.currentTarget.id === "tabularView" ||
                C.currentTarget.id === "allColumnsView")
            ) {
              const y = this.el
                .closest(".csui-search-settings")
                .querySelector(".csui-setting-icon");
              this.collection.findWhere({ selected: !0 }).unset("selected"),
                b.model.set("selected", !0),
                this.options.settingsView.triggerMethod("close:menu", C),
                this.options.searchResultsView.headerView.trigger(
                  "view:changed",
                  C
                ),
                y.focus(),
                y.setAttribute("tabindex", 0);
            } else {
              var k = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length;
              k
                ? !f.enableCustomConfiguration ||
                  b.model.get("id") === "summaryOrDescriptionContainer"
                  ? this.options.settingsView.showSettings(
                      b.model.get("id"),
                      b.model.get("view")
                    )
                  : this.showTableSidePanel()
                : (C.preventDefault(), C.stopPropagation());
            }
          },
          showSelectedColumns: function () {
            var b = new FormData(),
              C =
                this.options.searchResultsView.headerView.data.display_regions;
            C &&
              (this.options.searchResultsView.blockActions(),
              b.append("display_regions", C),
              this.options.model
                .save(null, {
                  parse: !1,
                  data: b,
                  processData: !1,
                  cache: !1,
                  contentType: !1,
                })
                .done(
                  h.bind(function (k) {
                    this.options.searchResultsView.trigger("queryTools:update"),
                      (this.options.searchResultsView.collection.settings_changed =
                        !0),
                      this.options.tableCollection.fetch(),
                      (this.options.settingsView.isChanged = !1),
                      (this.options.searchResultsView.headerView.data = {}),
                      this.options.searchResultsView.unblockActions();
                  }, this)
                )
                .fail(
                  h.bind(function (k) {
                    (k = new r.Error(k)),
                      l.showMessage("error", k.message),
                      this.options.searchResultsView.unblockActions();
                  }, this)
                ));
          },
          onShowSettingsDropdown: function (b, C) {
            var k = C.keyCode,
              y = this.$el.find("a[tabindex]"),
              S = !!this.options.searchResultsView.$el.find(
                ".load-container.binf-hidden"
              ).length,
              P = this.el
                .closest(".csui-search-settings")
                .querySelector(".csui-setting-icon");
            S
              ? k === 27 ||
                (k === 9 &&
                  C.target &&
                  ((C.target.id === "summaryOrDescriptionContainer" &&
                    !C.shiftKey) ||
                    (C.target.id === "selectedColumnsContainer" && C.shiftKey)))
                ? (P.focus(),
                  P.setAttribute("aria-expanded", "false"),
                  this.options.settingsView.triggerMethod("close:menu", C),
                  C.preventDefault(),
                  C.stopPropagation())
                : k === 13 || k === 32 || k === 39
                ? (this.onShowSettings(b, C),
                  C.preventDefault(),
                  C.stopPropagation())
                : y.length &&
                  (k === 38 || k === 40) &&
                  (k === 38
                    ? this.focusIndex > 0 && --this.focusIndex
                    : this.focusIndex < y.length - 1 && ++this.focusIndex,
                  a(y[this.focusIndex]).trigger("focus"),
                  C.stopPropagation(),
                  C.preventDefault())
              : (C.stopPropagation(), C.preventDefault());
          },
        });
      return w;
    }
  ),
  csui.define(
    "hbs!csui/controls/settings/impl/settings",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `<div class="selected-columns-container"></div>
<div class="available-columns-container"></div>
<div class="summary-description-container" role='dialog' aria-label='summary/description'></div>
`;
        },
        3: function (i, e, l, u, r) {
          return (
            '<div id="' +
            i.escapeExpression(i.lambda(e, e)) +
            `"></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="settings-dropdown-container csui-settings-show"></div>
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "showDefaults") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 0 },
                  end: { line: 6, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "regions") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 0 },
                  end: { line: 9, column: 9 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return a.registerPartial("csui_controls_settings_impl_settings", h), h;
    }
  ),
  csui.define("css!csui/controls/settings/impl/settings", [], function () {}),
  csui.define(
    "csui/controls/settings/settings.view",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/utils/accessibility",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/settings/impl/settings.dropdown.view",
      "csui/controls/settings/selected.columns/selected.columns.view",
      "csui/controls/settings/summary.description/summary.description.view",
      "i18n!csui/controls/settings/impl/nls/lang",
      "hbs!csui/controls/settings/impl/settings",
      "css!csui/controls/settings/impl/settings",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = e.isAccessibleTable(),
        m = i.View.extend({
          constructor: function (g) {
            g || (g = {}),
              a.defaults(g, { showDefaults: !0 }),
              (this.plugins = a.each(g.options, function (w, b) {
                w.region = "#" + w.id;
              })),
              i.View.call(this, g),
              (this.enablePinnedColumns =
                this.options.searchResultsView.headerView.enablePinnedColumns &&
                !c);
          },
          className: "csui-settings-container",
          template: o,
          templateContext: function () {
            var f = {
              showDefaults: this.options.showDefaults,
              regions: a.map(this.plugins, function (g) {
                return g.region.substring(1);
              }),
            };
            return f;
          },
          regions: function () {
            var f = {
              settingsDropDownContainer:
                this.options.settingsDropDownContainer ||
                ".settings-dropdown-container",
            };
            return (
              this.options.showDefaults &&
                (this.enablePinnedColumns
                  ? a.extend(f, {
                      standardView: ".csui-standard-search-view",
                      tabularView: ".csui-tabular-search-view",
                      allColumnsView: ".csui-all-columns-search-view",
                      selectedColumnsContainer: ".selected-columns-container",
                      availableColumnsContainer: ".available-columns-container",
                      summaryOrDescriptionContainer:
                        ".summary-description-container",
                    })
                  : a.extend(f, {
                      selectedColumnsContainer: ".selected-columns-container",
                      availableColumnsContainer: ".available-columns-container",
                      summaryOrDescriptionContainer:
                        ".summary-description-container",
                    })),
              a.each(this.plugins, function (g) {
                f[g.id] = g.region;
              }),
              f
            );
          },
          ui: function () {
            var f = {
              settingsDropDownContainer: ".settings-dropdown-container",
            };
            return (
              this.options.showDefaults &&
                (this.enablePinnedColumns
                  ? a.extend(f, {
                      standardView: ".csui-standard-search-view",
                      tabularView: ".csui-tabular-search-view",
                      allColumnsView: ".csui-all-columns-search-view",
                      selectedColumnsContainer: ".selected-columns-container",
                      availableColumnsContainer: ".available-columns-container",
                      summaryOrDescriptionContainer:
                        ".summary-description-container",
                    })
                  : a.extend(f, {
                      selectedColumnsContainer: ".selected-columns-container",
                      availableColumnsContainer: ".available-columns-container",
                      summaryOrDescriptionContainer:
                        ".summary-description-container",
                    })),
              a.each(this.plugins, function (g) {
                f[g.id] = g.region;
              }),
              f
            );
          },
          behaviors: { TabableRegionBehavior: { behaviorClass: u } },
          currentlyFocusedElement: function (f) {
            var g = this.$("*[tabindex]");
            return (
              g.length && g.prop("tabindex", 0),
              f && f.shiftKey ? d(g[g.length - 1]) : d(g[0])
            );
          },
          onRender: function () {
            var f = new h.Collection(this.options.options);
            if (this.options.showDefaults) {
              var g = this.model && this.model.get("display"),
                w,
                b;
              (this.prevModel = JSON.parse(JSON.stringify(g))),
                g &&
                  g.display_regions &&
                  ((w = g.display_regions.selected),
                  (b = g.display_regions.available));
              var C, k;
              g &&
                g.summary_description &&
                g.summary_description.available &&
                ((C = g.summary_description.available),
                (k = g.summary_description.selected)),
                w &&
                  w.where({ isNew: !0 }).map(function (y) {
                    y.set({ isNew: !1 }, { silent: !0 });
                  }),
                this.enablePinnedColumns
                  ? (f.add(
                      [
                        {
                          id: "standardView",
                          classname: "csui-standard-view csui-search-view",
                          label: s.settingLabels.standard,
                        },
                        {
                          id: "tabularView",
                          classname: "csui-tabular-view csui-search-view",
                          label: s.settingLabels.list,
                        },
                        {
                          id: "allColumnsView",
                          classname: "csui-all-columns-view csui-search-view",
                          label: s.settingLabels.pinnedColumns,
                        },
                        {
                          id: "selectedColumnsContainer",
                          label: s.columnSettingsTitle,
                          showNextCard: !0,
                          view: new t({
                            settingsView: this,
                            isTabularView: this.options.isTabularView,
                            tableCollection: this.options.tableCollection,
                            collection: w,
                            availableColumnsCollection: b,
                            settings: this.model,
                            searchResultsView: this.options.searchResultsView,
                          }),
                        },
                      ],
                      { at: 0 }
                    ),
                    this.options.searchResultsView.collection
                      .enablePinnedColumnsView ||
                      f.add([
                        {
                          id: "summaryOrDescriptionContainer",
                          label: s.summaryDescriptionTitle,
                          showNextCard: !0,
                          view: new n({
                            settingsView: this,
                            selectedCollection: k,
                            availableCollection: C,
                            collection: C,
                            settings: this.model,
                            searchResultsView: this.options.searchResultsView,
                          }),
                        },
                      ]))
                  : f.add(
                      [
                        {
                          id: "selectedColumnsContainer",
                          label: s.columnSettingsTitle,
                          showNextCard: !0,
                          view: new t({
                            settingsView: this,
                            isTabularView: this.options.isTabularView,
                            tableCollection: this.options.tableCollection,
                            collection: w,
                            availableColumnsCollection: b,
                            settings: this.model,
                            searchResultsView: this.options.searchResultsView,
                          }),
                        },
                        {
                          id: "summaryOrDescriptionContainer",
                          label: s.summaryDescriptionTitle,
                          showNextCard: !0,
                          view: new n({
                            settingsView: this,
                            selectedCollection: k,
                            availableCollection: C,
                            collection: C,
                            settings: this.model,
                            searchResultsView: this.options.searchResultsView,
                          }),
                        },
                      ],
                      { at: 0 }
                    );
            }
            (this.settingsDropDownView = new r({
              settingsView: this,
              model: this.model,
              tableCollection: this.options.tableCollection,
              collection: f,
              searchResultsView: this.options.searchResultsView,
              showSettings: this.showSettings.bind(this),
            })),
              this.showChildView(
                "settingsDropDownContainer",
                this.settingsDropDownView
              ),
              (this.currentCard = this.ui.settingsDropDownContainer);
          },
          onShow: function () {
            var f = this;
            this.$el.css("height", this.currentCard.outerHeight()),
              setTimeout(function () {
                f.settingsDropDownView.$el.find(".binf-list-group-item a")
                  .length > 0 &&
                  d(
                    f.settingsDropDownView.$el.find(
                      ".binf-list-group-item a"
                    )[0]
                  ).trigger("focus");
              }, 0);
          },
          showSettings: function (f, g) {
            var w = !!this.options.searchResultsView.$el.find(
              ".load-container.binf-hidden"
            ).length;
            !this.isCardChanging &&
              w &&
              ((this.isCardChanging = !0),
              this.showChildView(f, g),
              this.animate(this.currentCard, this.ui[f]),
              (this.currentCard = this.ui[f]));
          },
          animate: function (f, g) {
            this.$el && this.$el.css("height", g.outerHeight());
            var w = this;
            g.index() > f.index()
              ? (g.one("transitionend", function () {
                  delete w.isCardChanging,
                    g
                      .addClass("csui-settings-show")
                      .removeClass("transition-show"),
                    g.find("[tabindex]:first").trigger("focus");
                }),
                g.addClass("transition-show"))
              : (f.one("transitionend", function () {
                  delete w.isCardChanging,
                    f.removeClass("csui-settings-show transition-hide"),
                    g.find("[tabindex]:first").trigger("focus");
                }),
                f.addClass("transition-hide"));
          },
        });
      return m;
    }
  ),
  csui.define("csui/controls/table/rows/description/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/rows/description/impl/nls/root/lang", {
    suggestedTooltip: "View the full description in the properties page",
  }),
  csui.define(
    "hbs!csui/controls/table/rows/description/impl/description",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-description-colunm">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "current_description") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 8 },
                  end: { line: 7, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '            <span class="description ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "truncate_fade_class") ||
                  (e != null ? n(e, "truncate_fade_class") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "truncate_fade_class",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 37 },
                      end: { line: 4, column: 60 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "complete_description") ||
                  (e != null ? n(e, "complete_description") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "complete_description",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 74 },
                      end: { line: 4, column: 98 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "complete_description") ||
                  (e != null ? n(e, "complete_description") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "complete_description",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 107 },
                      end: { line: 4, column: 131 },
                    },
                  })
                : t)
            ) +
            `">
                ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "current_description") ||
                  (e != null ? n(e, "current_description") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "current_description",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 16 },
                      end: { line: 5, column: 39 },
                    },
                  })
                : t)
            ) +
            `
            </span>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-summary-colunm">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "current_summary") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 13, column: 8 },
                  end: { line: 17, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '            <span class="summary ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "truncate_fade_class") ||
                  (e != null ? n(e, "truncate_fade_class") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "truncate_fade_class",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 33 },
                      end: { line: 14, column: 56 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "complete_summary") ||
                  (e != null ? n(e, "complete_summary") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "complete_summary",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 70 },
                      end: { line: 14, column: 90 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "complete_summary") ||
                  (e != null ? n(e, "complete_summary") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "complete_summary",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 99 },
                      end: { line: 14, column: 119 },
                    },
                  })
                : t)
            ) +
            `">
                ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "complete_summary") ||
                  (e != null ? n(e, "complete_summary") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "complete_summary",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 16 },
                      end: { line: 15, column: 36 },
                    },
                  })
                : t)
            ) +
            `
            </span>
`
          );
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-summary-colunm">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "current_summary") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 23, column: 8 },
                  end: { line: 37, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
`
          );
        },
        8: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '        <span class="summary ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "truncate_fade_class") ||
                  (e != null ? s(e, "truncate_fade_class") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "truncate_fade_class",
                    hash: {},
                    loc: {
                      start: { line: 24, column: 29 },
                      end: { line: 24, column: 52 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "complete_summary") ||
                  (e != null ? s(e, "complete_summary") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "complete_summary",
                    hash: {},
                    loc: {
                      start: { line: 24, column: 61 },
                      end: { line: 24, column: 81 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "search_summary") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.program(15, r, 0),
                loc: {
                  start: { line: 25, column: 12 },
                  end: { line: 35, column: 19 },
                },
              }
            )) != null
              ? t
              : "") +
            `        </span>
`
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "each").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "current_summary") : e,
            {
              name: "each",
              hash: {},
              fn: i.program(10, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 26, column: 12 },
                end: { line: 32, column: 21 },
              },
            }
          )) != null
            ? t
            : "";
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "type") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(11, r, 0),
              inverse: i.program(13, r, 0),
              loc: {
                start: { line: 27, column: 12 },
                end: { line: 31, column: 19 },
              },
            }
          )) != null
            ? t
            : "";
        },
        11: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '            <span class="csui-summary-hh">' +
            i.escapeExpression(i.lambda(e != null ? t(e, "text") : e, e)) +
            `</span>
`
          );
        },
        13: function (i, e, l, u, r) {
          return (
            "            <span>" +
            i.escapeExpression(i.lambda(e, e)) +
            `</span>
`
          );
        },
        15: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "            " +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "current_summary") ||
                  (e != null ? n(e, "current_summary") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "current_summary",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 12 },
                      end: { line: 34, column: 31 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "descriptionAvailable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 9, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "summary_Available") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 11, column: 0 },
                  end: { line: 19, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "summary_description_available") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(7, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 21, column: 0 },
                  end: { line: 39, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_rows_description_impl_description",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/rows/description/impl/description",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/rows/description/description.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n!csui/controls/table/rows/description/impl/nls/lang",
      "hbs!csui/controls/table/rows/description/impl/description",
      "css!csui/controls/table/rows/description/impl/description",
    ],
    function (v, d, a, h, i, e) {
      var l = a.ItemView.extend({
        className: function () {
          return this._collapsedHeightIsOneLine
            ? "cs-description csui-description-short-lines-1"
            : `cs-description${
                this.model.collection?.node?.get("type") === 136 &&
                this.options?.tableView?.$el.outerWidth() > 850
                  ? " cs-description-padding-42"
                  : ""
              }`;
        },
        template: e,
        templateHelpers: function () {
          var u =
              this.model.get("instructions") ||
              this.model.get("description") ||
              "",
            r = this.model.get("summary") || "";
          return (
            (this.exceededDescription = !1),
            this.options.tableView.options.parentView &&
              this.options.tableView.options.parentView.options
                .useAppContainer &&
              u &&
              u.toString().length > 254 &&
              ((u = u + "..."), (this.exceededDescription = !0)),
            {
              complete_description: this.exceededDescription
                ? i.suggestedTooltip
                : u,
              current_description: u,
              complete_summary: r,
              current_summary: r,
              descriptionAvailable: u,
            }
          );
        },
        ui: { description: ".description", summary: ".summary" },
        constructor: function (r) {
          a.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/controls/table/rows/description/search.description.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/table/rows/description/description.view",
    ],
    function (v, d, a, h, i) {
      var e = i.extend({
        templateHelpers: function () {
          var l = this.model.get("description"),
            u = this.model.get("summary"),
            r =
              this.options &&
              this.options.tableView &&
              this.options.tableView.selectedSettings,
            t =
              (this.options &&
                this.options.tableView &&
                this.options.tableView.options.descriptionRowViewOptions
                  .tableRowSummaryAvailable) ||
              !1,
            n = !1;
          switch (r) {
            case "SD": {
              n = !0;
              break;
            }
            case "SO": {
              (n = !0), (l = void 0);
              break;
            }
            case "SP": {
              (n = !0), u && (l = void 0);
              break;
            }
            case "DP": {
              (n = !0), l && (u = void 0);
              break;
            }
            case "DO": {
              u = void 0;
              break;
            }
            case "NONE":
            default:
              l = u = void 0;
          }
          return v.extend(i.prototype.templateHelpers.apply(this), {
            complete_description: l,
            current_description: l,
            complete_summary: this.model.get("stringifiedSummary")
              ? this.model.get("stringifiedSummary")
              : u,
            current_summary: u,
            search_description: !0,
            search_summary: !0,
            summary_description_available: n && u && !t,
            descriptionAvailable: l,
            summary_Available: t && n && u,
          });
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/controls/fileupload/impl/addversion.controller",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "i18n!csui/controls/fileupload/impl/nls/lang",
      "csui/controls/fileupload/impl/upload.controller",
      "csui/models/fileupload",
      "csui/controls/globalmessage/globalmessage",
      "csui/models/fileuploads",
      "csui/utils/base",
      "csui/utils/url",
      "csui/utils/types/date",
      "csui/utils/types/member",
      "csui/lib/moment",
      "csui/models/version",
      "csui/utils/commandhelper",
      "csui/utils/contexts/factories/usernodepermission",
      "csui/utils/contexts/factories/connector",
      "csui/models/node/node.model",
      "csui/models/node.actions",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w) {
      "use strict";
      function b(C) {
        (this.view = C.view),
          (this.selectedNode = C.selectedNode),
          (this.status = C.status || {}),
          (this.context = this.status.context || this.view.context),
          (this.status.connector = this.context.getObject(f)),
          (this.uploadController = new h({
            container: this.view.container,
            context: this.context,
            originatingView: this.view,
          }));
      }
      return (
        v.extend(b.prototype, {
          uploadFile: function (C, k) {
            var y = d.Deferred();
            return (
              (this.status.actionType = k.actionType),
              (this.status.hideWarningAlert = k.hideWarningAlert),
              (this.currentLoggedInUserId = this.context.getModel("user").id),
              (this.currentModel = this.selectedNode),
              this._ensureNodeAdvanceInfo().then(
                v.bind(function () {
                  this._getLatestVersionAndUploadFile(C, this.status)
                    .done(y.resolve)
                    .fail(y.reject);
                }, this)
              ),
              y.promise()
            );
          },
          _doUpload: function (C) {
            var k = d.Deferred();
            this._blockActions();
            var y = this.selectedNode,
              S = new i({ file: C }, { node: y });
            C.add_major_version && S.set("add_major_version", !0),
              C.description && S.set("description", C.description);
            var P = new l([S]),
              F =
                this.view &&
                this.view.largeFileSettingsModel &&
                this.view.largeFileSettingsModel.get("largeFileSettings"),
              D = F && F.min_size,
              L = C.size || S.get("file").size,
              Q = this;
            if (L > D) {
              var q = {
                size: L,
                uploadKey: "",
                state: "pending",
                retryCount: 0,
                fileChunks: { slicedFiles: [], total: 0 },
              };
              S.set("largeFile", q);
            }
            return (
              this.uploadController.scheduleFileForUpload(S),
              e.showProgressPanel(P, { actionType: this.status.actionType }),
              S.promise()
                .then(function (G) {
                  if (y.versions || (y.attributes && y.attributes.versions))
                    return (
                      (G.version.commands = y.versions.commands),
                      G.version.fetch().then(function () {
                        return G.version;
                      })
                    );
                })
                .then(function (G) {
                  if (y.versions || (y.attributes && y.attributes.versions)) {
                    var N = G.get("file_size"),
                      W = u.formatFileSize(N);
                    G.set("file_size_formatted", W),
                      (G.isLocallyCreated = !0),
                      y.versions && y.versions.add(G, { at: 0 }),
                      Array.isArray(y.get("versions")) &&
                        y.attributes &&
                        y.attributes.versions &&
                        y.attributes.versions.push(G.attributes);
                  }
                })
                .then(function () {
                  return !0;
                })
                .then(function () {
                  return !0;
                })
                .done(function () {
                  e.hideFileUploadProgress(),
                    Q.view && Q.view.trigger("new:version:added"),
                    e.showMessage("success", a.MessageVersionAdded),
                    k.resolve();
                })
                .fail(function (G) {
                  k.reject(G);
                })
                .always(v.bind(this._unblockActions, this)),
              k.promise()
            );
          },
          _checkAdvancedVersionAndUpload: function (C, k, y) {
            var S = this,
              P = this.currentModel,
              F = d.Deferred();
            return (
              S._getNodePermission()
                .done(function (D) {
                  var L = D.results.data.permissions.permissions;
                  P.set(
                    "add_major_version_permission",
                    L.indexOf("add_major_version") > -1
                  ),
                    S._promoteToSelectVersion(C, k, y).done(function () {
                      S._doUpload(C).done(F.resolve).fail(F.reject);
                    });
                })
                .fail(function (D) {
                  F.reject(D);
                }),
              F.promise()
            );
          },
          _promoteToSelectVersion: function (C, k, y) {
            var S = this,
              P = this.currentModel,
              F = d.Deferred();
            return (
              csui.require(
                [
                  "csui/controls/version.control.dialog/version.control.dialog.view",
                  "csui/controls/version.control.dialog/add.version.control.view",
                  "csui/models/nodes",
                  "csui/utils/commands/unreserve",
                ],
                function (D, L, Q, q) {
                  G()
                    .done(function (N) {
                      if (
                        (N.promoteToMajor && (C.add_major_version = !0),
                        N.description && (C.description = N.description),
                        N.reserved)
                      ) {
                        let W = { nodes: new Q([P]), context: S.context },
                          H = new q(),
                          z = H.execute(W);
                        c.handleExecutionResults(z, {
                          command: H,
                          suppressSuccessMessage: W.suppressSuccessMessage,
                          suppressFailMessage: W.suppressFailMessage,
                        });
                      }
                      F.resolve();
                    })
                    .fail(function () {
                      F.reject();
                    });
                  function G() {
                    const N =
                        S.currentLoggedInUserId === y.get("owner_id") ||
                        S.status.hideWarningAlert ||
                        P.get("advanced_versioning"),
                      W = {
                        latestVersion: y,
                        fileName: C.name,
                        reserved: P.get("reserved"),
                        selectVersion:
                          P.get("advanced_versioning") &&
                          P.get("add_major_version_permission"),
                        warningMessage: N ? void 0 : S._getBodyMessage(y),
                        hideWarningMessage: N,
                      },
                      H = new L(W),
                      z = {
                        _view: H,
                        standardHeader: !1,
                        title: a.warnTitle,
                        dialogClassName: "csui-add-version-control",
                        actionBtnLabel: a.AddButtonLabel,
                        cancelBtnLabel: a.cancelButtonLabel,
                      };
                    return new D(z).show();
                  }
                },
                S
              ),
              F.promise()
            );
          },
          _ensureNodeAdvanceInfo: function () {
            var C = d.Deferred(),
              k = this.currentModel,
              y = k.get("advanced_versioning");
            if (y === void 0) {
              var S = new g({ id: k.get("id") }, { connector: k.connector });
              S.fetch({ silent: !0 })
                .done(function () {
                  k.set("advanced_versioning", S.get("advanced_versioning"), {
                    silent: !0,
                  }),
                    C.resolve();
                })
                .fail(function () {
                  C.reject();
                });
            } else C.resolve();
            return C.promise();
          },
          _getBodyMessage: function (C) {
            var k = s(),
              y = t.deserializeDate(C.get("create_date")),
              S = k.diff(y, "days"),
              P = n.formatMemberName(
                C.get("owner_id_expand") || C.get("owner_id")
              );
            return S < 2
              ? ((y = t.formatDateTime(y)),
                v.str.sformat(a.warnMessageRecent, P, y))
              : ((y = t.formatExactDate(y)),
                v.str.sformat(a.warnMessage, P, y));
          },
          _getLatestVersionAndUploadFile: function (C, k) {
            var y = this,
              S = d.Deferred();
            return (
              y._getLatestVersion(k).done(function (P) {
                y._checkAdvancedVersionAndUpload(C, y.status, P)
                  .done(S.resolve)
                  .fail(S.reject);
              }),
              S.promise()
            );
          },
          _getLatestVersion: function (C) {
            var k = d.Deferred(),
              y = C.connector,
              S = this.currentModel,
              P = new o(
                {
                  id: S.get("id"),
                  version_number: 0,
                  expand: encodeURIComponent("versions{owner_id}"),
                },
                { connector: y }
              );
            return (
              P.fetch().then(
                v.bind(
                  function (F, D, L) {
                    k.resolve(new o(F, { parse: !0 }));
                  },
                  function (F) {
                    k.reject(F);
                  }
                )
              ),
              k.promise()
            );
          },
          _getNodePermission: function () {
            var C = this.context.getObject(m, { node: this.currentModel });
            return C.fetch();
          },
          _blockActions: function () {
            this.view && this.view.blockActions && this.view.blockActions();
          },
          _unblockActions: function () {
            this.view && this.view.unblockActions && this.view.unblockActions();
          },
        }),
        b
      );
    }
  ),
  csui.define(
    "csui/controls/pagination/nodespagination.view",
    [
      "nuc/lib/underscore",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "smart/controls/pagination/nodespagination.view",
    ],
    function (v, d, a) {
      var h = a.extend({
        behaviors: { TabableRegion: { behaviorClass: d } },
        constructor: function (e) {
          e.collection &&
            this.listenTo(
              e.collection,
              "collection:set:limit",
              v.bind(this.collectionReset, this)
            ),
            a.prototype.constructor.call(this, e);
        },
        collectionReset: function (i) {
          this.collection.setLimit(
            i.skipItems,
            i.pageSize,
            i.autoFetch,
            i.paginationView
          );
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/controls/table/table.columns",
    [
      "csui/lib/backbone",
      "i18n!csui/controls/table/impl/nls/lang",
      "i18n!csui/models/impl/nls/lang",
    ],
    function (v, d, a) {
      var h = v.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        i = v.Collection.extend({
          model: h,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new i(
              this.map(function (l) {
                return l.attributes;
              })
            );
          },
        }),
        e = new i([
          {
            key: "_select",
            sequence: 1,
            noTitleInHeader: !0,
            title: d.selectionColumnTitle,
            customization_resizeable: !1,
            customization_width: 32,
            customization_pinned: !0,
          },
          {
            key: "order",
            sequence: 2,
            permanentColumn: !0,
            customization_width: 75,
            customization_pinned: !0,
          },
          {
            key: "type",
            sequence: 3,
            titleIconInHeader: "mime_type",
            permanentColumn: !0,
            customization_resizeable: !1,
            customization_width: 42,
            customization_pinned: !0,
          },
          {
            key: "name",
            sequence: 4,
            permanentColumn: !0,
            isNaming: !0,
            customization_resize_span: "reserved",
            customization_min_width: 168,
            customization_width: 500,
            customization_pinned: !0,
          },
          {
            key: "reserved",
            sequence: 5,
            title: a.state,
            noTitleInHeader: !0,
            customization_resizeable: !1,
            customization_pinned: !0,
          },
          { key: "size", sequence: null, customization_min_width: 80 },
          { key: "description", sequence: 890, is_default_column: !1 },
          {
            key: "wnd_comments",
            sequence: 900,
            noTitleInHeader: !0,
            permanentColumn: !0,
            customization_resizeable: !1,
          },
          {
            key: "favorite",
            sequence: 910,
            noTitleInHeader: !0,
            permanentColumn: !0,
            customization_resizeable: !1,
          },
        ]);
      return e;
    }
  ),
  csui.define(
    "hbs!csui/controls/table.list/impl/table.list.row",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '  <div class="csui-table-cell csui-table-cell-' +
            i.escapeExpression(i.lambda(e != null ? t(e, "name") : e, e)) +
            " " +
            i.escapeExpression(i.lambda(e != null ? t(e, "class") : e, e)) +
            `" role="cell"></div>
`
          );
        },
        3: function (i, e, l, u, r) {
          return `  <div class="csui-table-extra-cols csui-column-wrapped" role="cell"></div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "columns") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 3, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "hasWrappedColumns") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 0 },
                  end: { line: 6, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table.list_impl_table.list.row", h), h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/table.list/impl/table.list.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "noTitleInHeader") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(4, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 13, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          return `    <div class="csui-table-header-cell" role="columnheader"></div>
`;
        },
        4: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '    <div class="csui-table-header-cell ' +
            i.escapeExpression(i.lambda(e != null ? t(e, "className") : e, e)) +
            '" title="' +
            i.escapeExpression(i.lambda(e != null ? t(e, "title") : e, e)) +
            `" tabindex="-1"
         data-cstabindex="-1" role="columnheader">
      <div class="csui-table-header-cell-container csui-fadeout">
        <span>
          ` +
            i.escapeExpression(i.lambda(e != null ? t(e, "title") : e, e)) +
            `
        </span>
      </div>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "columns") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 14, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `

`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table.list_impl_table.list.header", h),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/table.list/impl/table.list",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-table-list-header" role="rowgroup"></div>
<div class="csui-table-list-body csui-normal-scrolling"></div>`;
        },
      });
      return (
        a.registerPartial("csui_controls_table.list_impl_table.list", h), h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/table.list/impl/empty.table",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return i.escapeExpression(
            ((t =
              (t = n(l, "message") || (e != null ? n(e, "message") : e)) != null
                ? t
                : i.hooks.helperMissing),
            typeof t == "function"
              ? t.call(e ?? (i.nullContext || {}), {
                  name: "message",
                  hash: {},
                  loc: {
                    start: { line: 1, column: 0 },
                    end: { line: 1, column: 11 },
                  },
                })
              : t)
          );
        },
      });
      return (
        a.registerPartial("csui_controls_table.list_impl_empty.table", h), h
      );
    }
  ),
  csui.define("csui/controls/table.list/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table.list/impl/nls/root/lang", {
    addTitle: "Add",
  }),
  csui.define(
    "css!csui/controls/table.list/impl/table.list",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table.list/table.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/controls/table/cells/cell.factory",
      "csui/controls/progressblocker/blocker",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/tableactionbar/tableactionbar.view",
      "csui/controls/table/rows/metadata/metadatarow.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/accessibility",
      "hbs!csui/controls/table.list/impl/table.list.row",
      "hbs!csui/controls/table.list/impl/table.list.header",
      "hbs!csui/controls/table.list/impl/table.list",
      "hbs!csui/controls/table.list/impl/empty.table",
      "i18n!csui/controls/table.list/impl/nls/lang",
      "css!csui/controls/table.list/impl/table.list",
      "csui/lib/jquery.mousehover",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w, b) {
      "use strict";
      const C = c.isAccessibleTable();
      var k = h.ItemView.extend({
          className: "csui-table-empty",
          template: w,
          constructor: function (L) {
            h.ItemView.prototype.constructor.apply(this, arguments);
          },
          templateHelpers: function () {
            var D = this.options.emptyTableText;
            return { message: D };
          },
        }),
        y = h.LayoutView.extend({
          className: function () {
            var D = "csui-table-row";
            return this.model.get("isAddNew") && (D += " active-row"), D;
          },
          attributes: function () {
            return { role: "row" };
          },
          tagName: "div",
          template: m,
          events: {
            "focusin .csui-table-cell": "onFocusInTableCell",
            "blur .csui-table-cell": "onFocusOutTableCell",
          },
          templateHelpers: function () {
            return {
              columns: this.options.columns,
              hasWrappedColumns:
                this.options.wrappedColumns &&
                this.options.wrappedColumns.length > 0,
            };
          },
          constructor: function (L) {
            L || (L = {}), h.LayoutView.prototype.constructor.call(this, L);
          },
          initialize: function () {
            var D = this;
            this.options.columns &&
              v.each(
                this.options.columns,
                function (L) {
                  if (L.CellView) {
                    var Q = L.name;
                    D.addRegion(Q, ".csui-table-cell-" + Q);
                  }
                },
                this
              ),
              this.options.wrappedColumns &&
                this.options.wrappedColumns.length > 0 &&
                D.addRegion("csui-column-wrapped", ".csui-column-wrapped");
          },
          onRender: function () {
            var D = this;
            if (
              (this.options.columns &&
                v.each(
                  this.options.columns,
                  function (Q, q) {
                    if (Q.CellView) {
                      var G = Q.name,
                        N = new Q.CellView({
                          tagName: "DIV",
                          nodeModel: this.options.nodeModel,
                          model: D.model,
                          context: D.options.context,
                          applyTo: D.options.applyTo,
                          column: Q,
                          authUser: D.options.authUser,
                          hasEditPermissionAction:
                            D.options.userHasEditPermissions,
                          updateModelSilent: !0,
                          originatingView: D.options.originatingView,
                        });
                      D[G].show(N),
                        D.listenTo(N, "clicked:cell", function (W) {
                          D.trigger("clicked:cell", {
                            cellView: N,
                            rowIndex: D._index,
                            colIndex: q,
                            model: D.model,
                          });
                        });
                    }
                  },
                  this
                ),
              this.options.wrappedColumns &&
                this.options.wrappedColumns.length > 0)
            ) {
              var L = new s({
                context: this.options.context,
                model: this.model,
                columns: this.options.wrappedColumns,
              });
              this["csui-column-wrapped"].show(L);
            }
            this.$el.hasClass("csui-changeowner-permission") &&
              (this.$el.removeClass("csui-changeowner-permission"),
              this.$el.find(".member-info").removeClass("binf-hidden")),
              !i.isHybrid() &&
                this.options.showInlineToolbar &&
                this.$el &&
                !C &&
                this._subscribeEventHandlers(),
              i.isHybrid() &&
                this.options.showInlineToolbar &&
                this._showInlineRowActions();
          },
          _showInlineRowActions: function () {
            var D = this.$el
              .find(".csui-row-inlinetoolbar")
              .removeClass("binf-hidden");
            (this.model.get("permissions") === null ||
              !this.options.userHasEditPermissions) &&
              this.$el.find(".csui-row-inlinetoolbar").addClass("binf-hidden"),
              !(D.length === 0 || this.inlineRowToolbarView !== void 0) &&
                ((this.inlineRowToolbarView = new n(
                  v.extend(
                    {
                      context: this.options.context,
                      commands: e,
                      collection: this.options.toolbarItems.inlineToolbar,
                      toolItemsMask:
                        this.options.toolbarItemsMasks.toolbars.inlineToolbar,
                      originatingView: this.options.originatingView,
                      model: this.model,
                      applyTo: this.options.applyTo,
                      notOccupiedSpace: 0,
                      status: {
                        model: this.model,
                        targetView: this,
                        connector: this.options.connector,
                        applyTo: this.options.applyTo,
                        userHasEditPermissions:
                          this.options.userHasEditPermissions,
                        originatingView: this.options.originatingView,
                      },
                    },
                    this.options.toolbarItems.inlineToolbar.options,
                    { maxItemsShown: 1 }
                  )
                )),
                this.listenTo(
                  this.inlineRowToolbarView,
                  "before:execute:command",
                  function (L) {
                    L &&
                      L.status &&
                      L.status.targetView &&
                      L.status.targetView.$el &&
                      L.status.targetView.$el.addClass("active-row"),
                      this.trigger("before:execute:action", L);
                  }
                ),
                this.listenTo(
                  this.inlineRowToolbarView,
                  "after:execute:command",
                  function (L) {
                    L &&
                      L.status &&
                      L.status.targetView &&
                      L.status.targetView.$el &&
                      L.status.targetView.$el.removeClass("active-row"),
                      this.trigger("after:execute:action", L);
                  }
                ),
                this.options.originatingView &&
                  (this.listenTo(
                    this.options.originatingView,
                    "block:view:actions",
                    function () {
                      this.trigger("before:execute:action");
                    }
                  ),
                  this.listenTo(
                    this.options.originatingView,
                    "unblock:view:actions",
                    function () {
                      this.trigger("after:execute:action");
                    }
                  )),
                this.inlineRowToolbarView.render(),
                D.append(this.inlineRowToolbarView.$el),
                this.inlineRowToolbarView.triggerMethod("show"));
          },
          _destroyInlineRowActionBar: function () {
            this.inlineRowToolbarView &&
              (this.inlineRowToolbarView.destroy(),
              (this.inlineRowToolbarView = void 0),
              this.$el.find("active-row") &&
                this.$el.removeClass("active-row"));
          },
          onBeforeRender: function () {
            !i.isHybrid() &&
              this.options.showInlineToolbar &&
              this._unsubscribeEventHandlers();
          },
          onBeforeDestroy: function () {
            this.options.showInlineToolbar &&
              (i.isHybrid()
                ? this._destroyInlineRowActionBar()
                : this._unsubscribeEventHandlers());
          },
          _subscribeEventHandlers: function () {
            this.$el &&
              this.$el.mousehover(
                this.showInlineActions.bind(this),
                this.hideInlineActions.bind(this),
                { namespace: this.cid }
              );
          },
          _unsubscribeEventHandlers: function () {
            this._isRendered &&
              this.$el.mousehover("off", { namespace: this.cid });
          },
          showInlineActions: function (D) {
            var L = this.options.originatingView.$el.find(
              ".csui-changeowner-permission"
            );
            if (L.length > 0) {
              this.lockedForOtherContols = !0;
              return;
            } else {
              this.lockedForOtherContols = !1;
              var Q = this.$el
                .find(".csui-inlinetoolbar")
                .removeClass("binf-hidden");
              if (Q.length > 0) {
                var q = this,
                  G = { sender: q, target: Q, model: q.model };
                q.trigger("mouseenter:row", G);
              }
            }
          },
          hideInlineActions: function (D) {
            var L = this.$el
              .find(".csui-inlinetoolbar")
              .addClass("binf-hidden");
            if (L.length > 0) {
              var Q = this,
                q = { sender: Q, target: L, model: Q.model };
              Q.trigger("mouseleave:row", q);
            }
          },
          onFocusInTableCell: function (D) {
            this.options.showInlineToolbar &&
              !this.lockedForOtherContols &&
              this.$el.find(".csui-inlinetoolbar").hasClass("binf-hidden") &&
              this._showInlineRowActions();
          },
          onFocusOutTableCell: function (D) {
            this.options.showInlineToolbar &&
              setTimeout(
                v.bind(function () {
                  this.$el.find(document.activeElement).length === 0 &&
                    !i.isHybrid() &&
                    this._destroyInlineRowActionBar();
                }, this),
                50
              );
          },
        }),
        S = h.ItemView.extend({
          className: "csui-table-header",
          attributes: function () {
            return { role: "row" };
          },
          tagName: "div",
          template: f,
          templateHelpers: function () {
            return { columns: this.options.columns, addTitle: b.addTitle };
          },
          constructor: function (L) {
            L || (L = {}), h.ItemView.prototype.constructor.call(this, L);
          },
          onRender: function () {
            if (
              ((this._columnCount = this.options.columns.length),
              (this._toolbarHeaderColumnCount = 0),
              this.options.userHasEditPermissions)
            )
              this._toolbarHeaderColumnCount = this._columnCount;
            else
              for (var D = 0; D < this._columnCount; D++) {
                var L = this.options.columns[D];
                L.isToolbar || this._toolbarHeaderColumnCount++,
                  L.attributes.containsInlineActions !== void 0 &&
                    (L.attributes.containsInlineActions = !1);
              }
          },
        }),
        P = h.CollectionView.extend({
          className: "csui-table-body",
          attributes: function () {
            return { role: "rowgroup" };
          },
          childView: y,
          childEvents: {
            "mouseenter:row": "onChildShowInlineActionBarWithDelay",
            "onpointerenter:row": "onChildShowInlineActionBarWithDelay",
            "mouseleave:row": "onChildActionBarShouldDestroy",
            "clicked:cell": "onClickedCell",
          },
          behaviors: {
            TabableRegion: { behaviorClass: o, initialActivationWeight: 100 },
          },
          events: { keydown: "onKeyInView" },
          childViewOptions: function () {
            return {
              context: this.options.context,
              columns: this.options.columns,
              wrappedColumns: this.options.wrappedColumns,
              showInlineToolbar: this.showInlineToolbar,
              toolbarItems: this.options.toolbarItems,
              toolbarItemsMasks: this.options.toolbarItemsMasks,
              connector: this.options.collection.connector,
              originatingView: this.options.originatingView,
              applyTo: this.options.applyTo,
              authUser: this.options.authUser,
              userHasEditPermissions: this.options.userHasEditPermissions,
              nodeModel: this.model,
            };
          },
          getEmptyView: function () {
            return this.options.emptyView ? this.options.emptyView : k;
          },
          emptyViewOptions: function () {
            return this.options.emptyView
              ? { model: this.options.emptyViewModel }
              : this.options;
          },
          constructor: function (L) {
            h.CollectionView.prototype.constructor.call(this, L),
              (this.showInlineToolbar =
                this.options.toolbarItems && this.options.toolbarItemsMasks),
              this.showInlineToolbar && this.setInlineActionBarEvents();
          },
          onRender: function () {
            if (
              ((this.nameColumnIndex =
                this.getNameColumnIndex(this.options.columns) || 0),
              (this.accFocusedCell = this.options.accFocusedCell || {
                column: this.nameColumnIndex,
                row: 0,
              }),
              (this.columnState = 0),
              (this._columnCount = this.options.columns.length),
              (this._toolbarColumnCount = 0),
              (this.hasEditPermission = this.options.userHasEditPermissions),
              !this.hasEditPermission)
            )
              for (var D = 0; D < this._columnCount; D++) {
                var L = this.options.columns[D];
                L.isToolbar && this._toolbarColumnCount++;
              }
          },
          setInlineActionBarEvents: function () {
            this.listenTo(this, "closeOther", this._destroyInlineActionBar),
              this.listenTo(
                this.collection,
                "reset",
                this._destroyInlineActionBar
              );
          },
          _showInlineActionBar: function (D) {
            this.inlineToolbarView
              ? (this._savedHoverEnterArgs = D)
              : D &&
                ((this._savedHoverEnterArgs = null),
                (this.inlineToolbarView = new n(
                  v.extend(
                    {
                      context: this.options.context,
                      commands: e,
                      collection: this.options.toolbarItems.inlineToolbar,
                      toolItemsMask:
                        this.options.toolbarItemsMasks.toolbars.inlineToolbar,
                      originatingView: this.options.originatingView,
                      applyTo: this.options.applyTo,
                      model: D.model,
                      notOccupiedSpace: 0,
                      status: {
                        model: D.model,
                        targetView: D.sender,
                        connector: this.options.collection.connector,
                        filterId: this.options.memberFilter.get("id"),
                        applyTo: this.options.applyTo,
                        userHasEditPermissions:
                          this.options.userHasEditPermissions,
                        originatingView: this.options.originatingView,
                      },
                      customError: !0,
                    },
                    this.options.toolbarItems.inlineToolbar.options
                  )
                )),
                (this.options.toolbarItems.inlineToolbar.options.maxItemsShown =
                  navigator.maxTouchPoints > 1
                    ? 3
                    : this.options.toolbarItems.inlineToolbar.options
                        .maxItemsShown),
                this.listenTo(
                  this.inlineToolbarView,
                  "before:execute:command",
                  function (L) {
                    (this.lockedForOtherContols = !0),
                      L &&
                        L.status &&
                        L.status.targetView &&
                        L.status.targetView.$el &&
                        L.status.targetView.$el.addClass("active-row"),
                      this._destroyInlineActionBar();
                  }
                ),
                this.listenTo(
                  this.inlineToolbarView,
                  "after:execute:command",
                  function (L) {
                    (this.lockedForOtherContols = !1),
                      L &&
                        L.status &&
                        L.status.targetView &&
                        L.status.targetView.$el &&
                        L.status.targetView.$el.removeClass("active-row"),
                      this._toolbarActionTriggered(L);
                  }
                ),
                this.options.originatingView &&
                  (this.listenTo(
                    this.options.originatingView,
                    "block:view:actions",
                    function () {
                      (this.lockedForOtherContols = !0),
                        this._destroyInlineActionBar();
                    }
                  ),
                  this.listenTo(
                    this.options.originatingView,
                    "unblock:view:actions",
                    function () {
                      this.lockedForOtherContols = !1;
                    }
                  )),
                this.inlineToolbarView.render(),
                this.listenTo(
                  this.inlineToolbarView,
                  "destroy",
                  function () {
                    (this.inlineToolbarView = void 0),
                      this._savedHoverEnterArgs &&
                        this.onChildShowInlineActionBarWithDelay(
                          this._savedHoverEnterArgs
                        );
                  },
                  this
                ),
                d(D.target).append(this.inlineToolbarView.$el),
                this.inlineToolbarView.triggerMethod("show"));
          },
          onChildShowInlineActionBarWithDelay: function (D, L) {
            this._showInlineActionbarTimeout &&
              clearTimeout(this._showInlineActionbarTimeout);
            var Q = this;
            this._showInlineActionbarTimeout = setTimeout(function () {
              (Q._showInlineActionbarTimeout = void 0),
                Q.lockedForOtherContols || Q._showInlineActionBar.call(Q, L);
            }, 200);
          },
          onChildActionBarShouldDestroy: function (D, L) {
            this._showInlineActionbarTimeout &&
              (clearTimeout(this._showInlineActionbarTimeout),
              (this._showInlineActionbarTimeout = void 0)),
              this.inlineToolbarView && this.inlineToolbarView.destroy();
          },
          onChildviewBeforeExecuteAction: function () {
            i.isHybrid() &&
              this.children.each(function (D, L) {
                D.inlineRowToolbarView &&
                  D.inlineRowToolbarView.$el &&
                  D.inlineRowToolbarView.$el.addClass("binf-disabled");
              });
          },
          onChildviewAfterExecuteAction: function () {
            i.isHybrid() &&
              this.children.each(function (D, L) {
                D.inlineRowToolbarView &&
                  D.inlineRowToolbarView.$el &&
                  (D.inlineRowToolbarView.$el.removeClass("binf-disabled"),
                  D.$el.find("active-row") && D.$el.removeClass("active-row"));
              });
          },
          _destroyInlineActionBar: function () {
            this.inlineToolbarView &&
              (this.inlineToolbarView.destroy(),
              (this.inlineToolbarView = void 0));
          },
          _toolbarActionTriggered: function (D) {
            D && D.commandSignature && this.trigger("after:action:execute", D),
              this.currentlyFocusedElement().trigger("focus");
          },
          currentlyFocusedElement: function () {
            if (
              this.collection.length > 0 &&
              this.accFocusedCell.column != null
            ) {
              var D = this.children.findByIndex(this.accFocusedCell.row);
              return (
                D &&
                D.$el
                  .find(
                    ".csui-table-cell:nth-child(" +
                      (this.accFocusedCell.column + 1) +
                      ")"
                  )
                  .children("DIV")
              );
            }
            return d();
          },
          onClickedCell: function (D, L) {
            (this.accFocusedCell.row = L.rowIndex),
              L.colIndex < this._columnCount - this._toolbarColumnCount
                ? (this.accFocusedCell.column = L.colIndex)
                : (this.accFocusedCell.column =
                    this._columnCount - this._toolbarColumnCount - 1),
              this._accSetFocusToCurrentlyFocusedElement();
          },
          onKeyInView: function (D) {
            var L = !0,
              Q = this.currentlyFocusedElement(),
              q,
              G,
              N;
            switch (D.keyCode) {
              case 33:
                this.accFocusedCell.row = 0;
                break;
              case 34:
                this.collection.length > 0
                  ? (this.accFocusedCell.row = this.collection.length - 1)
                  : (this.accFocusedCell.row = 0);
                break;
              case 35:
                this.accFocusedCell.column =
                  this._columnCount - this._toolbarColumnCount - 1;
                break;
              case 36:
                this.accFocusedCell.column = 0;
                break;
              case 37:
                if (
                  this.accFocusedCell.column > 0 &&
                  ((q = this.accFocusedCell.column),
                  this.accFocusedCell.column--,
                  (Q = this.currentlyFocusedElement()),
                  Q.attr("data-csui-empty-cell") === "true" &&
                    Q.children().length < 1)
                ) {
                  var W = this._getNextFocusableElementIndex(
                    37,
                    --this.accFocusedCell.column
                  );
                  W >= 0
                    ? (this.accFocusedCell.column = W)
                    : (this.accFocusedCell.column = q);
                }
                break;
              case 38:
                if (
                  this.$(".binf-dropdown-toggle")
                    .parent(".binf-dropdown")
                    .hasClass("binf-open")
                ) {
                  (G = this.$(".binf-dropdown-menu li").length - 1),
                    (N = d(document.activeElement.parentElement).index()),
                    G <= N &&
                      ((N = N - 1),
                      this.$(this.$(".binf-dropdown-menu li a")[N])
                        .trigger("focus")
                        .trigger("focus")),
                    (L = !1);
                  break;
                }
                this.accFocusedCell.row > 0 &&
                  ((q = this.accFocusedCell.column),
                  this.accFocusedCell.row--,
                  (Q = this.currentlyFocusedElement()),
                  Q.attr("data-csui-empty-cell") === "true" &&
                    Q.children().length < 1 &&
                    (this.accFocusedCell.row = q));
                break;
              case 39:
                this.accFocusedCell.column <
                  this._columnCount - this._toolbarColumnCount - 1 &&
                  ((q = this.accFocusedCell.column),
                  this.accFocusedCell.column++,
                  (Q = this.currentlyFocusedElement()),
                  Q.attr("data-csui-empty-cell") === "true" &&
                    Q.children().length < 1 &&
                    (this.accFocusedCell.column = q));
                break;
              case 40:
                if (
                  this.$(".binf-dropdown-toggle")
                    .parent(".binf-dropdown")
                    .hasClass("binf-open")
                ) {
                  (G = this.$(".binf-dropdown-menu li").length - 1),
                    (N = d(document.activeElement.parentElement).index()),
                    G > N &&
                      ((N = N + 1),
                      this.$(this.$(".binf-dropdown-menu li a")[N])
                        .trigger("focus")
                        .trigger("focus")),
                    (L = !1);
                  break;
                }
                this.accFocusedCell.row < this.collection.length - 1 &&
                  ((q = this.accFocusedCell.row), this.accFocusedCell.row++);
                break;
              default:
                L = !1;
            }
            L &&
              (D.preventDefault(),
              D.stopPropagation(),
              this.trigger("closeOther"),
              this._accSetFocusToCurrentlyFocusedElement());
          },
          _getNextFocusableElementIndex: function (D, L) {
            var Q = this.currentlyFocusedElement();
            switch (D) {
              case 37:
                return this.accFocusedCell.column >= 0 &&
                  Q.attr("data-csui-empty-cell") === "true"
                  ? L
                  : -1;
              default:
                return -1;
            }
          },
          _accSetFocusToCurrentlyFocusedElement: function () {
            var D = this.currentlyFocusedElement();
            D.length > 0 &&
              ((D = d(D[0])),
              this.trigger("changed:focus", this),
              i.isVisibleInWindowViewport(D) &&
                (D.find("input").length
                  ? D.find("input").trigger("focus")
                  : D.trigger("focus")));
          },
          getNameColumnIndex: function (D) {
            if (D)
              for (var L = 0; L < D.length; L++) {
                var Q = D[L];
                if (Q.isNaming) return L;
              }
          },
        }),
        F = h.LayoutView.extend({
          className: "csui-table-list",
          attributes: function () {
            return { role: "table" };
          },
          template: g,
          regions: {
            headerRegion: ".csui-table-list-header",
            bodyRegion: ".csui-table-list-body",
          },
          constructor: function (L) {
            L || (L = {}),
              L.maxColumnsDisplayed || (L.maxColumnsDisplayed = 10),
              L.tableColumns || (L.tableColumns = []),
              h.LayoutView.prototype.constructor.call(this, L),
              (this.context = L.context),
              (this.collection = L.collection),
              this.listenTo(
                this.collection.delayedActions,
                "error",
                function (Q, q, G) {
                  var N = new i.Error(q);
                  t.showMessage("error", N.message);
                }
              ),
              this.listenTo(this.collection, "sync", this._updateTable),
              this.listenTo(this.collection, "update", this.render),
              this.listenTo(this, "update:table", this._updateTable),
              (this.onTableWinResize = v.bind(function (Q) {
                this._adjustColumnsAfterWindowResize(),
                  this.trigger("resizetable", Q);
              }, this)),
              d(window).on("resize", this.onTableWinResize),
              d(window).on("resize.tableview", this.onTableWinResize);
          },
          onBeforeDestroy: function () {
            d(window).off("resize", this.onTableWinResize);
          },
          _updateTable: function (D) {
            if (this.tableBodyView && this.tableBodyView.accFocusedCell) {
              var L = this.tableBodyView.accFocusedCell.row,
                Q = this.tableBodyView.accFocusedCell.column,
                q = this.tableBodyView.children.findByModel(D);
              D === this.collection
                ? this.render()
                : (q.render(),
                  this.triggerMethod("dom:refresh"),
                  i.isHybrid() &&
                    (q._destroyInlineRowActionBar(),
                    q._showInlineRowActions())),
                (this.tableBodyView.accFocusedCell.row = L),
                (this.tableBodyView.accFocusedCell.column = Q),
                this.tableBodyView.trigger("changed:focus", this.tableBodyView);
            } else this.render();
          },
          onRender: function () {
            (this.allColumns = this.getColumns()),
              (this.displayedColumns = v.where(this.allColumns, {
                columnWrapped: !1,
              })),
              (this.wrappedColumns = v.where(this.allColumns, {
                columnWrapped: !0,
              })),
              (this.userHasEditPermissions = this.options.admin_permissions),
              (this.tableHeaderView = new S({
                columns: this.displayedColumns,
                context: this.context,
                userHasEditPermissions: this.userHasEditPermissions,
              })),
              this.headerRegion.show(this.tableHeaderView),
              (this.tableBodyView = new P(
                v.defaults(
                  {
                    columns: this.displayedColumns,
                    wrappedColumns: this.wrappedColumns,
                    context: this.context,
                    collection: this.collection,
                    toolbarItems: this.options.toolbarItems,
                    toolbarItemsMasks: this.options.toolbarItemsMasks,
                    emptyView: this.options.emptyView,
                    authUser: this.options.authUser,
                    userHasEditPermissions: this.userHasEditPermissions,
                    emptyViewModel: this.options.emptyViewModel,
                  },
                  this.options
                )
              )),
              this.propagateEventsToRegions(this.tableBodyView),
              this.bodyRegion.show(this.tableBodyView),
              (this._rebuildingTable = !1);
            const D = d(this.bodyRegion.el),
              L = this.tableBodyView;
            D.on("scroll", function () {
              const Q = D.parents("body")?.find(
                ".csui-edit-permission-popover-container .binf-popover"
              );
              Q.length &&
                (Q.data("binf.popover") && Q.binf_popover("destroy"),
                D.find(".active-row").removeClass("active-row"),
                (L.lockedForOtherContols = !1));
            });
          },
          onBeforeRender: function () {
            this._rebuildingTable = !0;
          },
          onDomRefresh: function (D) {
            this.$el.is(":visible") &&
              (this._adjustColumnsAfterWindowResize(),
              this.trigger("resizetable", D));
          },
          getColumns: function () {
            var D = [],
              L = this;
            if (this.options.tableColumns) {
              var Q = this.options.tableColumns.deepClone(),
                q = [];
              Q.each(function (N) {
                var W = N,
                  H = N.get("key");
                (N.attributes.column_key = H), q.push(W);
              }, this),
                (D = v.map(q, function (N) {
                  var W = u.getCellView(N),
                    H = N.get("column_key"),
                    z = W.columnClassName;
                  z || (z = "csui-table-cell-" + H);
                  var Z = [
                    "permanentColumn",
                    "noTitleInHeader",
                    "title",
                    "align",
                    "widthFactor",
                    "isNaming",
                    "containsInlineActions",
                  ];
                  v.each(Z, function (ge) {
                    W[ge] && N.set(ge, W[ge], { silent: !0 });
                  });
                  var te = {
                      CellView: W,
                      name: H,
                      noTitleInHeader: N.get("noTitleInHeader"),
                      isToolbar: N.get("isToolbar"),
                      title:
                        N.get("title") || N.get("name") || N.get("column_name"),
                      className: z,
                    },
                    le = N.get("align");
                  return (
                    le &&
                      (window.csui &&
                        window.csui.rtl &&
                        ((le === "left" && (le = "right")) ||
                          (le === "right" && (le = "left"))),
                      (te.className += " csui-align-" + le)),
                    N.attributes &&
                      ((te.attributes = te.attributes || {}),
                      v.extend(te.attributes, N.attributes)),
                    te
                  );
                }));
            }
            if (this.options.maxColumnsDisplayed || this.maxColumnsDisplayed) {
              var G = 0;
              v.each(
                D,
                function (N) {
                  N.attributes &&
                    N.attributes.permanentColumn === !0 &&
                    (G++, (N.columnWrapped = !1));
                },
                this
              ),
                (this.maxColumnsDisplayed =
                  this.calculateMaxColumnsDisplayed(D)),
                v.each(
                  D,
                  function (N) {
                    (!N.attributes || N.attributes.permanentColumn !== !0) &&
                      (G++, (N.columnWrapped = G > this.maxColumnsDisplayed));
                  },
                  this
                );
            }
            return D;
          },
          _adjustColumns: function () {
            if (!(!this.displayedColumns || !this.$el.is(":visible"))) {
              var D = this.$el.width() - 5,
                L = 0,
                Q = 0,
                q = 4,
                G,
                N = this.$el.find(".csui-table-header-cell");
              this.collection.length > 0
                ? (G = this.$el
                    .find(".csui-table-body>div")
                    .first()
                    .find(".csui-table-cell"))
                : (G = N);
              var W = {},
                H = [],
                z = this.displayedColumns,
                Z = 0,
                te,
                le = 0,
                ge = 0,
                Pe = 0;
              G.each(function (De) {
                if (De < z.length) {
                  var Ke = d(this),
                    $e = z[De];
                  if ($e.CellView && $e.CellView.hasFixedWidth)
                    (Q += Ke.outerWidth()), L++;
                  else {
                    var He = ($e.attributes && $e.attributes.widthFactor) || 1;
                    He && He !== 1
                      ? ((W[De] = He), (Z += He))
                      : $e.CellView && $e.CellView.flexibleWidth
                      ? ((ge += Ke.outerWidth()), Pe++)
                      : (H.push(De), (Z += 1)),
                      He > le && ((le = He), (te = De));
                  }
                }
              });
              var _e = D - Q - ge - q * z.length,
                ie = z.length - L - Pe,
                ae = ie > 0 ? _e / ie : 0,
                fe = 0,
                pe = Z / ie;
              v.each(W, function (De, Ke) {
                var $e = De / pe,
                  He = ae * $e;
                fe + He > _e && ((He = _e - fe), He < 0 && (He = 0)),
                  (He = Math.floor(He)),
                  (W[Ke] = He),
                  (fe += He);
              });
              var ke;
              H.length > 0
                ? ((ae = (_e - fe) / H.length / pe),
                  (ae = Math.floor(ae)),
                  (ke = _e - fe - ae * H.length))
                : ((ae = 0), (ke = _e - fe)),
                (ke = Math.floor(ke));
              var Re = {},
                Le = this;
              G.each(function (De) {
                if (De < z.length) {
                  var Ke = d(this),
                    $e = z[De],
                    He = $e.CellView && $e.CellView.hasFixedWidth,
                    me = { width: Ke.outerWidth() + "px" };
                  if (!He) {
                    var Oe;
                    W[De] && W[De] > 0 ? (Oe = W[De]) : (Oe = ae),
                      De === te && ke && (Oe += ke);
                    var Ue = Oe + "px";
                    $e.CellView.flexibleWidth ||
                      (me = { "min-width": Ue, "max-width": Ue }),
                      d(N[De]).css(me);
                    var qe = Le.$el.find(
                      ".csui-table-cell:nth-child(" + (De + 1) + ")"
                    );
                    qe.css(me);
                  }
                  Re[$e.className] = me;
                }
              }),
                (this.cachedColumnWidths = Re);
            }
          },
          calculateMaxColumnsDisplayed: function (D) {
            if (!(!D || D.length === 0)) {
              var L = 0,
                Q = 0,
                q,
                G,
                N = 120;
              if (this.$el.length > 0 && this.$el[0].children.length > 0) {
                var W = this.$el.width();
                v.each(
                  D,
                  function (le) {
                    le.attributes &&
                      le.attributes.permanentColumn === !0 &&
                      ((q = le.attributes.widthFactor),
                      (G = q ? N * q : N),
                      (Q += G),
                      L++);
                  },
                  this
                );
                for (var H = 0; H < D.length; H++) {
                  var z = D[H],
                    Z,
                    te;
                  if (z.attributes && !z.attributes.permanentColumn) {
                    if (
                      ((q = z.attributes.widthFactor),
                      (Z = N),
                      (G = q ? Z * q : Z),
                      (Q += G),
                      Q > W)
                    )
                      break;
                    L++;
                  }
                }
                L > this.options.maxColumnsDisplayed &&
                  (L = this.options.maxColumnsDisplayed),
                  L < 1 && (L = 1);
              } else L = this.options.maxColumnsDisplayed;
              return L;
            }
          },
          _adjustColumnsAfterWindowResize: function () {
            if (this.allColumns.length) {
              if (this.maxColumnsDisplayed && this.$el.is(":visible")) {
                var D = this.calculateMaxColumnsDisplayed(this.allColumns);
                if (
                  D !== this.maxColumnsDisplayed &&
                  ((this.maxColumnsDisplayed = D), !this._rebuildingTable)
                )
                  return setTimeout(v.bind(this.render, this));
              }
              this._adjustColumns();
            }
          },
        });
      return v.extend(F.prototype, l), F;
    }
  ),
  csui.define("csui/controls/tabletoolbar/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define(
    "hbs!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="binf-dropdown">
  <button id="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "btnId") || (e != null ? n(e, "btnId") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "btnId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 14 },
                      end: { line: 2, column: 23 },
                    },
                  })
                : t)
            ) +
            `" type="button" class="binf-dropdown-toggle csui-acc-focusable"
          data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
          title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "configurationButtonTooltip") ||
                  (e != null ? n(e, "configurationButtonTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "configurationButtonTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 17 },
                      end: { line: 4, column: 47 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "configurationButtonTooltip") ||
                  (e != null ? n(e, "configurationButtonTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "configurationButtonTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 61 },
                      end: { line: 4, column: 91 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="icon icon-toolbar-settings"></span>
  </button>
  <ul class="binf-dropdown-menu" role="menu"></ul>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table.configuration.toolbar_impl_configuration.toolbar.dropdown",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/table.configuration.toolbar/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/table.configuration.toolbar/impl/nls/root/localized.strings",
    { configurationButtonTooltip: "Settings" }
  ),
  csui.define(
    "css!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table.configuration.toolbar/configuration.toolbar.dropdown.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/controls/toolbar/toolitem.view",
      "csui/models/nodes",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/utils/commands",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/behaviors/dropdown.menu/dropdown.menu.behavior",
      "hbs!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",
      "i18n!csui/controls/table.configuration.toolbar/impl/nls/localized.strings",
      "css!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      i = i(v.id);
      var c = h.CompositeView.extend({
        className: "csui-configuration-view",
        template: s,
        templateHelpers: function () {
          return {
            btnId: d.uniqueId("configurationButton"),
            configurationButtonTooltip: o.configurationButtonTooltip,
          };
        },
        childView: e,
        childViewContainer: "ul.binf-dropdown-menu",
        childViewOptions: function (m) {
          return { renderTextOnly: !0, role: "menuitem" };
        },
        ui: {
          dropdownDiv: ".binf-dropdown",
          dropdownToggle: ".binf-dropdown-toggle",
          dropdownMenu: ".binf-dropdown-menu",
          loadingIconsDiv: ".csui-loading-parent-wrapper",
        },
        behaviors: { DropdownMenuBehavior: { behaviorClass: n } },
        constructor: function (f) {
          f || (f = {}),
            (this.context = f.context),
            (this.commands = f.commands || r),
            (this.commandController =
              f.toolbarCommandController || new t({ commands: this.commands })),
            (this.selectedNodes = (f.status && f.status.nodes) || new l()),
            (this.container = f.container),
            (this.status = f.status || {
              context: this.context,
              nodes: this.selectedNodes,
              container: this.container,
            }),
            (f.collection = new u(f.toolbarItems, {
              status: this.status,
              commands: this.commands,
              mask: f.toolbarItemsMask,
            })),
            h.CompositeView.prototype.constructor.apply(this, arguments),
            this.listenTo(
              this,
              "childview:toolitem:action",
              this._triggerMenuItemAction
            ).listenTo(a, "closeToggleAction", this._closeToggle);
        },
        enabled: function () {
          return !!this.options.context;
        },
        onRender: function () {
          this.collection.length < 1
            ? (this.$el.addClass("binf-hidden"),
              this.ui.dropdownToggle.attr("data-cstabindex", "-1"),
              this.ui.dropdownToggle.removeClass("csui-acc-focusable"))
            : (this.$el.find(".binf-dropdown").removeClass("binf-hidden"),
              this.$el.removeClass("binf-hidden"),
              this.ui.dropdownToggle.attr("data-cstabindex", "0"),
              this.ui.dropdownToggle.addClass("csui-acc-focusable")),
            this.collection.length > 0 &&
              (this.ui.dropdownToggle.binf_dropdown(),
              this.ui.dropdownDiv.on(
                "hide.binf.dropdown",
                d.bind(function () {
                  this._showMenuItems();
                }, this)
              ));
        },
        _closeToggle: function () {
          var m = this.$el.find(".binf-dropdown-toggle");
          m.parent().hasClass("binf-open") && m.binf_dropdown("toggle", !1),
            this._showMenuItems();
        },
        _triggerMenuItemAction: function (m, f) {
          if (f && f.toolItem && f.toolItem.get("menuWithMoreOptions") === !0)
            this._toolitemClicked(m, f);
          else {
            var g = this.$el.find(".binf-dropdown-toggle");
            g.binf_dropdown("toggle");
            var w = d.extend(this.status, {
              originatingView: this.options.originatingView,
              blockingParentView: this.options.blockingParentView,
              configurationMenuView: this,
              toolItemView: m,
            });
            this.commandController.toolitemClicked(f.toolItem, w);
          }
        },
        _toolitemClicked: function (m, f) {
          var g = this,
            w = f.toolItem.get("signature"),
            b = this.commandController.commands.findWhere({ signature: w }),
            C = d.extend(this.status, {
              originatingView: this.options.originatingView,
              blockingParentView: this.options.blockingParentView,
              configurationMenuView: this,
              toolItemView: m,
            }),
            k = d.extend({}, C.data, f.toolItem.get("commandData"));
          C = d.defaults({ toolItem: f.toolItem, data: k }, C);
          var y = { status: C, commandSignature: w, command: b };
          this.commandController.trigger("before:execute:command", y);
          var S = { context: C.context };
          try {
            b.execute(C, S)
              .done(function (P) {
                P &&
                  P.viewClass &&
                  g._showCommandViewInDropdownMenu(
                    P.viewClass,
                    P.viewOptions || {}
                  ),
                  g.commandController.trigger("after:execute:command", y);
              })
              .fail(function (P) {
                P === void 0 && (P = { cancelled: !0, commandSignature: w }),
                  g.commandController.trigger("after:execute:command", P);
              });
          } catch (P) {
            i.warn(
              `Executing the command "{0}" failed.
{1}`,
              b.get("signature"),
              P.stack
            ) && console.warn(i.last),
              this.commandController.trigger("after:execute:command", P);
          }
        },
        _showCommandViewInDropdownMenu: function (m, f) {
          var g = new m(f);
          this.listenTo(
            g,
            "go:back",
            d.bind(function () {
              this._showMenuItemsWithAnimation();
            }, this)
          ),
            this.listenTo(
              g,
              "close:menu",
              d.bind(function () {
                this._showMenuItems(), this._closeToggle();
              }, this)
            ),
            this.listenTo(
              g,
              "dom:refresh",
              d.bind(function () {
                this.trigger("render");
              }, this)
            ),
            this._ensureCommandViewRegion(),
            this.commandViewRegion.show(g),
            this._hideMenuItemsWithAnimation();
        },
        _ensureCommandViewRegion: function () {
          if (!this.commandViewRegion) {
            this.ui.dropdownMenu.append(
              '<div class="command-view-region"></div>'
            );
            var m = this.ui.dropdownMenu.find(".command-view-region");
            (this.commandViewRegion = new h.Region({ el: m })),
              this.commandViewRegion.$el.addClass("csui-normal-scrolling"),
              m.on("click", function (f) {
                f.preventDefault(), f.stopPropagation();
              }),
              this.commandViewRegion.$el.hide();
          }
        },
        _emptyCommandViewRegion: function () {
          this.commandViewRegion && this.commandViewRegion.empty();
        },
        _showMenuItems: function () {
          this.ui.dropdownMenu.find("> li").show(),
            this._emptyCommandViewRegion(),
            this.commandViewRegion && this.commandViewRegion.$el.hide();
        },
        _showMenuItemsWithAnimation: function () {
          var m = this,
            f = this.ui.dropdownMenu.find(".csui-icon-rightArrow");
          f.addClass("binf-hidden"),
            m.ui.dropdownMenu.css("overflow", "hidden"),
            m.ui.dropdownMenu.animate(
              {
                width: m.dropdownMenuOriginalWidth,
                height: m.dropdownMenuOriginalHeight,
              },
              500
            ),
            m.commandViewRegion.$el.css({
              position: "absolute",
              top: m.ui.dropdownMenu.css("padding-top"),
              "background-color": m.ui.dropdownMenu.css("background-color"),
              opacity: 1,
            }),
            m.ui.dropdownMenu.find("> li").show(),
            m.commandViewRegion.$el.hide(
              "blind",
              {
                direction: "right",
                complete: function () {
                  m._emptyCommandViewRegion(),
                    f.removeClass("binf-hidden"),
                    m.commandViewRegion.$el.css({
                      position: "",
                      top: "",
                      "background-color": "",
                      opacity: "",
                    }),
                    m.ui.dropdownMenu.css({
                      overflow: "",
                      width: "",
                      height: "",
                    });
                },
              },
              500
            );
        },
        _hideMenuItemsWithAnimation: function () {
          var m = this,
            f = this.ui.dropdownMenu.find(".csui-icon-rightArrow");
          f.addClass("binf-hidden"),
            (m.dropdownMenuOriginalWidth = m.ui.dropdownMenu.css("width")),
            (m.dropdownMenuOriginalHeight = m.ui.dropdownMenu.css("height")),
            m.ui.dropdownMenu.css("overflow", "hidden"),
            m.ui.dropdownMenu.animate(
              {
                width: m.commandViewRegion.$el.width(),
                height: m.commandViewRegion.$el.height(),
              },
              500
            ),
            m.commandViewRegion.$el.css({
              position: "absolute",
              top: m.ui.dropdownMenu.css("padding-top"),
              "background-color": m.ui.dropdownMenu.css("background-color"),
              opacity: 1,
            }),
            m.commandViewRegion.$el.show(
              "blind",
              {
                direction: "right",
                complete: function () {
                  m.ui.dropdownMenu.find("> li").hide(),
                    f.removeClass("binf-hidden"),
                    m.commandViewRegion.$el.css({
                      position: "",
                      top: "",
                      "background-color": "",
                      opacity: "",
                    }),
                    m.ui.dropdownMenu.css({ width: "", height: "" });
                },
              },
              500
            );
        },
      });
      return c;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform/impl/csui.inlineform.schemas",
    ["i18n!csui/controls/table/inlineforms/base/impl/nls/lang"],
    function (v) {
      return [
        {
          equals: { type: 0 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: -1 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 1 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.ShortcutNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 298 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 1308 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 136 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 800 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.NewNamePlaceholder,
                multilingual: !0,
              },
            },
          },
        },
        {
          equals: { type: 140 },
          form: {
            fields: {
              name: {
                type: "text",
                required: !0,
                namePlaceholder: v.UrlNamePlaceholder,
                multilingual: !0,
              },
              url: {
                type: "text",
                required: !0,
                namePlaceholder: v.UrlAddressPlaceholder,
                regex:
                  /^[a-z0-9]+:\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i,
              },
            },
          },
        },
      ];
    }
  ),
  csui.define("csui/controls/table/inlineforms/favorite/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/inlineforms/favorite/impl/nls/root/lang", {
    CancelButtonLabel: "Cancel",
    NewNamePlaceholder: "Enter name",
  }),
  csui.define(
    "hbs!csui/controls/table/inlineforms/favorite/impl/favorite",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-describedby="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 47 },
                      end: { line: 4, column: 61 },
                    },
                  })
                : t)
            ) +
            '" '
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <div class="csui-inlineform-group csui-inlineform-group-error" role="alert" id="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMsgId") || (e != null ? n(e, "errorMsgId") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMsgId",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 82 },
                      end: { line: 14, column: 96 },
                    },
                  })
                : t)
            ) +
            `">
    <div class="binf-text-danger" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 41 },
                      end: { line: 15, column: 57 },
                    },
                  })
                : t)
            ) +
            `"><span
        class="csui-text-danger">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "errorMessage") ||
                  (e != null ? n(e, "errorMessage") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 33 },
                      end: { line: 16, column: 49 },
                    },
                  })
                : t)
            ) +
            `</span></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<form class="csui-inlineform-group csui-inlineform-group-favorite-name">
  <input type="text" value="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 28 },
                      end: { line: 2, column: 36 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 70 },
                    },
                  })
                : n)
            ) +
            `"
         class="binf-form-control csui-inlineform-input-name"
    ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 4, column: 70 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
    <button type="submit" class="csui-btn-save" disabled title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 64 },
                      end: { line: 5, column: 83 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 97 },
                      end: { line: 5, column: 116 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 6, column: 6 },
                end: { line: 6, column: 80 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
    <button type="reset" class="csui-btn-cancel csui-inline" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 68 },
                      end: { line: 8, column: 89 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 24 },
                      end: { line: 9, column: 45 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 10, column: 6 },
                end: { line: 10, column: 79 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
</form>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "haveErrorMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 13, column: 0 },
                  end: { line: 18, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_favorite_impl_favorite",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/favorite/impl/favorite",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/favorite/favorite.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/controls/table/inlineforms/favorite/impl/nls/lang",
      "csui/controls/table/inlineforms/inlineform.registry",
      "csui/controls/table/inlineforms/inlineform/inlineform.view",
      "hbs!csui/controls/table/inlineforms/favorite/impl/favorite",
      "css!csui/controls/table/inlineforms/favorite/impl/favorite",
    ],
    function (v, d, a, h, i, e, l) {
      var u = e.extend(
        {
          className: function () {
            var r = "csui-inlineform-favorite";
            return (
              e.prototype.className &&
                (r += " " + d.result(e.prototype, "className")),
              r
            );
          },
          template: l,
          templateHelpers: function () {
            var r = this._templateHelpers(),
              t = !this.model.get("favorite_name"),
              n = d.extend(r, {
                name: this.model.get("favorite_name"),
                namePlaceholder: h.NewNamePlaceholder,
                disableSaveBtn: t,
              });
            return n;
          },
          ui: {},
          constructor: function r(t) {
            (this.options = t || {}),
              (this.ui = d.extend({}, this.ui, e.prototype.ui)),
              (this.events = d.extend({}, this.events, e.prototype.events)),
              r.__super__.constructor.apply(this, arguments);
          },
          _saveIfOk: function () {
            var r = this._getInputName(),
              t = this.model.get("favorite_name");
            r.length > 0 && r === t
              ? this.cancel()
              : r.length > 0 && this._save({ favorite_name: r });
          },
          isSaveEnabled: function (r) {
            return !(!r.length || r === this.model.get("favorite_name"));
          },
        },
        { CSSubType: void 0 }
      );
      return u;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/inlineform/impl/inlineform.view",
    [
      "csui/utils/log",
      "csui/controls/table/inlineforms/inlineform/inlineform.view",
    ],
    function (v, d) {
      "use strict";
      return (
        v.warn(
          'DEPRECATED: depend on the module "csui/controls/table/inlineforms/inlineform/inlineform.view" instead.'
        ),
        d
      );
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/permissions/user.picker/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/table/inlineforms/permissions/user.picker/impl/nls/root/lang",
    {
      CancelButtonLabel: "Cancel",
      SaveButtonLabel: "Save",
      UserPickerPlaceHolder: "Enter name",
      InvalidUser: "Invalid user",
    }
  ),
  csui.define(
    "hbs!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div id="csui-inline-permissions-user-picker" class="csui-inline-permissions-user-picker"></div>
<div class="csui-user-picker-buttons csui-inlineform-group">
  <button type="submit" class="binf-btn csui-btn binf-btn-primary cs-save-button" disabled title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveButtonLabel") ||
                  (e != null ? s(e, "SaveButtonLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 98 },
                      end: { line: 3, column: 117 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveButtonLabel") ||
                  (e != null ? s(e, "SaveButtonLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 24 },
                      end: { line: 4, column: 43 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                theme: e != null ? s(e, "iconTheme") : e,
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 5, column: 6 },
                end: { line: 5, column: 96 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
    <button type="reset" class="binf-btn csui-btn binf-btn-default cs-cancel-button" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "CancelButtonLabel") ||
                  (e != null ? s(e, "CancelButtonLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "CancelButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 92 },
                      end: { line: 7, column: 113 },
                    },
                  })
                : n)
            ) +
            `"
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "CancelButtonLabel") ||
                  (e != null ? s(e, "CancelButtonLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "CancelButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 24 },
                      end: { line: 8, column: 45 },
                    },
                  })
                : n)
            ) +
            `">
      ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                theme: e != null ? s(e, "iconTheme") : e,
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 9, column: 6 },
                end: { line: 9, column: 95 },
              },
            })) != null
              ? t
              : "") +
            `
    </button>
</div>
<div class="csui-change-user-error"></div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_inlineforms_permissions_user.picker_impl_user.picker",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/inlineforms/permissions/user.picker/user.picker.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/high.contrast/detector!",
      "i18n!csui/controls/table/inlineforms/permissions/user.picker/impl/nls/lang",
      "hbs!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",
      "css!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",
    ],
    function (v, d, a, h, i, e, l) {
      var u = a.ItemView.extend({
        className: "cs-inline-user-lookup",
        template: l,
        behaviors: {
          TabableRegion: { behaviorClass: h, initialActivationWeight: 100 },
        },
        ui: {
          cancelButton: ".cs-cancel-button",
          saveButton: ".cs-save-button",
          inputBox: ".cs-search",
        },
        events: {
          "click @ui.saveButton": "saveClicked",
          "click @ui.cancelButton": "cancelClicked",
          "focus @ui.inputBox": "inputBoxFocus",
          click: "handleClick",
        },
        handleClick: function (r) {
          r.preventDefault(), r.stopPropagation();
        },
        templateHelpers: function () {
          return {
            SaveButtonLabel: e.SaveButtonLabel,
            CancelButtonLabel: e.CancelButtonLabel,
            iconTheme: this._useIconsForDarkBackground ? "dark" : "light",
          };
        },
        initialize: function (r) {
          this.options = r;
        },
        constructor: function (t) {
          var n = this;
          t || (t = {}),
            t.data || (t.data = {}),
            (this._useIconsForDarkBackground = i === 1),
            (this.options = t),
            a.ItemView.prototype.constructor.call(this, t);
        },
        inputBoxFocus: function () {
          this.focusIndex = 0;
        },
        onShow: function () {
          var r = this;
          (this.focusIndex = 0),
            csui.require(
              ["csui/controls/userpicker/userpicker.view"],
              function (t) {
                r.pickerView = new t({
                  context: r.options.context,
                  limit: 5,
                  memberFilter: r.options.memberFilter,
                  widgetoptions: r.options,
                  placeholder: e.UserPickerPlaceHolder,
                  prettyScrolling: !0,
                  scrollContainerHeight: "auto",
                  model: r.options.userPickerModel,
                  id_input: d.uniqueId(
                    "csui-inline-permissions-user-picker-input"
                  ),
                  lightWeight: !1,
                });
                var n = new a.Region({
                  el: r.$el.find("#csui-inline-permissions-user-picker"),
                });
                n.show(r.pickerView),
                  r.pickerView.$el.find("input") &&
                    r.pickerView.$el.find("input").trigger("focus"),
                  r.listenTo(r.pickerView, "item:change", r.processItemChange),
                  r.listenTo(r.pickerView, "item:clear", r.processItemChange),
                  r.$el.on("keydown", d.bind(r.onKeyInView, r)),
                  r.$el.find("input").trigger("focus").attr("tabindex", "-1");
              }
            );
        },
        processItemChange: function () {
          var r = arguments.length > 0 && arguments[0].item;
          (this.param = r),
            r
              ? this.options.currentRow
                  .find(".cs-save-button")
                  .prop("disabled", !1)
              : (this.options.currentRow
                  .find(".cs-save-button")
                  .attr("disabled", !0),
                this.$el.find("input").trigger("focus"));
        },
        currentlyFocusedElement: function () {
          var r = this.$el.find("input");
          return r;
        },
        cancelClicked: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            this.options.currentRow.removeClass("csui-changeowner-permission"),
            this.options.currentRow
              .find(".member-info")
              .removeClass("binf-hidden"),
            this.trigger("change:completed");
        },
        saveClicked: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            this.$(".cs-search").val() === this.param.get("name_formatted")
              ? this.trigger("member:selected:save", this.param)
              : this.$(".csui-change-user-error")
                  .addClass("csui-change-user-error-display")
                  .html(e.InvalidUser);
        },
        onKeyInView: function (r) {
          var t = this,
            n = this.$el.find("[tabindex]").filter(function (m, f) {
              return t.$(f).is(":visible") && !t.$(f).is(":disabled");
            }),
            s = n.length,
            o = n[this.focusIndex],
            c = this.$(r.target).hasClass("cs-search");
          switch ((c && (this.focusIndex = 0), r.keyCode)) {
            case 37:
              this.focusIndex > 0 &&
                (this.focusIndex--,
                n[this.focusIndex].focus(),
                r.preventDefault()),
                r.stopPropagation();
              break;
            case 9:
              r.shiftKey
                ? this.focusIndex > 0 &&
                  (this.focusIndex--, n[this.focusIndex].focus())
                : this.focusIndex < n.length - 1 &&
                  (this.focusIndex++, n[this.focusIndex].focus()),
                r.preventDefault(),
                r.stopPropagation();
              break;
            case 39:
              r.stopPropagation();
              break;
            case 38:
            case 40:
              r.preventDefault(), r.stopPropagation();
              break;
            case 32:
              r.stopPropagation();
              break;
            case 13:
              this.$(r.target).trigger("click"),
                r.preventDefault(),
                r.stopPropagation();
              break;
            default:
              r.stopPropagation();
              break;
          }
        },
      });
      return u;
    }
  ),
  csui.define(
    "csui/controls/table/inlineforms/folder/folder.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/controls/table/inlineforms/folder/impl/nls/lang",
      "csui/controls/table/inlineforms/inlineform.registry",
      "csui/controls/table/inlineforms/inlineform/inlineform.view",
      "hbs!csui/controls/table/inlineforms/folder/impl/folder",
      "css!csui/controls/table/inlineforms/folder/impl/folder",
    ],
    function (v, d, a, h, i, e, l) {
      var u = e.extend(
        {
          className: function () {
            var r = "csui-inlineform-folder";
            return (
              e.prototype.className &&
                (r += " " + d.result(e.prototype, "className")),
              r
            );
          },
          template: l,
          templateHelpers: function () {
            var r = this._templateHelpers(),
              t = d.extend(r, { namePlaceholder: h.NewNamePlaceholder });
            return t;
          },
          ui: {},
          constructor: function (t) {
            (this.options = t || {}),
              (this.ui = d.extend({}, this.ui, e.prototype.ui)),
              (this.events = d.extend({}, this.events, e.prototype.events)),
              a.ItemView.prototype.constructor.apply(this, arguments);
          },
          _saveIfOk: function () {
            var r = this._getInputName(),
              t = this.model.get("name");
            r.length > 0 && r === t
              ? this.cancel()
              : r.length > 0 &&
                this._save({ name: r }).fail(
                  function (n) {
                    this.model.set({ name: t }, { silent: !0 });
                  }.bind(this)
                );
          },
        },
        { CSSubType: NaN }
      );
      return i.registerByAddableType(u.CSSubType, u), u;
    }
  ),
  csui.define("csui/controls/table/cells/celleditor/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/celleditor/impl/nls/root/lang", {
    NewNamePlaceholder: "Enter name",
  }),
  csui.define(
    "hbs!csui/controls/table/cells/celleditor/impl/celleditor",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `    <span class="csui-undo edit-cancel inline-edit-icon"></span>
`;
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <button class="csui-undo csui-btn-cancel binf-btn">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "CancelButtonLabel") ||
                  (e != null ? n(e, "CancelButtonLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "CancelButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 55 },
                      end: { line: 6, column: 76 },
                    },
                  })
                : t)
            ) +
            `</button>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="csui-td-content-edit">
  <input type="text" value="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "formattedValue") ||
                  (e != null ? s(e, "formattedValue") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 28 },
                      end: { line: 2, column: 46 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "inputPlaceholder") ||
                  (e != null ? s(e, "inputPlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "inputPlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 61 },
                      end: { line: 2, column: 81 },
                    },
                  })
                : n)
            ) +
            `" class="binf-form-control">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "useEditCancelIcon") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 7, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_celleditor_impl_celleditor",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/table/cells/celleditor/impl/celleditor",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/celleditor/celleditor.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/controls/table/cells/templated/templated.view",
      "i18n!csui/controls/table/cells/celleditor/impl/nls/lang",
      "hbs!csui/controls/table/cells/celleditor/impl/celleditor",
      "css!csui/controls/table/cells/celleditor/impl/celleditor",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = e.extend({
        template: u,
        ui: {
          editCancel: ".csui-td-content-edit .csui-undo",
          cancelButton: ".csui-td-content-edit .csui-btn-cancel",
          inputField: ".csui-td-content-edit > input",
        },
        events: {
          "click @ui.editCancel": "iconUndoClicked",
          "keyup @ui.inputField": "keyReleased",
          "blur @ui.inputField": "leftInputField",
          "click @ui.inputField": "inputFieldClicked",
        },
        onRender: function () {
          this.ui.inputField.addClass("csui-input-full"),
            this.ui.inputField.select();
        },
        endEdit: function () {
          (this.editStarted = !1),
            (this.saving = !1),
            delete this.model.csuiValueEdited;
          var t = this.$el.find(".csui-td-content-edit");
          t.length > 0 && v(t[0]).remove(),
            this.model.unset("csuiErrorMessage"),
            this.trigger("closed", this);
        },
        _cancelEdit: function () {
          this.leftInputFieldTimer && clearTimeout(this.leftInputFieldTimer),
            this.trigger("cancelEdit", this),
            this.endEdit();
        },
        _save: function () {
          if (this.editStarted) {
            var t = this.ui.inputField,
              n = t.val();
            (n = n.trim()),
              n.length > 0
                ? ((this.saving = !0),
                  this.trigger("cellEditorWantsSave", { newName: n }))
                : this._cancelEdit();
          }
        },
        inputFieldClicked: function (t) {
          t.preventDefault(), t.stopPropagation();
        },
        iconUndoClicked: function (t) {
          t.preventDefault(), t.stopPropagation(), this._cancelEdit();
        },
        keyReleased: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            this.leftInputFieldTimer && clearTimeout(this.leftInputFieldTimer),
            t.keyCode === 27
              ? this._cancelEdit()
              : t.keyCode === 13 && this._save();
        },
        leftInputField: function (t) {
          if (!this.saving) {
            var n = this;
            this.leftInputFieldTimer && clearTimeout(this.leftInputFieldTimer),
              (this.leftInputFieldTimer = setTimeout(function () {
                (n.leftInputFieldTimer = void 0), n._save();
              }, 100));
          }
        },
        renderValue: function () {
          var t;
          this.model.csuiValueEdited
            ? (t = {
                value: this.model.csuiValueEdited,
                formattedValue: this.model.csuiValueEdited,
              })
            : (t = this.getValueData()),
            (t.useEditCancelIcon = this.model.get("id") !== void 0),
            (t.CancelButtonLabel = l.CancelButtonLabel),
            (t.inputPlaceholder = l.NewNamePlaceholder);
          var n = this.model.get("csuiErrorMessage") !== void 0,
            s = t ? this.template(t) : "",
            o = this.$el.find(".csui-td-content-edit");
          if (o.length > 0)
            n && v(o[0]).addClass("binf-has-error"), v(o[0]).replaceWith(s);
          else {
            var c = v(s);
            n && c.addClass("binf-has-error"),
              c.appendTo(this.$el.find(".csui-td-container"));
          }
          (this.editStarted = !0), (this.saving = !1);
        },
      });
      return r;
    }
  ),
  csui.define(
    "hbs!csui/controls/table/cells/reservation/impl/reservation",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isReservedByOther") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(4, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 6, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 19 },
                      end: { line: 3, column: 38 },
                    },
                  })
                : t)
            ) +
            `" class="icon icon-shared_collaborate_other"></span>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 19 },
                      end: { line: 5, column: 38 },
                    },
                  })
                : t)
            ) +
            `" class="icon icon-shared_collaborate_self"></span>
`
          );
        },
        6: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "reserved") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(7, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 7, column: 0 },
                end: { line: 19, column: 0 },
              },
            }
          )) != null
            ? t
            : "";
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "canUnreserve") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 8, column: 2 },
                  end: { line: 10, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isReservedByOther") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(10, r, 0),
                inverse: i.program(12, r, 0),
                loc: {
                  start: { line: 11, column: 2 },
                  end: { line: 15, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "canUnreserve") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(14, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 16, column: 2 },
                  end: { line: 18, column: 9 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        8: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <button type="button" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 33 },
                      end: { line: 9, column: 52 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedAria") ||
                  (e != null ? n(e, "reservedAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedAria",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 66 },
                      end: { line: 9, column: 82 },
                    },
                  })
                : t)
            ) +
            `" class="csui-unreserve-cellview">
`
          );
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 19 },
                      end: { line: 12, column: 38 },
                    },
                  })
                : t)
            ) +
            `" class="icon icon-reserved_other"></span>
`
          );
        },
        12: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <span title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 19 },
                      end: { line: 14, column: 38 },
                    },
                  })
                : t)
            ) +
            `" class="icon icon-reserved_self"></span>
`
          );
        },
        14: function (i, e, l, u, r) {
          return `    </button>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "reservedSharedCollaboration") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(6, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 19, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_table_cells_reservation_impl_reservation",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/table/cells/reservation/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/table/cells/reservation/impl/nls/root/lang", {
    reservedTooltip: `Reserved by {0}\r
{1}`,
    reservedAria: "Reserved by {0} at {1}, click to unreserve",
    reservedSharedCollaborationTooltip: `Shared for collaboration by {0}\r
{1}`,
    reservedSharedCollaborationAria: "Shared for collaboration by {0} at {1}",
  }),
  csui.define(
    "css!csui/controls/table/cells/reservation/impl/reservation",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/table/cells/reservation/reservation.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/utils/log",
      "csui/utils/contexts/factories/user",
      "csui/models/nodes",
      "csui/models/nodechildren",
      "csui/controls/table/cells/templated/templated.view",
      "csui/utils/commands",
      "csui/utils/commands/unreserve",
      "csui/utils/commandhelper",
      "csui/controls/table/cells/cell.registry",
      "hbs!csui/controls/table/cells/reservation/impl/reservation",
      "i18n!csui/controls/table/cells/reservation/impl/nls/lang",
      "css!csui/controls/table/cells/reservation/impl/reservation",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c) {
      "use strict";
      var m = u.extend(
        {
          template: o,
          triggers: { "click .csui-unreserve-cellview": "remove:reservation" },
          events: { keydown: "onKeyInView" },
          getValueData: function () {
            var f = this.model.get("reserved_user_id");
            f && typeof f == "object" && (f = f.id);
            var g = this.model.get("reserved") && f,
              w = this.model.get("reserved_shared_collaboration"),
              b,
              C = !1;
            if (g) {
              var k =
                this.model.get("reserved_user_id_expand") ||
                this.model.get("reserved_user_id");
              (b = a.formatMemberName(k)), (C = this.userId !== f);
            }
            var y = a.formatExactDate(this.model.get("reserved_date")),
              S = a.formatMemberName(b),
              P,
              F;
            w
              ? ((P = c.reservedSharedCollaborationTooltip),
                (F = c.reservedSharedCollaborationAria))
              : g && ((P = c.reservedTooltip), (F = c.reservedAria)),
              P && (P = d.str.sformat(P, b, y)),
              F && (F = d.str.sformat(F, b, y));
            var D = {
              reservedTooltip: P,
              reservedAria: F,
              canUnreserve: this.canUnreserve,
              reserved: g,
              isReservedByOther: C,
              reservedSharedCollaboration: w,
            };
            return D;
          },
          initialize: function () {
            var f = this.options.context.getModel(i);
            (this.userId = f.get("id")),
              (this.unreserveCommand = new t()),
              (this.commandStatus = {
                nodes: new e([this.model]),
                context: this.options.context,
              }),
              this._checkEnabledAction();
            var g = this.model.collection.delayedActions;
            g && this.listenTo(g, "sync", this._checkEnabledAction);
          },
          _checkEnabledAction: function () {
            (this.canUnreserve = this.unreserveCommand.enabled(
              this.commandStatus
            )),
              this.isDestroyed || this.render();
          },
          onRemoveReservation: function (f) {
            var g;
            this.canUnreserve &&
              ((g = this.unreserveCommand.execute(this.commandStatus)),
              n.handleExecutionResults(g, {
                command: this.unreserveCommand,
                suppressSuccessMessage:
                  this.commandStatus.suppressSuccessMessage,
                suppressFailMessage: this.commandStatus.suppressFailMessage,
              }));
          },
          onKeyInView: function (f) {
            (f.keyCode === 32 || f.keyCode === 13) &&
              this.onRemoveReservation();
          },
        },
        {
          hasFixedWidth: !0,
          columnClassName: "csui-table-cell-reservation",
          getModelExpand: function (f) {
            return { properties: ["reserved_user_id"] };
          },
        }
      );
      return m;
    }
  ),
  csui.define(
    "hbs!csui/controls/node.state/impl/reservation/reservation",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "canUnreserve") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 4, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '      <span title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "reservedTooltip") ||
                  (e != null ? s(e, "reservedTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 19 },
                      end: { line: 5, column: 38 },
                    },
                  })
                : n)
            ) +
            '"' +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "canUnreserve") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 39 },
                  end: { line: 5, column: 104 },
                },
              }
            )) != null
              ? t
              : "") +
            ' class="icon ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "iconPrefix") || (e != null ? s(e, "iconPrefix") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "iconPrefix",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 117 },
                      end: { line: 5, column: 131 },
                    },
                  })
                : n)
            ) +
            "_" +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isReservedByOther") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(6, r, 0),
                inverse: i.program(8, r, 0),
                loc: {
                  start: { line: 5, column: 132 },
                  end: { line: 5, column: 181 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "canUnreserve") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(10, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 6, column: 2 },
                  end: { line: 8, column: 9 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <button title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedTooltip") ||
                  (e != null ? n(e, "reservedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 19 },
                      end: { line: 3, column: 38 },
                    },
                  })
                : t)
            ) +
            '" type="button" tabindex="-1" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "canUnreserveAria") ||
                  (e != null ? n(e, "canUnreserveAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "canUnreserveAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 80 },
                      end: { line: 3, column: 100 },
                    },
                  })
                : t)
            ) +
            `">
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "reservedAria") ||
                  (e != null ? n(e, "reservedAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "reservedAria",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 76 },
                      end: { line: 5, column: 92 },
                    },
                  })
                : t)
            ) +
            '"'
          );
        },
        6: function (i, e, l, u, r) {
          return "other";
        },
        8: function (i, e, l, u, r) {
          return "self";
        },
        10: function (i, e, l, u, r) {
          return `    </button>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isReserved") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 9, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_node.state_impl_reservation_reservation",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/node.state/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/node.state/nls/root/lang", {
    reservedTooltip: `Reserved by {0}\r
{1}`,
    reservedAria: "Reserved by {0} at {1}",
    canUnreserveAria: "Reserved by {0} at {1}, click to unreserve",
    reservedSharedCollaborationTooltip: `Shared for collaboration by {0}\r
{1}`,
    reservedSharedCollaborationAria: "Shared for collaboration by {0} at {1}",
    reserved_attribute_title: "Reserved",
    reserved_attribute_name: "reserved",
    reserved_shared_collaboration_attribute_title: "Shared for collaboration",
    reserved_shared_collaboration_attribute_name:
      "reserved_shared_collaboration",
  }),
  csui.define(
    "css!csui/controls/node.state/impl/reservation/reservation",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/node.state/impl/reservation/reservation.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/user",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/commandhelper",
      "hbs!csui/controls/node.state/impl/reservation/reservation",
      "i18n!csui/controls/node.state/nls/lang",
      "css!csui/controls/node.state/impl/reservation/reservation",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = d.ItemView.extend(
        {
          tagName: "li",
          className: "csui-node-state-reservation",
          template: u,
          templateHelpers: function () {
            var n = this._getReservedStatus(),
              s = n.isReserved,
              o = n.isSharedCollaboration,
              c = n.reservedBy,
              m,
              f,
              g,
              w;
            if (s) {
              var b = a.formatExactDate(this.model.get("reserved_date")),
                C = a.formatMemberName(c);
              o
                ? ((m = r.reservedSharedCollaborationTooltip),
                  (f = r.reservedSharedCollaborationAria))
                : ((m = r.reservedTooltip),
                  (f = r.reservedAria),
                  (g = r.canUnreserveAria)),
                this.options.reservedByLabel &&
                  (n.canUnreserve === !1
                    ? (m = "")
                    : (m = this.options.reservedByLabel)),
                m && (m = v.str.sformat(m, C, b)),
                f && (f = v.str.sformat(f, C, b)),
                g && (g = v.str.sformat(g, C, b)),
                (w = o ? "icon-shared_collaborate" : "icon-reserved");
            }
            return (
              (this._reservedStatus = {
                isReserved: s,
                isSharedCollaboration: o,
                isReservedByOther: c && this.userId !== c.id,
                canUnreserve: n.canUnreserve,
                canUnreserveAria: g,
                reservedTooltip: m,
                reservedAria: f,
                iconPrefix: w,
              }),
              this._reservedStatus
            );
          },
          triggers: { "click button": "remove:reservation" },
          constructor: function () {
            d.ItemView.prototype.constructor.apply(this, arguments);
            var s = this.options.context.getModel(h);
            (this.userId = s.get("id")),
              this.userId === void 0 &&
                this.listenToOnce(s, "sync", function () {
                  (this.userId = s.get("id")), this.render();
                }),
              (this.unreserveCommand = e.get("UnreserveDoc")),
              (this.commandStatus = {
                nodes: new i([this.model]),
                context: this.options.context,
              });
            var o = this.model.actions;
            o &&
              this.listenTo(o, "update", function () {
                this._isDestroyed || this.render();
              });
          },
          onRemoveReservation: function (n) {
            if (this._reservedStatus.canUnreserve) {
              var s = this.unreserveCommand,
                o = s.execute(this.commandStatus);
              l.handleExecutionResults(o, {
                command: s,
                suppressSuccessMessage:
                  this.commandStatus.suppressSuccessMessage,
                suppressFailMessage: this.commandStatus.suppressFailMessage,
              });
            }
          },
          _getReservedStatus: function () {
            var n = this.model.get("reserved"),
              s = this.model.get("reserved_shared_collaboration"),
              o = this.model.get("reserved_user_id_expand"),
              c = this.unreserveCommand.enabled(this.commandStatus);
            return (
              o ||
                ((o = this.model.get("reserved_user_id")),
                o && typeof o == "number" && (o = { id: o })),
              {
                isReserved: (n && o !== void 0) || s,
                isSharedCollaboration: s,
                reservedBy: o,
                canUnreserve: c,
              }
            );
          },
          getAttributes: function () {
            var n = this.templateHelpers(),
              s,
              o;
            return (
              n.isSharedCollaboration
                ? ((s = r.reserved_shared_collaboration_attribute_title),
                  (o = r.reserved_shared_collaboration_attribute_name))
                : ((s = r.reserved_attribute_title),
                  (o = r.reserved_attribute_name)),
              [
                {
                  label: s,
                  value: n.isReserved,
                  name: o,
                  tooltip: n.reservedTooltip,
                  aria: n.reservedAria,
                },
              ]
            );
          },
        },
        {
          enabled: function (n) {
            var s = n.node,
              o = s.get("reserved"),
              c = s.get("reserved_shared_collaboration"),
              m = s.get("reserved_user_id");
            return (
              (o &&
                m &&
                (!s.has("versions") ||
                  s.get("versions").current_version !== !1)) ||
              c
            );
          },
          getModelExpand: function (n) {
            return { properties: ["reserved_user_id"] };
          },
        }
      );
      return t;
    }
  ),
  csui.define(
    "hbs!csui/controls/node.state/impl/locked/impl/locked",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "canUnlock") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 4, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '      <span title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "lockedTooltip") ||
                  (e != null ? s(e, "lockedTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "lockedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 19 },
                      end: { line: 5, column: 36 },
                    },
                  })
                : n)
            ) +
            '" class="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "noActionCSS") ||
                  (e != null ? s(e, "noActionCSS") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "noActionCSS",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 45 },
                      end: { line: 5, column: 60 },
                    },
                  })
                : n)
            ) +
            ' csui-icon-locked"> ' +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "small",
                iconName: "csui_mime_locked24",
              },
              loc: {
                start: { line: 5, column: 80 },
                end: { line: 5, column: 150 },
              },
            })) != null
              ? t
              : "") +
            ` </span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "canUnlock") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 6, column: 2 },
                  end: { line: 8, column: 9 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <button type="button" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "lockedTooltip") ||
                  (e != null ? n(e, "lockedTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "lockedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 33 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "lockedAria") || (e != null ? n(e, "lockedAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "lockedAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 64 },
                      end: { line: 3, column: 78 },
                    },
                  })
                : t)
            ) +
            `" class="csui-unlock-cellview">
`
          );
        },
        4: function (i, e, l, u, r) {
          return `    </button>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "locked") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 9, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_node.state_impl_locked_impl_locked",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/node.state/impl/locked/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/node.state/impl/locked/impl/nls/root/lang", {
    lockedTooltip: `Locked by {0}\r
{1}`,
    lockedAria: "Locked by {0} at {1}",
    lockedByUnlock: "Locked by {0}, Press to unlock",
    pressToUnlock: "Press to unlock",
    lockedBy: "Locked by {0}",
  }),
  csui.define(
    "css!csui/controls/node.state/impl/locked/impl/locked",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/node.state/impl/locked/locked.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/utils/base",
      "csui/utils/contexts/factories/user",
      "csui/models/nodes",
      "csui/utils/commandhelper",
      "csui/utils/commands",
      "csui/utils/commands/versions/unlock",
      "csui/models/version",
      "csui/utils/contexts/factories/member",
      "hbs!csui/controls/node.state/impl/locked/impl/locked",
      "i18n!csui/controls/node.state/impl/locked/impl/nls/lang",
      "css!csui/controls/node.state/impl/locked/impl/locked",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s) {
      "use strict";
      var o = d.View.extend(
        {
          tagName: "li",
          className: "csui-node-state-locked",
          template: n,
          templateContext: function () {
            var c = this.model.get("locked"),
              m = !1,
              f,
              g,
              w,
              b,
              C,
              k,
              y,
              S;
            return (
              (this.canUnlock = this.unlockCommand?.enabled(
                this.commandStatus
              )),
              c &&
                ((w = this.model.get("locked_user_id_expand")),
                (m = this.userId !== this.model.get("locked_user_id")),
                (g = a.formatExactDate(this.model.get("locked_date"))),
                (y = v.str.sformat(
                  s.lockedByUnlock,
                  this.lockedUser.get("display_name")
                )),
                (S = v.str.sformat(
                  s.lockedBy,
                  this.lockedUser.get("display_name")
                )),
                w &&
                  ((C = w.name),
                  (b = v.str.sformat(s.lockedTooltip, w.name, g)),
                  (k = v.str.sformat(s.lockedAria, w.name, g)))),
              this.canUnlock || (f = "csui-btn-lock-no-action"),
              (this.lockedStatus = {
                noActionCSS: f,
                locked: c,
                lockedUser: C,
                lockedTooltip: this.options?.versionOverview
                  ? this.canUnlock
                    ? y
                    : S
                  : b,
                lockedAria: this.options?.versionOverview ? s.pressToUnlock : k,
                canUnlock: this.canUnlock || !m,
              }),
              this.lockedStatus
            );
          },
          triggers: { "click button": "remove:lock" },
          constructor: function (m) {
            d.View.prototype.constructor.apply(this, arguments);
            var f = m.model.get("locked_user_id");
            (this.lockedUser = m.context.getModel(t, {
              attributes: { id: f },
              options: { id: f, connector: this.options.connector },
              temporary: !0,
            })),
              this.lockedUser.ensureFetched(),
              this.lockedUser.on("change", this.render, this);
          },
          initialize: function () {
            var c = this.options.context.getModel(h);
            (this.userId = c.get("id")),
              (this.commandStatus = {
                nodes: new i([this.model]),
                context: this.options.context,
              }),
              this.model instanceof r || this.model.get("versions")
                ? (this.unlockCommand = new u())
                : (this.unlockCommand = l.get("Unlock"));
            var m = this.model.actions;
            m &&
              this.listenTo(m, "update", function () {
                this._isDestroyed || this.render();
              });
          },
          onRemoveLock: function () {
            var c;
            this.lockedStatus.canUnlock &&
              ((c = this.unlockCommand?.execute(this.commandStatus)),
              e.handleExecutionResults(c, {
                command: this.unlockCommand,
                suppressSuccessMessage:
                  this.commandStatus.suppressSuccessMessage,
                suppressFailMessage: this.commandStatus.suppressFailMessage,
              }));
          },
        },
        {
          enabled: function (c) {
            var m = c.node,
              f = m.has("locked") && m.get("locked");
            return f;
          },
          getModelExpand: function (c) {
            return { properties: ["locked_user_id"] };
          },
        }
      );
      return o;
    }
  ),
  csui.define(
    "hbs!csui/controls/node.state/impl/generation/impl/generation",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<span title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "generationTooltip") ||
                  (e != null ? s(e, "generationTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "generationTooltip",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 13 },
                      end: { line: 2, column: 34 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "generationAria") ||
                  (e != null ? s(e, "generationAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "generationAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 48 },
                      end: { line: 2, column: 66 },
                    },
                  })
                : n)
            ) +
            `" class='csui-icon-group'>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "iconName") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 3, column: 0 },
                  end: { line: 9, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                size: e != null ? s(e, "size") : e,
                states: "true",
                theme: e != null ? s(e, "iconTheme") : e,
                iconName: "csui_generation-overlay",
              },
              loc: {
                start: { line: 10, column: 0 },
                end: { line: 10, column: 88 },
              },
            })) != null
              ? t
              : "") +
            `
</span>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "    " +
            ((t = (
              n(l, "icon-v2") ||
              (e && n(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                size: e != null ? n(e, "size") : e,
                states: "true",
                theme: e != null ? n(e, "iconTheme") : e,
                iconName: e != null ? n(e, "iconName") : e,
              },
              loc: {
                start: { line: 4, column: 4 },
                end: { line: 4, column: 75 },
              },
            })) != null
              ? t
              : "") +
            `
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "className") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(5, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 6, column: 0 },
                end: { line: 8, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <span class="csui-node-type-icon ' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "className") || (e != null ? n(e, "className") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "className",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 37 },
                      end: { line: 7, column: 50 },
                    },
                  })
                : t)
            ) +
            `"></span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "generation") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 12, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_node.state_impl_generation_impl_generation",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/node.state/impl/generation/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/node.state/impl/generation/impl/nls/root/localized.strings",
    { Generation: "Generation" }
  ),
  csui.define(
    "css!csui/controls/node.state/impl/generation/impl/generation",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/node.state/impl/generation/generation.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/utils/nodesprites",
      "hbs!csui/controls/node.state/impl/generation/impl/generation",
      "i18n!csui/controls/node.state/impl/generation/impl/nls/localized.strings",
      "css!csui/controls/node.state/impl/generation/impl/generation",
      "csui/controls/icons.v2",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.View.extend(
        {
          tagName: "li",
          className: "csui-node-state-generation",
          template: h,
          templateContext: function () {
            var l = this.model.get("has_generation");
            let u = a.findByNode(this.model);
            return (
              (this.generationStatus = {
                generation: l,
                generationTooltip: i.Generation,
                generationAria: i.Generation,
                iconTheme: this.options.useIconsForDarkBackground ? "dark" : "",
                iconName: u.get("iconName"),
                className: u.get("className"),
                size: "small",
              }),
              this.generationStatus
            );
          },
          constructor: function (u) {
            d.View.prototype.constructor.apply(this, arguments);
          },
        },
        {
          enabled: function (l) {
            var u = l.node,
              r = u.has("has_generation") && u.get("has_generation");
            return r;
          },
        }
      );
      return e;
    }
  ),
  csui.define(
    "csui/controls/node.state/impl/node.state.icons",
    [
      "csui/controls/node.state/impl/reservation/reservation.view",
      "csui/controls/node.state/impl/locked/locked.view",
      "csui/controls/node.state/impl/generation/generation.view",
    ],
    function (v, d, a) {
      "use strict";
      return [
        { sequence: 50, iconView: v },
        { sequence: 60, iconView: d },
        { sequence: 70, iconView: a },
      ];
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/content.registry",
    ["csui/lib/underscore"],
    function (v) {
      function d() {
        (this._contentKeys = {}), (this._dataTypes = {});
      }
      return (
        v.extend(d.prototype, {
          getContentView: function (a) {
            var h = a.get("column_type_identifier");
            if (h !== "type") {
              var i = a.get("key"),
                e = i && this._contentKeys[i];
              if (e) return e;
            }
            var l = a.get("type");
            return l && this._dataTypes[l.toString()];
          },
          registerByKey: function (a, h) {
            if (!(v.isString(a) && a))
              throw new Error("Key must be a non-empty string");
            this._registerContentView(this._contentKeys, a, h);
          },
          registerByDataType: function (a, h) {
            if (!(v.isNumber(a) && a))
              throw new Error("Data type must be a non-zero number");
            this._registerContentView(this._dataTypes, a.toString(), h);
          },
          _registerContentView: function (a, h, i) {
            if (typeof i != "function")
              throw new Error("Column handler must be a function object");
            a[h] = i;
          },
        }),
        new d()
      );
    }
  ),
  csui.define("csui/controls/thumbnail/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/thumbnail/impl/nls/root/lang", {
    addTitle: "Add",
    searchIconTooltip: "Search by {0}",
    selectAll: "Select all",
    selectAllTitle: "Select all items",
    noResults: "No item to display.",
    noSearchResults: "No results found.",
    dragAndDropMessage: "Drag and drop files here to add new content",
    items: "Items",
    formatForNone: "{0} items",
    formatForOne: "{0} item",
    formatForTwo: "{0} items",
    formatForFive: "{0} items",
    asc_name: "Name (A-Z)",
    desc_name: "Name (Z-A)",
    asc_modify_date: "Modified (new-old)",
    desc_modify_date: "Modified (old-new)",
    asc_size: "Size (small-large)",
    desc_size: "Size (large-small)",
    name: "Name",
    modified: "Modified",
    size: "Size",
    selectItem: "Select {0}",
    selectItemAria:
      "Select {0}. When selected, you can navigate to a menu of actions by pressing Shift-Tab",
    noPermissions: "You don't have permissions to add items to this location.",
    sortAscending: "Descending order - Click to sort ascending",
    sortAscendingAria: "{0} in descending order - Sort ascending",
    sortDescending: "Ascending order - Click to sort descending",
    sortDescendingAria: "{0} in ascending order - sort descending",
    sortBy: "Sort by {0}",
    sortByAria: "Sort By menu - {0} selected",
    MasterCompoundDocumentLabel: "Master",
  }),
  csui.define(
    "hbs!csui/controls/thumbnail/content/select/impl/select",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `  <div class="csui-focusable-table-column-header">
    <div class="csui-selected-checkbox csui-checkbox-primary">
      <input type="checkbox" tabindex='0' class="selectAction" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectItemName") ||
                  (e != null ? s(e, "selectItemName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectItemName",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 70 },
                      end: { line: 4, column: 88 },
                    },
                  })
                : n)
            ) +
            `"
             ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "checked") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 13 },
                  end: { line: 5, column: 42 },
                },
              }
            )) != null
              ? t
              : "") +
            ` >
      <div class="csui-selectlabel"></div>
    </div>
  </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          return "checked";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "selectable") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 9, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_select_impl_select",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/select/impl/select",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/select/select.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/impl/nls/lang",
      "hbs!csui/controls/thumbnail/content/select/impl/select",
      "css!csui/controls/thumbnail/content/select/impl/select",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.ItemView.extend(
        {
          template: e,
          templateHelpers: function () {
            return {
              selectable: this.model.get("selectable") !== !1,
              checked: this.model.get(l.isSelectedModelAttributeName) === !0,
              selectItemName: v.str.sformat(
                i.selectItem,
                this.model.get("name")
              ),
              selectItemAria: v.str.sformat(
                i.selectItemAria,
                this.model.get("name")
              ),
            };
          },
          events: { keydown: "onKeyInView" },
          constructor: function (u) {
            a.ItemView.prototype.constructor.apply(this, arguments),
              (this.rowIndex = u.rowIndex),
              this.listenTo(
                this.model,
                "change:" + l.isSelectedModelAttributeName,
                this.render
              ),
              this.listenTo(
                this,
                "before:render",
                this._detachClickHandler
              ).listenTo(this, "before:destroy", this._detachClickHandler);
          },
          onKeyInView: function (u) {
            (u.keyCode === 32 || u.keyCode === 13) && this._toggleCheckbox(u);
          },
          _attachClickHandler: function () {
            var u = this,
              r = this.$el.find('input[type="checkbox"]'),
              t = this.$el.find(".csui-selectlabel");
            t.on("click." + this.cid, function (n) {
              n.preventDefault(),
                n.stopPropagation(),
                !(
                  u.options.thumbnailView &&
                  u.options.thumbnailView._isSelectCheckBoxBlocked
                ) &&
                  (r.prop("checked", !r.prop("checked")).change(),
                  u.triggerMethod("clicked:checkbox", n));
            }),
              r.on("change." + this.cid, function (n) {
                d.trigger("closeToggleAction");
                var s = r.prop("checked");
                u.triggerMethod("clicked:checkbox", { view: u, checked: s });
              });
          },
          _detachClickHandler: function () {
            var u = this.$el.find('input[type="checkbox"]'),
              r = this.$el.find(".csui-selectlabel");
            u.off("change." + this.cid),
              r.off("click." + this.cid),
              this.$el.off("click." + this.cid);
          },
          _toggleCheckbox: function (u) {
            var r = this.$el.find('input[type="checkbox"]');
            return (
              r.prop("checked", !r.prop("checked")).change(),
              this.$el.attr("aria-checked", r.prop("checked")),
              u.preventDefault(),
              u.stopPropagation(),
              r.prop("checked")
            );
          },
          onRender: function () {
            this._ensureViewIsIntact(),
              this.triggerMethod("before:render", this),
              this.$el.attr("aria-label", i.selectItemAria),
              this.$el.attr("role", "checkbox");
            var u = this.$el.find('input[type="checkbox"]'),
              r = u.prop("checked");
            return (
              this.$el.attr("aria-checked", r), this._attachClickHandler(), this
            );
          },
        },
        {
          columnClassName: "csui-table-cell-_select",
          isSelectedModelAttributeName: "csuiIsSelected",
        }
      );
      return h.registerByKey("_select", l), l;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/impl/sort/impl/sort.menu",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <li role="presentation">
          <a role="menuitem" href="#" class="csui-sort-option" data-binf-toggle="tab">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "selected") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.program(4, r, 0),
                loc: {
                  start: { line: 14, column: 8 },
                  end: { line: 18, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            '        <span class="cs-label" title="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "value") : e, e)) +
            '" data-sortbyid="' +
            i.escapeExpression(i.lambda(e != null ? n(e, "key") : e, e)) +
            '">' +
            i.escapeExpression(i.lambda(e != null ? n(e, "value") : e, e)) +
            ` </span></a>
      </li>
`
          );
        },
        2: function (i, e, l, u, r) {
          return `          <span class="cs-icon icon-listview-checkmark"></span>
`;
        },
        4: function (i, e, l, u, r) {
          return `          <span class="cs-icon "></span>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="csui-search-sort-options">
  <button id="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 14 },
                      end: { line: 2, column: 20 },
                    },
                  })
                : n)
            ) +
            `" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"
          title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "sortByTooltip") ||
                  (e != null ? s(e, "sortByTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "sortByTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 17 },
                      end: { line: 3, column: 34 },
                    },
                  })
                : n)
            ) +
            `" data-binf-toggle="dropdown" aria-haspopup="true"
          aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "sortByAria") || (e != null ? s(e, "sortByAria") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "sortByAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 22 },
                      end: { line: 4, column: 36 },
                    },
                  })
                : n)
            ) +
            `" aria-expanded="false">
    <span class="cs-label">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectedValue") ||
                  (e != null ? s(e, "selectedValue") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectedValue",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 27 },
                      end: { line: 5, column: 44 },
                    },
                  })
                : n)
            ) +
            `</span>
    <span class="csui-button-icon icon-caret-down"></span>
  </button>
  <span class="csui-sort-arrow ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectedArrowClass") ||
                  (e != null ? s(e, "selectedArrowClass") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectedArrowClass",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 31 },
                      end: { line: 8, column: 53 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectedArrowTooltip") ||
                  (e != null ? s(e, "selectedArrowTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectedArrowTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 62 },
                      end: { line: 8, column: 86 },
                    },
                  })
                : n)
            ) +
            `"
        aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectedArrowAria") ||
                  (e != null ? s(e, "selectedArrowAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectedArrowAria",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 20 },
                      end: { line: 9, column: 41 },
                    },
                  })
                : n)
            ) +
            `" role="button" tabindex="0"></span>
  <ul class="binf-dropdown-menu" role="menu">
` +
            ((t = s(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "sortListArray") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 11, column: 4 },
                  end: { line: 21, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </ul>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_impl_sort_impl_sort.menu",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/impl/sort/sort.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/log",
      "i18n!csui/controls/thumbnail/impl/nls/lang",
      "hbs!csui/controls/thumbnail/impl/sort/impl/sort.menu",
      "csui/controls/mixins/view.state/node.view.state.mixin",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l) {
      var u = a.ItemView.extend({
        className: "cs-sort-links",
        template: e,
        constants: { SORT_ASC: "asc", SORT_DESC: "desc" },
        templateHelpers: function () {
          var r = this,
            t =
              this.selectedValue &&
              d.any(
                this.sortMenu,
                function (n) {
                  return n.value === r.actualValue
                    ? (n.selected = !0)
                    : (n.selected = !1);
                },
                r
              );
          return {
            id: d.uniqueId("sortButton"),
            selectedValue: r.selectedValue,
            sortListArray: this.sortMenu,
            sortByTooltip: d.str.sformat(i.sortBy, r.selectedValue),
            sortByAria: d.str.sformat(i.sortByAria, r.selectedValue),
            selectedArrowClass: r.selectedArrow,
            selectedArrowTooltip:
              r.selectedArrow === "icon-sortArrowUp"
                ? i.sortDescending
                : i.sortAscending,
            selectedArrowAria:
              r.selectedArrow === "icon-sortArrowUp"
                ? d.str.sformat(i.sortDescendingAria, r.selectedValue)
                : d.str.sformat(i.sortAscendingAria, r.selectedValue),
          };
        },
        ui: {
          sortOrderBtn: ".csui-search-sort-options span.csui-sort-arrow",
          dropdownToggle: ".binf-dropdown-toggle",
          dropdown: ".binf-dropdown-menu",
        },
        events: {
          "click .binf-dropdown-menu > li > a": "onSortOptionClick",
          "click @ui.sortOrderBtn": "onSortOrderClick",
          "keydown @ui.sortOrderBtn": "onKeyInView",
        },
        constructor: function (t) {
          a.ItemView.prototype.constructor.call(this, t);
          var n = {},
            s = [];
          this.context = this.options.resultView.options.context;
          var o = this.collection.orderBy
              ? this.collection.orderBy.split(" ")[0]
              : this.context &&
                this.context.viewStateModel
                  .getViewState("order_by")
                  ?.substring(
                    0,
                    this.context.viewStateModel
                      .getViewState("order_by")
                      .lastIndexOf("_")
                  ),
            c = o || i.name;
          (c = c.toLowerCase()),
            d.find(this.options.resultView.options.allColumns, function (g) {
              if (
                g.attributes.sort_key === c ||
                g.name.toLowerCase() === c ||
                g.attributes.column_key === c
              )
                return (c = g.attributes.column_key), !0;
            }),
            Object.keys(n).length === 0 &&
              (d.each(this.options.resultView.options.allColumns, function (g) {
                g.attributes &&
                  g.attributes.sort === !0 &&
                  (n[g.attributes.key] = g.attributes.name);
              }),
              d.each(n, function (g, w) {
                s.push({ key: w, value: g, selected: !1 });
              })),
            (this.sortMenu = s);
          var m = this.OverlapDisplayText(n[c]);
          (this.selectedValue = m),
            (this.actualValue = this.options.collection.sortname
              ? this.options.collection.sortname
              : i.name);
          const f = this.collection.orderBy?.split(" ")?.[1];
          f === "asc"
            ? (this.options.collection.orderstate = "icon-sortArrowUp")
            : f === "desc" &&
              (this.options.collection.orderstate = "icon-sortArrowDown"),
            (this.selectedArrow =
              this.selectedValue &&
              (this.collection.orderBy
                ? this.options.collection.orderstate
                : "icon-sortArrowUp")),
            (this.selectedId = o || "name"),
            (this.config = this.options.config || {});
        },
        onSortOptionClick: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            this.$el
              .find(".csui-search-sort-options li>a")
              .removeClass("binf-active"),
            this.$el
              .find(".csui-search-sort-options li>a>span")
              .removeClass("icon-listview-checkmark"),
            this.$(r.currentTarget).addClass("binf-active"),
            this.resetSelection(
              v(r.currentTarget.children[1]).attr("data-sortbyid"),
              r.currentTarget.children[1].innerHTML.trim()
            ),
            (this.options.resultView.isSortOrderClicked = !1);
        },
        resetSelection: function (r, t) {
          this.collection.setOrder(r + " " + this.constants.SORT_ASC);
          var n = [];
          n.push(r + " " + this.constants.SORT_ASC),
            this.setDefaultOrderBy(),
            (this.selectedValue = t),
            (this.actualValue = t),
            (this.selectedArrow = "icon-sortArrowUp"),
            (this.options.collection.selectedId = r),
            (this.options.collection.sortname = t),
            (this.options.collection.state = r + " " + this.constants.SORT_ASC),
            (this.options.collection.orderstate = this.selectedArrow),
            (this.options.collection.sort_state =
              this.options.collection.orderBy);
          var s = this;
          this.options.collection.fetch({ silent: !0 }).then(function () {
            s.trigger("render:sortmenu", s.options.collection.state),
              (s.$el.find(".binf-dropdown-toggle >span.cs-label").innerText =
                t),
              s.$el
                .find(".csui-sort-option.binf-active >span.cs-icon")
                .addClass("icon-listview-checkmark");
            var o = s.OverlapDisplayText(t);
            s.$el.find(".binf-dropdown-toggle >span.cs-label").html(o),
              s.$el.find(".csui-search-sort-options").removeClass("binf-open");
          }, s);
        },
        OverlapDisplayText: function (r) {
          var t = r;
          return t;
        },
        onKeyInView: function (r) {
          (r.keyCode === 13 || r.keyCode === 32) && this.onSortOrderClick();
        },
        onSortOrderClick: function (r) {
          if (this.ui.sortOrderBtn.hasClass("icon-sortArrowDown"))
            this.resetSelection(this.selectedId, this.selectedValue);
          else {
            var t = this.getViewStateOrderBy()
              ? this.getViewStateOrderBy().split(" ")[0]
              : this.selectedValue.toLowerCase();
            this.collection.setOrder(t + " " + this.constants.SORT_DESC);
            var n = [];
            n.push(t + " " + this.constants.SORT_DESC),
              this.setDefaultOrderBy(),
              (this.options.collection.sort_state =
                t + " " + this.constants.SORT_DESC),
              (this.options.collection.selectedId = t),
              (this.selectedArrow = "icon-sortArrowDown"),
              (this.options.collection.orderstate = this.selectedArrow),
              this.OverlapDisplayText(this.sortMenu[t]);
          }
          this.options.resultView.isSortOrderClicked = !0;
        },
        setDefaultOrderBy: function () {
          h.debug("Setting default view state order");
          var r = this.context && this.context.viewStateModel.get("enabled");
          if (r) {
            var t = this.collection.orderBy,
              n = !1;
            if (
              (this.getViewStateOrderBy() || (n = !0),
              t.length > 0 && this.setViewStateOrderBy([t], { default: n }))
            )
              return !0;
          }
        },
        onRender: function () {
          var r = this;
          r.$el
            .find(".csui-search-sort-options li>a span.cs-label")
            .each(function () {
              v(this).text().trim() === r.selectedValue &&
                (r.$el
                  .find(".csui-search-sort-options li>a>span")
                  .removeClass("icon-listview-checkmark"),
                v(this).siblings().addClass("icon-listview-checkmark"));
            }, r),
            r.ui.dropdownToggle.on("binf.dropdown.after.show", function () {
              r.ui.dropdown.addClass("csui-normal-scrolling");
            });
        },
      });
      return d.extend(u.prototype, l), u;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/impl/thumbnail.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return " binf-hidden";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="csui-thumbnail-header-data">
  <div class="csui-thumbnail-select">
    <div
      class="csui-selected-checkbox csui-checkbox-primary csui-checkbox-selectAll ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "selectThumbnails") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 4, column: 82 },
                  end: { line: 4, column: 125 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
      <div class="csui-selectAll-header csui-selectlabel"></div>
    </div>
  </div>
  <div class="csui-thumbnail-itemcount">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "items") || (e != null ? s(e, "items") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "items",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 40 },
                      end: { line: 8, column: 51 },
                    },
                  })
                : n)
            ) +
            `</div>
  <div class="csui-thumbnail-sort-search-container">
    <div id="csui-sorting-container" class="csui-sorting-container"></div>
    <div id="csui-thumbnail-column-search" class="csui-thumbnail-column-search"></div>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_impl_thumbnail.header", h), h
      );
    }
  ),
  csui.define("css!csui/controls/thumbnail/thumbnail", [], function () {}),
  csui.define(
    "csui/controls/thumbnail/thumbnail.header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/thumbnail/impl/sort/sort.view",
      "csui/controls/thumbnail/content/select/select.view",
      "csui/controls/table/cells/searchbox/searchbox.view",
      "csui/controls/checkbox/checkbox.view",
      "hbs!csui/controls/thumbnail/impl/thumbnail.header",
      "i18n!csui/controls/thumbnail/impl/nls/lang",
      "css!csui/controls/thumbnail/thumbnail",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = a.LayoutView.extend({
        className: "csui-thumbnail-header",
        tagName: "div",
        regions: {
          sortRegion: "#csui-sorting-container",
          searchRegion: "#csui-thumbnail-column-search",
          selectAllRegion: ".csui-checkbox-selectAll",
        },
        behaviors: {
          TabableRegion: { behaviorClass: i, initialActivationWeight: 100 },
        },
        ui: {
          selectAll: ".csui-selectAll-input",
          sortContainer: "#csui-sorting-container",
        },
        events: {
          keydown: "onKeyInView",
          "click @ui.sortContainer": "onSortClick",
        },
        template: t,
        templateHelpers: function () {
          return {
            columns: this.options.thumbnailColumns,
            addTitle: n.addTitle,
            selectAll: n.selectAll,
            selectAllTitle: n.selectAllTitle,
            isEmptyNode: this.collection.models.length === 0,
            items: h.formatMessage(this.collection.length, n),
            selectThumbnails:
              this.options.thumbnailView.options.selectThumbnails === "none" ||
              this.options.thumbnailView.options.selectThumbnails === "single",
          };
        },
        constructor: function (c) {
          c || (c = {}),
            a.LayoutView.prototype.constructor.call(this, c),
            (this.columnsWithSearch = c.columnsWithSearch || []),
            this.listenTo(
              this,
              "selectOrUnselect.mixed",
              this.thumbnailItemClicked
            ),
            this.listenTo(this, "selectOrUnselect.all", function (m, f) {
              m
                ? (this.options.thumbnailView.cancelAnyExistingInlineForm.call(
                    this.options.thumbnailView
                  ),
                  this.collection.models.length > 0 &&
                    ((f.cancel = !1),
                    v.each(this.collection.models, function (g) {
                      g.set(l.isSelectedModelAttributeName, !0);
                    })),
                  this.options.thumbnailView.trigger("thumbnailSelected", {
                    sender: this,
                    targets: this.options.thumbnailView,
                    nodes: this.collection.models,
                  }))
                : (this.collection.models.length > 0 &&
                    ((f.cancel = !1),
                    v.each(this.collection.models, function (g) {
                      g.set(l.isSelectedModelAttributeName, !1);
                    })),
                  this.options.thumbnailView.trigger("thumbnailUnSelected", {
                    sender: this,
                    targets: this.options.thumbnailView,
                    nodes: this.collection.models,
                  })),
                this.options.thumbnailView.showToolBarActions();
            });
        },
        onSortClick: function () {
          this.options.thumbnailView.currentItemView &&
          this.options.thumbnailView.currentItemView.overviewPopoverOpened
            ? this.options.thumbnailView.currentItemView.overview.currentView._closePopover()
            : this.options.thumbnailView.currentItemView &&
              this.options.thumbnailView.currentItemView
                .favoritePopoverOpened &&
              this.options.thumbnailView.currentItemView.favorite.currentView.favStarView.closePopover();
        },
        sortmenurender: function (o) {
          this.options.thumbnailView.resultsView.render(),
            this.isSortOrderClicked ||
              (this.sortRegion.$el
                .find("button.binf-dropdown-toggle")
                .trigger("focus"),
              (this.isSortOrderClicked = !0)),
            this._isRendered &&
              this.options.thumbnailView.options.allSelectedNodes.length ===
                0 &&
              this.options.thumbnailView.resultsView.$el.find(
                ".csui-checkbox"
              ) &&
              this.options.thumbnailView.resultsView.$el
                .find(".csui-checkbox")
                .removeClass("csui-checkbox");
        },
        thumbnailItemClicked: function () {
          var o = this.collection.filter(function (f) {
              return f.get(l.isSelectedModelAttributeName);
            }),
            c = o.length > 0 && o.length === this.collection.length;
          o.length > 0 && !c
            ? this.$el
                .find(".csui-selected-checkbox")
                .addClass("csui-checkbox-atleastone")
            : this.$el
                .find(".csui-selected-checkbox")
                .removeClass("csui-checkbox-atleastone");
          var m = this.collection.where({ csuiIsSelected: !0 }).length;
          this.options.thumbnailView.updateSelectAllCheckbox.call(this);
        },
        onRender: function (o) {
          var c = o || window.event,
            m = this.options.thumbnailView;
          this.focusIndex = 0;
          var f = m.$el.find(".csui-thumbnail-item-selected").length,
            g = new r({
              checked: !1,
              disabled: !1,
              ariaLabel: n.selectAll,
              title: n.selectAll,
              label: n.selectAll,
            });
          this.listenTo(g, "clicked", function (b) {
            (b.cancel = !0),
              this.trigger(
                "selectOrUnselect.all",
                b.model.attributes.checked !== "true",
                b
              );
          }),
            this.selectAllRegion.show(g);
          var w = new e({ collection: this.collection, resultView: this });
          this.sortRegion.show(w),
            this.isSortOrderClicked && w.ui.sortOrderBtn.trigger("focus"),
            this.listenTo(w, "render:sortmenu", this.sortmenurender),
            this.ensureAllSearchBox(),
            this.currentlyFocusedElement();
        },
        updateTotalCount: function () {
          var o = h.formatMessage(this.collection.length, n);
          this.$el.find(".csui-thumbnail-itemcount").html(o);
        },
        currentlyFocusedElement: function (o) {
          var c = this.$el.find("*[tabindex=-1]");
          if ((c.length && c.prop("tabindex", 0), this.isSortOrderClicked))
            return d(this.sortRegion.$el.find(".csui-sort-arrow"));
        },
        onKeyInView: function (o) {
          if (o.keyCode === 32 || o.keyCode === 13) {
            if (d(o.target).hasClass("csui-selectAll-input")) {
              if (
                (o.preventDefault(),
                o.stopPropagation(),
                h.isFirefox() && o.keyCode === 32)
              )
                return !1;
              d(o.target).trigger("click");
            }
            d(o.target).hasClass("csui-thumbnail-column-search") &&
              (o.preventDefault(),
              o.stopPropagation(),
              this.searchBoxes.showSearchInput(o));
          }
        },
        getName: function () {
          var o =
            this.options.thumbnailView &&
            this.options.thumbnailView.options &&
            this.options.thumbnailView.options.allColumns.length &&
            this.options.thumbnailView.options.allColumns.find(function (c) {
              return c.name === "name";
            });
          return o && o.name;
        },
        ensureAllSearchBox: function () {
          var o = this,
            c = this.options.thumbnailView,
            m = this.$el.find(".csui-thumbnail-column-search"),
            f = this.$el.find(".csui-sorting-container"),
            g = c.options.columns.where({ isNaming: !0 }),
            w = g[0] ? g[0].get("key") : this.getName();
          if (d(this).find(".csui-thumbnail-column-search").length === 0) {
            var b = new u(o.collection.filters[w], {
              column: w,
              columnTitle: n.name,
            });
            (o.searchBoxes = b),
              b.on("change:filterValue", function (C) {
                o.applyFilter(C);
              }),
              b.on("opened", function () {
                f.find(".csui-search-sort-options").removeClass("binf-open"),
                  f.addClass("binf-hidden"),
                  (o.searchColumn = w);
              }),
              b.on("closed", function () {
                f.removeClass("binf-hidden"),
                  (o.collection.filters[w] = void 0);
              }),
              this.searchRegion.show(o.searchBoxes),
              w === o.searchColumn &&
                !o.options.thumbnailView.activeInlineForm &&
                b.setFocus(),
              (m = d(this).find(".csui-table-column-search")),
              m &&
                m.attr(
                  "aria-label",
                  v.str.sformat(n.searchIconTooltip, n.name)
                );
          }
        },
        applyFilter: function (o) {
          var c = {};
          (c[o.column] = o.keywords),
            this.collection.fetching
              ? (this.filterValuePending = c)
              : (this.collection.resetLimit(!1),
                this.collection.setFilter(c),
                this.options.thumbnailView &&
                  this.options.enableViewState &&
                  this.options.thumbnailView.setViewStateFilter(
                    this.collection.getFilterAsObject()
                  ));
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/text/impl/text",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <div class="csui-thumbnail-label csui-thumbnail-text-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 74 },
                      end: { line: 2, column: 83 },
                    },
                  })
                : t)
            ) +
            `">
    <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 10 },
                      end: { line: 3, column: 19 },
                    },
                  })
                : t)
            ) +
            `</span>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 5, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `<div class="csui-thumbnail-value">
  <p class="csui-thumbnail-content-text ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "className") || (e != null ? s(e, "className") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "className",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 40 },
                      end: { line: 7, column: 53 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 62 },
                      end: { line: 7, column: 71 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 85 },
                      end: { line: 7, column: 94 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 96 },
                      end: { line: 7, column: 105 },
                    },
                  })
                : n)
            ) +
            `</p>
</div>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_content_text_impl_text", h),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/text/impl/text",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/text/text.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "i18n!csui/controls/thumbnail/impl/nls/lang",
      "hbs!csui/controls/thumbnail/content/text/impl/text",
      "css!csui/controls/thumbnail/content/text/impl/text",
    ],
    function (v, d, a, h, i, e, l) {
      var u = a.extend({ multiValueSeparator: ", " }, v.config()),
        r = i.ItemView.extend({
          className: "csui-thumbnail-generic",
          template: l,
          templateHelpers: function () {
            var t = this.getValueText(),
              n = this.options.column;
            return {
              value: t,
              displayLabel: this.options.displayLabel,
              className:
                this.options.column.name === "order" && isNaN(t)
                  ? "csui-master-order-column"
                  : "",
              label: this.options.displayLabel ? n.title || n.name : "",
            };
          },
          getValueText: function () {
            var t = this.options.column;
            if (t) {
              var n = t.name,
                s = this.model,
                o = s.get(n + "_formatted");
              return (
                o == null &&
                  ((o = s.get(n)),
                  (o =
                    n === "order" && o === 0
                      ? e.MasterCompoundDocumentLabel
                      : o),
                  o == null && (o = "")),
                this.getSingleOrMultipleValueText(o)
              );
            }
            return "";
          },
          getSingleOrMultipleValueText: function (t, n) {
            var s;
            return (
              (n = this._validateFormater(n)),
              Array.isArray(t)
                ? (s = this.concatenateTextValues(t, n))
                : (s = n(t)),
              s
            );
          },
          concatenateTextValues: function (t, n) {
            return (
              (n = this._validateFormater(n)),
              t.map(n).join(u.multiValueSeparator)
            );
          },
          _validateFormater: function (t) {
            return (
              t ||
              function (n) {
                return n;
              }
            );
          },
          constructor: function (n) {
            n || (n = {}),
              i.ItemView.prototype.constructor.apply(this, arguments);
          },
        });
      return r;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/favorite/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/favorite/impl/nls/root/localized.strings",
    { ColumnTitle: "Favorite" }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/favorite/impl/favorite",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return '<span class="csui-thumbnail-favorite"></span>';
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_favorite_impl_favorite",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/favorite/impl/favorite",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/favorite/favorite.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/widgets/favorites/favorite.star.view",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/content/favorite/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/favorite/impl/favorite",
      "css!csui/controls/thumbnail/content/favorite/impl/favorite",
    ],
    function (v, d, a, h, i, e, l, u) {
      "use strict";
      var r = h.LayoutView.extend({
        template: u,
        className: "csui-thumbnail-favorite-container",
        regions: { favRegion: ".csui-thumbnail-favorite" },
        constructor: function (n) {
          n || (n = {}), h.LayoutView.prototype.constructor.call(this, n);
        },
        onRender: function () {
          this.favStarView ||
            ((this.favStarView = new i(
              d.extend(
                { checkVisible: !0, popoverAtBodyElement: !0, focusable: !0 },
                this.options
              )
            )),
            this.favRegion.show(this.favStarView)),
            this.listenTo(
              this.favStarView,
              "show:add:favorite:form",
              function () {
                this.triggerMethod("show:add:favorite:form");
              }
            ),
            this.listenTo(
              this.favStarView,
              "close:add:favorite:form",
              function () {
                this.triggerMethod("close:add:favorite:form");
              }
            ),
            this.favStarView.render(),
            this.$el.append(this.favStarView.el),
            this.listenTo(
              this.options.originatingView &&
                this.options.originatingView.thumbnail,
              "scroll",
              function () {
                this.favStarView && this.favStarView.closePopover();
              }
            );
        },
      });
      return e.registerByKey("favorite", r), r;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/node.state/impl/node.state",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return '<div class="csui-thumbnail-nodestate"></div>';
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_node.state_impl_node.state",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/node.state/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/node.state/impl/nls/root/localized.strings",
    {
      stateListAria: "List of states",
      someStateIconsAria: "State available",
      noStateIconsAria: "No state",
      bool_value_true: "true",
      bool_value_false: "false",
      reservedTooltip: `Reserved by {0}\r
{1}`,
      reservedAria: "Reserved by {0} at {1}, click to unreserve",
      reservedSharedCollaborationTooltip: `Shared for collaboration by {0}\r
{1}`,
      reservedSharedCollaborationAria: "Shared for collaboration by {0} at {1}",
      reserved_attribute_title: "Reserved",
      reserved_attribute_name: "reserved",
      reserved_shared_collaboration_attribute_title: "Shared for collaboration",
      reserved_shared_collaboration_attribute_name:
        "reserved_shared_collaboration",
      nodeStateTitle_thumbnail: "Open info panel to see status icons",
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/node.state/node.state.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/controls/thumbnail/content/content.registry",
      "csui/controls/node.state/node.states.view",
      "csui/controls/node.state/node.state.icons",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "hbs!csui/controls/thumbnail/content/node.state/impl/node.state",
      "i18n!csui/controls/thumbnail/content/node.state/impl/nls/localized.strings",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = h.LayoutView.extend({
        template: t,
        className: "csui-thumbnail-nodestate-container",
        regions: { nodeStateRegion: ".csui-thumbnail-nodestate" },
        events: { keydown: "_onKeyInView" },
        constructor: function (c) {
          c || (c = {}),
            (this.options = c),
            h.LayoutView.prototype.constructor.call(this, c);
        },
        onRender: function () {
          var o = this._getEnabledNodeStateIcons(),
            c = o.length ? n.someStateIconsAria : n.noStateIconsAria,
            m = this.options.displayTitle ? n.nodeStateTitle_thumbnail : "";
          if (
            (this.el.setAttribute("aria-label", c),
            this.el.setAttribute("title", m),
            o.length)
          ) {
            var f = new l({
              context: this.options.context,
              node: this.model,
              tableView: this.options.originatingView,
              targetView: this.options.targetView,
              collection: o,
            });
            this.nodeStateRegion.show(f),
              this.options.displayTitle &&
                f.$el.find("button").attr("tabindex", "-1");
          }
        },
        _onKeyInView: function (o) {
          if (o.keyCode === 27) {
            o.preventDefault(), o.stopPropagation();
            var c = this.$el.parents(".binf-popover");
            c.trigger("close:popover");
          }
        },
        _getEnabledNodeStateIcons: function () {
          var o, c;
          return (
            (o = Object.getPrototypeOf(u)),
            (c = new o.constructor(
              u.filter(function (m) {
                var f = m.get("iconView");
                try {
                  return (
                    f &&
                    (!f.enabled ||
                      f.enabled({
                        context: this.options.context,
                        node: this.model,
                      }))
                  );
                } catch (g) {
                  i.warn(
                    `Evaluating an icon view failed.
{0}`,
                    g.stack
                  ) && console.warn(i.last);
                }
              }, this)
            )),
            c
          );
        },
      });
      return e.registerByKey("reserved", s), s;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/name/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/name/impl/nls/root/localized.strings",
    {
      ColumnTitle: "Name",
      nameAria: "{0}",
      nameNoOpenAria: "{0}. Can not be opened.",
      typeAndNameAria: "{0} {1}",
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/name/impl/name",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "defaultAction") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(7, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 11, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inactive") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(3, r, 0),
              inverse: i.program(5, r, 0),
              loc: {
                start: { line: 3, column: 4 },
                end: { line: 8, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        3: function (i, e, l, u, r) {
          return `      <div class="csui-thumbnail-overview-icon csui-thumbnail-no-default-action"></div>
`;
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <a href="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 15 },
                      end: { line: 6, column: 35 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "typeAndNameAria") ||
                  (e != null ? n(e, "typeAndNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "typeAndNameAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 49 },
                      end: { line: 6, column: 68 },
                    },
                  })
                : t)
            ) +
            `"
         class="csui-thumbnail-overview-icon csui-thumbnail-default-action" tabindex="0"></a>
`
          );
        },
        7: function (i, e, l, u, r) {
          return `    <div class="csui-thumbnail-overview-icon csui-thumbnail-no-default-action"></div>
`;
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inactive") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(10, r, 0),
              inverse: i.program(12, r, 0),
              loc: {
                start: { line: 14, column: 2 },
                end: { line: 31, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        10: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-name csui-thumbnail-name-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 56 },
                      end: { line: 15, column: 63 },
                    },
                  })
                : t)
            ) +
            `">
      <div class="csui-thumbnail-name-justify-div csui-thumbnail-no-default-action"  title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 92 },
                      end: { line: 16, column: 100 },
                    },
                  })
                : t)
            ) +
            '"  aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "nameAria") || (e != null ? n(e, "nameAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameAria",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 115 },
                      end: { line: 16, column: 127 },
                    },
                  })
                : t)
            ) +
            `">
        <span class="csui-thumbnail-name-value"  title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 56 },
                      end: { line: 17, column: 64 },
                    },
                  })
                : t)
            ) +
            `"
              aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "nameNoOpenAria") ||
                  (e != null ? n(e, "nameNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 26 },
                      end: { line: 18, column: 44 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 46 },
                      end: { line: 18, column: 54 },
                    },
                  })
                : t)
            ) +
            `</span>
      </div>
    </div>
`
          );
        },
        12: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-name csui-thumbnail-name-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 56 },
                      end: { line: 22, column: 63 },
                    },
                  })
                : t)
            ) +
            `">
      <a href="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 15 },
                      end: { line: 23, column: 35 },
                    },
                  })
                : t)
            ) +
            `"
         class="csui-thumbnail-name-value csui-thumbnail-default-action"  title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 24, column: 81 },
                      end: { line: 24, column: 89 },
                    },
                  })
                : t)
            ) +
            `"
          aria-label="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "nameAria") || (e != null ? n(e, "nameAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "nameAria",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 22 },
                      end: { line: 25, column: 34 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0">
        <div class="csui-thumbnail-name-justify-div">
          <span class="csui-thumbnail-name-link-text binf-line-clamp">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 70 },
                      end: { line: 27, column: 78 },
                    },
                  })
                : t)
            ) +
            `</span>
        </div>
      </a>
    </div>
`
          );
        },
        14: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <div class="csui-thumbnail-name csui-thumbnail-name-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "cid") || (e != null ? s(e, "cid") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 33, column: 54 },
                      end: { line: 33, column: 61 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(15, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 34, column: 3 },
                  end: { line: 38, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '    <div class="csui-thumbnail-name-justify-div csui-thumbnail-no-default-action"  aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "nameAria") || (e != null ? s(e, "nameAria") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nameAria",
                    hash: {},
                    loc: {
                      start: { line: 39, column: 95 },
                      end: { line: 39, column: 107 },
                    },
                  })
                : n)
            ) +
            `">
      <span class="csui-thumbnail-name-value" 
            aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "nameNoOpenAria") ||
                  (e != null ? s(e, "nameNoOpenAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nameNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 24 },
                      end: { line: 41, column: 42 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 44 },
                      end: { line: 41, column: 52 },
                    },
                  })
                : n)
            ) +
            `</span>
    </div>
  </div>
`
          );
        },
        15: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-label csui-thumbnail-name-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 76 },
                      end: { line: 35, column: 85 },
                    },
                  })
                : t)
            ) +
            `">
      <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 12 },
                      end: { line: 36, column: 21 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "displayIcon") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 12, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "defaultAction") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(9, r, 0),
                inverse: i.program(14, r, 0),
                loc: {
                  start: { line: 13, column: 0 },
                  end: { line: 44, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_content_name_impl_name", h),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/name/impl/name",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/name/name.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/utils/node.links/node.links",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/content/name/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/name/impl/name",
      "css!csui/controls/thumbnail/content/name/impl/name",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = h.ItemView.extend({
        template: r,
        className: "csui-thumbnail-name-container",
        templateHelpers: function () {
          var n = this.options.column,
            s = this.model,
            o = s.get(n.name),
            c = e.getUrl(s),
            m = d.str.sformat(u.typeAndNameAria, s.get("type_name"), o);
          return {
            cid: this.model.cid,
            defaultAction: n.defaultAction,
            defaultActionUrl: c,
            contextualMenu: n.contextualMenu,
            name: o,
            nameAria: d.str.sformat(u.nameAria, o),
            nameNoOpenAria: d.str.sformat(u.nameNoOpenAria, o),
            inactive: s.get("inactive"),
            displayIcon: this.options.displayIcon,
            typeAndNameAria: m,
            displayLabel: this.options.displayLabel,
            label: this.options.displayLabel ? n.title || n.name : "",
          };
        },
        events: { keydown: "onKeyInView" },
        constructor: function (s) {
          s || (s = {}),
            (this.options = s),
            h.ItemView.prototype.constructor.apply(this, arguments),
            this.options.displayIcon &&
              this.listenTo(this, "render", this._createNodeTypeIcon)
                .listenTo(this, "before:render", this._destroyNodeTypeIcon)
                .listenTo(this, "before:destroy", this._destroyNodeTypeIcon);
        },
        onKeyInView: function (n) {
          (n.keyCode === 32 || n.keyCode === 13) &&
            (this.model.inlineFormView ||
              this.trigger("execute:defaultAction", n));
        },
        _createNodeTypeIcon: function () {
          var n = new i({ node: this.model, size: "xsmall" });
          (this.typeIconRegion = new h.Region({
            el: this.$(".csui-thumbnail-overview-icon"),
          })),
            this.typeIconRegion.show(n);
        },
        _destroyNodeTypeIcon: function () {
          this.typeIconRegion &&
            (this.typeIconRegion.empty(), (this.typeIconRegion = null));
        },
        onRender: function () {
          var n = this;
          this.$el
            .find(".csui-thumbnail-default-action")
            .on("click." + this.cid, function (s) {
              n.model.inlineFormView || n.trigger("execute:defaultAction", s);
            });
        },
      });
      return l.registerByKey("name", t), t;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/parent/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/parent/impl/nls/root/localized.strings",
    {
      ColumnTitle: "Location",
      nameAria: "{0}",
      nameNoOpenAria: "{0}. Can not be opened.",
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/parent/impl/parent",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <div class="csui-thumbnail-label csui-thumbnail-parent-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 76 },
                      end: { line: 2, column: 85 },
                    },
                  })
                : t)
            ) +
            `">
    <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 10 },
                      end: { line: 3, column: 19 },
                    },
                  })
                : t)
            ) +
            `</span>
  </div>
`
          );
        },
        3: function (i, e, l, u, r) {
          return "csui-thumbnail-parent-default-action";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 5, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            '<div class="csui-thumbnail-parent ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "defaultActionUrl") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 6, column: 34 },
                  end: { line: 6, column: 101 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
  <span class="csui-thumbnail-parent-icon"></span>
  <a href="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "defaultActionUrl") ||
                  (e != null ? s(e, "defaultActionUrl") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 11 },
                      end: { line: 8, column: 31 },
                    },
                  })
                : n)
            ) +
            '" class="csui-parent-name" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 65 },
                      end: { line: 8, column: 73 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 75 },
                      end: { line: 8, column: 83 },
                    },
                  })
                : n)
            ) +
            `</a>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_parent_impl_parent",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/parent/impl/parent",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/parent/parent.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/models/node/node.model",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/utils/node.links/node.links",
      "csui/utils/contexts/factories/next.node",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/content/parent/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/parent/impl/parent",
      "css!csui/controls/thumbnail/content/parent/impl/parent",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s) {
      "use strict";
      var o = h.ItemView.extend({
        template: s,
        className: "csui-thumbnail-parent-container",
        behaviors: { DefaultAction: { behaviorClass: r } },
        templateHelpers: function () {
          var c = this.parentModel.get("name"),
            m = l.getUrl(this.parentModel);
          return {
            label: n.ColumnTitle,
            name: c,
            defaultActionUrl: m,
            displayLabel: this.options.displayLabel,
          };
        },
        events: {
          keydown: "onKeyInView",
          "click .csui-thumbnail-parent-default-action":
            "onClickParentLocation",
        },
        constructor: function (m) {
          m || (m = {}),
            (this.options = m),
            h.ItemView.prototype.constructor.apply(this, arguments),
            this.options.displayIcon &&
              this.listenTo(this, "render", this._createNodeTypeIcon)
                .listenTo(this, "before:render", this._destroyNodeTypeIcon)
                .listenTo(this, "before:destroy", this._destroyNodeTypeIcon);
          var f = this.model.get("parent_id_expand");
          this.parentModel = new i(f, { connector: this.model.connector });
        },
        onKeyInView: function (c) {
          (c.keyCode === 32 || c.keyCode === 13) &&
            this.onClickParentLocation();
        },
        _createNodeTypeIcon: function () {
          var c = new e({ node: this.parentModel });
          (this.typeIconRegion = new h.Region({
            el: this.$(".csui-thumbnail-parent-icon"),
          })),
            this.typeIconRegion.show(c);
        },
        _destroyNodeTypeIcon: function () {
          this.typeIconRegion &&
            (this.typeIconRegion.empty(), (this.typeIconRegion = null));
        },
        onClickParentLocation: function () {
          this.triggerMethod("execute:defaultAction", this.parentModel);
        },
      });
      return t.registerByKey("parent_id", o), o;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/member/impl/member",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div class="csui-thumbnail-user csui-thumbnail-user-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 52 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : t)
            ) +
            `">
  <div class="csui-thumbnail-label csui-thumbnail-user-content-label" aria-label="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 82 },
                      end: { line: 2, column: 91 },
                    },
                  })
                : t)
            ) +
            `">
    <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 10 },
                      end: { line: 3, column: 19 },
                    },
                  })
                : t)
            ) +
            `</span>
  </div>
  <div class="csui-thumbnail-value csui-thumbnail-user-content-justify-div">
    <p class="csui-thumbnail-item-content-value" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 56 },
                      end: { line: 6, column: 65 },
                    },
                  })
                : t)
            ) +
            `"
       aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "userNoOpenAria") ||
                  (e != null ? n(e, "userNoOpenAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "userNoOpenAria",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 19 },
                      end: { line: 7, column: 37 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "value") || (e != null ? n(e, "value") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 39 },
                      end: { line: 7, column: 48 },
                    },
                  })
                : t)
            ) +
            `</p>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_member_impl_member",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/member/member.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/thumbnail/content/content.registry",
      "hbs!csui/controls/thumbnail/content/member/impl/member",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = h.ItemView.extend({
        template: l,
        className: "csui-thumbnail-user-container",
        templateHelpers: function () {
          var r = this.options.column.name,
            t = this.model.get(r + "_expand") || this.model.get(r) || "",
            n = this.options.contentModel.get("name"),
            s;
          return (
            d.isObject(t)
              ? (s = i.formatMemberName(t))
              : (s = this.model.get(r + "_formatted") || t.toString()),
            { label: n, value: s }
          );
        },
        constructor: function (t) {
          t || (t = {}),
            (this.options = t),
            h.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return (
        e.registerByDataType(14, u),
        e.registerByDataType(19, u),
        e.registerByKey("owner_id", u),
        u
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/size/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/size/impl/nls/root/localized.strings",
    {
      sizeLabel: "Size",
      ColumnTitle: "Size",
      formatForNone: "{0} items",
      formatForOne: "{0} item",
      formatForTwo: "{0} items",
      formatForFive: "{0} items",
      sizeUnavailable: "Size unavailable for {0}",
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/size/impl/size",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-label csui-thumbnail-size-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 76 },
                      end: { line: 3, column: 85 },
                    },
                  })
                : t)
            ) +
            `">
      <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 12 },
                      end: { line: 4, column: 21 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="csui-thumbnail-size csui-thumbnail-size-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "cid") || (e != null ? s(e, "cid") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 52 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 6, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-thumbnail-value csui-thumbnail-size-justify-div">
    <p class="csui-thumbnail-size-value" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 48 },
                      end: { line: 8, column: 57 },
                    },
                  })
                : n)
            ) +
            `"
       aria-label="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 19 },
                      end: { line: 9, column: 28 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "formattedValue") ||
                  (e != null ? s(e, "formattedValue") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "formattedValue",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 30 },
                      end: { line: 9, column: 48 },
                    },
                  })
                : n)
            ) +
            `</p>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_content_size_impl_size", h),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/size/impl/size",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/size/size.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/content/size/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/size/impl/size",
      "css!csui/controls/thumbnail/content/size/impl/size",
    ],
    function (v, d, a, h, i, e, l, u) {
      "use strict";
      var r = h.ItemView.extend({
        template: u,
        className: "csui-thumbnail-size-container",
        templateHelpers: function () {
          var t = this.model,
            n = this.options.column,
            s = n.name,
            o = t.get(s),
            c = t.get("type"),
            m;
          return (
            o == null && (o = m = t.get(s + "_formatted")),
            t.get("container")
              ? (o = m = c !== 899 && c !== 411 ? t.get(s + "_formatted") : "")
              : c === 144 || c === 749 || c === 736 || c === 30309
              ? ((m = i.formatFriendlyFileSize(o)),
                (o = i.formatExactFileSize(o)))
              : (o = m = t.get(s + "_formatted")),
            {
              value: o,
              formattedValue: m,
              displayLabel: this.options.displayLabel,
              label: this.options.displayLabel ? l.sizeLabel : "",
              cid: this.model.cid,
            }
          );
        },
        constructor: function (n) {
          n || (n = {}),
            h.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return e.registerByKey("size", r), r;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/date/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/date/impl/nls/root/localized.strings",
    { ColumnTitle: "Date", dateLabel: "Modified date" }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/date/impl/date",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-label csui-thumbnail-date-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 76 },
                      end: { line: 3, column: 85 },
                    },
                  })
                : t)
            ) +
            `">
      <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 12 },
                      end: { line: 4, column: 21 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="csui-thumbnail-date csui-thumbnail-date-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "cid") || (e != null ? s(e, "cid") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 52 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 6, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-thumbnail-value csui-thumbnail-date-justify-div">
    <p class="csui-thumbnail-date-value" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 48 },
                      end: { line: 8, column: 57 },
                    },
                  })
                : n)
            ) +
            `"
       aria-label="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 19 },
                      end: { line: 9, column: 28 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 30 },
                      end: { line: 9, column: 39 },
                    },
                  })
                : n)
            ) +
            `</p>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_content_date_impl_date", h),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/date/impl/date",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/date/date.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/types/date",
      "csui/controls/thumbnail/content/content.registry",
      "i18n!csui/controls/thumbnail/content/date/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/date/impl/date",
      "css!csui/controls/thumbnail/content/date/impl/date",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = d.extend({ multiValueSeparator: ", " }, v.config()),
        r = a.ItemView.extend({
          template: l,
          className: "csui-thumbnail-date-container",
          templateHelpers: function () {
            var t = this.options.column,
              n = this.model.get(t.name),
              s = t.include_time !== !1,
              o = s ? h.formatExactDateTime : h.formatExactDate,
              c = this.getSingleOrMultipleValueData(n, o, o);
            return (
              this.options.displayLabel &&
                (c.label = this.options.contentModel.get("name")
                  ? this.options.contentModel.get("name")
                  : e.dateLabel),
              (c.displayLabel = this.options.displayLabel),
              (c.cid = this.model.cid),
              c
            );
          },
          getSingleOrMultipleValueData: function (t, n, s) {
            var o, c;
            return (
              Array.isArray(t)
                ? ((o = this.concatenateTextValues(t, n)),
                  (c = this.concatenateTextValues(t, s)))
                : ((o = n(t)), (c = s(t))),
              { value: o, formattedValue: c }
            );
          },
          concatenateTextValues: function (t, n) {
            return (
              (n = this._validateFormater(n)),
              t.map(n).join(u.multiValueSeparator)
            );
          },
          _validateFormater: function (t) {
            return (
              t ||
              function (n) {
                return n;
              }
            );
          },
          constructor: function (n) {
            n || (n = {}),
              a.ItemView.prototype.constructor.apply(this, arguments);
          },
        });
      return i.registerByDataType(-7, r), r;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div
      class="csui-thumbnail-content-icon csui-thumbnail-content-no-default-action thumbnail-` +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 92 },
                      end: { line: 3, column: 99 },
                    },
                  })
                : t)
            ) +
            `"
      aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "typeAndNameAria") ||
                  (e != null ? n(e, "typeAndNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "typeAndNameAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 18 },
                      end: { line: 4, column: 37 },
                    },
                  })
                : t)
            ) +
            `" tabindex="-1"></div>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inactive") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(4, r, 0),
              inverse: i.program(6, r, 0),
              loc: {
                start: { line: 6, column: 2 },
                end: { line: 17, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `    <div class="csui-thumbnail-content-icon csui-thumbnail-content-no-default-action inactive"
         aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "typeAndNameAria") ||
                  (e != null ? n(e, "typeAndNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "typeAndNameAria",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 21 },
                      end: { line: 8, column: 40 },
                    },
                  })
                : t)
            ) +
            `"></div>
`
          );
        },
        6: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "inCreateMode") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(7, r, 0),
              inverse: i.program(9, r, 0),
              loc: {
                start: { line: 10, column: 4 },
                end: { line: 16, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `      <div class="csui-thumbnail-content-icon csui-thumbnail-content-default-action"
           aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "typeAndNameAria") ||
                  (e != null ? n(e, "typeAndNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "typeAndNameAria",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 23 },
                      end: { line: 12, column: 42 },
                    },
                  })
                : t)
            ) +
            `" tabindex="-1"></div>
`
          );
        },
        9: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <a class="csui-thumbnail-content-icon csui-thumbnail-content-default-action thumbnail-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "cid") || (e != null ? n(e, "cid") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 92 },
                      end: { line: 14, column: 99 },
                    },
                  })
                : t)
            ) +
            `"
         href="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "defaultActionUrl") ||
                  (e != null ? n(e, "defaultActionUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "defaultActionUrl",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 15 },
                      end: { line: 15, column: 35 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "typeAndNameAria") ||
                  (e != null ? n(e, "typeAndNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "typeAndNameAria",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 49 },
                      end: { line: 15, column: 68 },
                    },
                  })
                : t)
            ) +
            `" tabindex="-1"></a>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "thumbnailAction") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 18, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_thumbnail.icon_impl_thumbnail.icon",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.image",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<img class="csui-thumbnail-image" alt="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 39 },
                      end: { line: 1, column: 48 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 62 },
                      end: { line: 1, column: 71 },
                    },
                  })
                : t)
            ) +
            '" src="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "imgUrl") || (e != null ? n(e, "imgUrl") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "imgUrl",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 78 },
                      end: { line: 1, column: 88 },
                    },
                  })
                : t)
            ) +
            '" />'
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_thumbnail.icon_impl_thumbnail.image",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/thumbnail.icon/impl/nls/root/localized.strings",
    {
      typeAndNameAria: "{0} {1}",
      downloadTitle: "Download",
      hideTitle: "Hide filmstrip",
      showTitle: "Show filmstrip",
      nextTitle: "Next",
      previousTitle: "Previous",
      videoNotSupportMsg: "Your browser does not support the video tag.",
      OpenTitle: "Open",
      GalleyViewTitle: "Gallery view",
      galleryCloseButtonTooltip: "Close",
      galleryCloseButtonAria: "Close gallery view",
      rotateLeftTitle: "Rotate left",
      rotateRightTitle: "Rotate right",
      zoomInTitle: "Zoom in",
      zoomOutTitle: "Zoom out",
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <span title="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "rotateLeftTitle")
                  : t,
                e
              )
            ) +
            '" id="leftRotation"  class="csui-image-icons csui-rotate-gallery icon-rotate-left  csui-left-rotation"tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "rotateLeftTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
    <span title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "rotateRightTitle")
                  : t,
                e
              )
            ) +
            '" id="rightRotation"  class="csui-image-icons csui-rotate-gallery icon-rotate-right  csui-right-rotation"tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "rotateRightTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
    <span title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "zoomInTitle")
                  : t,
                e
              )
            ) +
            '" id="zoomInButton" class="csui-image-icons csui-zoom-gallery icon-zoom-in"tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "zoomInTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
    <span title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "zoomOutTitle")
                  : t,
                e
              )
            ) +
            '"  id="zoomOutButton" class="csui-image-icons csui-zoom-gallery icon-zoom-out"tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "lang") : e) != null
                  ? n(t, "zoomOutTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
`
          );
        },
        3: function (i, e, l, u, r) {
          return ' data-interval="false"';
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="csui-current-total-items">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "currentItem") ||
                  (e != null ? s(e, "currentItem") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "currentItem",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 38 },
                      end: { line: 1, column: 53 },
                    },
                  })
                : n)
            ) +
            " / " +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "totalItems") || (e != null ? s(e, "totalItems") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "totalItems",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 56 },
                      end: { line: 1, column: 70 },
                    },
                  })
                : n)
            ) +
            `</div>
<div class="cs-close csui-thumbcarousel-dialog-close smart-v2-icon-parent" title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "galleryCloseButtonTooltip")
                  : t,
                e
              )
            ) +
            `"
          tabindex="0" aria-label="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "galleryCloseButtonAria")
                  : t,
                e
              )
            ) +
            `" role="button">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                theme: "dark",
                states: "true",
                iconName: "csui_action_close32",
              },
              loc: {
                start: { line: 4, column: 4 },
                end: { line: 4, column: 75 },
              },
            })) != null
              ? t
              : "") +
            `
</div>
<div class="csui-active-item-name">
  <span class="item-name">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "currentItemName") ||
                  (e != null ? s(e, "currentItemName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "currentItemName",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 26 },
                      end: { line: 7, column: 45 },
                    },
                  })
                : n)
            ) +
            `</span>
  <span title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "downloadTitle")
                  : t,
                e
              )
            ) +
            `" class="icon icon-download-white csui-download-gallery"
        tabindex="0" aria-label="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "downloadTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "enableZoomAndRotation") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 10, column: 2 },
                  end: { line: 15, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
<div class="csui-carousel-container">
  <div class="csui-preview-carousal-container">
    <div id="binf-carousel" class="binf-carousel binf-slide" data-binf-ride="carousel" ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "onlyVideos") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 19, column: 87 },
                  end: { line: 19, column: 134 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
      <a class="binf-left binf-carousel-control" href="#binf-carousel" data-binf-slide="binf-prev"
         title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "previousTitle")
                  : t,
                e
              )
            ) +
            '" tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "previousTitle")
                  : t,
                e
              )
            ) +
            `">
        <span class="icon-previous-gallery" aria-hidden="true"></span>
      </a>
      <div class="csui-preview-carousal"></div>
      <a class="binf-right binf-carousel-control" href="#binf-carousel" data-binf-slide="binf-next"
         title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "nextTitle")
                  : t,
                e
              )
            ) +
            '" tabindex="0" aria-label="' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "nextTitle")
                  : t,
                e
              )
            ) +
            `">
        <span class="icon-next-gallery" aria-hidden="true"></span>
      </a>
    </div>
  </div>
  <div class="csui-carousel-film-strip">
    <div class="binf-carousel binf-slide binf-filmstrip-container" data-interval="false"></div>
    <div class="binf-left binf-carousel-control csui-thumb-toggle-control">
    <span class="binf-glyphicon binf-glyphicon-menu-down" aria-hidden="true"
          title="` +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? s(e, "lang") : e) != null
                  ? s(t, "hideTitle")
                  : t,
                e
              )
            ) +
            `"></span>
    </div>
  </div>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_thumbnail.icon_util_gallery",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "activeItem") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(18, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 106, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isVideo") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(3, r, 0),
              inverse: i.program(10, r, 0),
              loc: {
                start: { line: 3, column: 4 },
                end: { line: 53, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        3: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '      <div class="binf-item binf-active binf-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 50 },
                      end: { line: 4, column: 56 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "originalAvailable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 5, column: 8 },
                  end: { line: 22, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
`
          );
        },
        4: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `          <div class="csui-video">
            <video ` +
            ((t = n(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "streaming") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 19 },
                  end: { line: 7, column: 66 },
                },
              }
            )) != null
              ? t
              : "") +
            ` poster="" controls="controls">
              <source src="` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "contentURL") : e, e)
            ) +
            `" type='` +
            i.escapeExpression(i.lambda(e != null ? n(e, "videoType") : e, e)) +
            `'>
              ` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "videoNotSupportMsg") : e, e)
            ) +
            `
            </video>
          </div>
`
          );
        },
        5: function (i, e, l, u, r) {
          return ' preload="none"';
        },
        7: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `          <div class="csui-video">
            <video ` +
            ((t = n(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "streaming") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 14, column: 19 },
                  end: { line: 14, column: 66 },
                },
              }
            )) != null
              ? t
              : "") +
            ` poster="" controls="controls">
              <source src="` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "contentURL") : e, e)
            ) +
            `" type='` +
            i.escapeExpression(i.lambda(e != null ? n(e, "videoType") : e, e)) +
            `'>
              ` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "videoNotSupportMsg") : e, e)
            ) +
            `
            </video>
            <div class="csui-img-loader ` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "streaming") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 18, column: 40 },
                  end: { line: 18, column: 85 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
              <div class="csui-img-loader-inner"></div>
            </div>
          </div>
`
          );
        },
        8: function (i, e, l, u, r) {
          return "csui-video-streaming";
        },
        10: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '      <div class="binf-item binf-active binf-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 50 },
                      end: { line: 25, column: 56 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "originalAvailable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.program(13, r, 0),
                loc: {
                  start: { line: 26, column: 8 },
                  end: { line: 51, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
`
          );
        },
        11: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `          <div class="csui-img-box csui-gallery-original-icon">
            <img src="` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "contentURL") : e, e)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 28, column: 48 },
                      end: { line: 28, column: 56 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0">
          </div>
`
          );
        },
        13: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "thumbnailAvailable") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(14, r, 0),
              inverse: i.program(16, r, 0),
              loc: {
                start: { line: 31, column: 10 },
                end: { line: 50, column: 17 },
              },
            }
          )) != null
            ? t
            : "";
        },
        14: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `            <div class="csui-img-box csui-gallery-thumbnail-icon">
              <div>
                <img src="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "contentURL") : e, e)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 52 },
                      end: { line: 34, column: 60 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0">
                <div class="csui-img-loader ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "streaming") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 35, column: 44 },
                  end: { line: 35, column: 89 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
                  <div class="csui-img-loader-inner"></div>
                </div>
              </div>
            </div>
            <div class="csui-img-box csui-gallery-original-icon binf-hidden">
              <img src="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "contentURL") : e, e)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 50 },
                      end: { line: 41, column: 58 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0">
            </div>
`
          );
        },
        16: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `            <div class="csui-img-box csui-gallery-original-icon binf-hidden">
              <img src="` +
            i.escapeExpression(
              i.lambda(e != null ? n(e, "contentURL") : e, e)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 45, column: 50 },
                      end: { line: 45, column: 58 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0">
            </div>
            <div class="outer-border">
              <div class="loader"></div>
            </div>
`
          );
        },
        18: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isVideo") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(19, r, 0),
              inverse: i.program(21, r, 0),
              loc: {
                start: { line: 55, column: 4 },
                end: { line: 105, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        19: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '      <div class="binf-item binf-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 56, column: 38 },
                      end: { line: 56, column: 44 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "originalAvailable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(4, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 57, column: 8 },
                  end: { line: 74, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
`
          );
        },
        21: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '      <div class="binf-item binf-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 77, column: 38 },
                      end: { line: 77, column: 44 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "originalAvailable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(11, r, 0),
                inverse: i.program(13, r, 0),
                loc: {
                  start: { line: 78, column: 8 },
                  end: { line: 103, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "each").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "data") : e,
            {
              name: "each",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 107, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_thumbnail.icon_util_gallery.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/filmstrip.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "activeItem") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(2, r, 0),
              inverse: i.program(12, r, 0),
              loc: {
                start: { line: 2, column: 2 },
                end: { line: 46, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        2: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '    <div class="binf-item binf-filmstrip-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 46 },
                      end: { line: 3, column: 52 },
                    },
                  })
                : n)
            ) +
            ' binf-active" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 73 },
                      end: { line: 3, column: 81 },
                    },
                  })
                : n)
            ) +
            '" tabindex="-1"  aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 110 },
                      end: { line: 3, column: 118 },
                    },
                  })
                : n)
            ) +
            `">
      <div class="binf-thumb" data-binf-target="#binf-carousel" data-binf-slide-to= "` +
            i.escapeExpression(
              ((n =
                (n = s(l, "index") || (e != null ? s(e, "index") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "index",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 85 },
                      end: { line: 4, column: 94 },
                    },
                  })
                : n)
            ) +
            `">
        <div class="binf-thumb-caption">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 40 },
                      end: { line: 5, column: 48 },
                    },
                  })
                : n)
            ) +
            `</div>
        <div class="binf-thumb-img-container">
          <div class="binf-thumb-img ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isVideo") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 37 },
                  end: { line: 7, column: 80 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isVideo") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 8, column: 12 },
                  end: { line: 19, column: 19 },
                },
              }
            )) != null
              ? t
              : "") +
            `          </div>
        </div>
      </div>
    </div>
`
          );
        },
        3: function (i, e, l, u, r) {
          return "binf-video-container ";
        },
        5: function (i, e, l, u, r) {
          return `              <div class="binf-play-arrow-container"><span
                  class="binf-play-arrow"></span></div>
`;
        },
        7: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `              <div>
                <img ` +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "thumbnailURL") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(8, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 13, column: 21 },
                  end: { line: 13, column: 81 },
                },
              }
            )) != null
              ? t
              : "") +
            `
                    src="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "thumbnailURL") : e, e)
            ) +
            '" alt="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 53 },
                      end: { line: 14, column: 61 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "unless").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "thumbnailURL") : e,
              {
                name: "unless",
                hash: {},
                fn: i.program(10, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 15, column: 16 },
                  end: { line: 17, column: 27 },
                },
              }
            )) != null
              ? t
              : "") +
            `              </div>
`
          );
        },
        8: function (i, e, l, u, r) {
          return ' class="binf-hidden"';
        },
        10: function (i, e, l, u, r) {
          return `                <span class="csui-icon mime_image"></span>
`;
        },
        12: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '    <div class="binf-item binf-filmstrip-item-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 46 },
                      end: { line: 25, column: 52 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 61 },
                      end: { line: 25, column: 69 },
                    },
                  })
                : n)
            ) +
            '" tabindex="-1"  aria-label="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 98 },
                      end: { line: 25, column: 106 },
                    },
                  })
                : n)
            ) +
            `">
      <div class="binf-thumb" data-binf-target="#binf-carousel" data-binf-slide-to= "` +
            i.escapeExpression(
              ((n =
                (n = s(l, "index") || (e != null ? s(e, "index") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "index",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 85 },
                      end: { line: 26, column: 94 },
                    },
                  })
                : n)
            ) +
            `">
        <div class="binf-thumb-caption">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 40 },
                      end: { line: 27, column: 48 },
                    },
                  })
                : n)
            ) +
            `</div>
        <div class="binf-thumb-img-container">
          <div class="binf-thumb-img ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isVideo") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 29, column: 37 },
                  end: { line: 29, column: 80 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isVideo") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.program(7, r, 0),
                loc: {
                  start: { line: 30, column: 12 },
                  end: { line: 41, column: 19 },
                },
              }
            )) != null
              ? t
              : "") +
            `          </div>
        </div>
      </div>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "each").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "data") : e,
            {
              name: "each",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 47, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_thumbnail.icon_util_filmstrip.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/thumbnail.icon/util/gallary",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/thumbnail.icon/util/gallery.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "i18n",
      "csui/utils/base",
      "csui/utils/commonconfig.util",
      "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery",
      "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery.item",
      "hbs!csui/controls/thumbnail/content/thumbnail.icon/util/filmstrip.item",
      "css!csui/controls/thumbnail/content/thumbnail.icon/util/gallary",
      "csui/lib/jquery.touchSwipe",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t,
        n,
        s,
        o,
        c,
        m,
        f,
        g,
        w,
        b,
        C,
        k = 0,
        y,
        S = 1,
        P,
        F,
        D,
        L,
        Q,
        q;
      let G = v.config();
      d.defaults(G, {
        enableZoomAndRotation: e.enableFeatureInSmartView() || !1,
      });
      function N(me) {
        var Oe = me.galleryData,
          Ue = me.currentItemIndex,
          qe = me.lang,
          Ze = me.onlyVideos,
          hi = me.view;
        (S = 1),
          (t = Oe),
          (c = Oe.length),
          (m = Oe[Ue]),
          (f = m.name),
          (b = 0),
          (C = hi || {}),
          (F = !1),
          (D = 0),
          (L = 0),
          (Q = 0),
          (q = 0),
          (n = a("<div />", {
            class: "binf-gallery-container",
            html: l({
              enableZoomAndRotation: G.enableZoomAndRotation,
              totalItems: Oe.length,
              currentItem: m.index + 1,
              currentItemName: f,
              lang: qe,
              onlyVideos: Ze,
            }),
          })),
          (s = a("<div />", {
            class: "binf-carousel-inner",
            html: u({ data: Oe }),
          })),
          (o = a("<div />", {
            class: "csui-carousel-film-strip-inner",
            html: r({ data: Oe }),
          })),
          n.find(".csui-carousel-film-strip .binf-carousel").html(o),
          n.find(".csui-preview-carousal").html(s),
          d.each(
            Oe,
            function (gi, Vi) {
              var Si = n
                .find(".binf-item-" + gi.model.cid)
                .find(".csui-gallery-original-icon");
              gi.model.flipRight &&
                Si.find("img").css({
                  "-webkit-transform": "scaleX(-1)",
                  "-moz-transform": "scaleX(-1)",
                  "-o-transform": "scaleX(-1)",
                  transform: "scaleX(-1)",
                  filter: "FlipH",
                  "-ms-filter": "FlipH",
                }),
                Si.find("img").css({
                  "-webkit-transform":
                    "rotate(" + gi.model.transformDegrees + "deg)",
                  "-moz-transform":
                    "rotate(" + gi.model.transformDegrees + "deg)",
                  "-ms-transform":
                    "rotate(" + gi.model.transformDegrees + "deg)",
                  "-o-transform":
                    "rotate(" + gi.model.transformDegrees + "deg)",
                  transform: "rotate(" + gi.model.transformDegrees + "deg)",
                }),
                Si.find("img").attr({
                  "aria-label": qe.OpenTitle,
                  title: qe.OpenTitle,
                });
            },
            this
          ),
          t.length < 2 &&
            (n.find("#binf-carousel").children(".binf-left").hide(),
            n.find("#binf-carousel").children(".binf-right").hide()),
          (w = 74);
        var ui = w * t.length;
        a(window).width() < ui &&
          (n.find(".csui-carousel-film-strip-inner").css("width", ui + "px"),
          n
            .find(".csui-carousel-film-strip-inner")
            .addClass("csui-film-strip-adjust")),
          n.find("#binf-carousel").on("slid.binf.carousel", Le),
          n
            .find(".cs-close.csui-thumbcarousel-dialog-close")
            .on("click keydown", Re),
          n.find(".csui-thumb-toggle-control").on("click", { lang: qe }, Ke),
          n.find(".csui-download-gallery").on("click keydown", Pe),
          n
            .find(".csui-preview-carousal-container .binf-carousel-control")
            .on("keydown", $e),
          o.find(".binf-item").on("keydown", He);
        const li = n.find(".csui-gallery-original-icon>img");
        return (
          G.enableZoomAndRotation
            ? (n
                .find("#binf-carousel .binf-left")
                .on("click keydown", { lang: qe }, W),
              n
                .find("#binf-carousel .binf-right")
                .on("click keydown", { lang: qe }, W),
              n.find(".csui-rotate-gallery").on("click keydown", _e),
              n
                .find(".csui-zoom-gallery")
                .on("click keydown", { lang: qe }, fe),
              li.on("keydown", { lang: qe }, pe),
              li.on("click", { lang: qe }, H(pe, z)),
              li.on("mousewheel wheel", { lang: qe }, Z),
              li.on("pointerdown", te),
              li.on("pointerup", ge),
              li.on("pointermove", le))
            : li.on("keydown click", pe),
          i.isMSBrowser() ||
            n.find("#binf-carousel").swipe({
              swipe: function (gi, Vi, Si, zi, di, ai) {
                S === 1 &&
                  (Vi == "left" && (a(this).binf_carousel("next"), (S = 1)),
                  Vi == "right" && (a(this).binf_carousel("prev"), (S = 1)));
              },
              allowPageScroll: "vertical",
            }),
          n
        );
      }
      a(window).on("resize", function () {
        if (
          (i.isTouchBrowser() &&
            a(".csui-thumbcarousel-dialog").addClass(
              "csui-adjust-gallery-backdrop"
            ),
          !G.enableZoomAndRotation)
        )
          return;
        y = n && n.find(".csui-preview-carousal .binf-active img");
        const me = document
            .querySelector(".binf-carousel-inner .binf-active")
            ?.getBoundingClientRect(),
          Oe = document
            .querySelector(".binf-active .csui-img-box img")
            ?.getBoundingClientRect();
        if (!y || !me || !Oe) return;
        let Ue = y.css("transform"),
          qe,
          Ze;
        if (Ue && Ue != "" && Ue.search("matrix") != -1) {
          const li = Ue.replace("matrix(", "").replace(")", "").split(",");
          (qe = parseFloat(li[4])), (Ze = parseFloat(li[5]));
        }
        const hi = (Oe.height - me.height) / 2,
          ui = (Oe.width - me.width) / 2;
        hi > 0 &&
          parseInt(Math.abs(Ze)) >= parseInt(hi) &&
          (Ze = Ze < 0 ? hi * -1 : hi),
          hi < 0 && (Ze = 0),
          ui > 0 &&
            parseInt(Math.abs(qe)) >= parseInt(ui) &&
            (qe = qe < 0 ? ui * -1 : ui),
          ui < 0 && (qe = 0),
          a(y).css(
            "transform",
            `translateX(${qe}px) translateY(${Ze}px) scale(${S})`
          );
      });
      function W(me) {
        if (
          (me.type === "keydown" && me.keyCode === 13) ||
          me.type === "click"
        ) {
          if (((y = n.find(".csui-preview-carousal .binf-active img")), !y))
            return;
          y.attr({
            "aria-label": me.data.lang.OpenTitle,
            title: me.data.lang.OpenTitle,
          }),
            a(y).css("transform-origin", "center"),
            a(y).css("transform", ""),
            a(y).css("aspect-ratio", "auto");
        }
      }
      function H(me, Oe) {
        return (function () {
          let Ue = !1,
            qe;
          return function (Ze) {
            Ue
              ? ((Ue = !1), qe && clearTimeout(qe), Oe && Oe(Ze))
              : ((Ue = !0),
                (qe = setTimeout(function () {
                  (Ue = !1), me && me(Ze);
                }, 300)));
          };
        })();
      }
      function z(me) {
        if (((y = n.find(".csui-preview-carousal .binf-active img")), !y))
          return;
        const Oe = document.querySelector("#zoomOutButton"),
          Ue = document.querySelector("#zoomInButton");
        S >= 3
          ? ((S = 1),
            ae(Oe),
            ie(Ue),
            y.attr({
              "aria-label": me.data.OpenTitle || me.data.lang.OpenTitle,
              title: me.data.OpenTitle || me.data.lang.OpenTitle,
            }),
            (P = "pointer"))
          : ((S = 3),
            ae(Ue),
            ie(Oe),
            y.removeAttr("aria-label title"),
            (P = "move")),
          (k = 0),
          a(y).css("aspect-ratio", "auto"),
          a(y).css({ transform: "scale(" + S + ")", cursor: P });
      }
      function Z(me) {
        if (((y = n.find(".csui-preview-carousal .binf-active img")), !y))
          return;
        me.preventDefault();
        const Oe = document.querySelector("#zoomOutButton"),
          Ue = document.querySelector("#zoomInButton");
        if (me.originalEvent.wheelDelta > 0) {
          if (S >= 3) return !1;
          ie(Oe),
            y.removeAttr("aria-label title"),
            (S += 0.1),
            S >= 3 && ae(Ue),
            (P = "move");
        } else {
          if (S <= 1) return !1;
          ie(Ue),
            (S = Math.max(S - 0.1, 1)),
            S <= 1 &&
              ((P = "pointer"),
              ae(Oe),
              y.attr({
                "aria-label": me.data.lang.OpenTitle,
                title: me.data.lang.OpenTitle,
              }));
        }
        (k = 0),
          a(y).css("aspect-ratio", "auto"),
          a(y).css({ transform: "scale(" + S + ")", cursor: P });
      }
      function te(me) {
        F = !0;
      }
      function le(me) {
        if (
          (me.preventDefault(),
          !F || ((y = n.find(".csui-preview-carousal .binf-active img")), !y))
        )
          return;
        let Ue = a(
            ".csui-preview-carousal .binf-item.binf-active .csui-img-box"
          ).offset(),
          qe = Ue.left,
          Ze = Ue.top;
        (D = me.clientX - qe),
          (L = me.clientY - Ze),
          a(y).css("transform-origin", `${D}px ${L}px`),
          a(y).css("transform", `scale${S}`);
      }
      function ge(me) {
        me.preventDefault(), (F = !1);
      }
      function Pe(me) {
        ((me.type === "keydown" && (me.keyCode === 13 || me.keyCode === 32)) ||
          me.type === "click") &&
          m.downloadItem(me);
      }
      function _e(me) {
        if (((y = n.find(".csui-preview-carousal .binf-active img")), !y))
          return;
        let Oe = a(
          ".csui-preview-carousal .binf-item.binf-active .csui-img-box"
        );
        if (
          (me.type === "keydown" && (me.keyCode === 13 || me.keyCode === 32)) ||
          me.type === "click"
        ) {
          S = 1;
          const Ue = document.querySelector("#zoomOutButton"),
            qe = document.querySelector("#zoomInButton");
          ae(Ue),
            ie(qe),
            a(y).css("transform-origin", "center"),
            a(y).css("transform", "scale 1"),
            me.target.id == "leftRotation"
              ? (k = k - 90)
              : (k = (k + 90) % 360),
            k % 90 === 0 && k % 180 != 0
              ? y.width() > Oe.height() && a(y).css({ "aspect-ratio": "1" })
              : a(y).css({ "aspect-ratio": "auto" }),
            a(y).css({ transform: `rotate(${k}deg)` });
        }
      }
      function ie(me) {
        me.classList.remove("inactive"), (me.tabIndex = 0);
      }
      function ae(me) {
        me.classList.add("inactive"), (me.tabIndex = -1);
      }
      function fe(me) {
        if (
          ((y = n.find(".csui-preview-carousal .binf-active img")),
          !!y &&
            ((me.type === "keydown" &&
              (me.keyCode === 13 || me.keyCode === 32)) ||
              me.type === "click"))
        ) {
          const Oe = document.querySelector("#zoomOutButton"),
            Ue = document.querySelector("#zoomInButton");
          if (me.target.id == "zoomOutButton") {
            if (S <= 1) return !1;
            ie(Ue),
              (S -= 0.1),
              S <= 1 &&
                ((P = "pointer"),
                ae(Oe),
                y.attr({
                  "aria-label": me.data.lang.OpenTitle,
                  title: me.data.lang.OpenTitle,
                }));
          } else {
            if (S >= 3) return !1;
            ie(Oe),
              y.removeAttr("aria-label title"),
              (S += 0.1),
              S >= 3 && ae(Ue),
              (P = "move");
          }
          (k = 0),
            a(y).css("aspect-ratio", "auto"),
            a(y).css({ transform: "scale(" + S + ")", cursor: P });
        }
      }
      function pe(me) {
        ((me.type === "keydown" && (me.keyCode === 13 || me.keyCode === 32)) ||
          me.type === "click") &&
          (S > 1
            ? me.type === "keydown" && z({ data: me.data.lang })
            : (C && (C.model = m.model), m.executeDefaultAction(me)));
      }
      function ke(me) {
        const Oe = me.keyCode;
        if (Oe >= 37 && Oe <= 40) {
          if (S === 1) return;
          me.preventDefault(), me.stopPropagation();
          let Ue = 0,
            qe = 0,
            Ze = y.width(),
            hi = y.height();
          const ui = document
              .querySelectorAll(".binf-carousel-inner .binf-active")[0]
              .getBoundingClientRect(),
            li = document
              .querySelectorAll(".binf-active .csui-img-box img")[0]
              .getBoundingClientRect(),
            gi = ui.left - li.left,
            Vi = ui.right - li.right,
            Si = ui.top - li.top,
            zi = ui.bottom - li.bottom;
          let di,
            ai,
            ji = y.css("transform"),
            Ai = !1,
            Ui = !1;
          if (ji && ji != "" && ji.search("matrix") != -1) {
            let bi, Fi;
            (Fi = ji.replace("matrix(", "").replace(")", "").split(",")),
              (bi = Fi[3]),
              (di = parseFloat(Fi[4])),
              (ai = parseFloat(Fi[5])),
              (Ze = bi * Ze),
              (hi = bi * hi);
          }
          switch (Oe) {
            case 37: {
              Ue = 50;
              const bi = gi + di;
              di = gi > Ue ? di + Ue : bi <= 0 ? 0 : bi;
              break;
            }
            case 39: {
              Ue = -50;
              const bi = Vi + di;
              di = Vi < Ue ? di + Ue : bi < 0 ? bi : 0;
              break;
            }
            case 38: {
              qe = 50;
              const bi = Si + ai;
              ai = Si > qe ? ai + qe : bi <= 0 ? 0 : bi;
              break;
            }
            case 40: {
              qe = -50;
              const bi = zi + ai;
              ai = zi < qe ? ai + qe : bi < 0 ? bi : 0;
              break;
            }
          }
          (Oe === 37 && gi <= Ue) || (Oe === 39 && Vi >= Ue)
            ? (Ai = !0)
            : ((Oe === 38 && Si <= qe) || (Oe === 40 && zi >= qe)) && (Ui = !0),
            di === 0 && Ai && li.width > ui.width && (di = Q),
            ai === 0 && Ui && li.height > ui.height && (ai = q),
            (Q = di),
            (q = ai),
            a(y).css(
              "transform",
              `translateX(${di}px) translateY(${ai}px) scale(${
                Ze / y.width()
              },${hi / y.height()})`
            );
        }
      }
      function Re(me) {
        ((me.type === "keydown" && (me.keyCode === 13 || me.keyCode === 32)) ||
          me.type === "click") &&
          m.closeDialog(me);
      }
      function Le(me, Oe) {
        const Ue = n[0].querySelector(
            ".binf-widgets .csui-active-item-name .item-name"
          ),
          qe = n[0].querySelectorAll(".csui-image-icons");
        var Ze;
        me.type === "click" || me.type === "keyup"
          ? (Ze = Oe)
          : (Ze = me.relatedTarget),
          (w =
            a(
              n.find(".csui-carousel-film-strip-inner .binf-thumb-img")[0]
            ).width() + 10),
          (g = n
            .find(".csui-carousel-film-strip-inner")
            .find(".binf-item")
            .removeClass("binf-active"));
        var hi = a(g[a(Ze).index()]);
        hi.addClass("binf-active"),
          m &&
            m.index >= 0 &&
            ((m = t[a(Ze).index()]),
            (y = n.find(".csui-preview-carousal .binf-active img")),
            m?.isVideo ||
              ((S = 1),
              (k = 0),
              a(y).css({ cursor: "pointer" }),
              y.on("keydown", ke),
              G.enableZoomAndRotation &&
                y.on("load", { iconsList: qe, itemName: Ue }, De),
              n.find(".binf-item img:not(.binf-hidden)").css("transform", "")),
            !m.model.contentFetched || m?.isVideo
              ? (qe.forEach(function (ui) {
                  ui.classList.remove("csui-icons-display"),
                    ui.classList.add("binf-hidden");
                }),
                Ue.classList.remove("csui-icons-display-item-name"))
              : y.trigger("load"),
            t[m.index].model &&
              t[m.index].model.contentURL &&
              !t[m.index].model.addedOriginalImage &&
              (a(Ze).addClass("csui-item-original"),
              (t[m.index].addedOriginalImage = !0),
              a(Ze).find("img").length > 0 &&
                a(Ze).find("img").attr("src", t[m.index].model.contentURL),
              a(Ze).find("video").length > 0 &&
                (a(Ze).find("video").attr("src", t[m.index].model.contentURL),
                a(Ze).find(".outer-border").addClass("binf-hidden"))),
            a(this).find("video").trigger("pause"),
            (f = m.name),
            n.find(".csui-current-total-items").html(m.index + 1 + " / " + c),
            n.find(".csui-active-item-name .item-name").html(f),
            m.updateScroll(hi, m));
      }
      function De(me) {
        me.data.iconsList.forEach(function (qe) {
          qe.classList.add("csui-icons-display"),
            qe.classList.remove("binf-hidden");
        }),
          me.data.itemName.classList.add("csui-icons-display-item-name");
        const Oe = document.querySelector("#zoomOutButton"),
          Ue = document.querySelector("#zoomInButton");
        ae(Oe), ie(Ue);
      }
      function Ke(me) {
        n.find(".csui-carousel-film-strip .binf-carousel").slideToggle(),
          n
            .find(".binf-glyphicon-menu-down")
            .toggleClass("binf-glyphicon-menu-up"),
          n.find(".binf-glyphicon-menu-up").length > 0
            ? n
                .find(".binf-glyphicon-menu-up")
                .attr("title", me.data.lang.showTitle)
            : n
                .find(".binf-glyphicon-menu-down")
                .attr("title", me.data.lang.hideTitle);
      }
      function $e(me) {
        me.type === "keydown" &&
          me.keyCode === 32 &&
          a(me.currentTarget).trigger("click"),
          me.type === "keydown" &&
            me.keyCode === 9 &&
            !me.shiftKey &&
            a(o.find(".binf-item")[0]).attr("tabindex", 0),
          (b = 0);
      }
      function He(me) {
        var Oe = o.find(".binf-item");
        switch (me.keyCode) {
          case 9:
            me.shiftKey
              ? a(Oe[0]).attr("tabindex", -1)
              : (n
                  .parents(".binf-modal-content")
                  .find(".cs-close")
                  .trigger("focus"),
                me.preventDefault(),
                me.stopPropagation());
            break;
          case 13:
          case 32:
            a(me.currentTarget) &&
              a(me.currentTarget).find(".binf-thumb").trigger("click");
            break;
          case 39:
            b < Oe.length - 1 && ++b, a(Oe[b]).trigger("focus");
            break;
          case 37:
            b > 0 && --b, a(Oe[b]).trigger("focus");
            break;
        }
        b = b;
      }
      return {
        createGalleryContainer: N,
        updateSlide: Le,
        thumbToggle: Ke,
        downloadItem: Pe,
        rotateItem: _e,
        zoomItem: fe,
        executeDefaultAction: pe,
      };
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/models/nodes",
      "csui/controls/thumbnail/content/thumbnail.icon/util/gallery.view",
      "i18n!csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings",
      "csui/controls/dialog/dialog.view",
      "csui/utils/log",
      "csui/utils/commands/download",
      "csui/utils/taskqueue",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/lib/exif",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      r = r(v.id);
      var c,
        m = v.config();
      d.defaults(m, { parallelism: 3, streaming: !1 });
      var f = !1,
        g = h.ItemView.extend({
          className: "gallery-container",
          template: !1,
          constructor: function (C) {
            C.data || (C.data = {}),
              h.ItemView.prototype.constructor.call(this, C),
              (m.streaming = m.streaming || this.options.streaming);
          },
          resetDisableMultipleClicks: function () {
            f = !1;
          },
          onRender: function () {
            var b = this,
              C = this.options.thumbNailCollection,
              k = [],
              y = 0;
            (this.model = this.options.model),
              (this.imageCount = 0),
              this.fetchGalleryImageURL(C),
              this.getThumbnailContentUrl(C),
              (b.thumbNailCollection = C),
              d.each(
                C,
                function (q, G) {
                  var N;
                  (m.streaming && q.contentURL) || q.contentFetched
                    ? (N = !0)
                    : (N = !1);
                  var W = {
                    name: q.get("name"),
                    contentURL: q.contentURL
                      ? q.contentURL
                      : q.thumbnail
                      ? q.thumbnail.imgUrl
                      : "",
                    thumbnailURL:
                      q.thumbnail && q.thumbnail.imgUrl
                        ? q.thumbnail.imgUrl
                        : q.contentURL
                        ? q.contentURL
                        : "",
                    id: q.cid,
                    index: G,
                    activeItem: q.get("id") === b.model.get("id"),
                    downloadItem: b.downloadItem.bind(null, q),
                    executeDefaultAction: b.executeDefaultAction.bind(null, b),
                    updateScroll: b.updateScroll.bind(null, b),
                    isVideo: q.get("mime_type").match(/^video\/*[-.\w\s]*$/g),
                    videoType: q.get("mime_type"),
                    model: q,
                    videoNotSupportMsg: l.videoNotSupportMsg,
                    originalAvailable: N,
                    thumbnailAvailable: !!(q.thumbnail && q.thumbnail.imgUrl),
                    streaming: m.streaming,
                    closeDialog: b.closeDialog.bind(null, b),
                  };
                  q.get("id") === b.model.get("id") && (y = G), k.push(W);
                },
                b
              );
            var S = e.createGalleryContainer({
                galleryData: k,
                currentItemIndex: y,
                lang: l,
                view: this,
                onlyVideos: b.imageCount === 0,
              }),
              P = new w({ el: S[0] }),
              F = new u({
                title: "",
                headerView: "",
                view: P,
                className:
                  "csui-thumbcarousel-dialog " +
                  (b.options.customStyle ? b.options.customStyle : ""),
                userClassName: "",
                fullSize: !0,
              });
            if (!f) F.show(), (f = !0);
            else
              return (
                b.options.originatingView &&
                  b.options.originatingView.blockingView &&
                  b.options.originatingView.blockingView.disable(),
                !1
              );
            var D = d.uniqueId("dialogLabelId"),
              L = F.headerView.$el.find(".binf-modal-title");
            L &&
              (L.attr("id", D),
              L.html(l.GalleyViewTitle),
              F.headerView.$el.attr("aria-labelledby", D)),
              F.headerView.$el
                .find(".cs-icon-cross")
                .removeClass("cs-icon-cross")
                .addClass("icon-close-gallery"),
              F.$el
                .find(".cs-close")
                .on("keydown click", d.bind(this.handleShiftKey, this)),
              b.options.originatingView &&
                b.options.originatingView.blockingView &&
                b.options.originatingView.blockingView.disable(),
              (b.galleryView = P),
              (b.dialogView = F),
              b.dialogView.on(
                "destroy",
                d.bind(this.resetDisableMultipleClicks, this)
              );
            var Q = S.find(".csui-preview-carousal .binf-active");
            setTimeout(function () {
              e.updateSlide(b.options.event, Q);
            }, 200);
          },
          handleShiftKey: function (b) {
            var C = b.shiftKey;
            if (b.shiftKey && b.keyCode === 9) {
              var k =
                this.thumbNailCollection[this.thumbNailCollection.length - 1]
                  .cid;
              setTimeout(function () {
                a(".binf-filmstrip-item-" + k).trigger("focus");
              }, 200);
            }
            f = !1;
          },
          downloadItem: function (b, C) {
            new t().execute({ nodes: new i([b]) });
          },
          closeDialog: function (b, C) {
            b.dialogView.triggerMethod("click:close", C);
          },
          executeDefaultAction: function (b) {
            b.listenTo(
              b.options.originatingView,
              "destroy:gallery",
              function () {
                b.dialogView.$el.find(".cs-close").click();
              }
            ),
              b?.options?.originatingView?.thumbnail?.trigger(
                "execute:defaultAction",
                b.model
              );
          },
          updateScroll: function (b, C, k) {
            (c = b.galleryView),
              k.model.contentFetching || b._fetchImageOpenURL(k.model),
              b.galleryView.updateScrollbar(C);
          },
          getThumbnailContentUrl: function (b) {
            d.each(b, function (C) {
              if (
                C.get("type") === 144 &&
                C.get("mime_type").match(/^video\/!*[-.\w\s]*$/g)
              )
                if (
                  (C.thumbnail || (C.thumbnail = new s({ node: C })),
                  m.streaming)
                ) {
                  var y = C.thumbnail.getPhotOptions(C);
                  C.contentURL = y.url;
                } else if (C.contentURL) C.addedOriginalImage = !1;
                else {
                  var k = C.thumbnail.getPhotOptions(C);
                  C.contentURL = k.url;
                }
              C.get("mime_type") &&
                C.get("mime_type").match(/^image\/*[-.\w\s]*$/g) &&
                (self.imageCount = self.imageCount + 1);
            });
          },
          fetchGalleryImageURL: function (b) {
            if (m.streaming) {
              var C = this,
                k = new n({ parallelism: m.parallelism }),
                y = d.map(b, function (S) {
                  var P = a.Deferred();
                  return (
                    S.contentURL ||
                      k.pending.add({
                        worker: function () {
                          return (
                            C._fetchImageOpenURL(S)
                              .done(function (F) {
                                P.resolve(F);
                              })
                              .fail(function (F) {
                                P.reject(F);
                              }),
                            P.promise()
                          );
                        },
                      }),
                    P.promise(y)
                  );
                });
              return a.whenAll.apply(a, y);
            }
          },
          _fetchImageOpenURL: function (b) {
            var C = this,
              k = a.Deferred();
            b.thumbnail || (b.thumbnail = new s({ node: b }));
            var y = b.thumbnail.getPhotOptions(b);
            return (
              b.get("type") === 144 &&
                (m.streaming
                  ? m.streaming &&
                    !b.get("mime_type").match(/^video\/!*[-.\w\s]*$/g) &&
                    b.connector
                      .makeAjaxCall(y)
                      .done(
                        d.bind(function (S, P, F) {
                          (b.contentURL = b.thumbnail.getContentUrl(S)),
                            (b.addedOriginalImage = !0),
                            C.displayGalleryItems(b, S),
                            k.resolve();
                        }, this)
                      )
                      .fail(
                        d.bind(function (S, P, F) {
                          (b.contentURL =
                            b.thumbnail && b.thumbnail.defaultImgUrl),
                            (b.addedOriginalImage = !1),
                            C.displayGalleryItems(b, void 0),
                            k.reject(F);
                        }, this)
                      )
                  : ((b.contentFetching = !0),
                    b.connector
                      .makeAjaxCall(y)
                      .done(
                        d.bind(function (S, P, F) {
                          (b.contentURL = b.thumbnail.getContentUrl(S)),
                            (b.addedOriginalImage = !0),
                            (b.contentFetched = !0),
                            C.displayGalleryItems(b, S),
                            k.resolve();
                        }, this)
                      )
                      .fail(
                        d.bind(function (S, P, F) {
                          (b.contentURL =
                            b.thumbnail && b.thumbnail.defaultImgUrl),
                            (b.addedOriginalImage = !1),
                            C.displayGalleryItems(b, void 0),
                            k.reject(F);
                        }, this)
                      ))),
              k.promise()
            );
          },
          displayGalleryItems: function (b, C) {
            let k = this;
            if (b.get("mime_type").match(/^video\/!*[-.\w\s]*$/g)) {
              var y = c && c.$el.find(".binf-item-" + b.cid).find("video");
              y.length > 0 &&
                (y.attr("src", b.contentURL),
                c.$el
                  .find(".binf-item-" + b.cid)
                  .addClass("csui-item-original"),
                c.$el
                  .find(".binf-item-" + b.cid + " .csui-img-loader")
                  .addClass("binf-hidden"));
            } else {
              var S = c && c.$el.find(".binf-item-" + b.cid),
                P = S.find(".csui-gallery-thumbnail-icon"),
                F = S.find(".csui-gallery-original-icon");
              P.length > 0
                ? P.addClass("binf-hidden")
                : c.$el
                    .find(".binf-item-" + b.cid + " .outer-border")
                    .addClass("binf-hidden"),
                F.find("img").attr("src", b.contentURL),
                F.find("img").addClass("csui-item-original"),
                F.removeClass("binf-hidden");
              var D = c && c.$el.find(".binf-filmstrip-item-" + b.cid);
              (!D.find("img").attr("src") ||
                (D.find("img").attr("src") &&
                  D.find("img").hasClass("binf-hidden"))) &&
                (D.find("img")
                  .attr("src", b.contentURL)
                  .removeClass("binf-hidden"),
                D.find(".mime_image").addClass("binf-hidden"));
            }
          },
        }),
        w = h.View.extend({
          constructor: function (C) {
            h.View.prototype.constructor.apply(this, arguments);
          },
          updateScrollbar: function (b) {
            var C = this.$el.find(".binf-filmstrip-container"),
              k = C.scrollLeft(),
              y;
            b.offset().left + b.width() >= C.width()
              ? (y = b.offset().left - C.width() + k + b.width() + 20)
              : b.offset().left <= 0 && (y = b.offset().left + k - 5),
              C.animate({ scrollLeft: y }, "fast");
          },
        });
      return g;
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/utils/node.links/node.links",
      "hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",
      "hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.image",
      "i18n!csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings",
      "csui/controls/thumbnail/content/content.registry",
      "csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/utils/url",
      "csui/lib/exif",
      "css!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f) {
      "use strict";
      var g = v.config();
      d.defaults(g, { parallelism: 3, streaming: !1 });
      var w = i.LayoutView.extend({
          className: "csui-thumbnail-icon-view",
          ui: {
            thumbnailIcon: ".csui-thumbnail-content-icon",
            iconcloseGallery: ".icon-close-gallery",
          },
          events: {
            keydown: "onKeyInView",
            "keydown click @ui.iconcloseGallery": "handleShiftKey",
            "click @ui.thumbnailIcon": "showThumbCarousel",
            "keyup @ui.thumbnailIcon": "showGalleryView",
          },
          template: r,
          regions: { imageRegion: ".csui-thumbnail-content-icon" },
          templateHelpers: function () {
            var C = this.model,
              k =
                (this.model.get("mime_type") &&
                  this.model
                    .get("mime_type")
                    .match(/^image|video\/*[-.\w\s]*$/g)) ||
                this.model.get("type") === 144,
              y = u.getUrl(this.model),
              S = d.str.sformat(
                n.typeAndNameAria,
                C.get("type_name"),
                C.get("name")
              );
            return {
              thumbnailAction: k,
              cid: (this.model && this.model.cid) || this.options.model.cid,
              defaultActionUrl: y,
              typeAndNameAria: S,
              inactive: C.get("inactive"),
              inCreateMode: !this.model.get("id"),
            };
          },
          constructor: function (k) {
            i.LayoutView.prototype.constructor.apply(this, arguments),
              (this.thumbnailObj = new c({ node: this.model })),
              this.listenTo(this.thumbnailObj, "loadUrl", this.render),
              (this.showingCarousel = !1);
          },
          onRender: function () {
            var C = this.options.originatingView;
            if (
              (C.getPreference &&
                C.getPreference("tableMode") === "thumbnail") ||
              !C.getPreference ||
              !C.container.get("persist")
            ) {
              if (this.thumbnailObj.available()) {
                var k =
                    this.thumbnailObj.imgUrl ||
                    (this.thumbnailObj.node &&
                      this.thumbnailObj.node.get("csuiThumbnailImageUrl")),
                  y;
                if (g.streaming && k) {
                  if (
                    !this.thumbnailObj.node
                      .get("mime_type")
                      .match(/^video\/*[-.\w\s]*$/g)
                  ) {
                    (y = new b({ model: this.model })),
                      this.imageRegion.show(y);
                    return;
                  }
                } else if (k) {
                  (y = new b({ model: this.model })), this.imageRegion.show(y);
                  return;
                } else this.thumbnailObj.loadUrl();
              }
              var S = new l({ node: this.model, size: "contain" });
              this.imageRegion.show(S);
            }
          },
          showGalleryView: function (C) {
            (C.keyCode === 13 || C.keyCode === 32) && this.showThumbCarousel(C);
          },
          showThumbCarousel: function (C) {
            if (!this.showingCarousel) {
              this.showingCarousel = !0;
              var k = this,
                y = !1;
              if (
                (e.isSafari() || e.isMSBrowser() || e.isAppleMobile()
                  ? (y =
                      this.model.get("mime_type") &&
                      (this.model
                        .get("mime_type")
                        .match(/^image\/*[-.\w\s]*$/g) ||
                        this.model
                          .get("mime_type")
                          .match(/^video\/(mp4|mov|quicktime)$/g)))
                  : (y =
                      this.model.get("mime_type") &&
                      (this.model
                        .get("mime_type")
                        .match(/^image\/*[-.\w\s]*$/g) ||
                        this.model
                          .get("mime_type")
                          .match(/^video\/(mp4|webm|ogg|mov|quicktime)$/g))),
                y && y.length > 0)
              ) {
                this.options.originatingView.blockingView.enable();
                var S = d.filter(
                    k.model.collection.models,
                    function (F) {
                      return e.isSafari() ||
                        e.isMSBrowser() ||
                        e.isAppleMobile()
                        ? F.get("mime_type") &&
                            (F.get("mime_type").match(/^image\/*[-.\w\s]*$/g) ||
                              F.get("mime_type").match(
                                /^video\/(mp4|mov|quicktime)$/g
                              ))
                        : F.get("mime_type") &&
                            (F.get("mime_type").match(/^image\/*[-.\w\s]*$/g) ||
                              F.get("mime_type").match(
                                /^video\/(mp4|webm|ogg|mov|quicktime)$/g
                              ));
                    },
                    this
                  ),
                  P = new o({
                    thumbNailCollection: S,
                    model: k.model,
                    originatingView: k.options.originatingView,
                    event: C,
                    streaming: g.streaming,
                  });
                P.render(),
                  setTimeout(function () {
                    k.showingCarousel = !1;
                  }, 250);
              } else
                !this.model.get("inactive") &&
                  this.model.get("id") &&
                  ((this.showingCarousel = !1),
                  this.trigger("execute:defaultAction", C));
            }
          },
          onKeyInView: function (C) {
            (C.keyCode === 13 || C.keyCode === 32) &&
              this.$el
                .find("a.csui-thumbnail-content-default-action")
                .trigger("click");
          },
        }),
        b = i.ItemView.extend({
          templateHelpers: function () {
            var C = this.model.get("description");
            return {
              imgUrl: this.model.get("csuiThumbnailImageUrl"),
              title: C || this.model.get("name"),
            };
          },
          template: t,
          constructor: function C(k) {
            k || (k = {}), C.__super__.constructor.call(this, k);
          },
        });
      return s.registerByKey("thumbnailIcon", w), w;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/overview/overview.content",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui-ext!csui/controls/thumbnail/content/overview/overview.content",
    ],
    function (v, d, a) {
      var h = d.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        i = d.Collection.extend({
          model: h,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new i(
              this.map(function (r) {
                return r.attributes;
              })
            );
          },
        }),
        e = [
          { key: "type", sequence: 2, defaultAction: !1 },
          { key: "properties", title: "properties", sequence: 7 },
          { key: "reserved", sequence: 100, title: "State" },
        ],
        l = ["type", "properties", "reserved", "wnd_comments"];
      a &&
        v.each(a, function (r) {
          v.each(r, function (t, n) {
            e.push(t);
          });
        });
      var u = new i(e);
      return (u.fixedOrRemovedOverviewContent = l), u;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/impl/content",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-label csui-thumbnail-item-content-label" aria-label="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 84 },
                      end: { line: 3, column: 93 },
                    },
                  })
                : t)
            ) +
            `">
      <span>` +
            i.escapeExpression(
              ((t =
                (t = n(l, "label") || (e != null ? n(e, "label") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 12 },
                      end: { line: 4, column: 21 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="csui-thumbnail-item-content csui-thumbnail-item-content-' +
            i.escapeExpression(
              ((n =
                (n = s(l, "cid") || (e != null ? s(e, "cid") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "cid",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 68 },
                      end: { line: 1, column: 75 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "displayLabel") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 6, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-thumbnail-value csui-thumbnail-item-content-justify-div">
    <p class="csui-thumbnail-item-content-value" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 56 },
                      end: { line: 8, column: 65 },
                    },
                  })
                : n)
            ) +
            `"
       aria-label="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 19 },
                      end: { line: 9, column: 28 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "value") || (e != null ? s(e, "value") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "value",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 30 },
                      end: { line: 9, column: 39 },
                    },
                  })
                : n)
            ) +
            `</p>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_content_impl_content", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/content.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!csui/controls/thumbnail/content/impl/content",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = h.ItemView.extend({
        template: i,
        className: "csui-thumbnail-content-item",
        templateHelpers: function () {
          var l = this.options.contentModel,
            u = l.get("name"),
            r = l.get("key"),
            t = this.model.get(r);
          return {
            value: t,
            displayLabel: this.options.displayLabel,
            label: this.options.displayLabel ? u : "",
            cid: this.model.cid,
          };
        },
        constructor: function (u) {
          u || (u = {}),
            h.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return e;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/properties/impl/properties",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="csui-thumbnail-properties">
  <button type="button" class="csui-btn-metadata binf-btn" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "propertiesTitle") ||
                  (e != null ? s(e, "propertiesTitle") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "propertiesTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 66 },
                      end: { line: 2, column: 85 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: { states: "true", iconName: "csui_action_properties32" },
              loc: {
                start: { line: 3, column: 4 },
                end: { line: 3, column: 68 },
              },
            })) != null
              ? t
              : "") +
            `
  </button>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_properties_impl_properties",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/properties/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/properties/impl/nls/root/localized.strings",
    { propertiesTitle: "Properties" }
  ),
  csui.define(
    "csui/controls/thumbnail/content/properties/properties.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/thumbnail/content/content.registry",
      "csui/utils/commands/properties",
      "csui/models/nodes",
      "csui/controls/icons.v2",
      "hbs!csui/controls/thumbnail/content/properties/impl/properties",
      "i18n!csui/controls/thumbnail/content/properties/impl/nls/localized.strings",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = a.LayoutView.extend({
        template: u,
        templateHelpers: function () {
          return { propertiesTitle: r.propertiesTitle };
        },
        className: "csui-thumbnail-properties-container",
        regions: { propertiesRegion: ".csui-thumbnail-properties" },
        ui: { propertiesButton: ".csui-btn-metadata" },
        events: {
          "click @ui.propertiesButton": "showMetadataForm",
          keydown: "onKeyInView",
        },
        onKeyInView: function (n) {
          if (n.keyCode === 27) {
            n.preventDefault(), n.stopPropagation();
            var s = this.$el.parents(".binf-popover");
            s.trigger("close:popover");
          }
        },
        constructor: function (s) {
          s || (s = {}), a.LayoutView.prototype.constructor.call(this, s);
        },
        showMetadataForm: function (n) {
          if (!this.ui.propertiesButton.hasClass("binf-disabled")) {
            var s = new e([this.model]),
              o = {
                nodes: s,
                data: {},
                container: this.options.collection.node,
                context: this.options.context,
                collection: this.options.collection,
                showThumbnails: !0,
              },
              c = this;
            this.ui.propertiesButton.addClass("binf-disabled"),
              (o = d.extend(o, {
                originatingView: this.options.originatingView,
              }));
            var m = new i();
            m.execute(o, this.options).always(function (f) {
              c.ui.propertiesButton.removeClass("binf-disabled"),
                v("body").addClass("csui-apply-zero-zindex");
            }),
              v("body").removeClass("csui-apply-zero-zindex");
          }
        },
        cancel: function (n) {
          n || (n = {}), this.destroy();
        },
      });
      return h.registerByKey("properties", t), t;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/overview/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/thumbnail/content/overview/impl/nls/root/localized.strings",
    {
      ColumnTitle: "Metadata",
      Modified: "Modified",
      Size: "Size",
      columnTitleLocation: "Location",
      overviewTitle: "General properties",
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/overview/impl/properties.overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '      <div class="csui-thumbnail-properties csui-thumbnail-overview-' +
            i.escapeExpression(
              ((t =
                (t = n(l, "index") || (r && n(r, "index"))) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "index",
                    hash: {},
                    data: r,
                    loc: {
                      start: { line: 5, column: 68 },
                      end: { line: 5, column: 78 },
                    },
                  })
                : t)
            ) +
            `"></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-thumbnail-metadata-name-container csui-normal-scrolling">
  <div class="csui-thumbnail-properties csui-thumbnail-overview-name"></div>
  <div class="csui-thumbnail-metadata-container">
` +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "columns") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                data: r,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 6, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
</div>
<div class="csui-thumbnail-properties-actions">
  <div class="csui-thumbnail-properties csui-thumbnail-overview-properties"></div>
  <div class="csui-thumbnail-properties csui-thumbnail-overview-reserved"></div>
</div>`
          );
        },
        useData: !0,
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_overview_impl_properties.overview",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/overview/properties.overview",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/thumbnail/content/overview/overview.content",
      "csui/models/utils/v1tov2",
      "csui/controls/thumbnail/content/content.view",
      "csui/controls/thumbnail/content/name/name.view",
      "csui/controls/thumbnail/content/properties/properties.view",
      "csui/controls/thumbnail/content/node.state/node.state.view",
      "i18n!csui/controls/thumbnail/content/overview/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/overview/impl/properties.overview",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = i.LayoutView.extend({
        className: "csui-overview-container",
        template: o,
        templateHelpers: function () {
          return { columns: this.columnModels };
        },
        regions: {
          nameRegion: ".csui-thumbnail-overview-name",
          propertiesRegion: ".csui-thumbnail-overview-properties",
          nodeStateRegion: ".csui-thumbnail-overview-reserved",
        },
        events: { keydown: "onKeyInView" },
        initialize: function () {
          (this.propertiesCollection = this.getColumns()),
            this.model.collection &&
            this.model.collection.filters &&
            this.model.collection.filters.facet &&
            this.model.collection.filters.facet.length &&
            this.model.get("parent_id_expand")
              ? this._showOrHideLocationColumn(!0)
              : this._showOrHideLocationColumn();
          var m = this,
            f = [];
          this.propertiesCollection &&
            this.propertiesCollection.models &&
            d.each(this.propertiesCollection.models, function (g, w) {
              var b = g.get("key");
              b === "size"
                ? m.getSizeValue(b) && f.push(g)
                : b === "reserved_user_id"
                ? m.showReservedLabel(m.model) && f.push(g)
                : m.model.get(b) !== void 0 && f.push(g);
            }),
            (this.columnModels = f);
        },
        constructor: function (f) {
          f || (f = {}),
            (this.options = f),
            i.LayoutView.prototype.constructor.call(this, f);
          var g = this,
            w,
            b,
            C,
            k =
              this.options.originatingView &&
              this.options.originatingView.thumbnail &&
              this.options.originatingView.thumbnail.thumbnailHeaderView,
            y = g.options.columns.where({ isNaming: !0 }),
            S = y[0] ? y[0].get("key") : k.getName();
          (this.nameView = new r({
            model: g.model,
            context: g.options.context,
            column: { name: S, defaultAction: !1 },
            displayIcon: !0,
          })),
            (b = new t({
              model: g.model,
              context: g.options.context,
              column: { name: "properties", defaultAction: !0 },
              displayIcon: !0,
              selectedChildren: g.options.selectedChildren,
              collection: g.options.collection,
              originatingView: g.options.originatingView,
            })),
            g.model.set("propertiesView", b),
            (C = new n({
              model: g.model,
              context: g.options.context,
              column: { name: "reserved", defaultAction: !0 },
              displayTitle: !1,
              selectedChildren: g.options.selectedChildren,
              collection: g.options.collection,
              originatingView: g.options.originatingView,
              targetView: this,
            })),
            g.model.set("nodeStateView", C),
            (w = d.filter(this.columnModels, function (P) {
              return P.get("key") !== S;
            })),
            (this.columnModels = w),
            this.columnModels &&
              d.each(
                this.columnModels,
                function (P, F) {
                  var D = this.options.ContentFactory.getContentView(P);
                  if (((D = D || u), D)) {
                    var L,
                      Q = F,
                      q = !0,
                      G = P.get("displayIcon"),
                      N = P.toJSON();
                    (N.title = N.name),
                      (N.name = N.key),
                      (L = new D({
                        tagName: "DIV",
                        contentModel: P,
                        model: g.model,
                        context: g.options.context,
                        column: N,
                        displayLabel: q,
                        displayIcon: G,
                      })),
                      g.addRegion(Q, ".csui-thumbnail-overview-" + Q),
                      P.set("contentView", L),
                      g.listenTo(L, "clicked:content", function (W) {
                        g.trigger("clicked:content", {
                          contentView: L,
                          rowIndex: g._index,
                          colIndex: F,
                          model: g.model,
                        });
                      });
                  }
                },
                this
              );
        },
        getSizeValue: function (m) {
          var f = this.model.get(m + "_formatted");
          return f && f.split(" ")[0] != 0 ? f : 0;
        },
        getColumns: function () {
          var m = this,
            f = [],
            g;
          if (e && e.models) {
            (this.fixedContent = e.fixedOrRemovedOverviewContent),
              (g = e.deepClone()),
              g.remove(g.findWhere({ key: "properties" }));
            var w = {},
              b,
              C;
            this.options.columns.each(function (k) {
              var y = k.get("column_key"),
                S = k.get("name"),
                P = k.get("definitions_order");
              if (
                (k.get("isNaming") === !0 && (C = y),
                (w[y] = k),
                k.get("type") && P)
              ) {
                var F = g.findWhere({ key: y });
                if (F) {
                  F.get("isNaming") === !0 && (b = F.get("key"));
                  var D = F.get("sequence"),
                    L = d.extend({ sequence: D }, k.attributes);
                  F.set(L);
                } else {
                  var Q = k.clone();
                  Q.set({ sequence: P }), g.add(Q);
                }
              }
              m.fixedContent.indexOf(y) >= 0 &&
                g.remove(g.findWhere({ key: y }));
            }, this);
          }
          return g;
        },
        _showOrHideLocationColumn: function (m) {
          var f =
            this.options.collection &&
            this.options.collection.node &&
            this.options.collection.node.get("type");
          (m = !!m || (!!f && (f === 899 || f === 298))),
            (this.showParent = m),
            m
              ? this.propertiesCollection.get("parent_id") ||
                this.propertiesCollection.add(
                  {
                    key: "parent_id",
                    title: s.columnTitleLocation,
                    column_key: "parent_id",
                    name: s.columnTitleLocation,
                    displayLabel: !0,
                    displayIcon: !0,
                    sequence: 500,
                  },
                  { at: this.propertiesCollection.length }
                )
              : this.propertiesCollection.remove("parent_id");
        },
        currentlyFocusedElement: function (m) {
          return this.$el.find(":focusable")[0];
        },
        onKeyInView: function (m) {
          if (m && m.keyCode === 27) {
            m.preventDefault(), m.stopPropagation();
            var f = this.$el.parents("body").find(".binf-popover");
            f.parent().trigger("click");
          }
        },
        showReservedLabel: function (m) {
          var f = m.get("reserved"),
            g = m.get("reserved_shared_collaboration"),
            w = m.get("reserved_user_id");
          return (f && w) || g;
        },
        onRender: function (m) {
          this.nameRegion.show(this.nameView);
          var f = this;
          this.columnModels &&
            (d.each(this.columnModels, function (g, w) {
              var b = w;
              f[b].show(g.get("contentView"));
              var C = g.get("contentView").$el.find(".csui-thumbnail-value p");
              C.length > 0 &&
                C[0].innerHTML === "" &&
                g.get("contentView").$el.parent().addClass("binf-hidden");
            }),
            this.model.actions.get("properties") &&
              this.propertiesRegion.show(this.model.get("propertiesView")),
            this.nodeStateRegion.show(this.model.get("nodeStateView")));
        },
      });
      return c;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/overview/impl/overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `tabindex="0"
        `;
        },
        3: function (i, e, l, u, r) {
          return 'tabindex="-1"';
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<button type="button" class="csui-thumbnail-overview-icon" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "overViewTitle") ||
                  (e != null ? s(e, "overViewTitle") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "overViewTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 66 },
                      end: { line: 1, column: 83 },
                    },
                  })
                : n)
            ) +
            `"
        aria-haspopup="dialog" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "overViewTitle") ||
                  (e != null ? s(e, "overViewTitle") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "overViewTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 43 },
                      end: { line: 2, column: 60 },
                    },
                  })
                : n)
            ) +
            '" ' +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "focusable") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 2, column: 62 },
                  end: { line: 3, column: 36 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
  ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: { states: "true", iconName: "csui_action_view_column32" },
              loc: {
                start: { line: 4, column: 2 },
                end: { line: 4, column: 67 },
              },
            })) != null
              ? t
              : "") +
            `
</button>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_overview_impl_overview",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/overview/impl/overview",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/overview/overview.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/thumbnail/content/content.registry",
      "csui/controls/thumbnail/content/content.factory",
      "csui/controls/thumbnail/content/overview/properties.overview",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin",
      "csui/utils/base",
      "csui/pages/start/start.page.view",
      "csui/controls/icons.v2",
      "i18n",
      "i18n!csui/controls/thumbnail/content/overview/impl/nls/localized.strings",
      "hbs!csui/controls/thumbnail/content/overview/impl/overview",
      "css!csui/controls/thumbnail/content/overview/impl/overview",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m) {
      "use strict";
      var f = h.LayoutView.extend({
        className: "csui-thumbnail-overview-container",
        template: m,
        behaviors: {
          TabableRegion: { behaviorClass: u, initialActivationWeight: 100 },
        },
        constructor: function (w) {
          w || (w = {}),
            h.LayoutView.prototype.constructor.call(this, w),
            d.defaults(w, { formPopoverPlacement: "right" }),
            (this.options = w),
            v(window).on("resize", d.bind(this._closePopover, this));
        },
        currentlyFocusedElement: function (g) {
          return this._previousFocusElm
            ? this.propertiesOverview.currentlyFocusedElement()
            : this.$el;
        },
        templateHelpers: function () {
          return {
            overViewTitle: c.ColumnTitle,
            focusable: this.options.focusable || !0,
          };
        },
        events: {
          keydown: "onKeyInView",
          "click .csui-thumbnail-overview-icon": "_showPopover",
          dragenter: "_closePopover",
          "close:popover": "_closePopover",
        },
        onKeyInView: function (g) {
          if (g.keyCode === 32 || g.keyCode === 13) {
            if (this.$el.find(".binf-popover").length > 0) {
              g.stopPropagation();
              return;
            }
            g.preventDefault(), g.stopPropagation(), this._showPopover();
          } else
            g.keyCode === 27 &&
              this.$el.find(".binf-popover").length > 0 &&
              (g.preventDefault(), g.stopPropagation(), this._closePopover());
        },
        _capturePreviousFocusElement: function () {
          this._previousFocusElm = document.activeElement;
        },
        _restorePreviousFocusAfterClosingPopover: function () {
          if (this._previousFocusElm) {
            var g = v(this._previousFocusElm);
            g.hasClass("csui-thumbnail-overview-icon")
              ? this.$el
                  .find("button.csui-thumbnail-overview-icon")
                  .trigger("focus")
              : g.trigger("focus"),
              (this._previousFocusElm = void 0);
          }
        },
        _showPopover: function (g) {
          if (
            this.options.originatingView &&
            this.options.originatingView.thumbnail.activeInlineForm
          ) {
            var w = this.options.originatingView.thumbnail;
            w.closeInlineForm(),
              (this.$el = w.$el
                .find(".csui-thumbnail-item-" + this.model.cid)
                .find(".csui-thumbnail-overview-container")),
              (this.$popoverEl = this.$el.find(
                ".csui-thumbnail-overview-icon"
              ));
          }
          var b = this;
          if (!(this.$el.find(".binf-popover").length > 0)) {
            this._capturePreviousFocusElement();
            var C = this.options.formPopoverPlacement;
            o && o.settings.rtl && (this.rtl = !0),
              (this.propertiesOverview = new l({
                model: this.model,
                context: this.options.context,
                ContentFactory: this.options.ContentFactory,
                originatingView: this.options.originatingView,
                selectedChildren: this.options.selectedChildren,
                collection: this.options.collection,
                columns: this.options.columns,
              })),
              this.propertiesOverview.render(),
              (this.$popoverEl = this.$el.find(
                ".csui-thumbnail-overview-icon"
              )),
              (this._previousTitle = this.$popoverEl.attr("title")),
              this.$popoverEl.attr("title", "");
            var k = o && o.settings.rtl,
              y = v(window).width() !== v(".csui-thumbnail-container").width(),
              S;
            k && y
              ? (S =
                  v(window).width() -
                  this.$popoverEl.offset().left -
                  this.$popoverEl.width())
              : (S =
                  v(".csui-thumbnail-container").width() -
                  this.$popoverEl.offset().left -
                  this.$popoverEl.width()),
              S < 248 &&
                ((this.placementChanged = !0),
                (C = C === "right" ? "left" : "right")),
              this.$popoverEl.binf_popover({
                content: d.bind(function () {
                  return this.propertiesOverview.el;
                }, this),
                html: !0,
                placement: function (D, L) {
                  var Q = this,
                    q = C;
                  return q;
                },
                trigger: "manual",
              }),
              this.$popoverEl.binf_popover("show"),
              (this.popOver = this.$el.find(".binf-popover")),
              this.popOver.addClass("binf-invisible"),
              this.propertiesOverview.trigger("dom:refresh"),
              this.engageModalKeyboardFocusOnOpen(this.propertiesOverview.el),
              this.popOver.attr("role", "dialog");
            var P = d.uniqueId("popoverLabelId"),
              F = this.popOver.find(">.binf-popover-title");
            F &&
              (F.attr("id", P),
              F.html(c.overviewTitle),
              this.popOver.attr("aria-labelledby", P)),
              this.$popoverEl.on(
                "shown.binf.popover",
                d.bind(function (D) {
                  v(document).on(
                    "mouseup.popover",
                    { view: this },
                    this._handleClickEvent
                  ),
                    (this.scrollEle = this.$el.closest(
                      ".csui-thumbnail-results"
                    )),
                    this.scrollEle.on(
                      "scroll.popover",
                      { view: this },
                      this._handleScrollEvent
                    ),
                    b.onShowOverviewFlyout(D),
                    b.triggerMethod("shown:overview:flyout"),
                    this.propertiesOverview &&
                      this.propertiesOverview.nodeStateRegion.$el
                        .find("button, a")
                        .attr("tabindex", "0"),
                    this.propertiesOverview &&
                      v(
                        this.propertiesOverview.currentlyFocusedElement()
                      ).trigger("focus");
                }, this)
              );
          }
        },
        onShowOverviewFlyout: function (g) {
          var w = this.$el,
            b = n.useV2AppHeader ? "otc-header-bar" : "nav.csui-navbar",
            C = this.$el.parent().find(".binf-popover"),
            k = C.find(".binf-arrow"),
            y = parseInt(k.css("top")),
            S = parseInt(k.css("height")),
            P = this.$el.closest(".csui-thumbnail-results"),
            F = P.closest(".csui-normal-scrolling"),
            D = C.find(".csui-thumbnail-metadata-name-container"),
            L = C.find(".csui-thumbnail-properties-actions"),
            Q = o && o.settings.rtl,
            q = v(b).length
              ? v(b).innerHeight()
              : v(".binf-nav").parents("nav") &&
                v(".binf-nav").parents("nav").length
              ? v(".binf-nav").parents("nav").innerHeight()
              : 0,
            G,
            N =
              window.innerHeight < D.height() + L.height() + 100
                ? D.height() - 100
                : D.height();
          D.css({ height: N }),
            t.isIE11()
              ? (G =
                  w[0].getBoundingClientRect().top -
                  parseInt(k.css("top")) +
                  12)
              : (G = w.offset().top - (q + parseInt(k.css("top"))) + 9);
          var W = v(".cs-perspective-panel"),
            H = W.length > 0 ? W[0].getBoundingClientRect().top : 0;
          D.height() > window.innerHeight && !t.isIE11()
            ? ((N =
                window.innerHeight -
                (L.height() +
                  q +
                  v(".csui-table-paginationview").height() +
                  v("#breadcrumb-wrap").innerHeight())),
              D.css({ height: N }),
              (y = w.offset().top - (q + G) + 11),
              y > N &&
                ((G = G + (y - N - L.height())),
                (y = y - (y - N - L.height()))),
              G < 0 && ((G = 0), (y = w.offset().top - (q + G) + 11)),
              k.css("top", y))
            : G < 0 && !t.isIE11()
            ? ((G = 0),
              (N =
                window.innerHeight -
                (L.height() +
                  q +
                  v(".csui-table-paginationview").height() +
                  v("#breadcrumb-wrap").innerHeight())),
              D.css({ height: N }),
              (y = w.offset().top - (q + G) + 11),
              k.css("top", y))
            : D.height() > window.innerHeight &&
              t.isIE11() &&
              ((N =
                window.innerHeight -
                (L.height() +
                  q +
                  v(".csui-table-paginationview").height() +
                  v("#breadcrumb-wrap").innerHeight())),
              D.css({ height: N }),
              (y = w.offset().top - G + H - q + 12),
              G < q &&
                (y > N
                  ? ((G = G + (y - N - L.height())),
                    (y = y - (y - N - L.height())))
                  : ((G = q), (y = w.offset().top - G + H - q + 12))),
              k.css("top", y)),
            C.css({ position: "fixed", top: G }),
            t.isTouchBrowser() &&
              F.css({ "-webkit-overflow-scrolling": "auto" });
          var z,
            Z = v(window).width() !== v(".csui-thumbnail-container").width(),
            te = w.offset().left;
          if (Q && Z) {
            var le = v(".csui-thumbnail-container").width() - v(window).width(),
              ge =
                this.options.originatingView &&
                this.options.originatingView.$el.find(".csui-table-facetview");
            this.placementChanged
              ? (z = le + te - C.outerWidth())
              : (z = le + te + w.width()),
              ge.hasClass("csui-facetview-hidden") || (z = z + ge.width());
          } else
            this.placementChanged
              ? (z = te - C.outerWidth())
              : (z = te + w.width());
          C.css({ right: "auto", left: z }), this._adjustFlyOut();
          var Pe = v(window).height(),
            _e = C.offset().top,
            ie = C.innerHeight() - parseInt(k.css("top")),
            ae = w.offset().top,
            fe = ae + ie + S - Pe;
          this.popOver.removeClass("binf-invisible"), w.trigger("focus");
        },
        _adjustFlyOut: function () {
          var g = this.$el.closest(".csui-thumbnail-results"),
            w = v(window).height(),
            b = n.useV2AppHeader ? "otc-header-bar" : "nav.csui-navbar",
            C = v(b).innerHeight() / 2;
          (this.currentNavbarIndex = v(b).css("z-index")),
            (this.currentBreadcrumbIndex =
              v("#breadcrumb-wrap").css("z-index")),
            this.$el.height() > w && this.$el.height(w - C),
            v("body").addClass("csui-apply-zero-zindex");
          var k = g.closest(".csui-normal-scrolling");
          return (
            v(k).on("scroll", function () {
              v(this).data("binf.popover") &&
                (v(this).binf_popover("destroy"),
                v("body").removeClass("csui-apply-zero-zindex"));
            }),
            !1
          );
        },
        _closePopover: function () {
          this.disengageModalKeyboardFocusOnClose(),
            (this.$popoverEl = this.$el.find(".csui-thumbnail-overview-icon")),
            this.$popoverEl.binf_popover("destroy"),
            (this.placementChanged = !1),
            this._previousTitle &&
              (this.$popoverEl.attr("title", this._previousTitle),
              (this._previousTitle = void 0)),
            v(document).off("mouseup.popover", this._handleClickEvent),
            (this.scrollEle = this.$el.closest(".csui-thumbnail-results")),
            this.scrollEle.off("scroll.popover", this._handleScrollEvent),
            v("body").removeClass("csui-apply-zero-zindex"),
            this.propertiesOverview &&
              this.propertiesOverview.nodeStateRegion.$el
                .find("button, a")
                .attr("tabindex", "-1"),
            this.triggerMethod("hide:overview:flyout"),
            this._restorePreviousFocusAfterClosingPopover(),
            t.isTouchBrowser() &&
              this.scrollEle.css("-webkit-overflow-scrolling", "touch");
        },
        _handleClickEvent: function (g) {
          if (!v(g.target).closest(".binf-popover").length) {
            var w = g.data.view;
            v(document).off("mouseup.popover", this._handleClickEvent),
              w._closePopover();
          }
        },
        _handleScrollEvent: function (g) {
          var w = g.data.view;
          v(g.target).closest(".binf-popover").length ||
            (w.scrollEle.off("scroll.popover", w._handleScrollEvent),
            w && w._closePopover());
        },
      });
      return i.registerByKey("overview", f), r.mixin(f.prototype), f;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/content.factory",
    [
      "csui/lib/underscore",
      "csui/controls/thumbnail/content/content.registry",
      "csui/controls/thumbnail/content/text/text.view",
      "csui/controls/thumbnail/content/favorite/favorite.view",
      "csui/controls/thumbnail/content/node.state/node.state.view",
      "csui/controls/thumbnail/content/name/name.view",
      "csui/controls/thumbnail/content/parent/parent.view",
      "csui/controls/thumbnail/content/member/member.view",
      "csui/controls/thumbnail/content/size/size.view",
      "csui/controls/thumbnail/content/select/select.view",
      "csui/controls/thumbnail/content/date/date.view",
      "csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view",
      "csui/controls/thumbnail/content/overview/overview.view",
      "csui/controls/thumbnail/content/properties/properties.view",
      "csui-ext!csui/controls/thumbnail/content/content.factory",
    ],
    function (v, d, a) {
      function h() {}
      return (
        v.extend(h.prototype, {
          getContentView: function (i) {
            var e = d.getContentView(i);
            return e || a;
          },
        }),
        new h()
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/impl/thumbnail.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return " csui-checkbox ";
        },
        3: function (i, e, l, u, r) {
          return " binf-hidden";
        },
        5: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '    <div class="csui-thumbnail-content csui-thumbnail-' +
            i.escapeExpression(
              i.lambda(
                (t = e != null ? n(e, "attributes") : e) != null
                  ? n(t, "key")
                  : t,
                e
              )
            ) +
            `"></div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-thumbnail-item-container">
<div class="csui-thumbnail-icon-container">
  <div class="csui-thumbnail-select ` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isChecked") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 36 },
                  end: { line: 3, column: 75 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "selectThumbnails") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 75 },
                  end: { line: 3, column: 118 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></div>
  <div class="csui-thumbnail-actionbar"></div>
  <div class="csui-thumbnail-thumbnailIcon"></div>
</div>
<div class="csui-thumbnail-content-container">
` +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "columns") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(5, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 8, column: 2 },
                  end: { line: 10, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_impl_thumbnail.item", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/thumbnail.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/thumbnail/content/content.factory",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view",
      "csui/controls/thumbnail/content/select/select.view",
      "hbs!csui/controls/thumbnail/impl/thumbnail.item",
      "css!csui/controls/thumbnail/thumbnail",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = a.LayoutView.extend({
        className: function () {
          var n = "csui-thumbnail-item csui-thumbnail-item-" + this.model.cid;
          return (
            this.model.inlineFormView && (n = n + " csui-thumbnail-item-form"),
            n
          );
        },
        template: r,
        templateHelpers: function () {
          return {
            columns: this.options.thumbnailContent.models,
            isChecked: this.options.thumbnailView.collection.itemchecked,
            selectThumbnails:
              this.options.thumbnailView.options.selectThumbnails === "none",
          };
        },
        ui: { itemContainer: ".csui-thumbnail-item-container" },
        attributes: { tabindex: "0" },
        events: {
          "click @ui.itemContainer": "onItemClick",
          keydown: "onItemKeyDown",
        },
        regions: {
          selectContentRegion: ".csui-thumbnail-select",
          thumbnailIconRegion: ".csui-thumbnail-thumbnailIcon",
        },
        initialize: function () {
          var n = this;
          this.options.thumbnailContent &&
            this.options.thumbnailContent.models &&
            v.each(
              this.options.thumbnailContent.models,
              function (s, o) {
                var c = i.getContentView(s);
                if (c) {
                  var m = s.get("key");
                  n.addRegion(m, ".csui-thumbnail-" + m);
                }
              },
              this
            ),
            !h.isHybrid() &&
              this.options.showInlineToolbar &&
              this._subscribeEventHandlers(),
            this.model.set(
              "inactive",
              !this.options.thumbnailView.checkModelHasAction(this.model),
              { silent: !0 }
            ),
            (n.ContentFactory = i),
            this.listenTo(this.model, "change:csuiIsSelected", function (s) {
              s.get(u.isSelectedModelAttributeName)
                ? (this.options.thumbnailView.$el
                    .find(".csui-thumbnail-select")
                    .addClass("csui-checkbox"),
                  this.$el.addClass("csui-thumbnail-item-selected"))
                : (this.$el.removeClass("csui-thumbnail-item-selected"),
                  this.options.thumbnailView._allSelectedNodes.length ||
                    (this.options.thumbnailView.$el
                      .find(".csui-thumbnail-select")
                      .removeClass("csui-checkbox"),
                    this.$el.removeClass("csui-thumbnail-item-selected"))),
                this.options.thumbnailView.$el
                  .find(".selectAction")
                  .attr("tabindex", -1);
            }),
            this.options.thumbnailView._allSelectedNodes.findWhere({
              id: this.model.get("id"),
            }) && this.options.model.set("csuiIsSelected", !0);
        },
        constructor: function (s) {
          s || (s = {}),
            a.LayoutView.prototype.constructor.call(this, s),
            this.listenTo(this.model, "sync", this.render),
            this.model.set("itemselected", !1, { silent: !0 }),
            this.listenTo(
              this.options.thumbnailView,
              "cancelInlineForm",
              function (o) {
                this.activeInlineForm && this.activeInlineForm.cancel(o);
              }
            );
        },
        onItemClick: function () {
          this.options.thumbnailView.currentItemView = this;
        },
        onItemKeyDown: function (n) {
          if (d(n.target).is('input[type="text"]')) n.stopPropagation();
          else if (
            h.isFirefox() &&
            n.keyCode === 13 &&
            d(n.target).is('input[type="checkbox"]')
          ) {
            n.preventDefault(), n.stopPropagation();
            var s = this.model.get(u.isSelectedModelAttributeName);
            (n.checked = !s),
              this.selectContentView.trigger("clicked:checkbox", n);
          } else if (
            (n.keyCode === 13 || n.keyCode === 32) &&
            d(n.target).hasClass("csui-thumbnail-item")
          )
            n.preventDefault(),
              !this.el.closest(".csui-thumbnail-stop-propagation") &&
                n.stopPropagation(),
              this.model.set("itemselected", !0, { silent: !0 }),
              this.$el.addClass("csui-thumbnail-item-keyActive"),
              this.showInlineActions.bind(this),
              (this.focusableChildren = this.$el
                .find("*[tabindex]:visible")
                .filter(function () {
                  if (
                    !(
                      d(this).parents().hasClass("csui-thumbnail-nodestate") ||
                      d(this).parent().hasClass("csui-thumbnail-name-container")
                    )
                  )
                    return this;
                })),
              d(this).parent().hasClass("csui-thumbnail-name-container"),
              d(this.focusableChildren[0]).trigger("focus"),
              (this.focusedThumbnailCardIndex = 0);
          else if (n.keyCode === 27)
            this.model.set("itemselected", !1, { silent: !0 }),
              this.$el.removeClass("csui-thumbnail-item-keyActive"),
              (this.focusableChildren = ""),
              this.$el.trigger("focus");
          else if (n.keyCode === 9) {
            this.focusableChildren = this.$el
              .find("*[tabindex]:visible")
              .filter(function () {
                if (
                  !(
                    d(this).parents().hasClass("csui-thumbnail-nodestate") ||
                    d(this).parent().hasClass("csui-thumbnail-name-container")
                  )
                )
                  return this;
              });
            var o =
                "a[href], area[href], input,.csui-thumbnail-select input[type=checkbox], select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]",
              c = this.options.thumbnailView.resultsView.$el.find(o);
            this.$el.hasClass("csui-thumbnail-item-keyActive")
              ? (n.preventDefault(),
                n.stopPropagation(),
                n.shiftKey
                  ? (this.focusedThumbnailCardIndex > 0 &&
                      this.focusedThumbnailCardIndex--,
                    d(
                      this.focusableChildren[this.focusedThumbnailCardIndex]
                    ).trigger("focus"))
                  : (d(n.target).hasClass("csui-thumbnail-item") &&
                      (this.focusedThumbnailCardIndex = -1),
                    this.focusedThumbnailCardIndex <
                      this.focusableChildren.length - 1 &&
                      this.focusedThumbnailCardIndex++,
                    d(
                      this.focusableChildren[this.focusedThumbnailCardIndex]
                    ).trigger("focus")))
              : (c.length && c.prop("tabindex", -1),
                d(
                  this.options.thumbnailView.resultsView.$el.find(
                    ".csui-thumbnail-item"
                  )[this.options.thumbnailView.resultsView.currentIndexFocussed]
                ).attr("tabindex", 0));
          }
        },
        _subscribeEventHandlers: function () {
          this.$el &&
            this.$el.mousehover(
              this.showInlineActions.bind(this),
              this.hideInlineActions.bind(this),
              { namespace: this.cid }
            ),
            this.$el && this.$el.on("focus", this.showInlineActions.bind(this)),
            this.$el && this.$el.on("blur", this.hideInlineActions.bind(this));
        },
        _unsubscribeEventHandlers: function () {
          this._isRendered &&
            (this.$el.mousehover("off", { namespace: this.cid }),
            this.$el && this.$el.off("focus"),
            this.$el && this.$el.off("blur"));
        },
        showInlineActions: function (n) {
          if (this.$el.find(".csui-inlineform-group").length === 0) {
            var s = this.$el.find(".csui-thumbnail-actionbar");
            if (
              s.length > 0 &&
              !this.options.originatingView.lockedForOtherContols
            ) {
              var o = this,
                c = { sender: o, target: s, model: o.model };
              o.trigger("mouseenter:row", c);
            }
          } else
            this.$el.find(".csui-thumbnail-select").css({ display: "none" });
        },
        hideInlineActions: function (n) {
          var s = this.$el.find(".csui-thumbnail-actionbar");
          if (s.length > 0) {
            var o = this,
              c = { sender: o, target: s, model: o.model };
            this.model.get("itemselected") || o.trigger("mouseleave:row", c);
          }
        },
        onRender: function (n) {
          var s = this;
          s.model.isLocallyCreated &&
            !s.model.inlineFormView &&
            this.$el
              .find(".csui-thumbnail-content-container")
              .addClass("csui-new-item"),
            s.model.isLocallyCreated &&
              (s.listenTo(
                this.options.thumbnailView,
                "inlineFormCreation",
                function (c) {
                  var m = c[c.length - 1],
                    f = ".csui-thumbnail-name-" + m.cid,
                    g = this.options.thumbnailView.$el.find(f),
                    w = new a.Region({ el: g });
                  m.inlineFormView &&
                    (s.activeInlineForm && s.activeInlineForm.destroy(),
                    (s.activeInlineForm = new m.inlineFormView({
                      model: m,
                      originatingView: s.options.originatingView,
                      context: s.options.thumbnailView.context,
                    })),
                    s.$el.hasClass("csui-thumbnail-item-form") &&
                      s.$el.addClass("csui-new-thumbnail-item"),
                    s.activeInlineForm.listenTo(
                      s.activeInlineForm,
                      "destroy",
                      function () {
                        (s.options.thumbnailView.lockedForOtherContols = !1),
                          delete s.activeInlineForm,
                          s.trigger("destroy:inlineform");
                      }
                    ),
                    w.show(s.activeInlineForm),
                    s.trigger("show:inlineform"));
                }
              ),
              s.listenTo(
                this.options.thumbnailView,
                "updateItem",
                function (c) {
                  s.activeInlineForm &&
                    s.activeInlineForm.model.cid === c.cid &&
                    (s.activeInlineForm.model.trigger("sync"),
                    s.activeInlineForm.cancel({ silent: !0 }),
                    (c.renamed = !0));
                }
              )),
            (this.selectContentView = new u({
              tagName: "div",
              model: this.options.model,
              thumbnailView: this.options.thumbnailView,
              events: function () {
                return h.isFirefox()
                  ? v.extend({}, u.prototype.events, { keydown: s.onKeyInView })
                  : u.prototype.events;
              },
            })),
            this.selectContentRegion.show(this.selectContentView),
            this.options.model.get("csuiIsSelected")
              ? (this.selectContentRegion.$el.addClass("csui-checkbox"),
                this.$el.addClass("csui-thumbnail-item-selected"))
              : this.options.thumbnailView.getSelectedChildren().length === 0 &&
                this.options.thumbnailView.resultsView.$el.find(
                  ".csui-checkbox"
                ) &&
                (this.selectContentRegion.$el.removeClass("csui-checkbox"),
                this.$el.removeClass("csui-thumbnail-item-selected")),
            this.options.model.get(u.isSelectedModelAttributeName) &&
              this.$el.addClass("csui-thumbnail-item-selected"),
            ((this.getSelectedChildren().length > 0 &&
              s.model.isLocallyCreated &&
              !s.model.inlineFormView) ||
              this.options.thumbnailView._allSelectedNodes.length) &&
              (this.$el
                .find(".csui-new-item")
                .parent()
                .find(".csui-thumbnail-select")
                .addClass("csui-checkbox"),
              this.selectContentRegion.$el.addClass("csui-checkbox")),
            s.listenTo(
              this.selectContentView,
              "clicked:checkbox",
              function (c) {
                c.checked &&
                  this.options.thumbnailView.cancelAnyExistingInlineForm(),
                  this.options.thumbnailView.stopListening(
                    this.options.thumbnailView,
                    "thumbnailItem:toggled"
                  ),
                  this.options.thumbnailView.listenTo(
                    this.options.thumbnailView,
                    "thumbnailItem:toggled",
                    v.bind(function (m) {
                      var f = this;
                      setTimeout(function () {
                        f.$el.find(".selectAction").trigger("focus");
                        var g =
                            "a[href], area[href], input,.csui-thumbnail-select input[type=checkbox], select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]",
                          w = f.$el.find(g);
                        w.length && w.prop("tabindex", -1);
                      }, 0),
                        m.checked
                          ? (this.options.thumbnailView.options
                              .selectThumbnails === "single" &&
                              this.options.thumbnailView._allSelectedNodes
                                .length === 0) ||
                            this.options.thumbnailView.options
                              .selectThumbnails === "multiple"
                            ? this.options.thumbnailView._allSelectedNodes.add(
                                m.view.model,
                                { silent: !0 }
                              )
                            : this.options.thumbnailView.options
                                .selectThumbnails === "single" &&
                              this.options.thumbnailView._allSelectedNodes
                                .length > 0 &&
                              (this.options.thumbnailView._allSelectedNodes.reset(
                                []
                              ),
                              this.options.thumbnailView._allSelectedNodes.add(
                                m.view.model,
                                { silent: !0 }
                              ))
                          : this.options.thumbnailView._allSelectedNodes.remove(
                              m.view.model,
                              { silent: !0 }
                            ),
                        this.options.thumbnailView._allSelectedNodes.reset(
                          this.options.thumbnailView._allSelectedNodes.models
                        );
                    }, this)
                  ),
                  this.options.thumbnailView.trigger(
                    "thumbnailItem:toggled",
                    c
                  ),
                  s.showToolBarActions(c),
                  c.checked
                    ? (this.options.thumbnailView.resultsView
                        .inlineToolbarView &&
                        this.options.thumbnailView.resultsView.inlineToolbarView.destroy(),
                      s.model.set(u.isSelectedModelAttributeName, !0),
                      (s.model.attributes.isSelected = !0),
                      s.options.thumbnailView.trigger("thumbnailSelected", {
                        sender: s,
                        targets: s.options.thumbnailView,
                        nodes: s.getNodes.call(s),
                      }))
                    : (s.model.set(u.isSelectedModelAttributeName, !1),
                      (s.model.attributes.isSelected = !1),
                      s.options.thumbnailView.trigger("thumbnailUnSelected", {
                        sender: s,
                        targets: s.options.thumbnailView,
                        nodes: s.getNodes.call(s),
                      })),
                  this.options.thumbnailHeaderView.trigger(
                    "selectOrUnselect.mixed"
                  );
              }
            ),
            (this.thumbnailIconView = new l({
              model: this.options.model,
              context: this.options.context,
              column: { defaultAction: !0 },
              originatingView: this.options.originatingView,
            })),
            this.thumbnailIconRegion.show(this.thumbnailIconView),
            this.listenTo(
              this.thumbnailIconView,
              "execute:defaultAction",
              function (c) {
                h.isControlClick(c) ||
                  (c.preventDefault(),
                  s.options.thumbnailView.trigger(
                    "execute:defaultAction",
                    s.model
                  ));
              }
            ),
            (this.contents = this.options.columns);
          var o = [];
          this.contents.each(function (c) {
            var m = c.get("column_key");
            o.push(m);
          }, this),
            o.push("overview"),
            this.options.thumbnailContent &&
              this.options.thumbnailContent.models &&
              v.each(
                this.options.thumbnailContent.models,
                function (c, m) {
                  (this.options.model &&
                    this.options.model.isReservedClicked) ||
                  this.options.model.isUnreservedClicked
                    ? this.options.model.set(
                        "inactive",
                        this.options.model.attributes.inactive,
                        { silent: !0 }
                      )
                    : this.options.model.set(
                        "inactive",
                        !this.options.thumbnailView.checkModelHasAction(
                          this.model
                        ),
                        { silent: !0 }
                      );
                  var f = i.getContentView(c),
                    g = c.get("key");
                  if (f && o.indexOf(g) > -1) {
                    var w = c.get("key"),
                      b = c.get("showoverview") ? i : void 0,
                      C = c.toJSON();
                    C.name = C.key;
                    var k = new f({
                      tagName: "DIV",
                      model: s.model,
                      context: s.options.context,
                      column: C,
                      ContentFactory: b,
                      displayLabel: c.get("displayLabel"),
                      displayTitle: c.get("displayTitle"),
                      displayIcon: !0,
                      originatingView: s.options.originatingView,
                      selectedChildren:
                        this.options.thumbnailView.options.selectedChildren,
                      collection: this.options.thumbnailView.options.collection,
                      columns: this.options.columns,
                    });
                    s[w].show(k),
                      s.listenTo(k, "clicked:content", function (y) {
                        s.trigger("clicked:content", {
                          contentView: k,
                          rowIndex: s._index,
                          colIndex: m,
                          model: s.model,
                        });
                      }),
                      s.listenTo(k, "execute:defaultAction", function (y) {
                        y.preventDefault(),
                          y.stopPropagation(),
                          s.options.thumbnailView.trigger(
                            "execute:defaultAction",
                            s.model
                          );
                      }),
                      s.listenTo(k, "show:add:favorite:form", function () {
                        s.hideInlineActions(),
                          (s.favoritePopoverOpened = !0),
                          (s.options.originatingView.lockedForOtherContols =
                            !0);
                      }),
                      s.listenTo(k, "close:add:favorite:form", function () {
                        (s.favoritePopoverOpened = !1),
                          (s.options.originatingView.lockedForOtherContols =
                            !1);
                      }),
                      s.listenTo(k, "shown:overview:flyout", function () {
                        s.hideInlineActions(),
                          (s.overviewPopoverOpened = !0),
                          (s.options.originatingView.lockedForOtherContols =
                            !0);
                      }),
                      s.listenTo(k, "hide:overview:flyout", function () {
                        (s.overviewPopoverOpened = !1),
                          (s.options.originatingView.lockedForOtherContols =
                            !1);
                      });
                  }
                },
                this
              );
        },
        getNodes: function () {
          var n = [];
          return n.push(this.model), n;
        },
        showToolBarActions: function (n) {
          n.checked ||
            (this._subscribeEventHandlers(),
            (this.options.thumbnailView.resultsView.options.showInlineActionBar =
              !1)),
            this.triggerMethod("show:toolbar");
        },
        getSelectedChildren: function () {
          return this.model.collection.where({ csuiIsSelected: !0 });
        },
      });
      return v.extend(t.prototype, e), t;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/impl/empty.thumbnail",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<p class='csui-no-result-message' title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "noResults") || (e != null ? n(e, "noResults") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "noResults",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 41 },
                      end: { line: 1, column: 54 },
                    },
                  })
                : t)
            ) +
            `">
  ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "noResults") || (e != null ? n(e, "noResults") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "noResults",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 15 },
                    },
                  })
                : t)
            ) +
            `
</p>
`
          );
        },
      });
      return (
        a.registerPartial("csui_controls_thumbnail_impl_empty.thumbnail", h), h
      );
    }
  ),
  csui.define(
    "csui/controls/thumbnail/empty.thumbnail.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "hbs!csui/controls/thumbnail/impl/empty.thumbnail",
      "i18n!csui/controls/thumbnail/impl/nls/lang",
      "css!csui/controls/thumbnail/thumbnail",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = d.ItemView.extend({
        className: "csui-thumbnail-empty",
        template: a,
        templateHelpers: function () {
          return { noResults: this.emptyThumbnailText };
        },
        constructor: function (l) {
          (this.options = l && l.parentOptions),
            d.ItemView.prototype.constructor.apply(this, arguments);
        },
        initialize: function () {
          (this.canAddItems = !!this.options.originatingView.canAddItems()),
            (this.addItemsPermissions =
              !!this.options.originatingView.addItemsPermissions()),
            this.collection.fetched && this._setEmptyViewText();
        },
        onRender: function () {
          this.collection.fetched &&
            this.options.$parentEl.addClass("csui-thumbnail-empty"),
            this.canAddItems &&
              this.addItemsPermissions &&
              this.$el.addClass("csui-can-add-items");
        },
        onShow: function () {
          this.$el.addClass("icon-thumbnail-empty-page");
        },
        onDestroy: function () {
          this.options.$parentEl.removeClass("csui-thumbnail-empty");
        },
        _setEmptyViewText: function () {
          (this.emptyThumbnailText = ""),
            (this.emptyThumbnailText = this.addItemsPermissions
              ? h.dragAndDropMessage
              : h.noPermissions),
            (this.emptyThumbnailText = this.canAddItems
              ? this.emptyThumbnailText
              : h.noResults),
            (this.emptyThumbnailText =
              this.collection.filters && this.collection.filters.name
                ? h.noSearchResults
                : this.emptyThumbnailText);
        },
      });
      return i;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/thumbnail.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/commands",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/controls/tableactionbar/tableactionbar.view",
      "csui/controls/thumbnail/thumbnail.item.view",
      "csui/controls/thumbnail/empty.thumbnail.view",
      "css!csui/controls/thumbnail/thumbnail",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = a.CollectionView.extend({
        className: "csui-thumbnail-collection",
        childView: r,
        childViewOptions: function () {
          return {
            context: this.options.context,
            showInlineToolbar: this.showInlineToolbar,
            toolbarItems: this.options.inlineBar.options.collection,
            toolbarItemsMasks: this.options.inlineBar.options.toolItemsMask,
            originatingView: this.options.originatingView,
            thumbnailView: this.options.thumbnailView,
            thumbnailHeaderView: this.options.thumbnailHeaderView,
            tableColumns: this.options.tableColumns,
            columns: this.options.columns,
            thumbnailContent: this.options.thumbnailContent,
          };
        },
        childEvents: {
          "mouseenter:row": "onChildShowInlineActionBarWithDelay",
          "mouseleave:row": "onChildActionBarShouldDestroy",
          render: "_onChildRender",
        },
        events: { keydown: "onItemKeyDownOnThumbnailCollection" },
        emptyView: t,
        emptyViewOptions: function () {
          return { $parentEl: this.$el, parentOptions: this.options };
        },
        behaviors: {
          DefaultAction: { behaviorClass: i },
          TabableRegion: { behaviorClass: e },
        },
        constructor: function (o) {
          o || (o = {}),
            (this.context = o.context),
            a.CollectionView.prototype.constructor.apply(this, arguments),
            (this.showInlineToolbar =
              this.options.inlineBar.options.collection &&
              this.options.inlineBar.options.toolItemsMask),
            (this.currentIndexFocussed = 0),
            this.showInlineToolbar && this.setInlineActionBarEvents(),
            v.defaults(this.options, { showInlineActionBar: !0 }),
            d(window).on("resize", v.bind(this._adjustThumbnailWidth, this));
        },
        onItemKeyDownOnThumbnailCollection: function (s) {
          var o = this.$el.children(),
            c = this.$el.children().length;
          this.$el.children().hasClass("csui-thumbnail-item-keyActive") ||
            (s.keyCode === 39
              ? this.currentIndexFocussed < c
                ? (d(o[this.currentIndexFocussed]).attr("tabindex", -1),
                  d(o[++this.currentIndexFocussed])
                    .trigger("focus")
                    .attr("tabindex", 0))
                : (s.preventDefault(), s.stopPropagation())
              : s.keyCode === 37 &&
                (this.currentIndexFocussed > 0
                  ? (d(o[this.currentIndexFocussed]).attr("tabindex", -1),
                    d(o[--this.currentIndexFocussed])
                      .trigger("focus")
                      .attr("tabindex", 0))
                  : (s.preventDefault(), s.stopPropagation())));
        },
        currentlyFocusedElement: function (s) {
          return this.$el.children()[this.currentIndexFocussed];
        },
        setInlineActionBarEvents: function () {
          this.listenTo(this, "closeOther", this._destroyInlineActionBar),
            this.listenTo(
              this.collection,
              "reset",
              this._destroyInlineActionBar
            );
        },
        _destroyInlineActionBar: function () {
          this.inlineToolbarView &&
            (this.inlineToolbarView.destroy(),
            (this.inlineToolbarView = void 0));
        },
        _onChildRender: function (s) {
          s.options.thumbnailView &&
            s.options.thumbnailView.trigger("thumbnailRowRendered", {
              sender: this,
              target: s.el,
              node: s.model,
            });
        },
        _showInlineActionBar: function (s) {
          this.inlineToolbarView
            ? (this._savedHoverEnterArgs = s)
            : s &&
              ((this._savedHoverEnterArgs = null),
              (this.inlineToolbarView = new u(
                v.extend(
                  {
                    context: this.options.context,
                    commands: h,
                    collection: this.options.inlineBar.options.collection,
                    toolItemsMask: this.options.inlineBar.options.toolItemsMask,
                    originatingView: this.options.originatingView,
                    model: s.model,
                    status: {
                      originatingView: this.options.originatingView,
                      connector: this.options.collection.connector,
                    },
                  },
                  this.options.inlineBar.options
                )
              )),
              this.listenTo(
                this.inlineToolbarView,
                "before:execute:command",
                function (o) {
                  (this.lockedForOtherContols = !0),
                    o &&
                      o.status &&
                      o.status.targetView &&
                      o.status.targetView.$el &&
                      o.status.targetView.$el.addClass("active-row"),
                    this._destroyInlineActionBar();
                }
              ),
              this.listenTo(
                this.inlineToolbarView,
                "after:execute:command",
                function (o) {
                  (this.lockedForOtherContols = !1),
                    o &&
                      o.status &&
                      o.status.targetView &&
                      o.status.targetView.$el &&
                      o.status.targetView.$el.removeClass("active-row");
                }
              ),
              this.options.originatingView &&
                (this.listenTo(
                  this.options.originatingView,
                  "block:view:actions",
                  function () {
                    (this.lockedForOtherContols = !0),
                      this._destroyInlineActionBar();
                  }
                ),
                this.listenTo(
                  this.options.originatingView,
                  "unblock:view:actions",
                  function () {
                    this.lockedForOtherContols = !1;
                  }
                )),
              this.inlineToolbarView.render(),
              this.listenTo(
                this.inlineToolbarView,
                "destroy",
                function () {
                  (this.inlineToolbarView = void 0),
                    this._savedHoverEnterArgs &&
                      this.onChildShowInlineActionBarWithDelay(
                        this._savedHoverEnterArgs
                      );
                },
                this
              ),
              d(s.target).append(this.inlineToolbarView.$el),
              this.inlineToolbarView.triggerMethod("show"));
        },
        onChildShowInlineActionBarWithDelay: function (s, o) {
          this._showInlineActionbarTimeout &&
            clearTimeout(this._showInlineActionbarTimeout),
            (this.isSelected =
              this.collection.where({ csuiIsSelected: !0 }).length > 0);
          var c =
            !this.isSelected &&
            this.options.thumbnailView.options.allSelectedNodes.length === 0;
          (c =
            c &&
            !this.lockedForOtherContols &&
            this.options.showInlineActionBar),
            c &&
              (this._showInlineActionbarTimeout = setTimeout(
                v.bind(function () {
                  (this._showInlineActionbarTimeout = void 0),
                    this._showInlineActionBar.call(this, o);
                }, this),
                200
              ));
        },
        onChildActionBarShouldDestroy: function (s, o) {
          (this.options.showInlineActionBar = !0),
            this._showInlineActionbarTimeout &&
              (clearTimeout(this._showInlineActionbarTimeout),
              (this._showInlineActionbarTimeout = void 0)),
            this.inlineToolbarView && this.inlineToolbarView.destroy();
        },
        showOrHideZeroRecordsMessage: function () {
          this.collection.length === 0
            ? (this.options.thumbnailHeaderView &&
                this.options.thumbnailView.collection.filters &&
                this.options.thumbnailHeaderView.searchBoxes.setFocus(),
              this._showingEmptyView &&
                this.options.thumbnailView.collection &&
                this.options.thumbnailView.collection.filters &&
                (this.options.thumbnailHeaderView.render(),
                this.options.thumbnailHeaderView.searchBoxes.setFocus()))
            : (this.$el.removeClass("csui-thumbnail-empty"),
              this.$el.removeClass("icon-thumbnail-empty-page"));
        },
        onRender: function () {
          this.showOrHideZeroRecordsMessage(),
            this._adjustThumbnailWidth(),
            this.options.thumbnailView.updateSelectAllCheckbox.call(this);
        },
        onMetadataClose: function () {
          this._adjustThumbnailWidth();
        },
        _adjustThumbnailWidth: function () {
          for (
            var s = this.$el.find(".csui-thumbnail-item"),
              o = 190,
              c =
                d(".csui-table-facetview .smart-facet-panel").length > 0
                  ? d(".csui-facet-table-container").width() -
                    d(".csui-table-facetview").width()
                  : d(".cs-thumbnail-wrapper").width(),
              m = 2,
              f = (o / c) * 100,
              g = 1;
            g <= s.length;
            g++
          ) {
            var w = g * f;
            if (w > 100) {
              (g = g - 1), (f = 100 / g);
              break;
            }
          }
          s.css({
            maxWidth: "calc(" + f + "% - " + m * 2 + "px)",
            minWidth: "calc(" + f + "% - " + m * 2 + "px)",
          });
        },
      });
      return v.extend(n.prototype, l), n;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/impl/thumbnail",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div id="csui-thumbnail-header" class="csui-thumbnail-header"></div>
<div id="csui-thumbnail-results" class="csui-thumbnail-results csui-normal-scrolling"></div>`;
        },
      });
      return a.registerPartial("csui_controls_thumbnail_impl_thumbnail", h), h;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/thumbnail.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/default.action/impl/defaultaction",
      "csui/controls/thumbnail/content/select/select.view",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/controls/progressblocker/blocker",
      "csui/controls/mixins/view.state/node.view.state.mixin",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "csui/controls/thumbnail/thumbnail.header.view",
      "csui/controls/thumbnail/thumbnail.list.view",
      "hbs!csui/controls/thumbnail/impl/thumbnail",
      "css!csui/controls/thumbnail/thumbnail",
      "csui/lib/jquery.mousehover",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m) {
      "use strict";
      var f = d.extend({}, v.config({ forIntegration: !1 })),
        g = i.LayoutView.extend({
          className: "csui-thumbnail-container",
          template: m,
          regions: {
            headerRegion: "#csui-thumbnail-header",
            resultsRegion: "#csui-thumbnail-results",
          },
          childEvents: { "show:toolbar": "showToolBarActions" },
          behaviors: { DefaultAction: { behaviorClass: e } },
          constructor: function (b) {
            b || (b = {}),
              (this._allSelectedNodes =
                b.allSelectedNodes ||
                (this._allSelectedNodes = new h.Collection())),
              (this.options = b);
            var C = { selectThumbnails: "multiple" };
            d.defaults(this.options, C),
              b.actionItems && b.commands
                ? ((this.defaultActionController = new l({
                    actionItems: b.actionItems,
                    commands: b.commands,
                  })),
                  (this.checkModelHasAction =
                    this.defaultActionController.hasAction.bind(
                      this.defaultActionController
                    )))
                : (this.checkModelHasAction = function () {
                    return !0;
                  }),
              (this.context = b.context),
              i.LayoutView.prototype.constructor.call(this, b),
              (this.collection = b.collection);
            var k = this.collection.where({ csuiIsSelected: !0 });
            (this.collection.itemchecked = !1),
              k.length > 0 && (this.collection.itemchecked = !0),
              this.options.blockingParentView
                ? t.delegate(this, this.options.blockingParentView)
                : t.imbue(this),
              this.listenTo(
                this.collection,
                "update",
                this._handleModelsUpdate
              ),
              this.listenTo(this.collection, "change", this.updateRow),
              this.context &&
                this.listenTo(
                  this.context,
                  "request",
                  this._handleContextRequest
                )
                  .listenTo(
                    this.context,
                    "sync error",
                    this._handleContextFinish
                  )
                  .listenTo(this.context, "sync", this._handleContextSync)
                  .listenTo(this.context, "request", this.blockActions)
                  .listenTo(this.context, "sync", this.unblockActions),
              this.listenTo(this.collection, "request", this.blockActions)
                .listenTo(
                  this.collection,
                  "sync",
                  d.bind(function () {
                    this._handleResponseSortBy(), this.unblockActions();
                  }, this)
                )
                .listenTo(this.collection, "destroy", this.unblockActions)
                .listenTo(this.collection, "error", this.unblockActions),
              this.options.enableViewState &&
                this.listenTo(
                  this.context.viewStateModel,
                  "change:state",
                  this.onViewStateChanged
                ),
              (this._ViewCollection = h.Collection.extend({
                model: this.collection.model,
              })),
              (this.selectedChildren = new this._ViewCollection());
            var y = this;
            this.listenTo(
              this.collection,
              "reset",
              this._updateSelectedChildren
            ),
              this.listenTo(
                this.collection,
                "remove",
                this._updateSelectedChildren
              ),
              this.listenTo(this.collection, "new:page", this.resetScrollToTop),
              this.listenTo(this.collection, "reset", function () {
                this._isRendered &&
                  (this.resetScrollToTop(),
                  this._handleResponseSortBy(),
                  this.thumbnailHeaderView &&
                  this.collection.filters &&
                  this.collection.filters.name
                    ? (this.thumbnailHeaderView.updateTotalCount(),
                      this.collection.length > 0
                        ? this.thumbnailHeaderView.ui.selectAll.removeAttr(
                            "disabled"
                          )
                        : this.thumbnailHeaderView.ui.selectAll.attr(
                            "disabled",
                            "true"
                          ))
                    : (this.thumbnailHeaderView.render(),
                      this.thumbnailHeaderView &&
                        this.thumbnailHeaderView.isSortOrderClicked &&
                        y.thumbnailHeaderView.sortRegion.$el
                          .find(".csui-sort-arrow")
                          .trigger("focus")));
              }),
              this.listenTo(
                this,
                "dom:refresh",
                this._adjustThumbnailWidth
              ).listenTo(
                this.collection,
                "filter:change",
                this._collectionFilterChanged
              ),
              this.listenTo(this, "scroll", this._destroyInlineActionBar),
              this.listenTo(
                this.options.columns,
                "update reset",
                this._handleColumnsReset
              );
          },
          _handleResponseSortBy: function () {
            const w = this.collection.sorting;
            if (w && w.sort && w.sort.length > 0 && w.sort[0].value) {
              const b = w.sort[0].value,
                C = b.indexOf("_"),
                k = b.substring(C + 1),
                y = b.substring(0, C),
                S = this._getSortableColumnKey(k),
                P =
                  !this.collection.selectedId &&
                  this.collection.setOrder(S + " " + y, !1);
              this.options.enableViewState &&
                P &&
                !this.collection.selectedId &&
                !this.options.originatingView?.getContainerPrefs("orderBy") &&
                this.setViewStateOrderBy([S + "_" + y], { default: !0 });
            }
          },
          _getSortableColumnKey: function (w) {
            var b = w;
            return (
              (w = w.toLowerCase()),
              this.options?.originatingView?.tableView?.allColumns &&
                d.find(
                  this.options.originatingView.tableView.allColumns,
                  function (C, k) {
                    if (
                      C.attributes.sort_key === w ||
                      C.name.toLowerCase() === w ||
                      C.attributes.column_key === w
                    )
                      return (b = C.attributes.column_key), !0;
                  }
                ),
              b
            );
          },
          _createChildViews: function () {
            (this.thumbnailHeaderView = new o({
              columns: this.options.displayedColumns,
              context: this.context,
              columnsWithSearch: this.options.columnsWithSearch,
              filterBy: this.options.filterBy,
              collection: this.options.collection,
              thumbnailView: this,
              allColumns: this.options.allColumns,
              enableViewState: this.options.enableViewState,
            })),
              this.updateCollectionParameters();
            var w = [];
            if (this.options.tableColumns) {
              w = this.options.tableColumns.deepClone();
              var b,
                C = d.filter(this.options.columns.models, function (y) {
                  return y.get("isNaming");
                });
              b = C.length ? C[0].get("column_key") : "name";
              var k = d.filter(w.models, function (y) {
                return y.get("key") === b;
              });
              k.length > 0 && k[0].get("key") !== "name"
                ? ((k[0].attributes.isNaming = !0),
                  w.remove(w.findWhere({ key: "name" })))
                : k.length ||
                  (w.remove(w.findWhere({ key: "name" })),
                  w.add({ key: b, sequence: 4 }));
            }
            this.resultsView = new c({
              context: this.options.context,
              collection: this.options.collection,
              thumbnailView: this,
              originatingView: this.options.originatingView,
              inlineBar: this.options.inlineBar,
              thumbnailHeaderView: this.thumbnailHeaderView,
              tableColumns: this.options.tableColumns,
              columns: this.options.columns,
              thumbnailContent: this.options.thumbnailContent || w,
            });
          },
          _destroyInlineActionBar: function () {
            var w = this.$el.find(
              ".csui-table-actionbar .binf-dropdown.binf-open"
            );
            this.resultsView.inlineToolbarView &&
              w.length > 0 &&
              w.removeClass("binf-open");
          },
          closeInlineForm: function () {
            var w = this.thumbnail ? this.thumbnail : this,
              b =
                w.activeInlineForm && w.activeInlineForm.model.isLocallyCreated,
              C =
                w.activeInlineForm &&
                w.activeInlineForm.$el.parents(".csui-thumbnail-item");
            w.activeInlineForm &&
              (!b || (b && w.activeInlineForm.model.fetched)) &&
              (w.activeInlineForm.model.get("type") === 140 &&
                w.$el
                  .find(".csui-new-thumbnail-item")
                  .removeClass("csui-new-thumbnail-item"),
              (w.lockedForOtherContols = !1),
              delete w.activeInlineForm.model.inlineFormView,
              w.activeInlineForm.model.trigger("sync"),
              delete w.activeInlineForm,
              w.$el
                .find(".csui-thumbnail-item-form")
                .removeClass("csui-thumbnail-item-form"),
              w.cancelAnyExistingInlineForm({ silent: !0 }, C));
          },
          _collectionFilterChanged: function () {
            this.options.enableViewState &&
              this.setViewStateFilter(this.collection.getFilterAsObject());
          },
          _updateSelectedChildren: function () {
            this._isRendered &&
              this.options.selectedChildren &&
              this.options.selectedChildren.enableNonPromotedCommands &&
              this.showToolBarActions();
          },
          _handleContextRequest: function () {
            (this._fetchingContext = !0),
              (this._columnsReset = !1),
              (this._collectionReset = !1);
          },
          _handleContextSync: function () {
            this._isRendered &&
              (this._columnsReset || this._collectionReset) &&
              this.render();
          },
          _handleContextFinish: function () {
            (this._fetchingContext = !1), this.unblockActions();
          },
          _handleColumnsReset: function () {
            f.forIntegration ||
              ((this.options.allColumns && this.options.allColumns.length) ||
                (this.options.originatingView.tableView._getColumns(),
                (this.options.allColumns =
                  this.options.originatingView.tableView.allColumns)),
              this._fetchingContext
                ? ((this._columnsReset = !0),
                  this._collectionReset && this._handleContextSync())
                : this.render());
          },
          resetScrollToTop: function () {
            this._isRendered &&
              this.resultsRegion &&
              this.resultsRegion.$el.scrollTop(0);
          },
          onDestroy: function () {
            this._originalScope &&
              this.options.collection.setResourceScope(this._originalScope);
          },
          _handleModelsUpdate: function (w, b) {
            if (this._isRendered) {
              var C = b.changes.added,
                k = this;
              C.length > 0 &&
                (d.each(C, function (y) {
                  y.unset(u.isSelectedModelAttributeName);
                }),
                this.triggerMethod("before:render", this),
                this.trigger("inlineFormCreation", C),
                this.resultsView.showOrHideZeroRecordsMessage(),
                this._adjustThumbnailWidth(),
                d.each(C, function (y) {
                  y.isLocallyCreated &&
                    !y.inlineFormView &&
                    k.$el
                      .find(".csui-thumbnail-item-" + y.cid)
                      .find(".csui-thumbnail-content-container")
                      .addClass("csui-new-item");
                })),
                this.thumbnailHeaderView &&
                  (this.thumbnailHeaderView.ui.selectAll.prop(
                    "disabled",
                    this.collection.length === 0
                  ),
                  this.thumbnailHeaderView.updateTotalCount(),
                  this.thumbnailHeaderView.trigger("selectOrUnselect.mixed"));
            }
          },
          onViewStateChanged: function () {
            var w = this.context.viewStateModel,
              b = w.getViewState("filter", !0);
            b
              ? JSON.stringify(this.collection.getFilterAsObject()) !== b &&
                this.applyFilter(this.getViewStateFilterAsObject(b))
              : this.collection.filters && this.collection.clearFilter();
          },
          updateSelectAllCheckbox: function () {
            var w =
                (this.thumbnail &&
                  this.thumbnail.headerRegion.currentView.selectAllRegion) ||
                (this.options &&
                  this.options.thumbnailView.headerRegion &&
                  this.options.thumbnailView.headerRegion.currentView &&
                  this.options.thumbnailView.headerRegion.currentView
                    .selectAllRegion),
              b = w && w.currentView;
            if (b) {
              var C = this.collection.where({ csuiIsSelected: !0 }).length,
                k = C === 0 ? !1 : C === this.collection.length ? !0 : "mixed";
              k === "mixed"
                ? setTimeout(() => {
                    b.setChecked(k);
                  })
                : b.setChecked(k),
                b.setDisabled(this.collection.length === 0);
            }
          },
          _maintainNodeState: function (w) {
            var b = w;
            if (w && w.inlineFormView) {
              this.activeInlineForm && this.activeInlineForm.destroy(),
                (this.activeInlineForm = new b.inlineFormView({
                  model: b,
                  originatingView: this.options.originatingView,
                  context: this.context,
                })),
                this.$el
                  .find(".csui-thumbnail-item-" + b.cid)
                  .addClass("csui-thumbnail-item-form"),
                ((b.isLocallyCreated && !b.fetched) || b.get("type") === 140) &&
                  this.$el
                    .find(".csui-thumbnail-item-" + b.cid)
                    .addClass("csui-new-thumbnail-item");
              var C = ".csui-thumbnail-name-" + b.cid,
                k = this.$el.find(C),
                y = new i.Region({ el: k });
              return (
                this.activeInlineForm.listenTo(
                  this.activeInlineForm,
                  "destroy",
                  () => {
                    delete this.activeInlineForm,
                      this.trigger("destroy:inlineform");
                  }
                ),
                y.show(this.activeInlineForm),
                !0
              );
            } else return !1;
          },
          updateRow: function (w) {
            if (
              (w.isLocallyCreated &&
                this.$el.find(".csui-thumbnail-item-form") &&
                this.$el
                  .find(".csui-thumbnail-item-form")
                  .find(".csui-thumbnail-content-container")
                  .addClass("csui-new-item"),
              (this.isSelected =
                this.collection.where({ csuiIsSelected: !0 }).length > 0),
              w.inlineFormView)
            ) {
              this.options.originatingView.updateRowIndex =
                this.collection.indexOf(w);
              var b = this;
              if (b.activeInlineForm && b.activeInlineForm.model !== w) {
                var C = b.activeInlineForm.model.cid,
                  k = b.activeInlineForm.model.isLocallyCreated,
                  y = b.activeInlineForm.$el.parents(".csui-thumbnail-item");
                this.$el
                  .find(".csui-thumbnail-item-form")
                  .removeClass("csui-thumbnail-item-form"),
                  this.$el
                    .find(".csui-thumbnail-item-form")
                    .removeClass("csui-thumbnail-item-rename-form"),
                  this.$el
                    .find(".csui-new-thumbnail-item")
                    .removeClass("csui-new-thumbnail-item"),
                  this.activeInlineForm.model.trigger("sync"),
                  this.cancelAnyExistingInlineForm({ silent: !0 }),
                  k &&
                    this.$el
                      .find(".csui-thumbnail-item-" + C)
                      .find(".csui-thumbnail-content-container")
                      .addClass("csui-new-item");
              }
              !w.changed.csuiInlineFormErrorMessage &&
                !w.isLocallyCreated &&
                this.trigger("cancelInlineForm", { silent: !0 }),
                (b.activeInlineForm = new w.inlineFormView({
                  model: w,
                  originatingView: b.options.originatingView,
                  context: b.context,
                })),
                this.$el
                  .find(".csui-thumbnail-item-" + w.cid)
                  .addClass("csui-thumbnail-item-rename-form"),
                w.get("type") === 140 &&
                  this.$el
                    .find(".csui-thumbnail-item-" + w.cid)
                    .addClass("csui-new-thumbnail-item");
              var S = ".csui-thumbnail-name-" + w.cid,
                P = this.$el.find(S);
              if (
                (b.activeInlineForm.listenTo(
                  b.activeInlineForm,
                  "destroy",
                  function () {
                    (b.lockedForOtherContols = !1),
                      b.activeInlineForm.model.trigger("sync"),
                      delete b.activeInlineForm,
                      (w.renamed = !0),
                      b.trigger("destroy:inlineform");
                  }
                ),
                this.$el
                  .find(".csui-thumbnail-item-" + w.cid)
                  .removeClass("csui-thumbnail-item-apply-transition"),
                b.$el
                  .find(".csui-thumbnail-item-" + b.activeInlineForm.model.cid)
                  .addClass("csui-thumbnail-item-form"),
                P.length > 0)
              ) {
                var F = new i.Region({ el: P });
                F.show(b.activeInlineForm), b.trigger("show:inlineform");
              }
              b.$el
                .find(".csui-thumbnail-item-" + b.activeInlineForm.model.cid)
                .removeClass("csui-thumbnail-item-rename-form"),
                b.$el
                  .find(".csui-thumbnail-item-" + b.activeInlineForm.model.cid)
                  .find("div.csui-thumbnail-overview-icon")
                  .addClass("binf-hidden");
              const D = this.$el.find(".csui-thumbnail-item-form");
              D?.find(
                ".csui-thumbnail-content-container .csui-inlineform-error"
              )?.length > 0 &&
                (D.find(
                  ".csui-thumbnail-content-container.csui-new-item"
                ).addClass("csui-new-item-error"),
                D?.find(".csui-thumbnail-item-container")?.addClass(
                  "csui-normal-scrolling"
                )),
                b.activeInlineForm &&
                  P.length > 0 &&
                  b.activeInlineForm.triggerMethod(
                    "dom:refresh",
                    b.activeInlineForm
                  );
            } else
              this.$el
                .find(".csui-thumbnail-item-" + w.cid)
                .removeClass("csui-thumbnail-item-form"),
                this.$el
                  .find(".csui-thumbnail-item-" + w.cid)
                  .addClass("csui-thumbnail-item-apply-transition"),
                this.$el
                  .find(".csui-thumbnail-item-" + w.cid)
                  .removeClass("csui-new-thumbnail-item"),
                this.activeInlineForm &&
                  this.activeInlineForm.model.cid === w.cid &&
                  (this.activeInlineForm.model.trigger("sync"),
                  this.cancelAnyExistingInlineForm({ silent: !0 }),
                  (w.renamed = !0)),
                this.trigger("updateItem", w),
                this.collection &&
                  this.collection.filters.name &&
                  this.thumbnailHeaderView.searchBoxes &&
                  this.thumbnailHeaderView.searchBoxes.setFocus(),
                this.$el.find(
                  ".csui-thumbnail-content-container.csui-new-item.csui-new-item-error"
                ).length > 0 &&
                  this.$el
                    .find(
                      ".csui-thumbnail-content-container.csui-new-item.csui-new-item-error"
                    )
                    .removeClass("csui-new-item-error");
          },
          onAfterShow: function () {
            this.thumbnailHeaderView.searchBoxes.setFocus();
          },
          onShow: function () {
            this.isShown = !0;
          },
          _adjustThumbnailWidth: function () {
            for (
              var w = this.$el.find(".csui-thumbnail-item"),
                b = 190,
                C =
                  a(".csui-table-facetview .smart-facet-panel").length > 0
                    ? a(".csui-facet-table-container").width() -
                      a(".csui-table-facetview").width()
                    : a(".cs-thumbnail-wrapper").width(),
                k = 2,
                y = (b / C) * 100,
                S = 1;
              S <= w.length;
              S++
            ) {
              var P = S * y;
              if (P > 100) {
                (S = S - 1), (y = 100 / S);
                break;
              }
            }
            w.css({
              maxWidth: "calc(" + y + "% - " + k * 2 + "px)",
              minWidth: "calc(" + y + "% - " + k * 2 + "px)",
            });
          },
          cancelAnyExistingInlineForm: function (w, b) {
            this.trigger("cancelInlineForm", w),
              this.activeInlineForm && this.activeInlineForm.cancel(w);
          },
          startCreateNewModel: function (w, b) {
            this.cancelAnyExistingInlineForm(),
              this.collection &&
                this.collection.node &&
                (w.set("parent_id", this.collection.node.get("id")),
                (w.isLocallyCreated = !0),
                (w.inlineFormView = b),
                this.collection.add(w, { at: 0 }),
                this._adjustThumbnailWidth());
          },
          onRender: function () {
            this._createChildViews(),
              this.headerRegion.show(this.thumbnailHeaderView);
            var w = this;
            w.listenTo(w, "thumbnailRowRendered", function (b) {
              w.trigger("thumbnailItemRendered", {
                sender: w,
                target: b.target,
                node: b.node,
              });
            }),
              this.showToolBarActions(),
              this.resultsRegion.show(this.resultsView),
              this.listenTo(
                this.context,
                "maximize:widget",
                this._adjustThumbnailWidth
              ),
              this.listenTo(
                this.context,
                "restore:widget:size",
                this._adjustThumbnailWidth
              ),
              this.options.selectThumbnails === "single"
                ? this.$el.addClass("single-select-ThumbnailView")
                : this.$el.removeClass("single-select-ThumbnailView");
          },
          updateCollectionParameters: function () {
            var w = this.options.collection,
              b = this.options.context,
              C = w.makeFieldsV2,
              k = w.makeExpandableV2,
              y = {},
              S = {};
            this.options.collection.setFields &&
              ((C || k) &&
                w.getResourceScope &&
                w.setResourceScope &&
                (this._originalCollectionScope
                  ? w.setResourceScope(this._originalCollectionScope)
                  : (this._originalCollectionScope = w.getResourceScope())),
              d.each(
                this.options.allColumns,
                function (P) {
                  var F = P.CellView;
                  if (F) {
                    if (C && F.getModelFields) {
                      var D = F.getModelFields({
                        collection: w,
                        context: b,
                        column: P,
                      });
                      D && s.mergePropertyParameters(y, D);
                    }
                    if (k && F.getModelExpand) {
                      var L = F.getModelExpand({
                        collection: w,
                        context: b,
                        column: P,
                      });
                      L && s.mergePropertyParameters(S, L);
                    }
                    F.updateCollectionParameters &&
                      F.updateCollectionParameters({
                        collection: w,
                        context: b,
                        column: P,
                      });
                  }
                },
                this
              ),
              d.isEmpty(y) || w.setFields(y),
              d.isEmpty(S) || w.setExpand(S));
          },
          clearChildrenSelection: function () {
            this.thumbnailHeaderView &&
              this.thumbnailHeaderView.trigger("selectOrUnselect.all", !1, {});
          },
          showToolBarActions: function (w) {
            var b = this.getSelectedChildren();
            (b =
              (this.options.allSelectedNodes &&
                this.options.allSelectedNodes.models) ||
              b),
              this.thumbnailHeaderView.$el.find(
                ".csui-thumbnail-select .csui-control"
              ).length &&
                this.thumbnailHeaderView.$el
                  .find(".csui-thumbnail-select .csui-control")
                  .trigger("focus");
          },
          getSelectedChildren: function () {
            var w = [];
            return (
              this.options.collection.each(function (b) {
                b.get("csuiIsSelected") && w.push(b);
              }),
              w
            );
          },
        });
      return d.extend(g.prototype, r), d.extend(g.prototype, n), g;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/thumbnail.content",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui-ext!csui/controls/thumbnail/thumbnail.content",
    ],
    function (v, d, a) {
      var h = d.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        i = d.Collection.extend({
          model: h,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new i(
              this.map(function (u) {
                return u.attributes;
              })
            );
          },
        }),
        e = [
          { key: "name", sequence: 4, defaultAction: !0, isNaming: !0 },
          { key: "reserved", sequence: 5, displayTitle: !0, title: "State" },
          { key: "wnd_comments", sequence: 900 },
          { key: "favorite", sequence: 910 },
          { key: "overview", sequence: 920, showoverview: !0 },
        ];
      a &&
        v.each(a, function (u) {
          v.each(u, function (r, t) {
            r.push(r);
          });
        });
      var l = new i(e);
      return l;
    }
  ),
  csui.define(
    "hbs!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return "other";
        },
        3: function (i, e, l, u, r) {
          return "self";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<button type="button" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "reservedAria") ||
                  (e != null ? s(e, "reservedAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "reservedAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 34 },
                      end: { line: 1, column: 50 },
                    },
                  })
                : n)
            ) +
            `">
<span class="icon ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "iconPrefix") || (e != null ? s(e, "iconPrefix") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "iconPrefix",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 18 },
                      end: { line: 2, column: 32 },
                    },
                  })
                : n)
            ) +
            "_" +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isReservedByOther") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 2, column: 33 },
                  end: { line: 2, column: 82 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
        title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "reservedTooltip") ||
                  (e != null ? s(e, "reservedTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "reservedTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 15 },
                      end: { line: 3, column: 34 },
                    },
                  })
                : n)
            ) +
            `"></span>
</button>

`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_thumbnail_content_node.state_impl_reservation_reservation",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/user",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/commandhelper",
      "hbs!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",
      "i18n!csui/controls/thumbnail/content/node.state/impl/nls/localized.strings",
      "css!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = d.ItemView.extend(
        {
          tagName: "li",
          className: "csui-node-state-reservation",
          template: u,
          triggers: { "click button": "remove:reservation" },
          constructor: function () {
            d.ItemView.prototype.constructor.apply(this, arguments);
            var s = this.options.context.getModel(h);
            (this.userId = s.get("id")),
              (this.unreserveCommand = e.get("UnreserveDoc")),
              (this.commandStatus = {
                nodes: new i([this.model]),
                context: this.options.context,
              });
            var o = this.model.actions;
            o &&
              this.listenTo(o, "update", function () {
                !this._isDestroyed &&
                  !this.options.targetView &&
                  (this.render(),
                  this.$el.find("button").attr("tabindex", "-1"));
              });
          },
          templateHelpers: function () {
            var n = this._getReservedStatus(),
              s = n.isReserved,
              o = n.isSharedCollaboration,
              c = n.reservedBy,
              m,
              f,
              g;
            if (s) {
              var w = a.formatExactDate(this.model.get("reserved_date")),
                b = a.formatMemberName(c);
              o
                ? ((m = r.reservedSharedCollaborationTooltip),
                  (f = r.reservedSharedCollaborationAria))
                : ((m = r.reservedTooltip), (f = r.reservedAria)),
                (m = v.str.sformat(m, b, w)),
                (f = v.str.sformat(f, b, w)),
                (g = o ? "icon-shared_collaborate" : "icon-reserved");
            }
            return (
              (this._reservedStatus = {
                isReserved: s,
                isSharedCollaboration: o,
                isReservedByOther: c && this.userId !== c.id,
                canUnreserve: n.canUnreserve,
                reservedTooltip: m,
                reservedAria: f,
                iconPrefix: g,
              }),
              this._reservedStatus
            );
          },
          onRemoveReservation: function (n) {
            if (
              !this.model.get("FromThumbnailStateIconView") &&
              this._reservedStatus.canUnreserve
            ) {
              var s = this.unreserveCommand,
                o = s.execute(this.commandStatus);
              l.handleExecutionResults(o, {
                command: s,
                suppressSuccessMessage:
                  this.commandStatus.suppressSuccessMessage,
                suppressFailMessage: this.commandStatus.suppressFailMessage,
              });
            }
          },
          _getReservedStatus: function () {
            var n = this.model.get("reserved"),
              s = this.model.get("reserved_shared_collaboration"),
              o = this.model.get("reserved_user_id_expand"),
              c = this.unreserveCommand.enabled(this.commandStatus);
            return (
              o ||
                ((o = this.model.get("reserved_user_id")),
                o && typeof o == "number" && (o = { id: o })),
              {
                isReserved: (n && o !== void 0) || s,
                isSharedCollaboration: s,
                reservedBy: o,
                canUnreserve: c,
              }
            );
          },
          getAttributes: function () {
            var n = this.templateHelpers(),
              s,
              o;
            return (
              n.isSharedCollaboration
                ? ((s = r.reserved_shared_collaboration_attribute_title),
                  (o = r.reserved_shared_collaboration_attribute_name))
                : ((s = r.reserved_attribute_title),
                  (o = r.reserved_attribute_name)),
              [
                {
                  label: s,
                  value: n.isReserved,
                  name: o,
                  tooltip: n.reservedTooltip,
                  aria: n.reservedAria,
                },
              ]
            );
          },
        },
        {
          enabled: function (n) {
            var s = n.node,
              o = s.get("reserved"),
              c = s.get("reserved_shared_collaboration"),
              m = s.get("reserved_user_id");
            return (o && m) || c;
          },
          getModelExpand: function (n) {
            return { properties: ["reserved_user_id"] };
          },
        }
      );
      return t;
    }
  ),
  csui.define(
    "csui/controls/thumbnail/content/node.state/impl/node.state.icons",
    [
      "csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view",
    ],
    function (v) {
      "use strict";
      return [{ sequence: 5, iconView: v }];
    }
  ),
  csui.define("csui/controls/zipanddownload/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/zipanddownload/impl/nls/root/lang", {
    itemCount: "{0} item",
    itemsCount: "{0} items",
    moreThan100: "100+",
    preflightDialogTitle: "Download details",
    itemsExcludedMessage:
      "Items with the following types will be excluded from the Zip file:",
    downloadDialogTitle: "Download Zip file",
    zipFileName: "Zip file name",
    skippedItemsLabel: "The following {0} items cannot be downloaded",
    skippedItemLabel: "The following item cannot be downloaded",
    labelType: "Type",
    labelName: "Name",
    labelLocation: "Location",
    labelMessage: "Message",
    txtItems: "items",
  }),
  csui.define(
    "hbs!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            ' aria-describedby="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "describedBy") ||
                  (e != null ? n(e, "describedBy") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "describedBy",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 81 },
                      end: { line: 2, column: 96 },
                    },
                  })
                : t)
            ) +
            '"'
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<span class="cs-header-control csui-zipanddownload-details">
  <span class="csui-items">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "itemsCount") || (e != null ? n(e, "itemsCount") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "itemsCount",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 27 },
                      end: { line: 7, column: 41 },
                    },
                  })
                : t)
            ) +
            ` </span>
  <span class="csui-size">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "size") || (e != null ? n(e, "size") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "size",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 26 },
                      end: { line: 8, column: 34 },
                    },
                  })
                : t)
            ) +
            `</span>
</span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<span class="tile-title">
  <span class="tile-title binf-modal-title"` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "describedBy") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 43 },
                  end: { line: 2, column: 104 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
      ` +
            i.escapeExpression(
              ((n =
                (n = s(l, "title") || (e != null ? s(e, "title") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 6 },
                      end: { line: 3, column: 15 },
                    },
                  })
                : n)
            ) +
            `</span>
</span>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "itemCountExists") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(3, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 0 },
                  end: { line: 10, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_zipanddownload_impl_dialog.header_impl_dialog.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/zipanddownload/impl/dialog.header/dialog.header.view",
    [
      "csui/lib/underscore",
      "csui/controls/dialog/impl/header.view",
      "csui/utils/base",
      "i18n!csui/controls/zipanddownload/impl/nls/lang",
      "hbs!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",
      "css!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",
    ],
    function (v, d, a, h, i) {
      var e = d.extend({
        template: i,
        ui: { header: ".binf-modal-title" },
        templateHelpers: function () {
          return {
            title: this.options.title,
            itemCountExists:
              this.options.hasOwnProperty("itemsCount") &&
              this.options.itemsCount > 0,
            itemsCount: this.options.hasOwnProperty("itemsCount")
              ? v.str.sformat(
                  this.options.itemsCount === 1 ? h.itemCount : h.itemsCount,
                  this.options.itemsCount
                )
              : "",
            size: this.options.size
              ? a.formatFriendlyFileSize(this.options.size * 1024)
              : "",
            describedBy: this.options.describedBy,
          };
        },
        constructor: function (u) {
          d.prototype.constructor.call(this, u);
        },
        onRender: function () {
          this.options.source === "downloadZip"
            ? this.ui.header.addClass("csui-heading-v2")
            : this.ui.header.addClass("csui-heading");
        },
      });
      return e;
    }
  ),
  csui.define(
    "hbs!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            `          <div class="csui-preflight-table-row">
            <div class="csui-preflight-cell csui-type">
              <span class="` +
            i.escapeExpression(i.lambda(e != null ? t(e, "mimeIcon") : e, e)) +
            `"></span>
            </div>
            <div class="csui-preflight-cell csui-name">` +
            i.escapeExpression(i.lambda(e != null ? t(e, "typeName") : e, e)) +
            `</div>
          </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="binf-modal-dialog ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "binfDialogSizeClassName") ||
                  (e != null ? s(e, "binfDialogSizeClassName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "binfDialogSizeClassName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 30 },
                      end: { line: 1, column: 57 },
                    },
                  })
                : n)
            ) +
            `" role="dialog" aria-modal="true" aria-hidden="false">
  <div class="binf-modal-content">
    <div class="tile-header binf-modal-header"></div>
    <div class="binf-modal-body">
      <div class="csui-preflight-table csui-preflight-table-body">
        <div>` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "itemsExcludedMessage") ||
                  (e != null ? s(e, "itemsExcludedMessage") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "itemsExcludedMessage",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 13 },
                      end: { line: 6, column: 37 },
                    },
                  })
                : n)
            ) +
            `</div>
        <div>` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "skippedTypes") ||
                  (e != null ? s(e, "skippedTypes") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "skippedTypes",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 13 },
                      end: { line: 7, column: 29 },
                    },
                  })
                : n)
            ) +
            `</div>
      </div>
    </div>
    <div class="binf-hidden">
      <div class="csui-preflight-table csui-preflight-table-header">
        <div class="csui-preflight-cell csui-type">Type</div>
        <div class="csui-preflight-cell csui-name">Name</div>
      </div>
      <div class="csui-preflight-table csui-preflight-table-body csui-normal-scrolling">
` +
            ((t = s(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "skippedTypes") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 16, column: 8 },
                  end: { line: 23, column: 17 },
                },
              }
            )) != null
              ? t
              : "") +
            `      </div>
    </div>
  </div>
  <div class="binf-modal-footer binf-hidden"></div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_zipanddownload_impl_preflight.dialog_impl_preflight.dialog",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/zipanddownload/impl/preflight.dialog/preflight.dialog.view",
    [
      "csui/controls/dialog/dialog.view",
      "csui/controls/zipanddownload/impl/dialog.header/dialog.header.view",
      "i18n!csui/controls/zipanddownload/impl/nls/lang",
      "hbs!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",
      "css!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",
    ],
    function (v, d, a, h) {
      var i = v.extend({
        className:
          "csui-zipanddownload-dialog csui-zipanddownload-preflight-dialog csui-preflight-check",
        template: h,
        templateHelpers: function () {
          var e = {};
          return (
            this.options.model.get("results") &&
              this.options.model.get("results").data &&
              this.options.model.get("results").data.jobs &&
              (e = this.options.model.get("results").data.jobs),
            {
              itemsExcludedMessage: a.itemsExcludedMessage,
              skipped: e.total_skipped,
              skippedTypes: e.skipped_types
                .map(function (l) {
                  return l.name;
                })
                .join(", "),
            }
          );
        },
        constructor: function (l) {
          v.prototype.constructor.call(this, l);
        },
        _renderHeader: function () {
          this.getRegion("header").show(
            new d({ title: a.preflightDialogTitle })
          );
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `        <div class="csui-unprocessed-item-list">
          <div class="csui-info" role="alert" id="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "alertMsgId") || (e != null ? s(e, "alertMsgId") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "alertMsgId",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 50 },
                      end: { line: 17, column: 64 },
                    },
                  })
                : n)
            ) +
            `">
            <span class="notification_warning_orange"></span>
            <span class="notification_message">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "skippedItemsLabel") ||
                  (e != null ? s(e, "skippedItemsLabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "skippedItemsLabel",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 47 },
                      end: { line: 19, column: 68 },
                    },
                  })
                : n)
            ) +
            `</span>
          </div>
            <div class="csui-skipped-container-wrapper csui-normal-scrolling">
              <table class="csui-skipped-container" aria-labelledby="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "alertMsgId") || (e != null ? s(e, "alertMsgId") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "alertMsgId",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 69 },
                      end: { line: 22, column: 83 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0">
                <thead class="csui-skipped-item-table csui-download-table-header">
                  <tr class="csui-skipped-item-table csui-download-table-header">
                    <th class="csui-skipped-item-cell csui-type">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "labelType") || (e != null ? s(e, "labelType") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "labelType",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 65 },
                      end: { line: 25, column: 78 },
                    },
                  })
                : n)
            ) +
            `</th>
                    <th class="csui-skipped-item-cell csui-name">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "labelName") || (e != null ? s(e, "labelName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "labelName",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 65 },
                      end: { line: 26, column: 78 },
                    },
                  })
                : n)
            ) +
            `</th>
                    <th class="csui-skipped-item-cell csui-location">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "labelLocation") ||
                  (e != null ? s(e, "labelLocation") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "labelLocation",
                    hash: {},
                    loc: {
                      start: { line: 27, column: 69 },
                      end: { line: 27, column: 86 },
                    },
                  })
                : n)
            ) +
            `</th>
                    <th class="csui-skipped-item-cell csui-message">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "labelMessage") ||
                  (e != null ? s(e, "labelMessage") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "labelMessage",
                    hash: {},
                    loc: {
                      start: { line: 28, column: 68 },
                      end: { line: 28, column: 84 },
                    },
                  })
                : n)
            ) +
            `</th>
                  </tr>
                </thead>
                <tbody class="csui-skipped-item-table csui-download-table-body">
` +
            ((t = s(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "skippedTypes") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(2, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 32, column: 18 },
                  end: { line: 48, column: 27 },
                },
              }
            )) != null
              ? t
              : "") +
            `                </tbody>
              </table>
            </div>
        </div>
`
          );
        },
        2: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            `                    <tr class="csui-download-table-row">
                      <td class="csui-skipped-item-cell csui-type">
                        <span title="` +
            i.escapeExpression(
              i.lambda(e != null ? t(e, "subtype_name") : e, e)
            ) +
            '" class="' +
            i.escapeExpression(i.lambda(e != null ? t(e, "mimeIcon") : e, e)) +
            `"></span>
                      </td>
                      <td role="rowheader" class="csui-skipped-item-cell csui-name">
                        <span title="` +
            i.escapeExpression(i.lambda(e != null ? t(e, "name") : e, e)) +
            '">' +
            i.escapeExpression(i.lambda(e != null ? t(e, "name") : e, e)) +
            `</span>
                      </td>
                      <td class="csui-skipped-item-cell csui-location">
                        <span class="csui-location-name"
                              title="` +
            i.escapeExpression(i.lambda(e != null ? t(e, "path") : e, e)) +
            '">' +
            i.escapeExpression(
              i.lambda(e != null ? t(e, "parentLocation") : e, e)
            ) +
            `</span>
                      </td>
                      <td class="csui-skipped-item-cell csui-message">
                        <span title="` +
            i.escapeExpression(i.lambda(e != null ? t(e, "details") : e, e)) +
            '">' +
            i.escapeExpression(i.lambda(e != null ? t(e, "details") : e, e)) +
            `</span>
                      </td>
                    </tr>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<div class="binf-modal-dialog ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "binfDialogSizeClassName") ||
                  (e != null ? s(e, "binfDialogSizeClassName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "binfDialogSizeClassName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 30 },
                      end: { line: 1, column: 57 },
                    },
                  })
                : n)
            ) +
            `" role="dialog" aria-modal="true"
     aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "zipFileName") ||
                  (e != null ? s(e, "zipFileName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "zipFileName",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 17 },
                      end: { line: 2, column: 32 },
                    },
                  })
                : n)
            ) +
            `">
  <div class="binf-modal-content">
    <div class="tile-header binf-modal-header"></div>
    <div class="binf-modal-body">
      <div class="csui-zipanddownload">
        <div class="csui-zipanddownload-filename">
          <label for="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "inputId") || (e != null ? s(e, "inputId") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "inputId",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 22 },
                      end: { line: 8, column: 33 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "zipFileName") ||
                  (e != null ? s(e, "zipFileName") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "zipFileName",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 35 },
                      end: { line: 8, column: 50 },
                    },
                  })
                : n)
            ) +
            `</label>
          <input type="text" id="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "inputId") || (e != null ? s(e, "inputId") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "inputId",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 33 },
                      end: { line: 9, column: 44 },
                    },
                  })
                : n)
            ) +
            '" class="csui-archive-name" name="download-name" value="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "fileName") || (e != null ? s(e, "fileName") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "fileName",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 100 },
                      end: { line: 9, column: 112 },
                    },
                  })
                : n)
            ) +
            `">
        </div>
        <div class="csui-archive-name-error-container">
          <span class="csui-archive-name-error" id="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "nameErrorId") ||
                  (e != null ? s(e, "nameErrorId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "nameErrorId",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 52 },
                      end: { line: 12, column: 67 },
                    },
                  })
                : n)
            ) +
            `"></span>
        </div>
      </div>
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "skippedTypes") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 15, column: 6 },
                  end: { line: 53, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
  </div>
  <div class="binf-modal-footer binf-hidden"></div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_zipanddownload_impl_download.dialog_impl_download.dialog",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/zipanddownload/impl/download.dialog/download.dialog.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/controls/dialog/dialog.view",
      "csui/utils/base",
      "csui/utils/nodesprites",
      "i18n!csui/controls/zipanddownload/impl/nls/lang",
      "csui/models/node/node.model",
      "csui/utils/accessibility",
      "csui/controls/zipanddownload/impl/dialog.header/dialog.header.view",
      "hbs!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",
      "css!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      var n = a.extend({
        className: "csui-zipanddownload-dialog csui-download-dialog",
        template: t,
        templateHelpers: function () {
          var s = this.options.model,
            o =
              this.options.model.get("unprocessed_items_list") &&
              this.options.model.get("unprocessed_items_list").length,
            c = d.uniqueId("msg"),
            m = d.uniqueId("err");
          return (
            this.options.model.get("unprocessed_items_list") &&
              this.options.model
                .get("unprocessed_items_list")
                .map(function (f) {
                  f.mimeIcon = i.findClassByNode(
                    new l({
                      id: f.id,
                      container: f.container,
                      mime_type: f.mimetype,
                      type: f.subtype,
                    })
                  );
                }),
            o && o > 0 && (this.describedBy = c),
            {
              inputId: d.uniqueId("input"),
              alertMsgId: c,
              nameErrorId: m,
              skipped: s.get("total_skipped"),
              skippedTypes: s.get("unprocessed_items_list"),
              supported: s.get("total_supported"),
              size: h.formatFriendlyFileSize(s.get("total_supported_size")),
              fileName: this.options.model.get("name"),
              zipFileName: e.zipFileName,
              labelType: e.labelType,
              labelName: e.labelName,
              labelLocation: e.labelLocation,
              labelMessage: e.labelMessage,
              skippedItemsLabel: d.str.sformat(
                o === 1 ? e.skippedItemLabel : e.skippedItemsLabel,
                o
              ),
            }
          );
        },
        ui: d.extend(
          {
            fileName: "input[name=download-name]",
            errorEl: ".csui-archive-name-error",
          },
          a.prototype.ui
        ),
        events: d.extend(
          {
            "keypress @ui.fileName": "downloadArchive",
            "focusin @ui.fileName": "onFocusInFileName",
            keyup: "onKeyInView",
          },
          a.prototype.events
        ),
        constructor: function (o) {
          o || (o = {}),
            (o.dialogTxtAria = e.downloadDialogTitle),
            (this.noTabablesBehavior = !0),
            (o.headerView = this._createDownloadHeaderView(o)),
            a.prototype.constructor.call(this, o);
        },
        _createDownloadHeaderView: function (s) {
          return new r({
            title: e.downloadDialogTitle,
            describedBy: "download-zip-file",
            source: "downloadZip",
            itemsCount: s.model?.get("total"),
            size: s.model?.get("total_size"),
          });
        },
        downloadArchive: function (s) {
          if (s.type === "keypress" && s.keyCode === 13) {
            s.preventDefault();
            var o = this.$el.find("#zipDownload").first();
            o.length && !o.is(":disabled") && o.trigger("click");
          }
        },
        onKeyInView: function (s) {
          if (
            (s.keyCode === 27 &&
              !s.isDefaultPrevented() &&
              (s.stopPropagation(), this.destroy()),
            s.keyCode === 9 && this.$el.is(document.activeElement))
          ) {
            var o = s.shiftKey
              ? this.getActiveRegion(!0)
              : this.getActiveRegion();
            v(o).trigger("focus"), s.stopPropagation();
          }
        },
        getActiveRegion: function (s) {
          var o = this.$el.find("*[tabindex=0]:not(:disabled):visible, input");
          return s && o.length ? o[o.length - 1] : o.length && o[0];
        },
        onFocusInFileName: function (s) {
          if (!u.isAccessibleMode()) {
            var o = v(s.target)[0],
              c = o.value,
              m = c ? c.length : 0;
            c.lastIndexOf(".") > 0 &&
              c.lastIndexOf(".") < c.length - 1 &&
              (m = c.lastIndexOf(".")),
              (o.selectionEnd = m);
          }
        },
      });
      return n;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/members.picker.dialog",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/dialog/dialog.view",
      "csui/dialogs/members.picker/impl/members.picker.view",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/member",
      "csui/models/member/member.model",
      "csui/models/member/membercollection",
      "csui/dialogs/members.picker/start.locations/start.location.collection",
      "csui/dialogs/members.picker/impl/command.type",
      "csui/dialogs/members.picker/impl/header/members.picker.header.view",
      "i18n!csui/dialogs/members.picker/impl/nls/lang",
      "csui/utils/log",
      "csui/controls/progressblocker/blocker",
      "css!csui/dialogs/members.picker/impl/members.picker",
      "csui/dialogs/node.picker/node.picker",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g) {
      "use strict";
      var w = d.extend(
          {
            initialLocationLookupOrder: [
              "csui/dialogs/members.picker/start.locations/recent.groups",
              "csui/dialogs/members.picker/start.locations/member.groups",
              "csui/dialogs/members.picker/start.locations/all.members",
            ],
          },
          v.config()
        ),
        b = {
          initialSelection: [],
          dialogTitle: m.dialogTitle,
          orderBy: "name asc",
        };
      function C(k) {
        if (
          (k || (k = {}),
          (this.options = d.defaults(k, b, { pageSize: 30 })),
          this.options.connector ||
            (this.options.connector = this._getConnector(this.options)),
          !this.options.connector)
        ) {
          var y = m.missingConnector;
          throw (f.error(y) && console.error(y), new Error(y));
        }
        (this.options.targetBrowseHistory = []),
          (this.options.navigateFromHistory = !1),
          (this.options.initialContainer = this._getInitalContainer(
            this.options
          )),
          (this.options.unselectableMembers = this._getArrayOfNodeIds(
            k.unselectableMembers
          )),
          (this.options.commandType = new o(this.options));
      }
      return (
        d.extend(C.prototype, {
          show: function () {
            return (
              (this._locations = new s(this.options)),
              this._locations
                .fetch({
                  connector: this.options.connector,
                  container: this.options.initialContainer,
                  removeInvalid: !1,
                })
                .done(d.bind(this._showDialog, this)),
              (this._deferred = a.Deferred()),
              this._deferred.promise()
            );
          },
          _showDialog: function () {
            var k = this.options,
              y = this._getInitialLocation();
            (this._headerControl = this._createHeaderControl(y)),
              (this._view = this._createPickerView(y)),
              (this._dialog = this._createDialog()),
              this._dialog.show();
          },
          _createHeaderControl: function (k) {
            var y = this.options,
              S = y.locationSelector == null ? !0 : y.locationSelector,
              P = new c({
                headerViewoptions: this.options,
                locations: this._locations,
                title: y.dialogTitle,
                context: y.context,
                initialLocation: k,
                adduserorgroup: y.adduserorgroup ? y.adduserorgroup : !1,
                locationSelector: S,
                initialSelection: y.initialSelection,
              });
            return (
              y.adduserorgroup &&
                P.startLocationView.on(
                  "change:location",
                  this.onChangeLocation,
                  this
                ),
              P
            );
          },
          _createPickerView: function (k) {
            this.options.startLocation ||
              (this.options.startLocation = this._locations.at(0));
            var y = this.options,
              S = k.get("factory"),
              P = S.getLocationParameters(this.options);
            d.defaults(P, this.options);
            var F = new l(P);
            return (
              F.on("changing:selection", this._blockDialog, this).on(
                "change:location",
                this.onChangeLocation,
                this
              ),
              y.adduserorgroup &&
                F.on("change:complete", this.onSelectionChange, this),
              (this.membersPickerView = F),
              F
            );
          },
          dialogClassName: function () {
            var k = "target-browse";
            return (
              this.options &&
                this.options.userClassName &&
                (k = k + " " + this.options.userClassName),
              k
            );
          },
          _createDialog: function () {
            var k = this.options,
              y = [{ label: m.cancelButtonLabel, close: !0 }];
            k.adduserorgroup &&
              (y = [
                {
                  id: "select",
                  label: k.addButtonLabel || k.commandType.addButtonLabel,
                  default: !0,
                  disabled: !0,
                  click: d.bind(this.onClickAddButton, this),
                },
                { label: m.cancelButtonLabel, close: !0 },
              ]);
            var S = new e({
              title: k.dialogTitle,
              adduserorgroup: k.adduserorgroup ? k.adduserorgroup : !1,
              headerView: this._headerControl,
              view: this._view,
              className: this.dialogClassName,
              userClassName: this.options.dialogClass,
              attributes: { "aria-label": k.dialogTitle },
              largeSize: !0,
              buttons: y,
            });
            return (
              S.listenTo(S, "hide", d.bind(this.onHideDialog, this)),
              g.imbue(S),
              S
            );
          },
          _blockDialog: function () {
            return this._dialog.blockWithoutIndicator(), !0;
          },
          onHideDialog: function () {
            this._deferred &&
              (this._result
                ? this._deferred.resolve(this._result)
                : this._deferred.state() === "pending" &&
                  this._deferred.reject({ cancelled: !0 }));
          },
          onChangeLocation: function (k) {
            k.get ||
              (k = this._locations.get(
                "csui/dialogs/members.picker/start.locations/" + k
              )),
              (this.options.targetBrowseHistory = []),
              this._view.destroy(),
              this.membersPickerView.trigger("change:complete"),
              (this.options.previousLocation = k),
              (this._view = this._createPickerView(k));
            var y = k.get("factory").container;
            this._dialog.showView(this._view);
          },
          onClickAddButton: function () {
            if (this && this._view && this._view.getSelection()) {
              var k = this._view.getSelection();
              (this._result = { members: k }), this._dialog.destroy();
            } else this._dialog.updateButton("select", { disabled: !0 });
          },
          _getArrayOfNodeIds: function (k) {
            return k && !d.isEmpty(k) && k[0] instanceof h.Model
              ? d.map(k, function (y) {
                  return y.get("right_id");
                })
              : k;
          },
          _getInitalContainer: function (k) {
            var y = this.options.initialContainer;
            return (
              y == null || d.isEmpty(y) || !(y instanceof h.Model)
                ? (y = new t(
                    { groupId: k.groupId, displayName: k.displayName },
                    { connector: k.connector }
                  ))
                : y == null,
              y
            );
          },
          _getConnector: function (k) {
            var y;
            if (k.context) y = k.context.getObject(u);
            else if (k.initialSelection || k.initialContainer) {
              var S = k.initialSelection,
                P = S ? (d.isArray(S) ? S : S.models) : void 0,
                F = k.initialContainer || P[0];
              y = F && F.connector;
            }
            return y;
          },
          _getInitialLocation: function () {
            var k = this.options.startLocation,
              y;
            if (k) {
              var S = k.lastIndexOf("/");
              S < 0 && (k = "csui/dialogs/members.picker/start.locations/" + k),
                (y = this._locations.get(k));
            }
            return (
              !k &&
                this.options.groupId &&
                (y = this._locations.get(
                  "csui/dialogs/members.picker/start.locations/current.group"
                )),
              y
            );
          },
          onSelectionChange: function (k) {
            var y = this._view.getNumberOfSelectItems() > 0,
              S;
            k && k.get("id") && (this.options.locationID = k.get("id")),
              this._dialog.destroyBlockingView(),
              this.options.saveFilter &&
              this._headerControl &&
              this._headerControl.ui.saveFilter
                ? ((S = !!this._headerControl.ui.saveFilter.val().trim()),
                  S && y
                    ? this._dialog.updateButton("select", { disabled: !1 })
                    : this._dialog.updateButton("select", { disabled: !0 }))
                : this._dialog.updateButton("select", { disabled: !y });
          },
        }),
        C
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/node.picker.v2",
    [
      "nuc/lib/underscore",
      "csui/utils/log",
      "csui/dialogs/node.picker/node.picker",
    ],
    function (v, d, a) {
      "use strict";
      function h(i) {
        return (
          console.warn(
            'DEPRECATED: Use "csui/dialogs/node.picker/node.picker" instead.'
          ),
          new a(i)
        );
      }
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/data/impl/csui.node.picker.extra.data",
    [],
    function () {
      "use strict";
      return {
        getModelFields: function (v) {
          return { properties: [], permissions: [] };
        },
      };
    }
  ),
  csui.define("csui/dialogs/multilingual.text.picker/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/dialogs/multilingual.text.picker/impl/nls/root/lang", {
    formHeading:
      "This field can be translated for each defined metadata language",
    dialogTitle: "Multilingual Values",
    btnDone: "Done",
    btnCancel: "Cancel",
  }),
  csui.define(
    "csui/dialogs/multilingual.text.picker/languages",
    [],
    function () {
      var v = {
        en: { LanguageName: "English", LanguageNameLocal: "English" },
        "en-US": {
          LanguageName: "English ( United States )",
          LanguageNameLocal: "English ( United States )",
        },
        ar: {
          LanguageName: "Arabic",
          LanguageNameLocal: "\u0627\u0644\u0639\u0631\u0628\u064A\u0629",
        },
        "ca-ES": { LanguageName: "Catalan", LanguageNameLocal: "Catal\xE0" },
        "zh-CN": {
          LanguageName: "Simplified Chinese",
          LanguageNameLocal: "\u4E2D\u6587",
        },
        "zh-TW": {
          LanguageName: "Traditional Chinese",
          LanguageNameLocal: "\u4E2D\u6587",
        },
        nl: { LanguageName: "Dutch", LanguageNameLocal: "Nederlands" },
        "fi-FI": { LanguageName: "Finnish", LanguageNameLocal: "Suomi" },
        fr: { LanguageName: "French", LanguageNameLocal: "Fran\xE7ais" },
        de: { LanguageName: "German", LanguageNameLocal: "Deutsch" },
        it: { LanguageName: "Italian", LanguageNameLocal: "Italiano" },
        ja: {
          LanguageName: "Japanese",
          LanguageNameLocal: "\u65E5\u672C\u8A9E",
        },
        "kk-KZ": {
          LanguageName: "Kazakh",
          LanguageNameLocal: "\u049A\u0430\u0437\u0430\u049B",
        },
        "ko-KR": {
          LanguageName: "Korean",
          LanguageNameLocal: "\uD55C\uAD6D\uC5B4",
        },
        pt: { LanguageName: "Portuguese", LanguageNameLocal: "Portugu\xEAs" },
        "ru-RU": {
          LanguageName: "Russian",
          LanguageNameLocal: "\u0420\u0443\u0441\u0441\u043A\u0438\u0439",
        },
        es: { LanguageName: "Spanish", LanguageNameLocal: "Espa\xF1ol" },
        sv: { LanguageName: "Swedish", LanguageNameLocal: "Svenska" },
        "uk-UA": {
          LanguageName: "Ukrainian",
          LanguageNameLocal:
            "\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",
        },
      };
      return v;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/multilingual.text.picker/impl/multilingual.form",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r, t, n) {
          var s =
            i.lookupProperty ||
            function (o, c) {
              if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
            };
          return (
            `    <div class="binf-row">
      <label class="binf-control-label alpaca-control-label binf-col-sm-4"
             for="input-` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageCode") : e, e)
            ) +
            `"
             title="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageNameLocal") : e, e)
            ) +
            `"
             lang="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageCode") : e, e)
            ) +
            '">' +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageNameLocal") : e, e)
            ) +
            `</label>
      <div class="binf-col-sm-8 input-container">
        <label lang="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageCode") : e, e)
            ) +
            `">
          <input id="input-` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageCode") : e, e)
            ) +
            '" value="' +
            i.escapeExpression(
              s(l, "lookup").call(
                e ?? (i.nullContext || {}),
                n[1] != null ? s(n[1], "data") : n[1],
                e != null ? s(e, "LanguageCode") : e,
                {
                  name: "lookup",
                  hash: {},
                  loc: {
                    start: { line: 13, column: 57 },
                    end: { line: 13, column: 93 },
                  },
                }
              )
            ) +
            `"
                 lang="` +
            i.escapeExpression(
              i.lambda(e != null ? s(e, "LanguageCode") : e, e)
            ) +
            `">
        </label>
      </div>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r, t, n) {
          var s,
            o,
            c =
              i.lookupProperty ||
              function (m, f) {
                if (Object.prototype.hasOwnProperty.call(m, f)) return m[f];
              };
          return (
            `<div class="cs-header">
  ` +
            i.escapeExpression(
              ((o =
                (o =
                  c(l, "formHeading") ||
                  (e != null ? c(e, "formHeading") : e)) != null
                  ? o
                  : i.hooks.helperMissing),
              typeof o == "function"
                ? o.call(e ?? (i.nullContext || {}), {
                    name: "formHeading",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 17 },
                    },
                  })
                : o)
            ) +
            `
</div>
<div class="cs-ml-form-container">
` +
            ((s = c(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? c(e, "languages") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0, t, n),
                inverse: i.noop,
                loc: {
                  start: { line: 5, column: 2 },
                  end: { line: 18, column: 11 },
                },
              }
            )) != null
              ? s
              : "") +
            "</div>"
          );
        },
        useDepths: !0,
      });
      return (
        a.registerPartial(
          "csui_dialogs_multilingual.text.picker_impl_multilingual.form",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/multilingual.text.picker/impl/multilingual.form",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/multilingual.text.picker/impl/multilingual.form.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/form/impl/fields/csformfield.view",
      "csui/utils/contexts/factories/connector",
      "csui/dialogs/multilingual.text.picker/languages",
      "i18n!csui/dialogs/multilingual.text.picker/impl/nls/lang",
      "hbs!csui/dialogs/multilingual.text.picker/impl/multilingual.form",
      "css!csui/dialogs/multilingual.text.picker/impl/multilingual.form",
      "csui/lib/binf/js/binf",
      "csui/lib/handlebars.helpers.xif",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = csui.require.s.contexts._.config.config.i18n,
        n = t && t.availableLanguages;
      (!n || n.length == 0) && (n = []);
      var s = h.LayoutView.extend({
        template: r,
        className: "cs-multilingual-form",
        templateHelpers: function () {
          return {
            formHeading: u.formHeading,
            languages: this.languages,
            data: this.data,
          };
        },
        constructor: function (c) {
          h.LayoutView.apply(this, arguments),
            this._prepareLanguages(),
            (this.data = v.extend({}, c.data || {}));
        },
        _prepareLanguages: function () {
          this.languages = v.map(n, function (o, c) {
            var m = n[c].languageCode.split("_"),
              f = m.length === 2 ? m[1] : m[1] + "-" + m[2];
            return v.defaults({}, l[f], {
              LanguageCode: f,
              LanguageName: n[c].displayName,
              LanguageNameLocal: n[c].displayName,
            });
          });
        },
        getData: function () {
          var o = this,
            c = this.data;
          return (
            v.each(this.languages, function (m) {
              c[m.LanguageCode] = o.$el.find("#input-" + m.LanguageCode).val();
            }),
            c
          );
        },
      });
      return s;
    }
  ),
  csui.define(
    "csui/dialogs/multilingual.text.picker/multilingual.text.picker",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/dialog/dialog.view",
      "i18n!csui/dialogs/multilingual.text.picker/impl/nls/lang",
      "csui/dialogs/multilingual.text.picker/impl/multilingual.form.view",
      "csui/utils/log",
      "csui/lib/binf/js/binf",
      "csui/lib/handlebars.helpers.xif",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = { dialogTitle: e.dialogTitle };
      function t(n) {
        n || (n = {}), (this.options = v.defaults(n, r));
      }
      return (
        v.extend(t.prototype, {
          show: function () {
            return (
              this._showDialog(),
              (this._deferred = d.Deferred()),
              this._deferred.promise()
            );
          },
          _showDialog: function () {
            (this._view = this._createMultilingualForm()),
              (this._dialog = this._createDialog()),
              this._dialog.show();
          },
          _createMultilingualForm: function () {
            var n = new l(this.options);
            return n;
          },
          _createDialog: function () {
            var n = this.options,
              s = new i({
                title: n.dialogTitle,
                view: this._view,
                midSize: !0,
                className: "cs-multilingual-picker",
                attributes: { "aria-label": n.dialogTitle },
                buttons: [
                  {
                    id: "done",
                    label: e.btnDone,
                    default: !0,
                    disabled: !1,
                    click: v.bind(this._onClickDoneButton, this, status),
                  },
                  {
                    id: "cancel",
                    label: e.btnCancel,
                    close: !0,
                    click: v.bind(this.onClickCancelButton, this),
                  },
                ],
              });
            return s.listenTo(s, "hide", v.bind(this._onHideDialog, this)), s;
          },
          _onClickDoneButton: function () {
            (this._result = this._view.getData()), this._dialog.destroy();
          },
          onClickCancelButton: function () {},
          _onHideDialog: function () {
            this._deferred &&
              (this._result
                ? this._deferred.resolve(this._view.getData())
                : this._deferred.state() === "pending" &&
                  this._deferred.reject({ cancelled: !0 }));
          },
        }),
        t
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/restructure/impl/memberlist/impl/memberlist",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-member-list-group-title">
    <p id="memberlisttitle" class="title title-recepients" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 66 },
                      end: { line: 5, column: 75 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 77 },
                      end: { line: 5, column: 86 },
                    },
                  })
                : t)
            ) +
            `</p>
   </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `
<!-- start src/dialogs/restructure/impl/memberlist/impl/memberlist.hbs -->
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "title") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 0 },
                  end: { line: 7, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `<div class="content">
  <ul class="csui-member-list-group binf-list-group" aria-labelledby="memberlisttitle"></ul>
</div>
<!-- end src/dialogs/restructure/impl/memberlist/impl/memberlist.hbs -->

`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_restructure_impl_memberlist_impl_memberlist",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/dialogs/restructure/impl/memberlist/impl/memberitem",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <span class="csui-icon-paceholder csui-icon image_group_placeholder"></span>
  <img class="csui-icon-group csui-icon binf-img-circle binf-hidden" alt="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 74 },
                      end: { line: 4, column: 82 },
                    },
                  })
                : t)
            ) +
            `"> </img>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '  <span class="csui-icon-paceholder csui-icon image_user_placeholder">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "initials") || (e != null ? n(e, "initials") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "initials",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 70 },
                      end: { line: 6, column: 82 },
                    },
                  })
                : t)
            ) +
            `</span>
  <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" alt="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 73 },
                      end: { line: 7, column: 81 },
                    },
                  })
                : t)
            ) +
            `"
         src="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "userImgSrc") || (e != null ? n(e, "userImgSrc") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "userImgSrc",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 14 },
                      end: { line: 8, column: 28 },
                    },
                  })
                : t)
            ) +
            `" > </img>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class="binf-pull-left">
` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "type") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.program(3, r, 0),
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 9, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `</div>
<div class="list-item-title">
  <span class="name" title="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 28 },
                      end: { line: 12, column: 36 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 38 },
                      end: { line: 12, column: 46 },
                    },
                  })
                : n)
            ) +
            `</span>
</div>
<div class="icon-remove binf-pull-right">
  <button class="csui-icon circle_delete" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "ariaDelete") || (e != null ? s(e, "ariaDelete") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "ariaDelete",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 54 },
                      end: { line: 15, column: 68 },
                    },
                  })
                : n)
            ) +
            '" title="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "ariaDelete") || (e != null ? s(e, "ariaDelete") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "ariaDelete",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 77 },
                      end: { line: 15, column: 91 },
                    },
                  })
                : n)
            ) +
            `" tabindex="0"></button>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_restructure_impl_memberlist_impl_memberitem",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/dialogs/restructure/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/dialogs/restructure/impl/nls/root/lang", {
    targetLocation: "Target location",
    startProcessAt: "Start process at",
    notifyUsers: "Notify users",
    reference: "Reference",
    comment: "Comment",
    startProcess: "Start process",
    immediate: "Immediate",
    schedule: "Schedule",
    locationPlaceholder: "Add target",
    notificationListTitle: "Notification recipients",
    selectTargetLocation: "Select target location",
    requiredFiledInfo: "marks required fields",
    requiredField: "This is a required field.",
    removeAssignee: "Remove",
    categoryInheritance: "Category inheritance",
    defaultType: "Default",
    keepOriginal: "Keep original categories",
    applyDestination: "Apply destination categories",
    combineAll: "Combine all categories",
  }),
  csui.define(
    "css!csui/dialogs/restructure/impl/memberlist/impl/memberlist",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/restructure/impl/memberlist/memberlist.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/controls/userpicker/roles/user.view",
      "csui/utils/user.avatar.color",
      "csui/utils/url",
      "hbs!csui/dialogs/restructure/impl/memberlist/impl/memberlist",
      "hbs!csui/dialogs/restructure/impl/memberlist/impl/memberitem",
      "i18n!csui/dialogs/restructure/impl/nls/lang",
      "css!csui/dialogs/restructure/impl/memberlist/impl/memberlist",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = h.extend({
          constructor: function (o) {
            o || (o = {}),
              h.prototype.constructor.apply(this, arguments),
              this.listenTo(this, "render", this._assignUserColor);
          },
          onRender: function () {
            this.options.lightWeight || this._displayProfileImage();
          },
          onDestroy: function () {
            this._releasePhotoUrl();
          },
          className: "csui-member-list-item binf-list-group-item",
          template: u,
          tagName: "li",
          attributes: { tabindex: "0" },
          ui: {
            personalizedImage: ".csui-icon-user",
            defaultImage: ".csui-icon-paceholder",
          },
          templateHelpers: function () {
            return {
              name: a.formatMemberName(this.model),
              initials: this.model.get("initials"),
              userImgSrc:
                "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
            };
          },
          events: {
            "click .icon-remove": "onClickRemove",
            "focus .circle_delete": "onFocusEnter",
            "blur .circle_delete": "onFocusLeave",
            keydown: "onKeyDown",
          },
          onClickRemove: function () {
            this.triggerMethod("remove:member"),
              !this.cancelClick && this.destroy();
          },
          onKeyDown: function (s) {
            s.keyCode === 46 && this.onClickRemove();
          },
          onFocusEnter: function () {
            this.$el.addClass("focused");
          },
          onFocusLeave: function () {
            this.$el.removeClass("focused");
          },
          _displayProfileImage: function () {
            var s = this._getUserPhotoUrl();
            if (
              (this.ui.personalizedImage.addClass(
                "csui-userprofile-img-" + this.model.get("id")
              ),
              s)
            ) {
              var o = { url: s, dataType: "binary" };
              this._releasePhotoUrl(),
                this.options.model.connector.makeAjaxCall(o).always(
                  v.bind(function (c, m, f) {
                    f.status === 200
                      ? this._showPersonalizedImage(c)
                      : this._showDefaultImage();
                  }, this)
                );
            } else this._showDefaultImage();
          },
          _getUserPhotoUrl: function () {
            var s =
                (this.options.model &&
                  this.options.model.connector.connection) ||
                (this.options.connector && this.options.connector.connection),
              o = new e(s.url).getCgiScript(),
              c = this.model.get("photo_url");
            if (c && c.indexOf("?") > 0) return e.combine(o, c);
          },
          _showPersonalizedImage: function (s) {
            this._releasePhotoUrl(),
              (this._photoUrl = URL.createObjectURL(s)),
              this.ui.personalizedImage.attr("src", this._photoUrl),
              this.ui.defaultImage.addClass("binf-hidden"),
              this.ui.personalizedImage.removeClass("binf-hidden");
          },
          _showDefaultImage: function (s) {
            this._releasePhotoUrl(),
              this.ui.personalizedImage.addClass("binf-hidden"),
              this.ui.defaultImage.removeClass("binf-hidden");
          },
          _releasePhotoUrl: function () {
            this._photoUrl &&
              (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
          },
          _assignUserColor: function () {
            if (this.model.get("type") === 0) {
              var s = i.getUserAvatarColor(this.model.attributes);
              this.ui.defaultImage.css("background", s);
            }
          },
        }),
        n = d.CompositeView.extend(
          {
            className: "csui-member-list-group",
            constructor: function (o) {
              o || (o = {}),
                o.data || (o.data = {}),
                d.CompositeView.prototype.constructor.apply(this, arguments),
                this.$el.one(
                  "mouseenter",
                  v.bind(function () {
                    this.triggerMethod("dom:refresh");
                  }, this)
                );
            },
            template: l,
            templateHelpers: function () {
              var s = this.options.data.title;
              return { title: s };
            },
            childViewContainer: ".binf-list-group",
            childView: t,
            childViewOptions: function () {
              return {
                connector: this.options.connector,
                templateHelpers: function () {
                  return {
                    name: a.formatMemberName(this.model),
                    ariaDelete: r.removeAssignee,
                  };
                },
              };
            },
            onChildviewRemoveMember: function (s) {
              this.triggerMethod("remove:member", s);
            },
          },
          {
            getNameByValue: function (s, o) {
              var c = v.findWhere(s, { value: o });
              return c && c.name;
            },
          }
        );
      return n;
    }
  ),
  csui.define(
    "csui/dialogs/restructure/impl/restructureform/restructureform.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/form/form.view",
      "csui/dialogs/restructure/impl/memberlist/memberlist.view",
      "csui/behaviors/keyboard.navigation/tabkey.behavior",
      "i18n!csui/dialogs/restructure/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u) {
      "use strict";
      var r = i.extend({
        id: "csui-restructure-form",
        behaviors: { TabableRegionBehavior: { behaviorClass: l } },
        constructor: function (n) {
          n || (n = {}),
            (n = v.extend(n, { mode: "create" })),
            i.prototype.constructor.apply(this, arguments);
        },
        initialize: function () {
          this.$el.addClass("csui-restructure-form"),
            (this._assigneeCollection = this._getAssigneeCollection()),
            this.listenTo(
              this._assigneeCollection,
              "changed",
              this._ensureAssigneeListView
            ),
            (this.assigneeListView = new e({
              collection: this._assigneeCollection,
              context: this.options.context,
              connector: this.options.connector,
              data: { title: u.notificationListTitle },
            })),
            this.listenTo(this.assigneeListView, "remove:member", function (t) {
              this._removeAssignee(t.model) && this.validate("notifyUsers");
            }),
            (this.emptyView = new h.ItemView({ template: !1 })),
            this.listenTo(this, {
              render: this.onAfterRender,
              "before:destroy": function () {
                this.assigneeListView.destroy(),
                  this.emptyView.destroy(),
                  this.assigneeListRegion.destroy();
              },
              "change:field": function () {
                this.validate();
              },
            });
        },
        _getAssigneeCollection: function () {
          var t = new a.Collection();
          return t;
        },
        _addAssignee: function (t) {
          return t.id && !this._assigneeCollection.findWhere({ id: t.id })
            ? (this._assigneeCollection.add(t, { at: 0 }),
              this._assigneeCollection.trigger("changed"),
              !0)
            : !1;
        },
        _removeAssignee: function (t) {
          var n = t.get("id");
          if (this._assigneeCollection.findWhere({ id: n })) {
            this._assigneeCollection.remove(t),
              this._assigneeCollection.trigger("changed");
            var s = d.Event("keydown");
            return (s.keyCode = 9), (s.shiftKey = !0), this.$el.trigger(s), !0;
          }
          return !1;
        },
        _setCustomValidators: function () {
          var t = this,
            n = this.model.get("options").fields;
          n &&
            n.location &&
            n.notifyUsers &&
            n.categoryInheritance &&
            ((n.location.validator = function (s) {
              this.fieldView &&
                this.fieldView.pickerArgs &&
                (this.fieldView.pickerArgs.applyProperties ||
                  this.fieldView.pickerArgs.openSelectedProperties) &&
                ((t.openSelectedProperties =
                  this.fieldView.pickerArgs.openSelectedProperties),
                (t.selectedOptions = this.fieldView.pickerArgs.nodes)),
                t.validate(this.name)
                  ? (s({ status: !0 }),
                    this.field.removeClass("binf-has-error alpaca-invalid"))
                  : (s({ status: !1 }),
                    this.field.addClass("binf-has-error alpaca-invalid"));
            }),
            (n.notifyUsers.validator = function (s) {
              this.data.id &&
                t._addAssignee(this.data) &&
                (this.fieldView.setValue("", !1),
                this.field.find("input").val("")),
                (this.data = "");
            }),
            (n.categoryInheritance.validator = function (s) {
              t.applyProperties = this.data > 0 ? this.data : null;
            }));
        },
        _addAssigneeListRegion: function () {
          var t = d("<div></div>").addClass("notifyUsers-list");
          (this.assigneeListRegion = new h.Region({ el: t })),
            this.$el.append(t);
        },
        _ensureAssigneeListView: function () {
          this._assigneeCollection.length
            ? this.assigneeListRegion.currentView instanceof e ||
              this.assigneeListRegion.show(this.assigneeListView, {
                preventDestroy: !0,
              })
            : this.assigneeListRegion.show(this.emptyView, {
                preventDestroy: !0,
              });
        },
        validate: function (t) {
          var n,
            s = this.getValues();
          return (
            (n = !!s.location),
            this.triggerMethod(n ? "valid:form" : "invalid:form"),
            n
          );
        },
        getValues: function () {
          var t = this.form.getValue();
          return (
            (t.notifyUsers = v.map(
              this._assigneeCollection.models,
              function (n) {
                return n.get("id");
              },
              this
            )),
            t
          );
        },
        onAfterRender: function () {
          this._setCustomValidators(),
            this._addAssigneeListRegion(),
            this._ensureAssigneeListView();
        },
      });
      return r;
    }
  ),
  csui.define(
    "csui/dialogs/restructure/impl/restructureform/impl/restructureform.model",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/models/form",
      "csui/utils/base",
      "i18n!csui/dialogs/restructure/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        defaults: { data: {}, options: {}, schema: {} },
        constructor: function (u, r) {
          r || (r = {}), a.prototype.constructor.apply(this, arguments);
        },
        initialize: function () {
          this._setFormAttributes();
        },
        _setFormAttributes: function () {
          var l = this.options.models.length,
            u = Date.now();
          this.set({
            data: {
              location: "",
              startProcess: i.immediate,
              startProcessAt: h.parseDate(u),
              categoryInheritance: 0,
              notifyUsers: "",
              reference: "",
              comment: "",
            },
            options: {
              fields: {
                location: {
                  hidden: !1,
                  hideInitValidationError: !0,
                  label: i.targetLocation,
                  readonly: !1,
                  placeholder: i.locationPlaceholder,
                  type: "otcs_node_picker",
                  type_control: {
                    parameters: {
                      propertiesSeletor: !0,
                      includeCombineProperties: l === 1,
                      dialogTitle: i.selectTargetLocation,
                      addableTypes: [0],
                      selectableTypes: [-1],
                      unselectableTypes: [899],
                      startLocation:
                        "csui/dialogs/node.picker/start.locations/current.location",
                      startLocations: [
                        "csui/dialogs/node.picker/start.locations/current.location",
                        "csui/dialogs/node.picker/start.locations/enterprise.volume",
                        "csui/dialogs/node.picker/start.locations/favorites",
                        "csui/dialogs/node.picker/start.locations/recent.containers",
                      ],
                      initialContainer: this.options.container,
                    },
                  },
                },
                startProcess: {
                  hidden: !1,
                  hideInitValidationError: !0,
                  label: i.startProcess,
                  readonly: !1,
                  removeDefaultNone: !0,
                  type: "select",
                },
                startProcessAt: {
                  hidden: !1,
                  hideInitValidationError: !0,
                  label: i.startProcessAt,
                  readonly: !1,
                  type: "datetime",
                  dependencies: { startProcess: i.schedule },
                },
                categoryInheritance: {
                  hidden: !1,
                  hideInitValidationError: !0,
                  label: i.categoryInheritance,
                  readonly: !1,
                  removeDefaultNone: !0,
                  type: "select",
                  optionLabels: [
                    i.defaultType,
                    i.keepOriginal,
                    i.applyDestination,
                    i.combineAll,
                  ],
                },
                reference: {
                  label: i.reference,
                  hidden: !1,
                  hideInitValidationError: !0,
                  readonly: !1,
                  validate: !0,
                  type: "text",
                  size: 255,
                },
                comment: {
                  label: i.comment,
                  hidden: !1,
                  hideInitValidationError: !0,
                  readonly: !1,
                  type: "textarea",
                },
                notifyUsers: {
                  hidden: !1,
                  hideInitValidationError: !0,
                  label: i.notifyUsers,
                  clearField: !0,
                  readonly: !1,
                  type: "otcs_user",
                },
              },
            },
            schema: {
              properties: {
                location: {
                  readonly: !1,
                  required: !0,
                  title: i.targetLocation,
                  type: "otcs_node_picker",
                },
                startProcess: {
                  title: i.startProcess,
                  type: "string",
                  enum: [i.immediate, i.schedule],
                },
                startProcessAt: {
                  readonly: !1,
                  required: !1,
                  title: i.startProcessAt,
                  type: "string",
                  dependencies: ["startProcess"],
                },
                categoryInheritance: {
                  title: i.startProcess,
                  type: "integer",
                  enum: [0, 1, 2, 3],
                },
                reference: {
                  readonly: !1,
                  required: !1,
                  title: i.reference,
                  type: "string",
                },
                comment: {
                  readonly: !1,
                  required: !1,
                  title: i.comment,
                  type: "string",
                },
                notifyUsers: {
                  readonly: !1,
                  required: !1,
                  title: i.notifyUsers,
                  type: "otcs_user",
                },
              },
              dependencies: { startProcessAt: ["startProcess"] },
              type: "object",
            },
          });
        },
      });
      return e;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/restructure/impl/restructure",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return '<div id="formviewwrapper" class="formview-wrapper"></div>';
        },
      });
      return (
        a.registerPartial("csui_dialogs_restructure_impl_restructure", h), h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/restructure/impl/restructure.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/restructure/restructure.dialog",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/dialogs/restructure/impl/restructureform/restructureform.view",
      "csui/dialogs/restructure/impl/restructureform/impl/restructureform.model",
      "csui/controls/progressblocker/blocker",
      "hbs!csui/dialogs/restructure/impl/restructure",
      "css!csui/dialogs/restructure/impl/restructure.dialog",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = h.LayoutView.extend({
        className: "csui-restructure-wrapper",
        template: r,
        regions: { formRegion: "#formviewwrapper" },
        constructor: function (s) {
          s || (s = {}),
            (this.context = s.context),
            (this.selectedNodes = s.nodes),
            u.imbue(this),
            h.LayoutView.prototype.constructor.apply(this, arguments),
            this.propagateEventsToRegions(),
            (this.formModel = new l(void 0, {
              connector: this.options.connector,
              updateFormData: this.options.updateFormData,
              models: this.options.nodes.models,
              container: this.options.container,
            })),
            this.listenTo(this.formModel, "sync", this.render);
        },
        setFormView: function () {
          (this.restructureFormView = new e({
            context: this.options.context,
            connector: this.options.connector,
            model: this.formModel,
          })),
            this.listenTo(this.restructureFormView, {
              "valid:form": function () {
                this.options.restructureCommand.restructureDialog.updateButton(
                  "restructure",
                  { disabled: !1 }
                );
                var n =
                  this.options.restructureCommand.restructureDialog.footerView.$el.find(
                    "#restructure"
                  );
                n.length && a(n[0]).prop("tabindex", 0);
              },
              "invalid:form": function () {
                this.options.restructureCommand.restructureDialog.updateButton(
                  "restructure",
                  { disabled: !0 }
                );
              },
            });
        },
        onRender: function () {
          this.formModel.attributes &&
            this.formModel.attributes.data &&
            (this.setFormView(),
            this.formRegion.show(this.restructureFormView));
        },
      });
      return d.extend(t.prototype, i), t;
    }
  ),
  csui.define(
    "hbs!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t =
            i.lookupProperty ||
            function (n, s) {
              if (Object.prototype.hasOwnProperty.call(n, s)) return n[s];
            };
          return (
            '    <li role="presentation" data-optionid="' +
            i.escapeExpression(i.lambda(e != null ? t(e, "id") : e, e)) +
            `">
      <a role="menuitem" tabindex="-1" href="#">
        <span class="cs-label">` +
            i.escapeExpression(i.lambda(e != null ? t(e, "name") : e, e)) +
            `</span>
      </a>
    </li>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '<button id="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 12 },
                      end: { line: 1, column: 18 },
                    },
                  })
                : n)
            ) +
            `" class="binf-btn binf-btn-default binf-dropdown-toggle csui-acc-focusable" data-binf-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "applyPropertiesAria") ||
                  (e != null ? s(e, "applyPropertiesAria") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "applyPropertiesAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 63 },
                      end: { line: 2, column: 86 },
                    },
                  })
                : n)
            ) +
            `">
  <span class="cs-label">` +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : n)
            ) +
            `</span>
  <span class="cs-icon icon-caret-down"></span>
</button>
<ul class="binf-dropdown-menu" role="menu" aria-labelledby="` +
            i.escapeExpression(
              ((n =
                (n = s(l, "id") || (e != null ? s(e, "id") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 60 },
                      end: { line: 6, column: 66 },
                    },
                  })
                : n)
            ) +
            `">
` +
            ((t = s(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "applyPropertiesOptions") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 7, column: 2 },
                  end: { line: 13, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <li role="presentation" class="binf-divider"></li>
  <li role="presentation" class="open-selected-properties">
    <a role="menuitem"  tabindex="-1" href="#">
      <span class="cs-icon"></span>
      <span class="cs-label">` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "openSelectedProperties") ||
                  (e != null ? s(e, "openSelectedProperties") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "openSelectedProperties",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 29 },
                      end: { line: 18, column: 55 },
                    },
                  })
                : n)
            ) +
            `</span>
    </a>
  </li>
</ul>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_dialogs_node.picker_impl_header_apply.properties.selector_impl_apply.properties.selector",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",
    [],
    function () {}
  ),
  csui.define(
    "csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",
      "i18n!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/lang",
      "css!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",
      "csui/lib/binf/js/binf",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = h.ItemView.extend({
        _applyOptions: void 0,
        selected: void 0,
        openSelectedProperties: !1,
        className: "cs-apply-properties-selector binf-dropdown",
        template: e,
        behaviors: { TabableRegion: { behaviorClass: i } },
        ui: {
          toggle: ">.binf-dropdown-toggle",
          selectedLabel: ">.binf-dropdown-toggle >.cs-label",
          iconOpenSelectedProperties:
            "li.open-selected-properties > a > span.cs-icon",
        },
        events: {
          "click li[data-optionid]": "onClickPropertiesOption",
          "click li.open-selected-properties": "onClickOpenSelectedProperties",
          keydown: "onKeyInView",
          keyup: "onKeyUpInView",
        },
        constructor: function r(t) {
          t || (t = {}),
            v.defaults(t, { startSelection: r.KEEP_ORIGINAL_PROPERTIES }),
            h.ItemView.prototype.constructor.apply(this, arguments);
        },
        onKeyInView: function (r) {
          if (r.keyCode === 27 && this.$el.hasClass("binf-open"))
            return (
              this.$el.removeClass("binf-open"),
              this.$('*[tabindex = "0"]').trigger("focus"),
              (this.isKeydownClosedDropDown = !0),
              !1
            );
          r.keyCode === 27 &&
            !this.$el.hasClass("binf-open") &&
            (this.isKeydownClosedDropDown = !1);
        },
        onKeyUpInView: function (r) {
          if (!this.isKeydownClosedDropDown && r.keyCode === 27) return !0;
          if (r.keyCode === 27) return !1;
        },
        onClickPropertiesOption: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            this._setSelected(
              parseInt(d(r.currentTarget).attr("data-optionid"))
            ),
            this._showSelected(),
            this.ui.toggle.trigger("click"),
            this.trigger("property:click:event"),
            this.$el.find("button.binf-dropdown-toggle").trigger("focus");
        },
        onClickOpenSelectedProperties: function (r) {
          r.preventDefault(),
            r.stopPropagation(),
            (this.openSelectedProperties = !this.openSelectedProperties),
            this._showOpenSelectedProperties(),
            this.ui.toggle.trigger("click"),
            this.$el.find("button.binf-dropdown-toggle").trigger("focus");
        },
        initialize: function () {
          this._setupApplyOptions(),
            v.indexOf(
              v.pluck(this._applyOptions, "id"),
              this.options.selected
            ) !== -1
              ? this._setSelected(this.options.selected)
              : this._setSelected(u.KEEP_ORIGINAL_PROPERTIES),
            this.listenTo(a, "closeToggleAction", this._closeToggle);
        },
        templateHelpers: function () {
          return {
            id: v.uniqueId("optionsDropdown"),
            applyPropertiesOptions: this._applyOptions,
            applyPropertiesAria: l.ApplyPropertiesAria,
            openSelectedProperties: l.OpenSelectedProperties,
          };
        },
        currentlyFocusedElement: function () {
          return this.$el.find("button");
        },
        accDeactivateTabableRegion: function () {
          this._closeToggle();
        },
        onRender: function () {
          this.ui.toggle.binf_dropdown(),
            this._showSelected(),
            this._showOpenSelectedProperties();
        },
        _getOptionName: function (r) {
          var t, n;
          return (
            (t = v.indexOf(v.pluck(this._applyOptions, "id"), r)),
            (n = t === -1 ? "" : this._applyOptions[t].name),
            n
          );
        },
        _setupApplyOptions: function () {
          (this._applyOptions = [
            { id: u.KEEP_ORIGINAL_PROPERTIES, name: l.KeepOriginalProperties },
            {
              id: u.APPLY_DESTINATION_PROPERTIES,
              name: l.ApplyDestinationProperties,
            },
          ]),
            this.options.includeCombineProperties === !0 &&
              this._applyOptions.push({
                id: u.COMBINE_ALL_PROPERTIES,
                name: l.CombineAllProperties,
              });
        },
        _setSelected: function (r) {
          this.selected = r;
        },
        _showSelected: function () {
          this.ui.selectedLabel.text(this._getOptionName(this.selected)),
            this.$el.find("li[data-optionid]").removeClass("binf-active"),
            this.$el
              .find("li[data-optionid=" + this.selected + "]")
              .addClass("binf-active");
        },
        _showOpenSelectedProperties: function () {
          this.openSelectedProperties === !0
            ? (this.ui.toggle.attr("aria-expanded", "true"),
              this.ui.iconOpenSelectedProperties
                .removeClass("icon-checkbox")
                .addClass("icon-checkbox-selected"))
            : (this.ui.toggle.attr("aria-expanded", "false"),
              this.ui.iconOpenSelectedProperties
                .removeClass("icon-checkbox-selected")
                .addClass("icon-checkbox"));
        },
        _closeToggle: function () {
          this.ui.toggle.parent &&
            this.ui.toggle.parent().hasClass("binf-open") &&
            this.ui.toggle.binf_dropdown("toggle");
        },
      });
      return (
        (u.KEEP_ORIGINAL_PROPERTIES = 1),
        (u.APPLY_DESTINATION_PROPERTIES = 2),
        (u.COMBINE_ALL_PROPERTIES = 3),
        u
      );
    }
  ),
  csui.define(
    "csui/controls/multilingual.text.picker/multilingual.text.picker",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/dialog/dialog.view",
      "i18n!csui/controls/multilingual.text.picker/impl/nls/lang",
      "csui/controls/multilingual.text.picker/impl/multilingual.form.view",
      "csui/utils/contexts/factories/server.info",
      "csui/utils/log",
      "csui/lib/binf/js/binf",
      "csui/lib/handlebars.helpers.xif",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = { dialogTitle: e.dialogTitle };
      function n(s) {
        s || (s = {}), (this.options = v.defaults(s, t));
      }
      return (
        v.extend(n.prototype, {
          show: function () {
            return (
              this._showDialog(),
              (this._deferred = d.Deferred()),
              this._deferred.promise()
            );
          },
          _showDialog: function () {
            var s = this;
            this._createMultilingualForm().done(function () {
              (s._dialog = s._createDialog()), s._dialog.show();
            });
          },
          _createMultilingualForm: function () {
            var s = d.Deferred(),
              o = this,
              c = this.options.context.getObject(u, {
                permanent: !0,
                detached: !0,
              });
            return (
              c.ensureFetched().done(
                v.bind(function () {
                  (o.languages = c.get("server").languages),
                    (o.options.data = o.languages),
                    (o.options.isDialog = !0),
                    (o._view = new l(o.options)),
                    s.resolve(o.languages);
                })
              ),
              s.promise()
            );
          },
          _createDialog: function () {
            var s = this.options,
              o = new i({
                title: s.dialogTitle,
                view: this._view,
                midSize: !0,
                className: "cs-multilingual-picker",
                attributes: { "aria-label": s.dialogTitle },
                buttons: [
                  {
                    id: "done",
                    label: e.btnDone,
                    default: !0,
                    disabled: !1,
                    click: v.bind(this._onClickDoneButton, this, status),
                  },
                  {
                    id: "cancel",
                    label: e.btnCancel,
                    close: !0,
                    click: v.bind(this.onClickCancelButton, this),
                  },
                ],
              });
            return o.listenTo(o, "hide", v.bind(this._onHideDialog, this)), o;
          },
          _onClickDoneButton: function () {
            (this._result = this._view.getData()), this._dialog.destroy();
          },
          onClickCancelButton: function () {},
          _onHideDialog: function () {
            this._deferred &&
              (this._result
                ? this._deferred.resolve(this._view.getData())
                : this._deferred.state() === "pending" &&
                  this._deferred.reject({ cancelled: !0 }));
          },
        }),
        n
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/location.base.factory",
    ["csui/lib/underscore", "csui/lib/backbone"],
    function (v, d) {
      "use strict";
      function a(h) {
        this.options = h || {};
      }
      return (
        v.extend(a.prototype, {
          updateLocationModel: function (h) {},
          getLocationParameters: function () {
            return { container: null, collection: null, locationName: "" };
          },
        }),
        (a.extend = d.View.extend),
        a
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/node.base.factory",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/node/node.model",
      "csui/models/node.children2/node.children2",
      "csui/utils/commands",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        constructor: function (r) {
          a.prototype.constructor.apply(this, arguments),
            (this.container = new h(this.options.node, {
              connector: this.options.connector,
            }));
        },
        updateLocationModel: function (u) {
          var r = this,
            t = v.Deferred();
          return (
            this.container.fetch().then(
              function () {
                u.set({
                  name: r.container.get("name") || r.options.defaultName,
                  icon: r.options.icon,
                  invalid: !1,
                  selectable: r.options.selectable,
                }),
                  t.resolve();
              },
              function () {
                u.set({ invalid: !0 }), u.collection.remove(u), t.reject();
              }
            ),
            t.promise()
          );
        },
        getLocationParameters: function (u) {
          var r = new i(void 0, {
            node: this.container,
            autoreset: !0,
            expand: { properties: ["original_id", "parent_id"] },
            fields: { properties: [] },
            commands: "default,open",
            orderBy: "name asc",
            includeResources: ["show_hidden"],
          });
          return (
            u?.checkPermissions && r.setFields("permissions", ""),
            this.container.set("unselectable", this.options.unselectable),
            { container: this.container, collection: r }
          );
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/current.location/current.location.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/node.children2/node.children2",
      "csui/utils/commands",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        updateLocationModel: function (r) {
          var t = this.options.container;
          return (
            r.set({
              name: e.labelCurrentLocation,
              icon: "location",
              invalid: !(t && t.isFetchable()),
            }),
            u(t, r)
          );
        },
        getLocationParameters: function (r) {
          var t = this.options.container,
            n = new h(void 0, {
              node: this.options.container,
              autoreset: !0,
              expand: { properties: ["original_id", "parent_id"] },
              fields: { properties: [] },
              commands: "default,open",
            });
          return (
            r?.checkPermissions && n.setFields("permissions", ""),
            t.set("unselectable", !1),
            {
              container: t,
              collection: n,
              locationName: e.labelCurrentLocation,
            }
          );
        },
      });
      function u(r, t) {
        var n = d.Deferred();
        return (
          r && r.isFetchable() && !r.isFetchableDirectly()
            ? r.fetch().then(
                function () {
                  n.resolve();
                },
                function () {
                  t.set({ invalid: !0 }), t.collection.remove(t), n.reject();
                }
              )
            : n.resolve(),
          n.promise()
        );
      }
      return l;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/enterprise.volume/enterprise.volume.factory",
    [
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.extend({
        constructor: function (e) {
          (e = v.defaults(
            {
              node: { id: "volume", type: 141 },
              icon: "enterprise",
              unselectable: !1,
              defaultName: a.labelEnterpriseVolume,
            },
            e
          )),
            d.prototype.constructor.call(this, e);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/favorites/impl/favorite.collection",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/node/node.model",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/mixins/fetchable/fetchable.mixin",
      "csui/models/browsable/client-side.mixin",
      "csui/models/browsable/v2.response.mixin",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/utils/contexts/factories/favorites2",
      "csui/models/favorites2",
      "csui/dialogs/node.picker/data/node.picker.extra.data",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = d.Collection.extend({
        model: h,
        constructor: function (f, g) {
          d.Collection.prototype.constructor.apply(this, arguments),
            this.makeConnectable(g)
              .makeFetchable(g)
              .makeClientSideBrowsable(g)
              .makeBrowsableV2Response(g),
            (this.groupsCollection = g.context.getCollection(t, {
              detached: !0,
              permanent: !0,
              favorites: {
                options: {
                  promotedActionCommands: [],
                  nonPromotedActionCommands: [],
                },
              },
            }));
          var w = n.getLimitedResourceScope(),
            b = Object.keys(o.getModelFields());
          for (let C = 0; C < b?.length; C++) {
            let k = b[C];
            !w?.fields?.hasOwnProperty(k) && (w.fields[k] = "");
          }
          this.groupsCollection.favorites.setResourceScope(w),
            (this.childrenCollection = s);
        },
        parse: function (m, f) {
          return this.parseBrowsedState(m, f), this.parseBrowsedItems(m, f);
        },
      });
      return (
        l.mixin(c.prototype),
        u.mixin(c.prototype),
        i.mixin(c.prototype),
        e.mixin(c.prototype),
        r.mixin(c.prototype),
        c
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/favorites/favorites.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
      "csui/dialogs/node.picker/start.locations/favorites/impl/favorite.collection",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          return (
            l.set({ name: h.labelFavorites, icon: "favorites" }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function (l = {}) {
          var u = new i(void 0, {
            connector: this.options.connector,
            autoreset: !0,
            expand: ["node"],
            ...l,
          });
          return {
            container: null,
            collection: u.groupsCollection,
            locationName: h.labelFavorites,
            groupsLocationName: "favorites",
            nameAttribute: "favorite_name",
            isTreeView: !0,
            groupsCollection: u.groupsCollection,
            groupChildrenCollection: u.childrenCollection,
            expandOnSearch: !0,
            groupIconName: "smart_mime_fav_group32",
          };
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/personal.volume/personal.volume.factory",
    [
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.extend({
        constructor: function (e) {
          (e = v.defaults(
            {
              node: { id: "volume", type: 142 },
              icon: "csui-icon-personal-volume",
              unselectable: !1,
              defaultName: a.labelPersonalVolume,
            },
            e
          )),
            d.prototype.constructor.call(this, e);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/category.volume/category.volume.factory",
    [
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.extend({
        constructor: function (e) {
          (e = v.defaults(
            {
              node: { id: "volume", type: 133 },
              unselectable: !0,
              icon: "csui-icon-category-volume",
              defaultName: a.labelCategoryVolume,
            },
            e
          )),
            d.prototype.constructor.call(this, e);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/perspective.assets.volume/perspective.assets.volume.factory",
    [
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.extend({
        constructor: function (e) {
          (e = v.defaults(
            {
              node: { id: "volume", type: 954 },
              unselectable: !0,
              icon: "csui-icon-perspective-assets-volume",
              defaultName: a.labelPerspectiveAssetsVolume,
            },
            e
          )),
            d.prototype.constructor.call(this, e);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/recent.containers/impl/recent.containers.collection",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/node/node.model",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/mixins/fetchable/fetchable.mixin",
      "csui/models/browsable/client-side.mixin",
      "csui/models/browsable/v2.response.mixin",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = h.Collection.extend({
        model: e,
        constructor: function (c, m) {
          d.defaults(m, { orderBy: "" }),
            h.Collection.prototype.constructor.call(this, c, m),
            this.makeConnectable(m)
              .makeFetchable(m)
              .makeClientSideBrowsable(m)
              .makeBrowsableV2Response(m);
        },
        url: function () {
          var o = "";
          if (this.orderBy) {
            var c = this.orderBy.split(",")[0].split(" ");
            o = (c[1] || "asc") + "_" + c[0];
          }
          var m = this.connector.getConnectionUrl().getApiBase("v2"),
            f = d.union(this.getResourceFieldsUrlQuery().fields, [
              "properties",
              "versions.element(0)",
            ]),
            g = i.combineQueryString({
              fields: f,
              expand: "properties{original_id}",
              orderBy: o,
              actions: "",
            });
          return i.appendQuery(i.combine(m, "members/targets"), g);
        },
        parse: function (o, c) {
          return (
            this.parseBrowsedState(o, c),
            this.parseBrowsedItems(o, c),
            o.results.reverse(),
            o.results
          );
        },
      });
      return (
        r.mixin(s.prototype),
        t.mixin(s.prototype),
        l.mixin(s.prototype),
        u.mixin(s.prototype),
        n.mixin(s.prototype),
        s
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/recent.containers/recent.containers.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
      "csui/dialogs/node.picker/start.locations/recent.containers/impl/recent.containers.collection",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          return (
            l.set({ name: h.labelRecentContainers, icon: "recent" }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function (l) {
          var u = new i(void 0, {
            connector: this.options.connector,
            autoreset: !0,
            expand: ["node"],
          });
          return (
            l?.checkPermissions && u.setFields("permissions", ""),
            {
              container: null,
              collection: u,
              locationName: h.labelRecentContainers,
            }
          );
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/search.location/impl/search.collection",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/node/node.model",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/mixins/fetchable/fetchable.mixin",
      "csui/models/browsable/browsable.mixin",
      "csui/models/browsable/v1.request.mixin",
      "csui/models/browsable/v2.response.mixin",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "csui/utils/deepClone/deepClone",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = a.Collection.extend({
        model: i,
        constructor: function (c, m) {
          (this.options = m || (m = {})),
            a.Collection.prototype.constructor.call(this, c, m),
            this.makeConnectable(m)
              .makeFetchable(m)
              .makeBrowsable(m)
              .makeBrowsableV1Request(m)
              .makeBrowsableV2Response(m);
        },
        clone: function () {
          return new this.constructor(this.models, {
            connector: this.connector,
            skip: this.skipCount,
            top: this.topCount,
            filter: v.deepClone(this.filters),
            orderBy: v.clone(this.orderBy),
          });
        },
      });
      return (
        u.mixin(s.prototype),
        r.mixin(s.prototype),
        t.mixin(s.prototype),
        e.mixin(s.prototype),
        l.mixin(s.prototype),
        v.extend(s.prototype, {
          isFetchable: function () {
            return !0;
          },
          cacheId: "",
          url: function () {
            var o = this.connector.getConnectionUrl().getApiBase("v2"),
              c = v.union(this.getResourceFieldsUrlQuery().fields, [
                "properties",
                "versions.element(0)",
              ]),
              m = this.options.query.toJSON();
            return (
              (m.where = "OTName:" + m.where),
              (this.orderBy = "OTName"),
              this.filters &&
                this.filters.type &&
                (m.where +=
                  ' AND "OTSubType": in ( ' +
                  this.filters.type.join(",") +
                  " )"),
              (m = h.combineQueryString(
                { fields: c },
                this.getBrowsableUrlQuery(),
                { actions: "open", expand: "properties{parent_id}" },
                m
              )),
              h.combine(o, "search?" + m)
            );
          },
          parse: function (o, c) {
            return (
              this.parseBrowsedState(o.collection, c),
              (o.results.sorting = o.collection.sorting),
              (this.cacheId =
                o.collection &&
                o.collection.searching &&
                o.collection.searching.cache_id
                  ? o.collection.searching.cache_id
                  : ""),
              this.parseBrowsedItems(o, c)
            );
          },
        }),
        n.mixin(s.prototype),
        s
      );
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/search.location/search.location.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/dialogs/node.picker/start.locations/search.location/impl/search.collection",
      "csui/utils/commands",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        updateLocationModel: function (u) {
          var r = this.options.container;
          return (
            u.set({ hide: !0, invalid: !1 }), d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function (u) {
          var r = this.options.container,
            t = new h(void 0, u);
          return (
            r && r.set("unselectable", !1),
            u?.checkPermissions && t.setFields("permissions", ""),
            { container: r, collection: t }
          );
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/default.location/default.location.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/node.children2/node.children2",
      "csui/utils/commands",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        updateLocationModel: function (u) {
          var r = this.options.container;
          return (
            u.set({ hide: !0, invalid: !1 }), d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function (u) {
          var r = this.options.container,
            t = new h(void 0, {
              node: this.options.container,
              autoreset: !0,
              expand: { properties: ["original_id", "parent_id"] },
              fields: { properties: [] },
              commands: "default,open",
            });
          return (
            u?.checkPermissions && t.setFields("permissions", ""),
            r.set("unselectable", !1),
            {
              container: r,
              collection: t,
              locationName: e.labelCurrentLocation,
            }
          );
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/dialogs/node.picker/start.locations/support.assets.volume/support.assets.volume.factory",
    [
      "csui/lib/underscore",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.extend({
        constructor: function (e) {
          (e = v.defaults(
            {
              node: { id: "volume", type: 1309 },
              unselectable: !0,
              icon: "csui-icon-support-assets-volume",
              defaultName: a.labelSupportAssetsVolume,
            },
            e
          )),
            d.prototype.constructor.call(this, e);
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/location.base.factory",
    ["csui/lib/underscore", "csui/lib/backbone"],
    function (v, d) {
      "use strict";
      function a(h) {
        this.options = h || {};
      }
      return (
        v.extend(a.prototype, {
          updateLocationModel: function (h) {},
          getLocationParameters: function () {
            return { container: null, collection: null, locationName: "" };
          },
        }),
        (a.extend = d.View.extend),
        a
      );
    }
  ),
  csui.define("csui/dialogs/members.picker/start.locations/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define(
    "csui/dialogs/members.picker/start.locations/impl/nls/root/lang",
    {
      labelNoSelection: "Go to...",
      labelAllMembersAndGroups: "All members and groups",
      labelRecentGroups: "Recent groups",
      labelGroupWhereIamMember: "Groups where I am member",
      labelAllGroups: "All Groups",
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/current.group/current.group.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/member/membercollection",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          var u = this.options.container;
          return (
            l.set({ hide: !0, invalid: !1, location: "current.group" }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function () {
          var l = this.options.container,
            u = new h(void 0, {
              connector: this.options.connector,
              groupId: l.groupId,
              member: l,
            });
          return (
            l.set("unselectable", !1),
            {
              container: this.options.container,
              collection: u,
              locationName: i.labelCurrentLocation,
            }
          );
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/all.members/all.members.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/member/membercollection",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          var u = this.options.container;
          return (
            l.set({
              name: i.labelAllMembersAndGroups,
              icon: "member",
              invalid: !(u && u.isFetchable()),
              location: "all.members",
            }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function () {
          var l = this.options.container,
            u = new h(void 0, { connector: this.options.connector });
          return {
            container: this.options.container,
            collection: u,
            locationName: i.labelCurrentLocation,
          };
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/member.groups/member.groups.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/member/membercollection",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          var u = this.options.container;
          return (
            l.set({
              name: i.labelGroupWhereIamMember,
              icon: "location",
              invalid: !(u && u.isFetchable()),
              location: "member.groups",
            }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function (l) {
          var u = this.options.container,
            r = new h(void 0, {
              connector: this.options.connector,
              type: "GroupsOfCurrentUser",
            });
          return (
            u.set("unselectable", !1),
            {
              container: this.options.container,
              collection: r,
              locationName: i.labelCurrentLocation,
            }
          );
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/recent.groups/impl/recent.groups.collection",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/member/member.model",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/mixins/fetchable/fetchable.mixin",
      "csui/models/browsable/client-side.mixin",
      "csui/models/browsable/v2.response.mixin",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = h.Collection.extend({
        model: e,
        constructor: function (o, c) {
          h.Collection.prototype.constructor.call(this, o, c),
            this.makeConnectable(c)
              .makeFetchable(c)
              .makeClientSideBrowsable(c)
              .makeBrowsableV2Response(c);
        },
        url: function () {
          var s = this.connector.getConnectionUrl().getApiBase("v2");
          return i.appendQuery(i.combine(s, "members/targets"));
        },
        parse: function (s, o) {
          return (
            this.parseBrowsedState(s, o),
            this.parseBrowsedItems(s, o),
            s.results.reverse(),
            s.results
          );
        },
      });
      return (
        r.mixin(n.prototype),
        t.mixin(n.prototype),
        l.mixin(n.prototype),
        u.mixin(n.prototype),
        n
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/recent.groups/recent.groups.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/dialogs/members.picker/start.locations/recent.groups/impl/recent.groups.collection",
      "csui/utils/commands",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        updateLocationModel: function (u) {
          var r = this.options.container;
          return (
            u.set({
              name: e.labelRecentGroups,
              icon: "recent",
              invalid: !(r && r.isFetchable()),
              location: "recent.groups",
            }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function () {
          var u = this.options.container,
            r = new h(void 0, { connector: this.options.connector });
          return (
            u.set("unselectable", !1),
            {
              container: this.options.container,
              collection: r,
              locationName: e.labelCurrentLocation,
            }
          );
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/all.groups/all.groups.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/models/member/membercollection",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = a.extend({
        updateLocationModel: function (l) {
          var u = this.options.container;
          return (
            l.set({
              name: i.labelAllGroups,
              icon: "group",
              invalid: !(u && u.isFetchable()),
              location: "all.groups",
            }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function () {
          var l = this.options.container,
            u = new h(void 0, { connector: this.options.connector, type: 1 });
          return {
            container: this.options.container,
            collection: u,
            locationName: i.labelCurrentLocation,
          };
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/models/permission/acl.group.server.adaptor.mixin",
    ["csui/lib/underscore", "csui/utils/url"],
    function (v, d) {
      "use strict";
      var a = {
        mixin: function (h) {
          return v.extend(h, {
            makeServerAdaptor: function (i) {
              return this;
            },
            url: function () {
              var i = d.combine(
                  this.connector.getConnectionUrl().getApiBase("v2"),
                  "nodes",
                  this.options.nodeId
                ),
                e;
              return (
                (e = d.combineQueryString(
                  {
                    fields: ["permissions{right_id, permissions, type}"],
                    expand: "permissions{right_id}",
                  },
                  e
                )),
                e && (i += "?" + e),
                i
              );
            },
            parse: function (i, e) {
              return this.filterGroups(i), i.aclGroups;
            },
            filterGroups: function (i) {
              var e = i.results.data && i.results.data.permissions,
                l = [];
              return (
                v.each(e, function (u) {
                  if (u.right_id_expand && u.right_id_expand.type === 1) {
                    var r = {};
                    (r = u.right_id_expand),
                      (r.data = {}),
                      (r.data.properties = u.right_id_expand),
                      l.push(r);
                  }
                }),
                (i.aclGroups = l),
                i
              );
            },
          });
        },
      };
      return a;
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/member/member.model",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/models/mixins/fetchable/fetchable.mixin",
      "csui/models/browsable/client-side.mixin",
      "csui/models/browsable/v2.response.mixin",
      "csui/models/permission/acl.group.server.adaptor.mixin",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = h.Collection.extend({
        model: e,
        constructor: function (c, m) {
          (this.options = m || {}),
            h.Collection.prototype.constructor.call(this, c, m),
            this.makeConnectable(m)
              .makeFetchable(m)
              .makeClientSideBrowsable(m)
              .makeBrowsableV2Response(m);
        },
      });
      return (
        r.mixin(s.prototype),
        t.mixin(s.prototype),
        l.mixin(s.prototype),
        u.mixin(s.prototype),
        n.mixin(s.prototype),
        s
      );
    }
  ),
  csui.define(
    "csui/dialogs/members.picker/start.locations/acl.groups/acl.groups.factory",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection",
      "csui/utils/commands",
      "i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = a.extend({
        updateLocationModel: function (u) {
          var r = this.options.container;
          return (
            u.set({ hide: !0, invalid: !1, location: "acl.groups" }),
            d.Deferred().resolve().promise()
          );
        },
        getLocationParameters: function () {
          var u = this.options.container,
            r = new h(void 0, {
              connector: this.options.connector,
              nodeId: this.options.nodeId,
            });
          return (
            u.set("unselectable", !1),
            {
              container: this.options.container,
              collection: r,
              locationName: e.labelCurrentLocation,
            }
          );
        },
      });
      return l;
    }
  ),
  csui.define(
    "csui/models/node/container.responsive.state.model",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/models/mixins/connectable/connectable.mixin",
      "csui/utils/base",
      "csui/utils/url",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l,
        u = a.Model.extend({
          defaults: {
            changed: void 0,
            new_state: void 0,
            state_id: void 0,
            state_message: void 0,
            user_message: void 0,
          },
          constructor: function (t) {
            a.Model.prototype.constructor.call(this, t),
              (this.options = t),
              (l = this.options.selectedContainerId),
              (this.previousState = null),
              this.makeConnectable(t);
          },
          getChanged: function () {
            return this.get("changed");
          },
          getState: function () {
            return this.get("new_state");
          },
          getUserMessage: function () {
            return this.get("user_message");
          },
          changeSelectedContainerId: function (r) {
            (l = r), (this.previousState = null);
          },
          urlBase: function () {
            var r,
              t = new e(this.connector.connection.url).getApiBase("v2");
            if (!this.previousState) r = e.combine(t, "/nodes/", l, "/state");
            else {
              var n = "?current_state=" + this.getState();
              r = e.combine(t, "/nodes/", l, "/state") + n;
            }
            return r;
          },
          url: function () {
            var r = this.urlBase();
            return r;
          },
          parse: function (r) {
            return (this.previousState = r.results.new_state), r.results;
          },
        });
      return h.mixin(u.prototype), u;
    }
  ),
  csui.define("csui/widgets/nodestable/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/nodestable/impl/nls/root/lang", {
    columnTitleLocation: "Location",
    dragAndDropMessage: "Drag and drop files here to add new content.",
    filterExpandTooltip: "Show filters",
    filterCollapseTooltip: "Hide filters",
    filterExpandAria: "Show filter panel",
    filterCollapseAria: "Hide filter panel",
    treeBrowseExpandTooltip: "Show navigation tree",
    treeBrowseCollapseTooltip: "Hide navigation tree",
    errorSavingTableSettings: "Cannot save table settings.",
    dialogTitle: "Filters",
    dialogTemplate: `Applying filters would clear your current selection.
Do you want to proceed?`,
    loadingText: "Loading {0}",
    containerContentTableAria: "Content of {0}",
    genericContentTableAria: "Content",
  }),
  csui.define(
    "csui/utils/toolitem.masks/children.toolitems.mask",
    [
      "csui/controls/toolbar/toolitems.mask",
      "csui-ext!csui/utils/toolitem.masks/children.toolitems.mask",
    ],
    function (v, d) {
      "use strict";
      d || (d = []);
      var a = v.extend({
        constructor: function (i) {
          v.prototype.constructor.apply(this),
            (this.context = i.context),
            (this.node = i.node),
            this._updateMask(),
            this.listenTo(this.node, "change:id", this._updateMask);
        },
        _updateMask: function () {
          var h = this.restoreMask({ silent: !0 });
          d.forEach(function (i) {
            (i = i({ context: this.context, node: this.node })),
              i && (h = this.extendMask(i, { silent: !0 }) || h);
          }, this),
            h && this.trigger("update", this);
        },
      });
      return a;
    }
  ),
  csui.define(
    "csui/utils/toolitem.masks/creation.toolitems.mask",
    [
      "module",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
      "csui-ext!csui/utils/toolitem.masks/creation.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      h || (h = []);
      var i = d.extend({
        constructor: function (l) {
          var u = v.config(),
            r = new a();
          d.prototype.constructor.call(this, r, { normalize: !1 }),
            Object.keys(u).forEach(function (t) {
              t != "extensions" && this.extendMask(u[t]);
            }, this),
            this.storeMask(),
            (this.context = l.context),
            (this.node = l.node),
            this._updateMask(),
            this.listenTo(this.node, "change:id", this._updateMask);
        },
        _updateMask: function () {
          var e = this.restoreMask({ silent: !0 });
          h.forEach(function (l) {
            (l = l({ context: this.context, node: this.node })),
              l && (e = this.extendMask(l, { silent: !0 }) || e);
          }, this),
            e && this.trigger("update", this);
        },
        _normalizeRule: function (e) {
          return (
            typeof e != "object" &&
              (typeof e == "string"
                ? (e = { signature: e })
                : (e = { type: e })),
            e.commandData || (e = { commandData: e }),
            e.type != null && ((e.commandData.type = e.type), delete e.type),
            e.signature || (e.signature = "Add"),
            e
          );
        },
      });
      return i;
    }
  ),
  csui.define("csui/controls/tabletoolbar/nls/root/localized.strings", {
    ToolbarItemReserve: "Reserve",
    ToolbarItemUnreserve: "Unreserve",
    ToolbarItemOriginalReserve: "Reserve original",
    ToolbarItemOriginalUnreserve: "Unreserve original",
    ToolbarItemAdvancedPermission: "Advanced permissions",
    MenuItemReserve: "Reserve",
    MenuItemUnreserve: "Unreserve",
    ToolbarItemThumbnail: "Grid view",
    ToolbarItemListView: "List view",
    ThumbnailTitle: "Grid view",
    ListViewTitle: "List view",
  }),
  csui.define("csui/controls/tablesettings/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/tablesettings/impl/nls/root/lang", {
    tableSettingsToolbarLabel: "Table Settings",
    tableModeLabelWrap: "List",
    tableModeLabelNoWrap: "Pinned columns",
    tableModeLabelThumbnail: "Grid",
    toggleDescription: "Description",
    columnSettings: "Column settings",
  }),
  csui.define("csui/controls/versionsettings/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/versionsettings/impl/nls/root/lang", {
    versionSettings: "Version settings",
    majorMinorVersion: "Major / minor versioning",
    currentFolder: "Current folder",
    currentAndSubfolder: "Current folder and sub-folders",
    exampleVersions: "Example: 0.1, 0.2, 1.0, 1.1",
    versionControlTitle: "Version control",
    actionBtnLabel: "Apply",
    cancelBtnLabel: "Cancel",
  }),
  csui.define(
    "hbs!csui/controls/versionsettings/impl/version.control",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div role="dialog" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionControlTitle") ||
                  (e != null ? n(e, "versionControlTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionControlTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 26 },
                      end: { line: 1, column: 49 },
                    },
                  })
                : t)
            ) +
            '" aria-labelledby="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionControlTitle") ||
                  (e != null ? n(e, "versionControlTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionControlTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 68 },
                      end: { line: 1, column: 91 },
                    },
                  })
                : t)
            ) +
            `" class="settings-dropdown-container csui-settings-show">
    <h1 class="version-control-title">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "versionControlTitle") ||
                  (e != null ? n(e, "versionControlTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "versionControlTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 61 },
                    },
                  })
                : t)
            ) +
            `</h1>
    <div class="required-field-switch">
        <span id="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "requiredFieldsLabelId") ||
                  (e != null ? n(e, "requiredFieldsLabelId") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "requiredFieldsLabelId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 18 },
                      end: { line: 4, column: 43 },
                    },
                  })
                : t)
            ) +
            `" class="only-required-fields-label"
              title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "onlyRequiredFieldsLabel") ||
                  (e != null ? n(e, "onlyRequiredFieldsLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "onlyRequiredFieldsLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 21 },
                      end: { line: 5, column: 48 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "onlyRequiredFieldsLabel") ||
                  (e != null ? n(e, "onlyRequiredFieldsLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "onlyRequiredFieldsLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 50 },
                      end: { line: 5, column: 77 },
                    },
                  })
                : t)
            ) +
            `</span>
        <div class="required-fields-switch"></div>
    </div>
    <span class="versioning-example"> ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "exampleVersions") ||
                  (e != null ? n(e, "exampleVersions") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "exampleVersions",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 38 },
                      end: { line: 8, column: 57 },
                    },
                  })
                : t)
            ) +
            ` </span>
    <div class="csui-version-folder-permissions binf-hidden">
        <ul class="csui-folder-permissions" role="listbox">
            <li class="csui-folder-permissions-item" role="option" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentFolder") ||
                  (e != null ? n(e, "currentFolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentFolder",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 74 },
                      end: { line: 11, column: 91 },
                    },
                  })
                : t)
            ) +
            `"
                aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentFolder") ||
                  (e != null ? n(e, "currentFolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentFolder",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 28 },
                      end: { line: 12, column: 45 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0">
                <div>
                    <span class="cs-icon"></span>
                    <span class="cs-label">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentFolder") ||
                  (e != null ? n(e, "currentFolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentFolder",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 43 },
                      end: { line: 15, column: 60 },
                    },
                  })
                : t)
            ) +
            `</span>
                </div>
            </li>
            <li class="csui-folder-permissions-item" role="option" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentAndSubfolder") ||
                  (e != null ? n(e, "currentAndSubfolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentAndSubfolder",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 74 },
                      end: { line: 18, column: 97 },
                    },
                  })
                : t)
            ) +
            `"
                aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentAndSubfolder") ||
                  (e != null ? n(e, "currentAndSubfolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentAndSubfolder",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 28 },
                      end: { line: 19, column: 51 },
                    },
                  })
                : t)
            ) +
            `" tabindex="0">
                <div>
                    <span class="cs-icon"></span>
                    <span class="cs-label">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentAndSubfolder") ||
                  (e != null ? n(e, "currentAndSubfolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentAndSubfolder",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 43 },
                      end: { line: 22, column: 66 },
                    },
                  })
                : t)
            ) +
            `</span>
                </div>
            </li>
        </ul>
    </div>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_versionsettings_impl_version.control",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/version.control.dialog/impl/version.control.dialog.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<h4 class="binf-modal-title">
  <span class="icon icon-notification-information"></span>
  <span class="title-text csui-version-control-dialog-title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 68 },
                      end: { line: 3, column: 77 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 79 },
                      end: { line: 3, column: 88 },
                    },
                  })
                : t)
            ) +
            `</span>
</h4>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_version.control.dialog_impl_version.control.dialog.header",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/controls/version.control.dialog/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/version.control.dialog/nls/root/lang", {
    disableVersioningTitle: "Disable major / minor versioning",
    majorMinorVersion: "Major / minor versions",
    currentFolder: "In current folder",
    currentAndSubfolder: "In current folder and subfolders",
    keepDocumentReserved: "Keep document Reserved after adding version",
    majorAndMinorVersion: "Major and minor versions",
    majorVersion: "Major version only",
    majorMinorExample: "(Example: 0.1, 0.2, 1.0)",
    majorVersionExample: "(Example: 1, 2, 3)",
    uploadDocument: "Upload document and its future versions as",
    selectVersionlabel: "Select version",
    majorVersionAria: "major version {0}",
    minorVersionAria: "minor version {0}",
    addDescription: "Add description",
    description: "Description",
  }),
  csui.define(
    "css!csui/controls/version.control.dialog/impl/version.control.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/version.control.dialog/impl/version.control.dialog.header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "hbs!csui/controls/version.control.dialog/impl/version.control.dialog.header",
      "i18n!csui/controls/version.control.dialog/nls/lang",
      "css!csui/controls/version.control.dialog/impl/version.control.dialog",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = a.ItemView.extend({
        template: h,
        templateHelpers: function () {
          return { title: this.options.title };
        },
        constructor: function (l) {
          l || (l = {}),
            a.ItemView.prototype.constructor.apply(this, arguments);
        },
      });
      return i;
    }
  ),
  csui.define(
    "csui/controls/version.control.dialog/version.control.dialog.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/controls/dialog/dialog.view",
      "csui/controls/version.control.dialog/impl/version.control.dialog.header.view",
      "css!csui/controls/version.control.dialog/impl/version.control.dialog",
    ],
    function (v, d, a, h, i) {
      "use strict";
      function e(l) {
        (this.options = l || {}),
          (this.deferred = d.Deferred()),
          this.deferred.then(
            v.bind(this.destroy, this),
            v.bind(this.destroy, this)
          );
      }
      return (
        v.extend(e.prototype, a.Events, {
          destroy: function () {
            this.options._view && this.options._view.destroy(),
              this.options._view && this.options._view.off(),
              this._dialog.destroy();
          },
          show: function () {
            return (this._dialog = this._createDialog()), this.deferred;
          },
          _createDialog: function () {
            var l = this.options,
              u = this,
              r = new i(l),
              t = new h({
                headerView: r,
                midSize: !0,
                title: l.title,
                view: l._view,
                className: "csui-version-control-dialog ",
                attributes: { "data-backdrop": "static" },
                buttons: [
                  {
                    id: "add",
                    label: l.actionBtnLabel,
                    default: !0,
                    click: function () {
                      t.destroy(),
                        u._resolutionComplete(l._view && l._view.getValue());
                    },
                  },
                  {
                    id: "cancel",
                    close: !0,
                    label: l.cancelBtnLabel,
                    click: function () {
                      t.destroy(), u.cancel();
                    },
                  },
                ],
                dialogTxtAria: l.title,
              });
            return (
              t.on(
                "hide",
                function () {
                  t.off(), this.cancel();
                },
                this
              ),
              t.show(),
              t.$el
                .find(".binf-modal-dialog")
                .attr("aria-describedby", l._view.warningMessageId),
              t
            );
          },
          cancel: function () {
            return this.deferred.reject(), !0;
          },
          _resolutionComplete: function (l) {
            return this.deferred.resolve(l), !0;
          },
        }),
        e
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/version.control.dialog/impl/disable.version.settings",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="binf-row">
  <div class="binf-col-sm-12 binf-control-label">
    ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "disableVersioningTitle") ||
                  (e != null ? n(e, "disableVersioningTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "disableVersioningTitle",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 4 },
                      end: { line: 3, column: 30 },
                    },
                  })
                : t)
            ) +
            `
  </div>
  <div class="binf-col-sm-12">
    <label class="binf-radio-inline">
      <input type="radio" name="versioncontrol" value='` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentFolder") ||
                  (e != null ? n(e, "currentFolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentFolder",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 55 },
                      end: { line: 7, column: 72 },
                    },
                  })
                : t)
            ) +
            `' tabindex='0'
             checked> ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentFolder") ||
                  (e != null ? n(e, "currentFolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentFolder",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 22 },
                      end: { line: 8, column: 39 },
                    },
                  })
                : t)
            ) +
            `</input>
    </label>
  </div>
  <div class="binf-col-sm-12">
    <label class="binf-radio-inline">
      <input type="radio" name="versioncontrol" value='` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentAndSubfolder") ||
                  (e != null ? n(e, "currentAndSubfolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentAndSubfolder",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 55 },
                      end: { line: 13, column: 78 },
                    },
                  })
                : t)
            ) +
            `'
             tabindex='0'>` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "currentAndSubfolder") ||
                  (e != null ? n(e, "currentAndSubfolder") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "currentAndSubfolder",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 26 },
                      end: { line: 14, column: 49 },
                    },
                  })
                : t)
            ) +
            `</input>
    </label>
  </div>
</div>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_version.control.dialog_impl_disable.version.settings",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior",
    ["csui/lib/underscore", "csui/lib/jquery", "csui/lib/marionette"],
    function (v, d, a) {
      "use strict";
      var h = a.Behavior.extend({
        events: { keydown: "onKeyInView" },
        initialize: function () {
          this.view.keyboardBehavior = this;
        },
        _rebuildFocusableElements: function () {
          this.focusables = this.view.$el
            .find(
              'input[type="radio"]:checked, input[type="checkbox"], textarea'
            )
            .filter(function (i, e) {
              return d(e).is(":visible");
            });
        },
        refreshFocusEngage: function () {
          this._rebuildFocusableElements();
        },
        getCurrentlyFocusedElement: function (i) {
          return i.shiftKey
            ? d(this.focusables[this.focusables.length - 1])
            : d(this.focusables[0]);
        },
        setFocusInView: function () {
          d(this.focusables[0]).trigger("focus");
        },
        _makeRadiosChecked: function () {
          this.radioChanged &&
            ((this.radioChanged = !1),
            this.view.$el
              .find('*[type="radio"]')
              .filter(function (i, e) {
                return e.checked === !0;
              })
              .attr("checked", !0));
        },
        isOnLastTabElement: function (i, e) {
          return (
            this._makeRadiosChecked(),
            this._rebuildFocusableElements(),
            i
              ? e.target === this.focusables[0]
              : e.target === this.focusables[this.focusables.length - 1]
          );
        },
        onKeyInView: function (i) {
          var e = i.keyCode;
          switch (e) {
            case 37:
            case 38:
            case 39:
            case 40:
              d(i.target).is(":radio") &&
                (d(i.target).attr("checked", !1), (this.radioChanged = !0));
              break;
          }
        },
      });
      return h;
    }
  ),
  csui.define(
    "csui/controls/version.control.dialog/disable.version.settings.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/controls/version.control.dialog/nls/lang",
      "hbs!csui/controls/version.control.dialog/impl/disable.version.settings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
        constructor: function (t) {
          a.ItemView.prototype.constructor.apply(this, arguments);
        },
        className: "csui-version-control-dialog-view",
        template: i,
        behaviors: {
          TabableRegion: { behaviorClass: e },
          VersionControlDialogKeyboardNavigationBehavior: { behaviorClass: l },
        },
        templateHelpers: function () {
          return {
            disableVersioningTitle: h.disableVersioningTitle,
            currentFolder: h.currentFolder,
            currentAndSubfolder: h.currentAndSubfolder,
          };
        },
        onAfterShow: function () {
          this.$el.find("*[tabindex]").prop("tabindex", 0),
            this.keyboardBehavior.setFocusInView();
        },
        onDomRefresh: function () {
          this.keyboardBehavior.refreshFocusEngage();
        },
        currentlyFocusedElement: function (r) {
          return this.keyboardBehavior.getCurrentlyFocusedElement(r);
        },
        onLastTabElement: function (r, t) {
          return this.keyboardBehavior.isOnLastTabElement(r, t);
        },
        getValue: function () {
          var r = v.filter(
            document.querySelectorAll('input[name="versioncontrol"]'),
            function (t) {
              return t.checked;
            }
          );
          return r[0].value === h.currentFolder ? 0 : 2;
        },
      });
      return u;
    }
  ),
  csui.define(
    "css!csui/controls/versionsettings/impl/settings",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/versionsettings/impl/version.control.view",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "i18n",
      "i18n!csui/controls/versionsettings/impl/nls/lang",
      "hbs!csui/controls/versionsettings/impl/version.control",
      "csui/controls/version.control.dialog/version.control.dialog.view",
      "csui/controls/version.control.dialog/disable.version.settings.view",
      "css!csui/controls/versionsettings/impl/settings",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = i.ItemView.extend({
        constructor: function (o) {
          (this.options = o || (o = {})),
            (this.requiredFieldsLabelId = a.uniqueId("requiredFields")),
            i.ItemView.call(this, o),
            (this.model = o.model),
            (this.settingsView = o.settingsView);
        },
        template: u,
        templateHelpers: function () {
          return {
            onlyRequiredFieldsLabel: l.majorMinorVersion,
            requiredFieldsLabelId: this.requiredFieldsLabelId,
            currentFolder: l.currentFolder,
            currentAndSubfolder: l.currentAndSubfolder,
            versionControlTitle: l.versionControlTitle,
            exampleVersions: l.exampleVersions,
          };
        },
        ui: {
          applyToFolderAndSubFoldersParentEle:
            ".csui-version-folder-permissions",
          folderPermissionSelector: ".csui-folder-permissions-item",
        },
        events: {
          "click @ui.folderPermissionSelector":
            "onClickToChangeFolderPermissionLevel",
          keydown: "onKeyDown",
          keyup: "onKeyUp",
        },
        className: "csui-toolbar-settings-container",
        onRender: function () {
          var s = this,
            o = this.model.get("versions_control_advanced");
          (this.settings = {
            majorMinorVersion: o || !1,
            permissionLevel: this.options.permissionLevel || 0,
          }),
            (this._folderPermissionEnabled = o || !1),
            (this.requiredFieldSwitchModel = new h.Model({
              data: this._folderPermissionEnabled,
            })),
            csui.require(
              ["csui/controls/form/fields/booleanfield.view"],
              function (c) {
                (s.requiredFieldSwitchView = new c({
                  mode: "writeonly",
                  model: s.requiredFieldSwitchModel,
                  labelId: s.requiredFieldsLabelId,
                  onBeforeChange: a.bind(function () {
                    if (s._folderPermissionEnabled)
                      s._disableVersionSettings()
                        .done(function (m) {
                          return (
                            (s._folderPermissionEnabled = !1),
                            (s.controlViewIsInFocus = !1),
                            (s.settings.majorMinorVersion = !1),
                            (s.settings.permissionLevel = m),
                            s.settingsView.saveAndDestroySettingsDropdown(),
                            s.settingsView.restoreFocusToView(),
                            !0
                          );
                        })
                        .fail(function () {
                          return (
                            (s.controlViewIsInFocus = !1),
                            s.settingsView.destroyVersionControlView(),
                            s.settingsView.restoreFocusToView(),
                            !1
                          );
                        });
                    else return !0;
                  }, s),
                })),
                  s
                    .$(".required-fields-switch")
                    .append(s.requiredFieldSwitchView.$el),
                  s.requiredFieldSwitchView.render(),
                  s.requiredFieldSwitchView.on("field:changed", function (m) {
                    (s._folderPermissionEnabled = void 0),
                      m.fieldvalue || m.fieldView.fieldvalue
                        ? (s._applyFolderPermissionLevel(
                            s.$el.find("ul li:nth-child(1)")
                          ),
                          s.ui.applyToFolderAndSubFoldersParentEle.removeClass(
                            "binf-hidden"
                          ),
                          (s.settings.majorMinorVersion = !0),
                          (s.settings.permissionLevel = 0))
                        : (s.ui.applyToFolderAndSubFoldersParentEle.addClass(
                            "binf-hidden"
                          ),
                          (s.settings.majorMinorVersion = !1)),
                      s.refreshTabableElements();
                  }),
                  s.triggerMethod("dom:refresh");
              }
            );
        },
        onDomRefresh: function () {
          this.requiredFieldSwitchView &&
            d(this.requiredFieldSwitchView.ui.flagWriteField).length &&
            (this.refreshTabableElements(),
            this.tabableElements.length && this.tabableElements[0].focus());
        },
        onClickToChangeFolderPermissionLevel: function (s) {
          s.preventDefault(), s.stopPropagation();
          var o,
            c = d(s.target).attr("aria-label");
          l.currentFolder === c
            ? ((o = this.$el.find("ul li:nth-child(1)")),
              (this.settings.permissionLevel = 0))
            : l.currentAndSubfolder === c &&
              ((o = this.$el.find("ul li:nth-child(2)")),
              (this.settings.permissionLevel = 2)),
            this._applyFolderPermissionLevel(o);
        },
        refreshTabableElements: function () {
          this.tabableElements = this.$el
            .find("input, ul li")
            .filter(":visible")
            .toArray();
        },
        _applyFolderPermissionLevel: function (s) {
          var o = this.$el.find(".csui-folder-permissions-item.selected");
          s.find(".selected").length ||
            (o.length &&
              (o.find(".cs-icon").removeClass("icon-listview-checkmark"),
              o.removeClass("selected").attr("aria-selected", "false")),
            s.find(".cs-icon").addClass("icon-listview-checkmark"),
            s.attr("aria-selected", "true"),
            s.addClass("selected"));
        },
        onBeforeDestroy: function () {
          (this.tabableElements = void 0),
            (this._folderPermissionEnabled = void 0),
            (this.controlViewIsInFocus = void 0),
            this.requiredFieldSwitchView &&
              this.requiredFieldSwitchView.off("field:changed");
        },
        onKeyDown: function (s) {
          switch (s.keyCode) {
            case 13:
            case 32:
              this.onClickToChangeFolderPermissionLevel(s);
              break;
            case 9:
              this.moveInRegions(s);
              break;
            case 37:
            case 39:
              s.preventDefault(), s.stopPropagation();
              break;
            case 38:
            case 40:
              this.moveInSelectionRegion(s);
              break;
          }
        },
        onKeyUp: function (s) {
          s.keyCode === 27 && this.trigger("closeDropdown");
        },
        moveInRegions: function (s) {
          var o =
            this.tabableElements && this.tabableElements.indexOf(s.target);
          this.tabableElements && this.tabableElements.length === 1
            ? (s.stopPropagation(), s.preventDefault())
            : this.tabableElements &&
              (o === 0
                ? this.tabableElements[1].classList.contains("selected")
                  ? this.tabableElements[1].focus()
                  : this.tabableElements[2].focus()
                : this.tabableElements[0].focus(),
              s.stopPropagation(),
              s.preventDefault());
        },
        moveInSelectionRegion: function (s) {
          var o =
            this.tabableElements && this.tabableElements.indexOf(s.target);
          (this.tabableElements && this.tabableElements.length === 1) || o === 0
            ? (s.stopPropagation(), s.preventDefault())
            : this.tabableElements &&
              (o === 1
                ? this.tabableElements[2].focus()
                : this.tabableElements[1].focus(),
              s.stopPropagation(),
              s.preventDefault());
        },
        _disableVersionSettings: function () {
          this.controlViewIsInFocus = !0;
          var s = new t(),
            o = {
              _view: s,
              standardHeader: !1,
              title: l.majorMinorVersion,
              dialogClassName: "csui-version-settings-off",
              actionBtnLabel: l.actionBtnLabel,
              cancelBtnLabel: l.cancelBtnLabel,
            };
          return new r(o).show();
        },
      });
      return n;
    }
  ),
  csui.define(
    "hbs!csui/controls/versionsettings/impl/version.settings",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class='csui-toolbar-control-settings'>
    <div role="button" class="csui-toolbar-settings csui-acc-focusable"
        title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "settingLabel") ||
                  (e != null ? n(e, "settingLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "settingLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 15 },
                      end: { line: 4, column: 31 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "settingLabel") ||
                  (e != null ? n(e, "settingLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "settingLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 45 },
                      end: { line: 4, column: 61 },
                    },
                  })
                : t)
            ) +
            `"
        aria-haspopup="true" aria-expanded="false">
    </div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "enabled") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.noop,
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 8, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_controls_versionsettings_impl_version.settings",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/versionsettings/version.settings.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "i18n",
      "csui/controls/versionsettings/impl/version.control.view",
      "i18n!csui/controls/versionsettings/impl/nls/lang",
      "hbs!csui/controls/versionsettings/impl/version.settings",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/base",
      "csui/utils/url",
      "smart/utils/smart.base",
      "csui/utils/contexts/factories/next.node",
      "csui/controls/icons.v2",
      "csui/controls/icon/icon.view",
      "css!csui/controls/versionsettings/impl/settings",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f) {
      "use strict";
      var g = h.LayoutView.extend({
        constructor: function (b) {
          b || (b = {}),
            d.defaults(b, { iconName: "csui_action_version_control32" }),
            h.LayoutView.prototype.constructor.call(this, b),
            (this.parentView = b.originatingView || b.parentView),
            (this.context = b.context),
            this.listenTo(
              this.context.getModel(c),
              "before:change:id",
              function () {
                this.parentView._blockingCounter &&
                  this.parentView.unblockActions(),
                  (this.isContainerChanged = !0);
              }
            ),
            (this.isSilentFetch = !0),
            this.listenTo(this.parentView.collection, "request", function () {
              this.isSilentFetch = !1;
            });
        },
        template: u,
        templateHelpers: function () {
          return { enabled: this.enabled(), settingLabel: l.versionSettings };
        },
        ui: { settingsIcon: ".csui-toolbar-settings" },
        events: {
          "click @ui.settingsIcon": "_openSettingsView",
          keydown: "onKeyInView",
          keyup: "onKeyUpView",
        },
        onRender: function () {
          (this.versionsIcon = new f({
            iconName: this.options.iconName,
            states: !0,
            on: this.versionsStateIsOn,
            theme: this.options.useIconsForDarkBackground ? "dark" : "",
          })),
            (this.versionsIconRegion = new h.Region({
              el: this.ui.settingsIcon,
            })),
            this.versionsIconRegion.show(this.versionsIcon);
        },
        _openSettingsView: function (w) {
          (w = w || {}),
            (w.model = this.options.model),
            (w.settingsView = this),
            (this.versionControlSettings = new e(w)),
            this.listenTo(
              this.versionControlSettings,
              "closeDropdown",
              this._closeSettingsMenu
            ),
            this.listenTo(
              this.versionControlSettings,
              "show",
              this.setDropdownPosition
            ),
            v(window).on(
              "resize.dropdownResize",
              d.bind(this.setDropdownPosition, this)
            );
          var b = v.fn.binf_modal.getDefaultContainer();
          (this.versionDropdownMask = document.createElement("div")),
            (this.versionDropdownContainer = document.createElement("div")),
            this.ui.settingsIcon.attr("aria-expanded", "true"),
            this.setVersionsOpened(!0),
            this.versionDropdownContainer.classList.add(
              "csui-toolbar-control-settings-dropdown"
            ),
            this.versionDropdownMask.classList.add("version-mask"),
            v(b)
              .append(this.versionDropdownMask)
              .append(this.versionDropdownContainer),
            v(this.versionDropdownMask).on(
              "click",
              d.bind(this._saveAndDestroySettingsDropdown, this)
            ),
            (this.versionDropdownContainerRegion = new h.Region({
              el: this.versionDropdownContainer,
            })),
            this.versionDropdownContainerRegion.show(
              this.versionControlSettings
            ),
            this.versionDropdownContainerRegion.$el.addClass("binf-open");
        },
        _saveAndDestroySettingsDropdown: function () {
          var w = this.versionControlSettings.settings,
            b = this.options.model;
          b.get("versions_control_advanced") !== w.majorMinorVersion &&
            (this.parentView._blockingCounter === 0 &&
              this.parentView.blockActions(),
            C.call(this)
              .done(
                d.bind(function () {
                  !this.isContainerChanged &&
                    b.fetch({ silent: this.isSilentFetch }).always(
                      d.bind(function () {
                        this.isSilentFetch = !0;
                      }, this)
                    ),
                    this.parentView.unblockActions();
                }, this)
              )
              .fail(
                d.bind(function (k) {
                  this.parentView.unblockActions();
                  var y = new n.RequestErrorMessage(k);
                  t.showError(y.message);
                }, this)
              )),
            this.destroyVersionControlView();
          function C() {
            var k = this.versionControlSettings.settings,
              y = this.options.model,
              S = y.connector,
              P = {
                versions_control_advanced: k.majorMinorVersion.toString(),
                apply_to: k.permissionLevel,
              };
            return y.save(void 0, {
              data: P,
              type: "PUT",
              wait: !0,
              silent: !0,
              patch: !0,
              contentType: "application/x-www-form-urlencoded",
              url: s.combine(
                S.getConnectionUrl().getApiBase("v2"),
                "/nodes/" + y.get("id")
              ),
            });
          }
        },
        destroyVersionControlView: function () {
          var w = this.versionControlSettings;
          w &&
            !w.controlViewIsInFocus &&
            (this.versionDropdownContainerRegion.$el.removeClass("binf-open"),
            this.ui.settingsIcon.attr("aria-expanded", "false"),
            this.setVersionsOpened(!1),
            v(this.versionDropdownMask).off("click"),
            v(window).off("resize.dropdownResize"),
            w.destroy(),
            v(this.versionDropdownMask).remove(),
            v(this.versionDropdownContainer).remove());
        },
        restoreFocusToView: function () {
          this.$el.find(".csui-acc-focusable").trigger("focus");
        },
        setDropdownPosition: function () {
          var w = this.ui.settingsIcon[0].getBoundingClientRect(),
            b = w.width,
            C = w.height,
            k = w.left,
            y = w.top,
            S = this.versionDropdownContainer.offsetWidth,
            P = o.isRTL() ? 0 : S - b;
          (this.versionDropdownContainer.style.left = k - P + "px"),
            (this.versionDropdownContainer.style.top = y + C + "px");
        },
        enabled: function () {
          return this.options.model.actions.findWhere({
            signature: "versionscontrol",
          });
        },
        saveAndDestroySettingsDropdown: function () {
          this._saveAndDestroySettingsDropdown();
        },
        onKeyInView: function (w) {
          switch (w.keyCode) {
            case 13:
            case 32:
              this.enabled() &&
                (w.preventDefault(),
                w.stopPropagation(),
                this._openSettingsView(this.options));
              break;
          }
        },
        _closeSettingsMenu: function () {
          this._saveAndDestroySettingsDropdown(), this.restoreFocusToView();
        },
        setVersionsOpened: function (w) {
          (this.versionsStateIsOn = w),
            this.versionsIcon && this.versionsIcon.setIconStateIsOn(w);
        },
      });
      return d.extend(g.prototype, r), g;
    }
  ),
  csui.define(
    "hbs!csui/controls/tablesettings/menu.item.views/impl/table.settings.menu.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 0 },
                      end: { line: 1, column: 8 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_tablesettings_menu.item.views_impl_table.settings.menu.item",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/tablesettings/menu.item.views/table.settings.menu.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "smart/utils/otwc.loader",
      "hbs!csui/controls/tablesettings/menu.item.views/impl/table.settings.menu.item",
    ],
    function (v, d, a, h, i) {
      "use strict";
      return a.ItemView.extend({
        template: i,
        tagName: "otc-menuitem",
        constructor: function (u) {
          if (!u)
            throw new Error(
              "options object is mandatory for TableSettingsMenuItemView"
            );
          a.ItemView.prototype.constructor.call(this, u),
            this.listenTo(this.model, "change", this.render);
        },
        events: { "item-click": "onClicked" },
        onClicked: function (l) {
          this.trigger("selected:menuitem", {});
        },
      });
    }
  ),
  csui.define(
    "csui/controls/tablesettings/menu.item.views/table.settings.menu.select.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "nuc/lib/marionette",
      "smart/utils/otwc.loader",
      "hbs!csui/controls/tablesettings/menu.item.views/impl/table.settings.menu.item",
    ],
    function (v, d, a, h, i) {
      "use strict";
      return a.ItemView.extend({
        template: i,
        tagName: "otc-menuradio",
        attributes: function () {
          return { checked: this.model.get("checked") };
        },
        constructor: function (u) {
          if (!u)
            throw new Error(
              "options object is mandatory for TableSettingsMenuSelectView"
            );
          a.ItemView.prototype.constructor.call(this, u),
            this.listenTo(this.model, "change", (r) => {
              r.changed.checked === void 0
                ? Object.keys(r.changed).length > 0 && this.render()
                : (Object.keys(r.changed).length > 1 && this.render(),
                  (this.el.checked = !!this.model.get("checked")));
            });
        },
        events: { change: "onChanged" },
        onChanged: function (l) {
          l.originalEvent.detail.checked &&
            this.trigger("change:selection", {
              itemValue: this.model.get("itemValue"),
            });
        },
      });
    }
  ),
  csui.define(
    "csui/controls/tablesettings/menu.item.views/table.settings.menu.group.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "nuc/lib/marionette",
      "csui/controls/tablesettings/menu.item.views/table.settings.menu.select.view",
      "smart/utils/otwc.loader",
      "hbs!csui/controls/tablesettings/menu.item.views/impl/table.settings.menu.item",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      return a.CollectionView.extend({
        childView: h,
        template: e,
        tagName: "otc-menugroup",
        constructor: function (r) {
          if (!r)
            throw new Error(
              "options object is mandatory for TableSettingsMenuGroupView"
            );
          if (!r.model)
            throw new Error(
              "options object.model is mandatory for TableSettingsMenuGroupView"
            );
          a.CollectionView.prototype.constructor.call(this, r);
          const t = r.model.get("itemValue");
          (this.collection = new d.Collection(t)),
            this.listenTo(r.model, "change", () => {
              this.collection.reset(r.model.get("itemValue"));
            });
        },
        childEvents: { "change:selection": "onChangeSelection" },
        onChangeSelection: function (u, r) {
          this.trigger("change:selection", {
            selectionView: u,
            itemValue: r.itemValue,
          });
        },
      });
    }
  ),
  csui.define(
    "csui/controls/tablesettings/menu.item.views/table.settings.menu.checkbox.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "nuc/lib/marionette",
      "smart/utils/otwc.loader",
      "hbs!csui/controls/tablesettings/menu.item.views/impl/table.settings.menu.item",
    ],
    function (v, d, a, h, i) {
      "use strict";
      return a.ItemView.extend({
        template: i,
        tagName: "otc-menucheckbox",
        attributes: function () {
          return { checked: this.model.get("checked") };
        },
        constructor: function (u) {
          if (!u)
            throw new Error(
              "options object is mandatory for TableSettingsMenuCheckboxView"
            );
          a.ItemView.prototype.constructor.call(this, u),
            this.listenTo(this.model, "change", (r) => {
              r.changed.checked === void 0
                ? Object.keys(r.changed).length > 0 && this.render()
                : (Object.keys(r.changed).length > 1 && this.render(),
                  (this.el.checked = !!this.model.get("checked")));
            });
        },
        events: { change: "onChanged" },
        onChanged: function (l) {
          const u = l.originalEvent.detail.checked;
          u !== this.model.get("checked") &&
            this.trigger("change:switch", { checked: u });
        },
      });
    }
  ),
  csui.define(
    "csui/controls/tablesettings/menu.item.views/table.settings.menu.divider.view",
    ["csui/lib/marionette"],
    function (v, d) {
      "use strict";
      return v.ItemView.extend({
        template: !1,
        tagName: "otc-menudivider",
        constructor: function (i) {
          v.ItemView.prototype.constructor.call(this, i);
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/controls/tablesettings/impl/table.settings.dropdown",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<otc-button
      class="csui-toolbar-table-settings csui-acc-focusable"
      title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toolbarButtonLabel") ||
                  (e != null ? n(e, "toolbarButtonLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toolbarButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 13 },
                      end: { line: 3, column: 35 },
                    },
                  })
                : t)
            ) +
            `"
      arialabel="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toolbarButtonLabel") ||
                  (e != null ? n(e, "toolbarButtonLabel") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toolbarButtonLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 17 },
                      end: { line: 4, column: 39 },
                    },
                  })
                : t)
            ) +
            `"
      iconOnly
      icon="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "iconName") || (e != null ? n(e, "iconName") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconName",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 12 },
                      end: { line: 6, column: 24 },
                    },
                  })
                : t)
            ) +
            `"
      iconAppearance="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "iconAppearance") ||
                  (e != null ? n(e, "iconAppearance") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "iconAppearance",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 22 },
                      end: { line: 7, column: 40 },
                    },
                  })
                : t)
            ) +
            `"
      id="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toolbarButtonId") ||
                  (e != null ? n(e, "toolbarButtonId") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toolbarButtonId",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 10 },
                      end: { line: 8, column: 29 },
                    },
                  })
                : t)
            ) +
            `">
</otc-button>
<otc-menu class="csui-table-settings-dropdown" buttonId="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "toolbarButtonId") ||
                  (e != null ? n(e, "toolbarButtonId") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "toolbarButtonId",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 57 },
                      end: { line: 10, column: 76 },
                    },
                  })
                : t)
            ) +
            `">
</otc-menu>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_tablesettings_impl_table.settings.dropdown",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/themes/carbonfiber/ot-icons/icons_csui_action",
    [],
    function () {
      typeof otIconsRepository > "u" && (window.otIconsRepository = {}),
        (window.otIconsRepository.csui_action = {
          action_settings32: {
            category: "action",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve" class="ot-svg ot-svg--action"> <circle class="ot-state" fill="none" stroke="none" cx="16" cy="16" r="14.0" /><style type="text/css"> .st1--action-action_settings32{fill:#333333;} </style> <path class="st1--action-action_settings32 ot-metaphor" d="M22.85,17.15c0.635,0,1.15-0.515,1.15-1.15c0-0.635-0.515-1.15-1.15-1.15h-1.229  c-0.154-0.727-0.445-1.403-0.845-2l0.88-0.88c0.449-0.449,0.449-1.177,0-1.626c-0.449-0.449-1.177-0.449-1.626,0l-0.892,0.892  c-0.596-0.389-1.267-0.674-1.989-0.821V9.15C17.15,8.515,16.635,8,16,8c-0.635,0-1.15,0.515-1.15,1.15v1.265  c-0.722,0.146-1.393,0.431-1.989,0.821l-0.892-0.892c-0.449-0.449-1.177-0.449-1.626,0c-0.449,0.449-0.449,1.177,0,1.626  l0.881,0.881c-0.4,0.597-0.691,1.273-0.845,2H9.15C8.515,14.85,8,15.365,8,16c0,0.635,0.515,1.15,1.15,1.15h1.21  c0.144,0.74,0.43,1.428,0.828,2.037l-0.844,0.844c-0.449,0.449-0.449,1.177,0,1.626c0.449,0.449,1.177,0.449,1.626,0l0.833-0.833  c0.61,0.409,1.303,0.705,2.049,0.857v1.17c0,0.635,0.515,1.15,1.15,1.15c0.635,0,1.15-0.515,1.15-1.15v-1.17  c0.746-0.152,1.439-0.448,2.049-0.857l0.833,0.833c0.449,0.449,1.177,0.449,1.626,0c0.449-0.449,0.449-1.177,0-1.626l-0.844-0.844  c0.398-0.609,0.684-1.297,0.828-2.037H22.85z M16,19.497c-1.901,0-3.449-1.548-3.449-3.449c0-1.902,1.547-3.449,3.449-3.449  s3.449,1.547,3.449,3.449C19.449,17.949,17.902,19.497,16,19.497z" /> <circle class="ot-focus" fill="none" stroke="none" cx="16" cy="16" r="15.5" /></svg>',
          },
          //PSD
          viewtoggle: {
            category: "action",
            svg: `
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" 
                   x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve" 
                   class="ot-svg ot-svg--action">
                <circle class="ot-state" fill="none" stroke="none" cx="16" cy="16" r="14"/>
                <style type="text/css">
                  .st1--action-viewtoggle { fill:#333333; }
                  .st2--action-viewtoggle { fill:none; stroke:#2E3D98; }
                </style>
                <g class="ot-metaphor">
                  <path class="st1--action-viewtoggle" d="M22.501,22.263h-1.433c1.841-1.52,2.93-3.832,2.93-6.262
                    c0-4.055-2.947-7.491-6.855-7.993C17.107,8.003,17.069,8,17.03,8c-0.423,0-0.782,0.327-0.836,0.761
                    c-0.057,0.475,0.273,0.911,0.739,0.971c3.058,0.392,5.365,3.087,5.365,6.269c0,2.175-1.042,4.14-2.799,5.304v-2.108
                    c0-0.479-0.381-0.869-0.852-0.869c-0.469,0-0.85,0.389-0.85,0.869v4.672V24h0.128h4.576c0.469,0,0.85-0.389,0.85-0.868
                    C23.353,22.652,22.972,22.263,22.501,22.263z"/>
                  <path class="st1--action-viewtoggle" d="M15.068,22.269c-3.06-0.392-5.366-3.087-5.366-6.269
                    c0-2.175,1.042-4.14,2.799-5.304v2.108c0,0.479,0.381,0.868,0.851,0.868c0.469,0,0.851-0.389,0.851-0.868V8.132V8.001h-0.129
                    H9.498c-0.469,0-0.851,0.389-0.851,0.869c0,0.479,0.381,0.868,0.851,0.868h1.433C9.09,11.259,8,13.571,8,16
                    c0,4.055,2.947,7.491,6.855,7.993C14.892,23.997,14.927,24,14.962,24c0.427,0,0.79-0.327,0.844-0.76
                    C15.865,22.764,15.533,22.329,15.068,22.269z"/>
                </g>
                <circle class="ot-focus" fill="none" stroke="none" cx="16" cy="16" r="15.5"/>
              </svg>
            `
          },
          //PSD
        });
    }
  ),
  csui.define(
    "csui/controls/tablesettings/table.settings.dropdown.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "nuc/lib/marionette",
      "nuc/utils/log",
      "smart/utils/otwc.loader",
      "i18n!csui/controls/tablesettings/impl/nls/lang",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/utils/commands",
      "csui/controls/tablesettings/menu.item.views/table.settings.menu.item.view",
      "csui/controls/tablesettings/menu.item.views/table.settings.menu.group.view",
      "csui/controls/tablesettings/menu.item.views/table.settings.menu.checkbox.view",
      "csui/controls/tablesettings/menu.item.views/table.settings.menu.divider.view",
      "hbs!csui/controls/tablesettings/impl/table.settings.dropdown",
      "csui/themes/carbonfiber/ot-icons/icons_csui_action",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      return a.CompositeView.extend({
        className: "csui-table-settings-dropdown-view",
        template: o,
        childViewContainer: "otc-menu",
        constructor: function (f) {
          if (!f)
            throw new Error(
              "options object is mandatory for TableSettingsDropdownView"
            );
          if (!f.originatingView)
            throw new Error(
              "options.originatingView is mandatory for TableSettingsDropdownView"
            );
          if (
            (v.defaults(f, {
              iconName: "csui_action:action_settings32",
              toolbarButtonId: v.uniqueId(),
            }),
            a.CompositeView.prototype.constructor.call(this, f),
            (this.iconName = f.iconName),
            (this.toolbarButtonId = f.toolbarButtonId),
            (this.useIconsForDarkBackground = f.useIconsForDarkBackground),
            typeof f.originatingView.getTableMode == "function" &&
              typeof f.originatingView.setTableMode == "function")
          ) {
            this.nodesTableView = f.originatingView;
            const g =
              this.nodesTableView.options.toolbarItems.tableSettingsToolbar;
            (this.status = {
              container: this.nodesTableView.container,
              context: f.context,
              currentTableMode: this.nodesTableView.getTableMode(),
              showDescription: this.nodesTableView.getDescriptionShown(),
              canCustomizeColumns:
                typeof this.nodesTableView.openColumnSettings == "function",
            }),
              (this.collection = new d.Collection()),
              (this.filteredToolItemsCollection = new l(g, {
                status: this.status,
                commands: u,
                mask: f.toolItemsMask,
              }));
          } else
            h.error(
              "options.originatingView is not an instance of NodesTableView => dropdown will be empty"
            ) && console.error(h.last),
              (this.filteredToolItemsCollection = new l([]));
          this._setViewCollection(),
            this.listenTo(this.filteredToolItemsCollection, "reset", () => {
              this._setViewCollection();
            });
        },
        templateHelpers: function () {
          return {
            iconName: this.iconName,
            iconAppearance: this.useIconsForDarkBackground ? "light" : "dark",
            toolbarButtonLabel: e.tableSettingsToolbarLabel,
            toolbarButtonId: this.toolbarButtonId,
          };
        },
        getChildView: function (m) {
          if (m.get("signature") === "-") return s;
          switch (m.get("itemType")) {
            case "menuitem":
              return r;
            case "menugroup":
              return t;
            case "menucheckbox":
              return n;
          }
        },
        ui: { dropdown: "otc-menu.csui-table-settings-dropdown" },
        childEvents: {
          "change:selection": "performOptionChange",
          "change:switch": "performSwitchChange",
          "selected:menuitem": "performOptionSelected",
        },
        performOptionChange: async function (m, f) {
          this.closeMenu();
          const g = f.selectionView;
          await this.executeCommandForEvent(g, f), this._setViewCollection();
        },
        performSwitchChange: async function (m, f) {},
        performOptionSelected: async function (m, f) {
          this.closeMenu(), await this.executeCommandForEvent(m, f);
        },
        closeMenu: function () {
          this.isRendered && this.ui.dropdown[0].removeAttribute("isopen");
        },
        executeCommandForEvent: async function (m, f) {
          const g = m.model.get("signature"),
            w = u.get(g);
          try {
            if (w) {
              if (v.isFunction(w.execute)) {
                const b = this.status,
                  C = v.extend({ nodesTableView: this.nodesTableView }, f);
                await w.execute(b, C);
              }
            } else throw new Error('Command "' + g + '" not found.');
          } catch (b) {
            h.warn(
              `Executing the command "{0}" failed.
{1}`,
              w.get("signature"),
              b.stack
            ) && console.warn(h.last);
          }
        },
        _setViewCollection: function () {
          const m = [];
          let f = [];
          function g() {
            if (f.length > 1) {
              const w = new d.Model({ itemType: "menugroup", itemValue: f });
              m.push(w), (f = []);
            }
          }
          (this.status.currentTableMode = this.nodesTableView.getTableMode()),
            (this.status.showDescription =
              this.nodesTableView.getDescriptionShown()),
            this.filteredToolItemsCollection.refilter(),
            this.filteredToolItemsCollection.each((w) => {
              if (w.get("itemType") === "menuradio") {
                const C = w.get("commandData")?.statusAttributeForChecked;
                if (C) {
                  const k = this.status[C],
                    y = w.get("itemValue");
                  let S;
                  y === void 0 ? (S = k) : (S = y === k), w.set("checked", S);
                }
                f.push(w);
              } else {
                if ((g(), w.get("signature") === "-" && m.length === 0)) return;
                m.push(w);
              }
            }),
            g(),
            this.collection.reset(m);
        },
      });
    }
  ),
  csui.define(
    "csui/widgets/nodestable/toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/nls/localized.strings",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "i18n!csui/controls/tablesettings/impl/nls/lang",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui/widgets/favorites/favorite.star.view",
      "csui/controls/versionsettings/version.settings.view",
      "csui/controls/tablesettings/table.settings.dropdown.view",
      "csui-ext!csui/widgets/nodestable/toolbaritems",
      "i18n",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      var s = {
        navigationToolbar: new i(
          {
            backLink: [
              {
                signature: "BackToLastFragment",
                name: a.ToolbarItemGoBack,
                iconName:
                  n && n.settings.rtl
                    ? "csui_action_back_rtl32"
                    : "csui_action_back32",
                toolItemAria: a.ToolbarItemGoBack,
              },
            ],
            main: [
              {
                signature: "TreeBrowse",
                name: a.ToolbarItemTreeBrowse,
                iconName:
                  n && n.settings.rtl
                    ? "csui_action_toggle_tree_rtl32"
                    : "csui_action_toggle_tree32",
                toolItemAria: a.ToolbarItemTreeBrowse,
                toolItemAriaExpand: !1,
              },
            ],
          },
          { addGroupSeparators: !1 }
        ),
        filterToolbar: new i({
          filter: [
            {
              signature: "Filter",
              name: a.ToolbarItemFilter,
              iconName: "csui_action_filter32",
              toolItemAria: a.ToolbarItemFilterAria,
              toolItemAriaExpand: !1,
              toolItemRole: "button",
            },
          ],
        }),
        addToolbar: new i(
          { add: [] },
          {
            maxItemsShown: 0,
            dropDownIconName: "csui_action_add32",
            dropDownText: a.ToolbarItemAddItem,
            addTrailingDivider: !1,
          }
        ),
        leftToolbar: new i({
          main: [
            {
              signature: "CollectionCanCollect",
              name: a.ToolbarItemAddItem,
              iconName: "csui_action_add32",
            },
          ],
        }),
        tableHeaderToolbar: new i(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              { signature: "View", name: a.ToolbarItemView, flyout: "view" },
            ],
            edit: [
              { signature: "CopyLink", name: a.ToolbarItemCopyLink },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                flyout: "edit",
                promoted: !0,
              },
              { signature: "EditWebDAV", name: "EditWebDAV", flyout: "edit" },
            ],
            share: [
              {
                signature: "SendTo",
                name: a.ToolbarItemSendTo,
                flyout: "sendto",
                group: "share",
              },
              {
                signature: "Shares",
                name: a.ToolbarItemShare,
                flyout: "share",
                promoted: !0,
                group: "share",
              },
              {
                signature: "EmailLink",
                name: a.ToolbarItemEmailLink,
                flyout: "sendto",
                promoted: !0,
                group: "share",
              },
            ],
            main: [
              { signature: "InlineEdit", name: a.ToolbarItemRename },
              { signature: "permissions", name: a.ToolbarItemPermissions },
              { signature: "Download", name: a.ToolbarItemDownload },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
              },
              { signature: "Copy", name: a.ToolbarItemCopy },
              { signature: "Move", name: a.ToolbarItemMove },
              { signature: "AddVersion", name: a.ToolbarItemAddVersion },
              { signature: "Collect", name: a.ToolbarCollect },
              { signature: "Delete", name: a.ToolbarItemDelete },
              {
                signature: "RemoveCollectedItems",
                name: a.ToolbarItemRemoveCollectionItems,
              },
              { signature: "ZipAndDownload", name: a.MenuItemZipAndDownload },
              { signature: "Restructure", name: a.ToolbarItemRestructure },
            ],
            shortcut: [
              {
                signature: "OriginalCopyLink",
                name: a.ToolbarItemOriginalCopyLink,
              },
              { signature: "OriginalEdit", name: a.ToolbarItemOriginalEdit },
              {
                signature: "OriginalEmailLink",
                name: a.ToolbarItemOriginalShare,
              },
              {
                signature: "OriginalReserveDoc",
                name: d.ToolbarItemOriginalReserve,
              },
              {
                signature: "OriginalUnreserveDoc",
                name: d.ToolbarItemOriginalUnreserve,
              },
              { signature: "OriginalCopy", name: a.ToolbarItemOriginalCopy },
              { signature: "OriginalMove", name: a.ToolbarItemOriginalMove },
              {
                signature: "OriginalAddVersion",
                name: a.ToolbarItemAddVersion,
              },
              {
                signature: "OriginalDownload",
                name: a.ToolbarItemOriginalDownload,
              },
              {
                signature: "OriginalDelete",
                name: a.ToolbarItemOriginalDelete,
              },
            ],
          },
          {
            maxItemsShown: 15,
            dropDownIconName: "csui_action_more32",
            dropDownText: a.ToolbarItemMore,
            addGroupSeparators: !1,
            lazyActions: !0,
          }
        ),
        captionMenuToolbar: new i(
          {
            inspect: [{ signature: "Properties", name: a.MenuItemInformation }],
            other: [
              { signature: "CopyLink", name: a.MenuItemCopyLink },
              { signature: "EmailLink", name: a.ToolbarItemEmailLinkShort },
              { signature: "permissions", name: a.ToolbarItemPermissions },
              { signature: "Rename", name: a.MenuItemRename },
              { signature: "Copy", name: a.MenuItemCopy },
              { signature: "Move", name: a.MenuItemMove },
              { signature: "Delete", name: a.MenuItemDelete },
              { signature: "Collect", name: a.ToolbarCollect },
            ],
          },
          {
            maxItemsShown: 0,
            dropDownIconName: "csui_action_caret_down32",
            addGroupSeparators: !1,
          }
        ),
        inlineActionbar: new i(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: a.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            edit: [
              {
                signature: "CopyLink",
                name: a.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                flyout: "edit",
                promoted: !0,
                iconName: "csui_action_edit32",
              },
              { signature: "EditWebDAV", name: "EditWebDAV", flyout: "edit" },
            ],
            share: [
              {
                signature: "Share",
                name: a.MenuItemShare,
                iconName: "csui_action_share32",
                flyout: "share",
              },
              {
                signature: "SendTo",
                name: a.ToolbarItemSendTo,
                iconName: "csui_action_send_to32",
                flyout: "sendto",
              },
              {
                signature: "EmailLink",
                name: a.ToolbarItemEmailLink,
                flyout: "sendto",
              },
            ],
            other: [
              {
                signature: "InlineEdit",
                name: a.ToolbarItemRename,
                iconName: "csui_action_rename32",
              },
              {
                signature: "permissions",
                name: a.ToolbarItemPermissions,
                iconName: "csui_action_view_perms32",
              },
              {
                signature: "Download",
                name: a.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              {
                signature: "ReserveDoc",
                name: d.ToolbarItemReserve,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnreserveDoc",
                name: d.ToolbarItemUnreserve,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "Copy",
                name: a.ToolbarItemCopy,
                iconName: "csui_action_copy32",
              },
              {
                signature: "Move",
                name: a.ToolbarItemMove,
                iconName: "csui_action_move32",
              },
              {
                signature: "AddVersion",
                name: a.ToolbarItemAddVersion,
                iconName: "csui_action_add_version32",
              },
              {
                signature: "Collect",
                name: a.ToolbarCollect,
                iconName: "csui_action_collect32",
              },
              {
                signature: "Delete",
                name: a.ToolbarItemDelete,
                iconName: "csui_action_delete32",
              },
              {
                signature: "RemoveCollectedItems",
                name: a.ToolbarItemRemoveCollectionItems,
                iconName: "csui_action_collection_delete32",
              },
              {
                signature: "ZipAndDownload",
                name: a.MenuItemZipAndDownload,
                iconName: "csui_action_download32",
              },
              { signature: "Restructure", name: a.ToolbarItemRestructure },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownText: a.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
        tableSettingsToolbar: new i(
          {
            tableMode: [
              {
                signature: "TableSettingsTableMode",
                name: h.tableModeLabelWrap,
                itemType: "menuradio",
                itemValue: "wrap",
                commandData: { statusAttributeForChecked: "currentTableMode" },
              },
              {
                signature: "TableSettingsTableMode",
                name: h.tableModeLabelNoWrap,
                itemType: "menuradio",
                itemValue: "nowrap",
                commandData: { statusAttributeForChecked: "currentTableMode" },
              },
              {
                signature: "TableSettingsTableMode",
                name: h.tableModeLabelThumbnail,
                itemType: "menuradio",
                itemValue: "thumbnail",
                commandData: { statusAttributeForChecked: "currentTableMode" },
              },
            ],
            columns: [
              {
                signature: "TableSettingsColumns",
                name: h.columnSettings,
                itemType: "menuitem",
              },
            ],
            description: [
              {
                signature: "TableSettingsDescription",
                name: h.toggleDescription,
                itemType: "menucheckbox",
                commandData: { statusAttributeForChecked: "showDescription" },
              },
            ],
          },
          { addGroupSeparators: !0 }
        ),
        rightToolbar: new i(
          {
            main: [
              {
                signature: "ToggleDescription",
                name: a.ToolbarItemShowDescription,
                iconName: "csui_action_reveal_description32",
                commandData: { useContainer: !0 },
                toolItemRole: "button",
              },
              {
                signature: "TableModeWrap",
                name: a.ToolbarItemListView,
                iconName: "csui_action_switch_list32",
                commandData: { useContainer: !0 },
                title: a.ListViewTitle,
              },
              {
                signature: "TableModeThumbnail",
                name: a.ToolbarItemThumbnail,
                iconName: "csui_action_switch_thumb32",
                commandData: { useContainer: !0 },
                title: a.ThumbnailTitle,
              },
              {
                signature: "Comment",
                name: a.ToolbarItemComment,
                iconName: "esoc_no_comment32",
                iconNameForOn: "esoc_comment32",
                className: "esoc-socialactions-comment",
                customView: !0,
                commandData: { useContainer: !0 },
              },
              {
                signature: "VersionSettings",
                enabled: !0,
                viewClass: u,
                customView: !0,
                commandData: {
                  useContainer: !0,
                  viewOptions: { focusable: !1 },
                },
              },
              {
                signature: "Favorite2",
                enabled: !0,
                viewClass: l,
                customView: !0,
                commandData: {
                  useContainer: !0,
                  viewOptions: { focusable: !1 },
                },
              },
              {
                signature: "TableSettings",
                viewClass: r,
                customView: !0,
                commandData: {
                  useContainer: !0,
                  viewOptions: { focusable: !1, customClickHandler: !0 },
                },
              },
              {
                signature: "RestoreWidgetViewSize",
                name: a.ToolbarItemRestoreWidgetViewSize,
                iconName: "csui_action_minimize32",
                commandData: { useContainer: !0 },
              },
              {
                signature: "MaximizeWidgetView",
                name: a.ToolbarItemMaximizeWidgetView,
                iconName: "csui_action_expand32",
                commandData: { useContainer: !0 },
              },
            ],
          },
          { hAlign: "right", addTrailingDivider: !1 }
        ),
      };
      return (
        t &&
          v.each(t, function (o) {
            v.each(o, function (c, m) {
              var f = s[m];
              if (
                (!f && m === "otherToolbar" && (f = s.tableHeaderToolbar), !f)
              )
                throw new Error("Invalid target toolbar: " + m);
              v.each(c, function (g) {
                if (
                  ((g = new e(g)), g.get("signature") === "ConwsNavigateUp")
                ) {
                  const w =
                    f.collection.findIndex(
                      (b) => b.get("signature") === "BackToLastFragment"
                    ) + 1;
                  f.addItem(g, { index: w || 0 });
                  return;
                }
                f.addItem(g);
              });
            });
          }),
        (s.clone = function () {
          return i.cloneToolbarItems(this);
        }),
        i.storeToolbarItemsSnapshots(s),
        s
      );
    }
  ),
  csui.define(
    "csui/widgets/nodestable/toolbaritems.masks",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = [
        "filterToolbar",
        "leftToolbar",
        "tableHeaderToolbar",
        "inlineActionbar",
        "rightToolbar",
      ];
      function e() {
        var l = v.config(),
          u = new h();
        this.toolbars = d.reduce(
          i,
          function (r, t) {
            var n = new a(u, { normalize: !1 });
            return (
              d.each(l, function (s, o) {
                (s = s[t]), s && n.extendMask(s);
              }),
              n.storeMask(),
              (r[t] = n),
              r
            );
          },
          {}
        );
      }
      return (e.toolbars = i), e;
    }
  ),
  csui.define(
    "csui/widgets/nodestable/headermenuitems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/nodestable/headermenuitems",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = {
        headerMenuToolbar: new a(
          {
            inspect: [{ signature: "Properties", name: d.MenuItemInformation }],
            other: [
              { signature: "CopyLink", name: d.MenuItemCopyLink },
              { signature: "Share", name: d.MenuItemShare, flyout: "share" },
              {
                signature: "SendTo",
                name: d.ToolbarItemSendTo,
                flyout: "sendto",
              },
              {
                signature: "EmailLink",
                name: d.ToolbarItemEmailLinkShort,
                flyout: "sendto",
              },
              { signature: "permissions", name: d.ToolbarItemPermissions },
              { signature: "Rename", name: d.MenuItemRename },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: d.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: d.ToolbarItemUnrequestReservation,
              },
              { signature: "Copy", name: d.MenuItemCopy },
              { signature: "Move", name: d.MenuItemMove },
              { signature: "Collect", name: d.ToolbarCollect },
              { signature: "Delete", name: d.MenuItemDelete },
              {
                signature: "ZipAndDownload",
                name: d.ToolbarItemZipAndDownload,
              },
              { signature: "Restructure", name: d.MenuItemRestructure },
            ],
          },
          {
            maxItemsShown: 0,
            dropDownIconName: "csui_action_caret_down32",
            addGroupSeparators: !1,
          }
        ),
      };
      return (
        i &&
          v.each(i, function (l) {
            v.each(l, function (u, r) {
              var t = e[r];
              if (!t) throw new Error("Invalid target toolbar: " + r);
              v.each(u, function (n) {
                (n = new h(n)), t.addItem(n);
              });
            });
          }),
        (e.clone = function () {
          return a.cloneToolbarItems(this);
        }),
        e
      );
    }
  ),
  csui.define(
    "csui/widgets/nodestable/headermenuitems.mask",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = a.extend({
        constructor: function () {
          var l = v.config(),
            u = new h();
          a.prototype.constructor.call(this, u, { normalize: !1 }),
            d.each(
              l,
              function (r, t) {
                this.extendMask(r);
              },
              this
            ),
            this.storeMask();
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/nodestable/impl/nodestable",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-alternating-toolbars">
  <div class="csui-table-tabletoolbar"></div>
  <div class="csui-table-rowselection-toolbar"></div>
</div>
<div class="csui-facet-table-container">
  <div class='csui-side-panel csui-sidepanel-hidden'>
    <div class="csui-table-facetview csui-facetview-hidden csui-facetview-visibility"></div>
    <div class="csui-table-treeview csui-treeview-hidden csui-treeview-visibility"></div>
  </div>
  <!--outer div is needed in order to float table contents right to accommodate  facets-->
  <div class="csui-outertablecontainer">
    <!--inner div is needed in order to have tableview sized to remaining height of container-->
    <div class="csui-innertablecontainer">
      <div class="csui-table-facetbarview"></div>
      <div class="csui-table-tableview"></div>
      <div class="cs-thumbnail-wrapper"></div>
      <div class="csui-table-paginationview"></div>
      <div class="csui-nodestable-dragdropframe"></div>
    </div>
  </div>
</div>
`;
        },
      });
      return a.registerPartial("csui_widgets_nodestable_impl_nodestable", h), h;
    }
  ),
  csui.define(
    "css!csui/widgets/nodestable/impl/nodestable",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/nodestable/nodestable.view",
    [
      "require",
      "module",
      "nuc/lib/jquery",
      "nuc/lib/underscore",
      "nuc/lib/backbone",
      "nuc/lib/marionette",
      "nuc/utils/log",
      "nuc/utils/base",
      "i18n",
      "nuc/models/utils/v1tov2",
      "csui/utils/commonconfig.util",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/columns",
      "csui/utils/contexts/factories/children",
      "csui/utils/contexts/factories/columns2",
      "csui/utils/contexts/factories/children2",
      "csui/utils/contexts/factories/node",
      "csui/models/node/node.addable.type.factory",
      "csui/models/node/node.facet2.factory",
      "csui/utils/contexts/factories/appcontainer",
      "csui/utils/contexts/factories/user",
      "csui/utils/contexts/factories/largefilesettings.factory",
      "csui/utils/contexts/factories/objecttypes.factory",
      "nuc/models/node/node.model",
      "csui/models/nodes",
      "csui/models/node/container.responsive.state.model",
      "csui/utils/contexts/factories/widget.settings.collection.factory",
      "csui/controls/progressblocker/blocker",
      "csui/controls/tabletoolbar/tabletoolbar.view",
      "csui/controls/table/inlineforms/inlineform.factory",
      "csui/controls/facet.panel/facet.panel.view",
      "csui/controls/facet.bar/facet.bar.view",
      "csui/controls/table/table.view",
      "csui/controls/table/table.columns",
      "csui/controls/treebrowse/node.tree.view",
      "csui/controls/table/rows/description/description.view",
      "i18n!csui/widgets/nodestable/impl/nls/lang",
      "i18n!csui/utils/commands/nls/localized.strings",
      "i18n!csui/controls/table/impl/nls/lang",
      "csui/controls/pagination/nodespagination.view",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/utils/defaultactionitems",
      "csui/utils/toolitem.masks/children.toolitems.mask",
      "csui/utils/toolitem.masks/creation.toolitems.mask",
      "csui/widgets/nodestable/toolbaritems",
      "csui/widgets/nodestable/toolbaritems.masks",
      "csui/widgets/nodestable/headermenuitems",
      "csui/widgets/nodestable/headermenuitems.mask",
      "csui/utils/commands",
      "csui/utils/url",
      "csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view",
      "csui/controls/tableactionbar/tableactionbar.view",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/controls/draganddrop/draganddrop.view",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/controls/mixins/view.state/node.view.state.mixin",
      "csui/controls/mixins/view.state/multi.node.fetch.mixin",
      "csui/controls/mixins/view.state/node.selection.restore.mixin",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/thumbnail/thumbnail.view",
      "csui/controls/thumbnail/thumbnail.content",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/dragndrop.supported.subtypes",
      "csui/utils/accessibility",
      "csui/utils/responsivecontainer",
      "csui/lib/radio",
      "csui/utils/contexts/factories/next.node",
      "nuc/utils/namedlocalstorage",
      "csui/utils/namedsessionstorage",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/behaviors/resizable/resizable.behavior",
      "hbs!csui/widgets/nodestable/impl/nodestable",
      "csui/utils/contexts/perspective/plugins/node/node.extra.data",
      "csui/utils/contexts/synchronized.context",
      "smart/controls/table.settings/table.settings.columns.side.panel.view",
      "csui/controls/table/cells/cell.factory",
      "nuc/lib/jquery.when.all",
      "csui/lib/jquery.ui/js/jquery-ui",
      "csui/lib/jquery.redraw",
      "css!csui/widgets/nodestable/impl/nodestable",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D,
      L,
      Q,
      q,
      G,
      N,
      W,
      H,
      z,
      Z,
      te,
      le,
      ge,
      Pe,
      _e,
      ie,
      ae,
      fe,
      pe,
      ke,
      Re,
      Le,
      De,
      Ke,
      $e,
      He,
      me,
      Oe,
      Ue,
      qe,
      Ze,
      hi,
      ui,
      li,
      gi,
      Vi,
      Si,
      zi,
      di,
      ai,
      ji,
      Ai,
      Ui,
      bi,
      Fi,
      Ji,
      Xi,
      it,
      dt,
      mt,
      tt
    ) {
      "use strict";
      l = l(d.id);
      const Zi = "globalPreferences";
      var xi = di.isAccessibleTable(),
        nt = di.shouldEnforceDescriptionColumn(),
        st = ai.isResponsiveContainerOn(),
        ht = ai.isResponsiveContainerMessageModeOn(),
        Gi = /\bfast\b(?:=([^&]*)?)?/i.exec(location.search);
      Gi = Gi ? Gi[1] !== "false" : void 0;
      var vi = d.config();
      h.defaults(vi, d.config().csui || {}, {
        defaultPageSize: 30,
        defaultPageSizes: [30, 50, 100],
        showInlineActionBarOnHover: !xi,
        forceInlineActionBarOnClick: !1,
        inlineActionBarStyle: "csui-table-actionbar-bubble",
        clearFilterOnChange: !0,
        resetOrderOnChange: !1,
        resetLimitOnChange: !0,
        fixedFilterOnChange: !1,
        showCondensedHeaderToggle: !0,
        resetOrderByOnBrowse: !0,
        useV2RestApi: !1,
        useAppContainer: !1,
        enableObjectTypes: !1,
        containerResponsiveStateUpdateTime: 1e4,
        enableNoWrapGlobally: n.enableFeatureInSmartView() || !1,
      }),
        Gi !== void 0 && (vi.useAppContainer = Gi);
      var Di = e.LayoutView.extend(
        {
          _localStorageKeys: ["isDescriptionShown"],
          _sessionStorageKeys: ["orderBy"],
          _oldLocalKeys: ["tableMode", "isThumbnailEnabled"],
          _widgetSettingsDefaults: {
            tableMode: "wrap",
            isFacetOpen: !1,
            isTreeOpen: !1,
          },
          className: function () {
            var O = "csui-nodestable";
            return xi && (O += " csui-no-animation"), O + " initialLoading";
          },
          template: Xi,
          ui: {
            facetTableContainer: ".csui-facet-table-container",
            outerTableContainer: ".csui-outertablecontainer",
            innerTableContainer: ".csui-innertablecontainer",
            tableView: ".csui-table-tableview",
            _dragdropframe: ".csui-nodestable-dragdropframe",
            thumbnail: ".csui-thumbnail-wrapper",
            toolbarContainer: ".csui-alternating-toolbars",
            sidePanel: ".csui-side-panel",
            treeView: ".csui-table-treeview",
            facetView: ".csui-table-facetview",
            paginationView: ".csui-table-paginationview",
          },
          regions: {
            facetBarRegion: ".csui-table-facetbarview",
            tableToolbarRegion: ".csui-table-tabletoolbar",
            tableRowSelectionToolbarRegion: ".csui-table-rowselection-toolbar",
            facetRegion: ".csui-table-facetview",
            treeRegion: ".csui-table-treeview",
            tableRegion: ".csui-table-tableview",
            thumbnailRegion: ".cs-thumbnail-wrapper",
            paginationRegion: ".csui-table-paginationview",
          },
          behaviors: {
            DefaultAction: { behaviorClass: ie },
            ItemError: {
              behaviorClass: Fi,
              model: function () {
                return this.container;
              },
            },
            ResizableBehavior: { behaviorClass: Ji },
          },
          constants: { DEFAULT_SORT: "name asc", DEFAULT_SORT_CD: "order asc" },
          is: "NodesTableView",
          constructor: function (K) {
            //CSCCustom-start CSUI0002: load custom config to window
            if(!window._customconfig) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET','/img/_customconfig.json',false);
                xhr.send();
                
                if(xhr.status == 200){
                    window._customconfig = JSON.parse(xhr.responseText);
                }
            }
            //CSCCustom-end
            (this.options = K),
              K || (K = {}),
              h.defaults(K, vi, {
                data: {},
                pageSize: vi.defaultPageSize,
                ddItemsList: vi.defaultPageSizes,
                toolbarItems: ke.clone(),
                headermenuItems: Le.clone(),
                clearFilterOnChange: vi.clearFilterOnChange,
                resetOrderOnChange: vi.resetOrderOnChange,
                resetLimitOnChange: vi.resetLimitOnChange,
                fixedFilterOnChange: vi.fixedFilterOnChange,
                enableDragNDrop: !0,
                showSelectionCounter: !0,
                resetOrderByOnBrowse: vi.resetOrderByOnBrowse,
                urlParamsList: ["order_by", "page", "filter"],
              }),
              !this.options.preferencesStorageId &&
                vi.enableNoWrapGlobally &&
                (this.options.preferencesStorageId = Zi),
              (this.context = K.context),
              (this.isForResponsiveContainer = null),
              (this._getConfiguredStartingContainerId = function () {
                return K.data.containerId;
              }),
              (this._useAppContainer = K.data.containerId
                ? !1
                : vi.useAppContainer);
            var re = this.context.getModel(g),
              ve = this.options.container || re,
              Ce = this._getConfiguredStartingContainerId() || ve.get("id");
            (this._getStartingContainerId = function () {
              return Ce;
            }),
              K.enableViewState !== void 0
                ? (this.enableViewState = K.enableViewState)
                : (this.enableViewState = !0);
            let Te = this.context.viewStateModel,
              Ne = Te && Te.get("urlParams"),
              x = !1;
            Te &&
              Ne &&
              Ne.length > 3 &&
              Ne.indexOf("order_by") !== -1 &&
              Ne.indexOf("page") !== -1 &&
              Ne.indexOf("filter") !== -1 &&
              (x = !0),
              this.options.data &&
                this.options.data.containerId &&
                this.options.data.containerId !== re.get("id") &&
                (this.enableViewState = !1),
              this.enableViewState &&
                !x &&
                this._addUrlParametersSupport(K.context),
              (this.tableColumns = z.deepClone()),
              (this.commands = K.commands || Ke),
              (this.commandController = new Oe({ commands: this.commands })),
              this.listenTo(
                this.commandController,
                "before:execute:command",
                this._beforeExecuteCommand
              ),
              this.listenTo(
                this.commandController,
                "after:execute:command",
                this._afterExecuteCommand
              ),
              this.listenTo(
                this.commandController,
                "click:toolitem:action",
                this._toolbarActionTriggered
              ),
              this.listenTo(this, "click:actionbar:command", function (B) {
                B &&
                  B.commandSignature &&
                  B.commandSignature === "DocPreview" &&
                  (this.clearContainerResponsiveStateTimeout(),
                  (this.isDocPreviewInstance = !0));
              }),
              K.connector || (K.connector = this.context.getObject(s)),
              (this.connector = K.connector);
            var E = this;
            (this.largeFileSettingsFactory = this.context.getFactory(y)),
              (this.largeFileSettingsModel =
                this.largeFileSettingsFactory &&
                this.largeFileSettingsFactory.property),
              vi.enableObjectTypes &&
                (this.objectTypesFactory = this.context.getFactory(S, {
                  permanent: !0,
                })),
              K.toolbarItemsMasks || (K.toolbarItemsMasks = new Re()),
              K.headermenuItemsMask || (K.headermenuItemsMask = new De()),
              h.isEmpty(this.options.data) &&
                ((this.loadingText = Te && Te.get(Te.CONSTANTS.BACK_TO_TITLE)),
                (this.loadingText = h.str.sformat(
                  le.loadingText,
                  this.loadingText
                ))),
              K.blockingParentView
                ? Q.delegate(this, K.blockingParentView)
                : Q.imbue(this),
              e.LayoutView.prototype.constructor.call(this, K),
              (this.onWinRefresh = h.bind(this.windowRefresh, this)),
              a(window).on("resize.app", this.onWinRefresh),
              this.propagateEventsToRegions(),
              this.listenTo(
                this,
                "before:regions:reinitialize",
                this.initialize.bind(this, this.options)
              )
                .listenTo(this, "dom:refresh", this._refreshRightTableToolbar)
                .listenTo(this, "enable:blocking", this._rememberFocusInTable)
                .listenTo(this, "disable:blocking", this._restoreFocusInTable)
                .listenTo(this, "popover:open", this._popoverOpen)
                .listenTo(this, "before:render", this._initPreferences),
              this.listenTo(this.collection, "change", function (B) {
                B.inlineFormView &&
                  (this.changedModelIndex = this.collection.indexOf(B));
              }),
              this.listenTo(
                this.collection,
                "reset",
                h.bind(function () {
                  var B =
                    this.collection &&
                    this.collection.node &&
                    this.collection.node.get("id");
                  if (
                    (B && this.setSelectionKey(B),
                    this.namedLocalStorage &&
                      this.tableView &&
                      (this.tableView.options.descriptionRowViewOptions.showDescriptions =
                        this.options.showDescriptions =
                          !xi && this.getContainerPrefs("isDescriptionShown")),
                    B || (this.isForResponsiveContainer = !1),
                    !this.container || Ce === this.container.get("id"))
                  ) {
                    var j = this.getContainerPrefs("orderBy", {
                      useSessionStorage: !0,
                    });
                    this.options.isContainerChanged ||
                      (j = this.collection.orderBy),
                      (this.options.isContainerChanged = !1),
                      this._isOrderByChanged() &&
                        this.setContainerPrefs(
                          { orderBy: j },
                          { useSessionStorage: !0 }
                        );
                  }
                }, this)
              ),
              this.listenTo(this.context, "request", this._resetSortOrderBy),
              this.listenTo(this.context, "sync", this._syncLeftPanelFromPrefs),
              this.listenToOnce(this.collection, "sync", function () {
                this.$el.removeClass("initialLoading");
              }),
              this.listenTo(this.collection, "sync", function () {
                !this.collection.length &&
                  !document.activeElement.classList.contains(
                    "csui-progresspanel"
                  ) &&
                  a(
                    document.querySelector(".csui-help .csui-acc-tab-region")
                  ).trigger("focus");
              }),
              this.listenTo(
                this,
                "doc:preview:generic:actions",
                this._highlightRow
              ),
              (this.enableDragNDrop = K.enableDragNDrop),
              this.listenTo(this.collection, "filter:change", function (B) {
                B &&
                  B.facet &&
                  B.facet.length &&
                  this._showOrHideLocationColumn(!0);
              }),
              ji.channel("update:facets").on(
                "update:facets",
                h.bind(function () {
                  this._handleFacetsupdate();
                }, this)
              );
          },
          _highlightRow: function (O, K) {
            a("." + K).removeClass(K);
            var re = h.findIndex(this.collection.models, function (Ne) {
              return Ne.get("id") === O.get("id");
            });
            if (re !== -1) {
              var ve = this.tableView || this.targetView,
                Ce = ve && ve.table ? ve.table : void 0,
                Te = Ce === void 0 ? Ce : a(Ce.row(re).node());
              Te && Te.addClass(K);
            }
          },
          _initPreferences: function () {
            if (this._preferencesInitialized) return;
            this._preferencesInitialized = !0;
            var O = this.context.getModel(k).get("id");
            if (!O) {
              var K = this.context.getFactory(k);
              K && K.initialResponse && (O = K.initialResponse.data.id);
            }
            function re(Te) {
              (this.namedLocalStorage = new Ui(Te)),
                (this.namedSessionStorage = new bi(Te)),
                this.namedLocalStorage.remove("columnCustomizing"),
                this.namedLocalStorage.remove("pageSize"),
                this.namedLocalStorage.remove("isFacetOpen"),
                this.namedLocalStorage.remove("isTreeopen");
            }
            this.listenTo(this.context.getModel(k), "change:id", function () {
              var Te = this.context.getModel(k).get("id"),
                Ne = "nodestablePreferences:" + Te;
              Ne !== this.namedLocalStorage.name && re.call(this, Ne);
            }),
              re.call(this, "nodestablePreferences:" + O),
              ft(this.connector, this.namedSessionStorage);
            var ve = this.getPageSize(),
              Ce = this.options.data.pageSizes || this.options.ddItemsList;
            h.contains(Ce, ve) ||
              (Ce.push(ve), (this.options.data.pageSizes = Ce.sort())),
              (this.options.showDescriptions =
                this.getContainerPrefs("isDescriptionShown")),
              (this._makeColumnCustomizationsPersistant = h.debounce(
                h.bind(this._columnCustomizationsDebouncedSave, this),
                50
              ));
          },
          initialize: function (O) {
            this._supportsModeSwitch = !0;
            function K() {
              h.each(
                this.options.toolbarItemsMasks.toolbars,
                function (j, J) {
                  j.restoreAndResetMask(this.options.childrenToolItemsMask);
                },
                this
              );
            }
            var re = this.defaultActionController.commands,
              ve = this.defaultActionController.actionItems;
            if (
              (this.options.container
                ? (this.container = this.options.container)
                : this._getConfiguredStartingContainerId() &&
                  (this.container = this.context.getModel(g, {
                    node: {
                      attributes: {
                        id: this._getConfiguredStartingContainerId(),
                      },
                    },
                  })),
              this.trigger("update:model", this.container),
              !this.collection)
            ) {
              var Ce = this.enableViewState
                ? this._restoreCollectionOptionsFromViewState()
                : {};
              (this.collection = this.context.getCollection(
                Di.useV2RestApi ? f : c,
                {
                  options: h.defaults(
                    {
                      commands: this._getCommands(),
                      defaultActionCommands: this._useAppContainer
                        ? []
                        : ve.getAllCommandSignatures(re),
                      delayRestCommands: !0,
                      node: this.container,
                    },
                    Ce
                  ),
                  attributes: this._getConfiguredStartingContainerId()
                    ? { id: this._getConfiguredStartingContainerId() }
                    : void 0,
                  detached: this._useAppContainer,
                  useSpecialPaging: this._useAppContainer,
                }
              )),
                this.options.useV2RestApi &&
                  this.collection.setFields(it.getModelFields());
              var Te = it.getModelExpand();
              Te.properties &&
                Array.isArray(Te.properties) &&
                Te.properties.push(
                  "create_user_id",
                  "parent_id",
                  "modify_user_id"
                ),
                this.options.useV2RestApi || (Te = t.expandsV2toV1(Te)),
                this.collection.setExpand(Te);
            }
            this._getConfiguredStartingContainerId() &&
              !this.collection.node.get("id") &&
              this.collection.node.set(
                "id",
                this._getConfiguredStartingContainerId()
              ),
              this.initSelectionMixin(
                O,
                this.collection,
                this._getConfiguredStartingContainerId() ||
                  (this.collection &&
                    this.collection.node &&
                    this.collection.node.get("id"))
              );
            var Ne = this.context.viewStateModel;
            this.listenTo(this.context, "request", () => {
              this._inContextRequest = !0;
              const j = this.getPreference("tableMode");
              this._currentTableMode !== j &&
                (this._currentTableMode === "thumbnail"
                  ? (this.thumbnail.stopListening(),
                    this.thumbnail.resultsView.stopListening())
                  : this.tableView.stopListening());
            }),
              this.listenTo(this.context, "sync error", () => {
                delete this._inContextRequest;
              }),
              this.listenTo(this.collection, "reset", () => {
                if (this._inContextRequest) {
                  const j = this.getPreference("tableMode");
                  this._currentTableMode !== j &&
                    (l.debug(
                      "switching table mode in collection reset to {0}",
                      j
                    ) && console.log(l.last),
                    rt.call(this, j));
                }
              }),
              this.listenTo(
                this.collection,
                "filter:clear",
                this._collectionFilterChanged
              )
                .listenTo(Ne, "change:state", this.onViewStateChanged)
                .listenTo(this.collection, "paging:change", this._pagingChanged)
                .listenTo(this.collection, "limits:change", this._pagingChanged)
                .listenTo(
                  this.collection,
                  "orderBy:change",
                  this._orderByChanged
                )
                .listenTo(
                  this.collection,
                  "orderBy:clear",
                  this._orderByChanged
                ),
              this.collection.node
                ? ((this.isForResponsiveContainer = st),
                  this.isForResponsiveContainer &&
                    ((this.containerResponsiveStateModel = new D({
                      connector: this.connector,
                      selectedContainerId: this.collection.node.get("id"),
                    })),
                    this.containerResponsiveStateModel.fetch({ force: !0 }),
                    ai.setCurrentView(this),
                    (this.visibilityListener = h.bind(
                      this.handleVisibilityChange,
                      this
                    )),
                    document.addEventListener(
                      "visibilitychange",
                      this.visibilityListener,
                      !1
                    ),
                    this.listenTo(this, "doc:preview:view:close", function () {
                      (this.isDocPreviewInstance = null),
                        this.setContainerResponsiveStateTimeoutImmediate();
                    }),
                    this.listenTo(this, "doc:preview:closed", function () {
                      this.isForResponsiveContainer &&
                        this.isDocPreviewInstance &&
                        (this.setContainerResponsiveStateTimeout(),
                        (this.isDocPreviewInstance = null));
                    })),
                  this.listenTo(this.collection.node, "change:id", function () {
                    this.clearAllSelectedNodes(),
                      this.isForResponsiveContainer &&
                        (this.containerResponsiveStateModel.changeSelectedContainerId(
                          this.collection.node.get("id")
                        ),
                        this.clearContainerResponsiveStateTimeout(),
                        this.containerResponsiveStateModel
                          .fetch({ force: !0 })
                          .done(
                            this.setContainerResponsiveStateTimeout.bind(this)
                          ));
                  }))
                : (this.isForResponsiveContainer = !1);
            var x = this.context.getModel(Ai);
            (this._originalId = x.get("id")),
              this.listenTo(this.context, "retain:perspective", function () {
                (this.retainPerspectiveCalled = !0),
                  this.options.data.viewState
                    ? this.collection.node.set("id", x.get("id"))
                    : this.onViewStateChanged(!0),
                  this.setPageInfoFromViewState() ||
                    this.collection.resetLimit(!1);
              }),
              this.listenTo(x, "before:change:id", function () {
                (this.options.isContainerChanged = !0), this.removeOrderBy();
              }),
              this.container ||
                (this.container = O.container || this.collection.node),
              this.listenTo(this.collection, "error", (j, J, $) => {
                if (this.collection === j) {
                  var ue = new u.Error(J);
                  this.tableView.enableEmptyViewText(),
                    this.tableView.setCustomLabels({
                      emptyTableText: ue?.message,
                    });
                }
              }),
              this.collection.delayedActions &&
                this.listenTo(
                  this.collection.delayedActions,
                  "error",
                  function (j, J, $) {
                    var ue = new u.Error(J);
                    li.showMessage("error", ue.message);
                  }
                ),
              (this._serverColumns =
                O.columns ||
                this.context.getCollection(Di.useV2RestApi ? m : o, {
                  options: { node: this.container },
                  attributes: this._getConfiguredStartingContainerId()
                    ? { id: this._getConfiguredStartingContainerId() }
                    : void 0,
                })),
              (this.columns = new this._serverColumns.constructor()),
              this._buildColumnsAndReset(this._serverColumns),
              this.listenTo(this._serverColumns, "update reset remain", () => {
                this._buildColumnsAndReset(this._serverColumns);
              }),
              (this.addableTypes =
                O.addableTypes ||
                this.context.getCollection(w, {
                  options: { node: this.container },
                  attributes: this._getConfiguredStartingContainerId()
                    ? { id: this._getConfiguredStartingContainerId() }
                    : void 0,
                  detached: this._useAppContainer,
                }));
            var E =
              this.collection.filters && this.collection.filters.facet
                ? this.collection.filters.facet
                : void 0;
            if (
              (h.isEmpty(E) || (this.showFacetPanelOnLoad = !0),
              (this.facetFilters =
                O.facetFilters ||
                this.context.getCollection(b, {
                  options: { node: this.container, filters: E, itemsToShow: 5 },
                  attributes: this._getConfiguredStartingContainerId()
                    ? { id: this._getConfiguredStartingContainerId() }
                    : void 0,
                  detached: !0,
                })),
              this.getContainerPrefs("orderBy", { useSessionStorage: !0 }) !==
                void 0 &&
                (this.options.orderBy = this.getContainerPrefs(
                  "orderBy",
                  void 0,
                  !0
                )),
              this._useAppContainer)
            ) {
              var B = {
                models: {
                  container: this.container,
                  addableTypes: this.addableTypes,
                  children: this.collection,
                },
                attributes: this._getConfiguredStartingContainerId()
                  ? { id: this._getConfiguredStartingContainerId() }
                  : void 0,
              };
              this.context.getObject(C, B);
            }
            this.container &&
              (this.options.childrenToolItemsMask ||
                (this.options.childrenToolItemsMask = new fe({
                  context: this.context,
                  node: this.container,
                })),
              K.call(this),
              this.listenTo(this.options.childrenToolItemsMask, "update", K),
              this.options.creationToolItemsMask ||
                (this.options.creationToolItemsMask = new pe({
                  context: this.context,
                  node: this.container,
                })),
              (this._lastContainerId = this.container.get("id")),
              this.listenTo(this.context, "request", function () {
                var j = this.container.get("id");
                j !== this._lastContainerId &&
                  ((this._lastContainerId = j), this._changingContainer());
              }),
              this.listenTo(this.container, "change:id", function () {
                var j = this.container.get("id");
                j !== this._lastContainerId
                  ? ((this._lastContainerId = j), this._changingContainer())
                  : this._showOrHideLocationColumn(
                      this.facetFilters.getFilterQueryValue().length > 0
                    );
              }),
              this.collection.filters && this.collection.filters.facet
                ? this._showOrHideLocationColumn(!0)
                : this._showOrHideLocationColumn()),
              this._initPreferences(),
              this.setViewStatePage(this.getPageSize(), 0, {
                default: !0,
                defaultOnly: !0,
              }),
              (this._currentTableMode = this.getPreference("tableMode")),
              this._setFacetBarView(),
              this._setToolBar(),
              this.setTableView({
                enableDragNDrop: this.options.enableDragNDrop,
              }),
              this._setTableRowSelectionToolbarEventListeners(),
              this.setPagination(),
              (this.dragNDrop = this.enableDragNDrop && this.setDragNDrop()),
              this._updateZeroRecordsMessage();
            try {
              (this._synchronizedContextForFacets = new dt(
                this.context,
                [this.collection, this.facetFilters],
                { triggerEventsOnSourceContext: !0 }
              )),
                this.listenTo(
                  this._synchronizedContextForFacets,
                  "before:models:reset",
                  function () {
                    this._showOrHideLocationColumn(
                      this.facetFilters.getFilterQueryValue().length > 0
                    );
                  }
                );
            } catch {
              l.warn(
                "Either this.collection or this.facetFilters does not support synchronized context - falling back to non synchronized UI update when applying facets"
              ) && console.warn(l.last);
            }
            this.isForResponsiveContainer &&
              this.setContainerResponsiveStateTimeout();
          },
          isAppContainerUsed: function () {
            return this._useAppContainer;
          },
          getTableMode: function () {
            return this._currentTableMode;
          },
          setTableMode: async function (O) {
            return new Promise((K, re) => {
              if (!h.contains(["wrap", "nowrap", "thumbnail"], O)) {
                const ve =
                  "Not switching table mode due to invalid mode specified";
                l.warn(ve) && console.warn(l.last), re(new Error(ve));
                return;
              }
              O === this._currentTableMode ||
                ((this._currentTableMode = O),
                this.setPreference("tableMode", this._currentTableMode),
                this.enableThumbnailView()),
                K();
            });
          },
          getDescriptionShown: function () {
            return this.getContainerPrefs("isDescriptionShown");
          },
          setDescriptionShown: async function (O) {
            return new Promise((K, re) => {
              this.setContainerPrefs({ isDescriptionShown: O === !0 }),
                this.tableView.showDetailRowDescriptions(O),
                K();
            });
          },
          _resetColumnsWithServerColumns: function () {
            this._buildColumnsAndReset(this._serverColumns);
          },
          _buildColumnsAndReset: function (O) {
            at.call(this, O);
          },
          _mergeColumnsCustomSilent: function () {
            at.call(this, this.columns, { silent: !0 }) &&
              this.tableView &&
              this.tableView.updateCollectionParameters();
          },
          openColumnSettings: function ({ beforeSave: O } = {}) {
            const K = Object.fromEntries(
              this.tableColumns.map((xe) => [xe.get("key"), xe])
            );
            function re(xe) {
              const Se = xe.get("column_key"),
                ce = K[Se];
              return {
                id: Se,
                name: (ce && ce.get("name")) || xe.get("name"),
                type: xe.get("type"),
                permanent: ce ? ce.get("permanentColumn") === !0 : !1,
                pinned: ce ? ce.get("customization_pinned") === !0 : !1,
                default: xe.get("is_default_column") !== !1,
                label: xe.get("additional_name"),
                group: xe.get("column_group"),
              };
            }
            function ve(xe) {
              let Se = [];
              const ce = {};
              let ne, Me, ze, we;
              return (
                xe.forEach((Ae, Ge, ei) => {
                  const Ye = Ae.get("column_key");
                  if (
                    (ne &&
                      (Ae.get("customization_pinned") === ze
                        ? (we.push(Ye),
                          Ye === ne &&
                            (Se.push(...we),
                            (ce[Me] = we),
                            (ne = ""),
                            (Me = ""),
                            (we = [])))
                        : (ne = "")),
                    !ne)
                  ) {
                    const ti = Ae.get("customization_resize_span");
                    ti &&
                      ti !== Ye &&
                      ((ne = ti),
                      (Me = Ye),
                      (ze = Ae.get("customization_pinned")),
                      (we = []));
                  }
                }),
                { removedColumns: Se, removedColumnsByInitiatorColumn: ce }
              );
            }
            function Ce(xe) {
              const Se = xe.get("column_key");
              return E.includes(Se);
            }
            const Te = this.tableView.getDisplayableColumns(),
              Ne = this.tableView.getDisplayedColumns(),
              x = new i.Collection(Te.map(re)),
              { removedColumns: E, removedColumnsByInitiatorColumn: B } =
                ve(Te),
              j = new i.Collection(h.reject(Te, Ce).map(re)),
              J = new i.Collection(h.reject(Ne, Ce).map(re));
            function $(xe) {
              const Se = new i.Collection();
              J.forEach((ne) => {
                Se.add(ne);
                const Me = ne.get("id"),
                  ze = B[Me];
                ze &&
                  ze.forEach((we) => {
                    const Ae = x.findWhere({ id: we });
                    Se.add(Ae);
                  });
              });
              const ce = x.findLastIndex({ permanent: !1 });
              x.forEach((ne, Me) => {
                const ze = ne.get("id"),
                  we = Se.findWhere({ id: ze }),
                  Ae = (xe[ze] = { ...(xe[ze] || {}) });
                Me <= ce
                  ? (Ae.order = we ? Se.indexOf(we) + 1 : void 0)
                  : delete Ae.order,
                  (Ae.hidden = !we);
              });
            }
            function ue(xe) {
              Object.values(xe).forEach((Se) => {
                delete Se.hidden, delete Se.order, delete Se.width;
              });
            }
            J.listenTo(J, "update reset", (xe, Se = {}) => {
              const ce = { ...(this.getPreference("columns") || {}) };
              Se.isResetToDefault ? ue(ce) : $(ce);
              function ne() {
                this.setPreference("columns", ce);
              }
              const Me = O ? O(ce) : !0;
              Me &&
                (Me.then
                  ? Me.then(
                      () => ne.call(this),
                      () => {}
                    )
                  : ne.call(this));
            });
            function de() {
              let xe = !1;
              const Se = this.getPreference("columns");
              for (const ce in Se)
                if (Se[ce].width) {
                  xe = !0;
                  break;
                }
              return xe;
            }
            new mt({
              allColumns: j,
              selectedColumns: J,
              orderBy: ["name"],
              haveOtherCustomizations: de.call(this),
            }).show();
          },
          findNodeFromCollection: function (O, K) {
            return O.get(K) || O.findWhere({ id: K.get("id") });
          },
          onRemoveItemFromAllSelectedItems: function (O) {
            this._currentTableMode === "thumbnail" &&
              this.getAllSelectedNodes().length === 0 &&
              (this.thumbnail.$el
                .find(".csui-thumbnail-select")
                .removeClass("csui-checkbox"),
              this.thumbnail.thumbnailHeaderView.trigger(
                "selectOrUnselect.mixed"
              ));
          },
          onResetAllSelectedItems: function () {
            this._currentTableMode === "thumbnail" &&
              this.getAllSelectedNodes().length === 0 &&
              (this.thumbnail.$el
                .find(".csui-thumbnail-select")
                .removeClass("csui-checkbox"),
              this.thumbnail.thumbnailHeaderView.trigger(
                "selectOrUnselect.mixed"
              ),
              this.thumbnail.thumbnailHeaderView.$el.find(
                ".csui-thumbnail-select .csui-control"
              ).length &&
                this.thumbnail.thumbnailHeaderView.$el
                  .find(".csui-thumbnail-select .csui-control")
                  .trigger("focus"));
          },
          _setThumbnailView: function (O) {
            this.tableView.allColumns || this.tableView._getColumns(),
              (this.collection.orderBy =
                this.getContainerPrefs("orderBy", { useSessionStorage: !0 }) ||
                this.collection.orderBy ||
                this.options.orderBy ||
                this.constants.DEFAULT_SORT),
              this.collection.orderBy &&
                this.enableViewState &&
                this.setViewStateOrderBy([this.collection.orderBy], {
                  default: !0,
                }),
              O || (O = {});
            var K = h.defaults(
              {
                originatingView: this,
                context: this.context,
                collection: this.collection,
                columns: this.columns,
                thumbnailColumns: this.tableView.columns,
                columnsWithSearch: ["name"],
                orderBy: this.collection.orderBy,
                filterBy: this.options.filterBy,
                selectedChildren: new F(),
                actionItems: this.defaultActionController.actionItems,
                commands: this.defaultActionController.commands,
                tableColumns: Vi,
                inlineBar: this.tableView.options.inlineBar,
                blockingParentView: this.options.blockingParentView || this,
                displayedColumns: this.tableView.displayedColumns,
                allColumns: this.tableView.allColumns,
                allSelectedNodes: this.getAllSelectedNodes(),
                enableViewState: this.enableViewState,
              },
              O
            );
            (this.thumbnail = new gi(K)),
              this.listenTo(
                this.thumbnail,
                "execute:defaultAction",
                function (re) {
                  var ve = { node: re };
                  if ((this.trigger("before:defaultAction", ve), !ve.cancel)) {
                    var Ce = this;
                    this.defaultActionController
                      .executeAction(re, {
                        context: this.options.context,
                        originatingView: this,
                        collection: this.collection,
                      })
                      .done(function () {
                        Ce.trigger("executed:defaultAction", ve);
                      });
                  }
                }
              ),
              this.enableDragNDrop &&
                this.thumbnail.listenTo(
                  this.thumbnail,
                  "thumbnailItemRendered",
                  h.bind(function (re) {
                    if (!re.target.isEventSet && re.node && re.node.get("id")) {
                      var ve = this.setDragNDrop(re);
                      this._assignDragArea(ve, a(re.target)),
                        (re.target.isEventSet = !0);
                    }
                  }, this)
                ),
              this.listenTo(this.thumbnail, "thumbnailSelected", function (re) {
                this.addNodesToSelection(re.nodes);
              }),
              this.listenTo(
                this.thumbnail,
                "thumbnailUnSelected",
                function (re) {
                  this.options.showSelectionCounter &&
                    this.removeNodesFromSelection(re.nodes);
                }
              ),
              this.listenTo(
                this,
                "properties:view:destroyed",
                this.thumbnail.closeInlineForm
              ),
              this.listenTo(
                this,
                "permissions:view:destroyed",
                this.thumbnail.closeInlineForm
              ),
              this._stopAndStartPolling(this.thumbnail);
          },
          enableThumbnailView: function () {
            var O = this.tableView,
              K = this,
              re = a.Deferred(),
              ve = this.container,
              Ce = this.context,
              Te = this.originatingView;
            this.dragNDrop &&
              (this.dragNDrop.stopListeningDragEvent(
                ".csui-innertablecontainer",
                this
              ),
              this.dragNDrop.stopListeningDragEvent(
                ".csui-alternating-toolbars",
                this
              )),
              this._currentTableMode === "thumbnail"
                ? (this.tableView.selectedChildren &&
                    this.tableView.selectedChildren.models.length > 0 &&
                    (this.tableView.selectedChildren.models = []),
                  this._onSelectionUpdateCssClasses(
                    this.getAllSelectedNodes().length,
                    !0
                  ),
                  this._setThumbnailView(this.options))
                : this._onSelectionUpdateCssClasses(
                    this.getAllSelectedNodes().length,
                    !0
                  ),
              this.tableView.options.inlineBar.options.maxItemsShown !== 1 &&
                (this.collection.defaultInlineMaxItemsShown =
                  this &&
                  this.tableView.options.inlineBar.options.maxItemsShown),
              this._currentTableMode === "thumbnail"
                ? ((this.tableView.options.inlineBar.options.maxItemsShown = 1),
                  this.$el
                    .find("table.dataTable")
                    .addClass("csui-thumbnail-view"),
                  (this.thumbnailView = !0))
                : ((this.thumbnailView = !1),
                  (this.tableView.options.inlineBar.options.maxItemsShown =
                    this.collection.defaultInlineMaxItemsShown),
                  this.$el
                    .find("table.dataTable")
                    .removeClass("csui-thumbnail-view"));
            var Ne,
              x = this.$el.find(".csui-table-tableview");
            if (
              ((Ne = a(this.thumbnailRegion.el)[0]),
              (Ne = a(Ne)),
              this._currentTableMode !== "thumbnail")
            ) {
              var E =
                this.getContainerPrefs("orderBy", { useSessionStorage: !0 }) ||
                this.collection.orderBy ||
                this.options.orderBy ||
                this.constants.DEFAULT_SORT;
              this.setViewStateOrderBy([E], { silent: !0 }),
                (E = this._formatOrderBy(E));
              var B = E;
              this.thumbnail && this.thumbnail.destroy(),
                (this.res = B && B.split(" ")),
                this.res && this.res[1] === "asc"
                  ? (this.collection.orderstate = "icon-sortArrowUp")
                  : this.res &&
                    this.res[1] === "desc" &&
                    (this.collection.orderstate = "icon-sortArrowDown"),
                this.setTableView({
                  enableDragNDrop: this.options.enableDragNDrop,
                }),
                this._refreshRightTableToolbar(),
                this._refreshTableRowSelectionToolbar(),
                this.tableToolbarView.rightToolbarView &&
                  this.tableToolbarView.rightToolbarView.collection.refilter(),
                this.tableView.collection &&
                  this.tableView.collection.length === 0 &&
                  this.collection.fetched &&
                  (this.tableView._showEmptyViewText = !0),
                this._updateZeroRecordsMessage(),
                this.tableRegion.show(this.tableView),
                this.enableDragNDrop &&
                  (this.setDragNDrop(),
                  this.csuiDropMessage &&
                    (this.csuiDropMessage.remove(),
                    (this.csuiDropMessage = void 0)),
                  this._assignDragArea(
                    this.dragNDrop,
                    ".csui-innertablecontainer"
                  ),
                  this._assignDragArea(
                    this.dragNDrop,
                    ".csui-alternating-toolbars"
                  )),
                x.show(),
                K.tableView.triggerMethod("dom:refresh");
            } else {
              this.$el.removeClass("csui-has-nowrap-table");
              var j =
                this.getContainerPrefs("orderBy", { useSessionStorage: !0 }) ||
                this.collection.orderBy ||
                this.options.orderBy ||
                this.constants.DEFAULT_SORT;
              this.setViewStateOrderBy([j], { silent: !0 }),
                this.tableView && this.tableView.destroy(),
                j &&
                  ((this.res = j.split(" ")),
                  this.res[1] === "asc"
                    ? (this.collection.orderstate = "icon-sortArrowUp")
                    : this.res[1] === "desc" &&
                      (this.collection.orderstate = "icon-sortArrowDown")),
                this.thumbnailRegion.show(this.thumbnail),
                this.enableDragNDrop &&
                  (this.setDragNDrop(),
                  this.csuiDropMessage &&
                    (this.csuiDropMessage.remove(),
                    (this.csuiDropMessage = void 0)),
                  this._assignDragArea(
                    this.dragNDrop,
                    ".csui-innertablecontainer"
                  ),
                  this._assignDragArea(
                    this.dragNDrop,
                    ".csui-alternating-toolbars"
                  )),
                this._refreshRightTableToolbar(),
                this._refreshTableRowSelectionToolbar();
              var J = this.thumbnail._maintainNodeState(this.collection.at(0));
              !J &&
                this.changedModelIndex &&
                this.thumbnail._maintainNodeState(
                  this.collection.at(this.changedModelIndex)
                ),
                e.triggerMethodOn(this.thumbnail, "before:show"),
                this.collection &&
                  this.collection.models &&
                  this.collection.models.length >= 0 &&
                  (Ne.length === 0
                    ? ((Ne = a(a(this.thumbnailRegion.el)[0])),
                      e.triggerMethodOn(this.thumbnail, "before:show"),
                      Ne.append(this.thumbnail.el),
                      x.hide(),
                      Ne.show(),
                      e.triggerMethodOn(K.thumbnail, "show"))
                    : (x.hide(),
                      Ne.show(),
                      K.thumbnail.resultsView.triggerMethod("show"),
                      K.thumbnail.$el.is(":visible") &&
                        K.thumbnail.trigger("dom:refresh"),
                      K.thumbnail.onAfterShow()));
            }
            this.thumbnail &&
              this.listenTo(
                this.thumbnail.thumbnailHeaderView,
                "selectOrUnselect.all",
                h.bind(function ($) {
                  var ue = this.getAllSelectedNodes(),
                    de = this.thumbnail.collection.models;
                  if ($) {
                    var Ve = this.thumbnail.collection.models,
                      xe = [];
                    h.each(
                      de,
                      function (Se) {
                        !ue.get(Se) && Se.get("id") !== void 0 && xe.push(Se);
                      },
                      this
                    ),
                      ue.reset(xe.concat(ue.models));
                  } else
                    $ != null &&
                      !$ &&
                      (h.each(
                        de,
                        function (Se) {
                          ue.remove(Se, { silent: !0 });
                        },
                        this
                      ),
                      ue.reset(h.clone(ue.models)));
                }, this)
              );
          },
          onDestroy: function () {
            a(window).off("resize.app", this.onWinRefresh),
              this._destroyRowsDragAndDropViews(),
              this.dragNDrop &&
                (this.dragNDrop.destroy(), (this.dragNDrop = void 0)),
              this.isForResponsiveContainer &&
                this.clearContainerResponsiveStateTimeoutOnDestory(),
              document.removeEventListener(
                "visibilitychange",
                this.visibilityListener,
                !1
              );
          },
          windowRefresh: function () {
            this._isRendered &&
              this.isDisplayed &&
              this.facetView &&
              this.facetView.triggerMethod("dom:refresh");
          },
          _getCommands: function () {
            function O(Ce) {
              var Te = [];
              return (
                h.mapObject(Ce, function (Ne, x) {
                  Te = h.union(
                    Te,
                    h.without(Ne.collection.pluck("signature"), "disabled")
                  );
                }),
                Te
              );
            }
            var K = h.union(
                ["Add", "EditPermission"],
                h.without(ae.pluck("signature"), "Disabled"),
                O.call(this, this.options.headermenuItems),
                O.call(this, this.options.toolbarItems)
              ),
              re = Ke.clone(),
              ve = [];
            return (
              re.each(function (Ce) {
                K.indexOf(Ce.get("signature")) === -1 && ve.push(Ce);
              }),
              re.remove(ve, { silent: !0 }),
              re
            );
          },
          _refreshRightTableToolbar: function () {
            var O =
              this.tableToolbarView && this.tableToolbarView.rightToolbarView;
            O &&
              (O.collection.updateStatus({ tableMode: this._currentTableMode }),
              O.collection.refilter());
          },
          _refreshTableRowSelectionToolbar: function () {
            var O = this._tableRowSelectionToolbarView
              ? this._tableRowSelectionToolbarView._toolbarView
              : void 0;
            O &&
              O.collection &&
              this.getAllSelectedNodes().length === 1 &&
              this.commandController.commands.get("DocPreview") &&
              this._tableRowSelectionToolbarView._toolbarView.collection.refilter();
          },
          render: function () {
            if (this._supportsModeSwitch) {
              const O = this.getPreference("tableMode");
              if (this._currentTableMode !== O) {
                l.debug("switch to table mode in render: {0}", O) &&
                  console.log(l.last),
                  rt.call(this, O);
                return;
              }
            }
            e.LayoutView.prototype.render.call(this);
          },
          onRender: function () {
            this.$el.attr({
              role: "region",
              "aria-label": le.genericContentTableAria,
            }),
              this.facetBarRegion &&
                this.facetBarView &&
                this.facetBarRegion.show(this.facetBarView),
              !this.tableToolbarRegion && this.responsiveContainerTimeout
                ? this.clearContainerResponsiveStateTimeout(
                    this.responsiveContainerTimeout
                  )
                : (this.tableToolbarRegion.show(this.tableToolbarView),
                  this.showFacetPanelOnLoad && this._showFacetPanelView(),
                  this._currentTableMode === "thumbnail"
                    ? this.enableThumbnailView()
                    : (this.tableRegion.show(this.tableView),
                      this.isForResponsiveContainer
                        ? this.responsvieContainerDragAreaSet ||
                          (this._assignDragArea(
                            this.dragNDrop,
                            ".csui-innertablecontainer"
                          ),
                          this._assignDragArea(
                            this.dragNDrop,
                            ".csui-alternating-toolbars"
                          ),
                          (this.responsvieContainerDragAreaSet = !0))
                        : (this._assignDragArea(
                            this.dragNDrop,
                            ".csui-innertablecontainer"
                          ),
                          this._assignDragArea(
                            this.dragNDrop,
                            ".csui-alternating-toolbars"
                          ))),
                  this.paginationRegion.show(this.paginationView),
                  this.listenTo(this, "csui.description.toggled", function (O) {
                    this.tableView.showDetailRowDescriptions(
                      O.showDescriptions
                    );
                  }));
          },
          _resetSortOrderBy: function () {
            var O = this.options.container || this.context.getModel(g);
            if (
              !this.container ||
              O.get("id") === this.container.get("id") ||
              !this.container.get("container")
            )
              if (
                ((this.options.orderBy = this.getContainerPrefs("orderBy", {
                  useSessionStorage: !0,
                })),
                this.options.orderBy && this.options.orderBy.length)
              )
                this.collection.setOrder(this.options.orderBy, !1);
              else {
                if (
                  this.getViewStateOrderBy() &&
                  this.getDefaultViewStateOrderBy() !==
                    this.getViewStateOrderBy()
                )
                  return;
                this.collection.resetOrder(!1);
              }
          },
          onShow: function () {
            h.each(this.regionManager._regions, function (O) {
              O.currentView && O.currentView.triggerMethod("show");
            });
          },
          onAfterShow: function () {
            h.each(this.regionManager._regions, function (O) {
              O.currentView && O.currentView.triggerMethod("after:show");
            });
          },
          getSelectedNodes: function () {
            return new F(this.tableView.getSelectedChildren());
          },
          setActionBarEvents: function () {
            l.warn(
              "The method 'setActionBarEvents' has been deprecated and will be removed."
            ) && console.warn(l.last);
          },
          _updateToolItems: function () {
            l.warn(
              "The method '_updateToolItems' has been deprecated and will be removed."
            ) && console.warn(l.last);
          },
          setDragNDrop: function (O) {
            var K = O && O.node,
              re = $(K),
              ve = this.options.context,
              Ce = re ? O.target : this,
              Te = re ? K : this.container,
              Ne = K ? void 0 : this.addableTypes,
              x = re ? Ce : ".csui-innertablecontainer",
              E = new Ue({
                container: Te,
                collection: this.collection,
                addableTypes: Ne,
                context: ve,
                highlightedTarget: x,
                originatingView: this,
                isSupportedRowView: re,
              }),
              B = this;
            function j() {
              B.stopListening(E, "destroy", j),
                B.stopListening(E, "drag:over", B._addDragDropBorder),
                B.stopListening(E, "drag:leave", B._removeDragDropBorder);
            }
            this.listenTo(E, "destroy", j),
              this.listenTo(E, "drag:over", this._addDragDropBorder),
              this.listenTo(E, "drag:leave", this._removeDragDropBorder),
              this.container &&
                (this.listenTo(
                  this.container,
                  "change:id",
                  this._updateZeroRecordsMessage
                ),
                this.listenTo(
                  this.addableTypes,
                  "reset",
                  this._updateZeroRecordsMessage
                ));
            function J(ue) {
              return a.inArray(ue.get("type"), zi) !== -1;
            }
            function $(ue) {
              return ue &&
                ue.get("type") &&
                ue.get("type") === 144 &&
                (u.isSafari() || u.isIE11())
                ? !1
                : ue && ue.get("id") && J(ue);
            }
            return E;
          },
          _updateZeroRecordsMessage: function () {
            var O = this.canAddItems(),
              K = this.addItemsPermissions();
            (this.tableView.canAddItemsToContainer = O),
              (this.tableView.addItemsPermissions = K),
              this.collection.error
                ? (this.tableView.enableEmptyViewText(),
                  this.tableView.setCustomLabels({
                    emptyTableText: this.collection.error.message,
                  }))
                : this.tableView.setCustomLabels({
                    zeroRecords: !!O && !!K && le.dragAndDropMessage,
                  });
          },
          addItemsPermissions: function () {
            return this.dragNDrop && this.dragNDrop.canAdd();
          },
          canAddItems: function () {
            return zi.indexOf(this.container.get("type")) !== -1;
          },
          _assignDragArea: function (O, K) {
            O && O.setDragParentView(this, K);
          },
          _addDragDropBorder: function (O, K) {
            var re = K && K.disabled ? "addClass" : "removeClass",
              ve = ".csui-innertablecontainer";
            ve = K && K.highlightedTarget ? K.highlightedTarget : ve;
            const Ce = a(ve).addClass("drag-over")[re]("csui-disabled")[0];
            if (
              Ce &&
              this.collection.length > 0 &&
              this._currentTableMode === "nowrap"
            ) {
              const Ne = this.ui.tableView[0].getBoundingClientRect();
              var Te;
              if (
                (Ce.tagName === "TR"
                  ? (this.ui.innerTableContainer.addClass("drag-row"),
                    (Te = Ce.getBoundingClientRect()),
                    (Te.width = Ne.width),
                    this.ui.tableView
                      .find(".csui-nowrap-table.csui-normal-scrolling")
                      .hasScroll("y") &&
                      (Te.width = Te.width - a.scrollbarWidth()))
                  : Ce === this.ui.innerTableContainer[0] &&
                    (this.ui.innerTableContainer.addClass("drag-table"),
                    (Te = Ne)),
                Te)
              ) {
                Ce.classList.remove("drag-over");
                const x =
                  this.ui.innerTableContainer[0].getBoundingClientRect();
                (this.ui._dragdropframe[0].style.left = `${Te.x - x.x}px`),
                  (this.ui._dragdropframe[0].style.top = `${Te.y - x.y}px`),
                  (this.ui._dragdropframe[0].style.width = `${Te.width}px`),
                  (this.ui._dragdropframe[0].style.height = `${Te.height}px`);
              }
            }
          },
          _removeDragDropBorder: function (O) {
            var K = ".csui-innertablecontainer";
            O && O.highlightedTarget && O.valid
              ? a(O.highlightedTarget).removeClass("drag-over")
              : a(K).removeClass("drag-over"),
              this.ui.innerTableContainer.removeClass("drag-table drag-row"),
              (this.ui._dragdropframe[0].style.left = ""),
              (this.ui._dragdropframe[0].style.top = ""),
              (this.ui._dragdropframe[0].style.width = ""),
              (this.ui._dragdropframe[0].style.height = "");
          },
          setTableView: function (O) {
            O || (O = {});
            var K = this.options.context.viewStateModel,
              re = K.CONSTANTS,
              ve = K.get(re.QUERY_STRING_PARAMS),
              Ce = K.get(K.CONSTANTS.DEFAULT_STATE);
            this.collection.orderBy =
              (ve
                ? this.collection.orderBy
                : this.getContainerPrefs("orderBy", {
                    useSessionStorage: !0,
                  }) || this.collection.orderBy) ||
              this.options.orderBy ||
              this.constants.DEFAULT_SORT;
            var Te = !Ce || !Ce.order_by;
            this.collection.orderBy &&
              this.enableViewState &&
              this.setViewStateOrderBy([this.collection.orderBy], {
                default: Te,
              }),
              this._currentTableMode === "nowrap"
                ? this.$el.addClass("csui-has-nowrap-table")
                : this.$el.removeClass("csui-has-nowrap-table");
            var Ne = h.extend(
                {
                  context: this.options.context,
                  connector: this.connector,
                  collection: this.collection,
                  columns: this.columns,
                  tableAria:
                    this.options.tableAria || this._getTableAria.bind(this),
                  tableColumns: this.tableColumns,
                  descriptionRowView: te,
                  descriptionRowViewOptions: {
                    firstColumnIndex: 2,
                    lastColumnIndex: 2,
                    showDescriptions: !xi && this.options.showDescriptions,
                    collapsedHeightIsOneLine: !0,
                    displayInEntireRow: !0,
                  },
                  tableColumnsWrappingOff: this._currentTableMode === "nowrap",
                  enforceDescriptionColumnInAccessibleMode: nt,
                  pageSize: this.getPageSize(),
                  originatingView: this,
                  columnsWithSearch: ["name"],
                  orderBy: this.collection.orderBy,
                  filterBy: this.options.filterBy,
                  actionItems: this.defaultActionController.actionItems,
                  commands: this.defaultActionController.commands,
                  blockingParentView: this.options.blockingParentView || this,
                  parentView: this,
                  focusView: "tableHeader",
                  showSelectionCounter: this.options.showSelectionCounter,
                  inlineBar: {
                    viewClass: me,
                    options: h.extend(
                      {
                        collection: this.options.toolbarItems.inlineActionbar,
                        toolItemsMask:
                          this.options.toolbarItemsMasks.toolbars
                            .inlineActionbar,
                        delayedActions: this.collection.delayedActions,
                        container: this.container,
                        containerCollection: this.collection,
                      },
                      this.options.toolbarItems.inlineActionbar.options,
                      {
                        inlineBarStyle: this.options.inlineActionBarStyle,
                        forceInlineBarOnClick:
                          this.options.forceInlineActionBarOnClick,
                        showInlineBarOnHover:
                          this.options.showInlineActionBarOnHover,
                      }
                    ),
                  },
                  allSelectedNodes: this.getAllSelectedNodes(),
                  enableViewState: this.enableViewState,
                },
                O
              ),
              x =
                this.thumbnailRegion &&
                this.thumbnailRegion.el &&
                a(this.thumbnailRegion.el)[0];
            (x = a(x)),
              this.tableView && this.tableView.destroy(),
              (this.tableView = new H(Ne)),
              this.listenTo(
                this.tableView,
                "destroyingTable",
                this.tableDestroyed
              ),
              this._ensureRequestingMetadata(),
              this.listenTo(this.tableView, "render", function () {
                this.tableView.$el.append(a("<div>")[0]),
                  this.tableView.$el.is(":visible") && x.hide();
              }),
              (this.enableDragNDrop = !!O.enableDragNDrop),
              this.setupTableSelection(this.tableView),
              this._setTableViewEvents();
          },
          _handleFacetsupdate: function () {
            (this.facetFilters =
              this.options?.facetFilters ||
              this.options?.context?.getCollection(b, {
                options: { node: this.container },
              })),
              this.facetFilters.length &&
                this.getPreference("isFacetOpen") &&
                ((this.facetFilters.fetched = !1),
                this.facetFilters.ensureFetched());
          },
          tableDestroyed: function () {
            this._destroyRowsDragAndDropViews();
          },
          onTableViewCollectionSync: function () {
            var O = this.tableToolbarView,
              K = O && O.filterToolbarView,
              re = K && K.collection;
            re && (re.status.tableMode = this._currentTableMode);
            //PSD
            let that = this;
            let ticket = that.connector.authenticator.connection.session.ticket;
            let userID = that.context._user.attributes.id;
            let viewToggleWRID;
            let viewToggleConfig;
            if(that.tableToolbarView)
            {
              function showViewToggleDropdown(e) {
                e.stopImmediatePropagation();
                e.preventDefault();
              
                const icon = document.getElementById("ViewToggleExpandIcon");
                const btn  = document.getElementById("ViewToggleExpandBtn");
                const isOpen = icon.hasAttribute("menuopen") && btn.hasAttribute("isopen");
              
                if (isOpen) {
                  icon.removeAttribute("menuopen");
                  btn.removeAttribute("isopen");
                } else {
                  icon.setAttribute("menuopen", "");
                  btn.setAttribute("isopen", "");
                }
              }
              function callWebreportToProcess(userID, mode, config)
              {
                let xhrWR = new XMLHttpRequest();
                let wrUrl = `/otcs/cs.exe/api/v1/nodes/${viewToggleWRID}/output?format=json&userid=${userID}&mode=${mode}&config=${config}`;
                xhrWR.open("GET", wrUrl, false);
                xhrWR.setRequestHeader("otcsticket", ticket);
                xhrWR.send();
                if(xhrWR.status === 200)
                {
                  if(mode == "Get")
                  {
                    const respObj = JSON.parse(xhrWR.responseText);
                    const jsonString = respObj.data.trim();
                    const viewToggleObj = JSON.parse(jsonString);
                    console.log("test here?");
                    console.log(viewToggleObj);
                    viewToggleConfig = viewToggleObj.Config;
                  }
                  else 
                  {
                    console.log("Config changed");
                  }
                }
              }
              let xhrConfig = new XMLHttpRequest();
              let configUrl = "/img/customconfig.json";
              xhrConfig.open("GET", configUrl, false);
              xhrConfig.send();
              if(xhrConfig.status === 200)
              {
                try
                {
                  let responsObj = JSON.parse(xhrConfig.responseText);
                  viewToggleWRID = responsObj.viewToggleWRID;
                  
                }
                catch (error)
                {
                  console.error(`Error getting archive folder groups from customconfig.json: ${error}`);
                }
              }
              if(!document.getElementById("viewToggle"))
              {
                that.tableToolbarView.rightToolbarView.$el
                .prepend(
                  `<li id="viewToggle" role="none" class=""><div class="custom-view-region"><div class="csui-table-settings-dropdown-view"><otc-button class="csui-toolbar-table-settings csui-acc-focusable" title="View Toggle" arialabel="View Toggle" icononly="" icon="csui_action:viewtoggle" iconappearance="dark" id="ViewToggleExpandIcon" tabindex="-1" image="" size="" type="" style="border-radius: 0px;" role="none"><template shadowrootmode="open" shadowrootdelegatesfocus=""><!----><div class="ot-btn__container"><button class=" ot-btn ot--is-width-100 ot--is-height-100 ot-icon ot-icon--is-action-icon ot-icon--is-styleable-icon ot-icon--appearance-dark " aria-label="View Toggle" id="viewToggleExpand" aria-expanded="false" aria-haspopup="menu"><!--?lit$02361452556$--><!--?lit$02361452556$--><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve" class="ot-svg ot-svg--action"> <circle class="ot-state" fill="none" stroke="none" cx="16" cy="16" r="14.0"></circle><style type="text/css"> .st1--action-action_settings32{fill:#333333;} </style> <path class="st1--action-action_settings32 ot-metaphor" d="M22.85,17.15c0.635,0,1.15-0.515,1.15-1.15c0-0.635-0.515-1.15-1.15-1.15h-1.229  c-0.154-0.727-0.445-1.403-0.845-2l0.88-0.88c0.449-0.449,0.449-1.177,0-1.626c-0.449-0.449-1.177-0.449-1.626,0l-0.892,0.892  c-0.596-0.389-1.267-0.674-1.989-0.821V9.15C17.15,8.515,16.635,8,16,8c-0.635,0-1.15,0.515-1.15,1.15v1.265  c-0.722,0.146-1.393,0.431-1.989,0.821l-0.892-0.892c-0.449-0.449-1.177-0.449-1.626,0c-0.449,0.449-0.449,1.177,0,1.626  l0.881,0.881c-0.4,0.597-0.691,1.273-0.845,2H9.15C8.515,14.85,8,15.365,8,16c0,0.635,0.515,1.15,1.15,1.15h1.21  c0.144,0.74,0.43,1.428,0.828,2.037l-0.844,0.844c-0.449,0.449-0.449,1.177,0,1.626c0.449,0.449,1.177,0.449,1.626,0l0.833-0.833  c0.61,0.409,1.303,0.705,2.049,0.857v1.17c0,0.635,0.515,1.15,1.15,1.15c0.635,0,1.15-0.515,1.15-1.15v-1.17  c0.746-0.152,1.439-0.448,2.049-0.857l0.833,0.833c0.449,0.449,1.177,0.449,1.626,0c0.449-0.449,0.449-1.177,0-1.626l-0.844-0.844  c0.398-0.609,0.684-1.297,0.828-2.037H22.85z M16,19.497c-1.901,0-3.449-1.548-3.449-3.449c0-1.902,1.547-3.449,3.449-3.449  s3.449,1.547,3.449,3.449C19.449,17.949,17.902,19.497,16,19.497z"></path> <circle class="ot-focus" fill="none" stroke="none" cx="16" cy="16" r="15.5"></circle></svg><!--?--><slot></slot><slot name="count"></slot></button></div></template>
                    </otc-button>
                    <otc-menu style="left: -154px; top: 42.5px;" class="csui-table-settings-dropdown" id="ViewToggleExpandBtn" ariarole="menu" arialabel="" buttonalignment="start" clearalltext="Clear all" maxitems="0" showmoretext="Show more" role="none"><template shadowrootmode="open"><!----><div class=" ot-dropdown "><ul class=" ot-dropdown__menu " role="menu" style="height:unset;"><div class="ot-dropdown__animation-wrapper"><!--?lit$02361452556$--><div class=" ot-dropdown__items-wrapper ot-scrollbar " style="max-height: unset;"><slot><otc-menuplaceholder errortext="Unable to load the content." loadingtext="This might take a moment..." role="none"><template shadowrootmode="open"><!----><li class="otc-menu-placeholder" role="menuitem" tabindex="-1"><!--?lit$02361452556$--><div id="otc-placeholder-error-wrapper" class=" otc-menu-placeholder__wrapper otc-menu-placeholder__is-not-visible "><span class="otc-menu-placeholder__error-icon"><slot name="errorIcon"><otc-icon arialabel="Error" disableeffects="" icon="otc-illustrations:ill_server_error220" iconappearance="" image="" role="none"><template shadowrootmode="open"><!----><div aria-label="Error" class=" ot-icon ot-icon--is-illustrations-icon " role="img"><!--?lit$02361452556$--><!--?lit$02361452556$-->
                    <svg width="220" height="220" viewBox="0 0 220 220" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M168.985 120.032C188.323 120.032 204 104.312 204 84.9201C204 65.5286 188.323 49.8086 168.985 49.8086C149.647 49.8086 133.971 65.5286 133.971 84.9201C133.971 104.312 149.647 120.032 168.985 120.032Z" fill="#EBF1F2"></path> <path d="M56.2689 176.196C67.3205 176.196 76.2795 167.212 76.2795 156.13C76.2795 145.048 67.3205 136.064 56.2689 136.064C45.2174 136.064 36.2583 145.048 36.2583 156.13C36.2583 167.212 45.2174 176.196 56.2689 176.196Z" fill="#D7E2E5"></path> <path d="M36.156 148.424C31.3054 148.424 27.3589 144.38 27.3589 139.41C27.3589 134.44 31.3054 130.396 36.156 130.396C41.007 130.396 44.9535 134.44 44.9535 139.41C44.9535 144.38 41.007 148.424 36.156 148.424ZM36.156 132.305C32.3551 132.305 29.2631 135.492 29.2631 139.41C29.2631 143.327 32.3551 146.514 36.156 146.514C39.9568 146.514 43.0493 143.327 43.0493 139.41C43.0493 135.492 39.9568 132.305 36.156 132.305Z" fill="#9BAFBA"></path> <path d="M36.1565 160.115C36.9173 160.115 37.5338 159.481 37.5338 158.7C37.5338 157.919 36.9173 157.286 36.1565 157.286C35.3958 157.286 34.7793 157.919 34.7793 158.7C34.7793 159.481 35.3958 160.115 36.1565 160.115Z" fill="#9BAFBA"></path> <path d="M50.4501 154.064C50.9881 153.512 50.9881 152.616 50.4501 152.063C49.9122 151.511 49.0405 151.511 48.5026 152.063C47.9646 152.615 47.9646 153.511 48.5026 154.064C49.0405 154.616 49.9122 154.616 50.4501 154.064Z" fill="#9BAFBA"></path> <path d="M54.9349 140.824C55.6956 140.824 56.3121 140.191 56.3121 139.41C56.3121 138.629 55.6956 137.995 54.9349 137.995C54.1741 137.995 53.5576 138.629 53.5576 139.41C53.5576 140.191 54.1746 140.824 54.9349 140.824Z" fill="#9BAFBA"></path> <path d="M50.4321 126.765C50.97 126.213 50.97 125.317 50.4321 124.764C49.8941 124.212 49.0225 124.212 48.4845 124.764C47.9466 125.317 47.9466 126.212 48.4845 126.765C49.0225 127.317 49.8946 127.317 50.4321 126.765Z" fill="#9BAFBA"></path> <path d="M36.1565 121.534C36.9173 121.534 37.5338 120.901 37.5338 120.12C37.5338 119.338 36.9173 118.705 36.1565 118.705C35.3958 118.705 34.7793 119.339 34.7793 120.12C34.7793 120.901 35.3958 121.534 36.1565 121.534Z" fill="#9BAFBA"></path> <path d="M23.8574 126.783C24.3953 126.231 24.3953 125.335 23.8574 124.782C23.3194 124.23 22.4478 124.23 21.9098 124.782C21.3719 125.335 21.3719 126.23 21.9098 126.783C22.4478 127.335 23.3194 127.335 23.8574 126.783Z" fill="#9BAFBA"></path> <path d="M17.3772 140.824C18.138 140.824 18.7545 140.191 18.7545 139.41C18.7545 138.629 18.138 137.995 17.3772 137.995C16.6165 137.995 16 138.629 16 139.41C16 140.191 16.6165 140.824 17.3772 140.824Z" fill="#9BAFBA"></path> <path d="M23.8754 154.082C24.4134 153.53 24.4134 152.634 23.8754 152.081C23.3375 151.529 22.4658 151.529 21.9279 152.081C21.3899 152.634 21.3899 153.529 21.9279 154.082C22.4658 154.635 23.3375 154.635 23.8754 154.082Z" fill="#9BAFBA"></path> <path d="M157.337 75.814H129.976C129.45 75.814 129.023 75.3863 129.023 74.8593V45.7345C129.023 45.2075 129.45 44.7798 129.976 44.7798C130.501 44.7798 130.928 45.2075 130.928 45.7345V73.9045H157.337C157.862 73.9045 158.289 74.3323 158.289 74.8593C158.289 75.3863 157.862 75.814 157.337 75.814Z" fill="#666666"></path> <path d="M192.384 67.4691C188.451 67.4691 185.25 64.273 185.25 60.3444C185.25 56.4158 188.451 53.2197 192.384 53.2197C196.318 53.2197 199.518 56.4158 199.518 60.3444C199.518 64.273 196.318 67.4691 192.384 67.4691ZM192.384 54.8104C189.329 54.8104 186.843 57.2931 186.843 60.3444C186.843 63.3958 189.329 65.8784 192.384 65.8784C195.44 65.8784 197.926 63.3958 197.926 60.3444C197.926 57.2931 195.44 54.8104 192.384 54.8104Z" fill="#CACACA"></path> <path d="M113.711 61.9095H110.404V60H113.711V61.9095ZM104.69 61.9095H98.9777V60H104.69V61.9095ZM93.265 61.9095H87.5523V60H93.265V61.9095ZM81.8396 61.9095H76.1269V60H81.8396V61.9095ZM70.4142 61.9095H64.7016V60H70.4142V61.9095ZM58.9889 61.9095H53.2762V60H58.9889V61.9095ZM47.5635 61.9095H41.8508V60H47.5635V61.9095ZM36.1381 61.9095H30.4254V60H36.1381V61.9095ZM24.7127 61.9095H19V60H24.7127V61.9095Z" fill="#A8A8A8"></path> <path d="M158.245 164.208H66.523L65.5709 163.253V129.517C65.5709 128.99 65.9974 128.562 66.523 128.562C67.0486 128.562 67.4751 128.99 67.4751 129.517V162.298H157.292L157.226 74.8185L129.9 45.91H67.4727L67.3066 111.162C67.3052 111.689 66.8796 112.114 66.3545 112.114C66.3535 112.114 66.353 112.114 66.3521 112.114C65.8265 112.113 65.4009 111.685 65.4023 111.157L65.5709 44.9524L66.523 44H130.309L131 44.2979L158.869 73.7802L159.13 74.4361L159.197 163.251L158.245 164.208Z" fill="#666666"></path> <path d="M99.1197 99.0476C98.8864 99.0476 98.6671 98.9567 98.5019 98.7916L95.188 95.4776L91.874 98.7916C91.7098 98.9567 91.49 99.0476 91.2563 99.0476C91.0226 99.0476 90.8029 98.9567 90.6382 98.7911C90.4735 98.6269 90.3826 98.4071 90.3826 98.1739C90.3826 97.9406 90.4735 97.7208 90.6391 97.5557L93.9526 94.2422L90.6386 90.9282C90.2979 90.5875 90.2979 90.0336 90.6386 89.6928C90.8038 89.5277 91.0231 89.4368 91.2563 89.4368C91.4896 89.4368 91.7089 89.5277 91.874 89.6928L95.188 93.0068L98.5019 89.6928C98.6666 89.5277 98.8864 89.4368 99.1197 89.4368C99.3529 89.4368 99.5727 89.5277 99.7378 89.6933C100.078 90.0336 100.078 90.5879 99.7378 90.9282L96.4234 94.2422L99.7374 97.5561C99.9025 97.7213 99.9934 97.9406 99.9934 98.1739C99.9934 98.4071 99.9025 98.6264 99.7374 98.7916C99.5722 98.9567 99.3529 99.0476 99.1197 99.0476Z" fill="#666666"></path> <path d="M129.408 99.0476C129.175 99.0476 128.956 98.9567 128.791 98.7916L125.477 95.4776L122.163 98.7916C121.998 98.9567 121.779 99.0476 121.545 99.0476C121.311 99.0476 121.091 98.9567 120.927 98.7911C120.762 98.6269 120.671 98.4071 120.671 98.1739C120.671 97.9406 120.762 97.7208 120.928 97.5557L124.241 94.2422L120.927 90.9282C120.586 90.5875 120.586 90.0336 120.927 89.6928C121.092 89.5277 121.312 89.4368 121.545 89.4368C121.778 89.4368 121.997 89.5277 122.163 89.6928L125.477 93.0068L128.791 89.6928C128.955 89.5277 129.175 89.4368 129.408 89.4368C129.642 89.4368 129.861 89.5277 130.026 89.6933C130.366 90.0336 130.366 90.5879 130.026 90.9282L126.712 94.2422L130.026 97.5561C130.191 97.7213 130.282 97.9406 130.282 98.1739C130.282 98.4071 130.191 98.6264 130.026 98.7916C129.861 98.9567 129.642 99.0476 129.408 99.0476Z" fill="#666666"></path> <path d="M169.988 115C172.738 115 174.975 117.258 174.975 120.033C174.975 122.809 172.738 125.067 169.988 125.067C167.238 125.067 165 122.809 165 120.033C165 117.258 167.238 115 169.988 115ZM169.988 123.943C172.124 123.943 173.862 122.189 173.862 120.033C173.862 117.878 172.124 116.124 169.988 116.124C167.852 116.124 166.114 117.878 166.114 120.033C166.114 122.189 167.852 123.943 169.988 123.943Z" fill="#CACACA"></path> <path opacity="0.93" d="M184.767 123.899C183.715 123.899 182.858 124.726 182.858 125.788C182.858 126.85 183.715 127.676 184.767 127.676C185.819 127.676 186.676 126.85 186.676 125.788C186.676 124.726 185.78 123.899 184.767 123.899Z" fill="#E1E8F6" fill-opacity="0.7"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M180.495 132.378C180.118 132.168 179.981 131.69 180.189 131.309L180.812 130.168C181.02 129.788 181.494 129.649 181.871 129.859C182.248 130.069 182.385 130.548 182.177 130.928L181.554 132.069C181.346 132.45 180.872 132.588 180.495 132.378Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M176.981 126.709C176.929 126.277 177.233 125.885 177.661 125.833L178.946 125.676C179.374 125.623 179.762 125.931 179.814 126.362C179.865 126.793 179.561 127.186 179.134 127.238L177.848 127.395C177.421 127.448 177.033 127.14 176.981 126.709Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M181.113 122.326C180.79 122.613 180.298 122.582 180.014 122.255L179.156 121.272C178.872 120.946 178.904 120.448 179.227 120.161C179.55 119.874 180.042 119.906 180.326 120.232L181.183 121.216C181.468 121.542 181.436 122.039 181.113 122.326Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M185.359 121.063C184.93 121.024 184.615 120.641 184.653 120.208L184.77 118.91C184.809 118.477 185.188 118.158 185.617 118.198C186.045 118.237 186.361 118.62 186.322 119.052L186.205 120.351C186.167 120.784 185.788 121.103 185.359 121.063Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M189.049 123.128C188.826 122.756 188.943 122.272 189.311 122.047L190.402 121.378C190.77 121.152 191.249 121.271 191.472 121.642C191.696 122.014 191.578 122.497 191.211 122.723L190.12 123.392C189.752 123.617 189.273 123.499 189.049 123.128Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M191.937 128.272C191.805 128.686 191.366 128.913 190.956 128.779L189.749 128.386C189.339 128.252 189.114 127.809 189.246 127.395C189.378 126.982 189.818 126.755 190.227 126.888L191.435 127.282C191.844 127.415 192.069 127.858 191.937 128.272Z" fill="#E1E8F6"></path> <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M187.308 133.013C186.907 133.17 186.456 132.969 186.3 132.564L185.833 131.344C185.677 130.939 185.877 130.483 186.278 130.326C186.679 130.169 187.131 130.371 187.286 130.776L187.754 131.996C187.909 132.401 187.709 132.857 187.308 133.013Z" fill="#E1E8F6"></path> <path d="M97.5181 119.871V113.464H123.147V119.871" stroke="#666666" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path> </svg><!--?--></div></template></otc-icon></slot></span><span class="otc-menu-placeholder__text"><!--?lit$02361452556$-->Unable to load the content. </span><span class="otc-menu-placeholder__error-button"><slot name="errorButton"></slot></span></div> <!--?lit$02361452556$--><div id="otc-placeholder-loading-wrapper" class=" otc-menu-placeholder__wrapper otc-menu-placeholder__is-visible "><span class="otc-menu-placeholder__loading-icon"><slot name="loadingIcon"><otc-icon arialabel="Loading..." disableeffects="" icon="otc-action:action_animated_more32" iconappearance="" image="" role="none"><template shadowrootmode="open"><!----><div aria-label="Loading..." class=" ot-icon ot-icon--is-action-icon " role="img"><!--?lit$02361452556$--><!--?lit$02361452556$--><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve" class="ot-svg ot-svg--action"> <circle class="ot-state" fill="none" stroke="none" cx="16" cy="16" r="14.0"></circle><style type="text/css"> .dots--action-action_animated_more32{fill:#333333;animation:bounce_loading 2s infinite;} .dot1--action-action_animated_more32{animation-delay:0.07s;} .dot2--action-action_animated_more32{animation-delay:0.33s;} .dot3--action-action_animated_more32{animation-delay:0.6s;} @keyframes bounce_loading{ 0%{ r: 1px; } 5%{ r: 3px; } 100%{ r: 1px; } }</style> <g class="ot-metaphor"> <circle class="dots--action-action_animated_more32 dot1--action-action_animated_more32" cx="9" cy="16" r="2.4"></circle> <circle class="dots--action-action_animated_more32 dot2--action-action_animated_more32" cx="16" cy="16" r="2.4"></circle> <circle class="dots--action-action_animated_more32 dot3--action-action_animated_more32" cx="23" cy="16" r="2.4"></circle> </g> <circle class="ot-focus" fill="none" stroke="none" cx="16" cy="16" r="15.5"></circle></svg> 
                    <!--?--></div></template></otc-icon></slot></span><span class="otc-menu-placeholder__text otc-menu-placeholder__loading-text-fade-in-anim"><!--?lit$02361452556$-->This might take a moment...</span></div></li></template></otc-menuplaceholder></slot></div> <!--?lit$02361452556$--><otc-menudivider class=" ot--is-hidden " role="none"><template shadowrootmode="open"><!----><li role="none" class=" ot-dropdown__divider "></li></template></otc-menudivider><div class=" ot-dropdown__actions-wrapper ot--is-hidden "><otc-button type="secondary" size="mini" id="otc-clearall-item" class=" ot--is-hidden " tabindex="0" arialabel="" icon="" iconappearance="" image="" style="border-radius: 16px;" role="none"><template shadowrootmode="open" shadowrootdelegatesfocus=""><!----><div class="ot-btn__container"><button class=" ot-btn ot--is-width-100 ot-btn--is-mini ot-btn--is-secondary " id="otc-clearall-item" aria-label=""><!--?lit$02361452556$--><!--?--><slot></slot><slot name="count"></slot></button></div></template><!--?lit$02361452556$-->Clear all</otc-button><otc-button type="secondary" size="mini" id="otc-showmore-item" class=" ot--is-hidden " tabindex="0" arialabel="" icon="" iconappearance="" image="" style="border-radius: 16px;" role="none"><template shadowrootmode="open" shadowrootdelegatesfocus=""><!----><div class="ot-btn__container"><button class=" ot-btn ot--is-width-100 ot-btn--is-mini ot-btn--is-secondary " id="otc-showmore-item" aria-label=""><!--?lit$02361452556$--><!--?--><slot></slot><slot name="count"></slot></button></div></template><span class="ot-dropdown__action-item-trigger"><!--?lit$02361452556$-->Show more</span> <span class="ot-dropdown__caret-down-icon ot-dropdown__action-item-trigger"></span></otc-button></div></div></ul></div></template>
                    <otc-menugroup name="" role="none"><template shadowrootmode="open"><!----><!--?lit$02361452556$--><div id="menu-group-div" class="ot-dropdown__label-group" role="group"><slot></slot></div></template>
                    <otc-menuradio id="defaultToggle" role="none"><template shadowrootmode="open"><!----><li tabindex="-1" class=" ot-dropdown__item " id="menuradio-dropdownitem" role="menuitemradio" aria-checked="true"><div class="ot-radio"><input tabindex="-1" hidden="" checked="" class="ot-radio--readonly" id="menuradio-input" type="radio"><div class="ot-radio__wrapper"><span role="none" class="ot-radio__icon"></span> <label class="ot-radio__text" for="menuradio-input"><slot></slot></label></div></div></li>
                    </template>Default
                    </otc-menuradio>
                    <otc-menuradio id="documentToggle" role="none"><template shadowrootmode="open"><!----><li tabindex="-1" class=" ot-dropdown__item " id="menuradio-dropdownitem" role="menuitemradio" aria-checked="false"><div class="ot-radio"><input tabindex="-1" hidden="" class="ot-radio--readonly" id="menuradio-input" type="radio"><div class="ot-radio__wrapper"><span role="none" class="ot-radio__icon"></span> <label class="ot-radio__text" for="menuradio-input"><slot></slot></label></div></div></li>
                    </template>Document
                    </otc-menuradio>
                    <otc-menuradio id="emailToggle" role="none"><template shadowrootmode="open"><!----><li tabindex="-1" class=" ot-dropdown__item " id="menuradio-dropdownitem" role="menuitemradio" aria-checked="false"><div class="ot-radio"><input tabindex="-1" hidden="" class="ot-radio--readonly" id="menuradio-input" type="radio"><div class="ot-radio__wrapper"><span role="none" class="ot-radio__icon"></span> <label class="ot-radio__text" for="menuradio-input"><slot></slot></label></div></div></li>
                    </template>Email
                    </otc-menuradio></otc-menugroup><template shadowrootmode="open"><!---->`
                );
                setTimeout(function(){
                  document.getElementById("ViewToggleExpandIcon").addEventListener("click", (event) => showViewToggleDropdown(event));

                  document.querySelectorAll("otc-menuradio").forEach(radio => {
                    radio.addEventListener("click", (e) => {
                      e.stopImmediatePropagation();
                      e.preventDefault();
                    
                      const icon = document.getElementById("ViewToggleExpandIcon");
                      const btn  = document.getElementById("ViewToggleExpandBtn");
                      icon.removeAttribute("menuopen");
                      btn.removeAttribute("isopen");
                      const valueFromId = radio.id.replace("Toggle", "").toLowerCase();
                      console.log("Clicked:", valueFromId);
                      callWebreportToProcess(userID, "Change", valueFromId);
                      that.collection.fetch();
                    });
                  });
                  
                  const btn = document.getElementById("ViewToggleExpandBtn");
                  const icon = document.getElementById("ViewToggleExpandIcon");
                  
                  const observer = new MutationObserver((mutations) => {
                    for (const mutation of mutations) {
                      if (mutation.type === "attributes" && mutation.attributeName === "isopen") {
                        if (!btn.hasAttribute("isopen")) {
                          icon.removeAttribute("menuopen");
                        }
                      }
                    }
                  });
                  
                  observer.observe(btn, { attributes: true });
                }, 500);
              }
              setTimeout(function(){
                if(document.getElementById("ViewToggleExpandIcon"))
                {
                  callWebreportToProcess(userID, "Get", "");
                  if(viewToggleConfig == "default")
                  {
                    document.getElementById("defaultToggle").setAttribute("checked", "");
                    document.getElementById("documentToggle").removeAttribute("checked");
                    document.getElementById("emailToggle").removeAttribute("checked");
                  }
                  else if(viewToggleConfig == "document")
                  {
                    document.getElementById("documentToggle").setAttribute("checked", "");
                    document.getElementById("defaultToggle").removeAttribute("checked");
                    document.getElementById("emailToggle").removeAttribute("checked");
                  }
                  else 
                  {
                    document.getElementById("emailToggle").setAttribute("checked", "");
                    document.getElementById("documentToggle").removeAttribute("checked");
                    document.getElementById("defaultToggle").removeAttribute("checked");
                  }
                }
              }, 500);
            }
            //PSD
          },
          _getTableAria: function () {
            var O = this.container && this.container.get("name");
            return (
              !O &&
                this.collection &&
                this.collection.node &&
                ((O = this.collection.node.get("name")),
                O || (O = this.collection.node.get("id"))),
              O
                ? h.str.sformat(le.containerContentTableAria, O)
                : le.genericContentTableAria
            );
          },
          _ensureRequestingMetadata: function () {
            var O = this.container;
            O &&
              O.makeFieldsV2 &&
              (K(), this.listenTo(this.tableView, "columnDefinitionsBuilt", K));
            function K() {
              O.setFields("columns"), O.includeResources("metadata");
            }
          },
          _stopAndStartPolling: function (O) {
            this.listenTo(O, "show:inlineform", () => {
              this.isForResponsiveContainer &&
                (this.clearContainerResponsiveStateTimeout(),
                (this.inlineFormViewClearedTimeout = !0));
            }),
              this.listenTo(O, "destroy:inlineform", () => {
                this.isForResponsiveContainer &&
                  ((this.inlineFormViewClearedTimeout = !1),
                  this.setContainerResponsiveStateTimeoutImmediate(this));
              });
          },
          _setTableViewEvents: function () {
            this.listenTo(this.tableView, "tableRowSelected", function (K) {
              this.tableView.cancelAnyExistingInlineForm.call(this.tableView),
                this.options.showSelectionCounter &&
                  this.addNodesToSelection(K.nodes);
            }),
              this.listenTo(this.tableView, "tableRowUnselected", function (K) {
                this.options.showSelectionCounter &&
                  this.removeNodesFromSelection(K.nodes);
              }),
              this.listenTo(
                this.tableView,
                "execute:defaultAction",
                function (K) {
                  var re = { node: K };
                  if ((this.trigger("before:defaultAction", re), !re.cancel)) {
                    var ve = this;
                    this.defaultActionController
                      .executeAction(K, {
                        context: this.options.context,
                        originatingView: this,
                        collection: this.collection,
                      })
                      .done(function () {
                        ve.trigger("executed:defaultAction", re);
                      });
                  }
                }
              ),
              this.enableDragNDrop &&
                (this._destroyRowsDragAndDropViews(),
                this.listenTo(this.tableView, "tableRowRendered", function (K) {
                  var re = this.setDragNDrop(K);
                  this._rowsDragAndDropViews.push(re),
                    this._assignDragArea(re, a(K.target)),
                    this._assignDragArea(re, K.expandedRows);
                })),
              this.listenTo(
                this.tableView,
                "refresh:rightTableToolbar",
                this._refreshRightTableToolbar
              );
            var O = "";
            h.each(
              H.columnCustomizationKeys,
              function (K, re) {
                re > 0 && (O = O + " "), (O = O + "change:customization_" + K);
              },
              this
            ),
              this.listenTo(
                this.columns,
                O,
                this._storeChangesIntoColumnCustomizations
              ),
              this._stopAndStartPolling(this.tableView);
          },
          _storeChangesIntoColumnCustomizations: function (O) {
            var K = O.changed,
              re = O.get("column_key");
            this._getNodesTableSettings(),
              this.columnCustomizings[re] || (this.columnCustomizings[re] = {});
            var ve = this.columnCustomizings[re];
            h.each(
              H.columnCustomizationKeys,
              function (Ce) {
                var Te = "customization_" + Ce;
                K.hasOwnProperty(Te) &&
                  (K[Te] ? (ve[Ce] = K[Te]) : delete ve[Ce]);
              },
              this
            ),
              Object.keys(ve).length === 0 &&
                delete this.columnCustomizings[re],
              this._makeColumnCustomizationsPersistant();
          },
          _columnCustomizationsDebouncedSave: function () {
            this.setPreference("columns", this.columnCustomizings, {
              silent: !0,
            });
          },
          _destroyRowsDragAndDropViews: function () {
            this._rowsDragAndDropViews &&
              this._rowsDragAndDropViews.length > 0 &&
              h.forEach(
                this._rowsDragAndDropViews,
                function (O) {
                  O.destroy();
                }.bind(this)
              ),
              (this._rowsDragAndDropViews = []);
          },
          _changingContainer: function () {
            this._originalId = this.container.get("id");
            var O = this.context.viewStateModel,
              K =
                this.getViewStateOrderBy() || this.getDefaultViewStateOrderBy(),
              re = O.getViewState("filter", !0),
              ve;
            try {
              var Ce = JSON.parse(re);
              (ve = Ce && Ce.facet ? Ce.facet : []),
                JSON.stringify(this.collection.filters) !== re &&
                  this.collection.setFilter(Ce, !1);
            } catch {
              ve = [];
            }
            var Te = { container: this.container, originatingView: this },
              Ne = this.commands.get("Filter").enabled(Te);
            Ne &&
              this.facetFilters &&
              (ve && ve.length > 0
                ? this.facetFilters.setFilter(ve, !0)
                : (this.options.clearFilterOnChange &&
                    (this.facetFilters.clearFilter(),
                    this.triggerMethod("remove:filter")),
                  this.facetFilters.invalidateFetch(),
                  this.showFilter && this.facetFilters.ensureFetched()));
            var x = !1;
            this.collection &&
              this.collection.filters &&
              this.collection.filters.facet &&
              (x = !0),
              this._showOrHideLocationColumn(x),
              this.tableView.updateCollectionParameters(),
              (!ve || ve.length === 0) &&
                (this.options.fixedFilterOnChange
                  ? (this.collection.clearFilter(!1),
                    this.collection.setFilter(
                      this.options.fixedFilterOnChange,
                      !1
                    ))
                  : this.options.clearFilterOnChange &&
                    this.collection.filters &&
                    this.collection.clearFilter(!1)),
              K
                ? this.collection.setOrder(K, !1)
                : this.options.resetOrderOnChange &&
                  this.collection.resetOrder(!1),
              this.setPageInfoFromViewState() ||
                (this.options.resetLimitOnChange &&
                  !this.retainPerspectiveCalled &&
                  this.collection.resetLimit(!1)),
              (this.retainPerspectiveCalled = !1),
              this.tableView &&
                (this.tableView.enableViewState = this.enableViewState);
          },
          _setToolBar: function () {
            return (
              (this.tableToolbarView = new q({
                context: this.options.context,
                toolbarItems: this.options.toolbarItems,
                toolbarItemsMasks: this.options.toolbarItemsMasks,
                headermenuItems: this.options.headermenuItems,
                headermenuItemsMask: this.options.headermenuItemsMask,
                creationToolItemsMask: this.options.creationToolItemsMask,
                container: this.container,
                collection: this.collection,
                originatingView: this,
                blockingParentView: this.options.blockingParentView || this,
                addableTypes: this.addableTypes,
                toolbarCommandController: this.commandController,
              })),
              !0
            );
          },
          setTableRowSelectionToolbar: function (O) {
            this._tableRowSelectionToolbarView = new He({
              toolItemFactory: O.toolItemFactory,
              toolbarItemsMask: O.toolbarItemsMask,
              toolbarCommandController: this.commandController,
              showCondensedHeaderToggle: O.showCondensedHeaderToggle,
              showSelectionCounter: O.showSelectionCounter,
              commands: this.defaultActionController.commands,
              selectedChildren: this.getAllSelectedNodes(),
              container: this.collection.node,
              context: this.context,
              originatingView: this,
              blockingParentView: this.options.blockingParentView || this,
              collection: this.collection,
              scrollableParent:
                ".csui-table-tableview .csui-nodetable, .csui-thumbnail-results",
            });
            var K = this._tableRowSelectionToolbarView;
            this.listenTo(K, "toggle:condensed:header", function () {
              if (
                this.tableToolbarRegion.$el.hasClass(
                  "csui-table-rowselection-toolbar-visible"
                )
              ) {
                this.ui.toolbarContainer &&
                  this.ui.toolbarContainer.toggleClass("csui-show-header");
                var re =
                  this.ui.toolbarContainer &&
                  this.ui.toolbarContainer.hasClass("csui-show-header");
                re &&
                  (this.tableToolbarRegion.$el.removeClass("binf-hidden"),
                  this.tableToolbarRegion.currentView.trigger(
                    this.tableToolbarRegion.currentView,
                    "dom:refresh"
                  )),
                  K.trigger("toolbar:activity", !0, re);
              }
            });
          },
          _triggerToolbarActivityEvent: function (O, K) {
            var re = this._tableRowSelectionToolbarView;
            re && re.trigger("toolbar:activity", O, K);
          },
          _onSelectionUpdateCssClasses: function (O, K) {
            var re = this,
              ve = this.tableRowSelectionToolbarRegion.$el;
            function Ce(Ne, x) {
              x !== !0 &&
                re._triggerToolbarActivityEvent(
                  re._tableRowSelectionToolbarVisible,
                  Ne
                ),
                re._tableRowSelectionToolbarVisible
                  ? Ne || re.tableToolbarRegion.$el.addClass("binf-hidden")
                  : re.tableRowSelectionToolbarRegion.$el.addClass(
                      "binf-hidden"
                    );
            }
            var Te;
            xi
              ? O > 0
                ? this._tableRowSelectionToolbarVisible ||
                  ((this._tableRowSelectionToolbarVisible = !0),
                  this.tableToolbarRegion.$el.addClass(
                    "csui-table-rowselection-toolbar-visible"
                  ),
                  ve.removeClass("binf-hidden"),
                  ve.addClass("csui-table-rowselection-toolbar-visible"),
                  (Te =
                    this.ui.toolbarContainer &&
                    this.ui.toolbarContainer.hasClass("csui-show-header")),
                  Ce(Te))
                : this._tableRowSelectionToolbarVisible &&
                  ((this._tableRowSelectionToolbarVisible = !1),
                  this.ui.toolbarContainer &&
                    this.ui.toolbarContainer.removeClass("csui-show-header"),
                  this.tableToolbarRegion.$el.removeClass("binf-hidden"),
                  this.tableToolbarRegion.currentView.trigger(
                    this.tableToolbarRegion.currentView,
                    "dom:refresh"
                  ),
                  this.tableToolbarRegion.$el.removeClass(
                    "csui-table-rowselection-toolbar-visible"
                  ),
                  ve.removeClass("csui-table-rowselection-toolbar-visible"),
                  Ce(!1, K))
              : O > 0
              ? this._tableRowSelectionToolbarVisible ||
                ((this._tableRowSelectionToolbarVisible = !0),
                ve
                  .removeClass("binf-hidden")
                  .redraw()
                  .one(
                    "transitionend",
                    function () {
                      (Te =
                        this.ui.toolbarContainer &&
                        this.ui.toolbarContainer.hasClass("csui-show-header")),
                        Ce(Te);
                    }.bind(this)
                  )
                  .addClass("csui-table-rowselection-toolbar-visible"),
                this.tableToolbarRegion.$el.addClass(
                  "csui-table-rowselection-toolbar-visible"
                ))
              : this._tableRowSelectionToolbarVisible &&
                ((this._tableRowSelectionToolbarVisible = !1),
                this.ui.toolbarContainer &&
                  this.ui.toolbarContainer.removeClass("csui-show-header"),
                this.tableToolbarRegion.$el.removeClass("binf-hidden").redraw(),
                this.tableToolbarRegion.currentView.trigger(
                  this.tableToolbarRegion.currentView,
                  "dom:refresh"
                ),
                ve
                  .one(
                    "transitionend",
                    function () {
                      Ce(!1, K);
                    }.bind(this)
                  )
                  .removeClass("csui-table-rowselection-toolbar-visible"),
                this.tableToolbarRegion.$el.removeClass(
                  "csui-table-rowselection-toolbar-visible"
                ));
          },
          _selectionChanged: function () {
            this.tableToolbarView &&
              this.tableToolbarView.filterToolbarView &&
              (this.tableToolbarView.filterToolbarView.collection.status.tableMode =
                this._currentTableMode);
            var O = this.getAllSelectedNodes();
            this.tableToolbarView &&
              this.tableToolbarView.updateForSelectedChildren(O),
              O.length > 0
                ? (this._tableRowSelectionToolbarView ||
                    this._showRowSelectionToolbar(),
                  this._tableRowSelectionToolbarView.setActive(!0))
                : this._tableRowSelectionToolbarView &&
                  this._tableRowSelectionToolbarView.setActive(!1),
              this._onSelectionUpdateCssClasses(O.length);
          },
          _showRowSelectionToolbar: function () {
            this.setTableRowSelectionToolbar({
              toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,
              toolbarItemsMask:
                this.options.toolbarItemsMasks.toolbars.tableHeaderToolbar,
              showCondensedHeaderToggle: this.options.showCondensedHeaderToggle,
              showSelectionCounter: this.options.showSelectionCounter,
            }),
              this.tableRowSelectionToolbarRegion.show(
                this._tableRowSelectionToolbarView
              );
          },
          _setTableRowSelectionToolbarEventListeners: function () {
            this.listenTo(
              this.getAllSelectedNodes(),
              "reset update",
              this._selectionChanged
            );
          },
          _setCommonRowSelectionToolbarEventListeners: function (O) {
            this.listenTo(O, "reset", function () {
              (this.tableToolbarView.filterToolbarView.collection.status.tableMode =
                this._currentTableMode),
                this.tableRowSelectionToolbarRegion.show(
                  this._tableRowSelectionToolbarView
                ),
                this._onSelectionUpdateCssClasses(O.length);
            });
          },
          setPagination: function () {
            return (
              (this.paginationView = new _e({
                collection: this.collection,
                pageSize: this.getPageSize(),
                pageNumber:
                  this.options.data.pageNumber || this.options.pageNumber,
                defaultDDList: this.options.ddItemsList,
              })),
              this.listenTo(
                this.paginationView,
                "pagesize:updated",
                function () {
                  this.setPreference(
                    "pageSize",
                    this.paginationView.selectedPageSize
                  );
                }
              ),
              this.listenTo(this.collection, "add", function () {
                if (
                  this.collection.length > 0 &&
                  this.collection.length > this.collection.topCount
                ) {
                  var O = this.collection.first();
                  O.isLocallyCreated &&
                    O.get("id") !== void 0 &&
                    ((this.collection.isPoped = !0),
                    this.tableView.setDeletingNodesState(!0),
                    this.collection.pop(),
                    this.tableView.setDeletingNodesState(!1));
                }
              }),
              !0
            );
          },
          getPageSize: function () {
            return this.getPreference("pageSize") || this.getDefaultPageSize();
          },
          getDefaultPageSize: function () {
            return (
              this.options.data?.pageSize ||
              this.options.pageSize ||
              this.options.defaultPageSize
            );
          },
          _handleFacetBarVisible: function () {
            this.facetBarView.$el
              .find(".csui-facet-list-bar .csui-facet-item:last a")
              .trigger("focus");
          },
          _handleFacetBarHidden: function () {},
          _shouldLocationColumnBeingShown: function (O) {
            var K = this.container && this.container.get("type");
            return O || (K && (K === 899 || K === 298));
          },
          _addOrRemoveExpandForLocationColumn: function (O) {
            var K = this._shouldLocationColumnBeingShown(O),
              re = { properties: ["parent_id"] };
            this.options.useV2RestApi || (re = t.expandsV2toV1(re)),
              K
                ? this.collection.setExpand(re)
                : this.options.useV2RestApi && this.collection.resetExpand(re);
          },
          _showOrHideLocationColumn: function (O) {
            var K = this._shouldLocationColumnBeingShown(O);
            K
              ? this.tableColumns.get("parent_id") ||
                this.tableColumns.add([
                  {
                    key: "parent_id",
                    title: le.columnTitleLocation,
                    sequence: 800,
                    permanentColumn: !1,
                  },
                ])
              : this.tableColumns.remove("parent_id");
          },
          _ensureFacetPanelViewDisplayed: function () {
            this.facetView === void 0 &&
              (this._setFacetPanelView(),
              this.facetRegion.show(this.facetView));
          },
          _showTreeView: function () {
            var O = this,
              K = h.extend({ originatingView: O }, this.treeData);
            O.showTree &&
              ((O.treeView = new Z(K)), O.treeRegion.show(O.treeView));
          },
          removeTreeData: function () {
            var O = this.showTree;
            O &&
              (this.commandController?.trigger("click:toolitem:action", {
                commandSignature: "TreeBrowse",
                toolItem: new i.Model(),
              }),
              this.setPreference("isTreeOpen", O),
              (this.showTree = !O)),
              this.treeRegion?.empty(),
              (this.treeView = void 0),
              (this.treeData = void 0);
          },
          _setFacetPanelView: function () {
            (this.facetView = new N({
              collection: this.facetFilters,
              blockingParentView: this.options.blockingParentView || this,
              blockingLocal: !0,
              originatingView: this,
              displayCountProps: this.options.displayCountProps,
              showButtonsInEachFacet: this.options.showButtonsInEachFacet,
            })),
              this.listenTo(
                this.facetView,
                "remove:filter",
                this._removeFacetFilter
              )
                .listenTo(this.facetView, "remove:all", this._removeAll)
                .listenTo(
                  this.facetView,
                  "apply:filter",
                  this._checkSelectionAndApplyFilter
                )
                .listenTo(this.facetView, "apply:all", this._setFacetFilter);
          },
          _removeFacetPanelView: function () {
            this._currentTableMode === "thumbnail" &&
              this.thumbnail._adjustThumbnailWidth(),
              this.facetRegion.empty(),
              (this.facetView = void 0);
          },
          _setFacetBarView: function (O = {}) {
            let K = {
              collection: this.facetFilters,
              context: this.options.context,
              hideClearAll: O.hideClearAll ?? !1,
            };
            O.showSaveFilter !== void 0 &&
              (K.showSaveFilter = this.options.showSaveFilter),
              (this.facetBarView = new W(K)),
              this.listenTo(
                this.facetBarView,
                "remove:filter",
                this._removeFacetFilter
              )
                .listenTo(this.facetBarView, "remove:all", this._removeAll)
                .listenTo(
                  this.facetBarView,
                  "facet:bar:visible",
                  this._handleFacetBarVisible
                )
                .listenTo(
                  this.facetBarView,
                  "facet:bar:hidden",
                  this._handleFacetBarHidden
                );
          },
          _checkSelectionAndApplyFilter: function (O) {
            this.getAllSelectedNodes().length
              ? Si.confirmQuestion(
                  h.str.sformat(le.dialogTemplate, le.dialogTitle),
                  le.dialogTitle,
                  {}
                ).done(
                  h.bind(function () {
                    this.clearAllSelectedNodes(), this._addToFacetFilter(O);
                  }, this)
                )
              : this._addToFacetFilter(O);
          },
          _addToFacetFilter: function (O) {
            var K;
            this._synchronizedContextForFacets
              ? (this.facetFilters.addFilter(O, !1),
                (K = this.facetFilters.getFilterQueryValue()),
                (this.noFetchOnViewStateChanged = !0),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }, { fetch: !1 }),
                this._addOrRemoveExpandForLocationColumn(!0),
                (this.noFetchOnViewStateChanged = !1),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.addFilter(O),
                (K = this.facetFilters.getFilterQueryValue()),
                this._addOrRemoveExpandForLocationColumn(!0),
                this._showOrHideLocationColumn(!0),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }));
          },
          _setFacetFilter: function (O) {
            var K;
            this._synchronizedContextForFacets
              ? (this.facetFilters.setFilter(O, !1),
                (K = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }, { fetch: !1 }),
                this._addOrRemoveExpandForLocationColumn(!0),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.setFilter(O),
                (K = this.facetFilters.getFilterQueryValue()),
                this._addOrRemoveExpandForLocationColumn(!0),
                this._showOrHideLocationColumn(!0),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }));
          },
          _removeFacetFilter: function (O) {
            var K;
            this._synchronizedContextForFacets
              ? (this.facetFilters.removeFilter(O, !1),
                (K = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }, { fetch: !1 }),
                this._addOrRemoveExpandForLocationColumn(K.length > 0),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.removeFilter(O),
                (K = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: K }),
                this._addOrRemoveExpandForLocationColumn(K.length > 0),
                this._showOrHideLocationColumn(K.length > 0));
          },
          _removeAll: function () {
            this._synchronizedContextForFacets
              ? (this._addOrRemoveExpandForLocationColumn(!1),
                this.facetFilters.clearFilter(!1),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: [] }, { fetch: !1 }),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.clearFilter(),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: [] }),
                this._addOrRemoveExpandForLocationColumn(!1),
                this._showOrHideLocationColumn(!1));
          },
          _beforeExecuteCommand: async function (O) {
            if (O) {
              var K = this.getAllSelectedNodes();
              if (
                (K &&
                  K.each(function (re) {
                    re.collection = O.status.collection;
                  }),
                O.commandSignature === "TableSettings")
              )
                switch (this._currentTableMode) {
                  case "thumbnail":
                    this.thumbnail.cancelAnyExistingInlineForm.call(
                      this.thumbnail
                    );
                    break;
                  default:
                    this.tableView.cancelAnyExistingInlineForm.call(
                      this.tableView
                    );
                }
              (O.commandSignature === "Delete" ||
                O.commandSignature === "RemoveCollectedItems" ||
                O.commandSignature === "Move") &&
                ((this.deletingNodes = !0),
                this.tableView.setDeletingNodesState(!0)),
                O.commandSignature === "permissions" && this.blockActions(),
                O.commandSignature === "DocPreview" &&
                  (this.clearContainerResponsiveStateTimeout(),
                  (this.isDocPreviewInstance = !0));
            }
          },
          _toolbarActionTriggered: function (O) {
            switch (O.commandSignature) {
              case "Filter":
                (this.filterToolItemModel = O.toolItem),
                  this._completeFilterCommand(),
                  this.filterToolItemModel.set("stateIsOn", this.showFilter);
                break;
              case "TreeBrowse":
                (this.treeBrowseToolItemModel = O.toolItem),
                  this._completeTreeCommand(),
                  this.treeBrowseToolItemModel.set("stateIsOn", this.showTree);
                break;
            }
          },
          _afterExecuteCommand: async function (O) {
            var K = this;
            if (!(!O || O.cancelled)) {
              if (O.status.forwardToTable) {
                var re = G.getInlineFormView(O.addableType);
                re &&
                  (O.newNodes[0].error ||
                    (this.thumbnailView
                      ? this.thumbnail.startCreateNewModel(O.newNodes[0], re)
                      : this.tableView.startCreateNewModel(O.newNodes[0], re)));
              }
              switch (
                (O.command &&
                  O.command.allowCollectionRefetch &&
                  O.commandSignature !== "Delete" &&
                  this.collection.fetch(),
                O.commandSignature)
              ) {
                case "SmartViewRestore":
                case "SmartViewPurge":
                case "Move":
                case "RemoveCollectedItems":
                case "Delete":
                  var ve = this.collection;
                  (this.deletingNodes = !1),
                    this.tableView.setDeletingNodesState(!1),
                    ve.skipCount !== 0 &&
                      ve.totalCount === ve.skipCount &&
                      this.collection.setLimit(
                        ve.skipCount - ve.topCount,
                        this.collection.topCount,
                        !1
                      ),
                    this.collection.fetch(),
                    this.clearAllSelectedNodes();
                  break;
                case "MaximizeWidgetView":
                  this.tableToolbarView.rightToolbarView.collection.refilter();
                  break;
                case "RestoreWidgetViewSize":
                  this.tableToolbarView.rightToolbarView.collection.refilter();
                  break;
                case "ToggleDescription":
                  this.setContainerPrefs({
                    isDescriptionShown:
                      !this.getContainerPrefs("isDescriptionShown"),
                  });
                  break;
              }
            }
          },
          _transitionEnd: h.once(function () {
            var O = {
                transition: "transitionend",
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
              },
              K = document.createElement("div"),
              re;
            for (re in O) if (typeof K.style[re] < "u") return O[re];
          }),
          _syncLeftPanelFromPrefs: function () {
            var O;
            this.getPreference("isTreeOpen") &&
              this.el.querySelector(
                ".csui-navigationToolbar li[data-csui-command='treebrowse']"
              ) &&
              (O = "tree"),
              O ||
                (this.getPreference("isFacetOpen") &&
                  ((O = "filter"),
                  this.container?.attributes?.type &&
                    this.excludeContainerTypes().indexOf(
                      this.container.attributes.type
                    ) > -1 &&
                    (O = void 0))),
              O !== "filter" && this.showFilter && this._hideFacetPanelView(),
              O !== "tree" && this.showTree && this._hideTreePanelView(),
              O === "filter" && !this.showFilter && this._showFacetPanelView(),
              O === "tree" && !this.showTree && this._showTreePanelView();
          },
          _completeFilterCommand: function () {
            const O = {};
            !this.showFilter != !!this.getPreference("isFacetOpen") &&
              (O.isFacetOpen = !this.showFilter),
              this.showFilter
                ? ot.call(this) &&
                  !this.showTree &&
                  this.getPreference("isTreeOpen") &&
                  (O.isTreeOpen = !1)
                : this.showTree &&
                  this.getPreference("isTreeOpen") &&
                  (O.isTreeOpen = !1),
              Object.keys(O).length > 0 && this.setPreferences(O),
              this._syncLeftPanelFromPrefs(),
              this.showFilter &&
                (this?.facetView?.trigger("data:synced"),
                r.settings.rtl &&
                  this.ui.sidePanel.one(
                    this._transitionEnd(),
                    function () {
                      this.triggerMethod("dom:refresh");
                    }.bind(this)
                  ));
          },
          _completeTreeCommand: function () {
            const O = {};
            !this.showTree != !!this.getPreference("isTreeOpen") &&
              (O.isTreeOpen = !this.showTree),
              this.showTree
                ? lt.call(this) &&
                  !this.showFilter &&
                  this.getPreference("isFacetOpen") &&
                  (O.isFacetOpen = !1)
                : this.showFilter &&
                  this.getPreference("isFacetOpen") &&
                  (O.isFacetOpen = !1),
              Object.keys(O).length > 0 && this.setPreferences(O),
              this._syncLeftPanelFromPrefs();
          },
          _showTreePanelView: function () {
            (this.showTree = !0),
              this._setTreeBrowseToolItemModel(),
              this.treeView === void 0 && this._showTreeView(),
              this.ui.sidePanel.removeClass("csui-sidepanel-hidden"),
              this.ui.treeView.removeClass("csui-treeview-visibility"),
              xi
                ? (this.ui.treeView.removeClass("csui-treeview-hidden"),
                  this.triggerMethod("dom:refresh"))
                : this.ui.treeView
                    .one(
                      this._transitionEnd(),
                      function () {
                        this.triggerMethod("dom:refresh"),
                          this._currentTableMode === "thumbnail" &&
                            this.thumbnail._adjustThumbnailWidth();
                      }.bind(this)
                    )
                    .removeClass("csui-treeview-hidden");
            var O = this;
            this.treeResizeViewState &&
              this.treeResizeViewState.style &&
              this.ui.sidePanel.attr("style", this.treeResizeViewState.style),
              this.ui.sidePanel.resizable({
                minWidth: 248,
                maxWidth: "50%",
                handles: r.settings.rtl ? "w" : "e",
                start: function () {
                  O.ui.sidePanel[0].classList.add(
                    "csui-node-tree-no-transition"
                  );
                },
                stop: function () {
                  O.ui.sidePanel[0].classList.remove(
                    "csui-node-tree-no-transition"
                  ),
                    O.triggerMethod("dom:refresh");
                },
              });
          },
          _postTreePanelHide: function () {
            (this.treeResizeViewState = {
              style: this.ui.sidePanel.attr("style"),
            }),
              this.ui.sidePanel.removeAttr("style"),
              this.ui.sidePanel.resizable("destroy");
          },
          _hideTreePanelView: function () {
            this._postTreePanelHide(),
              (this.showTree = !1),
              !this.showTree &&
                !this.showFilter &&
                this.ui.sidePanel.addClass("csui-sidepanel-hidden"),
              this._setTreeBrowseToolItemModel(),
              xi
                ? (this.ui.treeView.addClass("csui-treeview-hidden"),
                  this.triggerMethod("dom:refresh"),
                  this.ui.treeView.hasClass("csui-treeview-hidden") &&
                    this.ui.treeView.addClass("csui-treeview-visibility"))
                : this.ui.treeView
                    .one(
                      this._transitionEnd(),
                      function () {
                        this.triggerMethod("dom:refresh"),
                          this.ui.treeView.hasClass("csui-treeview-hidden") &&
                            this.ui.treeView.addClass(
                              "csui-treeview-visibility"
                            );
                      }.bind(this)
                    )
                    .addClass("csui-treeview-hidden");
          },
          _setTreeBrowseToolItemModel: function () {
            ot.call(this),
              this.treeBrowseToolItemModel &&
                (this.treeBrowseToolItemModel.set(
                  "toolItemAriaExpand",
                  this.showTree
                ),
                this.treeBrowseToolItemModel.set(
                  "title",
                  this.showTree
                    ? le.treeBrowseCollapseTooltip
                    : le.treeBrowseExpandTooltip
                ),
                this.treeBrowseToolItemModel.set("stateIsOn", this.showTree));
          },
          excludeContainerTypes: function () {
            var O = [136, 298];
            return (
              this.container.attributes.type === 899 &&
                !this.collection.length &&
                O.push(899),
              O
            );
          },
          _showFacetPanelView: function () {
            (this.showFilter = !0),
              this._ensureFacetPanelViewDisplayed(),
              this.facetFilters.ensureFetched(),
              this._setFilterToolItemModel(),
              this.ui.sidePanel.removeClass("csui-sidepanel-hidden"),
              this.ui.facetView.removeClass("csui-facetview-visibility"),
              xi
                ? (this.ui.facetView.removeClass("csui-facetview-hidden"),
                  this.triggerMethod("dom:refresh"))
                : this.ui.facetView
                    .one(
                      this._transitionEnd(),
                      function () {
                        this.triggerMethod("dom:refresh"),
                          this.filterToolItemModel &&
                            this.filterToolItemModel.get("isKeyEvent") &&
                            this.facetView.$el
                              .find(".csui-facet.csui-acc-focusable-active")
                              .trigger("focus"),
                          this._currentTableMode === "thumbnail" &&
                            this.thumbnail._adjustThumbnailWidth();
                      }.bind(this)
                    )
                    .removeClass("csui-facetview-hidden"),
              this.listenTo(
                this.facetView,
                "dom:refresh",
                h.bind(function () {
                  a(window).trigger("resize.facetview");
                }, this)
              ),
              Ji.config?.enablePanelResize &&
                (this.ui.sidePanel.attr(
                  "style",
                  this.treeResizeViewState?.style
                ),
                this.triggerMethod(
                  "dynamicDomLoaded",
                  this.ui.sidePanel,
                  this
                ));
          },
          _hideFacetPanelView: function () {
            Ji.config?.enablePanelResize &&
              (this.treeResizeViewState = {
                style: this.ui.sidePanel.attr("style"),
              }),
              (this.showFilter = !1),
              !this.showTree &&
                !this.showFilter &&
                this.ui.sidePanel.addClass("csui-sidepanel-hidden"),
              this._setFilterToolItemModel(),
              xi
                ? (this.ui.facetView.addClass("csui-facetview-hidden"),
                  this.triggerMethod("dom:refresh"),
                  this.ui.facetView.hasClass("csui-facetview-hidden") &&
                    this.ui.facetView.addClass("csui-facetview-visibility"),
                  this._removeFacetPanelView())
                : this.ui.facetView
                    .one(
                      this._transitionEnd(),
                      function () {
                        this.showFilter ||
                          (this._removeFacetPanelView(),
                          this.triggerMethod("dom:refresh"),
                          this.ui.facetView.hasClass("csui-facetview-hidden") &&
                            this.ui.facetView.addClass(
                              "csui-facetview-visibility"
                            ));
                      }.bind(this)
                    )
                    .addClass("csui-facetview-hidden"),
              this.listenTo(
                this.facetView,
                "dom:refresh",
                h.bind(function () {
                  a(window).trigger("resize.facetview");
                }, this)
              );
          },
          _setFilterToolItemModel: function () {
            lt.call(this),
              this.filterToolItemModel &&
                (this.filterToolItemModel.set(
                  "toolItemAria",
                  this.showFilter ? le.filterCollapseAria : le.filterExpandAria
                ),
                this.filterToolItemModel.set(
                  "toolItemAriaExpand",
                  this.showFilter
                ),
                this.filterToolItemModel.set(
                  "title",
                  this.showFilter
                    ? le.filterCollapseTooltip
                    : le.filterExpandTooltip
                ),
                this.filterToolItemModel.set("stateIsOn", this.showFilter));
          },
          _collectionFilterChanged: function () {
            var O = this.collection.filters,
              K = O && O.facet;
            K && K.length > 0 && this._showFacetPanelView();
          },
          _formatFacetFilter: function (O) {
            if (O) {
              var K = O.facet;
              if (K)
                return K.map(function (re) {
                  var ve = re.split(":"),
                    Ce = ve[1].split("|");
                  return (
                    (Ce = Ce.map(function (Te) {
                      return { id: Te };
                    })),
                    { id: ve[0], values: Ce }
                  );
                });
            }
          },
          setPageInfoFromViewState: function () {
            var O = this.getViewStatePage() || this.getDefaultViewStatePage();
            if (
              O &&
              O.top !== void 0 &&
              O.skip !== void 0 &&
              (O.top !== this.collection.topCount ||
                O.skip !== this.collection.skipCount)
            )
              return this.collection.setLimit(O.skip, O.top, !1), !0;
          },
          _getOrderByFromCollectionSorting: function (O) {
            if (O && O.sort && O.sort.length > 0 && O.sort[0].value) {
              let K = O.sort[0].value,
                re = K.indexOf("_"),
                ve = K.substring(re + 1),
                Ce = K.substring(0, re);
              return ve + " " + Ce;
            }
          },
          _isWidgetUrlParamsChanged: function (O, K) {
            let re = this.getUrlParameters(),
              ve = !1;
            return (
              re.some((Ce) => {
                if (O[Ce] !== K[Ce]) return (ve = !0), !0;
              }),
              ve
            );
          },
          onViewStateChanged: function (O) {
            var K = this.context.getModel(Ai);
            if (!this.enableViewState || this._originalId !== K.get("id")) {
              this.tableView &&
                !this.retainPerspectiveCalled &&
                (this.tableView.enableViewState = !1);
              return;
            }
            O instanceof Object && (O = !1);
            let re = this.context.viewStateModel,
              ve = re.previousAttributes().state,
              Ce = re.get("state");
            if (ve && Ce && !this._isWidgetUrlParamsChanged(ve, Ce)) return;
            var Te =
                this.getViewStateOrderBy() || this.getDefaultViewStateOrderBy(),
              Ne = re.getViewState("filter", !0),
              x,
              E,
              B,
              j = !1;
            try {
              (E = JSON.parse(Ne)),
                (B = E && E.facet ? E.facet : []),
                this.collection.setFilter(E, !1) && (j = !0);
            } catch {
              B = [];
            }
            (x = this.facetFilters && this.facetFilters.filters),
              x &&
                !h.isEqual(x, B) &&
                (this.facetFilters.setFilter(
                  B,
                  !this.noFetchOnViewStateChanged
                ),
                this._showOrHideLocationColumn(
                  this.facetFilters.getFilterQueryValue().length > 0
                )),
              this.setPageInfoFromViewState() && (j = !0);
            let J = this.collection.orderBy;
            J === void 0 &&
              (J = this._getOrderByFromCollectionSorting(
                this.collection.sorting
              )),
              Te !== J && this.collection.setOrder(Te, !1) && (j = !0),
              !O &&
                j &&
                !this.noFetchOnViewStateChanged &&
                this.collection.fetch();
          },
          _pagingChanged: function () {
            if (
              this.enableViewState &&
              this.collection.topCount !== void 0 &&
              this.collection.skipCount !== void 0
            )
              return this.setViewStatePage(
                this.collection.topCount,
                this.collection.skipCount,
                { default: this.collection.skipCount === 0 }
              );
          },
          _orderByChanged: function () {
            var O = this.collection.orderBy,
              K = this.getContainerPrefs("orderBy", { useSessionStorage: !0 });
            O &&
              (this.enableViewState &&
                this.tableView &&
                this.tableView.orderByFromServer &&
                this.context.viewStateModel.setDefaultViewState(
                  "order_by",
                  this.tableView.orderByFromServer.replace(/ /g, "_")
                ),
              this.enableViewState && this.setViewStateOrderBy([O]),
              this._isOrderByChanged() &&
                this.setContainerPrefs(
                  { orderBy: O },
                  { useSessionStorage: !0 }
                ));
          },
          _isOrderByChanged: function () {
            if (this.getContainerPrefs("orderBy", { useSessionStorage: !0 }))
              return !0;
            const O = this.collection.sorting?.sort[0]?.value;
            if (O && this.collection.orderBy) {
              const K = O.indexOf("_"),
                re = O.substring(K + 1),
                ve = O.substring(0, K);
              let Ce = re.toLowerCase();
              return (
                h.find(this.tableView.allColumns, function (Te) {
                  if (
                    Te.attributes.sort_key === Ce ||
                    Te.name.toLowerCase() === Ce ||
                    Te.attributes.column_key === Ce
                  )
                    return (Ce = Te.attributes.column_key), !0;
                }),
                Ce + " " + ve !== this.collection.orderBy
              );
            }
            return !1;
          },
          _rememberFocusInTable: function () {
            this.tableView.el.contains(document.activeElement) &&
              (this._tableFocused = !0);
          },
          _restoreFocusInTable: function () {
            this._tableFocused &&
              (this.tableView.currentlyFocusedElement() &&
                this.tableView.currentlyFocusedElement().trigger("focus"),
              (this._tableFocused = !1));
          },
          _popoverOpen: function () {
            this._tableFocused = !1;
          },
          removeOrderBy: function () {
            this.options.resetOrderByOnBrowse &&
              this._currentTableMode !== "thumbnail" &&
              this.getDefaultViewStateOrderBy() !==
                this.getViewStateOrderBy() &&
              this.setViewStateOrderBy(void 0, { silent: !0 }),
              (this.collection.state = void 0);
          },
          _addUrlParametersSupport: function (O) {
            var K = O && O.viewStateModel,
              re = this.getUrlParameters();
            this.enableViewState = K && re && K.addUrlParameters(re, O);
          },
          getDefaultUrlParameters: function () {
            return this.options.urlParamsList;
          },
          getUrlParameters: function () {
            return this.getDefaultUrlParameters();
          },
          getPreference: function (O) {
            if (this._localStorageKeys.includes(O))
              return this.getContainerPrefs(O);
            if (this._sessionStorageKeys.includes(O))
              return this.getContainerPrefs(O, { useSessionStorage: !0 });
            this._getNodesTableSettings();
            var K = this._nodesTableSettings && this._nodesTableSettings.get(O);
            return (
              O === "pageSize" &&
                K == null &&
                (K = this.options.data.pageSize || this.options.pageSize),
              K == null && (K = this._widgetSettingsDefaults[O]),
              O === "tableMode" &&
                (xi
                  ? (K = "nowrap")
                  : K === "thumbnail" &&
                    v.moduleConfig("csui/utils/commands/thumbnail.toggle")
                      .enableGridView === !1 &&
                    (K = "wrap")),
              K
            );
          },
          setPreference: function (O, K, re) {
            return this.setPreferences({ [O]: K }, re);
          },
          setPreferences: function (O, K) {
            K = K || {};
            var re = a.Deferred().resolve().promise();
            let ve = h.pick(O, this._localStorageKeys);
            Object.keys(ve).length > 0 && this.setContainerPrefs(ve);
            let Ce = h.pick(O, this._sessionStorageKeys);
            Object.keys(Ce).length > 0 &&
              this.setContainerPrefs(Ce, { useSessionStorage: !0 });
            let Te = h.omit(
              O,
              this._localStorageKeys,
              this._sessionStorageKeys
            );
            return (
              Object.keys(Te).length > 0 &&
                (this.namedLocalStorage &&
                  (this.setContainerPrefs({}),
                  this.options.preferencesStorageId &&
                    this.setContainerPrefs(
                      {},
                      { id: this.options.preferencesStorageId }
                    )),
                this._getNodesTableSettings(),
                Te.columns &&
                  (this._normalizeColumnCustomizings(Te.columns),
                  (this.columnCustomizings = Te.columns),
                  K.silent
                    ? this._mergeColumnsCustomSilent()
                    : this._buildColumnsAndReset(this.columns)),
                (re = this._nodesTableSettings.save(Te, K).fail(() => {
                  li.showMessage("error", le.errorSavingTableSettings);
                }))),
              re
            );
          },
          getContainerPrefs: function (O, K) {
            var re =
              K && K.useSessionStorage
                ? this.namedSessionStorage
                : this.namedLocalStorage;
            const ve = { isDescriptionShown: !1 };
            this.container &&
              this.container.get("type") === 136 &&
              (ve.orderBy = this.constants.DEFAULT_SORT_CD);
            var Ce = {};
            if (re) {
              let Te = this._getPreferencesId(K),
                Ne = re.get("container:" + Te);
              Ne &&
                ((!K || !K.useSessionStorage) &&
                  (Ne = h.omit(Ne, this._oldLocalKeys)),
                (Ce = h.extend(Ce, Ne)));
            }
            return (Ce = h.defaults(Ce, ve)), O ? Ce[O] : Ce;
          },
          setContainerPrefs: function (O, K) {
            var re =
              K && K.useSessionStorage
                ? this.namedSessionStorage
                : this.namedLocalStorage;
            if (re) {
              let ve = this._getPreferencesId(K),
                Ce = re.get("container:" + ve);
              Ce &&
                ((!K || !K.useSessionStorage) &&
                  (Ce = h.omit(Ce, this._oldLocalKeys)),
                (O = h.extend(Ce, O))),
                re.set("container:" + ve, O);
            }
          },
          _normalizeColumnCustomizings: function (O) {
            Object.entries(O).forEach(([K, re]) => {
              const ve = h.pick(re, H.columnCustomizationKeys);
              Object.keys(re).forEach((Ce) => {
                (Ce === "hidden" ? re[Ce] == null : !ve[Ce]) && delete re[Ce];
              }),
                Object.keys(re).length === 0 && delete O[K];
            });
          },
          _getNodesTableSettings: function () {
            const O =
              "csui/widgets/nodestable:" + this._getNodesTableSettingsId();
            if (
              !this._nodesTableSettings ||
              !this._nodesTableSettings.collection ||
              this._nodesTableSettings.get(
                this._nodesTableSettings.idAttribute
              ) !== O
            ) {
              const K = this.context.getCollection(L);
              if (
                ((this._nodesTableSettings = K.get(O)),
                !this._nodesTableSettings)
              ) {
                const re = K.model.prototype.idAttribute;
                this._nodesTableSettings = K.add({ [re]: O });
              }
              (this.columnCustomizings =
                this._nodesTableSettings.get("columns") || {}),
                this._normalizeColumnCustomizings(this.columnCustomizings);
            }
          },
          _getNodesTableSettingsId: function (O) {
            var K =
              this._getPreferencesId({
                id: (O || this.options).preferencesStorageId,
              }) || Zi;
            return K === Zi ? "global" : K;
          },
          _getPreferencesId: function (O) {
            var K;
            if (O && O.id) K = O.id;
            else {
              const re = this.options.container || this.context.getModel(g);
              K = this._getConfiguredStartingContainerId() || re.get("id");
            }
            return K;
          },
          renderNewStateResponsiveContainer: function (O) {
            O.containerResponsiveStateModel.getChanged() &&
              (O.collection.fetch(),
              O.onRender(),
              ht &&
                li.showMessage(
                  "success",
                  O.containerResponsiveStateModel.getUserMessage()
                ));
          },
          handleVisibilityChange: function () {
            document.hidden
              ? this.clearContainerResponsiveStateTimeout()
              : this.setContainerResponsiveStateTimeoutImmediate();
          },
          setContainerResponsiveStateTimeout: function () {
            var O = ai.getCurrentView();
            O &&
              (O.responsiveContainerTimeout = setTimeout(function () {
                O.tableToolbarRegion &&
                  O.containerResponsiveStateModel
                    .fetch({ force: !0 })
                    .done(function () {
                      O.renderNewStateResponsiveContainer(O),
                        O.setContainerResponsiveStateTimeout();
                    });
              }, vi.containerResponsiveStateUpdateTime));
          },
          setContainerResponsiveStateTimeoutImmediate: function () {
            var O = ai.getCurrentView();
            O &&
              !O.isDocPreviewInstance &&
              (clearTimeout(O.responsiveContainerTimeout),
              (O.responsiveContainerTimeout = void 0),
              (O.responsiveContainerTimeout = setTimeout(function () {
                O.tableToolbarRegion &&
                  !O.inlineFormViewClearedTimeout &&
                  O.containerResponsiveStateModel
                    .fetch({ force: !0 })
                    .done(function () {
                      O.renderNewStateResponsiveContainer(O),
                        O.setContainerResponsiveStateTimeout();
                    });
              }, 10)));
          },
          clearContainerResponsiveStateTimeout: function () {
            var O = ai.getCurrentView();
            O &&
              (clearTimeout(O.responsiveContainerTimeout),
              (O.responsiveContainerTimeout = void 0));
          },
          getCollectionData: function () {
            return { orderBy: this.collection.orderBy };
          },
          clearContainerResponsiveStateTimeoutOnDestory: function () {
            var O = ai.getPrevView();
            O &&
              (clearTimeout(O.responsiveContainerTimeout),
              (O.responsiveContainerTimeout = void 0));
          },
        },
        { useV2RestApi: vi.useV2RestApi }
      );
      function ot() {
        try {
          this.treeBrowseToolItemModel =
            this.tableToolbarRegion.currentView.navigationToolbarView.collection.findWhere(
              { signature: "TreeBrowse" }
            );
        } catch (O) {
          l.warn(
            `There is an issue in getting treeBrowseToolItemModel.
` + O.message
          ) && console.warn(l.last);
        }
        return this.treeBrowseToolItemModel;
      }
      function lt() {
        try {
          this.filterToolItemModel =
            this.tableToolbarRegion.currentView.filterToolbarView.collection.findWhere(
              { signature: "Filter" }
            );
        } catch (O) {
          l.warn(
            `There is an issue in getting filterToolItemModel.
` + O.message
          ) && console.warn(l.last);
        }
        return this.filterToolItemModel;
      }
      function ft(O, K) {
        function re(ve) {
          (ve.reason === "logged-out" || ve.reason === "expired") &&
            (K.destroy(), O.authenticator.off("loggedOut", re));
        }
        O.authenticator.on("loggedOut", re);
      }
      function rt(O) {
        (this._currentTableMode = O),
          this._isRendered
            ? (l.debug("enable view in mode:", this._currentTableMode) &&
                console.log(l.last),
              this.enableThumbnailView())
            : (l.debug("render view in mode:", this._currentTableMode) &&
                console.log(l.last),
              this.setTableView({
                enableDragNDrop: this.options.enableDragNDrop,
              }),
              e.LayoutView.prototype.render.call(this));
      }
      function at(O, K) {
        this._getNodesTableSettings();
        const re = O.map((ve) => {
          const Ce = this.columnCustomizings[ve.get("column_key")] || {},
            Te = { ...ve.attributes };
          return (
            H.columnCustomizationKeys.forEach((Ne) => {
              Ce[Ne] != null
                ? (Te["customization_" + Ne] = Ce[Ne])
                : delete Te["customization_" + Ne];
            }),
            Te
          );
        });
        if (ct(this.columns, re)) return this.columns.reset(re, K), !0;
        (!K || !K.silent) && this.columns.trigger("remain", this.columns);
      }
      function ct(O, K) {
        return (
          O.length !== K.length ||
          O.some((re, ve) => !h.isEqual(re.attributes, K[ve]))
        );
      }
      return (
        h.extend(Di.prototype, qe),
        h.extend(Di.prototype, Ze),
        h.extend(Di.prototype, hi),
        h.extend(Di.prototype, ui),
        Di.prototype._eventsToPropagateToRegions.push(
          "global.alert.inprogress",
          "global.alert.completed"
        ),
        Di
      );
    }
  ),
  csui.define(
    "hbs!csui/integration/folderbrowser/impl/folderbrowser",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `
<div id="csui-folderbrowser-core">

  <div class="csui-fb-breadcrumbs"></div>
  <div class="csui-fb-nodestable "></div>
</div>`;
        },
      });
      return (
        a.registerPartial(
          "csui_integration_folderbrowser_impl_folderbrowser",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/integration/folderbrowser/impl/folderbrowser",
    [],
    function () {}
  ),
  csui.define(
    "csui/integration/folderbrowser/impl/folderbrowser.view",
    [
      "module",
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/contexts/page/page.context",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/node",
      "csui/utils/contexts/factories/next.node",
      "csui/utils/contexts/factories/user",
      "csui/utils/contexts/factories/children",
      "csui/utils/contexts/factories/children2",
      "csui/models/node/node.model",
      "csui/utils/connector",
      "csui/utils/base",
      "csui/utils/contexts/factories/ancestors",
      "csui/controls/breadcrumbs/breadcrumbs.view",
      "csui/widgets/nodestable/nodestable.view",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/controls/table/table.columns",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/behaviors/default.action/impl/defaultaction",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/contexts/perspective/plugins/node/node.extra.data",
      "hbs!csui/integration/folderbrowser/impl/folderbrowser",
      "csui/controls/iconpreload/icon.preload.view",
      "css!csui/integration/folderbrowser/impl/folderbrowser",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D,
      L,
      Q
    ) {
      "use strict";
      b.useV2RestApi && (s = o);
      var q = {
          fields: D.getModelFields(),
          expand: D.getModelExpand(),
          includeResources: ["metadata", "perspective"],
        },
        G = i.LayoutView.extend({
          className: "binf-widgets csui-folderbrowser",
          template: L,
          regions: {
            breadcrumbRegion:
              "#csui-folderbrowser-core div.csui-fb-breadcrumbs",
            nodeTableRegion: "#csui-folderbrowser-core div.csui-fb-nodestable",
          },
          behaviors: { DefaultAction: { behaviorClass: C } },
          constructor: function (H) {
            H || (H = {}), this.setDefaultOptions(H);
            var z = H.connection,
              Z = H.connector,
              te =
                H.context ||
                new l({
                  factories: {
                    connector: Z || (z && { connection: z }) || void 0,
                  },
                });
            Z || (Z = te.getObject(u)),
              (this.context = te),
              (this.connector = Z),
              H.context == null && h.extend(H, { context: this.context }),
              i.LayoutView.prototype.constructor.call(this, H),
              (this.container = this._initializeContainer(te, H)),
              (this.breadcrumbs = this._initializeBreadCrumb(this.options)),
              (this._nextNode = te.getModel(t)),
              this.listenTo(this._nextNode, "change:id", function () {
                this.enterContainer(this._nextNode.attributes);
              }),
              (this.contextPromise = this.container
                .fetch()
                .fail(h.bind(this.handleFetchError, this))),
              this.listenToOnce(this.container, "sync", function () {
                (this.nodesTable = this._createNodesTable(
                  this.context,
                  this.options
                )),
                  (this.collection = this.nodesTable.collection),
                  this._updateChildCollection(H),
                  (this.tableView = this.nodesTable.tableView);
              }),
              te.getModel(n),
              this.listenTo(te, "error", this.handleFetchError),
              this.propagateEventsToRegions();
          },
          setDefaultOptions: function (W) {
            h.defaults(W, {
              breadcrumb: !0,
              facetPanel: !0,
              columnsFromDefinitionsOrder: !1,
            });
          },
          onDestroy: function () {
            this.nodesTable.destroy(),
              this.breadcrumbs && this.breadcrumbs.destroy();
          },
          onRender: function () {
            this.nodeTableRegion.show(this.nodesTable),
              this.breadcrumbs != null &&
                (this.$el.addClass("csui-with-breadcrumb"),
                this.breadcrumbRegion.show(this.breadcrumbs)),
              Q.ensureOnThePage(),
              y.setMessageRegionView(this, { classes: "csui-globalMessenger" }),
              y.setProgresspanelMessageRegionView(this, {
                classes: "csui-globalMessenger",
              });
          },
          updateOptions: function (W) {
            W &&
              (this.breadcrumbs && this._updateBreadcrumbs(W),
              W.start && W.start.id && this.enterContainer(W.start.id));
          },
          enterContainer: function (W, H) {
            var z = { id: N(W) };
            return (
              z.id != this.prevNodeId &&
                (this.trigger("openingContainer", z),
                z.cancel ? H != null && (H.cancel = !0) : this.fetchNode(z)),
              this
            );
          },
          fetchNode: function (W) {
            var H = this.container;
            return (
              (this.prevNodeId = W.id),
              this._nextNode.clear({ silent: !0 }),
              this._nextNode.actions.reset([], { silent: !0 }),
              this._nextNode.set(W, { silent: !0 }),
              this._nextNode.fetch().done(
                function () {
                  H.clear({ silent: !0 }),
                    H.set(this._nextNode.attributes),
                    this.context.fetch();
                }.bind(this)
              ),
              !0
            );
          },
          _initializeContainer: function (W, H) {
            var z = h.extend(
                {
                  defaultActionCommands:
                    this.defaultActionController.actionItems.getAllCommandSignatures(
                      this.defaultActionController.commands
                    ),
                  delayRestCommands: !0,
                  promoteSomeRestCommands: !1,
                },
                q
              ),
              Z = W.getObject(r, { options: z });
            return (
              H.start || (H.start = { type: 141 }),
              H.start.id && H.start.id !== "volume"
                ? c.usesIntegerId && typeof H.start.id == "string"
                  ? Z.set({ id: parseInt(H.start.id, 10) })
                  : Z.set({ id: H.start.id })
                : H.start.type && Z.set({ id: "volume", type: H.start.type }),
              this._setContainerEvents(Z),
              Z
            );
          },
          _setContainerEvents: function (W) {
            return (
              this.listenTo(W, "change:id", function (H, z) {
                this.enterContainer(H.get("id"), z);
              }),
              !0
            );
          },
          _updateChildCollection: function (W) {
            this.collection.setFilter(W.filter, !1),
              b.useV2RestApi &&
                (this.collection.setFields(q.fields),
                this.collection.setExpand(q.expand)),
              this.listenTo(this.collection, "sync", function () {
                this._containerOpened(this.container);
              });
          },
          _createNodesTable: function (W, H) {
            var z = new b({
              context: W,
              pageSize: H.pageSize,
              ddItemsList: H.pageSizes,
              tableColumns: H.tableColumns,
              clearFilterOnChange: H.clearFilterOnChange,
              resetOrderOnChange: H.resetOrderOnChange,
              resetLimitOnChange: H.resetLimitOnChange,
              fixedFilterOnChange: H.fixedFilterOnChange,
              toolbarItems: H.toolbarItems,
            });
            return (
              this.listenTo(z, "executed:defaultAction", function (Z) {
                Z.signature === "Browse" && this._containerOpened(Z.node);
              }),
              this.listenTo(z.tableView, "tableBodyRendered", function (Z) {
                this.trigger("tableBodyRendered", {
                  sender: this,
                  target: Z.target,
                });
              }),
              this.listenTo(z, "before:defaultAction", function (Z) {
                this._beforeDefaultAction(Z);
              }),
              z
            );
          },
          _beforeDefaultAction: function (W) {
            var H = { sender: this, node: W.node };
            return (
              this.trigger("executingDefaultAction", H),
              (W.cancel = H.cancel),
              !0
            );
          },
          _containerOpened: function (W) {
            return (
              this.trigger("containerOpened", { sender: this, node: W }), !0
            );
          },
          updateBreadcrumb: function (W) {
            var H = N(W);
            this.breadcrumbs.updateStopId(H);
          },
          _initializeBreadCrumb: function (W) {
            var H = null;
            return (
              this.options.breadcrumb &&
                (h.isObject(this.options.breadcrumb) ||
                  (this.options.breadcrumb = {}),
                (H = new w({
                  context: W.context,
                  collection: W.context.getCollection(g),
                  stop: W.breadcrumb.stop,
                })),
                (W.breadcrumb.isBreadcrumbsEmpty = !0),
                this._setBreadcrumbEvents(H)),
              H
            );
          },
          _setBreadcrumbEvents: function (W) {
            return (
              this.listenTo(
                W,
                "before:defaultAction",
                this._beforeDefaultAction
              ),
              !0
            );
          },
          handleFetchError: function (W) {
            var H = new f.Error(W);
            this.tableView && this.tableView.cancelFetch(),
              this.tableView && this.tableView.renderError(),
              F.showError(H.message);
          },
        });
      return h.extend(G.prototype, S), G;
      function N(W) {
        return (W.get && W.get("id")) || W.id || W;
      }
    }
  ),
  csui.define(
    "csui/integration/folderbrowser/folderbrowser.widget",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/integration/folderbrowser/impl/folderbrowser.view",
      "csui/utils/contexts/page/page.context",
      "nuc/utils/log",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      (l = l(v.id)),
        l.deprecate(
          'Folder Browser Widget "csui/integration/folderbrowser/folderbrowser.widget" is deprecated, please migrate to Folder Browser Widget 2 "csui/integration/folderbrowser2/folderbrowser2.widget"'
        );
      function u(s) {
        (this.options = s || (s = {})),
          (s.context =
            s.context ||
            new e({
              factories: {
                connector:
                  s.connector ||
                  (s.connection && { connection: s.connection }) ||
                  void 0,
              },
            })),
          (this.folderView = new i(s)),
          this.listenTo(this.folderView, "containerOpened", function (o) {
            this.trigger("containerOpened", {
              sender: this,
              node: o.node.toJSON(),
            });
          }),
          this.listenTo(
            this.folderView,
            "executingDefaultAction",
            function (o) {
              var c = { sender: this, node: o.node.toJSON() };
              this.trigger("executingDefaultAction", c), (o.cancel = c.cancel);
            }
          ),
          this.listenTo(this.folderView, "tableBodyRendered", function (o) {
            this.trigger("tableBodyRendered", {
              sender: this,
              target: o.target,
            });
          }),
          this.listenToOnce(this.folderView.container, "sync", function () {
            var o = this.folderView.nodesTable.getSelectedNodes(),
              c = o.clone();
            this.listenTo(o, "reset", function () {
              var m, f;
              o.length > c.length
                ? ((m = "childSelected"),
                  (f = o.reject(function (g) {
                    return c.findWhere({ id: g.get("id") });
                  })))
                : ((m = "childUnselected"),
                  (f = c.reject(function (g) {
                    return o.findWhere({ id: g.get("id") });
                  }))),
                f.length &&
                  this.trigger(m, {
                    sender: this,
                    nodes: d.invoke(f, "toJSON"),
                  }),
                (c = o.clone());
            });
          });
      }
      var r = a.Events.listenTo;
      d.extend(u.prototype, a.Events, {
        constructor: u,
        show: t,
        display: t,
        destroy: n,
        close: n,
        enterContainer: function (s, o) {
          return (
            o && o.stop && this.folderView.updateBreadcrumb(o.stop),
            this.folderView.enterContainer(s),
            this
          );
        },
        getContainer: function () {
          return this.folderView.container.toJSON();
        },
        getSelectedChildren: function () {
          return this.folderView.nodesTable.selectedNodes.toJSON();
        },
        listenTo: function (s, o, c) {
          return typeof s == "string"
            ? r.call(this, this, s, o)
            : r.call(this, s, o, c);
        },
      });
      function t(s) {
        var o = this.folderView.contextPromise,
          c = this;
        return (
          s || (s = {}),
          d.extend(s, this.options),
          (this.region = new h.Region({ el: s.placeholder })),
          o
            ? o.done(function () {
                c.region &&
                  (c.region.show(c.folderView), c.options.context.fetch());
              })
            : c.region.show(c.folderView),
          this
        );
      }
      function n() {
        return (
          this.region &&
            (this.folderView.destroy(),
            this.region.destroy(),
            (this.region = null)),
          this
        );
      }
      return (u.version = "1.0"), u;
    }
  ),
  csui.define(
    "css!csui/integration/folderbrowser2/impl/folderbrowser2",
    [],
    function () {}
  ),
  csui.define(
    "csui/integration/folderbrowser2/folderbrowser2.widget",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/pages/start/multi.perspective.routing",
      "csui/utils/base",
      "csui/controls/iconpreload/icon.preload.view",
      "csui/utils/contexts/perspective/perspective.context",
      "csui/controls/perspective.panel/perspective.panel.view",
      "csui/controls/globalmessage/globalmessage",
      "css!csui/integration/folderbrowser2/impl/folderbrowser2",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      function t(o) {
        this.options = o || (o = {});
        var c = o.connection,
          m = o.connector;
        this.options.context || (this.destoryContextOnExit = !0),
          (this.options.context =
            this.options.context ||
            new l({
              factories: { connector: m || (c && { connection: c }) || void 0 },
            })),
          (this.options.context.options.errorDefaults = v.defaults(
            { hideNavigationButtons: !0 },
            this.options.context.options.errorDefaults
          )),
          csui.require.config({
            config: {
              "csui/integration/folderbrowser2/container.enforcer": {
                enabled: !0,
              },
            },
          }),
          i.isAppleMobile() && document.body.classList.add("csui-on-ipad"),
          i.isIOSBrowser() && document.body.classList.add("csui-on-macintosh"),
          e.ensureOnThePage();
        var f;
        o.context &&
          o.context.viewStateModel &&
          (f = o.context.viewStateModel.get("PerspectiveRouting")),
          f ||
            ((f = new h({
              context: o.context,
              urlCanChange: o.urlCanChange === !0,
            })),
            f.ensureStart({ silent: !0, pushState: !1 }));
        var g = this.options.context.viewStateModel;
        g && (g.clearHistory(), g.set(g.CONSTANTS.CURRENT_ROUTER, void 0));
      }
      v.extend(t.prototype, d.Events, {
        constructor: t,
        show: n,
        destroy: s,
        setStartId: function (o) {
          if (this.options.start.id !== o) {
            var c,
              m = this.options.context.viewStateModel;
            return (
              (this.options.start.id = o),
              (c = this.options.context.getModel("nextNode")),
              c.get("id") === o && c.unset("id", { silent: !0 }),
              c.set("id", o),
              m.set(m.CONSTANTS.START_ID, this.options.start.id),
              m.clearHistory(),
              m.clearCurrentHistoryEntry(),
              this
            );
          }
        },
      });
      function n(o) {
        (this.view = new u({ context: this.options.context })),
          r.setMessageRegionView(this.view, {
            classes: "csui-globalMessenger",
          }),
          r.setProgresspanelMessageRegionView(this.view, {
            classes: "csui-globalMessenger",
          }),
          this.listenTo(
            this.view,
            "create:perspective",
            function () {
              this.view.disabled = !0;
            }.bind(this)
          ),
          (this.region = new a.Region({ el: o.placeholder })),
          this.region.show(this.view),
          this.region.el.classList.add("binf-widgets"),
          this.region.el.classList.add("csui-folderbrowser-strechable");
        var c = this.options.context.getModel("nextNode"),
          m = this.options.context.viewStateModel;
        return (
          m.set(m.CONSTANTS.BREADCRUMB, this.options.breadcrumb !== !1),
          this.options.start &&
            this.options.start.id &&
            (c.unset("id", { silent: !0 }), c.set("id", this.options.start.id)),
          this.options.breadcrumb &&
            this.options.breadcrumb.stop &&
            this.options.breadcrumb.stop.id &&
            m.set(m.CONSTANTS.START_ID, this.options.breadcrumb.stop.id),
          m.clearHistory(),
          this
        );
      }
      function s() {
        return (
          this.region &&
            (this.view.destroy(), this.region.destroy(), (this.region = null)),
          this.destoryContextOnExit && this.options.context.destroy(),
          this
        );
      }
      return t;
    }
  ),
  csui.define(
    "csui/integration/folderbrowser2/container.enforcer",
    ["module"],
    function (v) {
      return [
        {
          decides: function (d) {
            return v.config().enabled && d.get("container");
          },
          important: !0,
          module:
            "json!csui/utils/contexts/perspective/impl/perspectives/container.json",
        },
      ];
    }
  ),
  csui.define(
    "csui/integration/target.picker/target.picker",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/dialogs/node.picker/node.picker",
      "csui/utils/contexts/page/page.context",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = {
        start: {},
        selectRows: "single",
        filter: {},
        selectable: {},
        ui: {},
      };
      function l(u = {}) {
        this.options = v.defaults({}, u, e);
      }
      return (
        v.extend(l.prototype, d.Events, {
          show: function (u) {
            u = v.defaults({}, u, this.options);
            var r = u.connector || { connection: u.connection },
              t = new i({ factories: { connector: r } }),
              n = v.isEmpty(u.start)
                ? void 0
                : u.start.id
                ? u.start
                : { id: "volume", type: u.start.type },
              s = v.isEmpty(u.selectable.type)
                ? u.filter.type
                : u.selectable.type,
              o = new h({
                context: t,
                initialContainer: n,
                selectMultiple: u.selectRows === "multiple",
                selectableTypes: s,
                globalSearch: !0,
                dialogTitle: u.ui.TargetPickerDialogTitle,
              }),
              c = o.show(),
              m = this;
            return (
              c
                .done(function (f) {
                  var g = f.nodes[0],
                    w = v.invoke(f.nodes, "toJSON");
                  m.trigger("childSelected", {
                    sender: m,
                    nodes: v.invoke(f.nodes, "toJSON"),
                    ancestors: [],
                  }),
                    u.done &&
                      u.done({
                        sender: m,
                        node: g && g.toJSON(),
                        ancestors: [],
                        nodes: w,
                      });
                })
                .fail(function () {
                  u.done && u.done({ sender: m, nodes: [] });
                }),
              this
            );
          },
        }),
        (l.defaults = {
          containers: {
            selectable: { type: h.defaults.containers.selectableTypes },
            ui: { TargetPickerDialogTitle: h.defaults.containers.dialogTitle },
          },
          documents: {
            selectable: { type: h.defaults.documents.selectableTypes },
            ui: { TargetPickerDialogTitle: h.defaults.documents.dialogTitle },
          },
          categories: {
            start: h.defaults.categories.initialContainer,
            selectable: { type: h.defaults.categories.selectableTypes },
            ui: { TargetPickerDialogTitle: h.defaults.categories.dialogTitle },
          },
        }),
        l
      );
    }
  ),
  csui.define(
    "csui/integration/v1.widgets.wrapper",
    [
      "csui/lib/underscore",
      "csui/utils/connector",
      "csui/integration/folderbrowser/folderbrowser.widget",
      "csui/integration/target.picker/target.picker",
    ],
    function (v, d, a, h) {
      var i = window.csui;
      return (
        v.extend(i, {
          version: "2.0",
          util: { Connector: d },
          widget: { FolderBrowserWidget: a, TargetPickerDialogWidget: h },
          Connector: d,
          FolderBrowserWidget: a,
        }),
        i
      );
    }
  ),
  csui.define("csui/integration/permission.header/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/integration/permission.header/impl/nls/root/lang", {
    lblSecurityClearance: "Security clearance",
    lblSupplementalMarkings: "Supplemental markings",
  }),
  csui.define(
    "hbs!csui/integration/permission.header/impl/permission.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-permissions-rightbar-view">
  <div class="csui-secuirity-clearance"><label>` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "lblSecurityClearance") ||
                  (e != null ? n(e, "lblSecurityClearance") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "lblSecurityClearance",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 47 },
                      end: { line: 2, column: 71 },
                    },
                  })
                : t)
            ) +
            `</label><span>Secret</span
  ></div>
  <div class="csui-supplimental-markings"><label>` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "lblSupplementalMarkings") ||
                  (e != null ? n(e, "lblSupplementalMarkings") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "lblSupplementalMarkings",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 49 },
                      end: { line: 4, column: 76 },
                    },
                  })
                : t)
            ) +
            `</label><span
  >Contractor; For official use only
  </span
></div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_integration_permission.header_impl_permission.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/integration/permission.header/impl/permission.header",
    [],
    function () {}
  ),
  csui.define(
    "csui/integration/permission.header/permission.header.view",
    [
      "module",
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/integration/permission.header/impl/nls/lang",
      "hbs!csui/integration/permission.header/impl/permission.header",
      "css!csui/integration/permission.header/impl/permission.header",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = i.ItemView.extend({
        template: l,
        templateHelpers: function () {
          return {
            lblSecurityClearance: e.lblSecurityClearance,
            lblSupplementalMarkings: e.lblSupplementalMarkings,
          };
        },
        constructor: function (t) {
          t || (t = {}), i.ItemView.prototype.constructor.call(this, t);
        },
      });
      return u;
    }
  ),
  csui.define(
    "css!csui/integration/permission/table/cells/impl/security.permission.cell",
    [],
    function () {}
  ),
  csui.define(
    "csui/integration/permission/table/cells/security.permission.cell",
    [
      "csui/controls/table/cells/cell/cell.view",
      "csui/controls/table/cells/cell.registry",
      "css!csui/integration/permission/table/cells/impl/security.permission.cell",
    ],
    function (v, d) {
      "use strict";
      var a = v.extend(
        {
          renderValue: function () {
            var h = this.getValueText();
            h === "true"
              ? this.$el.append(
                  '<span class="csui-icon icon-true icon-checkmark-green"></span>'
                )
              : h === "false"
              ? this.$el.append(
                  '<span class="csui-icon icon-false circle_delete"></span>'
                )
              : this.$el.text(h);
          },
        },
        { hasFixedWidth: !0 }
      );
      return (
        d.registerByColumnKey("security_clearance", a),
        d.registerByColumnKey("supplemental_markings", a),
        a
      );
    }
  ),
  csui.define(
    "csui/integration/permission/table/permission.table.columns",
    ["csui/lib/underscore"],
    function (v) {
      var d = [
        { key: "security_clearance", sequence: 31, permanentColumn: !0 },
        { key: "supplemental_markings", sequence: 32, permanentColumn: !0 },
      ];
      return d;
    }
  ),
  csui.define(
    "csui/integration/folderbrowser/impl/nls/folderbrowser.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/integration/folderbrowser/impl/nls/root/folderbrowser.manifest",
    {
      BackButtonToolItem: "Go Back",
      PageWidgetToolItem: "Open Full Page Container",
    }
  ),
  csui.define(
    "css!csui/integration/folderbrowser/impl/icons",
    [],
    function () {}
  ),
  csui.define(
    "csui/integration/folderbrowser/impl/nodestable.toolitems",
    [
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/controls/toolbar/toolitems.factory",
      "i18n!csui/integration/folderbrowser/impl/nls/folderbrowser.manifest",
      "css!csui/integration/folderbrowser/impl/icons",
    ],
    function (v, d, a, h) {
      var i = {
        leftToolbar: [
          {
            signature: "Back",
            name: h.BackButtonToolItem,
            icon: "icon arrow_back csui-icon-go-previous-node csui-no-hover-effect",
          },
        ],
        rightToolbar: [
          {
            signature: "Page",
            name: h.PageWidgetToolItem,
            icon: "icon csui-icon-open-full-page",
            group: "main",
            options: { hAlign: "right" },
          },
        ],
      };
      return i;
    }
  ),
  csui.define(
    "csui/widgets/search.results/impl/search.results.factory",
    ["csui/utils/contexts/factories/search.results.factory"],
    function (v) {
      var d = v.extend({
        constructor: function (h, i) {
          v.prototype.constructor.apply(this, arguments),
            console.warn(
              'warning: "csui/widgets/search.results/impl/search.results.factory" has been deprecated. Use "csui/utils/contexts/factories/search.results.factory'
            );
        },
      });
      return d;
    }
  ),
  csui.define(
    "css!csui/widgets/search.results/impl/search.results",
    [],
    function () {}
  ),
  csui.define(
    "csui/utils/testutils/async.test.utils",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/models/view.state.model",
    ],
    function (v, d, a, h) {
      var i = [];
      function e(u, r, t) {
        var n = a.Deferred(),
          s = window.jasmine ? window.jasmine.DEFAULT_TIMEOUT_INTERVAL : 1e4,
          o = {},
          c = 0,
          m,
          f;
        if (
          ((s -= s / 10),
          typeof t == "number"
            ? (o.interval = t)
            : typeof t == "boolean"
            ? (o.removal = t)
            : (o = t),
          (t = d.extend({ interval: 50, removal: !1, length: 0 }, o)),
          !u || !r)
        )
          console.warn("parent or child selector missing"), n.reject();
        else if (
          ((m = a(u).find(r)),
          t.removal ? m.length === t.length : m.length > t.length)
        )
          n.resolve(m);
        else {
          var g = new Error('Waiting for element "' + r + '" timed out.');
          (f = setInterval(function () {
            if (
              ((c += t.interval),
              (m = a(u).find(r)),
              t.removal ? m.length === t.length : m.length > t.length)
            )
              l(f), n.resolve(m);
            else if (c >= s) throw (l(f), g);
          }, t.interval)),
            i.push(f);
        }
        return n.promise();
      }
      function l(u) {
        clearInterval(u), (i = d.without(i, u));
      }
      return {
        asyncElement: e,
        cancelAllAsync: function () {
          i.length > 0 &&
            console.error(
              "Total " + i.length + " was running. Tests needs to be fixed."
            ),
            i.forEach(function (u) {
              clearInterval(u);
            }),
            (i = []);
        },
        restoreEnvironment: function () {
          a("body").empty(), h.clean();
        },
        waitFor: function (u, r, t) {
          t === void 0 && (t = 1e3);
          var n = a.Deferred();
          if (u()) n.resolve();
          else
            var s = {
              clear: function () {
                this.timeout &&
                  (clearTimeout(this.timeout), delete this.timeout),
                  this.interval &&
                    (clearInterval(this.interval), delete this.interval);
              },
              interval: setInterval(function () {
                u() && (s.clear(), n.resolve());
              }, 100),
              timeout: setTimeout(function () {
                s.clear(), n.reject(s.error);
              }, t),
              error: new Error(
                d.str.sformat(
                  "Timeout {0} reached while waiting for {1}.",
                  t,
                  r
                )
              ),
            };
          return n.promise();
        },
        findHidingElement: function (u, r) {
          if (!u) return null;
          var t = window.getComputedStyle(u),
            n = u.getBoundingClientRect(),
            s = n.x + n.width / 2,
            o = n.y + n.height / 2;
          if (t.display === "none" || n.width === 0 || n.height === 0) return u;
          r = r || document.body;
          for (var c = u.parentElement; c; ) {
            var m = window.getComputedStyle(c),
              f = c.getBoundingClientRect(),
              g = m["overflow-x"] !== "clip" && m["overflow-x"] !== "hidden",
              w = m["overflow-y"] !== "clip" && m["overflow-y"] !== "hidden",
              b = g || (f.width && f.left <= s && s <= f.right),
              C = w || (f.height && f.top <= o && o <= f.bottom);
            if (m.display === "none" || !b || !C) return c;
            if (c === r) return;
            c = c.parentElement;
          }
        },
        isElementVisible: function (u, r) {
          var t = this.findHidingElement(u, r) === void 0;
          return t;
        },
      };
    }
  ),
  csui.define(
    "csui/widgets/favorites2.table/toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/nls/localized.strings",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/favorites.table/toolbaritems",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = {
        tableHeaderToolbar: new h(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              { signature: "View", name: a.ToolbarItemView, flyout: "view" },
            ],
            edit: [
              { signature: "CopyLink", name: a.ToolbarItemCopyLink },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                flyout: "edit",
                promoted: !0,
              },
              { signature: "EditWebDAV", name: "EditWebDAV", flyout: "edit" },
            ],
            share: [
              {
                signature: "SendTo",
                name: a.ToolbarItemSendTo,
                flyout: "sendto",
                group: "share",
              },
              {
                signature: "Share",
                name: a.ToolbarItemShare,
                flyout: "share",
                promoted: !0,
                group: "share",
              },
              {
                signature: "EmailLink",
                name: a.ToolbarItemEmailLink,
                flyout: "sendto",
                promoted: !0,
                group: "share",
              },
            ],
            main: [
              {
                signature: "FavoriteRename",
                name: a.ToolbarItemRename,
                onlyInTouchBrowser: !0,
              },
              { signature: "permissions", name: a.ToolbarItemPermissions },
              { signature: "Download", name: a.ToolbarItemDownload },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              { signature: "Copy", name: a.ToolbarItemCopy },
              { signature: "Move", name: a.ToolbarItemMove },
              { signature: "AddVersion", name: a.ToolbarItemAddVersion },
              { signature: "Collect", name: a.ToolbarCollect },
              { signature: "ZipAndDownload", name: a.MenuItemZipAndDownload },
            ],
            shortcut: [
              {
                signature: "OriginalCopyLink",
                name: a.ToolbarItemOriginalCopyLink,
              },
              { signature: "OriginalEdit", name: a.ToolbarItemOriginalEdit },
              {
                signature: "OriginalEmailLink",
                name: a.ToolbarItemOriginalShare,
              },
              {
                signature: "OriginalReserveDoc",
                name: d.ToolbarItemOriginalReserve,
              },
              {
                signature: "OriginalUnreserveDoc",
                name: d.ToolbarItemOriginalUnreserve,
              },
              { signature: "OriginalCopy", name: a.ToolbarItemOriginalCopy },
              { signature: "OriginalMove", name: a.ToolbarItemOriginalMove },
              {
                signature: "OriginalAddVersion",
                name: a.ToolbarItemAddVersion,
              },
              {
                signature: "OriginalDownload",
                name: a.ToolbarItemOriginalDownload,
              },
            ],
          },
          {
            maxItemsShown: 15,
            dropDownText: a.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
            lazyActions: !0,
          }
        ),
        inlineActionbar: new h(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: a.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            edit: [
              {
                signature: "CopyLink",
                name: a.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                flyout: "edit",
                promoted: !0,
                iconName: "csui_action_edit32",
              },
              { signature: "EditWebDAV", name: "EditWebDAV", flyout: "edit" },
            ],
            share: [
              {
                signature: "Share",
                name: a.MenuItemShare,
                iconName: "csui_action_share32",
                flyout: "share",
              },
              {
                signature: "SendTo",
                name: a.ToolbarItemSendTo,
                iconName: "csui_action_send_to32",
                flyout: "sendto",
              },
              {
                signature: "EmailLink",
                name: a.ToolbarItemEmailLink,
                flyout: "sendto",
              },
            ],
            other: [
              {
                signature: "permissions",
                name: a.ToolbarItemPermissions,
                iconName: "csui_action_view_perms32",
              },
              {
                signature: "FavoriteRename",
                name: a.ToolbarItemRenameFavorite,
                iconName: "csui_action_rename32",
              },
              {
                signature: "Download",
                name: a.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              {
                signature: "ReserveDoc",
                name: d.ToolbarItemReserve,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnreserveDoc",
                name: d.ToolbarItemUnreserve,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "Copy",
                name: a.ToolbarItemCopy,
                iconName: "csui_action_copy32",
              },
              {
                signature: "Move",
                name: a.ToolbarItemMove,
                iconName: "csui_action_move32",
              },
              {
                signature: "AddVersion",
                name: a.ToolbarItemAddVersion,
                iconName: "csui_action_add_version32",
              },
              {
                signature: "Collect",
                name: a.ToolbarCollect,
                iconName: "csui_action_collect32",
              },
              {
                signature: "ZipAndDownload",
                name: a.MenuItemZipAndDownload,
                iconName: "csui_action_download32",
              },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownText: a.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
        dropdownMenuListInProperties: new h(
          {
            inspect: [
              { signature: "Properties", name: a.ToolbarItemInformation },
            ],
            main: [
              { signature: "CopyLink", name: a.ToolbarItemCopyLink },
              { signature: "Edit", name: a.ToolbarItemEdit },
              { signature: "EmailLink", name: a.ToolbarItemEmailLinkShort },
              { signature: "Download", name: a.ToolbarItemDownload },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              { signature: "Copy", name: a.ToolbarItemCopy },
              { signature: "Move", name: a.ToolbarItemMove },
              { signature: "AddVersion", name: a.ToolbarItemAddVersion },
              { signature: "Collect", name: a.ToolbarCollect },
              { signature: "permissions", name: a.ToolbarItemPermissions },
            ],
            shortcut: [
              {
                signature: "OriginalCopyLink",
                name: a.ToolbarItemOriginalCopyLink,
              },
              { signature: "OriginalEdit", name: a.ToolbarItemOriginalEdit },
              {
                signature: "OriginalEmailLink",
                name: a.ToolbarItemOriginalShare,
              },
              {
                signature: "OriginalReserveDoc",
                name: d.ToolbarItemOriginalReserve,
              },
              {
                signature: "OriginalUnreserveDoc",
                name: d.ToolbarItemOriginalUnreserve,
              },
              { signature: "OriginalCopy", name: a.ToolbarItemOriginalCopy },
              { signature: "OriginalMove", name: a.ToolbarItemOriginalMove },
              {
                signature: "OriginalAddVersion",
                name: a.ToolbarItemAddVersion,
              },
              {
                signature: "OriginalDownload",
                name: a.ToolbarItemOriginalDownload,
              },
            ],
          },
          {
            maxItemsShown: 0,
            dropDownIconName: "csui_action_caret_down32",
            addGroupSeparators: !1,
          }
        ),
      };
      return (
        e &&
          v.each(e, function (u) {
            v.each(u, function (r, t) {
              var n = l[t];
              if (
                (!n && t === "otherToolbar" && (n = l.tableHeaderToolbar), !n)
              )
                throw new Error("Invalid target toolbar: " + t);
              v.each(r, function (s) {
                (s = new i(s)), n.addItem(s);
              });
            });
          }),
        l
      );
    }
  ),
  csui.define(
    "csui/widgets/favorites2.table/toolbaritems.masks",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = ["tableHeaderToolbar", "inlineActionbar"];
      function e() {
        var l = v.config(),
          u = new h();
        this.toolbars = d.reduce(
          i,
          function (r, t) {
            var n = new a(u, { normalize: !1 });
            return (
              d.each(l, function (s, o) {
                (s = s[t]), s && n.extendMask(s);
              }),
              n.storeMask(),
              (r[t] = n),
              r
            );
          },
          {}
        );
      }
      return (e.toolbars = i), e;
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessedtable/toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/nls/localized.strings",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/recentlyaccessedtable/toolbaritems",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = {
        filterToolbar: new h(
          {
            filter: [
              {
                signature: "Filter",
                name: a.ToolbarItemFilter,
                iconName: "csui_action_filter32",
              },
            ],
          },
          { addTrailingDivider: !1 }
        ),
        tableHeaderToolbar: new h(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [],
            edit: [
              { signature: "CopyLink", name: a.ToolbarItemCopyLink },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                flyout: "edit",
                promoted: !0,
              },
              { signature: "EditWebDAV", name: "EditWebDAV", flyout: "edit" },
            ],
            share: [],
            main: [
              { signature: "permissions", name: a.ToolbarItemPermissions },
              { signature: "Download", name: a.ToolbarItemDownload },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
              },
              { signature: "Copy", name: a.ToolbarItemCopy },
              { signature: "Move", name: a.ToolbarItemMove },
              { signature: "AddVersion", name: a.ToolbarItemAddVersion },
              { signature: "Collect", name: a.ToolbarCollect },
              { signature: "ZipAndDownload", name: a.MenuItemZipAndDownload },
            ],
            shortcut: [
              {
                signature: "OriginalCopyLink",
                name: a.ToolbarItemOriginalCopyLink,
              },
              { signature: "OriginalEdit", name: a.ToolbarItemOriginalEdit },
              {
                signature: "OriginalEmailLink",
                name: a.ToolbarItemOriginalShare,
              },
              {
                signature: "OriginalReserveDoc",
                name: d.ToolbarItemOriginalReserve,
              },
              {
                signature: "OriginalUnreserveDoc",
                name: d.ToolbarItemOriginalUnreserve,
              },
              { signature: "OriginalCopy", name: a.ToolbarItemOriginalCopy },
              { signature: "OriginalMove", name: a.ToolbarItemOriginalMove },
              {
                signature: "OriginalAddVersion",
                name: a.ToolbarItemAddVersion,
              },
              {
                signature: "OriginalDownload",
                name: a.ToolbarItemOriginalDownload,
              },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
        inlineActionbar: new h(
          {
            inspect: [
              {
                signature: "Properties",
                name: a.ToolbarItemInfo,
                iconName: "csui_action_properties32",
              },
            ],
            info: [],
            edit: [
              {
                signature: "CopyLink",
                name: a.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
              {
                signature: "Edit",
                name: a.ToolbarItemEdit,
                iconName: "csui_action_edit32",
              },
            ],
            share: [
              {
                signature: "Share",
                name: a.MenuItemShare,
                iconName: "csui_action_share32",
                flyout: "share",
              },
            ],
            other: [
              {
                signature: "permissions",
                name: a.ToolbarItemPermissions,
                iconName: "csui_action_view_perms32",
              },
              {
                signature: "Download",
                name: a.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              {
                signature: "ReserveDoc",
                name: d.ToolbarItemReserve,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnreserveDoc",
                name: d.ToolbarItemUnreserve,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
                iconName: "csui_action_reserve32",
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
                iconName: "csui_action_unreserve32",
              },
              {
                signature: "Copy",
                name: a.ToolbarItemCopy,
                iconName: "csui_action_copy32",
              },
              {
                signature: "Move",
                name: a.ToolbarItemMove,
                iconName: "csui_action_move32",
              },
              {
                signature: "AddVersion",
                name: a.ToolbarItemAddVersion,
                iconName: "csui_action_add_version32",
              },
              {
                signature: "Collect",
                name: a.ToolbarCollect,
                iconName: "csui_action_collect32",
              },
              {
                signature: "ZipAndDownload",
                name: a.MenuItemZipAndDownload,
                iconName: "csui_action_download32",
              },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownText: a.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
        dropdownMenuListInProperties: new h(
          {
            inspect: [
              { signature: "Properties", name: a.ToolbarItemInformation },
            ],
            main: [
              { signature: "CopyLink", name: a.ToolbarItemCopyLink },
              { signature: "Edit", name: a.ToolbarItemEdit },
              { signature: "EmailLink", name: a.ToolbarItemEmailLinkShort },
              { signature: "Download", name: a.ToolbarItemDownload },
              { signature: "ReserveDoc", name: d.ToolbarItemReserve },
              { signature: "UnreserveDoc", name: d.ToolbarItemUnreserve },
              {
                signature: "RequestReservation",
                name: a.ToolbarItemRequestReservation,
              },
              {
                signature: "UnrequestReservation",
                name: a.ToolbarItemUnrequestReservation,
              },
              { signature: "Copy", name: a.ToolbarItemCopy },
              { signature: "Move", name: a.ToolbarItemMove },
              { signature: "AddVersion", name: a.ToolbarItemAddVersion },
              { signature: "Collect", name: a.ToolbarCollect },
            ],
            shortcut: [
              {
                signature: "OriginalCopyLink",
                name: a.ToolbarItemOriginalCopyLink,
              },
              { signature: "OriginalEdit", name: a.ToolbarItemOriginalEdit },
              {
                signature: "OriginalEmailLink",
                name: a.ToolbarItemOriginalShare,
              },
              {
                signature: "OriginalReserveDoc",
                name: d.ToolbarItemOriginalReserve,
              },
              {
                signature: "OriginalUnreserveDoc",
                name: d.ToolbarItemOriginalUnreserve,
              },
              { signature: "OriginalCopy", name: a.ToolbarItemOriginalCopy },
              { signature: "OriginalMove", name: a.ToolbarItemOriginalMove },
              {
                signature: "OriginalAddVersion",
                name: a.ToolbarItemAddVersion,
              },
              {
                signature: "OriginalDownload",
                name: a.ToolbarItemOriginalDownload,
              },
            ],
          },
          {
            maxItemsShown: 0,
            dropDownIconName: "csui_action_caret_down32",
            addGroupSeparators: !1,
          }
        ),
      };
      return (
        e &&
          v.each(e, function (u) {
            v.each(u, function (r, t) {
              var n = l[t];
              if (
                (!n && t === "otherToolbar" && (n = l.tableHeaderToolbar), !n)
              )
                throw new Error("Invalid target toolbar: " + t);
              v.each(r, function (s) {
                (s = new i(s)), n.addItem(s);
              });
            });
          }),
        l
      );
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessedtable/toolbaritems.masks",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = ["tableHeaderToolbar", "inlineActionbar"];
      function e() {
        var l = v.config(),
          u = new h();
        this.toolbars = d.reduce(
          i,
          function (r, t) {
            var n = new a(u, { normalize: !1 });
            return (
              d.each(l, function (s, o) {
                (s = s[t]), s && n.extendMask(s);
              }),
              n.storeMask(),
              (r[t] = n),
              r
            );
          },
          {}
        );
      }
      return (e.toolbars = i), e;
    }
  ),
  csui.define("csui/widgets/favorites2.table/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/favorites2.table/impl/nls/root/lang", {
    dialogTitle: "Favorites",
    deleteGroupConfirmationTitle: "Delete group",
    deleteGroupConfirmationText:
      'Are you sure you want to delete group "{0}"? All the favored items in this group will also be deleted.',
    deleteGroupButtonLabel: "Delete",
    deleteGroupButtonAria: "Delete favorite group",
    emptyGroupText:
      "Adding content to your Favorites list makes it a breeze to find.",
    editGroupButtonLabel: "Edit",
    editGroupButtonAria: "Edit favorite group name",
    errorFavoritesSaveFailed: "Saving favorites failed.",
    errorFavoriteGroupSaveFailed: "Saving favorites group failed.",
    favoriteColumnNameTitle: "Favorite name",
    favoritesGroupAria: "{0}, Favorites Group",
    favoritesEmptyGroupAria: "{0}, Empty Favorites Group",
    favoriteGroupsNavAria: "Favorites Groups",
    fav_ungrouped: "Ungrouped",
    fav_ungroupedAria: "Ungrouped favorites",
    groupAdd: "Add group",
    groupAddButtonTitle: "Add group of favorites",
    groupHint1:
      "To personalize the Favorites tile, you can push your favorite group to the top.",
    groupHint2:
      "You can also re-order items within the groups, so that your most favorite items appear at the top of the Favorites tile.",
    addFav: "Add Favorite",
    removeFav: "Remove Favorite",
    updateFavoriteFailTitle: "Update Favorite",
    updateFavoriteFailMessage: `Failed to update favorite for node "{0}". 

{1}`,
    addFavoriteNameLabel: "Favorite name",
    addFavoriteNamePlaceHolder: "Enter name",
    addFavoriteGroupLabel: "Group",
    addFavoriteAddButtonLabel: "Add",
    addFavoriteCancelButtonLabel: "Cancel",
    addFavoriteCancelButtonAria: "Cancel editing favorite group name",
    nameErrorMaxLengthExceed: "Name cannot be longer than 248 characters.",
    nameErrorContainSemiColon: "Name cannot contain a colon.",
    startEditMode: "Edit",
    endEditMode: "Done",
    favoritesTableAria: "Favorites",
  }),
  csui.define(
    "hbs!csui/widgets/favorites2.table/impl/favorites2.groups.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<button title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "groupAddButtonTitle") ||
                  (e != null ? n(e, "groupAddButtonTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "groupAddButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 15 },
                      end: { line: 1, column: 38 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "groupAddButtonTitle") ||
                  (e != null ? n(e, "groupAddButtonTitle") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "groupAddButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 52 },
                      end: { line: 1, column: 75 },
                    },
                  })
                : t)
            ) +
            `" class="binf-btn csui-groups-header-plus">
  <span class="icon icon-toolbarAdd"></span>
</button><span class="csui-groups-header-text">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "text") || (e != null ? n(e, "text") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "text",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 47 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</span>
<button
    class="binf-btn csui-groups-header-edit-mode csui-groups-header-edit-on">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "startEditMode") ||
                  (e != null ? n(e, "startEditMode") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "startEditMode",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 77 },
                      end: { line: 5, column: 94 },
                    },
                  })
                : t)
            ) +
            `</button>
<button
    class="binf-btn csui-groups-header-edit-mode csui-groups-header-edit-off">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "endEditMode") ||
                  (e != null ? n(e, "endEditMode") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "endEditMode",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 78 },
                      end: { line: 7, column: 93 },
                    },
                  })
                : t)
            ) +
            `</button>
`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites2.table_impl_favorites2.groups.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/widgets/favorites2.table/impl/favorites2.groups.header.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.groups.header.view",
    [
      "module",
      "csui/lib/marionette",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
      "hbs!csui/widgets/favorites2.table/impl/favorites2.groups.header",
      "css!csui/widgets/favorites2.table/impl/favorites2.groups.header.view",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = d.ItemView.extend({
        className: "csui-favorite-groups-header",
        template: h,
        initialize: function (e) {
          (this._useEditMode = e && e.useEditMode),
            (this._isGroupsEditing = !1);
        },
        ui: {
          addButton: ".csui-groups-header-plus",
          editModeOn: ".csui-groups-header-edit-on",
          editModeOff: ".csui-groups-header-edit-off",
        },
        events: {
          "click @ui.addButton": "_addItem",
          "click @ui.editModeOn": "_switchEditModeOn",
          "click @ui.editModeOff": "_switchEditModeOff",
        },
        templateHelpers: function () {
          return {
            groupAddButtonTitle: a.groupAddButtonTitle,
            text: a.groupAdd,
            startEditMode: a.startEditMode,
            endEditMode: a.endEditMode,
            hasEditModeSwitch: this._useEditMode,
          };
        },
        _addItem: function (e) {
          e.preventDefault(),
            e.stopPropagation(),
            this.triggerMethod("add:item");
        },
        _switchEditModeOn: function (e) {
          e.preventDefault(),
            e.stopPropagation(),
            this.triggerMethod("toggleEditMode:on");
        },
        _switchEditModeOff: function (e) {
          e.preventDefault(),
            e.stopPropagation(),
            this.triggerMethod("toggleEditMode:off");
        },
        isAddEnabled: function (e) {
          return (
            e !== void 0 &&
              ((this._isAddEnabled = e),
              e
                ? this.ui.addButton.removeClass("binf-disabled")
                : this.ui.addButton.addClass("binf-disabled")),
            !!this._isAddEnabled
          );
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites2.table/impl/favorites2.group",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            '  <input type="text" value="' +
            i.escapeExpression(
              ((n =
                (n = s(l, "name") || (e != null ? s(e, "name") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 28 },
                      end: { line: 2, column: 36 },
                    },
                  })
                : n)
            ) +
            '" placeholder="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "namePlaceholder") ||
                  (e != null ? s(e, "namePlaceholder") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "namePlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 70 },
                    },
                  })
                : n)
            ) +
            `"
         class="binf-flex-row binf-form-control csui-favorite-group-input-name">
  <button type="button" class="csui-btn-save" disabled title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 62 },
                      end: { line: 4, column: 81 },
                    },
                  })
                : n)
            ) +
            '" aria-label="' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "SaveEditTooltip") ||
                  (e != null ? s(e, "SaveEditTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "SaveEditTooltip",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 95 },
                      end: { line: 4, column: 114 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_confirm32",
              },
              loc: {
                start: { line: 5, column: 4 },
                end: { line: 5, column: 78 },
              },
            })) != null
              ? t
              : "") +
            `
  </button>
  <button type="button" class="csui-btn-cancel" title="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 55 },
                      end: { line: 7, column: 76 },
                    },
                  })
                : n)
            ) +
            `"
          aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "EditCancelTooltip") ||
                  (e != null ? s(e, "EditCancelTooltip") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "EditCancelTooltip",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 22 },
                      end: { line: 8, column: 43 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            ((t = (
              s(l, "icon-v2") ||
              (e && s(e, "icon-v2")) ||
              i.hooks.helperMissing
            ).call(e ?? (i.nullContext || {}), {
              name: "icon-v2",
              hash: {
                states: "true",
                size: "normal",
                iconName: "csui_action_cancel32",
              },
              loc: {
                start: { line: 9, column: 4 },
                end: { line: 9, column: 77 },
              },
            })) != null
              ? t
              : "") +
            `
  </button>
`
          );
        },
        3: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `  <div class="csui-favorite-group-selection-marker"></div>
  <div class="csui-favorite-group-draggable-handle">
    <span class=" icon icon-draggable-handle"></span>
  </div>
  <a role="button" href="#" class="binf-flex-row csui-favorite-group-name-link" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "groupNameAria") ||
                  (e != null ? n(e, "groupNameAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "groupNameAria",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 92 },
                      end: { line: 16, column: 109 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 118 },
                      end: { line: 16, column: 126 },
                    },
                  })
                : t)
            ) +
            `"
     tabindex="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "tabindex") || (e != null ? n(e, "tabindex") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "tabindex",
                    hash: {},
                    loc: {
                      start: { line: 17, column: 15 },
                      end: { line: 17, column: 27 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="csui-favorite-group-name">` +
            i.escapeExpression(
              ((t =
                (t = n(l, "name") || (e != null ? n(e, "name") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 43 },
                      end: { line: 18, column: 51 },
                    },
                  })
                : t)
            ) +
            `</span>
  </a>
  <button type="button" class="binf-btn csui-btn-action csui-btn-edit-start"
          aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "EditStartAria") ||
                  (e != null ? n(e, "EditStartAria") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "EditStartAria",
                    hash: {},
                    loc: {
                      start: { line: 21, column: 22 },
                      end: { line: 21, column: 39 },
                    },
                  })
                : t)
            ) +
            '" tabindex="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "tabindex") || (e != null ? n(e, "tabindex") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "tabindex",
                    hash: {},
                    loc: {
                      start: { line: 21, column: 51 },
                      end: { line: 21, column: 63 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="icon icon-edit" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "EditStartTooltip") ||
                  (e != null ? n(e, "EditStartTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "EditStartTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 40 },
                      end: { line: 22, column: 60 },
                    },
                  })
                : t)
            ) +
            `"></span>
  </button>
  <button type="button" class="binf-btn csui-btn-action csui-btn-delete"
          aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "DeleteAria") || (e != null ? n(e, "DeleteAria") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "DeleteAria",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 22 },
                      end: { line: 25, column: 36 },
                    },
                  })
                : t)
            ) +
            '" tabindex="' +
            i.escapeExpression(
              ((t =
                (t = n(l, "tabindex") || (e != null ? n(e, "tabindex") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "tabindex",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 48 },
                      end: { line: 25, column: 60 },
                    },
                  })
                : t)
            ) +
            `">
    <span class="icon icon-circle-close" title="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "DeleteTooltip") ||
                  (e != null ? n(e, "DeleteTooltip") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "DeleteTooltip",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 48 },
                      end: { line: 26, column: 65 },
                    },
                  })
                : t)
            ) +
            `"></span>
  </button>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (t = n(l, "if").call(
            e ?? (i.nullContext || {}),
            e != null ? n(e, "isRename") : e,
            {
              name: "if",
              hash: {},
              fn: i.program(1, r, 0),
              inverse: i.program(3, r, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 28, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites2.table_impl_favorites2.group",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/widgets/favorites2.table/impl/favorites2.groups.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.group.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/hammer",
      "csui/utils/log",
      "csui/utils/base",
      "csui/dialogs/modal.alert/modal.alert",
      "hbs!csui/widgets/favorites2.table/impl/favorites2.group",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
      "css!csui/widgets/favorites2.table/impl/favorites2.groups.view",
    ],
    function (v, d, a, h, i, e, l, u, r, t) {
      "use strict";
      var n = h.ItemView.extend({
        className: "csui-favorite-group",
        template: r,
        tagName: "li",
        initialize: function (s) {
          (this.parent = s.parent),
            (this.groupsView = s.groupsView),
            (this._dragData = s.dragData),
            (this._useEditMode = s.useEditMode),
            (this._dragAndDropEnabled = s.dragAndDropEnabled);
        },
        ui: {
          groupNameButton: ".csui-favorite-group-name-link",
          nameInput: ".csui-favorite-group-input-name",
          saveButton: ".csui-btn-save",
          cancelButton: ".csui-btn-cancel",
          startEditButton: ".csui-btn-edit-start",
          deleteButton: ".csui-btn-delete",
        },
        templateHelpers: function () {
          var s = this.model.get("name");
          return {
            tabindex:
              this.model.get("isTabable") && !this._isReadonly() ? "0" : "-1",
            isRename: this.model.get("isRename"),
            name: s,
            groupNameAria:
              s == t.fav_ungrouped
                ? t.fav_ungroupedAria
                : a.str.sformat(t.favoritesGroupAria, s),
            namePlaceholder: t.addFavoriteNamePlaceHolder,
            EditCancelTooltip: t.addFavoriteCancelButtonLabel,
            EditCancelAria: t.addFavoriteCancelButtonAria,
            SaveEditTooltip: t.addFavoriteAddButtonLabel,
            EditStartTooltip: t.editGroupButtonLabel,
            EditStartAria: t.editGroupButtonAria,
            DeleteTooltip: t.deleteGroupButtonLabel,
            DeleteAria: t.deleteGroupButtonAria,
          };
        },
        modelEvents: { change: "render" },
        onRender: function () {
          var s = this.className;
          this.model.get("isSelected") && (s += " binf-active");
          var o = this.model.get("isSingleGroupEditing"),
            c = this.model.get("isRename");
          c && (s += " csui-favorite-group-rename");
          var m = this._isReadonly();
          m && (s += " csui-favorite-group-readonly"),
            this.dragStarted && (s += " csui-dragstarted");
          var f = !(
            m ||
            c ||
            o ||
            this._useEditMode ||
            this.dragStarted ||
            !this._dragAndDropEnabled
          );
          this.$el.attr("draggable", f),
            this.$el
              .find("a.csui-favorite-group-name-link")
              .attr("draggable", f),
            this.$el.attr("class", s),
            this._useEditMode && !m && !c && this._assignTouchControl(),
            this.model.isNew() &&
              this.model.get("isRename") &&
              this._startEditing();
        },
        onDomRefresh: function () {
          if (this.model.isNew() || this.model.get("isRename"))
            this.ui.nameInput.trigger("focus"), (this._hasFocus = !0);
          else if (this._hasFocus && this.isRendered) {
            var s = this;
            setTimeout(function () {
              s.isRendered && (s.model.set("isTabable", !0), s._setFocus());
            }, 100);
          }
        },
        onDestroy: function () {
          this.hammer && this.hammer.destroy();
        },
        _startDragOperation: function () {
          this._dragData.clear();
          var s = this.model.get("tab_id");
          return s !== -1
            ? (this._dragData.set("groupId", s), (this.dragStarted = !0), !0)
            : !1;
        },
        _stopDragOperation: function () {
          (this.dragStarted = !1),
            this._dragData.clear(),
            this._removeDragline(),
            this._removeDragStarted();
        },
        _moveItemsToThisGroup: function () {
          var s,
            o = this.model.get("tab_id");
          if (o !== void 0) {
            var c = this.model.get("isGroupsEditing");
            if (
              !c &&
              this._dragData.get("favorites") &&
              this._dragData.get("favorites").length &&
              this._dragData.get("groupId") !== void 0
            )
              return (
                (s = {
                  idSources: this._dragData.get("favorites"),
                  tabIdSource: this._dragData.get("groupId"),
                  tabIdDestination: o,
                }),
                this.trigger("dropped:favorite", s),
                s.savePromise
              );
            if (this._dragData.get("groupId") !== void 0)
              return (
                (s = {
                  tabIdSource: this._dragData.get("groupId"),
                  tabIdDestination: o,
                  dropAfter: this._dropAfter,
                }),
                this.trigger("group:dropped", s),
                s.savePromise
              );
            var m = d.Deferred();
            return m.reject(), m.promise();
          }
        },
        _selectThisGroup: function () {
          var s = { groupModel: this.model };
          this.triggerMethod("before:group:selected", s),
            s.cancel || this.triggerMethod("group:selected", s);
        },
        _isReadonly: function () {
          var s =
            this.model.get("tab_id") === -1 || this.model.get("isReadonly");
          return s;
        },
        isSaveEnabled: function (s) {
          return (s = s.trim()), !(!s.length || s === this.model.get("name"));
        },
        events: {
          "click @ui.cancelButton": function (s) {
            s.preventDefault(), s.stopPropagation(), this._cancelEdit();
          },
          "click @ui.startEditButton": function (s) {
            s.preventDefault(), s.stopPropagation(), this._startEditing();
          },
          "click @ui.deleteButton": function (s) {
            s.preventDefault(), s.stopPropagation();
            var o = this,
              c = this.model.get("name");
            u.confirmQuestion(
              a.str.sformat(t.deleteGroupConfirmationText, c),
              t.deleteGroupConfirmationTitle,
              { buttons: u.OkCancel }
            )
              .fail(function () {
                o._setFocus();
              })
              .done(function (m) {
                o.triggerMethod("group:delete", { model: o.model });
              });
          },
          "focus @ui.groupNameButton": function (s) {
            (this._hasFocus = !0), this.trigger("group:focused");
          },
          "focus @ui.startEditButton": function (s) {
            this._hasStartEditButtonFocus = !0;
          },
          "focusout @ui.startEditButton": function (s) {
            this._hasStartEditButtonFocus = !1;
          },
          "focus @ui.deleteButton": function (s) {
            this._hasDeleteButtonFocus = !0;
          },
          "focusout @ui.deleteButton": function (s) {
            this._hasDeleteButtonFocus = !1;
          },
          "click @ui.saveButton": function (s) {
            this._save();
          },
          "input @ui.nameInput": function (s) {
            if (this.ui.saveButton.length) {
              var o = this.ui.nameInput.val().trim(),
                c = !1;
              (c = this.isSaveEnabled(s.target.value)),
                this.ui.saveButton.prop("disabled", !c);
            }
            this.refreshTabableElements();
          },
          "keydown @ui.nameInput": function (s) {
            switch (s.keyCode) {
              case 13:
                s.preventDefault(), s.stopPropagation(), this._save();
                break;
              case 27:
                s.preventDefault(), s.stopPropagation(), this._cancelEdit();
                break;
            }
          },
          keydown: function (s) {
            var o = this.model.get("tab_id"),
              c = this.model.get("isRename"),
              m = l.isMacintosh();
            switch (s.keyCode) {
              case 9:
                c && this._moveTab(s);
                break;
              case 88:
                ((m && s.metaKey && !s.ctrlKey) ||
                  (!m && !s.metaKey && s.ctrlKey)) &&
                  (s.preventDefault(),
                  s.stopPropagation(),
                  this._dragData.unset("favorites"),
                  o === -1
                    ? this._dragData.unset("favorites")
                    : this._dragData.set({ groupId: o }));
                break;
              case 86:
                if (
                  (m && s.metaKey && !s.ctrlKey) ||
                  (!m && !s.metaKey && s.ctrlKey)
                ) {
                  s.preventDefault(), s.stopPropagation();
                  var f = this._dragData.get("groupId");
                  if (o === f) return;
                  this._dropAfter = !1;
                  var g = this;
                  this._moveItemsToThisGroup().then(function () {
                    g._selectThisGroup();
                  });
                }
                break;
              case 37:
                this._hasFocus &&
                  !c &&
                  (this._hasStartEditButtonFocus
                    ? (s.preventDefault(),
                      s.stopPropagation(),
                      this.ui.groupNameButton.trigger("focus"))
                    : this._hasDeleteButtonFocus &&
                      (s.preventDefault(),
                      s.stopPropagation(),
                      this.ui.startEditButton.trigger("focus")));
                break;
              case 39:
                this._hasFocus &&
                  !c &&
                  (this._hasStartEditButtonFocus
                    ? (s.preventDefault(),
                      s.stopPropagation(),
                      this.ui.deleteButton.trigger("focus"))
                    : this._hasDeleteButtonFocus ||
                      (s.preventDefault(),
                      s.stopPropagation(),
                      this.ui.startEditButton.trigger("focus")));
                break;
            }
          },
          click: function (s) {
            if (!s.ctrlKey) {
              if (
                (s.preventDefault(),
                this.model.isNew() ||
                  this.model.get("isRename") ||
                  this.model.get("isGroupsEditing"))
              )
                return;
              this._selectThisGroup();
            }
          },
          dragstart: function (s) {
            this._startDragOperation() &&
              s.originalEvent.dataTransfer.setData("text", "");
          },
          dragover: function (s) {
            if (!this.dragStarted) {
              var o = this.model.get("tab_id");
              if (o !== void 0) {
                if (
                  !this._dragData.get("favorites") ||
                  this._dragData.get("favorites").length === 0
                ) {
                  var c = this.$el.height(),
                    m = this.model.get("tab_id"),
                    f = s.offsetY > c / 2;
                  this._moveNotPossible(
                    this.model.collection,
                    this._dragData.get("groupId"),
                    m,
                    f
                  )
                    ? (this._removeDragline(),
                      (this._dropAfter = void 0),
                      s.preventDefault())
                    : f
                    ? m === -1
                      ? (this._removeDragline(), (this._dropAfter = void 0))
                      : ((this._dropAfter === void 0 ||
                          this._dropAfter === !1) &&
                          (this._removeDragline(),
                          this.$el.after(
                            '<div class="csui-favorite-group csui-dragline">'
                          ),
                          (this._dropAfter = !0)),
                        s.preventDefault())
                    : ((this._dropAfter === void 0 || this._dropAfter === !0) &&
                        (this._removeDragline(),
                        this.$el.before(
                          '<div class="csui-favorite-group csui-dragline">'
                        ),
                        (this._dropAfter = !1)),
                      s.preventDefault());
                } else if (
                  this._dragData.get("favorites") &&
                  this._dragData.get("favorites").length
                ) {
                  if (this._dragData.get("groupId") === o) return;
                  this.$el.addClass("csui-dragover"), s.preventDefault();
                }
              }
            }
          },
          drop: function (s) {
            this.$el.removeClass("csui-dragover"),
              s.preventDefault(),
              this._moveItemsToThisGroup(),
              this._removeDragline();
          },
          dragleave: function (s) {
            this._removeDragline(), this.$el.removeClass("csui-dragover");
          },
          dragend: function (s) {
            s.preventDefault(), this._stopDragOperation();
          },
        },
        refreshTabableElements: function () {
          this.tabableElements = this.$el
            .find("input:not([disabled]),  button:not([disabled])")
            .filter(":visible")
            .toArray();
        },
        _moveTab: function (s) {
          (this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
            s.target
          )),
            s.shiftKey
              ? this.currentlyFocusedElementIndex > 0
                ? ((this.currentlyFocusedElementIndex -= 1),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : ((this.currentlyFocusedElementIndex =
                    this.tabableElements.length - 1),
                  d(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
              : this.currentlyFocusedElementIndex <
                this.tabableElements.length - 1
              ? ((this.currentlyFocusedElementIndex += 1),
                d(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus"))
              : ((this.currentlyFocusedElementIndex = 0),
                d(
                  this.tabableElements[this.currentlyFocusedElementIndex]
                ).trigger("focus")),
            s.stopPropagation(),
            s.preventDefault();
        },
        _cancelEdit: function () {
          this.model.isNew()
            ? this.triggerMethod("group:delete", { model: this.model })
            : (this.model.set("isRename", !1),
              this.trigger("group:finished:editing"));
        },
        _moveNotPossible: function (s, o, c, m) {
          var f = { idSource: o, idDestination: c, moveAfterDestination: m };
          return this.trigger("group:before:dropped", f), f.cancel;
        },
        _setFocus: function () {
          var s = this;
          d(document).ready(function () {
            s.ui.groupNameButton.length &&
              s.ui.groupNameButton.trigger("focus");
          });
        },
        _assignTouchControl: function () {
          this.hammer && this.hammer.destroy();
          var s = this.model.get("isGroupsEditing");
          if (this.$el.length > 0 && !s) {
            this.hammer = new i.Manager(this.$el[0]);
            var o = new i.Press({ time: 500 });
            this.hammer.add([o]),
              this.hammer.on("press", a.bind(this._onPress, this));
          }
        },
        _onPress: function () {
          this._startEditing();
        },
        _startEditing: function () {
          this.model.set("isRename", !0),
            this.trigger("group:editing", { model: this.model }),
            this.refreshTabableElements();
        },
        _save: function () {
          var s = this.ui.nameInput.val();
          s &&
            (this.model.set("name", s),
            this.triggerMethod("group:changed", { model: this.model }));
        },
        _removeDragline: function () {
          this.parent.$el.find(".csui-favorite-group.csui-dragline").remove(),
            delete this._dropAfter;
        },
        _removeDragStarted: function () {
          this.parent.$el
            .find(".csui-dragstarted")
            .removeClass("csui-dragstarted");
        },
      });
      return n;
    }
  ),
  csui.define(
    "css!csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/widgets/favorites2.table/impl/favorites2.group.view",
      "css!csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = a.CollectionView.extend({
        className: "csui-favorite-groups-rows csui-normal-scrolling",
        tagName: "ul",
        childView: h,
        childViewOptions: function () {
          return {
            parent: this,
            groupsView: this.options.parent,
            groupsViewStateModel: this.options.groupsViewStateModel,
            dragData: this.options.dragData,
            useEditMode: this._useEditMode,
            dragAndDropEnabled: this.options.dragAndDropEnabled,
          };
        },
        initialize: function (e) {
          this._useEditMode = e && e.useEditMode;
        },
        events: {
          focusout: function (e) {
            e.relatedTarget &&
              d.contains(this.el, e.relatedTarget) == !1 &&
              this.trigger("groups:focusout");
          },
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites2.table/impl/favorites2.groups.footer",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return (
            '    <p class="csui-groups-footer-text">' +
            i.escapeExpression(i.lambda(e, e)) +
            `</p>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-groups-footer-wrapper binf-hidden">
` +
            ((t = n(l, "each").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "texts") : e,
              {
                name: "each",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 2 },
                  end: { line: 4, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            "</div>"
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites2.table_impl_favorites2.groups.footer",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",
    [
      "module",
      "csui/lib/marionette",
      "csui/utils/contexts/factories/favorite2groups",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
      "hbs!csui/widgets/favorites2.table/impl/favorites2.groups.footer",
      "css!csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",
    ],
    function (v, d, a, h, i) {
      "use strict";
      var e = d.ItemView.extend({
        className: "csui-favorite-groups-footer",
        template: i,
        initialize: function () {
          (this.groups =
            this.options.groups ||
            this.context.getCollection(a, { detached: !0, permanent: !0 })),
            this.listenTo(this.groups, "reset", this._groupsChanged),
            this.listenTo(this.groups, "update", this._groupsChanged);
        },
        templateHelpers: function () {
          return { texts: [h.groupHint1, h.groupHint2] };
        },
        _groupsChanged: function () {
          this.groups.length > 1
            ? this.$el
                .find(".csui-groups-footer-wrapper")
                .addClass("binf-hidden")
            : this.$el
                .find(".csui-groups-footer-wrapper")
                .removeClass("binf-hidden");
        },
      });
      return e;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites2.table/impl/favorites2.groups",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-favorite-groups-header-region"></div>
<div class="csui-favorite-groups-rows-region binf-flex-column"></div>
<div class="csui-favorite-groups-footer-region"></div>`;
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites2.table_impl_favorites2.groups",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.groups.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/models/favorite2group",
      "csui/widgets/favorites2.table/impl/favorites2.groups.header.view",
      "csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",
      "csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
      "hbs!csui/widgets/favorites2.table/impl/favorites2.groups",
      "css!csui/widgets/favorites2.table/impl/favorites2.groups.view",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f) {
      "use strict";
      var g = i.LayoutView.extend({
        className: "csui-favorite-groups",
        template: f,
        ui: {},
        regions: {
          headerRegion: ".csui-favorite-groups-header-region",
          rowsRegion: ".csui-favorite-groups-rows-region",
          footerRegion: ".csui-favorite-groups-footer-region",
        },
        constructor: function w(b) {
          b || (b = {});
          var C = v.config();
          a.defaults(b, {}),
            w.__super__.constructor.call(this, b),
            this.options.blockingParentView
              ? c.delegate(this, this.options.blockingParentView)
              : c.imbue(this);
        },
        initialize: function () {
          var w = this;
          (this.collection =
            this.options.collection ||
            this.context.getCollection(r, { detached: !0, permanent: !0 })),
            (this._useEditMode = l.isTouchBrowser()),
            (this._isSingleGroupEditing = !1),
            (this._isGroupsEditing = !1),
            (this._dragData = this.options.dragData),
            this.options.collection && (this.collection.fetched = !1),
            this.listenTo(this.collection, "reset", function () {
              this.collection.each(function (b, C) {
                C > 0 ? b.set("isTabable", !1) : b.set("isTabable", !0);
              });
            }),
            (this.headerView = new n({ useEditMode: this._useEditMode })),
            (this.rowsView = new s({
              dragData: this._dragData,
              parent: this,
              collection: this.collection,
              sort: !0,
              useEditMode: this._useEditMode,
              dragAndDropEnabled: this.options.dragAndDropEnabled,
            })),
            (this.footerView = new o({ groups: this.collection })),
            this.listenTo(
              this.rowsView,
              "childview:group:focused",
              function (b) {
                this._setFocusAtView(b);
              }
            ),
            this.listenTo(this.rowsView, "groups:focusout", function () {
              this.$el
                .find(".csui-favorite-group.csui-in-focus")
                .removeClass("csui-in-focus"),
                this.$el.removeClass("csui-favorite-groups-has-group-in-focus"),
                this.rowsView.children.each(function (b) {
                  delete b._hasFocus;
                });
            }),
            this.listenTo(
              this.rowsView,
              "childview:before:group:selected",
              function (b, C) {
                this._isSingleGroupEditing
                  ? (C.cancel = !0)
                  : this.triggerMethod("before:group:selected", b);
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:selected",
              function (b, C) {
                this._modelOfNewlySelectedGroup(b) &&
                  (this.triggerMethod("group:selected", b),
                  this.selectGroup(b),
                  this._tryReSetFocus());
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:before:dropped",
              function (b, C) {
                this._checkMoveNotPossible(
                  C.idSource,
                  C.idDestination,
                  C.moveAfterDestination
                ) && (C.cancel = !0);
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:dropped",
              function (b, C) {
                this.triggerMethod("group:dropped", C);
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:dropped:favorite",
              function (b, C) {
                this.triggerMethod("dropped:favorite", C);
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:editing",
              function (b, C) {
                this._setSingleGroupEditingMode(b);
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:changed",
              function (b, C) {
                var k = C.model;
                this._saveGroup(k),
                  this._setSingleGroupEditingMode(!1),
                  this._setGroupsEditingMode(!1);
                var y = this;
                d(document).ready(function () {
                  y._tryReSetFocus(k);
                });
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:delete",
              function (b, C) {
                var k = C.model;
                k.isNew()
                  ? (k.destroy(),
                    w._setSingleGroupEditingMode(!1),
                    w._setGroupsEditingMode(!1),
                    w.triggerMethod("group:deleted", k))
                  : k.destroy({ wait: !0 }).then(function () {
                      w._setSingleGroupEditingMode(!1),
                        w._setGroupsEditingMode(!1),
                        w.triggerMethod("group:deleted", k);
                    });
              }
            ),
            this.listenTo(
              this.rowsView,
              "childview:group:finished:editing",
              function () {
                this._setSingleGroupEditingMode(!1);
              }
            ),
            this.listenTo(this.headerView, "add:item", function (b) {
              if (!this._isSingleGroupEditing) {
                (this._isSingleGroupEditing = !0),
                  this.headerView.isAddEnabled(!1);
                var C = new t(
                  { name: "", order: 1, isRename: !0 },
                  { connector: this.collection.connector }
                );
                this.collection.add(C, { at: 0 });
              }
            }),
            this.listenTo(this.headerView, "toggleEditMode:on", function () {
              this._setGroupsEditingMode(!0);
            }),
            this.listenTo(this.headerView, "toggleEditMode:off", function () {
              this._editingView
                ? (this._editingView._save(),
                  this._setSingleGroupEditingMode(!1))
                : this._setGroupsEditingMode(!1);
            });
        },
        events: {
          keydown: function (w) {
            var b;
            switch (w.keyCode) {
              case 38:
                if (
                  (w.preventDefault(),
                  w.stopPropagation(),
                  !this._isSingleGroupEditing &&
                    this._focusedModelIndex !== void 0 &&
                    this._focusedModelIndex > 0)
                ) {
                  b = this.collection.at(this._focusedModelIndex);
                  var C = this.collection.at(this._focusedModelIndex - 1),
                    k = this.rowsView.children.findByModel(C);
                  this._setFocusAtView(k),
                    b.set("isTabable", !1),
                    C.set("isTabable", !0);
                }
                break;
              case 40:
                if (
                  (w.preventDefault(),
                  w.stopPropagation(),
                  !this._isSingleGroupEditing &&
                    this._focusedModelIndex !== void 0 &&
                    this._focusedModelIndex < this.collection.length - 1)
                ) {
                  b = this.collection.at(this._focusedModelIndex);
                  var y = this.collection.at(this._focusedModelIndex + 1),
                    S = this.rowsView.children.findByModel(y);
                  this._setFocusAtView(S),
                    b.set("isTabable", !1),
                    y.set("isTabable", !0);
                }
                break;
            }
          },
        },
        onRender: function () {
          this._updateGroupsCssClasses(),
            this.headerRegion.show(this.headerView),
            this.rowsRegion.show(this.rowsView),
            this.$el
              .find(".csui-favorite-groups-rows-region")
              .attr("role", "navigation")
              .attr("aria-label", m.favoriteGroupsNavAria),
            this.footerRegion.show(this.footerView);
        },
        onBeforeDestroy: function () {
          this._isSingleGroupEditing &&
            this._editingView.model.isNew() &&
            this._editingView.model.destroy();
        },
        _setFocusAtView: function (w) {
          this.rowsView.children.each(function (b) {
            b.cid !== w.cid &&
              (delete b._hasFocus, b.$el.removeClass("csui-in-focus"));
          }),
            (w._hasFocus = !0),
            w.$el.addClass("csui-in-focus"),
            this.$el.addClass("csui-favorite-groups-has-group-in-focus"),
            (this._focusedModelIndex = this.collection.indexOf(w.model));
        },
        _setFocusedByIndex: function (w) {
          var b = this.rowsView.collection.at(w),
            C = this.rowsView.children.findByModel(b);
          this._setFocusAtView(C);
        },
        _tryReSetFocus: function () {
          var w = arguments[0];
          if (!w) {
            var b = 0;
            this._focusedModelIndex !== void 0 && (b = this._focusedModelIndex),
              (w = this.collection.at(b));
          }
          if (w) {
            var C = this.rowsView.children.findByModel(w);
            C && C._setFocus();
          }
        },
        _setGroupsEditingMode: function (w) {
          var b = (this._isGroupsEditing = w);
          this._updateGroupsCssClasses(),
            this.collection.each(function (C) {
              C.set("isGroupsEditing", b);
            }),
            this.triggerMethod("group:any:editing", { on: w });
        },
        _setSingleGroupEditingMode: function (w) {
          var b;
          w
            ? ((this._isSingleGroupEditing = !0),
              (this._editingView = w),
              this.headerView.isAddEnabled(!1),
              (b = { on: !0, groupModel: w.model }))
            : ((this._editingView = void 0),
              (this._isSingleGroupEditing = !1),
              this.headerView.isAddEnabled(!0),
              (b = { on: !1 }));
          var C = this._isSingleGroupEditing;
          this._updateGroupsCssClasses(),
            this.collection.each(function (k) {
              k.set("isSingleGroupEditing", C);
            }),
            this.triggerMethod("group:any:editing", b);
        },
        _updateGroupsCssClasses: function () {
          this._useEditMode &&
            this.$el.addClass("csui-favorite-groups-has-groups-editing"),
            this._isSingleGroupEditing || this._isGroupsEditing
              ? (this.$el.removeClass("csui-favorite-groups-editing-none"),
                this.$el.addClass("csui-favorite-groups-editing-any"))
              : (this.$el.addClass("csui-favorite-groups-editing-none"),
                this.$el.removeClass("csui-favorite-groups-editing-any")),
            this._isSingleGroupEditing && !this._isGroupsEditing
              ? this.$el.addClass("csui-favorite-single-group-editing")
              : this.$el.removeClass("csui-favorite-single-group-editing"),
            !this._isSingleGroupEditing && this._isGroupsEditing
              ? this.$el.addClass("csui-favorite-groups-editing")
              : this.$el.removeClass("csui-favorite-groups-editing");
        },
        _checkMoveNotPossible: function (w, b, C) {
          var k = this.collection.get(w),
            y = this.collection.get(b),
            S = this.collection.indexOf(k),
            P = this.collection.indexOf(y);
          return S < P && (P = P - 1), C && (P = P + 1), S === P;
        },
        _modelOfNewlySelectedGroup: function (w) {
          var b;
          if (
            (w instanceof h.Model
              ? (b = w)
              : w instanceof h.View && (b = w.model),
            !(
              !b ||
              (this.selectedGroup &&
                b.get("tab_id") == this.selectedGroup.get("tab_id"))
            ))
          )
            return b;
        },
        selectGroup: function (w) {
          var b = this._modelOfNewlySelectedGroup(w);
          if (!b) {
            this._tryReSetFocus();
            return;
          }
          this.selectedGroup && this.selectedGroup.set("isSelected", !1),
            b.set("isSelected", !0),
            (this.selectedGroup = b),
            this._tryReSetFocus(b);
        },
        _endEditing: function (w) {
          w.isNew() || w.set({ isRename: !1 }),
            this._setSingleGroupEditingMode(!1);
        },
        _saveGroup: function (w) {
          var b = this,
            C = w.previousAttributes();
          w.save({}, { wait: !0 })
            .then(function () {
              b._endEditing(w);
            })
            .fail(function (k) {
              w.trigger("error", w), w.set(C, { silent: !0 });
              var y;
              if (k && k.responseJSON && k.responseJSON.error)
                y = k.responseJSON.error;
              else {
                var S = l.MessageHelper.toHtml();
                l.MessageHelper.reset(), (y = d(S).text());
              }
              e.error("Saving failed. ", y) && console.error(e.last),
                u.showMessage(
                  "error",
                  m.errorFavoriteGroupSaveFailed + " " + y
                );
            });
        },
      });
      return g;
    }
  ),
  csui.define(
    "csui/widgets/favorites2.table/impl/favorites2.table.columns",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
    ],
    function (v, d, a) {
      "use strict";
      var h = d.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        i = d.Collection.extend({
          model: h,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new i(
              this.map(function (l) {
                return l.attributes;
              })
            );
          },
          resetCollection: function (l, u) {
            if (l) {
              var r = 0,
                t = v.map(l, function (n) {
                  var s = n instanceof d.Model ? n.toJSON() : n;
                  return (
                    (r += 10),
                    new h(v.defaults(s, { key: s.column_key, sequence: r }))
                  );
                });
              this.reset(t, u);
            }
          },
        }),
        e = new i([
          {
            key: "type",
            titleIconInHeader: "mime_type",
            sequence: 10,
            permanentColumn: !0,
          },
          {
            key: "favorite_name",
            title: a.favoriteColumnNameTitle,
            cellViewClassname: "csui/controls/table/cells/name.view",
            sequence: 20,
            permanentColumn: !0,
            isNaming: !0,
          },
          { key: "reserved", sequence: 30, noTitleInHeader: !0 },
          { key: "parent_id", sequence: 40 },
          {
            key: "favorite",
            sequence: 910,
            noTitleInHeader: !0,
            permanentColumn: !0,
          },
        ]);
      return e;
    }
  ),
  csui.define(
    "hbs!csui/widgets/favorites2.table/impl/favorites2.table",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-perspective-toolbar"></div>
<div class="csui-rowselection-toolbar"></div>
<div class="csui-favorite-masterdetail-view">
  <div class="csui-favorite-groups-view"></div>
  <div class="csui-table-view"></div>
</div>`;
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_favorites2.table_impl_favorites2.table",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "css!csui/widgets/favorites2.table/impl/favorites2.table.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites2.table/favorites2.table.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/models/favorite2columns",
      "csui/utils/contexts/factories/favorites2",
      "csui/models/favorites2",
      "csui/widgets/favorites2.table/toolbaritems",
      "csui/widgets/favorites2.table/toolbaritems.masks",
      "csui/controls/progressblocker/blocker",
      "csui/widgets/favorites2.table/impl/favorites2.groups.view",
      "csui/controls/table/table.view",
      "csui/utils/commands",
      "csui/controls/tableactionbar/tableactionbar.view",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/controls/tile/behaviors/infinite.scrolling.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/globalmessage/globalmessage",
      "csui/widgets/favorites2.table/impl/favorites2.table.columns",
      "csui/controls/perspective.header/perspective.header.view",
      "csui/models/mixins/v2.fields/v2.fields.mixin",
      "csui/controls/mixins/view.state/multi.node.fetch.mixin",
      "csui/controls/mixins/view.state/node.selection.restore.mixin",
      "hbs!csui/widgets/favorites2.table/impl/favorites2.table",
      "i18n!csui/widgets/favorites2.table/impl/nls/lang",
      "csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior",
      "csui/behaviors/resizable/resizable.behavior",
      "csui/utils/accessibility",
      "csui/utils/contexts/perspective/plugins/node/node.extra.data",
      "css!csui/widgets/favorites2.table/impl/favorites2.table.view",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D,
      L,
      Q,
      q,
      G,
      N,
      W,
      H,
      z,
      Z,
      te
    ) {
      "use strict";
      var le = Z.isAccessibleTable(),
        ge = v.config();
      a.defaults(ge, {
        defaultPageSize: 30,
        showGroupsRegion: !0,
        showInlineActionBarOnHover: !le,
        dragAndDropEnabled: !0,
      });
      var Pe = g.extend({
          constructor: function ie(ae) {
            ie.__super__.constructor.apply(this, arguments);
          },
          behaviors: {
            InfiniteScrolling: {
              behaviorClass: S,
              contentParent: le ? ".dataTables_wrapper" : "tbody",
              content: "tbody>tr:visible",
            },
            TabableRegion: { behaviorClass: P },
          },
        }),
        _e = i.LayoutView.extend({
          className: "csui-fav2-table",
          template: N,
          ui: { tableView: ".csui-table-view" },
          regions: {
            toolbarRegion: ".csui-rowselection-toolbar",
            groupsRegion: ".csui-favorite-groups-view",
            tableRegion: ".csui-table-view",
            headerRegion: ".csui-perspective-toolbar",
          },
          behaviors: {
            DefaultAction: { behaviorClass: y },
            TableRowSelectionToolbar: { behaviorClass: H },
            ResizableBehavior: { behaviorClass: z },
          },
          constructor: function ie(ae) {
            ae || (ae = {}),
              this._addUrlParametersSupport(ae.context),
              a.defaults(
                ae,
                {
                  pageSize: ge.defaultPageSize,
                  showGroupsRegion: ge.showGroupsRegion,
                  clearFilterOnChange: ge.clearFilterOnChange,
                  resetOrderOnChange: ge.resetOrderOnChange,
                  resetLimitOnChange: ge.resetLimitOnChange,
                  fixedFilterOnChange: ge.fixedFilterOnChange,
                  dragAndDropEnabled: ge.dragAndDropEnabled,
                  showInlineActionBarOnHover: ge.showInlineActionBarOnHover,
                },
                {
                  forceInlineActionBarOnClick: !1,
                  inlineActionBarStyle: "csui-table-actionbar-bubble",
                  clearFilterOnChange: !0,
                  resetOrderOnChange: !1,
                  resetLimitOnChange: !0,
                  fixedFilterOnChange: !1,
                  toolbarItems: o,
                }
              ),
              ae.toolbarItemsMasks || (ae.toolbarItemsMasks = new c()),
              (this.context = ae.context),
              (this.connector = this.context.getObject(u)),
              (this.commands = ae.commands || w),
              (this.commandController = new C({
                commands: this.commands,
                nameAttribute: "favorite_name",
              })),
              (this.favoritesTableOptions = { isFavoritesTable: !0 }),
              (this.tableColumns = this.options.tableColumns || D.deepClone()),
              m.imbue(this),
              ie.__super__.constructor.call(this, ae);
            var fe = this.context.viewStateModel;
            this.listenTo(fe, "change:state", this.onViewStateChanged),
              this.listenTo(
                this,
                "doc:preview:generic:actions",
                this._highlightRow
              ),
              this.propagateEventsToRegions();
          },
          _highlightRow: function (ie, ae) {
            d("." + ae).removeClass(ae);
            var fe = a.findIndex(this.collection.models, function (Le) {
              return Le.get("id") === ie.get("id");
            });
            if (fe !== -1) {
              var pe = this.tableView || this.targetView,
                ke = pe && pe.table ? pe.table : void 0,
                Re = ke === void 0 ? ke : d(ke.row(fe).node());
              Re && Re.addClass(ae);
            }
          },
          initialize: function () {
            (this.collection = new s(void 0, {
              connector: this.connector,
              autoreset: !1,
              skip: 0,
              top: this.options.pageSize,
            })),
              (this.groups =
                this.options.groups ||
                this.context.getCollection(r, { detached: !0, permanent: !0 }));
            var ie =
              this.defaultActionController.actionItems.getAllCommandSignatures(
                w
              );
            this.collection.setCommands(w.getAllSignatures()),
              this.collection.setDefaultActionCommands(ie),
              this.collection.setEnabledDelayRestCommands(!0),
              this.groups.favorites.setResourceScope(
                n.getDefaultsOnlyResourceScope()
              ),
              this.groups.favorites.setDefaultActionCommands(ie),
              this.groups.favorites.setEnabledDelayRestCommands(!1),
              this.groups.favorites.setFields(te.getModelFields()),
              this.groups.favorites.setExpand(te.getModelExpand()),
              (this.columns =
                this.collection.columns ||
                new t(void 0, { connector: this.connector })),
              (this._dragData = new h.Model()),
              (this._allowDragging = !0),
              this.collection.delayedActions &&
                this.listenTo(
                  this.collection.delayedActions,
                  "error",
                  function (ae, fe, pe) {
                    var ke = new l.Error(fe);
                    F.showMessage("error", ke.message);
                  }
                ),
              this.listenTo(this.groups, "request", this.blockActions),
              this.listenTo(
                this.groups,
                "sync error destroy",
                this.unblockActions
              ),
              this.listenTo(this.groups, "reset", this._trySelectGroup),
              this.listenTo(this.groups, "bulk:update", function () {
                this._saveAllFavorites();
              }),
              this.options.isExpandedView || this._setPerspectiveHeaderView(),
              this.setGroupsView(),
              this.initSelectionMixin(
                this.options,
                this.collection,
                "favorites"
              ),
              this.setTableView(),
              this.addTableViewSelectionEvents(this.tableView),
              this.tableView.listenTo(
                this.groups,
                "sync error destroy",
                this.tableView.enableEmptyViewText
              );
          },
          _addUrlParametersSupport: function (ie) {
            var ae = ie && ie.viewStateModel;
            this.enableViewState =
              ae && ae.addUrlParameters(this.getDefaultUrlParameters(), ie, !0);
          },
          _setSelectedGroup: function (ie) {
            var ae = !1;
            this.selectedGroup && (ae = !0),
              (this.selectedGroup = ie),
              (this.favoritesTableOptions.selectedGroup = ie),
              ae && this.clearAllSelectedNodes(),
              ae && this.setViewStateGroupName(ie.get("name"));
          },
          _getGroupNameFromViewState: function () {
            var ie = this.context,
              ae = ie.viewStateModel;
            if (ae) return ae.getViewState("group", !0);
          },
          _trySelectGroup: function () {
            var ie;
            if (this.selectedGroup !== void 0)
              ie = this.groups.get(this.selectedGroup);
            else {
              var ae = this._getGroupNameFromViewState();
              (ie = ae && this._getGroupByName(ae)),
                ie ||
                  (ie = this.groups.find(function (fe) {
                    return (
                      (fe.favorites && fe.favorites.length > 0) ||
                      fe.get("tab_id") === -1
                    );
                  }));
            }
            ie
              ? (this.columns.length === 0 &&
                  this.columns.reset(ie.favorites.columns.models, {
                    silent: !0,
                  }),
                this._setTableColumns(ie.favorites.columns, { silent: !0 }),
                this.collection.populate(ie.favorites.models, { parse: !1 }),
                this._setSelectedGroup(ie),
                this.groupsView.selectGroup(ie))
              : (delete this.selectedGroup,
                delete this.favoritesTableOptions.selectedGroup,
                this.collection.populate([]));
          },
          _setTableColumns: function (ie, ae) {
            if (!this.options.tableColumns && ie && ie.models) {
              var fe = this,
                pe = [
                  "permanentColumn",
                  "noTitleInHeader",
                  "titleIconInHeader",
                  "title",
                  "align",
                  "widthFactor",
                  "isNaming",
                ],
                ke = a.map(ie.models, function (Re) {
                  var Le = Re.toJSON(),
                    De = Re.get("column_key") || Re.get("key"),
                    Ke = fe.tableColumns.findWhere({ key: De });
                  return (
                    Ke &&
                      a.each(pe, function ($e) {
                        var He = Ke.get($e);
                        He !== void 0 && Le[$e] === void 0 && (Le[$e] = He);
                      }),
                    Le
                  );
                });
              this.tableColumns.resetCollection(ke, ae);
            }
          },
          _saveAllFavorites: function () {
            var ie = this,
              ae = d.Deferred();
            return (
              this.blockActions(),
              this._dragData.clear(),
              this.groups
                .saveAll()
                .then(function () {
                  e.debug("Complete set of favorite information saved") &&
                    console.log(e.last),
                    ie._updateTabIdsInSelectedGroup(),
                    ae.resolve();
                })
                .fail(function (fe) {
                  fe &&
                    (e.error(
                      "failed to save complete set of favorite information: " +
                        fe.statusText
                    ) && console.log(e.last),
                    F.showMessage(
                      "error",
                      W.errorFavoritesSaveFailed + " " + fe.statusText
                    ),
                    ie.groups.fetch({ reload: !0 }),
                    ae.reject());
                })
                .always(function () {
                  ie.unblockActions();
                }),
              ae.promise()
            );
          },
          _updateTabIdsInSelectedGroup: function () {
            var ie = this.collection;
            if (this.selectedGroup) {
              var ae = this.selectedGroup,
                fe = ae.get("tab_id");
              ie.each(function (pe, ke) {
                var Re = ae.favorites.at(ke);
                ie.remove(pe, { silent: !0 }),
                  pe.set("favorite_tab_id", fe, { silent: !0 }),
                  ie.add(pe, { at: ke, silent: !0 });
              });
            }
          },
          _moveModel: function (ie, ae, fe, pe) {
            var ke = ie.get(ae),
              Re = ie.get(fe),
              Le = ie.indexOf(ke),
              De = ie.indexOf(Re);
            return (
              Le < De && (De = De - 1),
              pe && (De = De + 1),
              Le != De ? (ie.remove(ke), ie.add(ke, { at: De }), !0) : !1
            );
          },
          _moveAndSaveFavorites: function (ie, ae, fe) {
            var pe = this.groups.get(this.selectedGroup);
            return (
              this.blockActions(),
              a.each(
                ie,
                function (ke) {
                  var Re = this.collection.get(ke);
                  Re &&
                    (this._moveModel(this.collection, ke, ae, fe),
                    this._moveModel(pe.favorites, ke, ae, fe));
                },
                this
              ),
              this.unblockActions(),
              this._saveAllFavorites()
            );
          },
          setGroupsView: function () {
            (this.groupsView = new f({
              connector: this.connector,
              collection: this.groups,
              dragData: this._dragData,
              blockingParentView: this,
              dragAndDropEnabled: this.options.dragAndDropEnabled,
            })),
              this.listenTo(this.groupsView, "group:selected", function (ie) {
                this.selectedGroup.favorites.each(function (ae) {
                  ae.has("csuiIsSelected") && ae.set("csuiIsSelected", !1);
                }),
                  this.tableView.selectedChildren.reset([]),
                  this.collection.populate(ie.model.favorites.models, {
                    parse: !1,
                  }),
                  this._setSelectedGroup(ie.model);
              }),
              this.listenTo(
                this.groupsView,
                "group:any:editing",
                function (ie) {
                  (this._allowDragging = !ie.on), this._updateDraggable();
                }
              ),
              this.listenTo(this.groupsView, "group:deleted", function (ie) {
                if (this.selectedGroup) {
                  var ae = ie.get("tab_id"),
                    fe = this.selectedGroup.get("tab_id");
                  fe === ae && delete this.selectedGroup;
                }
                this._trySelectGroup();
              }),
              this.listenTo(this.groupsView, "group:dropped", function (ie) {
                var ae = this,
                  fe = this.groups,
                  pe = ie.tabIdSource,
                  ke = ie.tabIdDestination;
                if (this._moveModel(fe, pe, ke, ie.dropAfter)) {
                  var Re = this.groups.get(pe),
                    Le = this.groups.indexOf(Re);
                  ie.savePromise = this._saveAllFavorites().then(function () {
                    ae.groupsView._setFocusedByIndex(Le),
                      ae.groupsView._tryReSetFocus();
                  });
                }
              }),
              this.listenTo(this.groupsView, "dropped:favorite", function (ie) {
                var ae = ie.idSources;
                if (!(!a.isArray(ae) || ae.length === 0)) {
                  var fe = this.groups,
                    pe = this.collection,
                    ke = ie.tabIdDestination,
                    Re = fe.get(ie.tabIdSource),
                    Le = this.selectedGroup.get("tab_id");
                  a.each(ae, function (De) {
                    var Ke = Re.favorites.get(De);
                    Re.favorites.remove(Ke);
                    var $e = fe.get(ke);
                    $e.favorites.add(Ke),
                      Le === ie.tabIdSource
                        ? ((Ke = pe.get(De)),
                          pe.remove(Ke),
                          Ke.set("csuiIsSelected", !1))
                        : Le === ke && pe.add(Ke);
                  }),
                    (ie.savePromise = this._saveAllFavorites());
                }
              });
          },
          _setPerspectiveHeaderView: function () {
            this.perspectiveHeaderView = new L({
              title: W.dialogTitle,
              icon: "title-favourites",
              context: this.context,
            });
          },
          _removeDragline: function () {
            this.tableView.$el.find(".csui-dragline").remove(),
              this.tableView.$el
                .find("tr.csui-no-border")
                .removeClass("csui-no-border"),
              delete this._dropAfter;
          },
          _updateDraggable: function () {
            if (this._allowDragging) {
              if (l.isAppleMobile() === !1 && this.options.dragAndDropEnabled) {
                var ie = this.tableView.getSelectedChildren().length;
                if (ie > 0) {
                  var ae = this.tableView.$el.find("tr[draggable=true]");
                  ae.attr("draggable", !1),
                    (ae = this.tableView.$el.find("tr.binf-active")),
                    ae.attr("draggable", !0);
                } else
                  this.tableView.$el
                    .find("tr:not(.csui-table-row-shows-inlineform)")
                    .attr("draggable", !0);
              }
            } else {
              var fe = this.tableView.$el.find("tr[draggable=true]");
              fe.attr("draggable", !1);
            }
          },
          _handleKeydown: function (ie, ae) {
            var fe = l.isMacintosh(),
              pe;
            switch (ie.keyCode) {
              case 88:
                if (
                  (fe && ie.metaKey && !ie.ctrlKey) ||
                  (!fe && !ie.metaKey && ie.ctrlKey)
                ) {
                  ie.preventDefault(), ie.stopPropagation();
                  var ke = this.selectedGroup.get("tab_id");
                  (pe = []), this._dragData.set({ groupId: ke, favorites: pe });
                  var Re = this.tableView.getSelectedChildren();
                  if (Re.length > 0)
                    a.each(Re, function (He) {
                      pe.push(He.get("id"));
                    });
                  else {
                    var Le = this.tableView.getFocusedChild();
                    Le && pe.push(Le.get("id"));
                  }
                  this.tableView.trigger("closeOther"),
                    this.tableView.cancelAnyExistingInlineForm.call(
                      this.tableView
                    );
                }
                break;
              case 86:
                if (
                  (fe && ie.metaKey && !ie.ctrlKey) ||
                  (!fe && !ie.metaKey && ie.ctrlKey)
                ) {
                  if (
                    (ie.preventDefault(),
                    ie.stopPropagation(),
                    (pe = this._dragData.get("favorites")),
                    !pe || pe.length === 0)
                  )
                    return;
                  var De = ae,
                    Ke = De.get("id");
                  if (a.contains(pe, Ke)) return;
                  try {
                    var $e = !1;
                    this._moveAndSaveFavorites(
                      this._dragData.get("favorites"),
                      Ke,
                      $e
                    );
                  } catch {}
                }
                break;
            }
          },
          setTableView: function () {
            this.tableView = new Pe({
              context: this.options.context,
              connector: this.connector,
              collection: this.collection,
              columns: this.columns,
              tableColumns: this.tableColumns,
              pageSize: this.options.pageSize,
              originatingView: this,
              columnsWithSearch: ["favorite_name"],
              orderBy: this.options.orderBy,
              filterBy: this.options.filterBy,
              nameEdit: !1,
              favoritesTableOptions: this.favoritesTableOptions,
              actionItems: this.defaultActionController.actionItems,
              commands: this.defaultActionController.commands,
              blockingParentView: this,
              allSelectedNodes: this.getAllSelectedNodes(),
              tableTexts: { zeroRecords: W.emptyGroupText },
              tableAria: W.favoritesTableAria,
              inlineBar: {
                viewClass: b,
                options: a.extend(
                  {
                    collection: this.options.toolbarItems.inlineActionbar,
                    toolItemsMask:
                      this.options.toolbarItemsMasks.toolbars.inlineActionbar,
                    delayedActions: this.collection.delayedActions,
                    container: this.collection.node,
                    containerCollection: this.collection,
                    commandExecutionOptions: { nameAttribute: "favorite_name" },
                  },
                  this.options.toolbarItems.inlineActionbar.options,
                  {
                    inlineBarStyle: this.options.inlineActionBarStyle,
                    forceInlineBarOnClick:
                      this.options.forceInlineActionBarOnClick,
                    showInlineBarOnHover:
                      this.options.showInlineActionBarOnHover,
                  }
                ),
              },
            });
            var ie = this;
            this.listenTo(this.tableView, "tableRowRendered", function (ae) {
              var fe = d(ae.target);
              fe.on("focusin", function (pe) {
                ie._tableRowWithFocus = ae;
              }),
                fe.on("focusout", function (pe) {
                  delete ie._tableRowWithFocus;
                }),
                fe.on("keydown", function (pe) {
                  ie._handleKeydown.call(ie, pe, ae.node);
                });
            }),
              this.listenTo(this.tableView, "tableRowRendered", function (ae) {
                var fe = d(ae.target);
                fe.find("a").attr("draggable", !1),
                  l.isAppleMobile() === !1 &&
                    this.options.dragAndDropEnabled &&
                    fe.hasClass("csui-table-row-shows-inlineform") === !1 &&
                    fe.attr("draggable", !0),
                  fe.on("dragstart", function (pe) {
                    var ke = ie.selectedGroup.get("tab_id"),
                      Re = [];
                    ie._dragData.set({
                      groupId: ke,
                      favorites: Re,
                      sourceIndex: pe.currentTarget._DT_RowIndex,
                    });
                    var Le = ie.tableView.getSelectedChildren();
                    if (Le.length > 0)
                      a.each(Le, function (Ke) {
                        Re.push(Ke.get("id"));
                      });
                    else {
                      var De = ie.collection.at(
                        ie._dragData.get("sourceIndex")
                      );
                      Re.push(De.get("id")),
                        d(pe.currentTarget).removeClass("csui-state-hover");
                    }
                    pe.originalEvent.dataTransfer.setData("text", ""),
                      ie.tableView.trigger("closeOther"),
                      ie.tableView.cancelAnyExistingInlineForm.call(
                        ie.tableView
                      );
                  }),
                  fe.on("dragover", function (pe) {
                    if (
                      !(
                        !ie._dragData.get("favorites") ||
                        ie._dragData.get("favorites").length === 0
                      )
                    ) {
                      var ke = ie._dragData.get("sourceIndex"),
                        Re = pe.currentTarget._DT_RowIndex;
                      if (!(ke === void 0 || ke === Re)) {
                        pe.preventDefault();
                        var Le = d('<tr class="csui-dragline">'),
                          De = d(pe.currentTarget).height();
                        pe.offsetY > De / 2
                          ? (ie._dropAfter === void 0 ||
                              ie._dropAfter === !1) &&
                            (ie._removeDragline.call(ie),
                            d(pe.currentTarget).after(Le),
                            (ie._dropAfter = !0))
                          : (ie._dropAfter === void 0 ||
                              ie._dropAfter === !0) &&
                            (ie._removeDragline.call(ie),
                            d(pe.currentTarget).before(Le),
                            Re === 0 &&
                              Le.before(
                                '<tr class="csui-dragline csu-dragline-spacer">'
                              ),
                            (ie._dropAfter = !1)),
                          Le.next().addClass("csui-no-border");
                      }
                    }
                  }),
                  fe.on("drop", function (pe) {
                    var ke = ie._dragData.get("sourceIndex"),
                      Re = pe.currentTarget._DT_RowIndex,
                      Le = ae.node,
                      De = Le.get("id");
                    if (!(ke === void 0 || ke === Re)) {
                      pe.preventDefault();
                      try {
                        if (
                          ie._dragData.get("favorites") &&
                          ie._dragData.get("groupId")
                        ) {
                          var Ke = d(pe.currentTarget).height(),
                            $e = pe.offsetY > Ke / 2;
                          ie._moveAndSaveFavorites(
                            ie._dragData.get("favorites"),
                            De,
                            $e
                          );
                        }
                      } catch {}
                      ie._removeDragline();
                    }
                  }),
                  fe.on("dragleave", function (pe) {
                    ie._removeDragline();
                  }),
                  fe.on("dragend", function (pe) {
                    pe.preventDefault(),
                      ie._removeDragline(),
                      ie._dragData.clear();
                  });
              }),
              this.listenTo(
                this.tableView,
                "tableRowSelected",
                this._updateDraggable
              ),
              this.listenTo(
                this.tableView,
                "tableRowUnselected",
                this._updateDraggable
              ),
              this.listenTo(this, "render", function () {
                this.groupsRegion.show(this.groupsView),
                  this.triggerMethod(
                    "dynamicDomLoaded",
                    this.groupsRegion.$el,
                    this
                  ),
                  this.perspectiveHeaderView &&
                    this.headerRegion.show(this.perspectiveHeaderView),
                  this.tableRegion.show(this.tableView),
                  Q.mergePropertyParameters(
                    this.groups.favorites.fields,
                    this.tableView.collection.fields
                  ),
                  this.groups.ensureFetched({ reload: !0 }),
                  this.options.showGroupsRegion === !1 &&
                    this.groupsRegion.$el.hide(),
                  delete this._tableRowWithFocus;
              }),
              this.listenTo(
                this.tableView,
                "execute:defaultAction",
                function (ae) {
                  var fe = { node: ae };
                  if ((this.trigger("before:defaultAction", fe), !fe.cancel)) {
                    var pe = this;
                    this.defaultActionController
                      .executeAction(ae, {
                        context: this.options.context,
                        originatingView: this,
                      })
                      .done(function () {
                        pe.trigger("executed:defaultAction", fe);
                      });
                  }
                }
              ),
              this.listenTo(
                this.getAllSelectedNodes(),
                "reset update",
                this._selectionChanged
              );
          },
          _addFavoriteAttribute: function (ie) {
            return (
              ie.each(function (ae) {
                ae.set("favorite", !0);
              }, this),
              !0
            );
          },
          getDefaultUrlParameters: function () {
            return ["group"];
          },
          getViewStateGroupName: function () {
            return this.context.viewStateModel.getViewState("group", !0);
          },
          setViewStateGroupName: function (ie, ae) {
            if (this.getViewStateGroupName() !== ie) {
              var fe = this.context.viewStateModel;
              return (
                ae || (ae = {}),
                (ae.encode = !0),
                ae && ae.default && fe.setDefaultViewState("group", ie, ae),
                fe.setViewState("group", ie, ae)
              );
            }
          },
          _getGroupByName: function (ie) {
            return this.groups.find(function (ae) {
              if (ae.get("name") === ie) return ae;
            });
          },
          isRoutingToOtherRouter: function () {
            var ie = this.context,
              ae = ie && ie.viewStateModel;
            if (ae.get(ae.CONSTANTS.CURRENT_ROUTER) !== "Root") return !0;
          },
          getCollectionData: function () {
            return {
              module_name: "favorites",
              tab_id: this.selectedGroup.get("tab_id"),
            };
          },
          onViewStateChanged: function () {
            if (!this.isRoutingToOtherRouter()) {
              var ie = this.context.viewStateModel,
                ae = ie.getViewState("group", !0),
                fe;
              if (ae) {
                var pe = this._getGroupByName(ae);
                pe
                  ? pe !== this.selectedGroup &&
                    (this._setSelectedGroup(pe), (fe = !0))
                  : ((this.selectedGroup = void 0), (fe = !0));
              } else (this.selectedGroup = void 0), (fe = !0);
              fe && this._trySelectGroup();
            }
          },
        });
      return (
        a.extend(_e.prototype, k),
        a.extend(_e.prototype, q),
        a.extend(_e.prototype, G),
        _e
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div class="csui-perspective-toolbar"></div>
<div class="csui-recentlyaccessedtable">
  <div class="csui-rowselection-toolbar"></div>
  <div id="tableviewRA"></div>
  <div id="paginationviewRA"></div>
</div>
`;
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_recentlyaccessedtable_recentlyaccessedtable",
          h
        ),
        h
      );
    }
  ),
  csui.define("csui/widgets/recentlyaccessedtable/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/recentlyaccessedtable/impl/nls/root/lang", {
    dialogTitle: "Recently Accessed",
    emptyListText: "There are no items to display.",
    tableAria: "Recently Accessed",
  }),
  csui.define(
    "css!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view",
    [
      "csui/lib/underscore",
      "csui/utils/base",
      "csui/utils/contexts/factories/recentlyaccessedcolumns",
      "csui/utils/contexts/factories/recentlyaccessed",
      "csui/widgets/recentlyaccessed/recentlyaccessed.columns",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/widgets/nodestable/nodestable.view",
      "csui/utils/commands",
      "csui/controls/globalmessage/globalmessage",
      "csui/widgets/recentlyaccessedtable/toolbaritems",
      "csui/widgets/recentlyaccessedtable/toolbaritems.masks",
      "csui/controls/perspective.header/perspective.header.view",
      "csui/controls/mixins/view.state/multi.node.fetch.mixin",
      "csui/controls/mixins/view.state/node.selection.restore.mixin",
      "hbs!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",
      "i18n!csui/widgets/recentlyaccessedtable/impl/nls/lang",
      "csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior",
      "csui/utils/contexts/perspective/plugins/node/node.extra.data",
      "css!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w) {
      "use strict";
      var b = l.extend({
        template: m,
        className: "csui-recently-accessed-table-view",
        regions: {
          toolbarRegion: ".csui-rowselection-toolbar",
          tableRegion: "#tableviewRA",
          paginationRegion: "#paginationviewRA",
          headerRegion: ".csui-perspective-toolbar",
        },
        constructor: function (k) {
          this._addUrlParametersSupport(k.context),
            (k.showSelectionCounter = !1),
            (k.enableViewState = !1),
            (k.tableAria = f.tableAria),
            (k.preferencesStorageId = "RecentlyAccessedTablePreferences"),
            l.prototype.constructor.apply(this, arguments),
            this.propagateEventsToRegions();
        },
        behaviors: v.extend(
          { TableRowSelectionToolbar: { behaviorClass: g } },
          l.prototype.behaviors
        ),
        initialize: function () {
          if (((this.collection = this.options.collection), !this.collection)) {
            var C = this._restoreCollectionOptionsFromViewState();
            (this.collection = this.context.getCollection(h, { options: C })),
              C.orderBy && (this.options.orderBy = C.orderBy);
          }
          this.collection.setExpand("properties", [
            "parent_id",
            "reserved_user_id",
          ]),
            (this._allCommands =
              this.defaultActionController.actionItems.getAllCommandSignatures(
                u
              )),
            this.collection.setResourceScope(h.getDefaultResourceScope(!0)),
            this.collection.setDefaultActionCommands(this._allCommands),
            this.collection.setEnabledDelayRestCommands(!0),
            this.collection.setFields(w.getModelFields()),
            this.collection.setExpand(w.getModelExpand()),
            this.collection.delayedActions &&
              this.listenTo(
                this.collection.delayedActions,
                "error",
                function (k, y, S) {
                  var P = new d.Error(y);
                  r.showMessage("error", P.message);
                }
              ),
            (this.columns =
              this.collection.columns || this.context.getCollection(a)),
            v.defaults(this.options, {
              orderBy: "access_date_last desc",
              tableColumns: i,
              toolbarItems: t,
              urlParamsList: [],
            }),
            this.options.toolbarItemsMasks ||
              (this.options.toolbarItemsMasks = new n()),
            this.options.isExpandedView || this._setPerspectiveHeaderView(),
            this.initSelectionMixin(this.options, this.collection),
            this.setTableView({
              orderBy: this.options.orderBy,
              filterBy: this.options.filterBy,
              nameEdit: !1,
              haveDetailsRowExpandCollapseColumn: !1,
              tableColumns: this.options.tableColumns,
              allSelectedNodes: this.getAllSelectedNodes(),
              tableTexts: { zeroRecords: f.emptyListText },
            }),
            this.addTableViewSelectionEvents(this.tableView),
            this.setPagination(),
            this.options.collection && (this.collection.fetched = !1);
        },
        _setPerspectiveHeaderView: function () {
          this.perspectiveHeaderView = new s({
            title: this.getTitle(),
            icon: "title-recentlyaccessed",
            context: this.context,
          });
        },
        _resetSortOrderBy: function () {},
        getTitle: function () {
          return f.dialogTitle;
        },
        onRender: function () {
          this.perspectiveHeaderView &&
            this.headerRegion.show(this.perspectiveHeaderView),
            this.tableRegion.show(this.tableView),
            this.paginationRegion.show(this.paginationView);
        },
        _addUrlParametersSupport: function (C) {
          var k = C && C.viewStateModel;
          k && k.addUrlParameters("", C, !0);
        },
        getUrlParameters: function () {
          return [];
        },
        getCollectionData: function () {
          return {
            module_name: "recently_accessed",
            orderBy: this.collection.orderBy,
          };
        },
      });
      return (
        v.extend(b.prototype, e),
        v.extend(b.prototype, o),
        v.extend(b.prototype, c),
        b
      );
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/recycle.items.columns",
    ["csui/lib/backbone"],
    function (v) {
      var d = v.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        a = v.Collection.extend({
          model: d,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new a(
              this.models?.map((i) => {
                i.attributes;
              })
            );
          },
        });
      return new a([
        { key: "type", sequence: 10 },
        { key: "name", sequence: 20 },
        { key: "deleted_date", sequence: 40 },
        { key: "deleted_user_name", sequence: 50 },
        { key: "created_by_user_name", sequence: 60 },
        { key: "size", sequence: 70 },
        { key: "parent_id", sequence: 80 },
        { key: "purged_date", sequence: 90 },
      ]);
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/recycle.toolbaritems",
    [
      "i18n!csui/widgets/recycle.items.table/impl/nls/lang",
      "csui/controls/toolbar/toolitems.factory",
    ],
    function (v, d) {
      "use strict";
      return {
        filterToolbar: new d(
          {
            filter: [
              {
                signature: "Filter",
                name: v.filterName,
                iconName: "csui_action_filter32",
                toolItemAria: v.filterToolItemAria,
                toolItemAriaExpand: !1,
                toolItemRole: "button",
              },
            ],
          },
          { addTrailingDivider: !1 }
        ),
        tableHeaderToolbar: new d(
          {
            main: [
              { signature: "SmartViewRestore", name: v.LblRestore },
              { signature: "SmartViewPurge", name: v.LblPurge },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
            lazyActions: !0,
          }
        ),
        inlineActionbar: new d(
          {
            info: [
              {
                signature: "SmartViewRestore",
                name: v.LblRestore,
                iconName: "csui_action_restore32",
              },
              {
                signature: "SmartViewPurge",
                name: v.LblPurge,
                iconName: "csui_action_delete32",
              },
            ],
          },
          {
            maxItemsShown: 5,
            dropDownText: v.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
      };
    }
  ),
  csui.define(
    "hbs!csui/widgets/recycle.items.table/recycle.item.table.header",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            '<div class="cs-back-button-container" title="' +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backTitle") || (e != null ? n(e, "backTitle") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 45 },
                      end: { line: 1, column: 58 },
                    },
                  })
                : t)
            ) +
            `"
     tabindex="0" aria-label="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "backTitle") || (e != null ? n(e, "backTitle") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "backTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 30 },
                      end: { line: 2, column: 43 },
                    },
                  })
                : t)
            ) +
            `" role="button">
  <span class="arrow_back cs-go-back"></span>
</div>
<div class = "csui-filterToolbar"></div>
<div class="cs-title-container">
  <div class="cs-title-inner-container">
    <span class="title-icon ` +
            i.escapeExpression(
              ((t =
                (t = n(l, "icon") || (e != null ? n(e, "icon") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 28 },
                      end: { line: 8, column: 36 },
                    },
                  })
                : t)
            ) +
            `"></span>
    <h2 class="title" title="` +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 29 },
                      end: { line: 9, column: 38 },
                    },
                  })
                : t)
            ) +
            '">' +
            i.escapeExpression(
              ((t =
                (t = n(l, "title") || (e != null ? n(e, "title") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 40 },
                      end: { line: 9, column: 49 },
                    },
                  })
                : t)
            ) +
            `</h2>
  </div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_recycle.items.table_recycle.item.table.header",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/recycle.items.table.header.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/perspective.header/perspective.header.view",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/utils/commands",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/controls/toolbar/toolbar.view",
      "hbs!csui/widgets/recycle.items.table/recycle.item.table.header",
      "i18n!csui/widgets/recycle.items.table/impl/nls/lang",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/recycle.items.table/recycle.toolbaritems",
      "css!csui/controls/perspective.header/impl/perspective.header",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o) {
      "use strict";
      var c = h.extend({
        className:
          "csui-perspective-toolbar-container csui-recycle-items-header-view",
        template: t,
        templateHelpers: function () {
          return {
            icon: this.options.icon,
            title: this.options.title,
            backTitle: n.backTitle,
          };
        },
        behaviors: { TabableRegionBehavior: { behaviorClass: s } },
        constructor: function (f) {
          f.collection &&
            this.listenTo(f.collection, "reset", this.updateHeader),
            (this.ui = v.extend(
              {
                filterAction: ".filterToolbar",
                filterToolbarRegion: ".csui-filterToolbar",
              },
              this.ui
            )),
            (this.events = v.extend(
              { keydown: "onKeyInView", keyup: "onKeyUp" },
              this.events
            )),
            h.prototype.constructor.call(this, f),
            (this.commandController =
              f.toolbarCommandController ||
              new u({ commands: f.commands || l }));
          let g = {
              context: f.context,
              nodes: this.selectedNodes,
              container: f.removeContainer ? void 0 : this.container,
              collection: this.collection,
              originatingView: f.originatingView,
            },
            w = new e(o.filterToolbar, {
              status: g,
              commands: this.commandController.commands,
            });
          const b = r;
          (this.toolbarView = new b(
            v.extend(
              {
                collection: w,
                toolbarName: "filter",
                toolbarCommandController: this.commandController,
                originatingView: f.originatingView,
                noMenuRoles: !0,
              },
              o.filterToolbar.options
            )
          )),
            this.listenTo(
              this.toolbarView,
              "childview:toolitem:action",
              this._toolbarItemClicked
            );
        },
        updateHeader: function () {
          (this.filterIconRegion = new a.Region({
            el: this.ui.filterToolbarRegion,
          })),
            this.filterIconRegion.show(this.toolbarView);
        },
        _toolbarItemClicked: function (m, f) {
          let g = {
            context: this.options.context,
            nodes: this.options.originatingView.getSelectedNodes().clone(),
            container: this.options.container,
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            toolItemView: m,
          };
          this.commandController.toolitemClicked(f.toolItem, g);
        },
        currentlyFocusedElement: function (m) {
          const f = this.$("*[tabindex]:not(.binf-disabled )");
          return (
            f.length && f.prop("tabindex", 0),
            this.accNthHeaderItemFocused
              ? d(f[this.accNthHeaderItemFocused])
              : d(f[0])
          );
        },
        onKeyInView: function (m) {
          const f = this.$("*[tabindex]:not(.binf-disabled )");
          switch (
            (m.keyCode != 9 &&
              m.keyCode != 16 &&
              this.currentlyFocusedElement(),
            f.removeClass("csui-acc-focusable-active"),
            m.keyCode)
          ) {
            case 9:
              if (
                (m.shiftKey
                  ? this.accNthHeaderItemFocused--
                  : this.accNthHeaderItemFocused++,
                this.accNthHeaderItemFocused >= f.length)
              ) {
                this.accNthHeaderItemFocused = f.length - 1;
                return;
              } else if (this.accNthHeaderItemFocused < 0) {
                this.accNthHeaderItemFocused = 0;
                return;
              }
              this._moveTo(m);
              break;
            case 13:
            case 32:
              d(m.target).click(),
                m.preventDefault(),
                m.stopPropagation(),
                this.currentlyFocusedElementInHeader().trigger("focus"),
                this.currentlyFocusedElementInHeader().attr("tabindex", 0);
              break;
          }
        },
        onKeyUp: function (m) {
          const f = this.$("*[tabindex]:not(.binf-disabled )");
          this.accNthHeaderItemFocused == null &&
            (m.shiftKey
              ? (this.accNthHeaderItemFocused = 1)
              : (this.accNthHeaderItemFocused = 0)),
            this.$el.addClass("csui-acc-tab-region-active"),
            d(f[this.accNthHeaderItemFocused]).addClass(
              "csui-acc-focusable-active"
            );
        },
        currentlyFocusedElementInHeader: function (m) {
          const f = this.$("*[tabindex]:not(.binf-disabled )");
          return f.length > 0 ? d(f[this.accNthHeaderItemFocused]) : null;
        },
        _moveTo: function (m) {
          const f = this.currentlyFocusedElementInHeader();
          f.trigger("focus"),
            f.attr("tabindex", 0),
            f.addClass("csui-acc-focusable-active"),
            m.preventDefault(),
            m.stopPropagation();
        },
      });
      return c;
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/recycle.items.table.view",
    [
      "csui/lib/underscore",
      "csui/widgets/generic.expanded.table/generic.expanded.table.view",
      "csui/utils/contexts/factories/recycle.items.columns.factory",
      "csui/utils/contexts/factories/recycle.items",
      "csui/widgets/recycle.items.table/recycle.items.columns",
      "csui/widgets/recycle.items.table/recycle.toolbaritems",
      "csui/widgets/recycle.items.table/recycle.items.table.header.view",
      "csui/models/widget/recycle.items/recycle.items.facets.factory",
      "csui/utils/contexts/factories/recycle.bin",
      "csui/controls/facet.bar/facet.bar.view",
      "i18n!csui/widgets/recycle.items.table/impl/nls/lang",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n) {
      "use strict";
      return d.extend({
        className: `csui-recycle-items-table-view ${d.prototype.className}`,
        constructor: function (c = {}) {
          v.defaults(c, { orderBy: "deleted_date desc" }),
            (c.collectionFactory = h),
            (c.columnCollectionFactory = a),
            (c.tableColumns = i);
          const m = c.context.getModel(r, { permanent: !0, detached: !0 });
          m.ensureFetched().then(function () {
            if (!m.get("show_purge_date_column")) {
              const g = c.context.getModel(a),
                w = g.findWhere({ key: "purged_date" });
              g.remove(w);
            }
          }),
            (c.tableAria = n.tableAria),
            (c.dialogTitle = n.dialogTitle),
            (c.headerIconName = "title-recyclebin-items"),
            (c.overrideToolbarItems = e),
            (c.noNodeExtraData = !0),
            (c.displayCountProps = { showCount: !1 }),
            (c.showButtonsInEachFacet = !1),
            (c.enableFacetPanel = !0),
            (this.options = c),
            d.prototype.constructor.call(this, c),
            this.collection.recycleItemsFacets ||
              (this.collection.recycleItemsFacets =
                this.options.context.getModel(u, {
                  options: {
                    query: this.options.query,
                    orderBy: this.collection.orderBy,
                    skipCount: this.collection.skipCount,
                    topCount: this.collection.topCount,
                    filters: this.collection.filters.length
                      ? this.collection.filters
                      : [],
                  },
                  detached: !0,
                })),
            this.listenTo(this.collection, "sync", this.executeEndProcess),
            (this.facetFilters = this.collection.recycleItemsFacets);
        },
        executeEndProcess: function () {
          const o = { showSaveFilter: !1, hideClearAll: !0 };
          this._setFacetBarView(o),
            this.facetBarView &&
              this.options.showFacetPanel !== !1 &&
              this.facetBarRegion.show(this.facetBarView),
            this.facetBarView.facetBarView?.allTopicsCollection?.length
              ? this._handleFacetBarVisible()
              : this._handleFacetBarHidden();
        },
        _removeAll: function () {
          this.facetFilters.clearFilter(!1),
            this.collection.setDefaultPageNum(),
            this._fetchCollectionAfterFilterUpdate();
        },
        _handleFacetBarVisible: function () {
          this.facetBarView.facetBarView.el.classList.remove(
            "csui-facet-bar-hidden"
          ),
            this.facetBarView.facetBarView.$el
              .find(".csui-facet-list-bar .csui-facet-item-content")
              .trigger("focus");
        },
        _handleFacetBarHidden: function () {
          this.facetBarView.facetBarView.el.classList.add(
            "csui-facet-bar-hidden"
          );
        },
        _removeFacetFilter: function (o) {
          let c;
          (this.collection.mode = void 0),
            (this.facetFilters.filters = []),
            this._synchronizedContextForFacets
              ? (this.facetFilters.removeFilter(o, !1),
                (c = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: c }, { fetch: !1 }),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.removeFilter(o),
                (c = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: c })),
            this.facetFilters.fetch(),
            this._fetchCollectionAfterFilterUpdate();
        },
        _addToFacetFilter: function (o) {
          let c;
          (this.collection.mode = o.values[0].id),
            (this.facetFilters.filters = []),
            this._synchronizedContextForFacets
              ? (this.facetFilters.addFilter(o, !1),
                (c = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: c }, { fetch: !1 }),
                this._synchronizedContextForFacets.fetch())
              : (this.facetFilters.addFilter(o, !1),
                (c = this.facetFilters.getFilterQueryValue()),
                this.collection.resetLimit(!1),
                this.collection.setFilter({ facet: c })),
            this._fetchCollectionAfterFilterUpdate();
        },
        _fetchCollectionAfterFilterUpdate: function () {
          this.collection.fetch({ fetchFacets: !0 });
        },
        getCollectionOptions: function () {
          var o = this._restoreCollectionOptionsFromViewState();
          return (
            (o = { ...o, orderBy: "deleted_date desc" }), { collectionState: o }
          );
        },
        _setPerspectiveHeaderView: function () {
          (this.headerView = new l({
            title: this.getTitle(),
            icon: "title-recyclebin-items",
            context: this.context,
            originatingView: this,
            localStorage: this.localStorage
              ? this.localStorage
              : this.options.localStorage,
            collection: this.collection,
            settings: this.settings ? this.settings : !1,
            toolbarCommandController: this.commandController,
          })),
            (this.headerView.data = {});
        },
      });
    }
  ),
  csui.define("csui/widgets/permissions/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/permissions/nls/root/lang", {
    PermissionLookupPlaceHolder: "Enter name or group for permissions lookup",
  }),
  csui.define(
    "hbs!csui/widgets/permissions/impl/permissions.lookup/permissions.lookup",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          return `<div id="csui-permissions-user-picker" class="csui-permissions-user-picker"></div>
<div id="user"></div>`;
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_permissions.lookup_permissions.lookup",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n!csui/widgets/permissions/impl/nls/lang",
      "i18n!csui/widgets/permissions/nls/lang",
      "hbs!csui/widgets/permissions/impl/permissions.lookup/permissions.lookup",
      "css!csui/widgets/permissions/impl/permissions",
    ],
    function (v, d, a, h, i, e, l, u) {
      var r = d.extend(
          { memberFilterType: [0, 1], orderBy: "asc_name" },
          v.config()
        ),
        t = h.ItemView.extend({
          className: "cs-permissions-lookup",
          template: u,
          initialize: function (n) {
            this.options = n;
          },
          constructor: function (s) {
            var o = this;
            s || (s = {}),
              s.data || (s.data = {}),
              (this.options = s),
              h.ItemView.prototype.constructor.call(this, s);
          },
          onShow: function () {
            var n = this;
            csui.require(
              ["csui/controls/userpicker/userpicker.view"],
              function (s) {
                n.pickerView = new s({
                  context: n.options.context,
                  memberFilter: { type: r.memberFilterType },
                  widgetoptions: n.options,
                  placeholder:
                    l.PermissionLookupPlaceHolder ||
                    e.PermissionLookupPlaceHolder,
                  prettyScrolling: !0,
                  orderBy: r.orderBy || "",
                  limit: 20,
                  model: n.options.userPickerModel,
                  id_input: d.uniqueId("csui-permissions-user-picker-input"),
                });
                var o = new h.Region({
                  el: n.$el.find("#csui-permissions-user-picker"),
                });
                o.show(n.pickerView),
                  n.pickerView && n.pickerView.ui.searchbox.trigger("focus"),
                  n.listenTo(n.pickerView, "item:change", n.processItemChange),
                  n.listenTo(n.pickerView, "item:clear", n.processItemChange),
                  n.listenTo(n.pickerView, "click item:clear", function () {
                    n.trigger("close:addmenu");
                  });
              }
            );
          },
          processItemChange: function () {
            var n = arguments.length > 0 && arguments[0].item,
              s = {
                id: n ? n.get("id") : "",
                name: n ? n.get("name_formatted") : "",
                group_id:
                  n && n.get("group_id_expand")
                    ? n.get("group_id_expand").id
                    : "",
                initials: n ? n.get("initials") : "",
                photo_url: n ? n.get("photo_url") : "",
                selectedMember: n || void 0,
                effectivePermissions: !!n,
              };
            this.options.userPickerModel.set(s);
          },
        });
      return t;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items",
      "csui-ext!csui/widgets/permissions/permissions.list/permissions.dropdown.menu.items",
    ],
    function (v, d, a, h, i, e) {
      "use strict";
      var l = {
        dropdownMenuList: new a(
          {
            main: [
              { signature: "adduserorgroup", name: d.AddUserOrGroups },
              { signature: "addownerorgroup", name: d.AddOwnerOrGroup },
              { signature: "restorepublicaccess", name: d.RestorePublicAccess },
            ],
          },
          { maxItemsShown: 0, dropDownIconName: "csui_action_caret_down32" }
        ),
      };
      if (i)
        if (
          (console.warn(
            'DEPRECATED: depend on the extension "csui-ext!csui/widgets/permissions/permissions.list/permissions.dropdown.menu.items" instead.'
          ),
          e)
        ) {
          var u = e.concat(i);
          r(u);
        } else r(i);
      else e && r(e);
      function r(t) {
        v.each(t, function (n) {
          v.each(n, function (s, o) {
            var c = l[o];
            if (!c) throw new Error("Invalid target toolbar: " + o);
            v.each(s, function (m) {
              (m = new h(m)), c.addItem(m);
            });
          });
        });
      }
      return l;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.list/toolbaritems",
    [
      "csui/lib/underscore",
      "csui/utils/base",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/permissions/impl/permissions.list/toolbaritems",
      "csui-ext!csui/widgets/permissions/permissions.list/toolbaritems",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = {
        inlineToolbar: new h(
          {
            other: [
              {
                signature: "ChangeOwnerPermission",
                name: a.ToolbarItemChangeOwnerPermission,
                iconName: "csui_action_change_owner32",
              },
              {
                signature: "DeletePermission",
                name: a.ToolbarItemDeletePermission,
                iconName: "csui_action_delete32",
              },
              {
                signature: "EditPermission",
                name: a.ToolbarItemEditPermission,
                iconName: "csui_action_edit32",
              },
              {
                signature: "ApplyPermission",
                name: a.ToolbarItemApplyPermission,
                iconName: "csui_action_share32",
              },
            ],
          },
          {
            maxItemsShown: d.isHybrid() ? 1 : 3,
            dropDownText: a.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
          }
        ),
      };
      if (e)
        if (
          (console.warn(
            'DEPRECATED: depend on the extension "csui-ext!csui/widgets/permissions/permissions.list/toolbaritems" instead.'
          ),
          l)
        ) {
          var r = l.concat(e);
          t(r);
        } else t(e);
      else l && t(l);
      function t(n) {
        v.each(n, function (s) {
          v.each(s, function (o, c) {
            var m = u[c];
            if (!m) throw new Error("Invalid target toolbar: " + c);
            v.each(o, function (f) {
              (f = new i(f)), m.addItem(f);
            });
          });
        });
      }
      return u;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.list/toolbaritems.masks",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (v, d, a, h) {
      "use strict";
      var i = ["inlineToolbar"];
      function e() {
        var l = v.config(),
          u = new h();
        this.toolbars = d.reduce(
          i,
          function (r, t) {
            var n = new a(u, { normalize: !1 });
            return (
              d.each(l, function (s, o) {
                (s = s[t]), s && n.extendMask(s);
              }),
              n.storeMask(),
              (r[t] = n),
              r
            );
          },
          {}
        );
      }
      return (e.toolbars = i), e;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.list/permission.table.columns",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/models/permission/permission.table.columns.model",
      "i18n!csui/widgets/permissions/impl/nls/lang",
      "csui-ext!csui/widgets/permissions/table.columns",
    ],
    function (v, d, a, h, i) {
      var e = d.Collection.extend({
          model: a,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new e(
              this.map(function (r) {
                return r.attributes;
              })
            );
          },
        }),
        l = [
          {
            key: "right_id",
            column_key: "right_id",
            column_name: h.right_id,
            sequence: 20,
            permanentColumn: !0,
            containsInlineActions: !0,
          },
          {
            key: "permissions",
            column_key: "permissions",
            column_name: h.permission_level,
            sequence: 40,
            permanentColumn: !0,
          },
          {
            column_key: "addpermissions",
            key: "addpermissions",
            name: "",
            sortable: !1,
            alignment: "center",
            permanentColumn: !0,
            isToolbar: !0,
            sequence: 999,
            className: "csui-inlinetoolbar-touch",
          },
        ];
      i &&
        v.each(i, function (r) {
          v.each(r, function (t, n) {
            l.push(t);
          });
        });
      var u = new e(l);
      return u;
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/permissions.content",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return `<div class="csui-add-permissions-content">
  <div class="csui-add-permission"></div>
  </div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="cs-permissions-content-header">
` +
            ((t = n(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? n(e, "isToolbar") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 2, column: 0 },
                  end: { line: 6, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-permission-lookup-container"></div>
</div>
  <div class="csui-permissions-list-container"></div>
  <div class="csui-permissions-empty-actions binf-hidden">
    <div class="csui-addMember-container">
      <span class="csui-icon add_user"></span>
      <span class="csui-addMember"></span>
    </div>
    <div class="csui-grantAccess-container binf-hidden">
      <span class="csui-icon icon_permmision_owner"></span>
      <span class="csui-grantAccess"></span>
    </div>
  </div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_permissions.content",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/permissions.list/permissions.empty",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            "<span>" +
            i.escapeExpression(
              ((t =
                (t = n(l, "message") || (e != null ? n(e, "message") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 6 },
                      end: { line: 1, column: 17 },
                    },
                  })
                : t)
            ) +
            "</span>"
          );
        },
      });
      return (
        a.registerPartial(
          "csui_widgets_permissions_impl_permissions.list_permissions.empty",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/permissions.content.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/log",
      "csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view",
      "csui/controls/table.list/table.list.view",
      "csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items",
      "csui/utils/commands",
      "csui/utils/contexts/factories/member",
      "csui/widgets/permissions/impl/permissions.list/toolbaritems",
      "csui/widgets/permissions/impl/permissions.list/toolbaritems.masks",
      "csui/widgets/permissions/impl/permissions.list/permission.table.columns",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/controls/progressblocker/blocker",
      "csui/dialogs/members.picker/members.picker.wizard",
      "i18n!csui/widgets/permissions/impl/nls/lang",
      "hbs!csui/widgets/permissions/impl/permissions.content",
      "hbs!csui/widgets/permissions/impl/permissions.list/permissions.empty",
      "css!csui/widgets/permissions/impl/permissions",
    ],
    function (v, d, a, h, i, e, l, u, r, t, n, s, o, c, m, f, g, w, b) {
      "use strict";
      i = i(v.id);
      var C = h.ItemView.extend({
          className: "csui-table-empty",
          template: b,
          templateHelpers: function () {
            if (this.model.get("name")) {
              var y = d.str.sformat(
                g.emptyPermissionListMsg,
                this.model.get("name")
              );
              return { message: y };
            }
          },
          constructor: function (S) {
            h.ItemView.prototype.constructor.apply(this, arguments);
          },
        }),
        k = h.LayoutView.extend({
          className: "cs-permissions-content",
          template: w,
          templateHelpers: function () {
            return { isToolbar: this.admin_permissions };
          },
          regions: {
            lookupRegion: ".csui-permission-lookup-container",
            listRegion: ".csui-permissions-list-container",
          },
          ui: {
            permissionList: ".csui-permissions-list-container",
            emptyActionsContainer: ".csui-permissions-empty-actions",
            addMemberToGroup: ".csui-addMember",
            grantAccessToMember: ".csui-grantAccess",
            addPermissionButton: ".csui-add-permission",
            addPermissionToolitem: ".csui-toolitem",
          },
          events: {
            "click @ui.addMemberToGroup": "onClickAddMember",
            "keydown @ui.addPermissionButton": "onKeyInView",
            "keydown @ui.addPermissionToolitem": "onKeyInView",
          },
          onClickAddMember: function (y) {
            var S = this,
              P = a.Deferred(),
              F = S.options.originatingView,
              D =
                S.originalCollection &&
                S.originalCollection.models &&
                S.originalCollection.models.length > 0
                  ? S.originalCollection.models
                  : S.permissionCollection.models;
            D = d.filter(D, function (Q) {
              return (
                Q.get("right_id_expand") && Q.get("right_id_expand").type === 1
              );
            });
            var L = new f(
              {
                command: "adduserorgroup",
                context: F.context,
                connector: F.model.connector,
                dialogClass: "cs-permission-group-picker",
                displayName: g.allUsersAndGroups,
                dialogTitle: g.addUsersAndGroups,
                startLocation: "acl.groups",
                displayStartLocation: !0,
                selectedMember: S.memberFilter,
                showUserPicker: !0,
                authUser: S.options.authUser,
                hasEditPermissionAction: S.options.hasEditPermissionAction,
                adduserorgroup: !0,
                buttons: [
                  {
                    id: "Add",
                    label: g.addButtonLabel,
                    default: !0,
                    toolTip: g.addButtonTooltip,
                  },
                  {
                    id: "Cancel",
                    label: g.cancelButtonLabel,
                    disabled: !1,
                    close: !0,
                    toolTip: g.cancelButtonTooltip,
                  },
                ],
                nodeModel: F.model,
                availablePermissions: S.options.collection.availablePermissions,
                startLocations: ["acl.groups"],
                selectableMembers: D,
              },
              S
            );
            L.show()
              .done(function () {
                P.resolve.apply(P, arguments);
              })
              .fail(function (Q) {
                P.reject.apply(P, arguments);
              });
          },
          constructor: function (S) {
            var P = this;
            S || (S = {}),
              S.toolbarItems || (S.toolbarItems = n),
              S.toolbarItemsMasks || (S.toolbarItemsMasks = new s()),
              (this.options = S),
              h.LayoutView.prototype.constructor.call(this, S),
              m.imbue(this),
              (this.memberFilter = this.options.context.getModel(t)),
              this.memberFilter.set({
                id: "",
                name: "",
                group_id: "",
                initials: "",
                photo_url: "",
              }),
              (this.collection = this.options.collection),
              this.listenTo(this.memberFilter, "change", function () {
                if (this.collection.isFetchable()) {
                  var F = this,
                    D =
                      this.options.hasEditPermissionAction &&
                      this.model.get("permissions_model") !== "simple";
                  if (((F.edit_permissions = D), this.memberFilter.get("id"))) {
                    this.originalCollection ||
                      (this.originalCollection =
                        this.options.collection.clone()),
                      (this.options.filteredPermissions = !0);
                    var L = d.filter(
                        this.originalCollection.models,
                        function (N) {
                          return (
                            N.get("right_id") === this.memberFilter.get("id")
                          );
                        },
                        this
                      ),
                      Q = d.filter(
                        F.originalCollection.models,
                        function (N) {
                          return (
                            N.get("right_id_expand") &&
                            N.get("right_id_expand").type === 1
                          );
                        },
                        this
                      );
                    if (
                      ((this.collection.models = L), this.permissionsListView)
                    )
                      (this.collection.options.memberId =
                        this.memberFilter.get("id")),
                        (this.collection.options.selectedMember =
                          this.memberFilter.get("selectedMember")),
                        (this.collection.options.effectivePermissions =
                          this.memberFilter.get("effectivePermissions")),
                        (this.collection.options.clearEmptyPermissionModel =
                          !0),
                        this.collection.fetch().then(function (N) {
                          if (
                            ((F.collection.options.effectivePermissions = !1),
                            (F.collection.options.selectedMember = void 0),
                            F.collection.models &&
                              F.collection.models.length === 0 &&
                              F.edit_permissions)
                          ) {
                            if (
                              (F.ui.permissionList.addClass(
                                "empty-permission-list"
                              ),
                              Q.length > 0)
                            ) {
                              F.ui.emptyActionsContainer.removeClass(
                                "binf-hidden"
                              );
                              var W = d.str.sformat(
                                  g.addMemberToGroup,
                                  F.memberFilter.get("name")
                                ),
                                H = d.str.sformat(
                                  g.grantAccessToMember,
                                  F.memberFilter.get("name")
                                );
                              F.ui.addMemberToGroup.text(W),
                                F.ui.grantAccessToMember.text(H),
                                F.ui.addMemberToGroup.attr("title", W),
                                F.ui.grantAccessToMember.attr("title", H);
                            }
                          } else F.ui.emptyActionsContainer.addClass("binf-hidden");
                        }, this);
                    else if (
                      (this.model.set("isNotFound", !0),
                      (this.collection.options.memberId =
                        this.memberFilter.get("id")),
                      this.collection.fetch(),
                      D &&
                        (this.ui.permissionList.addClass(
                          "empty-permission-list"
                        ),
                        Q.length > 0))
                    ) {
                      this.ui.emptyActionsContainer.removeClass("binf-hidden");
                      var q = d.str.sformat(
                          g.addMemberToGroup,
                          this.memberFilter.get("name")
                        ),
                        G = d.str.sformat(
                          g.grantAccessToMember,
                          this.memberFilter.get("name")
                        );
                      this.ui.addMemberToGroup.text(q),
                        this.ui.grantAccessToMember.text(G),
                        this.ui.addMemberToGroup.attr("title", q),
                        this.ui.grantAccessToMember.attr("title", G);
                    }
                  } else
                    this.ui.emptyActionsContainer.addClass("binf-hidden"),
                      this.ui.permissionList.removeClass(
                        "empty-permission-list"
                      ),
                      this.model.set("isNotFound", !1),
                      (this.options.filteredPermissions = !1),
                      (this.originalCollection = void 0),
                      (this.collection.options.memberId =
                        this.memberFilter.get("id")),
                      this.collection.fetch();
                }
              }),
              (this.permissionsLookupView = new e(
                d.extend(
                  {
                    originatingView: this.options.originatingView,
                    userPickerModel: this.memberFilter,
                  },
                  this.options
                )
              )),
              (this.admin_permissions =
                this.model &&
                this.model.actions.get({ signature: "editpermissions" })),
              (this.columnCollection = o.clone()),
              this.updateColumnsCollection(),
              (this.permissionsListView = new l(
                d.extend(
                  {
                    originatingView: this.options.originatingView,
                    context: this.options.context,
                    memberFilter: this.memberFilter,
                    toolbarItems: this.options.toolbarItems,
                    toolbarItemsMasks: this.options.toolbarItemsMasks,
                    collection: this.collection,
                    tableColumns: this.columnCollection,
                    emptyView: C,
                    emptyViewModel: this.memberFilter,
                    applyTo: this.options.applyTo,
                    admin_permissions: this.admin_permissions,
                    authUser: this.options.authUser,
                    hasPermissionAction: this.options.hasPermissionAction,
                  },
                  this.options
                )
              )),
              this._isCollectionEditable() &&
                this.listenTo(
                  this.permissionsListView,
                  "render",
                  this.createPermissionDropDown
                ),
              this.listenTo(
                this,
                "update:editpermissions:acitons",
                this._updatePermissionTable
              ),
              this.listenTo(
                this.permissionsListView,
                "render",
                this._resizePermissionTable
              ),
              this.listenTo(
                this.permissionsListView,
                "scroll",
                this._handleScroll
              ),
              this.listenTo(
                this.permissionsListView,
                "resizetable",
                this._resizePermissionTable
              ),
              this.listenTo(
                this.permissionsLookupView,
                "close:addmenu",
                this.closeAddMenu
              ),
              this.propagateEventsToViews(
                this.permissionsLookupView,
                this.permissionsListView
              );
          },
          updateColumnsCollection: function () {
            var y;
            this.options.hasPermissionAction
              ? this.admin_permissions
                ? (y = o.models)
                : (y = o.filter(function (S) {
                    return !S.attributes.isToolbar;
                  }))
              : (y = o.filter(function (S) {
                  return !S.attributes.isToolbar;
                })),
              this.columnCollection.set(y, { remove: !0 });
          },
          _updatePermissionTable: function () {
            this._isCollectionEditable() ||
              (this.ui.addPermissionButton.addClass("binf-hidden"),
              this.permissionsListView.$el
                .find(".csui-add-owner-or-group .csui-user-display-name")
                .text(g.NoOwnerAssigned),
              (this.permissionsListView.options.admin_permissions =
                this.admin_permissions),
              this.permissionsListView.render());
          },
          _resizePermissionTable: function (y) {
            var S = this.$el.find(".csui-table-body");
            S &&
              (S.parents(".csui-table-list").hasClass(
                "csui-table-list-no-scrollable"
              ) &&
                S.parents(".csui-table-list").removeClass(
                  "csui-table-list-no-scrollable"
                ),
              S.height() > S.parent().height()
                ? S.parents(".csui-table-list").removeClass(
                    "csui-table-list-no-scrollable"
                  )
                : S.parents(".csui-table-list").addClass(
                    "csui-table-list-no-scrollable"
                  ));
          },
          _isCollectionEditable: function () {
            return (
              this.model &&
              this.model.actions.get({ signature: "editpermissions" })
            );
          },
          showAddPermissionDropDown: function (y) {
            y.target.getAttribute("aria-expanded") !== "true" &&
              this.createMenuItems(y);
          },
          createPermissionDropDown: async function () {
            if (this._isCollectionEditable()) {
              if (!this.model.get("csuiEditPermissionsActionsRetrieved")) {
                const P = r.getSignatures(u);
                await this.model.getAdditionalActionCommands(
                  P,
                  "csuiEditPermissionsActionsRetrieved"
                );
              }
              var y = this.ui.addPermissionButton
                  .addClass("icon-toolbarAdd")
                  .addClass("binf-dropdown-toggle"),
                S;
              y.attr({
                "data-binf-toggle": "dropdown",
                "aria-expanded": "false",
                tabindex: "0",
                "aria-label": g.AddUserOrGroup,
                title: g.AddDropdownTitle,
                role: "button",
              }),
                y.on("click", d.bind(this.showAddPermissionDropDown, this)),
                (this.dropDownEl = y);
            }
          },
          onKeyInView: function (y) {
            (y.keyCode === 32 || y.keyCode === 13) &&
              (this.$(y.target).hasClass("csui-toolitem")
                ? this.$(y.target).trigger("click")
                : this.ui.addPermissionButton.trigger("click"));
          },
          closeAddMenu: function () {
            this.ui.addPermissionButton.parent().hasClass("binf-open") &&
              this.ui.addPermissionButton.parent().removeClass("binf-open");
          },
          createMenuItems: function (y) {
            var S = a(y.target).parent().addClass("binf-dropdown"),
              P = u.dropdownMenuList,
              F,
              D,
              L,
              Q,
              q = {};
            (F = a('<ul class="binf-dropdown-menu" role="menu"></ul>')),
              this.options.filteredPermissions
                ? (d.extend(
                    this.originalCollection.options,
                    this.collection.options
                  ),
                  (q.permissionCollection = this.originalCollection))
                : (q.permissionCollection = this.collection),
              (q.admin_permissions = this.options.hasEditPermissionAction),
              (q.nodeModel = this.model),
              (q.authUser = this.options.authUser),
              P.collection.models.forEach(function (G) {
                L = G.get("signature");
                var N = r.findWhere({ signature: L });
                (q.toolItem = G),
                  N &&
                    L !== "disabled" &&
                    W() &&
                    (N.set("startLocation", q.startLocation),
                    (D =
                      '<li data-csui-command="' +
                      G.get("signature") +
                      '"><a tabindex="-1" class="csui-toolitem">' +
                      G.get("name") +
                      "</a></li>"),
                    F.append(D));
                function W() {
                  try {
                    return N.enabled(q);
                  } catch (H) {
                    return (
                      i.warn(
                        `Evaluating the command "{0}" failed.
{1}`,
                        N.get("signature"),
                        H.stack
                      ) && console.warn(i.last),
                      !0
                    );
                  }
                }
              }),
              S.find("ul").remove(),
              S.append(F),
              (Q = this.ui.addPermissionButton.parent().find(".csui-toolitem")),
              Q.on("click", d.bind(this.executeToolItemAction, this));
          },
          executeToolItemAction: function (y) {
            var S = this;
            this.commands = r;
            var P = y.target.parentElement.getAttribute("data-csui-command"),
              F = this.commands.findWhere({ signature: P }),
              D = this.options.hasEditPermissionAction,
              L = {
                startLocation: F.get("startLocation"),
                context: this.options.context,
                permissionCollection: this.collection,
                originalCollection: this.originalCollection,
                nodeModel: this.model,
                originatingView: this,
                connector: this.model.connector,
                nodeId: this.model.get("id"),
                admin_permissions: D,
                applyTo: this.options.applyTo,
                authUser: this.options.authUser,
              };
            F &&
              F.enabled(L) &&
              ((this._ = d),
              F.execute(L)
                .done(
                  d.bind(function (Q) {
                    if (
                      (S.permissionsLookupView.pickerView &&
                      S.permissionsLookupView.pickerView.ui.searchclear.is(
                        ":visible"
                      )
                        ? S.permissionsLookupView.pickerView.ui.searchclear.trigger(
                            "click"
                          )
                        : (this.collection.models.forEach(function (G) {
                            G.set("isAddNew", !1);
                          }),
                          Q.set("isAddNew", !0),
                          Q.get("addOwnerGroup")
                            ? S.collection.addOwnerOrGroup(Q, !0)
                            : Q.get("publicAccess")
                            ? S.collection.addPublicAccess(Q)
                            : S.collection.add(Q)),
                      S.originalCollection && S.originalCollection.models)
                    ) {
                      var q = this.collection.models.filter(function (G) {
                        for (var N in S.originalCollection.models)
                          if (
                            (G.get("right_id") ===
                              S.originalCollection.models[N].get("right_id") &&
                              G.get("type") ===
                                S.originalCollection.models[N].get("type")) ||
                            G.get("type") === null
                          )
                            return !1;
                        return !0;
                      });
                      q.length > 0 &&
                        q[0].get("type") === "owner" &&
                        S.originalCollection.findWhere({ type: "owner" }) &&
                        S.originalCollection.remove(
                          S.originalCollection.findWhere({ type: "owner" })
                        ),
                        S.originalCollection.models.push(q[0]);
                    }
                  }, this)
                )
                .always(function () {
                  S.dropDownEl.trigger("focus");
                }));
          },
          onRender: function () {
            this.lookupRegion.show(this.permissionsLookupView),
              this.listRegion.show(this.permissionsListView);
          },
          onBeforeDestroy: function () {
            this.collection.options.memberId &&
              (delete this.collection.options.memberId,
              this.memberFilter.set(
                { id: "", group_id: "", name: "" },
                { silent: !0 }
              ));
          },
          _blockActions: function () {
            var y = this.options.originatingView;
            y && y.blockActions && y.blockActions();
          },
          _unblockActions: function () {
            var y = this.options.originatingView;
            y && y.unblockActions && y.unblockActions();
          },
          _handleScroll: function (y) {
            this.options.originatingView &&
              this.options.originatingView.trigger("scroll", y);
          },
        });
      return d.extend(k.prototype, c), k;
    }
  ),
  csui.define(
    "csui/utils/contexts/factories/permission.list.factory",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/utils/contexts/factories/factory",
      "csui/utils/contexts/factories/connector",
      "csui/models/permission/nodeuserpermissions",
      "csui/utils/commands",
      "csui/utils/base",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      var t = i.extend({
        propertyPrefix: "nodeUserPermissions",
        constructor: function (s, o) {
          i.prototype.constructor.apply(this, arguments);
          var c = this.options.nodeUserPermissions || {};
          if (!(c instanceof h.Collection)) {
            var m = s.getObject(e, o),
              f = o.nodeUserPermissions.memberFilter,
              g = d.config();
            c = new l(
              c.models,
              a.extend(
                {
                  connector: m,
                  query: f,
                  nodeId: this.options.model.get("id"),
                },
                c.options,
                g.options,
                { autofetch: !0, autoreset: !0 }
              )
            );
          }
          this.property = c;
        },
        isFetchable: function () {
          return this.property.isFetchable();
        },
        fetch: function (n) {
          this.property.fetch({
            success: a.bind(this._onNodeUserPermissionsFetched, this, n),
            error: a.bind(this._onNodeUserPermissionsFailed, this, n),
          });
        },
        _onNodeUserPermissionsFetched: function (n) {
          return !0;
        },
        _onNodeUserPermissionsFailed: function (n, s, o) {
          var c = new r.RequestErrorMessage(o);
          csui.require(["csui/dialogs/modal.alert/modal.alert"], function (m) {
            m.showError(c.toString());
          });
        },
      });
      return t;
    }
  ),
  csui.define(
    "hbs!csui/widgets/permissions/impl/no.permissions",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="csui-no-permission">
  ` +
            i.escapeExpression(
              ((t =
                (t = n(l, "messages") || (e != null ? n(e, "messages") : e)) !=
                null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "messages",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 14 },
                    },
                  })
                : t)
            ) +
            `
</div>`
          );
        },
      });
      return (
        a.registerPartial("csui_widgets_permissions_impl_no.permissions", h), h
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/permissions.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/models/node/node.model",
      "csui/widgets/permissions/impl/permissions.content.view",
      "csui/utils/contexts/factories/node",
      "csui/utils/contexts/factories/user",
      "csui/utils/contexts/factories/permission.list.factory",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/utils/nodesprites",
      "csui/utils/command.error",
      "csui/controls/progressblocker/blocker",
      "csui/models/nodechildren",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/commands",
      "csui/utils/contexts/factories/usernodepermission",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/taskqueue",
      "csui/utils/permissions/permissions.precheck",
      "hbs!csui/widgets/permissions/impl/no.permissions",
      "csui/utils/url",
      "csui/utils/contexts/factories/server.info",
      "csui/models/node.actions",
      "i18n!csui/widgets/permissions/impl/nls/lang",
      "css!csui/widgets/permissions/impl/permissions",
    ],
    function (
      v,
      d,
      a,
      h,
      i,
      e,
      l,
      u,
      r,
      t,
      n,
      s,
      o,
      c,
      m,
      f,
      g,
      w,
      b,
      C,
      k,
      y,
      S,
      P,
      F,
      D
    ) {
      var L = v.config();
      d.defaults(L, { parallelism: 3 });
      var Q = h.ItemView.extend({
        className: "cs-permissions",
        behaviors: {
          TabablesBehavior: {
            behaviorClass: b,
            recursiveNavigation: !0,
            containTabFocus: !0,
          },
        },
        isTabable: function () {
          return this.$("*[tabindex]").length > 0;
        },
        currentlyFocusedElement: function (q) {
          var G = this.$("*[tabindex]");
          return q && q.shiftKey ? a(G[G.length - 1]) : a(G[0]);
        },
        template: !1,
        events: {
          "focusin .csui-permissions-user-picker": "onFocusInUserPicker",
        },
        constructor: function (G) {
          G || (G = {}),
            G.data || (G.data = {}),
            G.model ||
              (G.model = G.context.getModel(u, {
                attributes: G.data.id && { id: G.data.id },
                temporary: !0,
              })),
            (this.options = G),
            (this.context = G.context),
            (this.user = G.authUser || G.context.getModel(r)),
            (this.options.authUser = this.user),
            h.ItemView.prototype.constructor.call(this, G),
            (this.viewStateModel = this.context.viewStateModel),
            c.imbue(this),
            this.options.context &&
              ((this.options.context.memberListView = {}),
              (this.options.context.memberListView.removedItems = [])),
            G.model.fetching
              ? this.listenToOnce(G.model, "sync", this.init.bind(this, G))
              : this.init(G);
        },
        init: function (q) {
          var G = this;
          if (
            ((this.hasPermissionAction =
              q.model &&
              q.model.actions &&
              !!q.model.actions.get({ signature: "permissions" })),
            this.hasPermissionAction)
          ) {
            this.options.model &&
              this.options.model.models &&
              this.options.model.models.length > 0 &&
              (this.options.model = this.options.model.models[0]),
              (this.collection = this.options.collection =
                this.options.context.getCollection(t, this.options)),
              (this.collection.options.node = this.options.model),
              (this.collection.extraMemberModels = []);
            var N = this.context.getObject(P, { permanent: !0, detached: !0 });
            N.ensureFetched().done(
              d.bind(function () {
                var W = N.get("server") && N.get("server").advanced_versioning;
                this.model.set("advancedVersioningEnabled", W, { silent: !0 }),
                  this.model.actions.get("permissions")
                    ? G.collection.fetching
                      ? G.listenToOnce(
                          G.collection,
                          "sync",
                          d.bind(G.onPermissionsRequestSuccess, G, G.options)
                        )
                      : G.collection.fetch({
                          success: d.bind(
                            G.onPermissionsRequestSuccess,
                            G,
                            G.options
                          ),
                          error: d.bind(
                            G.onPermissionsRequestFailed,
                            G,
                            G.options
                          ),
                        })
                    : this.model
                        .fetch({
                          error: d.bind(
                            G.onPermissionsRequestFailed,
                            G,
                            G.options
                          ),
                        })
                        .done(
                          d.bind(function () {
                            G.collection.fetch({
                              success: d.bind(
                                G.onPermissionsRequestSuccess,
                                G,
                                G.options
                              ),
                              error: d.bind(
                                G.onPermissionsRequestFailed,
                                G,
                                G.options
                              ),
                            });
                          }, this)
                        );
              }, this)
            ),
              this.listenTo(this, "permission:changed", function (W) {
                var H = W.originatingView.model.get("id"),
                  z =
                    this.options.connector ||
                    W.connector ||
                    W.originatingView.options.connector ||
                    W.originatingView.collection.connector,
                  Z = new F(void 0, {
                    connector: z,
                    nodes: [H],
                    commands: ["editpermissions"],
                  });
                Z.fetch()
                  .then(
                    d.bind(function (te) {
                      var le = d.map(te.results, function (ge, Pe) {
                        return ge.data.editpermissions;
                      });
                      (this.permissionsContentView.options.hasEditPermissionAction =
                        le && !!le[0]),
                        (le =
                          this.options.model &&
                          this.options.model.actions &&
                          this.options.model.actions.get({
                            signature: "editpermissions",
                          })),
                        !this.permissionsContentView.options
                          .hasEditPermissionAction &&
                          le &&
                          q.model.actions.remove(le),
                        this.permissionsContentView.trigger(
                          "update:editpermissions:acitons",
                          this
                        );
                    }, this)
                  )
                  .fail(
                    d.bind(function (te) {
                      this.permissionsContentView.options.hasEditPermissionAction =
                        !1;
                    }, this)
                  );
              }),
              this._blockActions(),
              this.listenTo(
                this,
                "permission:inlineaction:clicked",
                this._hidePopovers
              );
          }
        },
        onRender: function () {
          if (!this.hasPermissionAction) {
            var q = this.model.get("type_name")
                ? this.model.get("type_name")
                : this.model.get("shortcutNode") &&
                  this.model.get("shortcutNode").get("type_name"),
              G = a("<div />", {
                class: "csui-no-permissions-container",
                html: y({
                  messages: d.str.sformat(D.noPermissionsAvailable, q),
                }),
              });
            this.$el.html(G);
          }
        },
        _hidePopovers: function () {
          if (
            this.$el.parents("body") &&
            this.$el
              .parents("body")
              .find(".csui-edit-permission-popover-container .binf-popover")
          ) {
            var q = this.$el
              .parents("body")
              .find(".csui-edit-permission-popover-container .binf-popover");
            q.data("binf.popover") && q.binf_popover("destroy");
          }
        },
        onFocusInUserPicker: function (q) {
          var G =
            this.options.originatingView &&
            this.options.originatingView.$el.find(
              ".csui-metadata-item-name-dropdown .binf-dropdown"
            );
          G &&
            G.length &&
            G.hasClass("binf-open") &&
            G.removeClass("binf-open");
          var N = this.$el.find(".binf-popover.binf-in");
          N.data("binf.popover") && N.binf_popover("destroy");
        },
        onPermissionsRequestSuccess: function (q) {
          this.permissionsContentView &&
            (this.cancelEventsToViewsPropagation(this.permissionsContentView),
            this.permissionsContentView.destroy());
          var G = d.filter(q.model && q.model.actions.models, function (W) {
              return W.id === "editpermissions";
            }),
            N = q.model.get("container");
          G.length > 0 &&
            this.model.get("permissions_model") !== "simple" &&
            N &&
            ((q.applyTo = {}),
            (q.model = this.model),
            (q.connector = this.model.connector),
            k.fetchPermissionsPreCheck(q)),
            (this.permissionsContentView = new l(
              d.defaults(
                {
                  originatingView: this,
                  context: q.context,
                  collection: q.collection,
                  applyTo: q.applyTo,
                  authUser: this.user,
                  authenticatedUserPermissions:
                    q.collection &&
                    q.collection.options.authenticatedUserPermissions,
                  hasPermissionAction: this.hasPermissionAction,
                  hasEditPermissionAction: G.length > 0,
                },
                q
              )
            )),
            this.propagateEventsToViews(this.permissionsContentView),
            this.renderContent(),
            this._unblockActions();
        },
        onPermissionsRequestFailed: function (q, G, N) {
          var W = new i.RequestErrorMessage(N);
          f.showError(W.toString()), this._unblockActions();
        },
        renderContent: function () {
          var q = this.options.model.fetching;
          if (q) return q.done(d.bind(this.render, this));
          if (this.permissionsContentView) {
            var G = this.permissionsContentView.render();
            h.triggerMethodOn(G, "before:show", G, this),
              this.$el.append(G.el),
              h.triggerMethodOn(G, "show", G, this),
              this.viewStateModel &&
                this.viewStateModel.setSessionViewState("permissions", !0);
          }
        },
        onBeforeDestroy: function () {
          this.permissionsContentView &&
            (this.cancelEventsToViewsPropagation(this.permissionsContentView),
            this.permissionsContentView.destroy(),
            this.viewStateModel &&
              this.viewStateModel.setSessionViewState("permissions", !1));
        },
        _closePermissions: function () {
          var q = this.options.model;
          q.get("type") === 1 && q.original && q.original.get("type") === 0
            ? this.trigger("permissions:close")
            : this.trigger("permissions:close:without:animation");
        },
        _blockActions: function () {
          var q =
            this.options.originatingView &&
            this.options.originatingView.$el.is("visible")
              ? this.options.originatingView
              : this;
          q && q.blockActions && q.blockActions();
        },
        _unblockActions: function () {
          var q =
            this.options.originatingView &&
            this.options.originatingView.$el.is("visible")
              ? this.options.originatingView
              : this;
          q && q.unblockActions && q.unblockActions();
        },
      });
      return d.extend(Q.prototype, n), Q;
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/permission.level.selector/permission.level.selector.view",
    [
      "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",
    ],
    function (v) {
      "use strict";
      return (
        console.warn(
          'DEPRECATED: depend on the module "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view" instead.'
        ),
        v
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/edit.permission.helper",
    ["csui/utils/log", "csui/widgets/permissions/edit/edit.permission.helper"],
    function (v, d) {
      "use strict";
      return (
        v.warn(
          'DEPRECATED: depend on the module "csui/widgets/permissions/edit/edit.permission.helper" instead.'
        ),
        d
      );
    }
  ),
  csui.define(
    "csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view",
    [
      "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view",
    ],
    function (v) {
      "use strict";
      return (
        console.warn(
          'DEPRECATED: depend on the module "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view" instead.'
        ),
        v
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/version.control.dialog/impl/document.version.control",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n =
              i.lookupProperty ||
              function (s, o) {
                if (Object.prototype.hasOwnProperty.call(s, o)) return s[o];
              };
          return (
            `<div class="binf-row">
  <div class="binf-col-sm-12 binf-control-label">
    ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "uploadDocument") ||
                  (e != null ? n(e, "uploadDocument") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "uploadDocument",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 4 },
                      end: { line: 3, column: 22 },
                    },
                  })
                : t)
            ) +
            `
  </div>
  <div class="binf-col-sm-12">
    <label class="binf-radio-inline">
      <input type="radio" name="versioncontrol" value="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorMinorVersion") ||
                  (e != null ? n(e, "majorMinorVersion") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorMinorVersion",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 55 },
                      end: { line: 7, column: 76 },
                    },
                  })
                : t)
            ) +
            `" tabindex='0'
             checked> ` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorMinorVersion") ||
                  (e != null ? n(e, "majorMinorVersion") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorMinorVersion",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 22 },
                      end: { line: 8, column: 43 },
                    },
                  })
                : t)
            ) +
            ` </input>
    </label>
  </div>
  <div class="binf-col-sm-12 csui-minor-example">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorMinorExample") ||
                  (e != null ? n(e, "majorMinorExample") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorMinorExample",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 49 },
                      end: { line: 11, column: 70 },
                    },
                  })
                : t)
            ) +
            `</div>
  <div class="binf-col-sm-12">
    <label class="binf-radio-inline">
      <input type="radio" name="versioncontrol" value="` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorVersion") ||
                  (e != null ? n(e, "majorVersion") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorVersion",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 55 },
                      end: { line: 14, column: 71 },
                    },
                  })
                : t)
            ) +
            `"
             tabindex='0'>` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorVersion") ||
                  (e != null ? n(e, "majorVersion") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorVersion",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 26 },
                      end: { line: 15, column: 42 },
                    },
                  })
                : t)
            ) +
            `</input>
    </label>
  </div>
  <div class="binf-col-sm-12 csui-minor-example">` +
            i.escapeExpression(
              ((t =
                (t =
                  n(l, "majorVersionExample") ||
                  (e != null ? n(e, "majorVersionExample") : e)) != null
                  ? t
                  : i.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (i.nullContext || {}), {
                    name: "majorVersionExample",
                    hash: {},
                    loc: {
                      start: { line: 18, column: 49 },
                      end: { line: 18, column: 72 },
                    },
                  })
                : t)
            ) +
            `</div>
</div>`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_version.control.dialog_impl_document.version.control",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/version.control.dialog/document.version.control.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/controls/version.control.dialog/nls/lang",
      "hbs!csui/controls/version.control.dialog/impl/document.version.control",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior",
      "css!csui/controls/version.control.dialog/impl/version.control.dialog",
    ],
    function (v, d, a, h, i, e, l) {
      "use strict";
      var u = a.ItemView.extend({
        constructor: function (t) {
          a.ItemView.prototype.constructor.apply(this, arguments);
        },
        className: "csui-document-version-control-view",
        template: i,
        behaviors: {
          TabableRegion: { behaviorClass: e },
          VersionControlDialogKeyboardNavigationBehavior: { behaviorClass: l },
        },
        templateHelpers: function () {
          return {
            majorMinorVersion: h.majorAndMinorVersion,
            majorVersion: h.majorVersion,
            majorMinorExample: h.majorMinorExample,
            majorVersionExample: h.majorVersionExample,
            uploadDocument: h.uploadDocument,
          };
        },
        onAfterShow: function () {
          this.$el.find("*[tabindex]").prop("tabindex", 0),
            this.keyboardBehavior.setFocusInView();
        },
        onDomRefresh: function () {
          this.keyboardBehavior.refreshFocusEngage();
        },
        currentlyFocusedElement: function (r) {
          return this.keyboardBehavior.getCurrentlyFocusedElement(r);
        },
        onLastTabElement: function (r, t) {
          return this.keyboardBehavior.isOnLastTabElement(r, t);
        },
        getValue: function () {
          var r = v.filter(
            document.querySelectorAll('input[name="versioncontrol"]'),
            function (t) {
              return t.checked;
            }
          );
          return r[0].value === h.majorAndMinorVersion;
        },
      });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/controls/version.control.dialog/impl/add.version.update",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (v, d, a) {
      var h = a.template({
        1: function (i, e, l, u, r) {
          return " binf-hidden ";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (i, e, l, u, r) {
          var t,
            n,
            s =
              i.lookupProperty ||
              function (o, c) {
                if (Object.prototype.hasOwnProperty.call(o, c)) return o[c];
              };
          return (
            `<div class='binf-row'>
  
<div class="binf-col-sm-12 csui-version-warning ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "hideWarningMessage") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 3, column: 48 },
                  end: { line: 3, column: 95 },
                },
              }
            )) != null
              ? t
              : "") +
            '" id = "' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "warningMessageId") ||
                  (e != null ? s(e, "warningMessageId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "warningMessageId",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 103 },
                      end: { line: 3, column: 123 },
                    },
                  })
                : n)
            ) +
            `">
    ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "warningMessage") ||
                  (e != null ? s(e, "warningMessage") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "warningMessage",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 4 },
                      end: { line: 4, column: 22 },
                    },
                  })
                : n)
            ) +
            `
  </div>
  <div class="binf-col-sm-12 csui-version-update ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "hideSelectVersion") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 6, column: 49 },
                  end: { line: 6, column: 95 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
  <div class="binf-control-label">
  ` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "selectVersionlabel") ||
                  (e != null ? s(e, "selectVersionlabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "selectVersionlabel",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 2 },
                      end: { line: 8, column: 24 },
                    },
                  })
                : n)
            ) +
            `
  </div>
    <label class="binf-radio-inline">
      <input type="radio" name="version" value="true" checked aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "minorVersionlabel") ||
                  (e != null ? s(e, "minorVersionlabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "minorVersionlabel",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 74 },
                      end: { line: 11, column: 95 },
                    },
                  })
                : n)
            ) +
            '"> ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "minorVersion") ||
                  (e != null ? s(e, "minorVersion") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "minorVersion",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 98 },
                      end: { line: 11, column: 114 },
                    },
                  })
                : n)
            ) +
            ` </input>
    </label>
    <label class="binf-radio-inline">
      <input type="radio" name="version" value="false" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "majorVersionlabel") ||
                  (e != null ? s(e, "majorVersionlabel") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "majorVersionlabel",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 67 },
                      end: { line: 14, column: 88 },
                    },
                  })
                : n)
            ) +
            '"> ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "majorVersion") ||
                  (e != null ? s(e, "majorVersion") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "majorVersion",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 91 },
                      end: { line: 14, column: 107 },
                    },
                  })
                : n)
            ) +
            ` </input>
    </label>
  </div>
  <div class="binf-col-sm-12 csui-version-reserve ` +
            ((t = s(l, "if").call(
              e ?? (i.nullContext || {}),
              e != null ? s(e, "isNotReserved") : e,
              {
                name: "if",
                hash: {},
                fn: i.program(1, r, 0),
                inverse: i.noop,
                loc: {
                  start: { line: 17, column: 50 },
                  end: { line: 17, column: 92 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
    <label class="binf-checkbox-inline">
      <input type="checkbox" name="reserve" aria-label="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "unreserve") || (e != null ? s(e, "unreserve") : e)) !=
                null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "unreserve",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 56 },
                      end: { line: 19, column: 69 },
                    },
                  })
                : n)
            ) +
            '"> ' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "keepDocumentReserved") ||
                  (e != null ? s(e, "keepDocumentReserved") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "keepDocumentReserved",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 72 },
                      end: { line: 19, column: 96 },
                    },
                  })
                : n)
            ) +
            `
    </label>
  </div>
  <div class="binf-col-sm-12 csui-version-description" >
    <label class=" binf-control-label" for="` +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "descriptionFieldId") ||
                  (e != null ? s(e, "descriptionFieldId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "descriptionFieldId",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 44 },
                      end: { line: 23, column: 66 },
                    },
                  })
                : n)
            ) +
            '" id = "' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "descriptionLabelId") ||
                  (e != null ? s(e, "descriptionLabelId") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "descriptionLabelId",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 74 },
                      end: { line: 23, column: 96 },
                    },
                  })
                : n)
            ) +
            '">' +
            i.escapeExpression(
              ((n =
                (n =
                  s(l, "description") ||
                  (e != null ? s(e, "description") : e)) != null
                  ? n
                  : i.hooks.helperMissing),
              typeof n == "function"
                ? n.call(e ?? (i.nullContext || {}), {
                    name: "description",
                    hash: {},
                    loc: {
                      start: { line: 23, column: 98 },
                      end: { line: 23, column: 113 },
                    },
                  })
                : n)
            ) +
            `</label>
    <div class="version-description"></div>
  <div/>
</div>

`
          );
        },
      });
      return (
        a.registerPartial(
          "csui_controls_version.control.dialog_impl_add.version.update",
          h
        ),
        h
      );
    }
  ),
  csui.define(
    "csui/controls/version.control.dialog/add.version.control.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!csui/controls/version.control.dialog/impl/add.version.update",
      "i18n!csui/controls/version.control.dialog/nls/lang",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior",
      "csui/controls/form/fields/textareafield.view",
      "css!csui/controls/version.control.dialog/impl/version.control.dialog",
    ],
    function (v, d, a, h, i, e, l, u, r) {
      "use strict";
      var t = h.ItemView.extend({
        constructor: function (s) {
          (this.options = s || (s = {})),
            (this.fileName = s.fileName),
            (this.latestMinor =
              s.latestVersion.get("version_number_major") +
              "." +
              (s.latestVersion.get("version_number_minor") + 1)),
            (this.latestMajor = (
              s.latestVersion.get("version_number_major") + 1
            ).toFixed(1)),
            (this.reserved = s.reserved),
            (this.selectVersion = s.selectVersion),
            (this.descriptionLabelId = v.uniqueId("version-description-label")),
            (this.descriptionFieldId = v.uniqueId("version-description-field")),
            (this.warningMessageId = v.uniqueId("version-unreserved-warning")),
            (this.warningMessage = s.warningMessage),
            (this.hideWarningMessage = s.hideWarningMessage),
            h.ItemView.prototype.constructor.apply(this, arguments);
        },
        className: "csui-add-version-update",
        template: i,
        behaviors: {
          TabableRegion: { behaviorClass: l },
          VersionControlDialogKeyboardNavigationBehavior: { behaviorClass: u },
        },
        ui: { description: ".version-description" },
        templateHelpers: function () {
          const n = v.str.sformat(e.majorVersionAria, this.latestMajor),
            s = v.str.sformat(e.minorVersionAria, this.latestMinor);
          return {
            minorVersion: this.latestMinor,
            majorVersion: this.latestMajor,
            keepDocumentReserved: e.keepDocumentReserved,
            selectVersionlabel: e.selectVersionlabel,
            isNotReserved: !this.reserved,
            hideSelectVersion: !this.selectVersion,
            majorVersionlabel: n,
            minorVersionlabel: s,
            descriptionLabelId: this.descriptionLabelId,
            descriptionFieldId: this.descriptionFieldId,
            description: e.description,
            warningMessage: this.warningMessage,
            hideWarningMessage: this.hideWarningMessage,
            warningMessageId: this.warningMessageId,
          };
        },
        onRender: function () {
          const n = new a.Model({
              id: this.descriptionFieldId,
              options: { placeholder: e.addDescription },
            }),
            s = new r({
              model: n,
              mode: "writeonly",
              labelId: this.descriptionLabelId,
              maxLength: 255,
            });
          (this.descriptionField = s),
            new h.Region({ el: this.ui.description }).show(s);
        },
        onAfterShow: function () {
          this.$el.find("*[tabindex]").prop("tabindex", 0),
            this.keyboardBehavior.setFocusInView();
        },
        onDomRefresh: function () {
          this.keyboardBehavior.refreshFocusEngage();
        },
        currentlyFocusedElement: function (n) {
          return this.keyboardBehavior.getCurrentlyFocusedElement(n);
        },
        onLastTabElement: function (n, s) {
          return this.keyboardBehavior.isOnLastTabElement(n, s);
        },
        getValue: function () {
          return {
            promoteToMajor: !document.querySelector('input[name="version"]')
              .checked,
            reserved: !!(
              this.reserved &&
              !document.querySelector('input[name="reserve"]').checked
            ),
            description: this.descriptionField.getValue(),
          };
        },
      });
      return t;
    }
  ),
  csui.define("json!csui/widgets/nodestable/nodestable.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{title}}",
    description: "{{description}}",
    kind: "fullpage",
    schema: {
      type: "object",
      properties: {
        containerId: {
          title: "{{containerIdTitle}}",
          description: "{{containerIdDescription}}",
          type: "integer",
        },
      },
    },
    options: {
      fields: {
        containerId: {
          type: "otcs_node_picker",
          type_control: { parameters: { select_types: [-1] } },
        },
      },
    },
    actions: [
      {
        toolItems: "csui/widgets/nodestable/toolbaritems",
        toolItemMasks: "csui/widgets/nodestable/toolbaritems.masks",
        toolbars: [
          {
            id: "tableHeaderToolbar",
            title: "{{tableHeaderToolbarTitle}}",
            description: "{{tableHeaderToolbarDescription}}",
          },
          {
            id: "inlineActionbar",
            title: "{{inlineActionbarTitle}}",
            description: "{{inlineActionbarDescription}}",
          },
          {
            id: "leftToolbar",
            title: "{{leftToolbarTitle}}",
            description: "{{leftToolbarDescription}}",
          },
          {
            id: "rightToolbar",
            title: "{{rightToolbarTitle}}",
            description: "{{rightToolbarDescription}}",
          },
        ],
      },
      {
        toolItems: "csui/widgets/nodestable/headermenuitems",
        toolItemMasks: "csui/widgets/nodestable/headermenuitems.mask",
        toolbars: [
          {
            id: "headerMenuToolbar",
            title: "{{headerMenuTitle}}",
            description: "{{headerMenuDescription}}",
          },
        ],
      },
    ],
  }),
  csui.define("csui/widgets/nodestable/impl/nls/nodestable.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/nodestable/impl/nls/root/nodestable.manifest", {
    title: "Node Browsing Table",
    description: "Provides a tabular view on objects stored in a container.",
    containerIdTitle: "Container",
    containerIdDescription: "A container object to browse children of.",
    pageSizeTitle: "Default Page Size",
    pageSizeDescription:
      "The maximum object count to be displayed in the table body by default.",
    pageSizesTitle: "Available Page Sizes",
    pageSizesDescription:
      "A list of maximum displayed object counts in the table body to be chosen from.",
    leftToolbarTitle: "Left Header Toolbar",
    leftToolbarDescription:
      "Toolbar on the left side of the name of the currently opened container.",
    rightToolbarTitle: "Right Header Toolbar",
    rightToolbarDescription:
      "Toolbar on the right side of the name of the currently opened container.",
    tableHeaderToolbarTitle: "Table Header Toolbar",
    tableHeaderToolbarDescription:
      "Toolbar, which is activated in the table header, once a table row is selected.",
    inlineActionbarTitle: "Inline Action Bar",
    inlineActionbarDescription:
      "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
    headerMenuTitle: "Container Context Menu",
    headerMenuDescription:
      "Context menu, which is displayed when clicking on the arrow on the right side of the name of the currently opened container.",
    viewStateTitle: "Support url parameters",
    viewStateDescription: "Save the widget state in the url parameters.",
  }),
  csui.define(
    "bundles/csui-browse",
    [
      "csui/behaviors/item.name/item.name.behavior",
      "csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior",
      "csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog",
      "csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view",
      "csui/controls/conflict.resolver/conflict.resolver",
      "csui/controls/side.panel/side.panel.view",
      "csui/controls/draganddrop/draganddrop.view",
      "csui/controls/fileupload/fileupload",
      "csui/controls/settings/settings.view",
      "csui/controls/table/rows/description/search.description.view",
      "i18n!csui/controls/draganddrop/impl/nls/lang",
      "csui/controls/fileupload/impl/addversion.controller",
      "csui/controls/pagination/nodespagination.view",
      "csui/controls/item.title/item.title.view",
      "csui/controls/table/table.columns",
      "csui/controls/table/table.view",
      "csui/controls/table.list/table.list.view",
      "csui/controls/table/inlineforms/inlineform.factory",
      "csui/controls/tabletoolbar/nls/localized.strings",
      "csui/controls/tabletoolbar/tabletoolbar.view",
      "csui/controls/table.configuration.toolbar/configuration.toolbar.dropdown.view",
      "csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view",
      "csui/controls/table/inlineforms/inlineform/inlineform.schemas",
      "csui/controls/table/inlineforms/inlineform/impl/csui.inlineform.schemas",
      "csui/controls/table/inlineforms/base/inline.edit.view",
      "csui/controls/table/inlineforms/base/base.inline.form.view",
      "csui/controls/table/inlineforms/base/views/textfield/textfield.view",
      "csui/controls/table/inlineforms/base/views/selectfield/selectfield.view",
      "csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view",
      "csui/controls/table/inlineforms/favorite/favorite.view",
      "csui/controls/table/inlineforms/generic/generic.view",
      "csui/controls/table/inlineforms/inlineform/inlineform.view",
      "csui/controls/table/inlineforms/inlineform/impl/inlineform.view",
      "csui/controls/table/inlineforms/inlineform.registry",
      "csui/controls/table/inlineforms/permissions/user.picker/user.picker.view",
      "csui/controls/table/inlineforms/folder/folder.view",
      "csui/controls/table/cells/cell/cell.view",
      "csui/controls/table/cells/celleditor/celleditor.view",
      "csui/controls/table/cells/cell.factory",
      "csui/controls/table/cells/cell.registry",
      "csui/controls/table/cells/date/date.view",
      "csui/controls/table/cells/description/description.view",
      "csui/controls/table/cells/datetime/datetime.view",
      "csui/controls/table/cells/duedate/duedate.view",
      "csui/controls/table/cells/favorite/favorite.view",
      "csui/controls/table/cells/member/member.view",
      "csui/controls/table/cells/name/name.view",
      "csui/controls/table/cells/node.state/node.state.view",
      "csui/controls/table/cells/parent/parent.view",
      "csui/controls/table/cells/priority/priority.view",
      "csui/controls/table/cells/reservation/reservation.view",
      "csui/controls/table/cells/searchbox/searchbox.view",
      "csui/controls/table/cells/select/select.view",
      "csui/controls/table/cells/size/size.view",
      "csui/controls/table/cells/status/status.view",
      "csui/controls/table/cells/templated/templated.view",
      "csui/controls/table/cells/text/text.view",
      "csui/controls/table/cells/type.icon/type.icon.view",
      "csui/controls/table/cells/user/user.view",
      "csui/controls/table/cells/permission/permission.level.view",
      "csui/controls/tree/tree.view",
      "csui/controls/node.state/node.states.view",
      "csui/controls/node.state/node.state.icons",
      "csui/controls/node.state/impl/node.state.icons",
      "csui/controls/table/rows/description/description.view",
      "csui/controls/table/rows/metadata/metadatarow.view",
      "csui/controls/thumbnail/thumbnail.view",
      "csui/controls/thumbnail/thumbnail.content",
      "csui/controls/thumbnail/content/content.registry",
      "csui/controls/thumbnail/content/content.factory",
      "csui/controls/thumbnail/content/favorite/favorite.view",
      "csui/controls/thumbnail/content/name/name.view",
      "csui/controls/thumbnail/content/member/member.view",
      "csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view",
      "csui/controls/thumbnail/content/overview/overview.view",
      "csui/controls/thumbnail/content/select/select.view",
      "csui/controls/thumbnail/content/size/size.view",
      "csui/controls/thumbnail/content/date/date.view",
      "csui/controls/thumbnail/content/node.state/node.state.view",
      "csui/controls/thumbnail/content/node.state/impl/node.state.icons",
      "csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view",
      "csui/controls/thumbnail/content/overview/overview.content",
      "csui/controls/thumbnail/content/overview/properties.overview",
      "csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view",
      "csui/controls/zipanddownload/impl/preflight.dialog/preflight.dialog.view",
      "csui/controls/zipanddownload/impl/download.dialog/download.dialog.view",
      "csui/controls/wizard/wizard.view",
      "csui/controls/wizard/step/footer.view",
      "csui/controls/wizard/step/wizard.step.view",
      "csui/dialogs/members.picker/members.picker.dialog",
      "csui/dialogs/node.picker/node.picker",
      "csui/dialogs/node.picker/node.picker.v2",
      "csui/dialogs/node.picker/data/node.picker.extra.data",
      "csui/dialogs/node.picker/data/impl/csui.node.picker.extra.data",
      "csui/dialogs/multilingual.text.picker/multilingual.text.picker",
      "csui/dialogs/restructure/restructure.dialog",
      "csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view",
      "csui/controls/multilingual.text.picker/multilingual.text.picker",
      "csui/dialogs/node.picker/start.locations/location.base.factory",
      "csui/dialogs/node.picker/start.locations/node.base.factory",
      "csui/dialogs/node.picker/start.locations/start.location.collection",
      "csui/dialogs/node.picker/start.locations/current.location/current.location.factory",
      "csui/dialogs/node.picker/start.locations/enterprise.volume/enterprise.volume.factory",
      "csui/dialogs/node.picker/start.locations/favorites/favorites.factory",
      "csui/dialogs/node.picker/start.locations/personal.volume/personal.volume.factory",
      "csui/dialogs/node.picker/start.locations/category.volume/category.volume.factory",
      "csui/dialogs/node.picker/start.locations/perspective.assets.volume/perspective.assets.volume.factory",
      "csui/dialogs/node.picker/start.locations/recent.containers/recent.containers.factory",
      "csui/dialogs/node.picker/start.locations/search.location/search.location.factory",
      "csui/dialogs/node.picker/start.locations/default.location/default.location.factory",
      "csui/dialogs/node.picker/start.locations/support.assets.volume/support.assets.volume.factory",
      "csui/dialogs/members.picker/members.picker.wizard",
      "csui/dialogs/members.picker/start.locations/location.base.factory",
      "csui/dialogs/members.picker/start.locations/start.location.collection",
      "csui/dialogs/members.picker/start.locations/current.group/current.group.factory",
      "csui/dialogs/members.picker/start.locations/all.members/all.members.factory",
      "csui/dialogs/members.picker/start.locations/member.groups/member.groups.factory",
      "csui/dialogs/members.picker/start.locations/recent.groups/recent.groups.factory",
      "csui/dialogs/members.picker/start.locations/all.groups/all.groups.factory",
      "csui/dialogs/members.picker/start.locations/acl.groups/acl.groups.factory",
      "csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection",
      "csui/models/permission/acl.group.server.adaptor.mixin",
      "csui/integration/folderbrowser/folderbrowser.widget",
      "csui/integration/folderbrowser2/folderbrowser2.widget",
      "csui/integration/folderbrowser2/container.enforcer",
      "csui/integration/target.picker/target.picker",
      "csui/integration/v1.widgets.wrapper",
      "csui/integration/permission.header/permission.header.view",
      "csui/integration/permission/table/cells/security.permission.cell",
      "csui/integration/permission/table/permission.table.columns",
      "csui/integration/folderbrowser/impl/nodestable.toolitems",
      "csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap",
      "csui/lib/jquery.dataTables/js/jquery.dataTables",
      "csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools",
      "csui/widgets/search.results/impl/search.results.factory",
      "css!csui/widgets/search.results/impl/search.results",
      "csui/widgets/nodestable/nodestable.view",
      "csui/utils/testutils/async.test.utils",
      "csui/utils/toolitem.masks/children.toolitems.mask",
      "csui/utils/toolitem.masks/creation.toolitems.mask",
      "csui/widgets/favorites2.table/toolbaritems",
      "csui/widgets/favorites2.table/toolbaritems.masks",
      "csui/widgets/nodestable/headermenuitems",
      "csui/widgets/nodestable/headermenuitems.mask",
      "csui/widgets/nodestable/toolbaritems",
      "csui/widgets/nodestable/toolbaritems.masks",
      "csui/widgets/recentlyaccessedtable/toolbaritems",
      "csui/widgets/recentlyaccessedtable/toolbaritems.masks",
      "csui/widgets/favorites2.table/favorites2.table.view",
      "csui/widgets/favorites/favorite.star.view",
      "csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view",
      "csui/widgets/recycle.items.table/recycle.items.table.view",
      "csui/widgets/recycle.items.table/recycle.items.table.header.view",
      "csui/widgets/permissions/permissions.view",
      "csui/widgets/permissions/impl/edit/permission.level.selector/permission.level.selector.view",
      "csui/widgets/permissions/impl/edit/edit.permission.helper",
      "csui/widgets/permissions/impl/permissions.list/toolbaritems",
      "csui/widgets/permissions/impl/permissions.list/toolbaritems.masks",
      "csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items",
      "csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view",
      "csui/widgets/permissions/edit/apply.permission/apply.permission.view",
      "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",
      "csui/widgets/permissions/edit/permission.attributes/permission.attributes.view",
      "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view",
      "csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view",
      "csui/widgets/permissions/edit/edit.permission.helper",
      "i18n!csui/widgets/permissions/nls/lang",
      "csui/controls/tablesettings/table.settings.dropdown.view",
      "csui/controls/versionsettings/version.settings.view",
      "csui/controls/version.control.dialog/version.control.dialog.view",
      "csui/controls/version.control.dialog/document.version.control.view",
      "csui/controls/version.control.dialog/add.version.control.view",
      "csui/controls/version.control.dialog/disable.version.settings.view",
      "json!csui/widgets/nodestable/nodestable.manifest.json",
      "i18n!csui/widgets/nodestable/impl/nls/nodestable.manifest",
      "csui/utils/dragndrop.supported.subtypes",
      "csui/utils/permissions/permissions.precheck",
    ],
    {}
  ),
  csui.require(["require", "css"], function (v, d) {
    d.styleLoad(v, "csui/bundles/csui-browse", !0);
  });
/**
 * @preserve
 * DataTables 1.10.4
 * 2008-2014 SpryMedia Ltd - datatables.net/license
 */
/**
 * @preserve
 * DataTables Bootstrap 3 integration
 * 2011-2014 SpryMedia Ltd - datatables.net/license
 */
/**
 * @preserve
 * TableTools 2.2.3
 * 2009-2014 SpryMedia Ltd - datatables.net/license
 *
 * ZeroClipboard 1.0.4
 * Author: Joseph Huckaby - MIT licensed
 */
//!!this.options.query.get('where');
//# sourceMappingURL=csui-browse.js.map

csui.define(
  "csui/behaviors/expanding/expanding.behavior",
  [
    "require",
    "csui/lib/underscore",
    "csui/lib/backbone",
    "csui/lib/marionette",
  ],
  function (x, m, p, y) {
    var s = y.Behavior.extend({
      constructor: function (f, t) {
        y.Behavior.prototype.constructor.apply(this, arguments);
        var i = m.bind(this._destroyExpandedView, this, !1),
          o = m.bind(this._destroyExpandedView, this, !0),
          n = t.options && t.options.context;
        (this.boundHistoryBack = m.bind(this.historyBack, this)),
          this.listenTo(this, "before:destroy", i),
          n &&
            this.listenTo(n, "request", i).listenTo(
              n,
              "request:perspective",
              i
            );
      },
      onExpand: function () {
        if (!this.expanded) {
          this.expanded = !0;
          var l = this,
            f = this.view.completeCollection
              ? this.view.completeCollection.clone()
              : this.view.collection.clone();
          this.view.currentFilter !== void 0 &&
            f.setFilter(this.view.currentFilter, { fetch: !1 }),
            this.view.isSearchOpen() && this.view.searchClicked();
          var t = l.getOption("expandedView"),
            i = t;
          m.isString(t) !== !0 &&
            (i = t.prototype instanceof p.View ? t : t.call(l.view));
          var o = ["csui/controls/dialog/dialog.view"];
          m.isString(i) && o.push(i),
            x(
              o,
              function (n) {
                m.isString(i) && (i = arguments[1]);
                var u = e(l.options, "expandedViewOptions", l.view);
                (l.expandedView = new i(
                  m.extend(
                    {
                      context: l.view.options.context,
                      collection: f,
                      orderBy: e(l.options, "orderBy", l.view),
                      filterBy: l.view.currentFilter,
                      limited: !1,
                      isExpandedView: !0,
                    },
                    u
                  )
                )),
                  (l.dialog = new n({
                    iconLeft:
                      e(l.options, "titleBarIcon", l.view) ||
                      e(l.view.options, "titleBarIcon", l.view),
                    iconNameLeft:
                      e(l.options, "titleBarIconName", l.view) ||
                      e(l.view.options, "titleBarIconName", l.view),
                    actionIconLeft:
                      e(l.options, "actionTitleBarIcon", l.view) ||
                      e(l.view.options, "actionTitleBarIcon", l.view),
                    actionIconNameLeft:
                      e(l.options, "actionTitleBarIconName", l.view) ||
                      e(l.view.options, "actionTitleBarIconName", l.view),
                    imageLeftUrl: e(l.options, "titleBarImageUrl", l.view),
                    imageLeftClass: e(l.options, "titleBarImageClass", l.view),
                    title: e(l.options, "dialogTitle", l.view),
                    iconRight: e(l.options, "dialogTitleIconRight", l.view),
                    iconNameRight: e(
                      l.options,
                      "dialogTitleIconNameRight",
                      l.view
                    ),
                    className: r(l.options, "dialogClassName", l.view),
                    largeSize: !0,
                    view: l.expandedView,
                    headerView: e(l.options, "headerView", l.view),
                    notabablesBehavior: e(
                      l.options,
                      "notabablesBehavior",
                      l.view
                    ),
                  })),
                  l.bindHistoryBack(),
                  l
                    .listenTo(l.dialog, "before:hide", l._expandOtherView)
                    .listenTo(l.dialog, "destroy", l._enableExpandingAgain),
                  l._expandOtherView(!1),
                  l.dialog.show();
              },
              function (n) {
                l.expanded = !1;
              }
            );
        }
      },
      bindHistoryBack: function () {
        window.addEventListener("popstate", this.boundHistoryBack);
      },
      historyBack: function (l) {
        this.dialog && this.dialog.destroy();
      },
      _destroyExpandedView: function (l) {
        if (this.dialog) {
          var f = l ? "kill" : "destroy";
          this.dialog[f](),
            (this.dialog = void 0),
            window.removeEventListener("popstate", this.boundHistoryBack);
        }
      },
      _expandOtherView: function (l) {
        this.options.collapsedView &&
          this.options.collapsedView.triggerMethod(
            l === !1 ? "go:away" : "go:back"
          );
      },
      _enableExpandingAgain: function () {
        if (((this.expanded = !1), this.view.tabableRegionBehavior)) {
          var l = this.view.tabableRegionBehavior,
            f = this.view.ui.tileExpand;
          l.currentlyFocusedElement &&
            l.currentlyFocusedElement.prop("tabindex", -1),
            f && f.prop("tabindex", 0),
            f.trigger("focus"),
            l.setInitialTabIndex(),
            (this.view.currentTabPosition = 2);
        }
      },
    });
    function e(l, f, t) {
      if (l != null) {
        var i = l[f];
        return m.isFunction(i) ? l[f].call(t) : i;
      }
    }
    function r(l, f, t) {
      var i = e(l, f, t);
      return i ? (i += " csui-expanded") : (i = "csui-expanded"), i;
    }
    return s;
  }
),
  csui.define("csui/behaviors/item.error/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/behaviors/item.error/impl/nls/root/lang", {
    itemCannotBeAccessed: "Item cannot be accessed.",
  }),
  csui.define(
    "csui/behaviors/item.error/item.error.behavior",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/error/error.view",
      "i18n!csui/behaviors/item.error/impl/nls/lang",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.Behavior.extend({
        constructor: function (f, t) {
          p.Behavior.prototype.constructor.apply(this, arguments),
            (this.view = t);
          var i = r.call(this, "model") || t.model || t.options.model;
          this._setupErrorHandling(i);
          var o = this.getOption("errorView");
          x.isFunction(o) &&
            !(o.prototype instanceof m.View) &&
            (o = o.call(t)),
            o || (o = y);
          var n = t.getTemplate,
            u = this;
          t.getTemplate = function () {
            if (this.model && this.model.error) {
              var d = r.call(u, "el");
              if (typeof d != "string" && !r.call(u, "region")) return !1;
            }
            return n.apply(t, arguments);
          };
          var c;
          this.listenTo(t, "render", function () {
            var d = this.model && this.model.error;
            if (d) {
              if ((c && c.empty(), (c = r.call(this, "region")), !c)) {
                var h = r.call(this, "el") || t.el;
                typeof h == "string" && (h = t.$(h)),
                  (c = new p.Region({ el: h }));
              }
              c.show(
                new o(
                  x.extend(
                    {
                      model: new m.Model({
                        message: s.itemCannotBeAccessed,
                        title: d.message,
                      }),
                    },
                    r.call(this, "errorViewOptions")
                  )
                )
              );
            }
          })
            .listenTo(t, "before:destroy", function () {
              c && c.empty();
            })
            .listenTo(t, "update:model", this._setupErrorHandling);
        },
        _setupErrorHandling: function (l) {
          this.model && this.stopListening(this.model),
            (this.model = l),
            this.listenTo(this.model, "error", function () {
              this.view.render();
            });
        },
      });
      function r(l) {
        var f = this.getOption(l);
        return x.isFunction(f) ? f.call(this.view) : f;
      }
      return e;
    }
  ),
  csui.define(
    "hbs!csui/behaviors/item.state/impl/item.state",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 0 },
                      end: { line: 1, column: 11 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
      });
      return (
        p.registerPartial("csui_behaviors_item.state_impl_item.state", y), y
      );
    }
  ),
  csui.define(
    "csui/behaviors/item.state/item.state.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "hbs!csui/behaviors/item.state/impl/item.state",
    ],
    function (x, m, p) {
      "use strict";
      var y = m.ItemView.extend({
        className: "csui-item-state",
        template: p,
        constructor: function () {
          m.ItemView.prototype.constructor.apply(this, arguments),
            this.listenTo(this.model, "change:state", this.render).listenTo(
              this,
              "render",
              this._updateClasses
            );
        },
        serializeData: function () {
          return x.extend(this.model.toJSON(), {
            message: this.options.stateMessages[this.model.get("state")],
          });
        },
        _updateClasses: function () {
          this.$el
            .removeClass("csui-state-loading csui-state-failed")
            .addClass("csui-state-" + this.model.get("state"));
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/behaviors/item.state/item.state.behavior",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/item.state/item.state.view",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.Behavior.extend({
        constructor: function (l, f) {
          p.Behavior.prototype.constructor.apply(this, arguments),
            (this.view = f);
          var t = e.call(this, "model") || f.model || f.options.model;
          this.listenTo(t, "request", this._fetchingCollectionStarted)
            .listenTo(t, "sync", this._fetchingCollectionSucceeded)
            .listenTo(t, "error", this._fetchingCollectionFailed),
            (this.itemState = new m.Model({
              state: t.fetching ? "loading" : t.error ? "failed" : "loaded",
            }));
          var i = this.getOption("stateView");
          x.isFunction(i) &&
            !(i.prototype instanceof m.View) &&
            (i = i.call(f)),
            (this.stateView = i || y);
          var o = f.getTemplate,
            n = this;
          f.getTemplate = function () {
            if (!t.fetched) {
              var c = e.call(n, "el");
              if (typeof c != "string" && !e.call(n, "region")) return !1;
            }
            return o.apply(f, arguments);
          };
          var u;
          this.listenTo(f, "render", function () {
            if (!t.fetched) {
              if ((u && u.empty(), (u = e.call(this, "region")), !u)) {
                var c = e.call(this, "el") || f.el;
                typeof c == "string" && (c = f.$(c)),
                  (u = new p.Region({ el: c }));
              }
              u.show(
                new this.stateView(
                  x.extend(
                    {
                      model: this.itemState,
                      stateMessages: e.call(this, "stateMessages") || {},
                    },
                    e.call(this, "stateViewOptions")
                  )
                )
              );
            }
          }).listenTo(f, "before:destroy", function () {
            u && u.empty();
          });
        },
        _fetchingCollectionStarted: function () {
          this.itemState.set("state", "loading"),
            this.view.render(),
            this.view.blockWithoutIndicator &&
              this.view.blockWithoutIndicator();
        },
        _fetchingCollectionSucceeded: function (r) {
          this.itemState.set("state", "loaded"),
            this.view.unblockActions && this.view.unblockActions();
        },
        _fetchingCollectionFailed: function () {
          this.itemState.set("state", "failed"),
            this.view.unblockActions && this.view.unblockActions();
        },
      });
      function e(r) {
        var l = this.getOption(r);
        return x.isFunction(l) ? l.call(this.view) : l;
      }
      return s;
    }
  ),
  csui.define(
    "csui/behaviors/limiting/limiting.behavior",
    ["csui/lib/underscore", "csui/lib/backbone", "csui/lib/marionette"],
    function (x, m, p) {
      "use strict";
      var y = p.Behavior.extend({
        defaults: { limit: 6, filterByProperty: "name" },
        collectionEvents: { reset: "enableMoreLink" },
        events: {
          "click .cs-more": "onMoreLinkClick",
          "click .tile-expand": "onMoreLinkClick",
        },
        ui: { moreLink: ".cs-more" },
        constructor: function (r, l) {
          p.Behavior.prototype.constructor.apply(this, arguments);
        },
        initialize: function (e, r) {
          if (r.options.limited !== !1) {
            var l = r.collection,
              f;
            l ||
              ((l = this.getOption("completeCollection")),
              l instanceof m.Collection ||
                ((f = this.getOption("completeCollectionOptions")),
                l.prototype instanceof m.Collection
                  ? (l = new l(void 0, f))
                  : ((l = l.call(r)),
                    l instanceof m.Collection || (l = new l(void 0, f))))),
              r.options.orderBy && l.setOrder(r.options.orderBy, !1),
              this.listenTo(l, "add", this._addItem)
                .listenTo(l, "remove", this._removeItem)
                .listenTo(l, "reset", this.enableMoreLink)
                .listenTo(l, "sync", function (i) {
                  i instanceof m.Collection && this.synchronizeCollections();
                }),
              (r.completeCollection = l);
            var t = m.Collection.extend(l ? { model: l.model } : {});
            (r.collection = new t()),
              this.synchronizeCollections(),
              this.listenTo(
                r,
                "change:filterValue",
                this.synchronizeCollections
              );
          }
        },
        synchronizeCollections: function () {
          if (this.view.collection !== this.view.completeCollection) {
            var e;
            if (
              this.view.options.filterValue &&
              this.view.options.filterValue.length > 0
            ) {
              var r = this.view.options.filterValue.toLowerCase().split(" "),
                l = s(this.options, "filterByProperty", this.view);
              (this.view.currentFilter = {}),
                (this.view.currentFilter[l] =
                  this.view.options.filterValue.toLowerCase()),
                (e = this.view.completeCollection.filter(function (f) {
                  var t = f.get(l),
                    i;
                  return (
                    t &&
                      ((t = t.trim().toLowerCase()),
                      (i = x.reduce(
                        r,
                        function (o, n) {
                          return o && t.indexOf(n) >= 0;
                        },
                        !0
                      ))),
                    i
                  );
                }));
            } else
              (this.view.currentFilter = void 0),
                (e = this.view.completeCollection.models);
            this.view.collection.reset(e);
          }
        },
        enableMoreLink: function () {
          var e = s(this.options, "limit", this.view),
            r =
              this.view.completeCollection &&
              this.view.completeCollection.length > e;
          this.ui.moreLink instanceof Object &&
            this.ui.moreLink[r ? "removeClass" : "addClass"]("binf-hidden");
        },
        onMoreLinkClick: function (e) {
          e.preventDefault(),
            e.stopPropagation(),
            this.view.triggerMethod("expand");
        },
        _addItem: function (e) {
          var r = this.view.completeCollection.indexOf(e);
          this.view.collection.add(e, { at: r });
        },
        _removeItem: function (e) {
          this.view.collection.remove(e);
        },
      });
      function s(e, r, l) {
        if (e != null) {
          var f = e[r];
          return x.isFunction(f) ? e[r].call(l) : f;
        }
      }
      return y;
    }
  ),
  csui.define("css!csui/behaviors/resizable/resizable", [], function () {}),
  csui.define(
    "csui/behaviors/resizable/resizable.behavior",
    [
      "csui/lib/marionette",
      "module",
      "i18n",
      "css!csui/behaviors/resizable/resizable",
    ],
    function (x, m, p) {
      let y = m.config();
      y = { ...y, ...y?.csui };
      var s = x.Behavior.extend({
        constructor: function (r = {}, l) {
          y.enablePanelResize &&
            (this.listenTo(l, {
              dynamicDomLoaded: this.initializeResizeBehaviour,
            }),
            (this.options = r));
        },
        initializeResizeBehaviour: function (e, r) {
          e.parent()[0]?.classList.add("csui-resizable"),
            e.resizable({
              minWidth: this.options?.minWidth
                ? Math.max(this.options.minWidth, 240)
                : 248,
              maxWidth: "50%",
              handles: p.settings.rtl ? "w" : "e",
              start: function () {
                e[0]?.classList.add("csui-no-transition");
              },
              stop: function () {
                e[0]?.classList.remove("csui-no-transition"),
                  r.triggerMethod("dom:refresh");
              },
            });
        },
      });
      return (s.config = y), s;
    }
  ),
  csui.define(
    "hbs!csui/controls/tile/behaviors/impl/expanding.behavior",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="cs-more tile-expand" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "expandIconTitle") ||
                  (e != null ? o(e, "expandIconTitle") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "expandIconTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 40 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "expandIconAria") ||
                  (e != null ? o(e, "expandIconAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "expandIconAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 91 },
                    },
                  })
                : i)
            ) +
            `"
     role="button">
  ` +
            ((t = (
              o(r, "icon-v2") ||
              (e && o(e, "icon-v2")) ||
              s.hooks.helperMissing
            ).call(e ?? (s.nullContext || {}), {
              name: "icon-v2",
              hash: { states: "true", iconName: "csui_action_expand32" },
              loc: {
                start: { line: 3, column: 2 },
                end: { line: 3, column: 61 },
              },
            })) != null
              ? t
              : "") +
            `
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_tile_behaviors_impl_expanding.behavior",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/tile/behaviors/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/tile/behaviors/impl/nls/root/lang", {
    expandIconTooltip: "Expand",
    expandIconAria: "Expand {0} widget",
  }),
  csui.define(
    "csui/controls/tile/behaviors/expanding.behavior",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!csui/controls/tile/behaviors/impl/expanding.behavior",
      "i18n!csui/controls/tile/behaviors/impl/nls/lang",
      "csui/controls/icons.v2",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      var l = y.Behavior.extend({
        defaults: { expandButton: ".tile-footer" },
        triggers: {
          "click .cs-more": "expand",
          "click .tile-header": "expand",
        },
        lastActiveElm: [],
        constructor: function (i, o) {
          y.Behavior.prototype.constructor.apply(this, arguments),
            this.listenTo(o, "render", this._renderExpandButton),
            this.listenTo(o, "expand", this._expand);
          var n = m.bind(this._destroyExpandedView, this, !1),
            u = m.bind(this._destroyExpandedView, this, !0),
            c = o.options && o.options.context;
          this.listenTo(this, "before:destroy", n),
            c &&
              this.listenTo(c, "request", n).listenTo(
                c,
                "request:perspective",
                n
              );
        },
        _renderExpandButton: function () {
          var t = f.call(this, "expandButton"),
            i = this.view.$(t),
            o = f.call(this, "expandIconTitle"),
            n = o || e.expandIconTooltip,
            u = f.call(this, "dialogTitle"),
            c = f.call(this, "expandIconAria"),
            d = c || m.str.sformat(e.expandIconAria, u),
            h = { expandIconTitle: n, expandIconAria: d };
          i.html(s(h));
        },
        _expand: function () {
          if (!(this.expanded || (this.view && this.view.errorExists))) {
            (this.expanded = !0),
              this.lastActiveElm.push(document.activeElement);
            var t = this.getOption("expandedView"),
              i = t.prototype instanceof p.View ? t : t.call(this.view),
              o = ["csui/controls/dialog/dialog.view"],
              n = this;
            m.isString(i) && o.push(i),
              x(o, function (u) {
                m.isString(i) && (i = arguments[1]);
                var c = f.call(n, "expandedViewOptions"),
                  d = new i(c);
                (n._dialog = new u({
                  iconLeft: f.call(n, "titleBarIcon"),
                  imageLeftUrl: f.call(n, "titleBarImageUrl"),
                  imageLeftClass: f.call(n, "titleBarImageClass"),
                  title: f.call(n, "dialogTitle"),
                  iconRight: f.call(n, "dialogTitleIconRight"),
                  className:
                    "cs-expanded " + (f.call(n, "dialogClassName") || ""),
                  largeSize: !0,
                  view: d,
                })),
                  n
                    .listenTo(n._dialog, "hide", function () {
                      n.triggerMethod("collapse");
                    })
                    .listenTo(n._dialog, "destroy", n._enableExpandingAgain),
                  n._dialog.show();
              });
          }
        },
        _enableExpandingAgain: function () {
          (this.expanded = !1),
            (
              this.lastActiveElm.length > 0 && this.lastActiveElm.pop()
            )?.focus();
        },
        _destroyExpandedView: function () {
          this._dialog && (this._dialog.destroy(), (this._dialog = void 0));
        },
      });
      function f(t) {
        var i = this.options || {},
          o = i[t];
        return m.isFunction(o) ? i[t].call(this.view) : o;
      }
      return l;
    }
  ),
  csui.define(
    "hbs!csui/controls/tile/impl/tile",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `    <div class="tile-type-icon">
      <span class="icon title-icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 35 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></span>
    </div>
`
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "imageUrl") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(4, f, 0),
              inverse: s.noop,
              loc: {
                start: { line: 8, column: 4 },
                end: { line: 12, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        4: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '      <div class="tile-type-image ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "imageClass") || (e != null ? i(e, "imageClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imageClass",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 34 },
                      end: { line: 9, column: 48 },
                    },
                  })
                : t)
            ) +
            `">
        <span class="tile-type-icon tile-type-icon-img"><img src="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "imageUrl") || (e != null ? i(e, "imageUrl") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imageUrl",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 66 },
                      end: { line: 10, column: 78 },
                    },
                  })
                : t)
            ) +
            `" alt="" aria-hidden="true"></span>
      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="tile-header">

` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "icon") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.program(3, f, 0),
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 13, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `
  <div class="tile-title" >
    <h2 class="csui-heading">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 29 },
                      end: { line: 16, column: 38 },
                    },
                  })
                : i)
            ) +
            `</h2>
  </div>

  <div class="tile-controls" title="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 36 },
                      end: { line: 19, column: 45 },
                    },
                  })
                : i)
            ) +
            `"></div>

</div>

<div class="tile-content"></div>

<div class="tile-footer"></div>
`
          );
        },
      });
      return p.registerPartial("csui_controls_tile_impl_tile", y), y;
    }
  ),
  csui.define("css!csui/controls/tile/impl/tile", [], function () {}),
  csui.define(
    "csui/controls/tile/tile.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "hbs!csui/controls/tile/impl/tile",
      "css!csui/controls/list/impl/list",
      "css!csui/controls/tile/impl/tile",
    ],
    function (x, m, p, y, s, e) {
      var r = y.LayoutView.extend({
        className: "cs-tile cs-list tile content-tile initialLoading",
        template: e,
        regions: {
          headerControls: ".tile-controls",
          content: ".tile-content",
          footer: ".tile-footer",
        },
        ui: { footer: ".tile-footer", headerControls: ".tile-controls" },
        constructor: function () {
          y.LayoutView.prototype.constructor.apply(this, arguments),
            this.listenTo(this, "render", this._renderContentView),
            this.listenToOnce(this.collection, "sync", function () {
              this.$el.removeClass("initialLoading");
            }),
            this.listenToOnce(
              this.collection,
              "error",
              x.bind(this.handleError, this)
            ),
            this.listenToOnce(
              this.model,
              "error",
              x.bind(this.handleError, this)
            );
        },
        handleError: function () {
          (this.errorExists = !0),
            this.ui.headerControls.addClass("binf-hidden"),
            this.ui.footer.addClass("binf-hidden");
        },
        serializeData: function () {
          return x.reduce(
            ["icon", "imageUrl", "imageClass", "title"],
            function (f, t) {
              return (f[t] = l.call(this, t)), f;
            },
            {},
            this
          );
        },
        _renderContentView: function () {
          var f = l.call(this, "contentView");
          if (!f)
            throw new y.Error({
              name: "NoContentViewError",
              message: 'A "contentView" must be specified',
            });
          var t = l.call(this, "contentViewOptions");
          (this.contentView = new f(t)),
            this.propagateEventsToViews(this.contentView),
            this.content.show(this.contentView);
        },
      });
      x.extend(r.prototype, s);
      function l(f, t) {
        var i;
        return (
          t
            ? (i = t[f])
            : ((i = l.call(this, f, this.options || {})),
              i === void 0 && (i = this[f])),
          x.isFunction(i) && !(i.prototype instanceof p.View) ? i.call(this) : i
        );
      }
      return r;
    }
  ),
  csui.define(
    "csui/controls/iconpreload/icon.preload.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/non-emptying.region/non-emptying.region",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = x.config().iconClasses || {};
      e = Array.prototype.concat.apply([], m.values(e));
      var r = y.ItemView.extend({
        id: "csui-icon-preload",
        template: !1,
        onRender: function () {
          this._preloadIcons();
        },
        constructor: function (f) {
          y.ItemView.prototype.constructor.apply(this, arguments);
        },
        _preloadIcons: function () {
          m.each(
            e,
            function (l) {
              this.$el.append(
                '<span class="csui-icon ' +
                  l +
                  '" style="position:fixed;top:-100px;left:-100px;"></span>'
              );
            },
            this
          );
        },
      });
      return (
        (r.ensureOnThePage = function () {
          if (!p("#csui-icon-preload").length) {
            var l = new r(),
              f = p.fn.binf_modal.getDefaultContainer(),
              t = new s({ el: f });
            t.show(l);
          }
        }),
        r
      );
    }
  ),
  csui.define("csui/widgets/html.editor/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/html.editor/impl/nls/root/lang", {
    ConfirmQuestionMessage: "Are you sure to leave this page?",
    ConfirmQuestionTitle: "Cancel edits?",
    CancelConfirmMessage: "Are you sure you want to cancel?",
    cancelTitle: "Cancel",
    cancelAria: "Cancel edit",
    saveTitle: "Save",
    saveAria: "Save contents",
    okTitle: "OK",
    sourceDialogTitle: "Source",
    moreActionsAria: "{0} actions menu",
    PageDefaultContent: "your content goes here",
    noWikiPageFound: "Item cannot be accessed.",
    RestoreDialogMessage:
      "You have unsaved changes. Do you want to restore changes and continue editing?",
    RestoreDiaglogTitle: "Restore changes",
    reservedBy: `Reserved by {0}
{1}`,
    more: "more",
    properties: "Properties",
    permissions: "View permissions",
    Edit: "Edit",
    unreserve: "Unreserve",
    Continue: "Continue",
    Discard: "Discard",
    Yes: "Yes",
    No: "No",
    insertContentServerLink: "Insert Content Management Link",
    openCodeView: "Source",
    contentServerLink: "Content Management Link",
    versionDifferenceConfirmMessage:
      "Another user has saved an alternate version of this page. Do you still want to add a new version?",
    versionDifferenceConfirmTitle: "Intermediate version added",
    brokenLinkMessage:
      "Sorry, the item you requested could not be accessed. Either it does not exist, or you do not have permission to access it. If you were sent a link to this item, please contact the sender for assistance.",
    goToTooltip: "go to {0}",
    previewUnavailable: "Preview Unavailable",
    cannotFindObject: "Cannot find object",
  }),
  csui.define(
    "csui/controls/rich.text.editor/impl/rich.text.util",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/url",
      "csui/models/node/node.model",
      "csui/utils/base",
      "csui/utils/commands",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "csui/utils/log",
    ],
    function (x, m, p, y, s, e, r, l) {
      var f = {
        isEmptyContentElement: function (t) {
          return m.trim(m(t).text());
        },
        checkDomain: function (t, i) {
          var o = t.connector.connection.url,
            n = i.target.href;
          return (
            (t.options.isSameDomain =
              n.search(new RegExp(o.split("/api")[0], "i")) !== -1),
            t.options.isSameDomain
          );
        },
        getUrl: function (t, i) {
          var o = m.Deferred();
          if (i.target.href) {
            var n = i.target.href.match(/^.*\/app\/(.+)$/i),
              u = new p(i.target.href).isAbsolute(),
              c = u ? this.checkDomain(t, i) : !0,
              d = i.target.href.match(/^.*\/wiki\/(.+)$/i),
              h =
                i.target.href.match(/^.*\/open\/(.+)$/i) ||
                i.target.href.match(/^.*\/nodes\/(.+)$/i),
              k = i.target.href.match(/^.*objId\=(.+)$/i),
              C,
              S = this;
            !n && c
              ? d || k
                ? S.renderLinks({
                    event: i,
                    connector: t.connector,
                    callingViewInstance: t,
                  }).done(function () {
                    o.resolve();
                  })
                : (h && ((C = h[1]), this.updateLink(i, C)), o.resolve())
              : o.resolve();
          }
          return o.promise();
        },
        renderLinks: function (t) {
          var i,
            o = m.Deferred(),
            n = t.event.target.href
              ? m(t.event.target)
              : m(t.event.target).parents("a"),
            u = t.callingViewInstance,
            c = this;
          if (
            ((t.event.target = n[0]),
            t.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i) ||
              t.event.target.href.match(/^.*\/wiki\/[0-9]+$/i))
          )
            t.event.stopPropagation(),
              t.event.preventDefault(),
              t.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i)
                ? ((i = t.event.target.href.match(/^.*\/wiki\/(.+)\/(.+)$/i)),
                  (i = parseInt(i[1])),
                  c
                    ._getWikiPageId(t, i, t.event.target.href)
                    .done(function (h, k) {
                      (c.id = h),
                        k
                          ? c.updateLink(t.event, k.id)
                          : l.info(r.brokenLinkMessage),
                        o.resolve();
                    }))
                : t.event.target.href.match(/^.*\/wiki\/[0-9]+$/i) &&
                  ((i = t.event.target.href.match(/^.*\/wiki\/(.+)$/i)),
                  (i = parseInt(i[1])),
                  c.updateLink(t.event, i),
                  o.resolve());
          else if (t.event.target.href.match(/^.*objId\=(.+)$/)) {
            t.event.stopPropagation(), t.event.preventDefault();
            var d = t.event.target.href.match(/^.*objId\=(.+)$/)[1];
            d !== -1 &&
              ((i = this.getNewNodeModel({
                attributes: { id: parseInt(d) },
                connector: t.connector,
              })),
              c.updateLink(t.event, i.attributes.id)),
              o.resolve();
          }
          return o.promise();
        },
        getNewNodeModel: function (t) {
          return new y(t.attributes, {
            connector: t.connector,
            commands: e.getAllSignatures(),
            fields: t.fields || {},
            expand: t.expand || {},
          });
        },
        updateLink: function (t, i) {
          var o =
              /^.*\/(cs\.\w{3}|livelink\.\w{3}|llisapi\.\w{3}|llisapi|cs|livelink).*$/,
            n = !!i && i,
            u = t.target.href.match(o),
            c =
              !!u &&
              u.length &&
              t.target.href.substring(
                0,
                t.target.href.indexOf("/".concat(u[1])) +
                  "/".concat(u[1]).length
              );
          t.target.href =
            c && c.length ? c.concat("/app/nodes/", n) : t.target.href;
        },
        _getWikiPageId: function (t, i, o) {
          var n = decodeURIComponent(
              o.substring(o.lastIndexOf("/") + 1, o.length)
            ),
            u = m.Deferred(),
            c = t.connector,
            d = { url: this._getWikiContainerUrl(t, i), type: "GET" };
          return (
            c
              .makeAjaxCall(d)
              .done(function (h) {
                (h.targetWikiPageNode = h.results.find(function (k) {
                  if (k.name === n) return k;
                })),
                  h.targetWikiPageNode && h.targetWikiPageNode.id
                    ? u.resolve(h.targetWikiPageNode.id, h.targetWikiPageNode)
                    : u.resolve(-1);
              })
              .fail(function (h) {
                u.reject(h);
              }),
            u.promise()
          );
        },
        _getWikiContainerUrl: function (t, i) {
          return p.combine(
            t.connector.getConnectionUrl().getApiBase("v2"),
            "/wiki/" + i + "/wikipages"
          );
        },
        _getNicknameId: function (t, i) {
          var o = m.Deferred(),
            n = {
              url: p.combine(
                t.connector.getConnectionUrl().getApiBase("v2"),
                "/wiki/nickname/" + i + "?actions=open"
              ),
              requestType: "nickname",
              view: this,
              type: "GET",
            };
          return (
            i &&
              t.connector
                .makeAjaxCall(n)
                .done(function (u) {
                  o.resolve(u);
                })
                .fail(function () {
                  o.reject();
                }),
            o.promise()
          );
        },
      };
      return f;
    }
  ),
  csui.define(
    "css!csui/widgets/html.editor/impl/html.editor",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/rich.text.editor/rich.text.editor",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/rich.text.editor/impl/rich.text.util",
      "css!csui/widgets/html.editor/impl/html.editor",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = function () {
          return y;
        },
        e = function (r) {
          return (
            !!r &&
            r.html
              .get()
              .trim()
              .replace(/<\/div>|<div>|<\/p>|<p>|&nbsp;|<br \/>|\s/g, "")
          );
        };
      return { getRichTextEditorUtils: s, isEmptyContent: e };
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-selected-counter-region">
  <button type="button" class="binf-btn binf-btn-primary"
          aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedButtonAria") ||
                  (e != null ? i(e, "selectedButtonAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 22 },
                      end: { line: 3, column: 44 },
                    },
                  })
                : t)
            ) +
            `" aria-haspopup="true"
          title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedButtonTitle") ||
                  (e != null ? i(e, "selectedButtonTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 17 },
                      end: { line: 4, column: 40 },
                    },
                  })
                : t)
            ) +
            `"><span
      class="csui-selected-counter-label">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedLabel") ||
                  (e != null ? i(e, "selectedLabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 42 },
                      end: { line: 5, column: 59 },
                    },
                  })
                : t)
            ) +
            `</span><span
      class="binf-badge binf-badge-light csui-selected-counter-value">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedCount") ||
                  (e != null ? i(e, "selectedCount") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedCount",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 70 },
                      end: { line: 6, column: 87 },
                    },
                  })
                : t)
            ) +
            `</span>
  </button>
</div>
<div class="csui-dropmenu-container binf-hidden">
  <span class="csui-selected-count-clearall binf-hidden"><span
      class="csui-selected-count-clearall-label"
      role="button" tabindex="0" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearAllAria") ||
                  (e != null ? i(e, "clearAllAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAllAria",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 45 },
                      end: { line: 12, column: 61 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "clearAll") || (e != null ? i(e, "clearAll") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAll",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 63 },
                      end: { line: 12, column: 75 },
                    },
                  })
                : t)
            ) +
            `</span></span>

  <ul class="csui-selected-items-dropdown csui-normal-scrolling" role="menu"></ul>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.list.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<span class="csui-selected-list-item-icon csui-type-icon"></span>
<div class="csui-selected-list-item-name-wrapper">
    <span class="csui-selected-list-item-name">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 47 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</span>
  <span class="csui-icon formfield_clear csui-deselected-icon" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearItem") || (e != null ? i(e, "clearItem") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearItem",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 75 },
                      end: { line: 4, column: 88 },
                    },
                  })
                : t)
            ) +
            `"
        title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearItem") || (e != null ? i(e, "clearItem") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearItem",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 15 },
                      end: { line: 5, column: 28 },
                    },
                  })
                : t)
            ) +
            `">
  </span>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.list.item",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/selected.count/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/selected.count/impl/nls/root/lang", {
    clearAll: "Clear all",
    clearAllAria: "Clear all selections",
    selectedLabel: "Selected",
    selectedButtonTitle: "Selected {0}",
    selectedButtonAria: "Selected {0} items",
    unselectAria: "Unselect {0} {1}",
    clearItem: "Clear item",
    dialogTitle: "Clear all",
    dialogTemplate: "Do you want to clear your selection?",
    parentName: "/{0}",
  }),
  csui.define(
    "css!csui/controls/selected.count/impl/selected.count",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/selected.count/selected.count.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/base",
      "nuc/utils/log",
      "hbs!csui/controls/selected.count/impl/selected.count",
      "hbs!csui/controls/selected.count/impl/selected.list.item",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n) {
      "use strict";
      (t = t(x.id)),
        t.deprecate(
          'Selected count view "csui/controls/selected.count/selected.count.view" is deprecated, please migrate to selected.count.control.view.js "csui/controls/selected.count/selected.count.control.view"'
        );
      var u = s.ItemView.extend({
          className: "csui-selected-item",
          template: o,
          tagName: "li",
          events: { keydown: "onKeyInView" },
          modelEvents: { change: "onModelChange" },
          triggers: { "click .csui-deselected-icon": "remove:selected:item" },
          templateHelpers: function () {
            return {
              name: this.options.model.get("name"),
              clearItem: n.clearItem,
            };
          },
          constructor: function (h) {
            (this.model = h.model),
              s.ItemView.prototype.constructor.apply(this, arguments);
          },
          onRender: function () {
            (this._nodeIconView = new e({
              el: this.$(".csui-type-icon").get(0),
              node: this.model,
              size: "contain",
            })),
              this._nodeIconView.render(),
              this.$el.attr("tabindex", "-1"),
              this.$el.attr("role", "menuitem"),
              this.$el.attr(
                "aria-label",
                m.str.sformat(
                  n.unselectAria,
                  this.model.get("name"),
                  this._nodeIconView.$el.attr("aria-label")
                )
              );
          },
          onModelChange: function () {
            this.render();
          },
          onKeyInView: function (d) {
            this.trigger("keydown:item", d);
          },
        }),
        c = s.CompositeView.extend({
          className: "csui-selected-count",
          template: i,
          templateHelpers: function () {
            var d = this.collection && this.collection.length;
            return {
              selectedCount: d,
              clearAll: n.clearAll,
              clearAllAria: n.clearAllAria,
              selectedLabel: n.selectedLabel,
              selectedButtonTitle: m.str.sformat(n.selectedButtonTitle, d),
              selectedButtonAria: m.str.sformat(n.selectedButtonAria, d),
            };
          },
          childViewContainer: ".csui-selected-items-dropdown",
          childView: u,
          childEvents: {
            "remove:selected:item": "onRemoveSelectedItem",
            "keydown:item": "onKeydownItem",
          },
          ui: {
            selectedCountButton: ".csui-selected-counter-region button",
            selectedCountValue:
              ".csui-selected-counter-region .csui-selected-counter-value",
            dropdownContainer: ".csui-dropmenu-container",
            clearAll: ".csui-selected-count-clearall",
            ClearAllButton: ".csui-selected-count-clearall > span",
          },
          events: {
            "click @ui.selectedCountButton": "onClickSelectedCount",
            "click @ui.ClearAllButton": "onClickClearAll",
            "mouseenter @ui.selectedCountButton":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.selectedCountButton":
              "onMouseLeaveSelectedCounterView",
            "mouseenter @ui.dropdownContainer":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.dropdownContainer":
              "onMouseLeaveSelectedCounterView",
            "mouseup @ui.clearAll": "onMouseUpClearAll",
            "blur  @ui.selectedCountButton": "onBlurSelectedCountButton",
            "blur @ui.dropdownContainer": "onBlurSelectedCounterView",
            keydown: "onKeydownSelectedCount",
            keyup: "onKeyupItem",
          },
          behaviors: { TabableRegion: { behaviorClass: r } },
          currentlyFocusedElement: function () {
            return this.ui.selectedCountButton;
          },
          constructor: function d(h) {
            (h = m.defaults(h, { showOnlyOnSelection: !0 })),
              (this.collection = h.collection),
              d.__super__.constructor.apply(this, arguments),
              (this.currentlyFocusedIndex = 0),
              (this.showClearAll = !1),
              (this.selectedItemInFocus = !1),
              (this.scrollableParent = h.scrollableParent),
              this.listenTo(this.collection, "reset remove add", function () {
                !this.isDestroyed && this.onCollectionUpdate();
              }),
              (this.selectedCount = this.collection.length),
              this.scrollableParent &&
                ((this.windowResizeHandler = m.bind(this.setDropdownCss, this)),
                p(window).on("resize", this.windowResizeHandler));
          },
          onRender: function () {
            this.selectedCount
              ? (this.ui.dropdownContainer.addClass("binf-hidden"),
                p(document).off("mouseup.csui.select.count"))
              : this.options.showOnlyOnSelection &&
                this.$el.addClass("binf-hidden");
          },
          onDestroy: function () {
            this.stopListening(this.collection, "reset remove add"),
              this.windowResizeHandler &&
                p(window).off("resize", this.windowResizeHandler);
          },
          onClickClearAll: function (d) {
            (this.selectedItemInFocus = !0),
              l
                .confirmQuestion(
                  m.str.sformat(n.dialogTemplate, n.dialogTitle),
                  n.dialogTitle,
                  {}
                )
                .always(
                  m.bind(function (h) {
                    h
                      ? this.collection.reset([])
                      : (this.ui.ClearAllButton.trigger("focus"),
                        this._moveTabindexToFocusedElement()),
                      (this.selectedItemInFocus = !1);
                  }, this)
                ),
              (this.currentlyFocusedIndex = 0);
          },
          onMouseUpClearAll: function (d) {
            d.preventDefault(),
              d.stopPropagation(),
              this.ui.ClearAllButton.trigger("focus");
          },
          isDDOpen: function () {
            return (
              !this.ui.dropdownContainer[0].classList.contains("binf-hidden") &&
              !this.el.classList.contains("binf-hidden")
            );
          },
          _focusOnSelectedCountButton: function () {
            this.ui.selectedCountButton.trigger("focus"),
              (this.selectedCountViewInFocus = !0);
          },
          onMouseEnterSelectedCounterView: function () {
            this.selectedCountViewInFocus = !0;
          },
          onMouseLeaveSelectedCounterView: function () {
            this.selectedItemInFocus === !1 &&
              (this.selectedCountViewInFocus = !1);
          },
          onClickSelectedCount: function (d) {
            d.preventDefault(), d.stopPropagation();
            var h = this.$el.find(".binf-open>.binf-dropdown-toggle");
            h.length > 0 && h.binf_dropdown("toggle"),
              this.ui.dropdownContainer.hasClass("binf-hidden")
                ? this._showItemView()
                : this._hideItemView();
          },
          resetState: function () {
            var d = this.$el.find(".binf-open>.binf-dropdown-toggle");
            d.length > 0 && d.binf_dropdown("toggle"), this._hideItemView();
          },
          _showItemView: function () {
            (this.selectedCountViewInFocus = !0),
              this.ui.dropdownContainer.removeClass("binf-hidden"),
              this.ui.selectedCountButton.addClass("binf-open"),
              this.ui.selectedCountButton.attr("aria-expanded", "true"),
              this.selectedCount > 4 &&
                ((this.showClearAll = !0),
                this.ui.clearAll.removeClass("binf-hidden")),
              this.scrollableParent && this.setDropdownCss(),
              this.ui.clearAll.hasClass("binf-hidden")
                ? this.ui.dropdownContainer
                    .find(".csui-selected-item:first")
                    .trigger("focus")
                : this.ui.clearAll
                    .find(".csui-selected-count-clearall-label")
                    .trigger("focus"),
              p(document).on(
                "mouseup.csui.select.count",
                m.bind(this.onDocumentClick, this)
              );
          },
          onDocumentClick: function (d) {
            this.$el[0] !== d.target &&
              !this.$el.has(d.target).length &&
              !this.selectedItemInFocus &&
              this._hideItemView();
          },
          setDropdownCss: function () {
            var d = this.ui.dropdownContainer.find(
                ".csui-selected-items-dropdown"
              ),
              h = p(this.scrollableParent),
              k,
              C,
              S;
            if (h && h.length > 0) {
              (C = h.height()),
                (S =
                  parseInt(h.css("margin-top")) +
                  parseInt(h.css("margin-bottom"))),
                (k = d.offset().top - h.offset().top);
              var w = Math.abs(C - S);
              d.css({ "max-height": w - (24 + k) + "px" });
            }
          },
          _hideItemView: function (d) {
            (this.selectedCountViewInFocus = !1),
              m.isFunction(this.ui.dropdownContainer.addClass) &&
                this.ui.dropdownContainer.addClass("binf-hidden"),
              this.ui.selectedCountButton.removeClass("binf-open"),
              this.ui.selectedCountButton.attr("aria-expanded", "false"),
              p(document).off("mouseup.csui.select.count");
          },
          onRemoveSelectedItem: function (d) {
            var h = d._index,
              k;
            (this.selectedCountViewInFocus = !0),
              this.collection.remove(d.model),
              (k = m.sortBy(this.children.toArray(), "cid")),
              h === this.selectedCount
                ? k[h - 1] && k[h - 1].$el.trigger("focus")
                : k[h] && k[h].$el.trigger("focus"),
              this.collection.length === 0 &&
                this.ui.dropdownContainer.addClass("binf-hidden");
          },
          onCollectionUpdate: function () {
            (this.selectedCount = this.collection.length),
              this.selectedCount && !this.isDDOpen()
                ? (this.options.showOnlyOnSelection &&
                    this.$el.removeClass("binf-hidden"),
                  m.isFunction(this.ui.dropdownContainer.addClass) &&
                    this.ui.dropdownContainer.addClass("binf-hidden"),
                  this.trigger("show:counter", !0))
                : this.selectedCount ||
                  (this.ui.selectedCountButton.removeClass("binf-open"),
                  this.options.showOnlyOnSelection &&
                    this.$el.addClass("binf-hidden"),
                  p(document).off("mouseup.csui.select.count"),
                  this.trigger("show:counter", !1)),
              this.ui.selectedCountValue.text(this.selectedCount),
              this.ui.selectedCountButton.attr(
                "aria-label",
                m.str.sformat(n.selectedButtonAria, this.selectedCount)
              ),
              this.ui.selectedCountButton.attr(
                "title",
                m.str.sformat(n.selectedButtonTitle, this.selectedCount)
              ),
              !this.showClearAll && this.selectedCount > 4
                ? ((this.showClearAll = !0),
                  this.ui.clearAll.removeClass("binf-hidden"))
                : this.selectedCount <= 4 &&
                  this.showClearAll &&
                  ((this.showClearAll = !1),
                  this.ui.clearAll.addClass("binf-hidden")),
              this.selectedCount > 0 && this._moveTabindexToFocusedElement();
          },
          _moveTabindexToFocusedElement: function () {
            this._focusableElements = f.findFocusables(this.el);
            for (var d = 0; d < this._focusableElements.length; d++)
              this._focusableElements[d].setAttribute("tabindex", "0");
          },
          onBlurSelectedCountButton: function (d) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onBlurSelectedCounterView: function (d) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onKeydownSelectedCount: function (d) {
            switch (d.keyCode) {
              case 9:
                if (
                  d.shiftKey &&
                  !this.ui.dropdownContainer.hasClass("binf-hidden")
                )
                  d.preventDefault(),
                    d.stopPropagation(),
                    this.ui.ClearAllButton.trigger("focus");
                else {
                  var h = m.sortBy(this.children.toArray(), "cid");
                  (this.selectedCountViewInFocus = !0),
                    this.ui.ClearAllButton.is(":focus") &&
                      (h[this.currentlyFocusedIndex].$el.trigger("focus"),
                      d.stopPropagation(),
                      d.preventDefault());
                }
                break;
              case 13:
                this.ui.ClearAllButton.is(":focus") && this.onClickClearAll(d);
                break;
              case 32:
                this.ui.selectedCountButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickSelectedCount(d));
                break;
              case 46:
                this.ui.ClearAllButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickClearAll(d));
                break;
              case 37:
                d.stopPropagation();
                break;
              case 39:
                d.stopPropagation();
                break;
            }
          },
          onKeydownItem: function (d, h) {
            var k = m.sortBy(this.children.toArray(), "cid");
            switch ((h.preventDefault(), h.keyCode)) {
              case 46:
              case 13:
              case 32:
                this.onRemoveSelectedItem(d), h.stopPropagation();
                break;
              case 40:
                (this.selectedCountViewInFocus = !0),
                  d._index !== this.selectedCount - 1 &&
                    (k[d._index + 1].$el.trigger("focus"),
                    (this.currentlyFocusedIndex = d._index + 1)),
                  h.stopPropagation();
                break;
              case 38:
                (this.selectedCountViewInFocus = !0),
                  d._index > 0 &&
                    (k[d._index - 1].$el.trigger("focus"),
                    (this.currentlyFocusedIndex = d._index - 1)),
                  h.stopPropagation();
                break;
              case 37:
                h.stopPropagation();
                break;
              case 39:
                h.stopPropagation();
                break;
            }
          },
          onKeyupItem: function (d) {
            d.keyCode === 27 &&
              this.isDDOpen() &&
              ((this.currentlyFocusedIndex = 0),
              d.preventDefault(),
              d.stopPropagation(),
              this._hideItemView(),
              this._focusOnSelectedCountButton());
          },
        });
      return c;
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count.label",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-selected-counter-label">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedLabel") ||
                  (e != null ? i(e, "selectedLabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedLabel",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 42 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : t)
            ) +
            '</span><span class="binf-badge binf-badge-light csui-selected-counter-value">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedCount") ||
                  (e != null ? i(e, "selectedCount") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedCount",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 136 },
                      end: { line: 1, column: 153 },
                    },
                  })
                : t)
            ) +
            "</span>"
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count.label",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/impl/selected.count.label.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/controls/selected.count/impl/selected.count.label",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y) {
      "use strict";
      return m.View.extend({
        tagName: "button",
        className: function () {
          let e = "binf-btn binf-btn-primary";
          return (
            this.options.showOnlyOnSelection &&
              this.options.collection.length === 0 &&
              (e = " binf-hidden"),
            e
          );
        },
        template: p,
        templateContext: function () {
          return {
            selectedCount: this.selectedCount,
            selectedLabel: y.selectedLabel,
          };
        },
        ui: { selectedCountValue: ".csui-selected-counter-value" },
        events: { click: "toggleSelectedCount" },
        attributes: function () {
          return {
            title: x.str.sformat(y.selectedButtonTitle, this.selectedCount),
            "aria-label": x.str.sformat(
              y.selectedButtonAria,
              this.selectedCount
            ),
            "aria-haspopup": !0,
          };
        },
        constructor: function (r) {
          (r = x.defaults(r.parentView.options, { showOnlyOnSelection: !0 })),
            (this.options = r),
            m.View.prototype.constructor.apply(this, arguments),
            (this.selectedCount = this.options.collection.length),
            this.listenTo(
              this.options.collection,
              "reset remove add",
              function () {
                this.updateCounter();
              }
            );
        },
        updateCounter: function () {
          const e = this.options.collection.length;
          if (e === 0) {
            this.el.classList.add("binf-hidden");
            return;
          }
          this.el.classList.contains("binf-hidden") &&
            this.el.classList.remove("binf-hidden"),
            typeof this.ui.selectedCountValue?.text == "function" &&
              this.ui.selectedCountValue?.text(e),
            (this.el.ariaLabel = x.str.sformat(y.selectedButtonAria, e)),
            (this.el.title = x.str.sformat(y.selectedButtonTitle, e));
        },
        toggleSelectedCount: function () {
          this.options.parentView?.selectedItemsCollectionView?.isRendered
            ? this.options.parentView.selectedItemsCollectionView._hideItemView()
            : ((this.el.ariaExpanded = !0),
              this.options.parentView.showSelectedDropdown());
        },
        onDestroy: function () {
          this.stopListening(this.options.collection, "reset remove add");
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.items.collection",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-dropmenu-container binf-hidden">
  <span class="csui-selected-count-clearall binf-hidden"><span
      class="csui-selected-count-clearall-label"
      role="button" tabindex="0" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearAllAria") ||
                  (e != null ? i(e, "clearAllAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAllAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 45 },
                      end: { line: 4, column: 61 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "clearAll") || (e != null ? i(e, "clearAll") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAll",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 63 },
                      end: { line: 4, column: 75 },
                    },
                  })
                : t)
            ) +
            `</span></span>

  <ul class="csui-selected-items-dropdown csui-normal-scrolling" role="menu"></ul>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.items.collection",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/impl/selected.items.collection.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/dialogs/modal.alert/modal.alert",
      "hbs!csui/controls/selected.count/impl/selected.items.collection",
      "hbs!csui/controls/selected.count/impl/selected.list.item",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e, r, l) {
      "use strict";
      var f = p.ItemView.extend({
          className: "csui-selected-item",
          template: r,
          tagName: "li",
          events: { keydown: "onKeyInView" },
          modelEvents: { change: "onModelChange" },
          triggers: { "click .csui-deselected-icon": "remove:selected:item" },
          templateHelpers: function () {
            return {
              name: this.options.model.get("name"),
              clearItem: l.clearItem,
            };
          },
          constructor: function (o) {
            (this.model = o.model),
              p.ItemView.prototype.constructor.apply(this, arguments),
              this.listenTo(this, "show", this.applyCSS);
          },
          onRender: function () {
            (this._nodeIconView = new y({
              el: this.$(".csui-type-icon").get(0),
              node: this.model,
              size: "contain",
            })),
              this._nodeIconView.render(),
              this.$el.attr("tabindex", "-1"),
              this.$el.attr("role", "menuitem"),
              this.$el.attr(
                "aria-label",
                x.str.sformat(
                  l.unselectAria,
                  this.model.get("name"),
                  this._nodeIconView.$el.attr("aria-label")
                )
              );
          },
          applyCSS: function () {
            const i = this.$el.find(".csui-selected-list-item-name-wrapper"),
              o = this.$el.innerWidth(),
              n = this.$el.find(".csui-icon-group").innerWidth(),
              u = i.innerWidth();
            u && u + n + 16 > o && i.css("max-width", "calc(100% - 20px)");
          },
          onModelChange: function () {
            this.render();
          },
          onKeyInView: function (i) {
            this.trigger("keydown:item", i);
          },
        }),
        t = p.CompositeView.extend({
          className: "csui-selected-count",
          template: e,
          templateHelpers: function () {
            return { clearAll: l.clearAll, clearAllAria: l.clearAllAria };
          },
          childViewContainer: ".csui-selected-items-dropdown",
          childView: f,
          childEvents: {
            "remove:selected:item": "onRemoveSelectedItem",
            "keydown:item": "onKeydownItem",
          },
          ui: {
            dropdownContainer: ".csui-dropmenu-container",
            clearAll: ".csui-selected-count-clearall",
            ClearAllButton: ".csui-selected-count-clearall > span",
          },
          events: {
            "click @ui.ClearAllButton": "onClickClearAll",
            "mouseenter @ui.dropdownContainer":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.dropdownContainer":
              "onMouseLeaveSelectedCounterView",
            "mouseup @ui.clearAll": "onMouseUpClearAll",
            "blur @ui.dropdownContainer": "onBlurSelectedCounterView",
            keydown: "onKeydownSelectedCount",
            keyup: "onKeyupItem",
          },
          constructor: function i(o) {
            (this.options = o),
              (this.collection = o.collection),
              (this.selectCountView = o.selectCountView),
              i.__super__.constructor.apply(this, arguments),
              (this.currentlyFocusedIndex = 0),
              (this.showClearAll = !1),
              (this.selectedItemInFocus = !1),
              (this.scrollableParent =
                this.options.parentView?.options?.scrollableParent),
              this.listenTo(this.collection, "reset remove add", function () {
                !this.isDestroyed && this.onCollectionUpdate();
              }),
              (this.selectedCount = this.collection.length),
              this.scrollableParent &&
                ((this.windowResizeHandler = x.bind(this.setDropdownCss, this)),
                window.addEventListener("resize", this.windowResizeHandler));
          },
          onRender: function () {
            this.onClickSelectedCount();
          },
          onDestroy: function () {
            this.stopListening(this.options.collection, "reset remove add"),
              this.windowResizeHandler &&
                window.removeEventListener("resize", this.windowResizeHandler);
          },
          onClickClearAll: function () {
            (this.selectedItemInFocus = !0),
              s
                .confirmQuestion(
                  x.str.sformat(l.dialogTemplate, l.dialogTitle),
                  l.dialogTitle,
                  {}
                )
                .always(
                  x.bind(function (i) {
                    i
                      ? (this.collection.reset([]), this._hideItemView())
                      : (this.ui.ClearAllButton.trigger("focus"),
                        this._moveTabindexToFocusedElement &&
                          this._moveTabindexToFocusedElement()),
                      (this.selectedItemInFocus = !1);
                  }, this)
                ),
              (this.currentlyFocusedIndex = 0);
          },
          onMouseUpClearAll: function (i) {
            i.preventDefault(),
              i.stopPropagation(),
              this.ui.ClearAllButton.trigger("focus");
          },
          isDDOpen: function () {
            return (
              !this.ui.dropdownContainer[0].classList.contains("binf-hidden") &&
              !this.el.classList.contains("binf-hidden")
            );
          },
          onClickSelectedCount: function () {
            var i = this.$el.find(".binf-open>.binf-dropdown-toggle");
            i.length > 0 && i.binf_dropdown("toggle"),
              this.ui.dropdownContainer.hasClass("binf-hidden") &&
                this._showItemView();
          },
          resetState: function () {
            var i = this.$el.find(".binf-open>.binf-dropdown-toggle");
            i.length > 0 && i.binf_dropdown("toggle"), this._hideItemView();
          },
          _showItemView: function () {
            (this.selectedCountViewInFocus = !0),
              this.ui.dropdownContainer.removeClass("binf-hidden"),
              this.selectedCount > 4 &&
                ((this.showClearAll = !0),
                this.ui.clearAll.removeClass("binf-hidden")),
              this.scrollableParent && this.setDropdownCss(),
              m(document).on(
                "mouseup.csui.select.count",
                x.bind(this.onDocumentClick, this)
              );
          },
          onShow: function () {
            this.ui.clearAll?.[0].classList?.contains("binf-hidden")
              ? this.ui.dropdownContainer?.[0]
                  .querySelector(".csui-selected-item")
                  ?.focus()
              : typeof this.ui.clearAll?.[0]?.querySelector == "function" &&
                this.ui.clearAll?.[0]
                  ?.querySelector(".csui-selected-count-clearall-label")
                  ?.focus();
          },
          onDocumentClick: function (i) {
            !i.target.closest(".csui-selected-counter-region>button") &&
              this.$el[0] !== i.target &&
              !this.$el.has(i.target).length &&
              !this.selectedItemInFocus &&
              this._hideItemView();
          },
          setDropdownCss: function () {
            const i = this.ui.dropdownContainer.find(
                ".csui-selected-items-dropdown"
              ),
              o = m(this.scrollableParent);
            if (o && o.length > 0) {
              const n = o.height(),
                u =
                  parseInt(o.css("margin-top")) +
                  parseInt(o.css("margin-bottom")),
                c = i.offset().top - o.offset().top,
                d = Math.abs(n - u - 200);
              i.css({ "max-height": d - (24 + c) + "px" });
            }
          },
          _hideItemView: function () {
            this.options.parentView.destroySelectedDropdown(),
              m(document).off("mouseup.csui.select.count");
          },
          onRemoveSelectedItem: function (i) {
            var o = i._index,
              n;
            (this.selectedCountViewInFocus = !0),
              this.collection.remove(i.model),
              (n = x.sortBy(this.children.toArray(), "cid")),
              o === this.collection.length
                ? n[o - 1] && n[o - 1].$el.trigger("focus")
                : n[o] && n[o].$el.trigger("focus"),
              this.collection.length === 0 && this._hideItemView();
          },
          onBlurSelectedCounterView: function (i) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onKeydownSelectedCount: function (i) {
            switch (i.keyCode) {
              case 9:
                if (
                  i.shiftKey &&
                  !this.ui.dropdownContainer.hasClass("binf-hidden")
                )
                  i.preventDefault(),
                    i.stopPropagation(),
                    this.ui.ClearAllButton.trigger("focus");
                else {
                  var o = x.sortBy(this.children.toArray(), "cid");
                  (this.selectedCountViewInFocus = !0),
                    this.ui.ClearAllButton.is(":focus") &&
                      (o[this.currentlyFocusedIndex]?.$el?.trigger("focus"),
                      i.stopPropagation(),
                      i.preventDefault());
                }
                break;
              case 13:
                this.ui.ClearAllButton.is(":focus") && this.onClickClearAll(i);
                break;
              case 46:
                this.ui.ClearAllButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickClearAll(i));
                break;
              case 37:
              case 39:
                i.stopPropagation();
                break;
            }
          },
          onKeydownItem: function (i, o) {
            var n = x.sortBy(this.children.toArray(), "cid");
            switch ((o.preventDefault(), o.keyCode)) {
              case 46:
              case 13:
              case 32:
                this.onRemoveSelectedItem(i), o.stopPropagation();
                break;
              case 40:
                (this.selectedCountViewInFocus = !0),
                  i._index !== this.selectedCount - 1 &&
                    (n[i._index + 1]?.$el?.trigger("focus"),
                    (this.currentlyFocusedIndex = i._index + 1)),
                  o.stopPropagation();
                break;
              case 38:
                (this.selectedCountViewInFocus = !0),
                  i._index > 0 &&
                    (n[i._index - 1]?.$el?.trigger("focus"),
                    (this.currentlyFocusedIndex = i._index - 1)),
                  o.stopPropagation();
                break;
              case 37:
                o.stopPropagation();
                break;
              case 39:
                o.stopPropagation();
                break;
            }
          },
          onKeyupItem: function (i) {
            i.keyCode === 27 &&
              this.isDDOpen() &&
              ((this.currentlyFocusedIndex = 0),
              i.preventDefault(),
              i.stopPropagation(),
              this._hideItemView(),
              this.options.parentView?.selectedLabel.el.focus(),
              (this.selectedCountViewInFocus = !0));
          },
          onCollectionUpdate: function () {
            this.collection.length <= 4 &&
              this.ui.clearAll[0].classList.add("binf-hidden");
          },
        });
      return t;
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count.control",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          return `<div class="csui-selected-counter-region"></div>
<div class="csui-selected-dropdown"></div>`;
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count.control",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/selected.count.control.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/selected.count/impl/selected.count.label.view",
      "csui/controls/selected.count/impl/selected.items.collection.view",
      "hbs!csui/controls/selected.count/impl/selected.count.control",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      return m.View.extend({
        className: "csui-selected-count",
        template: e,
        regions: {
          selectedLabel: ".csui-selected-counter-region",
          selectedItemsDropdown: ".csui-selected-dropdown",
        },
        constructor: function (f) {
          f || (f = {}),
            (this.options = f),
            (this.options.collection = this.options.collection),
            m.View.prototype.constructor.apply(this, arguments);
        },
        behaviors: { TabableRegion: { behaviorClass: p } },
        onRender: function () {
          (this.selectedLabel = new y({
            collection: this.options.collection,
            parentView: this,
          })),
            this._regions.selectedLabel.show(this.selectedLabel);
        },
        showSelectedDropdown: function () {
          (this.selectedItemsCollectionView = new s({
            collection: this.options.collection,
            parentView: this,
          })),
            this._regions.selectedItemsDropdown.show(
              this.selectedItemsCollectionView
            );
        },
        destroySelectedDropdown: function () {
          this.selectedLabel?.el?.ariaExpanded === "true" &&
            (this.selectedLabel.el.ariaExpanded = !1),
            this.selectedItemsCollectionView?.destroy();
        },
        currentlyFocusedElement: function () {
          return this.selectedLabel?.el;
        },
        resetState: function () {
          this.selectedItemsCollectionView?.resetState();
        },
      });
    }
  );
csui.define(
  "csui/lib/jquery.simulate",
  ["module", "csui/lib/jquery"],
  function (x, m) {
    (function (p, y) {
      "use strict";
      var s = /^key/,
        e = /^(?:mouse|contextmenu)|click/,
        r = /\[object (?:HTML)?Document\]/;
      function l(o) {
        return r.test(Object.prototype.toString.call(o));
      }
      function f(o) {
        for (var n = 0; n < window.frames.length; n += 1)
          if (window.frames[n] && window.frames[n].document === o)
            return window.frames[n];
        return window;
      }
      (p.fn.simulate = function (o, n) {
        return this.each(function () {
          new p.simulate(this, o, n);
        });
      }),
        (p.simulate = function (o, n, u) {
          var c = p.camelCase("simulate-" + n);
          (this.target = o),
            (this.options = u || {}),
            this[c] ? this[c]() : this.simulateEvent(o, n, this.options);
        }),
        p.extend(p.simulate, {
          keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38,
          },
          buttonCode: { LEFT: 0, MIDDLE: 1, RIGHT: 2 },
        }),
        p.extend(p.simulate.prototype, {
          simulateEvent: function (o, n, u) {
            var c = this.createEvent(n, u);
            this.dispatchEvent(o, n, c, u);
          },
          createEvent: function (o, n) {
            if (s.test(o)) return this.keyEvent(o, n);
            if (e.test(o)) return this.mouseEvent(o, n);
          },
          mouseEvent: function (o, n) {
            var u,
              c,
              d = l(this.target)
                ? this.target
                : this.target.ownerDocument || document,
              h,
              k;
            return (
              (n = p.extend(
                {
                  bubbles: !0,
                  cancelable: o !== "mousemove",
                  view: f(d),
                  detail: 0,
                  screenX: 0,
                  screenY: 0,
                  clientX: 1,
                  clientY: 1,
                  ctrlKey: !1,
                  altKey: !1,
                  shiftKey: !1,
                  metaKey: !1,
                  button: 0,
                  relatedTarget: y,
                },
                n
              )),
              d.createEvent
                ? ((u = d.createEvent("MouseEvents")),
                  u.initMouseEvent(
                    o,
                    n.bubbles,
                    n.cancelable,
                    n.view,
                    n.detail,
                    n.screenX,
                    n.screenY,
                    n.clientX,
                    n.clientY,
                    n.ctrlKey,
                    n.altKey,
                    n.shiftKey,
                    n.metaKey,
                    n.button,
                    n.relatedTarget || d.body.parentNode
                  ),
                  u.pageX === 0 &&
                    u.pageY === 0 &&
                    Object.defineProperty &&
                    ((c = l(u.relatedTarget)
                      ? u.relatedTarget
                      : u.relatedTarget.ownerDocument || document),
                    (h = c.documentElement),
                    (k = c.body),
                    Object.defineProperty(u, "pageX", {
                      get: function () {
                        return (
                          n.clientX +
                          ((h && h.scrollLeft) || (k && k.scrollLeft) || 0) -
                          ((h && h.clientLeft) || (k && k.clientLeft) || 0)
                        );
                      },
                    }),
                    Object.defineProperty(u, "pageY", {
                      get: function () {
                        return (
                          n.clientY +
                          ((h && h.scrollTop) || (k && k.scrollTop) || 0) -
                          ((h && h.clientTop) || (k && k.clientTop) || 0)
                        );
                      },
                    })))
                : d.createEventObject &&
                  ((u = d.createEventObject()),
                  p.extend(u, n),
                  (u.button = { 0: 1, 1: 4, 2: 2 }[u.button] || u.button)),
              u
            );
          },
          keyEvent: function (o, n) {
            var u, c;
            if (
              ((n = p.extend(
                {
                  bubbles: !0,
                  cancelable: !0,
                  view: f(c),
                  ctrlKey: !1,
                  altKey: !1,
                  shiftKey: !1,
                  metaKey: !1,
                  keyCode: 0,
                  charCode: y,
                },
                n
              )),
              (c = l(this.target)
                ? this.target
                : this.target.ownerDocument || document),
              c.createEvent)
            )
              try {
                (u = c.createEvent("KeyEvents")),
                  u.initKeyEvent(
                    o,
                    n.bubbles,
                    n.cancelable,
                    n.view,
                    n.ctrlKey,
                    n.altKey,
                    n.shiftKey,
                    n.metaKey,
                    n.keyCode,
                    n.charCode
                  );
              } catch {
                (u = c.createEvent("Events")),
                  u.initEvent(o, n.bubbles, n.cancelable),
                  p.extend(u, {
                    view: n.view,
                    ctrlKey: n.ctrlKey,
                    altKey: n.altKey,
                    shiftKey: n.shiftKey,
                    metaKey: n.metaKey,
                    keyCode: n.keyCode,
                    charCode: n.charCode,
                  });
              }
            else
              c.createEventObject &&
                ((u = c.createEventObject()), p.extend(u, n));
            return (
              (/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()) ||
                {}.toString.call(window.opera) === "[object Opera]") &&
                ((u.keyCode = n.charCode > 0 ? n.charCode : n.keyCode),
                (u.charCode = y)),
              u
            );
          },
          dispatchEvent: function (o, n, u, c) {
            c.jQueryTrigger === !0
              ? p(o).trigger(p.extend({}, u, c, { type: n }))
              : o.dispatchEvent
              ? o.dispatchEvent(u)
              : o.fireEvent && o.fireEvent("on" + n, u);
          },
          simulateFocus: function () {
            var o,
              n = !1,
              u = p(this.target);
            function c() {
              n = !0;
            }
            u.on("focus", c),
              u.first().trigger("focus"),
              n ||
                ((o = p.Event("focusin")),
                o.preventDefault(),
                u.trigger(o),
                u.triggerHandler("focus")),
              u.unbind("focus", c);
          },
          simulateBlur: function () {
            var o,
              n = !1,
              u = p(this.target);
            function c() {
              n = !0;
            }
            u.on("blur", c),
              u.first().trigger("blur"),
              setTimeout(function () {
                u[0].ownerDocument.activeElement === u[0] &&
                  p(u[0].ownerDocument.body).trigger("focus"),
                  n ||
                    ((o = p.Event("focusout")),
                    o.preventDefault(),
                    u.trigger(o),
                    u.triggerHandler("blur")),
                  u.off("blur", c);
              }, 1);
          },
        });
      function t(o) {
        var n,
          u,
          c = p(o);
        return (
          l(c[0])
            ? ((u = c), (n = { left: 0, top: 0 }))
            : ((u = p(c[0].ownerDocument || document)), (n = c.offset())),
          {
            x: n.left + c.outerWidth() / 2 - u.scrollLeft(),
            y: n.top + c.outerHeight() / 2 - u.scrollTop(),
          }
        );
      }
      function i(o) {
        var n,
          u,
          c = p(o);
        return (
          l(c[0])
            ? ((u = c), (n = { left: 0, top: 0 }))
            : ((u = p(c[0].ownerDocument || document)), (n = c.offset())),
          { x: n.left - document.scrollLeft(), y: n.top - document.scrollTop() }
        );
      }
      p.extend(p.simulate.prototype, {
        simulateDrag: function () {
          var o = 0,
            n = this.target,
            u = this.options,
            c = u.handle === "corner" ? i(n) : t(n),
            d = Math.floor(c.x),
            h = Math.floor(c.y),
            k = { clientX: d, clientY: h },
            C = u.dx || (u.x !== y ? u.x - d : 0),
            S = u.dy || (u.y !== y ? u.y - h : 0),
            w = u.moves || 3;
          for (this.simulateEvent(n, "mousedown", k); o < w; o++)
            (d += C / w),
              (h += S / w),
              (k = { clientX: Math.round(d), clientY: Math.round(h) }),
              this.simulateEvent(n.ownerDocument, "mousemove", k);
          p.contains(document, n)
            ? (this.simulateEvent(n, "mouseup", k),
              this.simulateEvent(n, "click", k))
            : this.simulateEvent(document, "mouseup", k);
        },
      });
    })(m);
  }
);
csui.define("csui/lib/othelp", [], function () {
  let x;
  function m(s, e) {
    x = e();
  }
  m.amd = !0;
  function p() {
    throw new Error("Not imlemented");
  }
  (function (s, e) {
    typeof exports == "object"
      ? (module.exports = exports = e())
      : typeof m == "function" && m.amd
      ? m([], e)
      : (s.CryptoJS = e());
  })(this, function () {
    var s =
      s ||
      (function (e, r) {
        var l;
        if (
          (typeof window < "u" && window.crypto && (l = window.crypto),
          !l && typeof window < "u" && window.msCrypto && (l = window.msCrypto),
          !l && typeof global < "u" && global.crypto && (l = global.crypto),
          !l && typeof p == "function")
        )
          try {
            l = p("crypto");
          } catch {}
        var f = function () {
            if (l) {
              if (typeof l.getRandomValues == "function")
                try {
                  return l.getRandomValues(new Uint32Array(1))[0];
                } catch {}
              if (typeof l.randomBytes == "function")
                try {
                  return l.randomBytes(4).readInt32LE();
                } catch {}
            }
            throw new Error(
              "Native crypto module could not be used to get secure random number."
            );
          },
          t =
            Object.create ||
            (function () {
              function b() {}
              return function (v) {
                var _;
                return (
                  (b.prototype = v), (_ = new b()), (b.prototype = null), _
                );
              };
            })(),
          i = {},
          o = (i.lib = {}),
          n = (o.Base = (function () {
            return {
              extend: function (b) {
                var v = t(this);
                return (
                  b && v.mixIn(b),
                  (!v.hasOwnProperty("init") || this.init === v.init) &&
                    (v.init = function () {
                      v.$super.init.apply(this, arguments);
                    }),
                  (v.init.prototype = v),
                  (v.$super = this),
                  v
                );
              },
              create: function () {
                var b = this.extend();
                return b.init.apply(b, arguments), b;
              },
              init: function () {},
              mixIn: function (b) {
                for (var v in b) b.hasOwnProperty(v) && (this[v] = b[v]);
                b.hasOwnProperty("toString") && (this.toString = b.toString);
              },
              clone: function () {
                return this.init.prototype.extend(this);
              },
            };
          })()),
          u = (o.WordArray = n.extend({
            init: function (b, v) {
              (b = this.words = b || []),
                v != r ? (this.sigBytes = v) : (this.sigBytes = b.length * 4);
            },
            toString: function (b) {
              return (b || d).stringify(this);
            },
            concat: function (b) {
              var v = this.words,
                _ = b.words,
                T = this.sigBytes,
                a = b.sigBytes;
              if ((this.clamp(), T % 4))
                for (var g = 0; g < a; g++) {
                  var I = (_[g >>> 2] >>> (24 - (g % 4) * 8)) & 255;
                  v[(T + g) >>> 2] |= I << (24 - ((T + g) % 4) * 8);
                }
              else for (var g = 0; g < a; g += 4) v[(T + g) >>> 2] = _[g >>> 2];
              return (this.sigBytes += a), this;
            },
            clamp: function () {
              var b = this.words,
                v = this.sigBytes;
              (b[v >>> 2] &= 4294967295 << (32 - (v % 4) * 8)),
                (b.length = e.ceil(v / 4));
            },
            clone: function () {
              var b = n.clone.call(this);
              return (b.words = this.words.slice(0)), b;
            },
            random: function (b) {
              for (var v = [], _ = 0; _ < b; _ += 4) v.push(f());
              return new u.init(v, b);
            },
          })),
          c = (i.enc = {}),
          d = (c.Hex = {
            stringify: function (b) {
              for (var v = b.words, _ = b.sigBytes, T = [], a = 0; a < _; a++) {
                var g = (v[a >>> 2] >>> (24 - (a % 4) * 8)) & 255;
                T.push((g >>> 4).toString(16)), T.push((g & 15).toString(16));
              }
              return T.join("");
            },
            parse: function (b) {
              for (var v = b.length, _ = [], T = 0; T < v; T += 2)
                _[T >>> 3] |=
                  parseInt(b.substr(T, 2), 16) << (24 - (T % 8) * 4);
              return new u.init(_, v / 2);
            },
          }),
          h = (c.Latin1 = {
            stringify: function (b) {
              for (var v = b.words, _ = b.sigBytes, T = [], a = 0; a < _; a++) {
                var g = (v[a >>> 2] >>> (24 - (a % 4) * 8)) & 255;
                T.push(String.fromCharCode(g));
              }
              return T.join("");
            },
            parse: function (b) {
              for (var v = b.length, _ = [], T = 0; T < v; T++)
                _[T >>> 2] |= (b.charCodeAt(T) & 255) << (24 - (T % 4) * 8);
              return new u.init(_, v);
            },
          }),
          k = (c.Utf8 = {
            stringify: function (b) {
              try {
                return decodeURIComponent(escape(h.stringify(b)));
              } catch {
                throw new Error("Malformed UTF-8 data");
              }
            },
            parse: function (b) {
              return h.parse(unescape(encodeURIComponent(b)));
            },
          }),
          C = (o.BufferedBlockAlgorithm = n.extend({
            reset: function () {
              (this._data = new u.init()), (this._nDataBytes = 0);
            },
            _append: function (b) {
              typeof b == "string" && (b = k.parse(b)),
                this._data.concat(b),
                (this._nDataBytes += b.sigBytes);
            },
            _process: function (b) {
              var v,
                _ = this._data,
                T = _.words,
                a = _.sigBytes,
                g = this.blockSize,
                I = g * 4,
                D = a / I;
              b
                ? (D = e.ceil(D))
                : (D = e.max((D | 0) - this._minBufferSize, 0));
              var A = D * g,
                B = e.min(A * 4, a);
              if (A) {
                for (var M = 0; M < A; M += g) this._doProcessBlock(T, M);
                (v = T.splice(0, A)), (_.sigBytes -= B);
              }
              return new u.init(v, B);
            },
            clone: function () {
              var b = n.clone.call(this);
              return (b._data = this._data.clone()), b;
            },
            _minBufferSize: 0,
          })),
          S = (o.Hasher = C.extend({
            cfg: n.extend(),
            init: function (b) {
              (this.cfg = this.cfg.extend(b)), this.reset();
            },
            reset: function () {
              C.reset.call(this), this._doReset();
            },
            update: function (b) {
              return this._append(b), this._process(), this;
            },
            finalize: function (b) {
              b && this._append(b);
              var v = this._doFinalize();
              return v;
            },
            blockSize: 512 / 32,
            _createHelper: function (b) {
              return function (v, _) {
                return new b.init(_).finalize(v);
              };
            },
            _createHmacHelper: function (b) {
              return function (v, _) {
                return new w.HMAC.init(b, _).finalize(v);
              };
            },
          })),
          w = (i.algo = {});
        return i;
      })(Math);
    return (
      (function () {
        var e = s,
          r = e.lib,
          l = r.WordArray,
          f = e.enc,
          t = (f.Base64 = {
            stringify: function (o) {
              var n = o.words,
                u = o.sigBytes,
                c = this._map;
              o.clamp();
              for (var d = [], h = 0; h < u; h += 3)
                for (
                  var k = (n[h >>> 2] >>> (24 - (h % 4) * 8)) & 255,
                    C = (n[(h + 1) >>> 2] >>> (24 - ((h + 1) % 4) * 8)) & 255,
                    S = (n[(h + 2) >>> 2] >>> (24 - ((h + 2) % 4) * 8)) & 255,
                    w = (k << 16) | (C << 8) | S,
                    b = 0;
                  b < 4 && h + b * 0.75 < u;
                  b++
                )
                  d.push(c.charAt((w >>> (6 * (3 - b))) & 63));
              var v = c.charAt(64);
              if (v) for (; d.length % 4; ) d.push(v);
              return d.join("");
            },
            parse: function (o) {
              var n = o.length,
                u = this._map,
                c = this._reverseMap;
              if (!c) {
                c = this._reverseMap = [];
                for (var d = 0; d < u.length; d++) c[u.charCodeAt(d)] = d;
              }
              var h = u.charAt(64);
              if (h) {
                var k = o.indexOf(h);
                k !== -1 && (n = k);
              }
              return i(o, n, c);
            },
            _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
          });
        function i(o, n, u) {
          for (var c = [], d = 0, h = 0; h < n; h++)
            if (h % 4) {
              var k = u[o.charCodeAt(h - 1)] << ((h % 4) * 2),
                C = u[o.charCodeAt(h)] >>> (6 - (h % 4) * 2),
                S = k | C;
              (c[d >>> 2] |= S << (24 - (d % 4) * 8)), d++;
            }
          return l.create(c, d);
        }
      })(),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.WordArray,
          t = l.Hasher,
          i = r.algo,
          o = [];
        (function () {
          for (var k = 0; k < 64; k++)
            o[k] = (e.abs(e.sin(k + 1)) * 4294967296) | 0;
        })();
        var n = (i.MD5 = t.extend({
          _doReset: function () {
            this._hash = new f.init([
              1732584193, 4023233417, 2562383102, 271733878,
            ]);
          },
          _doProcessBlock: function (k, C) {
            for (var S = 0; S < 16; S++) {
              var w = C + S,
                b = k[w];
              k[w] =
                (((b << 8) | (b >>> 24)) & 16711935) |
                (((b << 24) | (b >>> 8)) & 4278255360);
            }
            var v = this._hash.words,
              _ = k[C + 0],
              T = k[C + 1],
              a = k[C + 2],
              g = k[C + 3],
              I = k[C + 4],
              D = k[C + 5],
              A = k[C + 6],
              B = k[C + 7],
              M = k[C + 8],
              E = k[C + 9],
              P = k[C + 10],
              O = k[C + 11],
              z = k[C + 12],
              F = k[C + 13],
              U = k[C + 14],
              H = k[C + 15],
              N = v[0],
              V = v[1],
              L = v[2],
              j = v[3];
            (N = u(N, V, L, j, _, 7, o[0])),
              (j = u(j, N, V, L, T, 12, o[1])),
              (L = u(L, j, N, V, a, 17, o[2])),
              (V = u(V, L, j, N, g, 22, o[3])),
              (N = u(N, V, L, j, I, 7, o[4])),
              (j = u(j, N, V, L, D, 12, o[5])),
              (L = u(L, j, N, V, A, 17, o[6])),
              (V = u(V, L, j, N, B, 22, o[7])),
              (N = u(N, V, L, j, M, 7, o[8])),
              (j = u(j, N, V, L, E, 12, o[9])),
              (L = u(L, j, N, V, P, 17, o[10])),
              (V = u(V, L, j, N, O, 22, o[11])),
              (N = u(N, V, L, j, z, 7, o[12])),
              (j = u(j, N, V, L, F, 12, o[13])),
              (L = u(L, j, N, V, U, 17, o[14])),
              (V = u(V, L, j, N, H, 22, o[15])),
              (N = c(N, V, L, j, T, 5, o[16])),
              (j = c(j, N, V, L, A, 9, o[17])),
              (L = c(L, j, N, V, O, 14, o[18])),
              (V = c(V, L, j, N, _, 20, o[19])),
              (N = c(N, V, L, j, D, 5, o[20])),
              (j = c(j, N, V, L, P, 9, o[21])),
              (L = c(L, j, N, V, H, 14, o[22])),
              (V = c(V, L, j, N, I, 20, o[23])),
              (N = c(N, V, L, j, E, 5, o[24])),
              (j = c(j, N, V, L, U, 9, o[25])),
              (L = c(L, j, N, V, g, 14, o[26])),
              (V = c(V, L, j, N, M, 20, o[27])),
              (N = c(N, V, L, j, F, 5, o[28])),
              (j = c(j, N, V, L, a, 9, o[29])),
              (L = c(L, j, N, V, B, 14, o[30])),
              (V = c(V, L, j, N, z, 20, o[31])),
              (N = d(N, V, L, j, D, 4, o[32])),
              (j = d(j, N, V, L, M, 11, o[33])),
              (L = d(L, j, N, V, O, 16, o[34])),
              (V = d(V, L, j, N, U, 23, o[35])),
              (N = d(N, V, L, j, T, 4, o[36])),
              (j = d(j, N, V, L, I, 11, o[37])),
              (L = d(L, j, N, V, B, 16, o[38])),
              (V = d(V, L, j, N, P, 23, o[39])),
              (N = d(N, V, L, j, F, 4, o[40])),
              (j = d(j, N, V, L, _, 11, o[41])),
              (L = d(L, j, N, V, g, 16, o[42])),
              (V = d(V, L, j, N, A, 23, o[43])),
              (N = d(N, V, L, j, E, 4, o[44])),
              (j = d(j, N, V, L, z, 11, o[45])),
              (L = d(L, j, N, V, H, 16, o[46])),
              (V = d(V, L, j, N, a, 23, o[47])),
              (N = h(N, V, L, j, _, 6, o[48])),
              (j = h(j, N, V, L, B, 10, o[49])),
              (L = h(L, j, N, V, U, 15, o[50])),
              (V = h(V, L, j, N, D, 21, o[51])),
              (N = h(N, V, L, j, z, 6, o[52])),
              (j = h(j, N, V, L, g, 10, o[53])),
              (L = h(L, j, N, V, P, 15, o[54])),
              (V = h(V, L, j, N, T, 21, o[55])),
              (N = h(N, V, L, j, M, 6, o[56])),
              (j = h(j, N, V, L, H, 10, o[57])),
              (L = h(L, j, N, V, A, 15, o[58])),
              (V = h(V, L, j, N, F, 21, o[59])),
              (N = h(N, V, L, j, I, 6, o[60])),
              (j = h(j, N, V, L, O, 10, o[61])),
              (L = h(L, j, N, V, a, 15, o[62])),
              (V = h(V, L, j, N, E, 21, o[63])),
              (v[0] = (v[0] + N) | 0),
              (v[1] = (v[1] + V) | 0),
              (v[2] = (v[2] + L) | 0),
              (v[3] = (v[3] + j) | 0);
          },
          _doFinalize: function () {
            var k = this._data,
              C = k.words,
              S = this._nDataBytes * 8,
              w = k.sigBytes * 8;
            C[w >>> 5] |= 128 << (24 - (w % 32));
            var b = e.floor(S / 4294967296),
              v = S;
            (C[(((w + 64) >>> 9) << 4) + 15] =
              (((b << 8) | (b >>> 24)) & 16711935) |
              (((b << 24) | (b >>> 8)) & 4278255360)),
              (C[(((w + 64) >>> 9) << 4) + 14] =
                (((v << 8) | (v >>> 24)) & 16711935) |
                (((v << 24) | (v >>> 8)) & 4278255360)),
              (k.sigBytes = (C.length + 1) * 4),
              this._process();
            for (var _ = this._hash, T = _.words, a = 0; a < 4; a++) {
              var g = T[a];
              T[a] =
                (((g << 8) | (g >>> 24)) & 16711935) |
                (((g << 24) | (g >>> 8)) & 4278255360);
            }
            return _;
          },
          clone: function () {
            var k = t.clone.call(this);
            return (k._hash = this._hash.clone()), k;
          },
        }));
        function u(k, C, S, w, b, v, _) {
          var T = k + ((C & S) | (~C & w)) + b + _;
          return ((T << v) | (T >>> (32 - v))) + C;
        }
        function c(k, C, S, w, b, v, _) {
          var T = k + ((C & w) | (S & ~w)) + b + _;
          return ((T << v) | (T >>> (32 - v))) + C;
        }
        function d(k, C, S, w, b, v, _) {
          var T = k + (C ^ S ^ w) + b + _;
          return ((T << v) | (T >>> (32 - v))) + C;
        }
        function h(k, C, S, w, b, v, _) {
          var T = k + (S ^ (C | ~w)) + b + _;
          return ((T << v) | (T >>> (32 - v))) + C;
        }
        (r.MD5 = t._createHelper(n)), (r.HmacMD5 = t._createHmacHelper(n));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          l = r.WordArray,
          f = r.Hasher,
          t = e.algo,
          i = [],
          o = (t.SHA1 = f.extend({
            _doReset: function () {
              this._hash = new l.init([
                1732584193, 4023233417, 2562383102, 271733878, 3285377520,
              ]);
            },
            _doProcessBlock: function (n, u) {
              for (
                var c = this._hash.words,
                  d = c[0],
                  h = c[1],
                  k = c[2],
                  C = c[3],
                  S = c[4],
                  w = 0;
                w < 80;
                w++
              ) {
                if (w < 16) i[w] = n[u + w] | 0;
                else {
                  var b = i[w - 3] ^ i[w - 8] ^ i[w - 14] ^ i[w - 16];
                  i[w] = (b << 1) | (b >>> 31);
                }
                var v = ((d << 5) | (d >>> 27)) + S + i[w];
                w < 20
                  ? (v += ((h & k) | (~h & C)) + 1518500249)
                  : w < 40
                  ? (v += (h ^ k ^ C) + 1859775393)
                  : w < 60
                  ? (v += ((h & k) | (h & C) | (k & C)) - 1894007588)
                  : (v += (h ^ k ^ C) - 899497514),
                  (S = C),
                  (C = k),
                  (k = (h << 30) | (h >>> 2)),
                  (h = d),
                  (d = v);
              }
              (c[0] = (c[0] + d) | 0),
                (c[1] = (c[1] + h) | 0),
                (c[2] = (c[2] + k) | 0),
                (c[3] = (c[3] + C) | 0),
                (c[4] = (c[4] + S) | 0);
            },
            _doFinalize: function () {
              var n = this._data,
                u = n.words,
                c = this._nDataBytes * 8,
                d = n.sigBytes * 8;
              return (
                (u[d >>> 5] |= 128 << (24 - (d % 32))),
                (u[(((d + 64) >>> 9) << 4) + 14] = Math.floor(c / 4294967296)),
                (u[(((d + 64) >>> 9) << 4) + 15] = c),
                (n.sigBytes = u.length * 4),
                this._process(),
                this._hash
              );
            },
            clone: function () {
              var n = f.clone.call(this);
              return (n._hash = this._hash.clone()), n;
            },
          }));
        (e.SHA1 = f._createHelper(o)), (e.HmacSHA1 = f._createHmacHelper(o));
      })(),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.WordArray,
          t = l.Hasher,
          i = r.algo,
          o = [],
          n = [];
        (function () {
          function d(S) {
            for (var w = e.sqrt(S), b = 2; b <= w; b++) if (!(S % b)) return !1;
            return !0;
          }
          function h(S) {
            return ((S - (S | 0)) * 4294967296) | 0;
          }
          for (var k = 2, C = 0; C < 64; )
            d(k) &&
              (C < 8 && (o[C] = h(e.pow(k, 1 / 2))),
              (n[C] = h(e.pow(k, 1 / 3))),
              C++),
              k++;
        })();
        var u = [],
          c = (i.SHA256 = t.extend({
            _doReset: function () {
              this._hash = new f.init(o.slice(0));
            },
            _doProcessBlock: function (d, h) {
              for (
                var k = this._hash.words,
                  C = k[0],
                  S = k[1],
                  w = k[2],
                  b = k[3],
                  v = k[4],
                  _ = k[5],
                  T = k[6],
                  a = k[7],
                  g = 0;
                g < 64;
                g++
              ) {
                if (g < 16) u[g] = d[h + g] | 0;
                else {
                  var I = u[g - 15],
                    D =
                      ((I << 25) | (I >>> 7)) ^
                      ((I << 14) | (I >>> 18)) ^
                      (I >>> 3),
                    A = u[g - 2],
                    B =
                      ((A << 15) | (A >>> 17)) ^
                      ((A << 13) | (A >>> 19)) ^
                      (A >>> 10);
                  u[g] = D + u[g - 7] + B + u[g - 16];
                }
                var M = (v & _) ^ (~v & T),
                  E = (C & S) ^ (C & w) ^ (S & w),
                  P =
                    ((C << 30) | (C >>> 2)) ^
                    ((C << 19) | (C >>> 13)) ^
                    ((C << 10) | (C >>> 22)),
                  O =
                    ((v << 26) | (v >>> 6)) ^
                    ((v << 21) | (v >>> 11)) ^
                    ((v << 7) | (v >>> 25)),
                  z = a + O + M + n[g] + u[g],
                  F = P + E;
                (a = T),
                  (T = _),
                  (_ = v),
                  (v = (b + z) | 0),
                  (b = w),
                  (w = S),
                  (S = C),
                  (C = (z + F) | 0);
              }
              (k[0] = (k[0] + C) | 0),
                (k[1] = (k[1] + S) | 0),
                (k[2] = (k[2] + w) | 0),
                (k[3] = (k[3] + b) | 0),
                (k[4] = (k[4] + v) | 0),
                (k[5] = (k[5] + _) | 0),
                (k[6] = (k[6] + T) | 0),
                (k[7] = (k[7] + a) | 0);
            },
            _doFinalize: function () {
              var d = this._data,
                h = d.words,
                k = this._nDataBytes * 8,
                C = d.sigBytes * 8;
              return (
                (h[C >>> 5] |= 128 << (24 - (C % 32))),
                (h[(((C + 64) >>> 9) << 4) + 14] = e.floor(k / 4294967296)),
                (h[(((C + 64) >>> 9) << 4) + 15] = k),
                (d.sigBytes = h.length * 4),
                this._process(),
                this._hash
              );
            },
            clone: function () {
              var d = t.clone.call(this);
              return (d._hash = this._hash.clone()), d;
            },
          }));
        (r.SHA256 = t._createHelper(c)),
          (r.HmacSHA256 = t._createHmacHelper(c));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          l = r.WordArray,
          f = e.enc,
          t =
            (f.Utf16 =
            f.Utf16BE =
              {
                stringify: function (o) {
                  for (
                    var n = o.words, u = o.sigBytes, c = [], d = 0;
                    d < u;
                    d += 2
                  ) {
                    var h = (n[d >>> 2] >>> (16 - (d % 4) * 8)) & 65535;
                    c.push(String.fromCharCode(h));
                  }
                  return c.join("");
                },
                parse: function (o) {
                  for (var n = o.length, u = [], c = 0; c < n; c++)
                    u[c >>> 1] |= o.charCodeAt(c) << (16 - (c % 2) * 16);
                  return l.create(u, n * 2);
                },
              });
        f.Utf16LE = {
          stringify: function (o) {
            for (
              var n = o.words, u = o.sigBytes, c = [], d = 0;
              d < u;
              d += 2
            ) {
              var h = i((n[d >>> 2] >>> (16 - (d % 4) * 8)) & 65535);
              c.push(String.fromCharCode(h));
            }
            return c.join("");
          },
          parse: function (o) {
            for (var n = o.length, u = [], c = 0; c < n; c++)
              u[c >>> 1] |= i(o.charCodeAt(c) << (16 - (c % 2) * 16));
            return l.create(u, n * 2);
          },
        };
        function i(o) {
          return ((o << 8) & 4278255360) | ((o >>> 8) & 16711935);
        }
      })(),
      (function () {
        if (typeof ArrayBuffer == "function") {
          var e = s,
            r = e.lib,
            l = r.WordArray,
            f = l.init,
            t = (l.init = function (i) {
              if (
                (i instanceof ArrayBuffer && (i = new Uint8Array(i)),
                (i instanceof Int8Array ||
                  (typeof Uint8ClampedArray < "u" &&
                    i instanceof Uint8ClampedArray) ||
                  i instanceof Int16Array ||
                  i instanceof Uint16Array ||
                  i instanceof Int32Array ||
                  i instanceof Uint32Array ||
                  i instanceof Float32Array ||
                  i instanceof Float64Array) &&
                  (i = new Uint8Array(i.buffer, i.byteOffset, i.byteLength)),
                i instanceof Uint8Array)
              ) {
                for (var o = i.byteLength, n = [], u = 0; u < o; u++)
                  n[u >>> 2] |= i[u] << (24 - (u % 4) * 8);
                f.call(this, n, o);
              } else f.apply(this, arguments);
            });
          t.prototype = l;
        }
      })(),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.WordArray,
          t = l.Hasher,
          i = r.algo,
          o = f.create([
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1,
            10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1,
            2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15,
            14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13,
          ]),
          n = f.create([
            5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7,
            0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9,
            11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13,
            9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11,
          ]),
          u = f.create([
            11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13,
            11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13,
            15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14,
            5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8,
            5, 6,
          ]),
          c = f.create([
            8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15,
            7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6,
            14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9,
            12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13,
            11, 11,
          ]),
          d = f.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),
          h = f.create([1352829926, 1548603684, 1836072691, 2053994217, 0]),
          k = (i.RIPEMD160 = t.extend({
            _doReset: function () {
              this._hash = f.create([
                1732584193, 4023233417, 2562383102, 271733878, 3285377520,
              ]);
            },
            _doProcessBlock: function (T, a) {
              for (var g = 0; g < 16; g++) {
                var I = a + g,
                  D = T[I];
                T[I] =
                  (((D << 8) | (D >>> 24)) & 16711935) |
                  (((D << 24) | (D >>> 8)) & 4278255360);
              }
              var A = this._hash.words,
                B = d.words,
                M = h.words,
                E = o.words,
                P = n.words,
                O = u.words,
                z = c.words,
                F,
                U,
                H,
                N,
                V,
                L,
                j,
                G,
                W,
                q;
              (L = F = A[0]),
                (j = U = A[1]),
                (G = H = A[2]),
                (W = N = A[3]),
                (q = V = A[4]);
              for (var R, g = 0; g < 80; g += 1)
                (R = (F + T[a + E[g]]) | 0),
                  g < 16
                    ? (R += C(U, H, N) + B[0])
                    : g < 32
                    ? (R += S(U, H, N) + B[1])
                    : g < 48
                    ? (R += w(U, H, N) + B[2])
                    : g < 64
                    ? (R += b(U, H, N) + B[3])
                    : (R += v(U, H, N) + B[4]),
                  (R = R | 0),
                  (R = _(R, O[g])),
                  (R = (R + V) | 0),
                  (F = V),
                  (V = N),
                  (N = _(H, 10)),
                  (H = U),
                  (U = R),
                  (R = (L + T[a + P[g]]) | 0),
                  g < 16
                    ? (R += v(j, G, W) + M[0])
                    : g < 32
                    ? (R += b(j, G, W) + M[1])
                    : g < 48
                    ? (R += w(j, G, W) + M[2])
                    : g < 64
                    ? (R += S(j, G, W) + M[3])
                    : (R += C(j, G, W) + M[4]),
                  (R = R | 0),
                  (R = _(R, z[g])),
                  (R = (R + q) | 0),
                  (L = q),
                  (q = W),
                  (W = _(G, 10)),
                  (G = j),
                  (j = R);
              (R = (A[1] + H + W) | 0),
                (A[1] = (A[2] + N + q) | 0),
                (A[2] = (A[3] + V + L) | 0),
                (A[3] = (A[4] + F + j) | 0),
                (A[4] = (A[0] + U + G) | 0),
                (A[0] = R);
            },
            _doFinalize: function () {
              var T = this._data,
                a = T.words,
                g = this._nDataBytes * 8,
                I = T.sigBytes * 8;
              (a[I >>> 5] |= 128 << (24 - (I % 32))),
                (a[(((I + 64) >>> 9) << 4) + 14] =
                  (((g << 8) | (g >>> 24)) & 16711935) |
                  (((g << 24) | (g >>> 8)) & 4278255360)),
                (T.sigBytes = (a.length + 1) * 4),
                this._process();
              for (var D = this._hash, A = D.words, B = 0; B < 5; B++) {
                var M = A[B];
                A[B] =
                  (((M << 8) | (M >>> 24)) & 16711935) |
                  (((M << 24) | (M >>> 8)) & 4278255360);
              }
              return D;
            },
            clone: function () {
              var T = t.clone.call(this);
              return (T._hash = this._hash.clone()), T;
            },
          }));
        function C(T, a, g) {
          return T ^ a ^ g;
        }
        function S(T, a, g) {
          return (T & a) | (~T & g);
        }
        function w(T, a, g) {
          return (T | ~a) ^ g;
        }
        function b(T, a, g) {
          return (T & g) | (a & ~g);
        }
        function v(T, a, g) {
          return T ^ (a | ~g);
        }
        function _(T, a) {
          return (T << a) | (T >>> (32 - a));
        }
        (r.RIPEMD160 = t._createHelper(k)),
          (r.HmacRIPEMD160 = t._createHmacHelper(k));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          l = r.Base,
          f = e.enc,
          t = f.Utf8,
          i = e.algo,
          o = (i.HMAC = l.extend({
            init: function (n, u) {
              (n = this._hasher = new n.init()),
                typeof u == "string" && (u = t.parse(u));
              var c = n.blockSize,
                d = c * 4;
              u.sigBytes > d && (u = n.finalize(u)), u.clamp();
              for (
                var h = (this._oKey = u.clone()),
                  k = (this._iKey = u.clone()),
                  C = h.words,
                  S = k.words,
                  w = 0;
                w < c;
                w++
              )
                (C[w] ^= 1549556828), (S[w] ^= 909522486);
              (h.sigBytes = k.sigBytes = d), this.reset();
            },
            reset: function () {
              var n = this._hasher;
              n.reset(), n.update(this._iKey);
            },
            update: function (n) {
              return this._hasher.update(n), this;
            },
            finalize: function (n) {
              var u = this._hasher,
                c = u.finalize(n);
              u.reset();
              var d = u.finalize(this._oKey.clone().concat(c));
              return d;
            },
          }));
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.Base,
          f = r.WordArray,
          t = e.algo,
          i = t.SHA1,
          o = t.HMAC,
          n = (t.PBKDF2 = l.extend({
            cfg: l.extend({ keySize: 128 / 32, hasher: i, iterations: 1 }),
            init: function (u) {
              this.cfg = this.cfg.extend(u);
            },
            compute: function (u, c) {
              for (
                var d = this.cfg,
                  h = o.create(d.hasher, u),
                  k = f.create(),
                  C = f.create([1]),
                  S = k.words,
                  w = C.words,
                  b = d.keySize,
                  v = d.iterations;
                S.length < b;

              ) {
                var _ = h.update(c).finalize(C);
                h.reset();
                for (var T = _.words, a = T.length, g = _, I = 1; I < v; I++) {
                  (g = h.finalize(g)), h.reset();
                  for (var D = g.words, A = 0; A < a; A++) T[A] ^= D[A];
                }
                k.concat(_), w[0]++;
              }
              return (k.sigBytes = b * 4), k;
            },
          }));
        e.PBKDF2 = function (u, c, d) {
          return n.create(d).compute(u, c);
        };
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.Base,
          f = r.WordArray,
          t = e.algo,
          i = t.MD5,
          o = (t.EvpKDF = l.extend({
            cfg: l.extend({ keySize: 128 / 32, hasher: i, iterations: 1 }),
            init: function (n) {
              this.cfg = this.cfg.extend(n);
            },
            compute: function (n, u) {
              for (
                var c,
                  d = this.cfg,
                  h = d.hasher.create(),
                  k = f.create(),
                  C = k.words,
                  S = d.keySize,
                  w = d.iterations;
                C.length < S;

              ) {
                c && h.update(c), (c = h.update(n).finalize(u)), h.reset();
                for (var b = 1; b < w; b++) (c = h.finalize(c)), h.reset();
                k.concat(c);
              }
              return (k.sigBytes = S * 4), k;
            },
          }));
        e.EvpKDF = function (n, u, c) {
          return o.create(c).compute(n, u);
        };
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.WordArray,
          f = e.algo,
          t = f.SHA256,
          i = (f.SHA224 = t.extend({
            _doReset: function () {
              this._hash = new l.init([
                3238371032, 914150663, 812702999, 4144912697, 4290775857,
                1750603025, 1694076839, 3204075428,
              ]);
            },
            _doFinalize: function () {
              var o = t._doFinalize.call(this);
              return (o.sigBytes -= 4), o;
            },
          }));
        (e.SHA224 = t._createHelper(i)),
          (e.HmacSHA224 = t._createHmacHelper(i));
      })(),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.Base,
          t = l.WordArray,
          i = (r.x64 = {}),
          o = (i.Word = f.extend({
            init: function (u, c) {
              (this.high = u), (this.low = c);
            },
          })),
          n = (i.WordArray = f.extend({
            init: function (u, c) {
              (u = this.words = u || []),
                c != e ? (this.sigBytes = c) : (this.sigBytes = u.length * 8);
            },
            toX32: function () {
              for (
                var u = this.words, c = u.length, d = [], h = 0;
                h < c;
                h++
              ) {
                var k = u[h];
                d.push(k.high), d.push(k.low);
              }
              return t.create(d, this.sigBytes);
            },
            clone: function () {
              for (
                var u = f.clone.call(this),
                  c = (u.words = this.words.slice(0)),
                  d = c.length,
                  h = 0;
                h < d;
                h++
              )
                c[h] = c[h].clone();
              return u;
            },
          }));
      })(),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.WordArray,
          t = l.Hasher,
          i = r.x64,
          o = i.Word,
          n = r.algo,
          u = [],
          c = [],
          d = [];
        (function () {
          for (var C = 1, S = 0, w = 0; w < 24; w++) {
            u[C + 5 * S] = (((w + 1) * (w + 2)) / 2) % 64;
            var b = S % 5,
              v = (2 * C + 3 * S) % 5;
            (C = b), (S = v);
          }
          for (var C = 0; C < 5; C++)
            for (var S = 0; S < 5; S++)
              c[C + 5 * S] = S + ((2 * C + 3 * S) % 5) * 5;
          for (var _ = 1, T = 0; T < 24; T++) {
            for (var a = 0, g = 0, I = 0; I < 7; I++) {
              if (_ & 1) {
                var D = (1 << I) - 1;
                D < 32 ? (g ^= 1 << D) : (a ^= 1 << (D - 32));
              }
              _ & 128 ? (_ = (_ << 1) ^ 113) : (_ <<= 1);
            }
            d[T] = o.create(a, g);
          }
        })();
        var h = [];
        (function () {
          for (var C = 0; C < 25; C++) h[C] = o.create();
        })();
        var k = (n.SHA3 = t.extend({
          cfg: t.cfg.extend({ outputLength: 512 }),
          _doReset: function () {
            for (var C = (this._state = []), S = 0; S < 25; S++)
              C[S] = new o.init();
            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
          },
          _doProcessBlock: function (C, S) {
            for (
              var w = this._state, b = this.blockSize / 2, v = 0;
              v < b;
              v++
            ) {
              var _ = C[S + 2 * v],
                T = C[S + 2 * v + 1];
              (_ =
                (((_ << 8) | (_ >>> 24)) & 16711935) |
                (((_ << 24) | (_ >>> 8)) & 4278255360)),
                (T =
                  (((T << 8) | (T >>> 24)) & 16711935) |
                  (((T << 24) | (T >>> 8)) & 4278255360));
              var a = w[v];
              (a.high ^= T), (a.low ^= _);
            }
            for (var g = 0; g < 24; g++) {
              for (var I = 0; I < 5; I++) {
                for (var D = 0, A = 0, B = 0; B < 5; B++) {
                  var a = w[I + 5 * B];
                  (D ^= a.high), (A ^= a.low);
                }
                var M = h[I];
                (M.high = D), (M.low = A);
              }
              for (var I = 0; I < 5; I++)
                for (
                  var E = h[(I + 4) % 5],
                    P = h[(I + 1) % 5],
                    O = P.high,
                    z = P.low,
                    D = E.high ^ ((O << 1) | (z >>> 31)),
                    A = E.low ^ ((z << 1) | (O >>> 31)),
                    B = 0;
                  B < 5;
                  B++
                ) {
                  var a = w[I + 5 * B];
                  (a.high ^= D), (a.low ^= A);
                }
              for (var F = 1; F < 25; F++) {
                var D,
                  A,
                  a = w[F],
                  U = a.high,
                  H = a.low,
                  N = u[F];
                N < 32
                  ? ((D = (U << N) | (H >>> (32 - N))),
                    (A = (H << N) | (U >>> (32 - N))))
                  : ((D = (H << (N - 32)) | (U >>> (64 - N))),
                    (A = (U << (N - 32)) | (H >>> (64 - N))));
                var V = h[c[F]];
                (V.high = D), (V.low = A);
              }
              var L = h[0],
                j = w[0];
              (L.high = j.high), (L.low = j.low);
              for (var I = 0; I < 5; I++)
                for (var B = 0; B < 5; B++) {
                  var F = I + 5 * B,
                    a = w[F],
                    G = h[F],
                    W = h[((I + 1) % 5) + 5 * B],
                    q = h[((I + 2) % 5) + 5 * B];
                  (a.high = G.high ^ (~W.high & q.high)),
                    (a.low = G.low ^ (~W.low & q.low));
                }
              var a = w[0],
                R = d[g];
              (a.high ^= R.high), (a.low ^= R.low);
            }
          },
          _doFinalize: function () {
            var C = this._data,
              S = C.words,
              w = this._nDataBytes * 8,
              b = C.sigBytes * 8,
              v = this.blockSize * 32;
            (S[b >>> 5] |= 1 << (24 - (b % 32))),
              (S[((e.ceil((b + 1) / v) * v) >>> 5) - 1] |= 128),
              (C.sigBytes = S.length * 4),
              this._process();
            for (
              var _ = this._state,
                T = this.cfg.outputLength / 8,
                a = T / 8,
                g = [],
                I = 0;
              I < a;
              I++
            ) {
              var D = _[I],
                A = D.high,
                B = D.low;
              (A =
                (((A << 8) | (A >>> 24)) & 16711935) |
                (((A << 24) | (A >>> 8)) & 4278255360)),
                (B =
                  (((B << 8) | (B >>> 24)) & 16711935) |
                  (((B << 24) | (B >>> 8)) & 4278255360)),
                g.push(B),
                g.push(A);
            }
            return new f.init(g, T);
          },
          clone: function () {
            for (
              var C = t.clone.call(this),
                S = (C._state = this._state.slice(0)),
                w = 0;
              w < 25;
              w++
            )
              S[w] = S[w].clone();
            return C;
          },
        }));
        (r.SHA3 = t._createHelper(k)), (r.HmacSHA3 = t._createHmacHelper(k));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          l = r.Hasher,
          f = e.x64,
          t = f.Word,
          i = f.WordArray,
          o = e.algo;
        function n() {
          return t.create.apply(t, arguments);
        }
        var u = [
            n(1116352408, 3609767458),
            n(1899447441, 602891725),
            n(3049323471, 3964484399),
            n(3921009573, 2173295548),
            n(961987163, 4081628472),
            n(1508970993, 3053834265),
            n(2453635748, 2937671579),
            n(2870763221, 3664609560),
            n(3624381080, 2734883394),
            n(310598401, 1164996542),
            n(607225278, 1323610764),
            n(1426881987, 3590304994),
            n(1925078388, 4068182383),
            n(2162078206, 991336113),
            n(2614888103, 633803317),
            n(3248222580, 3479774868),
            n(3835390401, 2666613458),
            n(4022224774, 944711139),
            n(264347078, 2341262773),
            n(604807628, 2007800933),
            n(770255983, 1495990901),
            n(1249150122, 1856431235),
            n(1555081692, 3175218132),
            n(1996064986, 2198950837),
            n(2554220882, 3999719339),
            n(2821834349, 766784016),
            n(2952996808, 2566594879),
            n(3210313671, 3203337956),
            n(3336571891, 1034457026),
            n(3584528711, 2466948901),
            n(113926993, 3758326383),
            n(338241895, 168717936),
            n(666307205, 1188179964),
            n(773529912, 1546045734),
            n(1294757372, 1522805485),
            n(1396182291, 2643833823),
            n(1695183700, 2343527390),
            n(1986661051, 1014477480),
            n(2177026350, 1206759142),
            n(2456956037, 344077627),
            n(2730485921, 1290863460),
            n(2820302411, 3158454273),
            n(3259730800, 3505952657),
            n(3345764771, 106217008),
            n(3516065817, 3606008344),
            n(3600352804, 1432725776),
            n(4094571909, 1467031594),
            n(275423344, 851169720),
            n(430227734, 3100823752),
            n(506948616, 1363258195),
            n(659060556, 3750685593),
            n(883997877, 3785050280),
            n(958139571, 3318307427),
            n(1322822218, 3812723403),
            n(1537002063, 2003034995),
            n(1747873779, 3602036899),
            n(1955562222, 1575990012),
            n(2024104815, 1125592928),
            n(2227730452, 2716904306),
            n(2361852424, 442776044),
            n(2428436474, 593698344),
            n(2756734187, 3733110249),
            n(3204031479, 2999351573),
            n(3329325298, 3815920427),
            n(3391569614, 3928383900),
            n(3515267271, 566280711),
            n(3940187606, 3454069534),
            n(4118630271, 4000239992),
            n(116418474, 1914138554),
            n(174292421, 2731055270),
            n(289380356, 3203993006),
            n(460393269, 320620315),
            n(685471733, 587496836),
            n(852142971, 1086792851),
            n(1017036298, 365543100),
            n(1126000580, 2618297676),
            n(1288033470, 3409855158),
            n(1501505948, 4234509866),
            n(1607167915, 987167468),
            n(1816402316, 1246189591),
          ],
          c = [];
        (function () {
          for (var h = 0; h < 80; h++) c[h] = n();
        })();
        var d = (o.SHA512 = l.extend({
          _doReset: function () {
            this._hash = new i.init([
              new t.init(1779033703, 4089235720),
              new t.init(3144134277, 2227873595),
              new t.init(1013904242, 4271175723),
              new t.init(2773480762, 1595750129),
              new t.init(1359893119, 2917565137),
              new t.init(2600822924, 725511199),
              new t.init(528734635, 4215389547),
              new t.init(1541459225, 327033209),
            ]);
          },
          _doProcessBlock: function (h, k) {
            for (
              var C = this._hash.words,
                S = C[0],
                w = C[1],
                b = C[2],
                v = C[3],
                _ = C[4],
                T = C[5],
                a = C[6],
                g = C[7],
                I = S.high,
                D = S.low,
                A = w.high,
                B = w.low,
                M = b.high,
                E = b.low,
                P = v.high,
                O = v.low,
                z = _.high,
                F = _.low,
                U = T.high,
                H = T.low,
                N = a.high,
                V = a.low,
                L = g.high,
                j = g.low,
                G = I,
                W = D,
                q = A,
                R = B,
                Q = M,
                X = E,
                te = P,
                Y = O,
                K = z,
                $ = F,
                ie = U,
                se = H,
                re = N,
                ce = V,
                pe = L,
                ue = j,
                ee = 0;
              ee < 80;
              ee++
            ) {
              var Z,
                oe,
                fe = c[ee];
              if (ee < 16)
                (oe = fe.high = h[k + ee * 2] | 0),
                  (Z = fe.low = h[k + ee * 2 + 1] | 0);
              else {
                var me = c[ee - 15],
                  le = me.high,
                  de = me.low,
                  Te =
                    ((le >>> 1) | (de << 31)) ^
                    ((le >>> 8) | (de << 24)) ^
                    (le >>> 7),
                  ge =
                    ((de >>> 1) | (le << 31)) ^
                    ((de >>> 8) | (le << 24)) ^
                    ((de >>> 7) | (le << 25)),
                  ve = c[ee - 2],
                  ae = ve.high,
                  he = ve.low,
                  Me =
                    ((ae >>> 19) | (he << 13)) ^
                    ((ae << 3) | (he >>> 29)) ^
                    (ae >>> 6),
                  be =
                    ((he >>> 19) | (ae << 13)) ^
                    ((he << 3) | (ae >>> 29)) ^
                    ((he >>> 6) | (ae << 26)),
                  we = c[ee - 7],
                  De = we.high,
                  Ae = we.low,
                  ye = c[ee - 16],
                  Ee = ye.high,
                  xe = ye.low;
                (Z = ge + Ae),
                  (oe = Te + De + (Z >>> 0 < ge >>> 0 ? 1 : 0)),
                  (Z = Z + be),
                  (oe = oe + Me + (Z >>> 0 < be >>> 0 ? 1 : 0)),
                  (Z = Z + xe),
                  (oe = oe + Ee + (Z >>> 0 < xe >>> 0 ? 1 : 0)),
                  (fe.high = oe),
                  (fe.low = Z);
              }
              var Be = (K & ie) ^ (~K & re),
                ke = ($ & se) ^ (~$ & ce),
                Pe = (G & q) ^ (G & Q) ^ (q & Q),
                Oe = (W & R) ^ (W & X) ^ (R & X),
                Ve =
                  ((G >>> 28) | (W << 4)) ^
                  ((G << 30) | (W >>> 2)) ^
                  ((G << 25) | (W >>> 7)),
                Ce =
                  ((W >>> 28) | (G << 4)) ^
                  ((W << 30) | (G >>> 2)) ^
                  ((W << 25) | (G >>> 7)),
                Ne =
                  ((K >>> 14) | ($ << 18)) ^
                  ((K >>> 18) | ($ << 14)) ^
                  ((K << 23) | ($ >>> 9)),
                Le =
                  (($ >>> 14) | (K << 18)) ^
                  (($ >>> 18) | (K << 14)) ^
                  (($ << 23) | (K >>> 9)),
                _e = u[ee],
                je = _e.high,
                Se = _e.low,
                J = ue + Le,
                ne = pe + Ne + (J >>> 0 < ue >>> 0 ? 1 : 0),
                J = J + ke,
                ne = ne + Be + (J >>> 0 < ke >>> 0 ? 1 : 0),
                J = J + Se,
                ne = ne + je + (J >>> 0 < Se >>> 0 ? 1 : 0),
                J = J + Z,
                ne = ne + oe + (J >>> 0 < Z >>> 0 ? 1 : 0),
                Ie = Ce + Oe,
                Fe = Ve + Pe + (Ie >>> 0 < Ce >>> 0 ? 1 : 0);
              (pe = re),
                (ue = ce),
                (re = ie),
                (ce = se),
                (ie = K),
                (se = $),
                ($ = (Y + J) | 0),
                (K = (te + ne + ($ >>> 0 < Y >>> 0 ? 1 : 0)) | 0),
                (te = Q),
                (Y = X),
                (Q = q),
                (X = R),
                (q = G),
                (R = W),
                (W = (J + Ie) | 0),
                (G = (ne + Fe + (W >>> 0 < J >>> 0 ? 1 : 0)) | 0);
            }
            (D = S.low = D + W),
              (S.high = I + G + (D >>> 0 < W >>> 0 ? 1 : 0)),
              (B = w.low = B + R),
              (w.high = A + q + (B >>> 0 < R >>> 0 ? 1 : 0)),
              (E = b.low = E + X),
              (b.high = M + Q + (E >>> 0 < X >>> 0 ? 1 : 0)),
              (O = v.low = O + Y),
              (v.high = P + te + (O >>> 0 < Y >>> 0 ? 1 : 0)),
              (F = _.low = F + $),
              (_.high = z + K + (F >>> 0 < $ >>> 0 ? 1 : 0)),
              (H = T.low = H + se),
              (T.high = U + ie + (H >>> 0 < se >>> 0 ? 1 : 0)),
              (V = a.low = V + ce),
              (a.high = N + re + (V >>> 0 < ce >>> 0 ? 1 : 0)),
              (j = g.low = j + ue),
              (g.high = L + pe + (j >>> 0 < ue >>> 0 ? 1 : 0));
          },
          _doFinalize: function () {
            var h = this._data,
              k = h.words,
              C = this._nDataBytes * 8,
              S = h.sigBytes * 8;
            (k[S >>> 5] |= 128 << (24 - (S % 32))),
              (k[(((S + 128) >>> 10) << 5) + 30] = Math.floor(C / 4294967296)),
              (k[(((S + 128) >>> 10) << 5) + 31] = C),
              (h.sigBytes = k.length * 4),
              this._process();
            var w = this._hash.toX32();
            return w;
          },
          clone: function () {
            var h = l.clone.call(this);
            return (h._hash = this._hash.clone()), h;
          },
          blockSize: 1024 / 32,
        }));
        (e.SHA512 = l._createHelper(d)),
          (e.HmacSHA512 = l._createHmacHelper(d));
      })(),
      (function () {
        var e = s,
          r = e.x64,
          l = r.Word,
          f = r.WordArray,
          t = e.algo,
          i = t.SHA512,
          o = (t.SHA384 = i.extend({
            _doReset: function () {
              this._hash = new f.init([
                new l.init(3418070365, 3238371032),
                new l.init(1654270250, 914150663),
                new l.init(2438529370, 812702999),
                new l.init(355462360, 4144912697),
                new l.init(1731405415, 4290775857),
                new l.init(2394180231, 1750603025),
                new l.init(3675008525, 1694076839),
                new l.init(1203062813, 3204075428),
              ]);
            },
            _doFinalize: function () {
              var n = i._doFinalize.call(this);
              return (n.sigBytes -= 16), n;
            },
          }));
        (e.SHA384 = i._createHelper(o)),
          (e.HmacSHA384 = i._createHmacHelper(o));
      })(),
      s.lib.Cipher ||
        (function (e) {
          var r = s,
            l = r.lib,
            f = l.Base,
            t = l.WordArray,
            i = l.BufferedBlockAlgorithm,
            o = r.enc,
            n = o.Utf8,
            u = o.Base64,
            c = r.algo,
            d = c.EvpKDF,
            h = (l.Cipher = i.extend({
              cfg: f.extend(),
              createEncryptor: function (M, E) {
                return this.create(this._ENC_XFORM_MODE, M, E);
              },
              createDecryptor: function (M, E) {
                return this.create(this._DEC_XFORM_MODE, M, E);
              },
              init: function (M, E, P) {
                (this.cfg = this.cfg.extend(P)),
                  (this._xformMode = M),
                  (this._key = E),
                  this.reset();
              },
              reset: function () {
                i.reset.call(this), this._doReset();
              },
              process: function (M) {
                return this._append(M), this._process();
              },
              finalize: function (M) {
                M && this._append(M);
                var E = this._doFinalize();
                return E;
              },
              keySize: 128 / 32,
              ivSize: 128 / 32,
              _ENC_XFORM_MODE: 1,
              _DEC_XFORM_MODE: 2,
              _createHelper: (function () {
                function M(E) {
                  return typeof E == "string" ? B : I;
                }
                return function (E) {
                  return {
                    encrypt: function (P, O, z) {
                      return M(O).encrypt(E, P, O, z);
                    },
                    decrypt: function (P, O, z) {
                      return M(O).decrypt(E, P, O, z);
                    },
                  };
                };
              })(),
            })),
            k = (l.StreamCipher = h.extend({
              _doFinalize: function () {
                var M = this._process(!0);
                return M;
              },
              blockSize: 1,
            })),
            C = (r.mode = {}),
            S = (l.BlockCipherMode = f.extend({
              createEncryptor: function (M, E) {
                return this.Encryptor.create(M, E);
              },
              createDecryptor: function (M, E) {
                return this.Decryptor.create(M, E);
              },
              init: function (M, E) {
                (this._cipher = M), (this._iv = E);
              },
            })),
            w = (C.CBC = (function () {
              var M = S.extend();
              (M.Encryptor = M.extend({
                processBlock: function (P, O) {
                  var z = this._cipher,
                    F = z.blockSize;
                  E.call(this, P, O, F),
                    z.encryptBlock(P, O),
                    (this._prevBlock = P.slice(O, O + F));
                },
              })),
                (M.Decryptor = M.extend({
                  processBlock: function (P, O) {
                    var z = this._cipher,
                      F = z.blockSize,
                      U = P.slice(O, O + F);
                    z.decryptBlock(P, O),
                      E.call(this, P, O, F),
                      (this._prevBlock = U);
                  },
                }));
              function E(P, O, z) {
                var F,
                  U = this._iv;
                U ? ((F = U), (this._iv = e)) : (F = this._prevBlock);
                for (var H = 0; H < z; H++) P[O + H] ^= F[H];
              }
              return M;
            })()),
            b = (r.pad = {}),
            v = (b.Pkcs7 = {
              pad: function (M, E) {
                for (
                  var P = E * 4,
                    O = P - (M.sigBytes % P),
                    z = (O << 24) | (O << 16) | (O << 8) | O,
                    F = [],
                    U = 0;
                  U < O;
                  U += 4
                )
                  F.push(z);
                var H = t.create(F, O);
                M.concat(H);
              },
              unpad: function (M) {
                var E = M.words[(M.sigBytes - 1) >>> 2] & 255;
                M.sigBytes -= E;
              },
            }),
            _ = (l.BlockCipher = h.extend({
              cfg: h.cfg.extend({ mode: w, padding: v }),
              reset: function () {
                var M;
                h.reset.call(this);
                var E = this.cfg,
                  P = E.iv,
                  O = E.mode;
                this._xformMode == this._ENC_XFORM_MODE
                  ? (M = O.createEncryptor)
                  : ((M = O.createDecryptor), (this._minBufferSize = 1)),
                  this._mode && this._mode.__creator == M
                    ? this._mode.init(this, P && P.words)
                    : ((this._mode = M.call(O, this, P && P.words)),
                      (this._mode.__creator = M));
              },
              _doProcessBlock: function (M, E) {
                this._mode.processBlock(M, E);
              },
              _doFinalize: function () {
                var M,
                  E = this.cfg.padding;
                return (
                  this._xformMode == this._ENC_XFORM_MODE
                    ? (E.pad(this._data, this.blockSize),
                      (M = this._process(!0)))
                    : ((M = this._process(!0)), E.unpad(M)),
                  M
                );
              },
              blockSize: 128 / 32,
            })),
            T = (l.CipherParams = f.extend({
              init: function (M) {
                this.mixIn(M);
              },
              toString: function (M) {
                return (M || this.formatter).stringify(this);
              },
            })),
            a = (r.format = {}),
            g = (a.OpenSSL = {
              stringify: function (M) {
                var E,
                  P = M.ciphertext,
                  O = M.salt;
                return (
                  O
                    ? (E = t
                        .create([1398893684, 1701076831])
                        .concat(O)
                        .concat(P))
                    : (E = P),
                  E.toString(u)
                );
              },
              parse: function (M) {
                var E,
                  P = u.parse(M),
                  O = P.words;
                return (
                  O[0] == 1398893684 &&
                    O[1] == 1701076831 &&
                    ((E = t.create(O.slice(2, 4))),
                    O.splice(0, 4),
                    (P.sigBytes -= 16)),
                  T.create({ ciphertext: P, salt: E })
                );
              },
            }),
            I = (l.SerializableCipher = f.extend({
              cfg: f.extend({ format: g }),
              encrypt: function (M, E, P, O) {
                O = this.cfg.extend(O);
                var z = M.createEncryptor(P, O),
                  F = z.finalize(E),
                  U = z.cfg;
                return T.create({
                  ciphertext: F,
                  key: P,
                  iv: U.iv,
                  algorithm: M,
                  mode: U.mode,
                  padding: U.padding,
                  blockSize: M.blockSize,
                  formatter: O.format,
                });
              },
              decrypt: function (M, E, P, O) {
                (O = this.cfg.extend(O)), (E = this._parse(E, O.format));
                var z = M.createDecryptor(P, O).finalize(E.ciphertext);
                return z;
              },
              _parse: function (M, E) {
                return typeof M == "string" ? E.parse(M, this) : M;
              },
            })),
            D = (r.kdf = {}),
            A = (D.OpenSSL = {
              execute: function (M, E, P, O) {
                O || (O = t.random(64 / 8));
                var z = d.create({ keySize: E + P }).compute(M, O),
                  F = t.create(z.words.slice(E), P * 4);
                return (
                  (z.sigBytes = E * 4), T.create({ key: z, iv: F, salt: O })
                );
              },
            }),
            B = (l.PasswordBasedCipher = I.extend({
              cfg: I.cfg.extend({ kdf: A }),
              encrypt: function (M, E, P, O) {
                O = this.cfg.extend(O);
                var z = O.kdf.execute(P, M.keySize, M.ivSize);
                O.iv = z.iv;
                var F = I.encrypt.call(this, M, E, z.key, O);
                return F.mixIn(z), F;
              },
              decrypt: function (M, E, P, O) {
                (O = this.cfg.extend(O)), (E = this._parse(E, O.format));
                var z = O.kdf.execute(P, M.keySize, M.ivSize, E.salt);
                O.iv = z.iv;
                var F = I.decrypt.call(this, M, E, z.key, O);
                return F;
              },
            }));
        })(),
      (s.mode.CFB = (function () {
        var e = s.lib.BlockCipherMode.extend();
        (e.Encryptor = e.extend({
          processBlock: function (l, f) {
            var t = this._cipher,
              i = t.blockSize;
            r.call(this, l, f, i, t), (this._prevBlock = l.slice(f, f + i));
          },
        })),
          (e.Decryptor = e.extend({
            processBlock: function (l, f) {
              var t = this._cipher,
                i = t.blockSize,
                o = l.slice(f, f + i);
              r.call(this, l, f, i, t), (this._prevBlock = o);
            },
          }));
        function r(l, f, t, i) {
          var o,
            n = this._iv;
          n ? ((o = n.slice(0)), (this._iv = void 0)) : (o = this._prevBlock),
            i.encryptBlock(o, 0);
          for (var u = 0; u < t; u++) l[f + u] ^= o[u];
        }
        return e;
      })()),
      (s.mode.ECB = (function () {
        var e = s.lib.BlockCipherMode.extend();
        return (
          (e.Encryptor = e.extend({
            processBlock: function (r, l) {
              this._cipher.encryptBlock(r, l);
            },
          })),
          (e.Decryptor = e.extend({
            processBlock: function (r, l) {
              this._cipher.decryptBlock(r, l);
            },
          })),
          e
        );
      })()),
      (s.pad.AnsiX923 = {
        pad: function (e, r) {
          var l = e.sigBytes,
            f = r * 4,
            t = f - (l % f),
            i = l + t - 1;
          e.clamp(),
            (e.words[i >>> 2] |= t << (24 - (i % 4) * 8)),
            (e.sigBytes += t);
        },
        unpad: function (e) {
          var r = e.words[(e.sigBytes - 1) >>> 2] & 255;
          e.sigBytes -= r;
        },
      }),
      (s.pad.Iso10126 = {
        pad: function (e, r) {
          var l = r * 4,
            f = l - (e.sigBytes % l);
          e.concat(s.lib.WordArray.random(f - 1)).concat(
            s.lib.WordArray.create([f << 24], 1)
          );
        },
        unpad: function (e) {
          var r = e.words[(e.sigBytes - 1) >>> 2] & 255;
          e.sigBytes -= r;
        },
      }),
      (s.pad.Iso97971 = {
        pad: function (e, r) {
          e.concat(s.lib.WordArray.create([2147483648], 1)),
            s.pad.ZeroPadding.pad(e, r);
        },
        unpad: function (e) {
          s.pad.ZeroPadding.unpad(e), e.sigBytes--;
        },
      }),
      (s.mode.OFB = (function () {
        var e = s.lib.BlockCipherMode.extend(),
          r = (e.Encryptor = e.extend({
            processBlock: function (l, f) {
              var t = this._cipher,
                i = t.blockSize,
                o = this._iv,
                n = this._keystream;
              o && ((n = this._keystream = o.slice(0)), (this._iv = void 0)),
                t.encryptBlock(n, 0);
              for (var u = 0; u < i; u++) l[f + u] ^= n[u];
            },
          }));
        return (e.Decryptor = r), e;
      })()),
      (s.pad.NoPadding = { pad: function () {}, unpad: function () {} }),
      (function (e) {
        var r = s,
          l = r.lib,
          f = l.CipherParams,
          t = r.enc,
          i = t.Hex,
          o = r.format,
          n = (o.Hex = {
            stringify: function (u) {
              return u.ciphertext.toString(i);
            },
            parse: function (u) {
              var c = i.parse(u);
              return f.create({ ciphertext: c });
            },
          });
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.BlockCipher,
          f = e.algo,
          t = [],
          i = [],
          o = [],
          n = [],
          u = [],
          c = [],
          d = [],
          h = [],
          k = [],
          C = [];
        (function () {
          for (var b = [], v = 0; v < 256; v++)
            v < 128 ? (b[v] = v << 1) : (b[v] = (v << 1) ^ 283);
          for (var _ = 0, T = 0, v = 0; v < 256; v++) {
            var a = T ^ (T << 1) ^ (T << 2) ^ (T << 3) ^ (T << 4);
            (a = (a >>> 8) ^ (a & 255) ^ 99), (t[_] = a), (i[a] = _);
            var g = b[_],
              I = b[g],
              D = b[I],
              A = (b[a] * 257) ^ (a * 16843008);
            (o[_] = (A << 24) | (A >>> 8)),
              (n[_] = (A << 16) | (A >>> 16)),
              (u[_] = (A << 8) | (A >>> 24)),
              (c[_] = A);
            var A = (D * 16843009) ^ (I * 65537) ^ (g * 257) ^ (_ * 16843008);
            (d[a] = (A << 24) | (A >>> 8)),
              (h[a] = (A << 16) | (A >>> 16)),
              (k[a] = (A << 8) | (A >>> 24)),
              (C[a] = A),
              _ ? ((_ = g ^ b[b[b[D ^ g]]]), (T ^= b[b[T]])) : (_ = T = 1);
          }
        })();
        var S = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
          w = (f.AES = l.extend({
            _doReset: function () {
              var b;
              if (!(this._nRounds && this._keyPriorReset === this._key)) {
                for (
                  var v = (this._keyPriorReset = this._key),
                    _ = v.words,
                    T = v.sigBytes / 4,
                    a = (this._nRounds = T + 6),
                    g = (a + 1) * 4,
                    I = (this._keySchedule = []),
                    D = 0;
                  D < g;
                  D++
                )
                  D < T
                    ? (I[D] = _[D])
                    : ((b = I[D - 1]),
                      D % T
                        ? T > 6 &&
                          D % T == 4 &&
                          (b =
                            (t[b >>> 24] << 24) |
                            (t[(b >>> 16) & 255] << 16) |
                            (t[(b >>> 8) & 255] << 8) |
                            t[b & 255])
                        : ((b = (b << 8) | (b >>> 24)),
                          (b =
                            (t[b >>> 24] << 24) |
                            (t[(b >>> 16) & 255] << 16) |
                            (t[(b >>> 8) & 255] << 8) |
                            t[b & 255]),
                          (b ^= S[(D / T) | 0] << 24)),
                      (I[D] = I[D - T] ^ b));
                for (var A = (this._invKeySchedule = []), B = 0; B < g; B++) {
                  var D = g - B;
                  if (B % 4) var b = I[D];
                  else var b = I[D - 4];
                  B < 4 || D <= 4
                    ? (A[B] = b)
                    : (A[B] =
                        d[t[b >>> 24]] ^
                        h[t[(b >>> 16) & 255]] ^
                        k[t[(b >>> 8) & 255]] ^
                        C[t[b & 255]]);
                }
              }
            },
            encryptBlock: function (b, v) {
              this._doCryptBlock(b, v, this._keySchedule, o, n, u, c, t);
            },
            decryptBlock: function (b, v) {
              var _ = b[v + 1];
              (b[v + 1] = b[v + 3]),
                (b[v + 3] = _),
                this._doCryptBlock(b, v, this._invKeySchedule, d, h, k, C, i);
              var _ = b[v + 1];
              (b[v + 1] = b[v + 3]), (b[v + 3] = _);
            },
            _doCryptBlock: function (b, v, _, T, a, g, I, D) {
              for (
                var A = this._nRounds,
                  B = b[v] ^ _[0],
                  M = b[v + 1] ^ _[1],
                  E = b[v + 2] ^ _[2],
                  P = b[v + 3] ^ _[3],
                  O = 4,
                  z = 1;
                z < A;
                z++
              ) {
                var F =
                    T[B >>> 24] ^
                    a[(M >>> 16) & 255] ^
                    g[(E >>> 8) & 255] ^
                    I[P & 255] ^
                    _[O++],
                  U =
                    T[M >>> 24] ^
                    a[(E >>> 16) & 255] ^
                    g[(P >>> 8) & 255] ^
                    I[B & 255] ^
                    _[O++],
                  H =
                    T[E >>> 24] ^
                    a[(P >>> 16) & 255] ^
                    g[(B >>> 8) & 255] ^
                    I[M & 255] ^
                    _[O++],
                  N =
                    T[P >>> 24] ^
                    a[(B >>> 16) & 255] ^
                    g[(M >>> 8) & 255] ^
                    I[E & 255] ^
                    _[O++];
                (B = F), (M = U), (E = H), (P = N);
              }
              var F =
                  ((D[B >>> 24] << 24) |
                    (D[(M >>> 16) & 255] << 16) |
                    (D[(E >>> 8) & 255] << 8) |
                    D[P & 255]) ^
                  _[O++],
                U =
                  ((D[M >>> 24] << 24) |
                    (D[(E >>> 16) & 255] << 16) |
                    (D[(P >>> 8) & 255] << 8) |
                    D[B & 255]) ^
                  _[O++],
                H =
                  ((D[E >>> 24] << 24) |
                    (D[(P >>> 16) & 255] << 16) |
                    (D[(B >>> 8) & 255] << 8) |
                    D[M & 255]) ^
                  _[O++],
                N =
                  ((D[P >>> 24] << 24) |
                    (D[(B >>> 16) & 255] << 16) |
                    (D[(M >>> 8) & 255] << 8) |
                    D[E & 255]) ^
                  _[O++];
              (b[v] = F), (b[v + 1] = U), (b[v + 2] = H), (b[v + 3] = N);
            },
            keySize: 256 / 32,
          }));
        e.AES = l._createHelper(w);
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.WordArray,
          f = r.BlockCipher,
          t = e.algo,
          i = [
            57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51,
            43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15,
            7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28,
            20, 12, 4,
          ],
          o = [
            14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8,
            16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33,
            48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32,
          ],
          n = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],
          u = [
            {
              0: 8421888,
              268435456: 32768,
              536870912: 8421378,
              805306368: 2,
              1073741824: 512,
              1342177280: 8421890,
              1610612736: 8389122,
              1879048192: 8388608,
              2147483648: 514,
              2415919104: 8389120,
              2684354560: 33280,
              2952790016: 8421376,
              3221225472: 32770,
              3489660928: 8388610,
              3758096384: 0,
              4026531840: 33282,
              134217728: 0,
              402653184: 8421890,
              671088640: 33282,
              939524096: 32768,
              1207959552: 8421888,
              1476395008: 512,
              1744830464: 8421378,
              2013265920: 2,
              2281701376: 8389120,
              2550136832: 33280,
              2818572288: 8421376,
              3087007744: 8389122,
              3355443200: 8388610,
              3623878656: 32770,
              3892314112: 514,
              4160749568: 8388608,
              1: 32768,
              268435457: 2,
              536870913: 8421888,
              805306369: 8388608,
              1073741825: 8421378,
              1342177281: 33280,
              1610612737: 512,
              1879048193: 8389122,
              2147483649: 8421890,
              2415919105: 8421376,
              2684354561: 8388610,
              2952790017: 33282,
              3221225473: 514,
              3489660929: 8389120,
              3758096385: 32770,
              4026531841: 0,
              134217729: 8421890,
              402653185: 8421376,
              671088641: 8388608,
              939524097: 512,
              1207959553: 32768,
              1476395009: 8388610,
              1744830465: 2,
              2013265921: 33282,
              2281701377: 32770,
              2550136833: 8389122,
              2818572289: 514,
              3087007745: 8421888,
              3355443201: 8389120,
              3623878657: 0,
              3892314113: 33280,
              4160749569: 8421378,
            },
            {
              0: 1074282512,
              16777216: 16384,
              33554432: 524288,
              50331648: 1074266128,
              67108864: 1073741840,
              83886080: 1074282496,
              100663296: 1073758208,
              117440512: 16,
              134217728: 540672,
              150994944: 1073758224,
              167772160: 1073741824,
              184549376: 540688,
              201326592: 524304,
              218103808: 0,
              234881024: 16400,
              251658240: 1074266112,
              8388608: 1073758208,
              25165824: 540688,
              41943040: 16,
              58720256: 1073758224,
              75497472: 1074282512,
              92274688: 1073741824,
              109051904: 524288,
              125829120: 1074266128,
              142606336: 524304,
              159383552: 0,
              176160768: 16384,
              192937984: 1074266112,
              209715200: 1073741840,
              226492416: 540672,
              243269632: 1074282496,
              260046848: 16400,
              268435456: 0,
              285212672: 1074266128,
              301989888: 1073758224,
              318767104: 1074282496,
              335544320: 1074266112,
              352321536: 16,
              369098752: 540688,
              385875968: 16384,
              402653184: 16400,
              419430400: 524288,
              436207616: 524304,
              452984832: 1073741840,
              469762048: 540672,
              486539264: 1073758208,
              503316480: 1073741824,
              520093696: 1074282512,
              276824064: 540688,
              293601280: 524288,
              310378496: 1074266112,
              327155712: 16384,
              343932928: 1073758208,
              360710144: 1074282512,
              377487360: 16,
              394264576: 1073741824,
              411041792: 1074282496,
              427819008: 1073741840,
              444596224: 1073758224,
              461373440: 524304,
              478150656: 0,
              494927872: 16400,
              511705088: 1074266128,
              528482304: 540672,
            },
            {
              0: 260,
              1048576: 0,
              2097152: 67109120,
              3145728: 65796,
              4194304: 65540,
              5242880: 67108868,
              6291456: 67174660,
              7340032: 67174400,
              8388608: 67108864,
              9437184: 67174656,
              10485760: 65792,
              11534336: 67174404,
              12582912: 67109124,
              13631488: 65536,
              14680064: 4,
              15728640: 256,
              524288: 67174656,
              1572864: 67174404,
              2621440: 0,
              3670016: 67109120,
              4718592: 67108868,
              5767168: 65536,
              6815744: 65540,
              7864320: 260,
              8912896: 4,
              9961472: 256,
              11010048: 67174400,
              12058624: 65796,
              13107200: 65792,
              14155776: 67109124,
              15204352: 67174660,
              16252928: 67108864,
              16777216: 67174656,
              17825792: 65540,
              18874368: 65536,
              19922944: 67109120,
              20971520: 256,
              22020096: 67174660,
              23068672: 67108868,
              24117248: 0,
              25165824: 67109124,
              26214400: 67108864,
              27262976: 4,
              28311552: 65792,
              29360128: 67174400,
              30408704: 260,
              31457280: 65796,
              32505856: 67174404,
              17301504: 67108864,
              18350080: 260,
              19398656: 67174656,
              20447232: 0,
              21495808: 65540,
              22544384: 67109120,
              23592960: 256,
              24641536: 67174404,
              25690112: 65536,
              26738688: 67174660,
              27787264: 65796,
              28835840: 67108868,
              29884416: 67109124,
              30932992: 67174400,
              31981568: 4,
              33030144: 65792,
            },
            {
              0: 2151682048,
              65536: 2147487808,
              131072: 4198464,
              196608: 2151677952,
              262144: 0,
              327680: 4198400,
              393216: 2147483712,
              458752: 4194368,
              524288: 2147483648,
              589824: 4194304,
              655360: 64,
              720896: 2147487744,
              786432: 2151678016,
              851968: 4160,
              917504: 4096,
              983040: 2151682112,
              32768: 2147487808,
              98304: 64,
              163840: 2151678016,
              229376: 2147487744,
              294912: 4198400,
              360448: 2151682112,
              425984: 0,
              491520: 2151677952,
              557056: 4096,
              622592: 2151682048,
              688128: 4194304,
              753664: 4160,
              819200: 2147483648,
              884736: 4194368,
              950272: 4198464,
              1015808: 2147483712,
              1048576: 4194368,
              1114112: 4198400,
              1179648: 2147483712,
              1245184: 0,
              1310720: 4160,
              1376256: 2151678016,
              1441792: 2151682048,
              1507328: 2147487808,
              1572864: 2151682112,
              1638400: 2147483648,
              1703936: 2151677952,
              1769472: 4198464,
              1835008: 2147487744,
              1900544: 4194304,
              1966080: 64,
              2031616: 4096,
              1081344: 2151677952,
              1146880: 2151682112,
              1212416: 0,
              1277952: 4198400,
              1343488: 4194368,
              1409024: 2147483648,
              1474560: 2147487808,
              1540096: 64,
              1605632: 2147483712,
              1671168: 4096,
              1736704: 2147487744,
              1802240: 2151678016,
              1867776: 4160,
              1933312: 2151682048,
              1998848: 4194304,
              2064384: 4198464,
            },
            {
              0: 128,
              4096: 17039360,
              8192: 262144,
              12288: 536870912,
              16384: 537133184,
              20480: 16777344,
              24576: 553648256,
              28672: 262272,
              32768: 16777216,
              36864: 537133056,
              40960: 536871040,
              45056: 553910400,
              49152: 553910272,
              53248: 0,
              57344: 17039488,
              61440: 553648128,
              2048: 17039488,
              6144: 553648256,
              10240: 128,
              14336: 17039360,
              18432: 262144,
              22528: 537133184,
              26624: 553910272,
              30720: 536870912,
              34816: 537133056,
              38912: 0,
              43008: 553910400,
              47104: 16777344,
              51200: 536871040,
              55296: 553648128,
              59392: 16777216,
              63488: 262272,
              65536: 262144,
              69632: 128,
              73728: 536870912,
              77824: 553648256,
              81920: 16777344,
              86016: 553910272,
              90112: 537133184,
              94208: 16777216,
              98304: 553910400,
              102400: 553648128,
              106496: 17039360,
              110592: 537133056,
              114688: 262272,
              118784: 536871040,
              122880: 0,
              126976: 17039488,
              67584: 553648256,
              71680: 16777216,
              75776: 17039360,
              79872: 537133184,
              83968: 536870912,
              88064: 17039488,
              92160: 128,
              96256: 553910272,
              100352: 262272,
              104448: 553910400,
              108544: 0,
              112640: 553648128,
              116736: 16777344,
              120832: 262144,
              124928: 537133056,
              129024: 536871040,
            },
            {
              0: 268435464,
              256: 8192,
              512: 270532608,
              768: 270540808,
              1024: 268443648,
              1280: 2097152,
              1536: 2097160,
              1792: 268435456,
              2048: 0,
              2304: 268443656,
              2560: 2105344,
              2816: 8,
              3072: 270532616,
              3328: 2105352,
              3584: 8200,
              3840: 270540800,
              128: 270532608,
              384: 270540808,
              640: 8,
              896: 2097152,
              1152: 2105352,
              1408: 268435464,
              1664: 268443648,
              1920: 8200,
              2176: 2097160,
              2432: 8192,
              2688: 268443656,
              2944: 270532616,
              3200: 0,
              3456: 270540800,
              3712: 2105344,
              3968: 268435456,
              4096: 268443648,
              4352: 270532616,
              4608: 270540808,
              4864: 8200,
              5120: 2097152,
              5376: 268435456,
              5632: 268435464,
              5888: 2105344,
              6144: 2105352,
              6400: 0,
              6656: 8,
              6912: 270532608,
              7168: 8192,
              7424: 268443656,
              7680: 270540800,
              7936: 2097160,
              4224: 8,
              4480: 2105344,
              4736: 2097152,
              4992: 268435464,
              5248: 268443648,
              5504: 8200,
              5760: 270540808,
              6016: 270532608,
              6272: 270540800,
              6528: 270532616,
              6784: 8192,
              7040: 2105352,
              7296: 2097160,
              7552: 0,
              7808: 268435456,
              8064: 268443656,
            },
            {
              0: 1048576,
              16: 33555457,
              32: 1024,
              48: 1049601,
              64: 34604033,
              80: 0,
              96: 1,
              112: 34603009,
              128: 33555456,
              144: 1048577,
              160: 33554433,
              176: 34604032,
              192: 34603008,
              208: 1025,
              224: 1049600,
              240: 33554432,
              8: 34603009,
              24: 0,
              40: 33555457,
              56: 34604032,
              72: 1048576,
              88: 33554433,
              104: 33554432,
              120: 1025,
              136: 1049601,
              152: 33555456,
              168: 34603008,
              184: 1048577,
              200: 1024,
              216: 34604033,
              232: 1,
              248: 1049600,
              256: 33554432,
              272: 1048576,
              288: 33555457,
              304: 34603009,
              320: 1048577,
              336: 33555456,
              352: 34604032,
              368: 1049601,
              384: 1025,
              400: 34604033,
              416: 1049600,
              432: 1,
              448: 0,
              464: 34603008,
              480: 33554433,
              496: 1024,
              264: 1049600,
              280: 33555457,
              296: 34603009,
              312: 1,
              328: 33554432,
              344: 1048576,
              360: 1025,
              376: 34604032,
              392: 33554433,
              408: 34603008,
              424: 0,
              440: 34604033,
              456: 1049601,
              472: 1024,
              488: 33555456,
              504: 1048577,
            },
            {
              0: 134219808,
              1: 131072,
              2: 134217728,
              3: 32,
              4: 131104,
              5: 134350880,
              6: 134350848,
              7: 2048,
              8: 134348800,
              9: 134219776,
              10: 133120,
              11: 134348832,
              12: 2080,
              13: 0,
              14: 134217760,
              15: 133152,
              2147483648: 2048,
              2147483649: 134350880,
              2147483650: 134219808,
              2147483651: 134217728,
              2147483652: 134348800,
              2147483653: 133120,
              2147483654: 133152,
              2147483655: 32,
              2147483656: 134217760,
              2147483657: 2080,
              2147483658: 131104,
              2147483659: 134350848,
              2147483660: 0,
              2147483661: 134348832,
              2147483662: 134219776,
              2147483663: 131072,
              16: 133152,
              17: 134350848,
              18: 32,
              19: 2048,
              20: 134219776,
              21: 134217760,
              22: 134348832,
              23: 131072,
              24: 0,
              25: 131104,
              26: 134348800,
              27: 134219808,
              28: 134350880,
              29: 133120,
              30: 2080,
              31: 134217728,
              2147483664: 131072,
              2147483665: 2048,
              2147483666: 134348832,
              2147483667: 133152,
              2147483668: 32,
              2147483669: 134348800,
              2147483670: 134217728,
              2147483671: 134219808,
              2147483672: 134350880,
              2147483673: 134217760,
              2147483674: 134219776,
              2147483675: 0,
              2147483676: 133120,
              2147483677: 2080,
              2147483678: 131104,
              2147483679: 134350848,
            },
          ],
          c = [
            4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504,
            2147483679,
          ],
          d = (t.DES = f.extend({
            _doReset: function () {
              for (var S = this._key, w = S.words, b = [], v = 0; v < 56; v++) {
                var _ = i[v] - 1;
                b[v] = (w[_ >>> 5] >>> (31 - (_ % 32))) & 1;
              }
              for (var T = (this._subKeys = []), a = 0; a < 16; a++) {
                for (var g = (T[a] = []), I = n[a], v = 0; v < 24; v++)
                  (g[(v / 6) | 0] |= b[(o[v] - 1 + I) % 28] << (31 - (v % 6))),
                    (g[4 + ((v / 6) | 0)] |=
                      b[28 + ((o[v + 24] - 1 + I) % 28)] << (31 - (v % 6)));
                g[0] = (g[0] << 1) | (g[0] >>> 31);
                for (var v = 1; v < 7; v++) g[v] = g[v] >>> ((v - 1) * 4 + 3);
                g[7] = (g[7] << 5) | (g[7] >>> 27);
              }
              for (var D = (this._invSubKeys = []), v = 0; v < 16; v++)
                D[v] = T[15 - v];
            },
            encryptBlock: function (S, w) {
              this._doCryptBlock(S, w, this._subKeys);
            },
            decryptBlock: function (S, w) {
              this._doCryptBlock(S, w, this._invSubKeys);
            },
            _doCryptBlock: function (S, w, b) {
              (this._lBlock = S[w]),
                (this._rBlock = S[w + 1]),
                h.call(this, 4, 252645135),
                h.call(this, 16, 65535),
                k.call(this, 2, 858993459),
                k.call(this, 8, 16711935),
                h.call(this, 1, 1431655765);
              for (var v = 0; v < 16; v++) {
                for (
                  var _ = b[v],
                    T = this._lBlock,
                    a = this._rBlock,
                    g = 0,
                    I = 0;
                  I < 8;
                  I++
                )
                  g |= u[I][((a ^ _[I]) & c[I]) >>> 0];
                (this._lBlock = a), (this._rBlock = T ^ g);
              }
              var D = this._lBlock;
              (this._lBlock = this._rBlock),
                (this._rBlock = D),
                h.call(this, 1, 1431655765),
                k.call(this, 8, 16711935),
                k.call(this, 2, 858993459),
                h.call(this, 16, 65535),
                h.call(this, 4, 252645135),
                (S[w] = this._lBlock),
                (S[w + 1] = this._rBlock);
            },
            keySize: 64 / 32,
            ivSize: 64 / 32,
            blockSize: 64 / 32,
          }));
        function h(S, w) {
          var b = ((this._lBlock >>> S) ^ this._rBlock) & w;
          (this._rBlock ^= b), (this._lBlock ^= b << S);
        }
        function k(S, w) {
          var b = ((this._rBlock >>> S) ^ this._lBlock) & w;
          (this._lBlock ^= b), (this._rBlock ^= b << S);
        }
        e.DES = f._createHelper(d);
        var C = (t.TripleDES = f.extend({
          _doReset: function () {
            var S = this._key,
              w = S.words;
            if (w.length !== 2 && w.length !== 4 && w.length < 6)
              throw new Error(
                "Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192."
              );
            var b = w.slice(0, 2),
              v = w.length < 4 ? w.slice(0, 2) : w.slice(2, 4),
              _ = w.length < 6 ? w.slice(0, 2) : w.slice(4, 6);
            (this._des1 = d.createEncryptor(l.create(b))),
              (this._des2 = d.createEncryptor(l.create(v))),
              (this._des3 = d.createEncryptor(l.create(_)));
          },
          encryptBlock: function (S, w) {
            this._des1.encryptBlock(S, w),
              this._des2.decryptBlock(S, w),
              this._des3.encryptBlock(S, w);
          },
          decryptBlock: function (S, w) {
            this._des3.decryptBlock(S, w),
              this._des2.encryptBlock(S, w),
              this._des1.decryptBlock(S, w);
          },
          keySize: 192 / 32,
          ivSize: 64 / 32,
          blockSize: 64 / 32,
        }));
        e.TripleDES = f._createHelper(C);
      })(),
      (function () {
        var e = s,
          r = e.lib,
          l = r.StreamCipher,
          f = e.algo,
          t = (f.RC4 = l.extend({
            _doReset: function () {
              for (
                var n = this._key,
                  u = n.words,
                  c = n.sigBytes,
                  d = (this._S = []),
                  h = 0;
                h < 256;
                h++
              )
                d[h] = h;
              for (var h = 0, k = 0; h < 256; h++) {
                var C = h % c,
                  S = (u[C >>> 2] >>> (24 - (C % 4) * 8)) & 255;
                k = (k + d[h] + S) % 256;
                var w = d[h];
                (d[h] = d[k]), (d[k] = w);
              }
              this._i = this._j = 0;
            },
            _doProcessBlock: function (n, u) {
              n[u] ^= i.call(this);
            },
            keySize: 256 / 32,
            ivSize: 0,
          }));
        function i() {
          for (
            var n = this._S, u = this._i, c = this._j, d = 0, h = 0;
            h < 4;
            h++
          ) {
            (u = (u + 1) % 256), (c = (c + n[u]) % 256);
            var k = n[u];
            (n[u] = n[c]),
              (n[c] = k),
              (d |= n[(n[u] + n[c]) % 256] << (24 - h * 8));
          }
          return (this._i = u), (this._j = c), d;
        }
        e.RC4 = l._createHelper(t);
        var o = (f.RC4Drop = t.extend({
          cfg: t.cfg.extend({ drop: 192 }),
          _doReset: function () {
            t._doReset.call(this);
            for (var n = this.cfg.drop; n > 0; n--) i.call(this);
          },
        }));
        e.RC4Drop = l._createHelper(o);
      })(),
      (s.mode.CTRGladman = (function () {
        var e = s.lib.BlockCipherMode.extend();
        function r(t) {
          if (((t >> 24) & 255) === 255) {
            var i = (t >> 16) & 255,
              o = (t >> 8) & 255,
              n = t & 255;
            i === 255
              ? ((i = 0),
                o === 255 ? ((o = 0), n === 255 ? (n = 0) : ++n) : ++o)
              : ++i,
              (t = 0),
              (t += i << 16),
              (t += o << 8),
              (t += n);
          } else t += 1 << 24;
          return t;
        }
        function l(t) {
          return (t[0] = r(t[0])) === 0 && (t[1] = r(t[1])), t;
        }
        var f = (e.Encryptor = e.extend({
          processBlock: function (t, i) {
            var o = this._cipher,
              n = o.blockSize,
              u = this._iv,
              c = this._counter;
            u && ((c = this._counter = u.slice(0)), (this._iv = void 0)), l(c);
            var d = c.slice(0);
            o.encryptBlock(d, 0);
            for (var h = 0; h < n; h++) t[i + h] ^= d[h];
          },
        }));
        return (e.Decryptor = f), e;
      })()),
      (function () {
        var e = s,
          r = e.lib,
          l = r.StreamCipher,
          f = e.algo,
          t = [],
          i = [],
          o = [],
          n = (f.Rabbit = l.extend({
            _doReset: function () {
              for (var c = this._key.words, d = this.cfg.iv, h = 0; h < 4; h++)
                c[h] =
                  (((c[h] << 8) | (c[h] >>> 24)) & 16711935) |
                  (((c[h] << 24) | (c[h] >>> 8)) & 4278255360);
              var k = (this._X = [
                  c[0],
                  (c[3] << 16) | (c[2] >>> 16),
                  c[1],
                  (c[0] << 16) | (c[3] >>> 16),
                  c[2],
                  (c[1] << 16) | (c[0] >>> 16),
                  c[3],
                  (c[2] << 16) | (c[1] >>> 16),
                ]),
                C = (this._C = [
                  (c[2] << 16) | (c[2] >>> 16),
                  (c[0] & 4294901760) | (c[1] & 65535),
                  (c[3] << 16) | (c[3] >>> 16),
                  (c[1] & 4294901760) | (c[2] & 65535),
                  (c[0] << 16) | (c[0] >>> 16),
                  (c[2] & 4294901760) | (c[3] & 65535),
                  (c[1] << 16) | (c[1] >>> 16),
                  (c[3] & 4294901760) | (c[0] & 65535),
                ]);
              this._b = 0;
              for (var h = 0; h < 4; h++) u.call(this);
              for (var h = 0; h < 8; h++) C[h] ^= k[(h + 4) & 7];
              if (d) {
                var S = d.words,
                  w = S[0],
                  b = S[1],
                  v =
                    (((w << 8) | (w >>> 24)) & 16711935) |
                    (((w << 24) | (w >>> 8)) & 4278255360),
                  _ =
                    (((b << 8) | (b >>> 24)) & 16711935) |
                    (((b << 24) | (b >>> 8)) & 4278255360),
                  T = (v >>> 16) | (_ & 4294901760),
                  a = (_ << 16) | (v & 65535);
                (C[0] ^= v),
                  (C[1] ^= T),
                  (C[2] ^= _),
                  (C[3] ^= a),
                  (C[4] ^= v),
                  (C[5] ^= T),
                  (C[6] ^= _),
                  (C[7] ^= a);
                for (var h = 0; h < 4; h++) u.call(this);
              }
            },
            _doProcessBlock: function (c, d) {
              var h = this._X;
              u.call(this),
                (t[0] = h[0] ^ (h[5] >>> 16) ^ (h[3] << 16)),
                (t[1] = h[2] ^ (h[7] >>> 16) ^ (h[5] << 16)),
                (t[2] = h[4] ^ (h[1] >>> 16) ^ (h[7] << 16)),
                (t[3] = h[6] ^ (h[3] >>> 16) ^ (h[1] << 16));
              for (var k = 0; k < 4; k++)
                (t[k] =
                  (((t[k] << 8) | (t[k] >>> 24)) & 16711935) |
                  (((t[k] << 24) | (t[k] >>> 8)) & 4278255360)),
                  (c[d + k] ^= t[k]);
            },
            blockSize: 128 / 32,
            ivSize: 64 / 32,
          }));
        function u() {
          for (var c = this._X, d = this._C, h = 0; h < 8; h++) i[h] = d[h];
          (d[0] = (d[0] + 1295307597 + this._b) | 0),
            (d[1] =
              (d[1] + 3545052371 + (d[0] >>> 0 < i[0] >>> 0 ? 1 : 0)) | 0),
            (d[2] = (d[2] + 886263092 + (d[1] >>> 0 < i[1] >>> 0 ? 1 : 0)) | 0),
            (d[3] =
              (d[3] + 1295307597 + (d[2] >>> 0 < i[2] >>> 0 ? 1 : 0)) | 0),
            (d[4] =
              (d[4] + 3545052371 + (d[3] >>> 0 < i[3] >>> 0 ? 1 : 0)) | 0),
            (d[5] = (d[5] + 886263092 + (d[4] >>> 0 < i[4] >>> 0 ? 1 : 0)) | 0),
            (d[6] =
              (d[6] + 1295307597 + (d[5] >>> 0 < i[5] >>> 0 ? 1 : 0)) | 0),
            (d[7] =
              (d[7] + 3545052371 + (d[6] >>> 0 < i[6] >>> 0 ? 1 : 0)) | 0),
            (this._b = d[7] >>> 0 < i[7] >>> 0 ? 1 : 0);
          for (var h = 0; h < 8; h++) {
            var k = c[h] + d[h],
              C = k & 65535,
              S = k >>> 16,
              w = ((((C * C) >>> 17) + C * S) >>> 15) + S * S,
              b = (((k & 4294901760) * k) | 0) + (((k & 65535) * k) | 0);
            o[h] = w ^ b;
          }
          (c[0] =
            (o[0] +
              ((o[7] << 16) | (o[7] >>> 16)) +
              ((o[6] << 16) | (o[6] >>> 16))) |
            0),
            (c[1] = (o[1] + ((o[0] << 8) | (o[0] >>> 24)) + o[7]) | 0),
            (c[2] =
              (o[2] +
                ((o[1] << 16) | (o[1] >>> 16)) +
                ((o[0] << 16) | (o[0] >>> 16))) |
              0),
            (c[3] = (o[3] + ((o[2] << 8) | (o[2] >>> 24)) + o[1]) | 0),
            (c[4] =
              (o[4] +
                ((o[3] << 16) | (o[3] >>> 16)) +
                ((o[2] << 16) | (o[2] >>> 16))) |
              0),
            (c[5] = (o[5] + ((o[4] << 8) | (o[4] >>> 24)) + o[3]) | 0),
            (c[6] =
              (o[6] +
                ((o[5] << 16) | (o[5] >>> 16)) +
                ((o[4] << 16) | (o[4] >>> 16))) |
              0),
            (c[7] = (o[7] + ((o[6] << 8) | (o[6] >>> 24)) + o[5]) | 0);
        }
        e.Rabbit = l._createHelper(n);
      })(),
      (s.mode.CTR = (function () {
        var e = s.lib.BlockCipherMode.extend(),
          r = (e.Encryptor = e.extend({
            processBlock: function (l, f) {
              var t = this._cipher,
                i = t.blockSize,
                o = this._iv,
                n = this._counter;
              o && ((n = this._counter = o.slice(0)), (this._iv = void 0));
              var u = n.slice(0);
              t.encryptBlock(u, 0), (n[i - 1] = (n[i - 1] + 1) | 0);
              for (var c = 0; c < i; c++) l[f + c] ^= u[c];
            },
          }));
        return (e.Decryptor = r), e;
      })()),
      (function () {
        var e = s,
          r = e.lib,
          l = r.StreamCipher,
          f = e.algo,
          t = [],
          i = [],
          o = [],
          n = (f.RabbitLegacy = l.extend({
            _doReset: function () {
              var c = this._key.words,
                d = this.cfg.iv,
                h = (this._X = [
                  c[0],
                  (c[3] << 16) | (c[2] >>> 16),
                  c[1],
                  (c[0] << 16) | (c[3] >>> 16),
                  c[2],
                  (c[1] << 16) | (c[0] >>> 16),
                  c[3],
                  (c[2] << 16) | (c[1] >>> 16),
                ]),
                k = (this._C = [
                  (c[2] << 16) | (c[2] >>> 16),
                  (c[0] & 4294901760) | (c[1] & 65535),
                  (c[3] << 16) | (c[3] >>> 16),
                  (c[1] & 4294901760) | (c[2] & 65535),
                  (c[0] << 16) | (c[0] >>> 16),
                  (c[2] & 4294901760) | (c[3] & 65535),
                  (c[1] << 16) | (c[1] >>> 16),
                  (c[3] & 4294901760) | (c[0] & 65535),
                ]);
              this._b = 0;
              for (var C = 0; C < 4; C++) u.call(this);
              for (var C = 0; C < 8; C++) k[C] ^= h[(C + 4) & 7];
              if (d) {
                var S = d.words,
                  w = S[0],
                  b = S[1],
                  v =
                    (((w << 8) | (w >>> 24)) & 16711935) |
                    (((w << 24) | (w >>> 8)) & 4278255360),
                  _ =
                    (((b << 8) | (b >>> 24)) & 16711935) |
                    (((b << 24) | (b >>> 8)) & 4278255360),
                  T = (v >>> 16) | (_ & 4294901760),
                  a = (_ << 16) | (v & 65535);
                (k[0] ^= v),
                  (k[1] ^= T),
                  (k[2] ^= _),
                  (k[3] ^= a),
                  (k[4] ^= v),
                  (k[5] ^= T),
                  (k[6] ^= _),
                  (k[7] ^= a);
                for (var C = 0; C < 4; C++) u.call(this);
              }
            },
            _doProcessBlock: function (c, d) {
              var h = this._X;
              u.call(this),
                (t[0] = h[0] ^ (h[5] >>> 16) ^ (h[3] << 16)),
                (t[1] = h[2] ^ (h[7] >>> 16) ^ (h[5] << 16)),
                (t[2] = h[4] ^ (h[1] >>> 16) ^ (h[7] << 16)),
                (t[3] = h[6] ^ (h[3] >>> 16) ^ (h[1] << 16));
              for (var k = 0; k < 4; k++)
                (t[k] =
                  (((t[k] << 8) | (t[k] >>> 24)) & 16711935) |
                  (((t[k] << 24) | (t[k] >>> 8)) & 4278255360)),
                  (c[d + k] ^= t[k]);
            },
            blockSize: 128 / 32,
            ivSize: 64 / 32,
          }));
        function u() {
          for (var c = this._X, d = this._C, h = 0; h < 8; h++) i[h] = d[h];
          (d[0] = (d[0] + 1295307597 + this._b) | 0),
            (d[1] =
              (d[1] + 3545052371 + (d[0] >>> 0 < i[0] >>> 0 ? 1 : 0)) | 0),
            (d[2] = (d[2] + 886263092 + (d[1] >>> 0 < i[1] >>> 0 ? 1 : 0)) | 0),
            (d[3] =
              (d[3] + 1295307597 + (d[2] >>> 0 < i[2] >>> 0 ? 1 : 0)) | 0),
            (d[4] =
              (d[4] + 3545052371 + (d[3] >>> 0 < i[3] >>> 0 ? 1 : 0)) | 0),
            (d[5] = (d[5] + 886263092 + (d[4] >>> 0 < i[4] >>> 0 ? 1 : 0)) | 0),
            (d[6] =
              (d[6] + 1295307597 + (d[5] >>> 0 < i[5] >>> 0 ? 1 : 0)) | 0),
            (d[7] =
              (d[7] + 3545052371 + (d[6] >>> 0 < i[6] >>> 0 ? 1 : 0)) | 0),
            (this._b = d[7] >>> 0 < i[7] >>> 0 ? 1 : 0);
          for (var h = 0; h < 8; h++) {
            var k = c[h] + d[h],
              C = k & 65535,
              S = k >>> 16,
              w = ((((C * C) >>> 17) + C * S) >>> 15) + S * S,
              b = (((k & 4294901760) * k) | 0) + (((k & 65535) * k) | 0);
            o[h] = w ^ b;
          }
          (c[0] =
            (o[0] +
              ((o[7] << 16) | (o[7] >>> 16)) +
              ((o[6] << 16) | (o[6] >>> 16))) |
            0),
            (c[1] = (o[1] + ((o[0] << 8) | (o[0] >>> 24)) + o[7]) | 0),
            (c[2] =
              (o[2] +
                ((o[1] << 16) | (o[1] >>> 16)) +
                ((o[0] << 16) | (o[0] >>> 16))) |
              0),
            (c[3] = (o[3] + ((o[2] << 8) | (o[2] >>> 24)) + o[1]) | 0),
            (c[4] =
              (o[4] +
                ((o[3] << 16) | (o[3] >>> 16)) +
                ((o[2] << 16) | (o[2] >>> 16))) |
              0),
            (c[5] = (o[5] + ((o[4] << 8) | (o[4] >>> 24)) + o[3]) | 0),
            (c[6] =
              (o[6] +
                ((o[5] << 16) | (o[5] >>> 16)) +
                ((o[4] << 16) | (o[4] >>> 16))) |
              0),
            (c[7] = (o[7] + ((o[6] << 8) | (o[6] >>> 24)) + o[5]) | 0);
        }
        e.RabbitLegacy = l._createHelper(n);
      })(),
      (s.pad.ZeroPadding = {
        pad: function (e, r) {
          var l = r * 4;
          e.clamp(), (e.sigBytes += l - (e.sigBytes % l || l));
        },
        unpad: function (e) {
          for (
            var r = e.words, l = e.sigBytes - 1, l = e.sigBytes - 1;
            l >= 0;
            l--
          )
            if ((r[l >>> 2] >>> (24 - (l % 4) * 8)) & 255) {
              e.sigBytes = l + 1;
              break;
            }
        },
      }),
      s
    );
  });
  var y = function (s) {
    var e = "product",
      r = "version",
      l = "https://docsapi.opentext.com/mapperpi",
      f = {
        tboolean:
          "touch bookmarks toc bookmarkEntries sectionNumbers caseSensitive highContrast autoHideToc".split(
            " "
          ),
        nameValuePair: {
          find: ["anyWord", "allWords", "exactWord"],
          search: ["allModules", "document", "section", "page"],
          sort: ["match", "divisions"],
        },
        tstring: "query",
      };
    Array.isArray ||
      (Array.isArray = function (t) {
        return t instanceof Array;
      }),
      typeof String.prototype.endsWith > "u" &&
        (String.prototype.endsWith = function (t) {
          return this.lastIndexOf(t) == this.length - t.length;
        }),
      typeof debug > "u" && (debug = !1),
      typeof trace > "u" && (trace = !1),
      s && ((e = s.product || e), (r = s.version || r), (l = s.urlRoot || l));
    try {
      console ||
        (console = {
          error: function () {},
          log: function () {},
          warn: function () {},
        });
    } catch {
      console = {
        error: function () {},
        log: function () {},
        warn: function () {},
      };
    }
    return {
      buildHelpUrl: function (t, i, o) {
        if (!t || !i)
          return console.error("Please specify 'locale' and 'context'"), "";
        if (typeof t == "string" && 0 > t.indexOf(",") && typeof i == "string")
          return this._.generateSixParam(t, i, o);
        var n = null,
          n =
            typeof t == "string" && -1 < t.indexOf(",")
              ? t.split(",")
              : typeof t == "string"
              ? [t]
              : t;
        return this._.generateComplexParam(n, i, o);
      },
      optionConstants: f,
      _: {
        generateComplexParam: function (t, i, o) {
          var n,
            u = [],
            c,
            d,
            h = [],
            k = null,
            k = !1,
            C = [],
            S = [],
            w,
            b,
            v,
            _,
            T,
            a,
            g,
            I,
            D,
            A;
          if (!t || !i)
            return (
              console.error(
                "Missing parameter!, Please specify 'locale', and 'context', not:",
                t,
                i,
                o
              ),
              ""
            );
          if (
            typeof t != "object" ||
            typeof i != "object" ||
            (o && typeof o != "object")
          )
            return (
              console.error(
                "Invalid parameter!:",
                t,
                i,
                o,
                "are not objects. Parameter order should be ([],{},{})"
              ),
              ""
            );
          (b = o ? o.tenant : null),
            (v = o ? o.condition : null),
            (_ = (o && o.type) || "ofh1"),
            (T = function (B, M) {
              if (B) {
                g = !1;
                for (I in M) g |= M[I] == B;
                g || M.push(B);
              }
            }),
            (n = "");
          for (w in i.documents)
            (a = i.documents[w]),
              a.active && a.active === !0 && (k && delete a.active, (k = !0)),
              a.exclude === !0 && u.push(a),
              this.fixApp(a),
              T(a.version, S),
              a.err || C.push(a);
          if (typeof o == "object" && o.options) {
            debug && console.log("Complex params options: ", o.options),
              (k = { find: 1, search: 10, sort: 100 }),
              (a = 0),
              (D = 1);
            for (w in f.tboolean)
              (I = f.tboolean[w]),
                (I = o.options[I]),
                typeof I == "boolean" && (a += I ? D : 0),
                (D *= 2);
            (a = a.toString(16)),
              a != "0" && (n += 2 > a.length ? "0" + a : a),
              (a = 0);
            for (w in o.options)
              if ((I = f.nameValuePair[w])) {
                for (D = o.options[w], A = 0; A < I.length; A++)
                  if (I[A] == D) {
                    a += (A + 1) * k[w];
                    break;
                  }
              }
            if (
              (0 < a &&
                a != 121 &&
                ((a = a.toString(16)),
                (n +=
                  (n.length === 0 ? "00" : "") + (2 > a.length ? "0" + a : a))),
              typeof o.options.query == "string" &&
                (n += "S" + encodeURI(o.options.query)),
              o.options.flags &&
                (c = ("" + o.options.flags).replace(/[^a-zA-Z0-9]/g, "")),
              o.options.custom)
            )
              for (a in ((d = ""), o.options.custom))
                0 <= ",ml,t,o,f,key,type,".indexOf("," + a + ",") ||
                  ((I =
                    "" +
                    a.replace(/[^a-zA-Z0-9]/g, "") +
                    "=" +
                    encodeURIComponent(o.options.custom[a])),
                  (d += "&" + I));
          }
          for (
            debug &&
              console.log("Complex params: ", b, v, _, JSON.stringify(C), n),
              o = l + "?ml=",
              o += this.altArray(t),
              S.length == 1 && (o = o + "," + S[0]),
              w = 0;
            w < C.length;
            w++
          )
            (k = C[w].module),
              C[w].version && (k += C[w].version),
              C[w].release && (k += "-" + C[w].release),
              C[w].help && (k += "-" + C[w].help),
              C[w].docType && (k += "-" + C[w].docType),
              C[w].locale && (k += "-" + C[w].locale),
              C[w].PageID && (k += "." + C[w].PageID),
              C[w].exclude && (k += "_"),
              C[w].active && (k += "~"),
              T(k, h);
          return (
            debug &&
              (console.log("Complex params: ", S, o, JSON.stringify(u)),
              console.log("Compressable: ", JSON.stringify(h))),
            (k = this.compress(
              { docs: h, preserve: i.preserve, locale: t },
              t[0]
            )),
            debug && console.log("Compressed:", k),
            b && (k += "&t=" + encodeURIComponent(b)),
            v && (k += "&c=" + encodeURIComponent(v)),
            n &&
              (0 < parseInt(n, 16) || 0 <= n.indexOf("S")) &&
              (k += "&o=" + n),
            c && (k += "&f=" + c),
            d && (k += d),
            (t = this.generateKey()),
            l + "?type=" + _ + "&ml=" + (k + ("&key=" + t))
          );
        },
        compress: function (t, i) {
          var o = t.locale,
            n,
            u;
          n = null;
          var c = [],
            d,
            h = "NotAPossibleValue",
            k = h,
            C = !0,
            S = h,
            w = !0,
            b;
          o || (o = i),
            (o && o !== null) || (o = "en"),
            (n = t.docs),
            t.preserve !== !0 && (n = n.sort()),
            (u = this.altArray(o)),
            (c = []),
            (d = null),
            (k = h = "NotAPossibleValue"),
            (C = !0),
            (S = h),
            (w = !0);
          for (b in n)
            (d = this.parseRevnum(n[b])),
              c.push(d),
              C &&
                k != d.help &&
                (k == h ? (k = d.help) : k != d.help && (C = !1)),
              w &&
                S != d.release &&
                (S == h ? (S = d.release) : S != d.release && (w = !1));
          2 > n.length && (w = C = !1),
            w && S !== null && (u = u + "-" + S.toUpperCase()),
            C && k !== null && ((u += "-"), (u += k)),
            (k = h = b = null);
          for (d in c)
            (n = c[d]),
              b === null || b != n.product
                ? ((u += "$"), (b = n.product), (h = k = null), (u += b))
                : (u += ","),
              (S = n.version),
              w ||
                n.release === null ||
                (n.release && (S += "-" + n.release.toUpperCase())),
              (h === null || h != S) && ((u += S), (h = S), (k = null)),
              (S = ""),
              n.docType && (S += n.docType),
              n.locale !== null &&
                o != n.locale &&
                ((S += "-"), (S += n.locale)),
              n.PageID !== null &&
                0 < n.PageID.length &&
                ((S += "."), (S += window.encodeURIComponent(n.PageID))),
              (k === null || k != S) &&
                (k !== null && u.substring(u.length - 1) != "," && (u += ","),
                (k = S),
                C || n.help === null || ((u += n.help), (u += "-")),
                (u += k)),
              n.flag !== null && (u += n.flag);
          return u;
        },
        fixApp: function (t) {
          var i = null,
            o;
          if (t) {
            if (
              (t.version ||
                ((i = this.parseRevnum(t.module)),
                (t.module = i.product),
                (t.version =
                  i.version && 0 < i.version.length ? i.version : "0"),
                (t.release =
                  i.release && 0 < i.release.length ? i.release : null),
                (t.docType = i.docType),
                (t.help = i.help),
                (t.err = i.err)),
              t.version[0] == "v" && (t.version = t.version.substring(1)),
              -1 < t.module.indexOf("-"))
            ) {
              for (
                i = t.module.split(/(?=-)/),
                  i[0] = i[0].split(/\d+$/)[0],
                  t.module = i[0] + t.version,
                  o = 1;
                o < i.length;
                o++
              )
                t.module += i[o];
              (i = this.parseRevnum(t.module)),
                (t.module = i.product),
                (t.version = i.version),
                (t.release = i.release),
                (t.docType = i.docType),
                (t.help = i.help),
                (t.err = i.err);
            }
            i || (i = this.parseRevnum(t.module)),
              (t.locale =
                i.locale && 0 < i.locale.length && !t.locale
                  ? i.locale
                  : t.locale),
              (t.PageID =
                i.PageID && 0 < i.PageID.length && !t.topic
                  ? i.PageID
                  : t.topic),
              (t.module = t.module.split(/\d+$/)[0]);
          }
        },
        generateKeyAES: function (t, i) {
          return x.PBKDF2(i, x.enc.Hex.parse(t), {
            keySize: this.keySize,
            iterations: this.iterationCount,
          });
        },
        encrypt: function (t, i, o, n) {
          return (
            (t = this.generateKeyAES(t, o)),
            x.AES.encrypt(n, t, { iv: x.enc.Hex.parse(i) }).ciphertext.toString(
              x.enc.Base64
            )
          );
        },
        AesUtil: function (t, i) {
          (this.keySize = t / 32), (this.iterationCount = i);
        },
        generateSixParam: function (t, i, o) {
          var n = null,
            u = null,
            c = null,
            d = null,
            h;
          if (
            (o &&
              ((n = o.product), (u = o.version), (c = o.module), (d = o.type)),
            typeof d == "string" && d.length === 0 && (d = null),
            (o = this.generateKey()),
            (n = n || e),
            (u = u || r),
            (h = l),
            typeof c != "string" &&
              typeof d != "string" &&
              0 < h.indexOf("mapperpi") &&
              (h = h.substring(0, h.length - 2)),
            (h = h + "?" + ("product=" + encodeURIComponent(n))),
            (h += "&version=" + encodeURIComponent(u)),
            (h += "&locale=" + encodeURIComponent(t)),
            (h += "&context=" + encodeURIComponent(i)),
            typeof c == "string" && typeof d == "string")
          )
            (h += "&module=" + encodeURIComponent(c)),
              (h += "&type=" + encodeURIComponent(d));
          else if ((!c && d) || (!d && c))
            return (
              console.error(
                "'module' and 'type' need to be either BOTH or NEITHER defined"
              ),
              ""
            );
          return (h += "&key=" + o), debug && console.log(h), h;
        },
        generateKey: function () {
          var t = this.generatePassPhrase();
          return this.encryptByAES("Vignette", t);
        },
        parseRevnum: function (t) {
          var i = null,
            o;
          if (
            (i = t.match(
              /^([a-zA-Z]+)(\d+(-\d+\w*)?)((-[a-z])?)(-[a-z]+)?(-[_a-z]+)?(-\d+)?(\.([a-zA-Z0-9#.\_\-]+))?([\_\~])?$/i
            ))
          ) {
            (t = i[2]),
              i[3] &&
                i[3][0] == "-" &&
                (t = t.substring(0, t.length - i[3].length)),
              (i = {
                product: i[1],
                version: t,
                release: i[3],
                help: i[4],
                docType: i[6],
                locale: i[7],
                revision: i[8],
                PageID: i[10],
                flag: i[11],
              });
            for (o in i)
              i[o] && i[o][0] == "-"
                ? (i[o] = i[o].substring(1))
                : i[o] || (i[o] = null);
            i.PageID !== null &&
              i.flag === null &&
              i.PageID.endsWith("_") &&
              ((i.flag = "_"),
              (i.PageID = i.PageID.substring(0, i.PageID.length - 1)));
          } else
            i = {
              product: t,
              version: null,
              release: null,
              help: null,
              docType: null,
              locale: null,
              revision: null,
              PageID: null,
              flag: null,
              err: !0,
            };
          return i;
        },
        generatePassPhrase: function () {
          var o = new Date(),
            t = o.getFullYear(),
            i = o.getMonth(),
            o = o.getDate(),
            n = "" + i,
            u = "" + o;
          return 10 > i && (n = "0" + n), 10 > o && (u = "0" + u), t + n + u;
        },
        encryptByAES: function (t, i) {
          var o,
            n = x.lib.WordArray.random(16).toString(x.enc.Hex),
            u = x.lib.WordArray.random(16).toString(x.enc.Hex);
          return (
            x.enc.Utf8.parse(i),
            this.AesUtil(256, 1e3),
            (o = this.encrypt(n, u, i, t)),
            trace &&
              (console.log(x.enc.Utf8.stringify(o), x.enc.Hex.stringify(o)),
              console.log(
                x.enc.Hex.parse(x.enc.Utf8.parse(i).toString(x.enc.Hex))
              )),
            trace &&
              (console.log(
                "encrypted.toString()  -> base64(ciphertext)  :",
                o.toString()
              ),
              console.log(
                "base64(ciphertext)    <- encrypted.toString():",
                o.ciphertext.toString(x.enc.Base64)
              ),
              console.log(
                "ciphertext.toString() -> ciphertext hex      :",
                o.ciphertext.toString()
              )),
            u.toString() + "~" + o.toString() + "~" + n.toString()
          );
        },
        altArray: function (t) {
          var i = "",
            o,
            n;
          if (Array.isArray(t)) {
            for (o = 0; o < t.length; o++)
              (n = t[o].replace(/-/g, "_")),
                (i = o % 2 === 0 ? i + n.toLowerCase() : i + n.toUpperCase());
            return i;
          }
          return t;
        },
      },
    };
  };
  return y;
}),
  csui.define("json!csui/utils/froala/localization.mappings.json", {
    "en-us": "",
    "ru-ru": "ru",
    pt: "pt_br",
    "zh-cn": "zh_cn",
    "zh-tw": "zh_tw",
    "uk-ua": "uk",
    "fi-fi": "fi",
    "nb-no": "nb",
    "pl-pl": "pl",
    "tr-tr": "tr",
    "cs-cz": "cs",
    "da-dk": "da",
    "ko-kr": "ko",
    "ca-es": "ca",
    "kk-kz": "kk",
  }),
  csui.define(
    "csui/lib/froala_editor/js/plugins/custcsuiImage",
    ["csui/lib/froala_editor/js/froala_editor.pkgd.min"],
    function (x) {
      "use strict";
      x.PLUGINS.customAttachmentsPlugin = function (m) {
        function p() {
          m.events.on("image.beforeUpload", function (e, r) {
            const { getImageId: l, connectionUrl: f } = m.opts.externalParams,
              t = e[0];
            var i = new FileReader(),
              o = Math.random().toString(36).substring(2, 15),
              n = o + "_" + e[0].name;
            return (
              (m.opts.imageUploadParams.name = n),
              (i.onload = async function (u) {
                const c = await l(t),
                  d = `${f}?func=doc.fetch&nodeId=${c}&viewType=1`;
                m.image.insert(d, !1, {}, r),
                  m.events.trigger("contentChanged");
              }),
              i.readAsDataURL(e[0]),
              !1
            );
          }),
            m.events.on("popups.show.image.edit", function () {
              const e = m.image.get()[0],
                r = m.popups.get("image.edit")[0],
                l = m.opts.iframe
                  ? m.$iframe.closest(".csui-normal-scrolling")[0]
                  : m.$el[0].closest(".csui-normal-scrolling");
              s(e, r, l);
            }),
            m.events.on("popups.hide.image.edit", function () {
              m.toolbar.enable(),
                m.shared.$image_resizer.removeClass("fr-active");
            });
          function y() {
            m.popups.hide("image.edit");
          }
          function s(e, r, l) {
            let f = 0;
            const t = e.getBoundingClientRect(),
              i = r.getBoundingClientRect(),
              o = l?.getBoundingClientRect(),
              n = m.opts.iframe ? m.$iframe[0].getBoundingClientRect().top : 0,
              u = t.top + n,
              c = u + t.height,
              d = Math.max(u, o.top),
              h = Math.min(c, o.bottom);
            i.height < d
              ? (f = d - i.height + window.scrollY)
              : window.innerHeight - h > i.height
              ? (f = h + window.scrollY)
              : (f =
                  d > 0 ? d + window.scrollY : h - i.height + window.scrollY),
              (r.style.top = `${f}px`);
          }
        }
        return { _init: p };
      };
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/cslink",
    [
      "csui/lib/jquery",
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
    ],
    function (x, m, p) {
      "use strict";
      m.DefineIconTemplate(
        "cslink",
        '<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13,10H11l-1,1L9,10H7a3,3,0,0,0,0,6H9l1-1,1,1h2a3,3,0,0,0,0-6ZM7,15a2,2,0,0,1,0-4H9v1H7a1,1,0,0,0,0,2H9v1Zm5.5-2.5a.5.5,0,0,1,0,1h-5a.5.5,0,0,1,0-1ZM13,15H11V14h2a1,1,0,0,0,0-2H11V11h2a2,2,0,0,1,0,4Z" style="fill:#333"/><path d="M7,5.435A1.465,1.465,0,1,0,8.465,6.9h0A1.466,1.466,0,0,0,7,5.435Z" style="fill:#333"/><path d="M10.237,2.09a1.8,1.8,0,0,0,.028-.273,1.816,1.816,0,0,0-3.483-.722,5.83,5.83,0,0,0-5.62,5.392A1.815,1.815,0,0,0,1.817,10a1.783,1.783,0,0,0,.194-.02,5.861,5.861,0,0,0,.835,1.063c.1.1.208.2.317.291a4.251,4.251,0,0,1,.205-.408l.059-.1a4.227,4.227,0,0,1,.3-.431,4.851,4.851,0,0,1-.718-.857,1.8,1.8,0,0,0-.768-3.12A4.685,4.685,0,0,1,6.666,2.171a1.811,1.811,0,0,0,3.1.894,4.766,4.766,0,0,1,1.982,3.851A4.625,4.625,0,0,1,11.335,8.8h1.143a5.786,5.786,0,0,0-2.24-6.709Z" style="fill:#333"/></svg>'
      ),
        m.DefineIcon("cslink", { NAME: "cslink", template: "cslink" }),
        m.RegisterCommand("cslink", {
          title: p.insertContentServerLink,
          icon: "cslink",
          undo: !0,
          focus: !0,
          showOnMobile: !0,
          callback: function () {
            const y = this;
            y.toolbar.disable();
            let s;
            y.selection.isCollapsed() || (s = y.selection.get()),
              y.selection.save(),
              y.$tb.hide(),
              x(".froala-save-cancel").hide(),
              y.opts.csLink
                .nodePicker()
                .show()
                .done(function (e) {
                  const r = e.nodes[0],
                    l =
                      y.opts.csLink.getUrl &&
                      typeof y.opts.csLink.getUrl == "function"
                        ? y.opts.csLink.getUrl(r)
                        : y.opts.csLink.nodeLink.getUrl(e.nodes[0]);
                  typeof y.opts.externalParams.enableSaveButton == "function" &&
                    y.opts.externalParams.enableSaveButton(),
                    y.selection.restore(),
                    s
                      ? y.format.apply("a", { href: l }, y.selection.text())
                      : y.link.insert(l, r.get("name"));
                })
                .fail(function (e) {})
                .always(function (e) {
                  y.$tb.show(),
                    x(".froala-save-cancel").show(),
                    y.toolbar.enable();
                });
          },
        });
    }
  ),
  csui.define(
    "csui/controls/source.dialog/source.dialog.textarea.field.view",
    [
      "csui/controls/form/fields/textareafield.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (x, m) {
      "use strict";
      var p = x.extend({
        behaviors: { TabableRegionBehavior: { behaviorClass: m } },
        onAfterShow: function () {
          this.$el.find("*[tabindex]").prop("tabindex", 0),
            this.currentlyFocusedElement().focus();
        },
        onDomRefresh: function () {
          this.refreshFocusEngage();
        },
        currentlyFocusedElement: function () {
          return this.focusables[0];
        },
        refreshFocusEngage: function () {
          this.focusables = this.$el.find("textarea").filter(function (y, s) {
            return s.offsetWidth && s.offsetHeight;
          });
        },
        onLastTabElement: function () {
          return this.refreshFocusEngage(), this.currentlyFocusedElement();
        },
      });
      return p;
    }
  ),
  csui.define(
    "css!csui/controls/source.dialog/impl/source.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/source.dialog/source.dialog.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/dialog/dialog.view",
      "csui/controls/source.dialog/source.dialog.textarea.field.view",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/controls/source.dialog/impl/source.dialog",
    ],
    function (x, m, p, y, s) {
      var e = p.extend({
        className: "fr-source-code-view",
        constructor: function (l = {}) {
          x.defaults(l, {
            buttons: [
              {
                id: "froalaOkButton",
                default: !0,
                label: s.okTitle,
                click: x.bind(this._okAction, this),
                enabled: !0,
              },
              {
                id: "froalaCancelButton",
                label: s.cancelTitle,
                close: !0,
                enabled: !0,
              },
            ],
            title: s.sourceDialogTitle,
            view: new y({
              model: new m.Model({ data: l.data, options: l }),
              mode: "writeonly",
            }),
          }),
            p.prototype.constructor.call(this, l);
        },
        _okAction: function () {
          const r = this.options.view.model;
          this.trigger("toggle:content", {
            data: r.get("data"),
            enableSaveButton: !!r.changed.data,
          }),
            this.destroy();
        },
        destroy: function () {
          p.prototype.destroy.call(this), this.trigger("show:froala-toolbar");
        },
      });
      return e;
    }
  ),
  csui.define(
    "css!csui/lib/froala_editor/css/plugins/source.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/sourcecode",
    [
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "csui/controls/source.dialog/source.dialog.view",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/lib/froala_editor/css/plugins/source.dialog",
    ],
    function (x, m, p) {
      "use strict";
      x.DefineIconTemplate(
        "codeView",
        '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fr-source"></svg>'
      ),
        x.DefineIcon("codeView", { NAME: "codeView", template: "codeView" }),
        x.RegisterCommand("codeCustomView", {
          title: p.openCodeView,
          icon: "codeView",
          callback: function () {
            let y = this.html.get(!1, !0);
            y =
              (this.codeBeautifier &&
                !y.includes("fr-embedly") &&
                this.codeBeautifier.run(y, this.opts.codeBeautifierOptions)) ||
              y;
            const s = { data: y, largeSize: !0 };
            var e = new m(s);
            e.show(),
              this.$tb.hide(),
              this.$sc.find(".csui-html-editor-action-buttons").hide(),
              e.on(
                "toggle:content",
                function (r) {
                  this.html.set(r.data),
                    r.enableSaveButton &&
                      this.opts.externalParams.enableSaveButton();
                }.bind(this)
              ),
              e.on(
                "show:froala-toolbar",
                function () {
                  this.$tb.show(),
                    this.$sc.find(".csui-html-editor-action-buttons").show(),
                    this.el.focus();
                }.bind(this)
              );
          },
        });
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return "froala-save-cancel";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isFroala") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 12 },
                  end: { line: 1, column: 53 },
                },
              }
            )) != null
              ? t
              : "") +
            ` csui-html-editor-action-buttons">
  <button type="button" title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "saveLabel") || (e != null ? o(e, "saveLabel") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "saveLabel",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 31 },
                      end: { line: 2, column: 44 },
                    },
                  })
                : i)
            ) +
            `" role="button" data-cstabindex="-1" tabindex="-1"
          aria-label="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "saveAria") || (e != null ? o(e, "saveAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "saveAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 22 },
                      end: { line: 3, column: 34 },
                    },
                  })
                : i)
            ) +
            `"
          class="icon circular csui-html-edit-icon csui-html-edit-save"></button>
  <button type="button" title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "cancelLabel") ||
                  (e != null ? o(e, "cancelLabel") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cancelLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 31 },
                      end: { line: 5, column: 46 },
                    },
                  })
                : i)
            ) +
            `" role="button" data-cstabindex="-1" tabindex="-1"
          aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "cancelAria") || (e != null ? o(e, "cancelAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cancelAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 22 },
                      end: { line: 6, column: 36 },
                    },
                  })
                : i)
            ) +
            `"
          class="icon circular csui-html-edit-icon csui-html-edit-cancel"></button>
</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_html.editor.action.buttons",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/floatingspace",
    [
      "csui/lib/jquery",
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "csui/lib/underscore",
      "i18n",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      m.PLUGINS.customFloatingspace = function (r) {
        let l, f;
        function t() {
          const h = x("body"),
            k = {
              saveLabel: y.saveTitle,
              cancelLabel: y.cancelTitle,
              cancelAria: y.cancelAria,
              saveAria: y.saveAria,
              isFroala: !0,
            };
          h.append(p(k)),
            h.find(".csui-html-edit-save").on(
              "click",
              s.bind(function () {
                r.opts.externalParams.disableSaveButton(),
                  this.events.trigger("onSave");
              }, r)
            ),
            h.find(".csui-html-edit-cancel").on(
              "click",
              s.bind(function () {
                this.events.trigger("cancel");
              }, r)
            );
        }
        function i(h) {
          const k = window.innerWidth,
            C = r.$box[0].getBoundingClientRect(),
            S = k - C.right,
            w = C.left;
          let b = C.width + Math.max(S, w),
            v = (b - h) / b;
          return (
            C.width / k > 0.8 && ((v = 1), (b = Math.min(C.width, b))), b * v
          );
        }
        function o() {
          if (x("body.binf-modal-open").length !== 0) return;
          const k = r.$tb,
            C = x(".csui-html-editor-action-buttons"),
            S = C.outerWidth(),
            w = C.outerHeight();
          let b = {};
          l ||
            (l = r.$box
              .parents()
              .closest(r.opts.externalParams.widgetSelector)[0]);
          let v = f || i(S);
          const _ = l.getBoundingClientRect(),
            T = window.innerWidth,
            a = document.documentElement.scrollTop;
          let g = k.outerHeight(),
            I,
            D = !1;
          _.top > g + w
            ? ((I = _.top + a - g), (D = !0))
            : (I = _.top + a + _.height);
          const A = window.getComputedStyle(l),
            B = parseFloat(A.paddingRight);
          let M = _.left,
            E = T - _.right;
          const P = e.settings.rtl,
            O = r.$sc[0].querySelector(".fr-popup.fr-active");
          (b.position = "absolute"),
            (b.zIndex = O ? 1070 : 1069),
            (b.top = `${I}px`),
            (b.borderRadius = "1px"),
            (b.display = "none"),
            (b["max-width"] = `${v}px`),
            (b.width = "max-content"),
            k.css(b),
            f || ((v = k.outerWidth()), (f = v)),
            E < M
              ? (M = _.right - v - B)
              : M === E && (M = _.left + (_.width - v) / 2),
            (M = Math.max(M, 0)),
            P
              ? ((b.right = `${Math.max(T - M - v, 0)}px`), (b.left = "auto"))
              : ((b.left = `${M}px`), (b.right = "auto")),
            (b.display = "block"),
            k.css(b),
            (g = k.outerHeight()),
            _.top > g + w
              ? ((I = _.top + a - g), (D = !0))
              : (I = _.top + a + _.height),
            k.css("top", `${I}px`);
          let z, F;
          function U() {
            return I + (g - w) / 2;
          }
          function H(N, V, L) {
            C.css({
              position: "absolute",
              "margin-top": "0px",
              width: "max-content",
              top: `${N}px`,
              left: V !== null ? `${V}px` : "auto",
              right: L !== null ? `${L}px` : "auto",
              zIndex: 1069,
            });
          }
          P
            ? M - S >= 5
              ? ((z = U()), (F = M - S - 5), F < 0 && (F = 5), H(z, F, null))
              : T - (M + v + S) >= 5
              ? ((z = U()), (F = T - (M + v + S + 5)), H(z, null, F))
              : D
              ? ((z = I + g - 20),
                k.css("top", `${I - w}px`),
                (F = T - (M + v)),
                H(z, null, F))
              : ((z = I + g + 5), (F = T - (M + v)), H(z, null, F))
            : T - M >= v + S + 5
            ? ((z = U()), (F = M + v + 5), H(z, F, null))
            : M >= S + 5
            ? ((z = U()), (F = M - S - 5), H(z, F, null))
            : D
            ? (k.css("top", `${I - w}px`),
              (z = I + g - 20),
              (F = M),
              H(z, F, null))
            : ((z = I + g + 5), (F = 0), H(z, F, null));
        }
        function n() {
          const h =
            r.$tb[0].querySelector(".fr-dropdown.fr-active") ||
            (r.$sc[0].querySelector(".fr-popup.fr-active") && 1070);
          r.$tb.css("zIndex", h || 1069);
        }
        function u() {
          const h = x(".fr-tooltip");
          h.length &&
            (h.css({ right: "auto" }), r.$tb.off("mouseenter", ".fr-command"));
        }
        function c() {
          x("body").append(r.$tb), t(), o();
          const h = s.debounce(() => {
            (f = null), o();
          }, 110);
          r.$box
            .closest(".csui-normal-scrolling")
            .on("scroll wheel", function () {
              r.popups.hideAll();
            }),
            x(window).on("resize.customFloatingspace", h),
            x(window).on("scroll.customFloatingspace", o),
            x(".fr-toolbar").on("mouseenter", ".fr-command", u),
            x(".fr-dropdown").on("blur click", r.button.bulkRefresh),
            r.events.on("buttons.refresh", n),
            r.events.on("destroy", d),
            window.addEventListener("popstate", d);
        }
        function d() {
          x(window).off("resize.customFloatingspace"),
            x(window).off("scroll.customFloatingspace"),
            x(".fr-toolbar").remove(),
            x(".csui-html-editor-action-buttons").remove(),
            x(".csui-rich-text-mask").remove(),
            r.popups.hideAll(),
            window.removeEventListener("popstate", d);
        }
        return { _init: c };
      };
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/video",
    ["csui/lib/froala_editor/js/froala_editor.pkgd.min"],
    function (x) {
      "use strict";
      x.PLUGINS.customVideoPlugin = function (m) {
        function p(e) {
          return !!e.match(/\.(mp4|mkv|ogg|webm|m4v|ogv|mov).*/gi);
        }
        function y(e, r) {
          const l = `<video width="640" controls>
                            <source src="${e}" type="video/mp4">
                            Your browser does not support the video tag.
                          </video>`;
          r.video.insert(l);
        }
        function s() {
          m.events.on("commands.after", function (e) {
            if (e === "videoInsertByURL") {
              const r = document.querySelector(
                '.fr-video-by-url-layer input[type="text"]'
              );
              if (r) {
                const l = r.value;
                p(l) && (y(l, this), this.popups.hide("video.insert"));
              }
            }
          });
        }
        return { _init: s };
      };
    }
  ),
  csui.define(
    "csui/utils/froala/bootstrap",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "i18n",
      "json!csui/utils/froala/localization.mappings.json",
      "csui/lib/froala_editor/js/plugins/custcsuiImage",
      "csui/lib/froala_editor/js/plugins/cslink",
      "csui/lib/froala_editor/js/plugins/sourcecode",
      "csui/lib/froala_editor/js/plugins/floatingspace",
      "csui/lib/froala_editor/js/plugins/video",
    ],
    function (x, m, p, y, s) {
      "use strict";
      const e =
        "PYC4mA3B12C11A8E7D6D3eMRPYa1c1REe1BGQOQIc1CDBREJImD6F5F4D4E1B9A5C3F5E4==";
      return function (l, f) {
        let t = {
          key: e,
          attribution: !1,
          toolbarSticky: !1,
          toolbarButtons: [
            "bold",
            "italic",
            "underline",
            "strikeThrough",
            "subscript",
            "superscript",
            "fontSize",
            "textColor",
            "backgroundColor",
            "inlineClass",
            "inlineStyle",
            "clearFormatting",
            "alignLeft",
            "alignCenter",
            "alignRight",
            "alignJustify",
            "formatOL",
            "formatUL",
            "paragraphFormat",
            "paragraphStyle",
            "lineHeight",
            "outdent",
            "indent",
            "quote",
            "trackChanges",
            "markdown",
            "insertLink",
            "cslink",
            "insertImage",
            "insertTable",
            "fontAwesome",
            "specialCharacters",
            "undo",
            "redo",
            "customText",
            "spellChecker",
            "codeCustomView",
          ],
          imageInsertButtons: ["imageUpload"],
          imageAllowedTypes: ["jpeg", "jpg", "png", "gif"],
          imageResize: !0,
          imageEditButtons: [
            "imageReplace",
            "imageAlign",
            "imageRemove",
            "|",
            "imageLink",
            "linkEdit",
            "linkRemove",
            "-",
            "imageDisplay",
            "imageStyle",
            "imageAlt",
            "imageSize",
          ],
          imageDefaultAlign: "left",
          scrollableContainer: "body",
          pluginsEnabled: [
            "align",
            "charCounter",
            "codeBeautifier",
            "colors",
            "entities",
            "file",
            "fontAwesome",
            "fontFamily",
            "fontSize",
            "resize",
            "inlineStyle",
            "link",
            "lists",
            "paragraphFormat",
            "paragraphStyle",
            "quote",
            "save",
            "specialCharacters",
            "table",
            "tableDragStart",
            "wordPaste",
            "spellChecker",
            "customAttachmentsPlugin",
            "customFloatingspace",
          ],
          saveInterval: 6e4,
          linkInsertButtons: ["linkBack"],
          linkEditButtons: ["linkOpen", "linkEdit", "linkRemove"],
          autofocus: !0,
          useClasses: !1,
          zIndex: 1069,
          direction: y.settings.rtl ? "rtl" : "auto",
          fontSize: [
            "8",
            "9",
            "10",
            "11",
            "12",
            "14",
            "16",
            "18",
            "24",
            "30",
            "36",
            "48",
            "60",
            "72",
            "96",
          ],
          fontSizeSelection: !0,
          fontSizeDefaultSelection: "16",
          dontConvertExternalCss: !0,
          htmlRemoveTags: ["script"],
        };
        (f.customHtmlGet = function (n, u) {
          const c = this;
          if (!c.$wp)
            return c.$oel
              .clone()
              .removeClass("fr-view")
              .removeAttr("contenteditable")
              .get(0).outerHTML;
          var d = "";
          c.events.trigger("html.beforeGet");
          var h = [],
            k = {},
            C,
            S,
            w = [];
          if ((c.html.syncInputs(), !c.opts.useClasses && !u)) {
            let W = function (q, R) {
              return q[3] - R[3];
            };
            var b = new RegExp(
              "^".concat(c.opts.htmlIgnoreCSSProperties.join("$|^"), "$"),
              "gi"
            );
            for (C = 0; C < c.doc.styleSheets.length; C++) {
              let q = function (R) {
                var Q = /(#[^\s+>~.[:]+)/g,
                  X = /(\[[^]]+\])/g,
                  te = /(\.[^\s+>~.[:]+)/g,
                  Y =
                    /(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,
                  K = /(:[\w-]+\([^)]*\))/gi,
                  $ = /(:[^\s+>~.[:]+)/g,
                  ie = /([^\s+>~.[:]+)/g;
                (function () {
                  var re = /:not\(([^)]*)\)/g;
                  re.test(R) && (R = R.replace(re, "     $1 "));
                })();
                var se =
                  (R.match(Q) || []).length * 100 +
                  (R.match(X) || []).length * 10 +
                  (R.match(te) || []).length * 10 +
                  (R.match(K) || []).length * 10 +
                  (R.match($) || []).length * 10 +
                  (R.match(Y) || []).length;
                return (
                  (R = R.replace(/[*\s+>~]/g, " ")),
                  (R = R.replace(/[#.]/g, " ")),
                  (se += (R.match(ie) || []).length),
                  se
                );
              };
              if (c.opts.dontConvertExternalCss) {
                const R = /lib\/froala_editor\/css\/.*\.css/,
                  Q = c.doc.styleSheets[C]?.href;
                if (!(Q && R.test(Q))) continue;
              }
              var v = void 0,
                _ = 0;
              try {
                (v = c.doc.styleSheets[C].cssRules),
                  c.doc.styleSheets[C].ownerNode &&
                    c.doc.styleSheets[C].ownerNode.nodeType === "STYLE" &&
                    (_ = 1);
              } catch {}
              if (v) {
                for (var T = 0, a = v.length; T < a; T++)
                  if (v[T].selectorText && v[T].style.cssText.length > 0) {
                    var g = v[T].selectorText
                        .replace(/body \s tbody \.fr-view /g, "")
                        .replace(/::/g, ":"),
                      I = void 0;
                    try {
                      I = c.el.querySelectorAll(g);
                    } catch {
                      I = [];
                    }
                    for (S = 0; S < I.length; S++) {
                      !I[S].getAttribute("fr-original-style") &&
                      I[S].getAttribute("style")
                        ? (I[S].setAttribute(
                            "fr-original-style",
                            I[S].getAttribute("style")
                          ),
                          h.push(I[S]))
                        : I[S].getAttribute("fr-original-style") ||
                          (I[S].setAttribute("fr-original-style", ""),
                          h.push(I[S])),
                        k[I[S]] || (k[I[S]] = {});
                      for (
                        var D = _ * 1e3 + q(v[T].selectorText),
                          A = v[T].style.cssText.split(";"),
                          B = 0;
                        B < A.length;
                        B++
                      ) {
                        var M = A[B].trim().split(":")[0];
                        if (
                          M &&
                          !M.match(b) &&
                          ((!k[I[S]][M] ||
                            (k[I[S]][M] &&
                              I[S].getAttribute("fr-original-style") == "")) &&
                            ((k[I[S]][M] = 0),
                            (
                              I[S].getAttribute("fr-original-style") || ""
                            ).indexOf("".concat(M, ":")) >= 0 &&
                              (k[I[S]][M] = 1e4)),
                          D >= k[I[S]][M] &&
                            ((k[I[S]][M] = D), A[B].trim().length))
                        ) {
                          var E = A[B].trim().split(":");
                          E.splice(0, 1);
                          var P = E.join(":").trim();
                          P.indexOf("!important") > -1 && (D = D + 1),
                            w.push([I[S], M.trim(), P, D]);
                        }
                      }
                    }
                  }
              }
            }
            for (w.sort(W), C = 0; C < w.length; C++) {
              var O = w[C];
              O[0].style[O[1]] = O[2].replace(/!important/, "");
            }
            for (C = 0; C < h.length; C++)
              if (
                (h[C].getAttribute("class") &&
                  (h[C].setAttribute(
                    "fr-original-class",
                    h[C].getAttribute("class")
                  ),
                  h[C].removeAttribute("class")),
                (h[C].getAttribute("fr-original-style") || "").trim().length >
                  0)
              ) {
                var z = h[C].getAttribute("fr-original-style").split(";");
                for (S = 0; S < z.length; S++)
                  if (z[S].indexOf(":") > 0) {
                    var F = z[S].split(":"),
                      U = F[0];
                    F.splice(0, 1), (h[C].style[U.trim()] = F.join(":").trim());
                  }
              }
          }
          if (c.node.isEmpty(c.el))
            c.opts.fullPage &&
              ((d = getDoctype(c.iframe_document)),
              (d += "<html"
                .concat(c.node.attributes(c.$html.get(0)), ">")
                .concat(
                  c.$html.find("head").get(0).outerHTML,
                  "<body></body></html>"
                )));
          else if ((typeof n > "u" && (n = !1), !c.opts.fullPage))
            (d = c.$el.html()),
              c.opts.iframe &&
                c.$html &&
                c.$html.find(".fr-element").length > 0 &&
                (d = c.$html.find(".fr-element").html());
          else {
            (d = getDoctype(c.iframe_document)), c.$el.removeClass("fr-view");
            var H = c.opts.heightMin,
              N = c.opts.height,
              V = c.opts.heightMax;
            (c.opts.heightMin = null),
              (c.opts.height = null),
              (c.opts.heightMax = null),
              c.size.refresh(),
              (d += "<html"
                .concat(c.node.attributes(c.$html.get(0)), ">")
                .concat(c.$html.html(), "</html>")),
              c.opts.iframe &&
                c.$html &&
                c.$html.find(".fr-element").length > 0 &&
                (d = c.$html.find(".fr-element").html()),
              (c.opts.heightMin = H),
              (c.opts.height = N),
              (c.opts.heightMax = V),
              c.size.refresh(),
              c.$el.addClass("fr-view");
          }
          if (!c.opts.useClasses && !u)
            for (C = 0; C < h.length; C++)
              h[C].getAttribute("fr-original-class") &&
                (h[C].setAttribute(
                  "class",
                  h[C].getAttribute("fr-original-class")
                ),
                h[C].removeAttribute("fr-original-class")),
                h[C].getAttribute("fr-original-style") !== null &&
                typeof h[C].getAttribute("fr-original-style") < "u"
                  ? (h[C].getAttribute("fr-original-style").length !== 0
                      ? h[C].setAttribute(
                          "style",
                          h[C].getAttribute("fr-original-style")
                        )
                      : h[C].removeAttribute("style"),
                    h[C].removeAttribute("fr-original-style"))
                  : h[C].removeAttribute("style");
          c.opts.fullPage &&
            ((d = d.replace(
              /<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,
              ""
            )),
            (d = d.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g, "")),
            (d = d.replace(
              /<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,
              ""
            )),
            (d = d.replace(
              /<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$2>$3</body>"
            )),
            (d = d.replace(
              /<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$3>$4</body>"
            )),
            (d = d.replace(
              /<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$3>$4</body>"
            )),
            (d = d.replace(
              /<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              '<body$1class="$2$4"$5>$6</body>'
            )),
            (d = d.replace(
              /<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$2>$3</body>"
            ))),
            c.opts.htmlSimpleAmpersand && (d = d.replace(/&amp;/gi, "&")),
            c.events.trigger("html.afterGet"),
            n ||
              (d = d.replace(
                /<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,
                ""
              )),
            (d = c.clean.invisibleSpaces(d));
          function L(W) {
            var q = W.parentNode;
            if (
              q &&
              (c.node.isBlock(q) || c.node.isElement(q)) &&
              ["TD", "TH"].indexOf(q.tagName) < 0
            ) {
              for (
                var R = W.previousSibling, Q = W.nextSibling;
                R &&
                ((R.nodeType === Node.TEXT_NODE &&
                  R.textContent.replace(/\n|\r/g, "").length === 0) ||
                  c.node.hasClass(R, "fr-tmp"));

              )
                R = R.previousSibling;
              if (Q) return !1;
              R &&
                q &&
                R.tagName !== "BR" &&
                !c.node.isBlock(R) &&
                !Q &&
                q.textContent.replace(/\u200B/g, "").length > 0 &&
                R.textContent.length > 0 &&
                !c.node.hasClass(R, "fr-marker") &&
                ((c.el === q &&
                  !Q &&
                  c.opts.enter === FroalaEditor.ENTER_BR &&
                  c.browser.msie) ||
                  W.parentNode.removeChild(W));
            } else
              q &&
                !(c.node.isBlock(q) || c.node.isElement(q)) &&
                !W.previousSibling &&
                !W.nextSibling &&
                c.node.isDeletable(W.parentNode) &&
                L(W.parentNode);
          }
          function j(W) {
            if (
              (c.events.trigger("html.processGet", [W]),
              W &&
                W.getAttribute &&
                W.getAttribute("class") === "" &&
                W.removeAttribute("class"),
              W &&
                W.getAttribute &&
                W.getAttribute("style") === "" &&
                W.removeAttribute("style"),
              W && W.nodeType === Node.ELEMENT_NODE)
            ) {
              let te = function (Y) {
                var K = Y.parentNode;
                if (
                  K &&
                  (c.node.isBlock(K) || c.node.isElement(K)) &&
                  ["TD", "TH"].indexOf(K.tagName) < 0
                ) {
                  for (
                    var $ = Y.previousSibling, ie = Y.nextSibling;
                    $ &&
                    (($.nodeType === Node.TEXT_NODE &&
                      $.textContent.replace(/\n|\r/g, "").length === 0) ||
                      c.node.hasClass($, "fr-tmp"));

                  )
                    $ = $.previousSibling;
                  if (ie) return !1;
                  $ &&
                    K &&
                    $.tagName !== "BR" &&
                    !c.node.isBlock($) &&
                    !ie &&
                    K.textContent.replace(/\u200B/g, "").length > 0 &&
                    $.textContent.length > 0 &&
                    !c.node.hasClass($, "fr-marker") &&
                    ((c.el === K &&
                      !ie &&
                      c.opts.enter === FroalaEditor.ENTER_BR &&
                      c.browser.msie) ||
                      Y.parentNode.removeChild(Y));
                } else
                  K &&
                    !(c.node.isBlock(K) || c.node.isElement(K)) &&
                    !Y.previousSibling &&
                    !Y.nextSibling &&
                    c.node.isDeletable(Y.parentNode) &&
                    te(Y.parentNode);
              };
              var q = W.querySelectorAll('[class=""],[style=""]'),
                R;
              for (R = 0; R < q.length; R++) {
                var Q = q[R];
                Q.getAttribute("class") === "" && Q.removeAttribute("class"),
                  Q.getAttribute("style") === "" && Q.removeAttribute("style");
              }
              if (W.tagName === "BR") te(W);
              else {
                var X = W.querySelectorAll("br");
                for (R = 0; R < X.length; R++) te(X[R]);
              }
            }
          }
          d = c.clean.exec(d, j);
          var G = c.events.chainTrigger("html.get", d);
          return (
            typeof G == "string" && (d = G),
            (d = d.replace(
              /<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,
              function (W) {
                return W.replace(
                  /<br>/g,
                  `
`
                );
              }
            )),
            (d = d.replace(
              /<meta((?:[\w\W]*?)) data-fr-http-equiv="/g,
              '<meta$1 http-equiv="'
            )),
            d
          );
        }),
          (f = f || {});
        const i = ["image", "insertImage"];
        f.externalParams.imageBrowseEnabled && t.pluginsEnabled.push(...i),
          (f = m.extend({}, t, f));
        const o = function (n) {
          csui.require(
            [
              "csui/lib/froala_editor/js/froala_editor.pkgd.min",
              "css!csui/lib/froala_editor/css/froala_editor.pkgd.min",
            ],
            function (u) {
              return n(new u(l, f));
            }
          );
        };
        return new Promise(function (n, u) {
          let c = y.settings.locale;
          if ((s.hasOwnProperty(c) && (c = s[c]), !c)) {
            o(n);
            return;
          }
          const d = `csui/lib/froala_editor/js/languages/${c}`;
          x(
            [d],
            function (h) {
              (f.language = c), o(n);
            },
            function (h) {
              o(n);
            }
          );
        });
      };
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/impl/navigation.header.controls",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/navigation.header.controls",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui-ext!csui/widgets/navigation.header/navigation.header.controls",
      "css!csui/widgets/navigation.header/impl/navigation.header.controls",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = x.config(),
        e = new p.Model(m.extend({ location: "left" }, s.logo)),
        r = new p.Collection([]),
        l = new p.Collection(
          [
            {
              id: "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
              sequence: 100,
              parentClassName:
                "csui-progressbar-maximize binf-hidden csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/search/search.view",
              sequence: 100,
              parentClassName: "csui-search csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/help/help.view",
              sequence: 200,
              parentClassName: "csui-help csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/favorites/favorites.view",
              sequence: 300,
              parentClassName: "csui-favorites csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
              sequence: 400,
              parentClassName: "csui-profile csui-icons",
            },
          ],
          { comparator: "sequence" }
        );
      y &&
        m.filter(y, function (i) {
          return (
            (i.id.indexOf("iwatch/") === 0 || i.id.indexOf("conws/") === 0) &&
            l.add(i)
          );
        });
      var f = m.reduce(
        m.values(s.masks || {}),
        function (i, o) {
          return {
            blacklist: i.blacklist.concat(o.blacklist || []),
            whitelist: i.whitelist.concat(o.whitelist || []),
          };
        },
        { blacklist: [], whitelist: [] }
      );
      f = {
        blacklist: m.unique(f.blacklist),
        whitelist: m.unique(f.whitelist),
      };
      function t(i) {
        return (
          !m.contains(f.blacklist, i.id) &&
          (!f.whitelist.length || m.contains(f.whitelist, i.id))
        );
      }
      return (
        r.remove(r.reject(t)),
        l.remove(l.reject(t)),
        { logo: e, leftSide: r, rightSide: l }
      );
    }
  ),
  csui.define(
    "hbs!csui/pages/start/impl/navigationheader/impl/navigationheader",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-global-message"></div>
<nav class="csui-navbar binf-navbar binf-navbar-default zero-gutter" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "mainNavigationAria") ||
                  (e != null ? i(e, "mainNavigationAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "mainNavigationAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 81 },
                      end: { line: 2, column: 103 },
                    },
                  })
                : t)
            ) +
            `">
  <div class="binf-container-fluid">
    <span class="binf-navbar-brand binf-collapse binf-navbar-collapse">        
      <span class="csui-logo">
        <span class="csui-logo-image" role="img" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "productLogoAria") ||
                  (e != null ? i(e, "productLogoAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "productLogoAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 61 },
                      end: { line: 6, column: 80 },
                    },
                  })
                : t)
            ) +
            `"></span>
      </span>
    </span>
    <div class="binf-nav binf-navbar-nav binf-navbar-left"></div>
    <div class="binf-nav binf-navbar-nav binf-navbar-right" ></div>
    <div class="binf-nav binf-navbar-nav csui-navbar-message"></div>
  </div>
</nav>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_pages_start_impl_navigationheader_impl_navigationheader",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/contexts/factories/connector",
      "csui/models/node/node.model",
      "csui/utils/url",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return {
        mixin: function (r) {
          return x.extend(r, {
            output: {},
            BRANDING_CONFIG_STYLESHEET_NAME: "BRANDINGCONFIG_CSS_FILE.css",
            BRANDING_CONFIG: {
              FOLDER_NAME: "Branding Config",
              FOLDER_TYPE_NAME: "Support Asset Image Folder",
              FOLDER_TYPE: 1306,
            },
            SUB_TYPE: 1309,
            IMG_NO_UPLOAD: "No Img Uploaded",
            CSS_NO_UPLOAD: "No style modified",
            SUCCESS: "success",
            ERROR: "error",
            SUCCESS_WITHOUT_CSS: "success without CSS",
            NO_RESULT_FOUND: "no result found",
            brandingStylesheet: `
            .binf-widgets,
            .binf-widgets .csui-navbar.binf-navbar, 
            .binf-widgets.csui-pman-header-config .pman-header-preview-panel,
            .binf-widgets #breadcrumb-wrap .csui-perspective-breadcrumb,
            .binf-widgets #breadcrumb-wrap .breadcrumb-inner.breadcrumb-inner-header,        
            .binf-widgets .csui-perspective-breadcrumb,
            .binf-widgets .csui-image-picker .csui-brand-image-logo {
              background: [CUSTOM_BRANDING_BGCOLOR];
            }
            .binf-widgets .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #content-region, .binf-widgets .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #sidebar-region{
              background: [LANDING_PAGE_BGCOLOR];
            }
            .binf-widgets .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #main{
              background-color: [LANDING_PAGE_BGCOLOR];
            }
        `,
            getSupportAssetVolumeID: function () {
              const f = (this.context || this.options.context).getObject(p),
                t = {
                  url: `${f.getConnectionUrl().getApiBase()}volumes/${
                    this.SUB_TYPE
                  }`,
                };
              return f.makeAjaxCall(t);
            },
            fetchBrandingConfigFolderDetails: function (l, f, t) {
              let i = m.Deferred();
              const n = (this.context || this.options.context).getObject(p),
                u = {
                  url: `${n.getConnectionUrl().getApiBase("v2")}app/container/${
                    l.id
                  }`,
                };
              return (
                n
                  .makeAjaxCall(u)
                  .then((c) => {
                    const d =
                      Array.isArray(c.results.contents) &&
                      c.results.contents.filter(
                        (h) => h.name === this.BRANDING_CONFIG.FOLDER_NAME
                      );
                    if (d.length > 0) {
                      const { size: h, id: k } = d[0];
                      if (h > 0)
                        this.getItemsFromNode(k)
                          .done((C) => {
                            const S = C.results?.contents;
                            this.deleteItemsFromBranding(S, f, t)
                              .done(() => i.resolve(d[0]))
                              .fail((w) => i.reject(w));
                          })
                          .fail((C) => i.reject(C));
                      else return i.resolve(d[0]);
                    } else
                      this.createBrandingConfigFolder(l).done((h) =>
                        i.resolve(h)
                      );
                  })
                  .fail(function (c) {
                    return i.reject(c);
                  }),
                i.promise()
              );
            },
            getItemsFromNode: function (l) {
              const t = (this.context || this.options.context).getObject(p),
                i = {
                  url: `${t
                    .getConnectionUrl()
                    .getApiBase("v2")}app/container/${l}`,
                };
              return t.makeAjaxCall(i);
            },
            getDetailsForBrandingConfig: function () {
              let l = m.Deferred();
              const t = (this.context || this.options.context).getObject(p),
                i = {
                  url: `${t
                    .getConnectionUrl()
                    .getApiBase("v2")}server/settings/branding`,
                };
              return (
                t
                  .makeAjaxCall(i)
                  .then((o) => {
                    if (o?.results?.value)
                      try {
                        const n = o.results.value;
                        return (
                          n.brandLogoUri &&
                            (n.brandLogoUri = `${t
                              .getConnectionUrl()
                              .getOrigin()}${n.brandLogoUri}`),
                          l.resolve({ statusMsg: this.SUCCESS, data: n })
                        );
                      } catch {
                        return l.reject({ statusMsg: this.ERROR });
                      }
                    else return l.reject({ statusMsg: this.ERROR });
                  })
                  .fail(function (o) {
                    return l.reject(o);
                  }),
                l.promise()
              );
            },
            deleteItemsFromBranding: function (l, f, t) {
              let i = m.Deferred();
              if ((l.length === 0 || t) && !f)
                return i.resolve({ statusMsg: "Nothing to be deleted" });
              let o = [],
                n = [];
              const c = (this.context || this.options.context).getObject(p);
              return (
                (n = l.map((d) => d.id)),
                n.forEach((d) => {
                  o.push(i);
                  const h = {
                    method: "DELETE",
                    url: `${c.getConnectionUrl().getApiBase()}nodes/${d}`,
                  };
                  c.makeAjaxCall(h)
                    .then((k) => i.resolve(k))
                    .fail(function (k) {
                      return i.reject(k);
                    });
                }),
                m.whenAll.apply(m, o)
              );
            },
            createBrandingConfigFolder: function ({ id: l, container: f }) {
              const i = (this.context || this.options.context).getObject(p);
              let o = m.Deferred();
              const n = {
                  type: this.BRANDING_CONFIG.FOLDER_TYPE,
                  type_name: this.BRANDING_CONFIG.FOLDER_TYPE_NAME,
                  container: f,
                  name: this.BRANDING_CONFIG.FOLDER_NAME,
                  parent_id: l,
                },
                u = {
                  method: "POST",
                  url: `${i.getConnectionUrl().getApiBase()}nodes`,
                  data: n,
                };
              return (
                i
                  .makeAjaxCall(u)
                  .then((c) => o.resolve(c))
                  .fail(function (c) {
                    return o.reject(c);
                  }),
                o.promise()
              );
            },
            uploadConfigInBrandingFolder: function (l, f) {
              let t = m.Deferred();
              const o = (this.context || this.options.context).getObject(p);
              return !l || !f || !l instanceof File
                ? t.resolve({ statusMsg: this.IMG_NO_UPLOAD })
                : new y({ type: 144 }, { connector: o }).save(
                    {
                      name: l.name,
                      type: 1305,
                      parent_id: f.id,
                      advanced_versioning: !1,
                    },
                    { files: { file: l } }
                  );
            },
            getBlodURL: function (l) {
              return !l || !l instanceof Blob ? void 0 : URL.createObjectURL(l);
            },
            uploadBrandingConfigSettings: function (l) {
              const t = (this.context || this.options.context).getObject(p),
                i = {
                  method: "POST",
                  url: `${t
                    .getConnectionUrl()
                    .getApiBase("v2")}server/settings/branding`,
                  data: { value: JSON.stringify(l) },
                };
              return t.makeAjaxCall(i);
            },
            getNodeDetails: function (l) {
              const t = (this.context || this.options.context).getObject(p),
                i = {
                  url: `${t
                    .getConnectionUrl()
                    .getApiBase("v2")}/nodes/${l}/nodes?fields=properties`,
                };
              return t.makeAjaxCall(i);
            },
            getFileDetails: function (l) {
              const t = (this.context || this.options.context).getObject(p);
              var i = new s(t.connection.url).getCgiScript();
              const n = {
                url: `${i}?func=doc.fetchcsui&nodeid=${l}`,
                dataType: "binary",
              };
              return t.makeAjaxCall(n);
            },
            createStyleSheet: function (l) {
              if (!l) return;
              const { customBrandingBgColor: f, breadcrumbColor: t } = l;
              let i = this.brandingStylesheet.trim();
              const o = new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/);
              o.test(f) &&
                ((i = i.replaceAll("[CUSTOM_BRANDING_BGCOLOR]", f)),
                (i = i.replaceAll("[LANDING_PAGE_BGCOLOR]", f))),
                o.test(f) && (i = i.replaceAll("[BREADCRUMB_COLOR]", t));
              const n = URL.createObjectURL(
                new Blob([i], {
                  type: "text/css",
                  name: this.BRANDING_CONFIG_STYLESHEET_NAME,
                })
              );
              if (!matchMedia("(forced-colors: active)")?.matches) return n;
            },
          });
        },
      };
    }
  ),
  csui.define(
    "csui/utils/cache.assets/cache.assets",
    ["csui/lib/underscore", "csui-ext!csui/utils/cache.assets/cache.assets"],
    function (x, m) {
      let p = [
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/theme_unchecked.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/theme_checked.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_default.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_light.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_dark.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_favorites_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_favorites_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_help_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_help_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_search_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_search_icon.svg",
        },
      ];
      return m && ((m = x.flatten(m)), p.push(...m)), p;
    }
  ),
  csui.define(
    "css!csui/pages/start/impl/navigationheader/impl/navigationheader",
    [],
    function () {}
  ),
  csui.define(
    "csui/pages/start/impl/navigationheader/navigationheader.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/contexts/factories/user",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/widgets/navigation.header/navigation.header.controls",
      "hbs!csui/pages/start/impl/navigationheader/impl/navigationheader",
      "i18n!csui/pages/start/impl/nls/lang",
      "i18n!csui/pages/start/nls/lang",
      "csui/utils/high.contrast/detector!",
      "csui/lib/radio",
      "csui/utils/url",
      "csui/utils/node.links/node.links",
      "csui/utils/base",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
      "csui/utils/commonconfig.util",
      "csui/utils/cache.assets/cache.assets",
      "css!csui/pages/start/impl/navigationheader/impl/navigationheader",
      "csui/lib/jquery.when.all",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v
    ) {
      "use strict";
      var _ = m.config();
      p.defaults(_, { enableMinimiseButtonOnProgressPanel: !0 });
      var T = e.LayoutView.extend({
        template: o,
        regions: { messageRegion: ".csui-navbar-message" },
        ui: {
          navbar: ".csui-navbar",
          branding: ".binf-navbar-brand",
          logo: ".csui-logo-image",
          left: ".binf-navbar-left",
          right: ".binf-navbar-right",
          csuiLogo: ".csui-logo",
        },
        events: {
          "click @ui.csuiLogo": "onClickHomeIcon",
          "keydown @ui.csuiLogo": "onKeydownHomeIcon",
        },
        templateHelpers: function () {
          return {
            mainNavigationAria: n.mainNavigationAria,
            productLogoAria: p.str.sformat(n.productLogoAria, u.ProductName),
          };
        },
        constructor: function (g) {
          console.warn(
            'DEPRECATED: Instead use "smart/controls/app.header/app.header.view".'
          ),
            e.LayoutView.call(this, g),
            this.propagateEventsToRegions(),
            (this.headerConfig = null),
            (this.user = g.user || this.options.context.getModel(l)),
            (this.applicationScope =
              g.applicationScope || this.options.context.getModel(t)),
            (this.brandingConfigData = this.options.context.getModel(S)),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this._applyBrandingStyles
            ),
            this.listenTo(
              this,
              "render:controls",
              this._adjustControls.bind(this)
            ),
            this.listenTo(
              this,
              "processbar:minimize processbar:maximize",
              this._adjustControlsWithAnimation.bind(this)
            ),
            this.listenTo(
              this,
              "before:destroy",
              p.bind(function () {
                y(window).off(
                  "resize." + this.cid,
                  this._adjustControls.bind(this)
                );
              }, this)
            ),
            y(window).on("resize." + this.cid, this._adjustControls.bind(this)),
            this.listenTo(
              this.options.context?.previewBranding,
              "change",
              this._onRenderPage
            ),
            this.listenTo(
              this.options.context?.previewBranding,
              "exit:edit:perspective",
              this._applyBrandingStyles
            ),
            this.listenTo(
              this.options.context,
              "sync error",
              this._toggleVisibility
            ),
            this.listenTo(
              this,
              "before:destroy",
              p.bind(function () {}, this)
            ),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this._applyBrandingStyles
            ),
            Array.isArray(v) && v.length > 0 && this._cacheAssets();
        },
        _onRenderPage: function () {
          if (this.options.isPerspectiveEdit) {
            const g = this.user?.get("headerconfig");
            if (this.headerConfig?.options?.header?.widgets) {
              var a = [];
              p.each(this.headerConfig.options.header.widgets, function (I) {
                var D = { options: I.options, view: I.view };
                a.push(D);
              }),
                (this.headerConfig.options.header.widgets = a);
            }
            (this.headerConfig = p.clone(g)), this.render();
          }
        },
        _applyBrandingStyles: function () {
          if ((this.applyIconTheme(), this.options.isPerspectiveEdit)) {
            const a = this._addBrandingStyling(
                this.options.context?.previewBranding,
                !0
              ),
              g = this.options.context?.previewBranding?.get("brandLogoUri");
            this.loadLogo(g);
            const I = "edit-branding-stylesheet";
            document.getElementById(I)?.remove();
            const D = document.createElement("link");
            (D.id = I),
              (D.rel = "stylesheet"),
              (D.href = a),
              y(".pman-mode-edit").append(D);
          } else {
            const a = this.brandingConfigData?.get("brandLogoUri"),
              g = this.brandingConfigData?.get("brandingCSS");
            this.loadLogo(a), this.loadBrandingCSSFile(g);
          }
        },
        _addBrandingStyling: function (a, g) {
          if (!a) return;
          const I = a.get("brandingSettingCodes");
          return this.createStyleSheet(I, g);
        },
        applyIconTheme: function () {
          const a = this.options.context,
            g =
              a?.previewBranding?.get("brandingSettingCodes")?.iconThemes ??
              a?.navigationHeaderView?.brandingConfigData?.get(
                "brandingSettingCodes"
              )?.iconThemes;
          (this.themeCode = g),
            !g || g === "default"
              ? (this.$el.removeClass("icon_theme_dark"),
                this.$el.removeClass("icon_theme_light"))
              : g === "dark"
              ? (this.$el.removeClass("icon_theme_light"),
                this.$el.addClass("icon_theme_" + g))
              : (this.$el.removeClass("icon_theme_dark"),
                this.$el.addClass("icon_theme_" + g)),
            matchMedia("(forced-colors: active)").matches &&
              this.$el
                .removeClass("icon_theme_dark")
                .removeClass("icon_theme_light");
        },
        _adjustControls: function () {
          for (
            var a = this.el.offsetWidth,
              g = this.el.getElementsByClassName("binf-navbar-left")[0],
              I = 0,
              D = this.el.getElementsByClassName("binf-navbar-right")[0],
              A = 0,
              B = this.el.getElementsByClassName("csui-logo")[0],
              M = i.logo.get("location"),
              E = this.el.getElementsByClassName("csui-logo-" + M)[0],
              P = E && window.getComputedStyle(E).position === "absolute",
              O = M === "left" ? 53 : -240,
              z = B.offsetWidth + O,
              F = 0;
            F < D.childElementCount;
            F++
          )
            A += D.children[F].offsetWidth || 0;
          for (F = 0; F < g.childElementCount; F++)
            I += g.children[F].offsetWidth || 0;
          var U = !(P && M !== "left"
            ? I + z / 2 < a / 2 && A + z / 2 < a / 2
            : a > I + A + z);
          if (
            (U
              ? B.classList.add("binf-logo-hide")
              : z > 40 && B.classList.remove("binf-logo-hide"),
            this.listenTo(
              this,
              "header:control:clicked",
              p.bind(function () {
                this.trigger("control:clicked");
              }, this)
            ),
            this.options.isPerspectiveEdit)
          ) {
            let H = this.$el[0].querySelectorAll('[tabindex="0"]');
            this.$el.find(H).attr("tabindex", "-1");
          }
        },
        _adjustControlsWithAnimation: function () {
          setTimeout(
            p.bind(function () {
              this._adjustControls();
            }, this),
            301
          );
        },
        onRender: function () {
          var a = this.options.context,
            g = this;
          r.setProgresspanelMessageRegionView(this, {
            classes: "csui-global-message",
            enableMinimiseButtonOnProgressPanel:
              _.enableMinimiseButtonOnProgressPanel,
          });
          var I = i.logo.get("location");
          I === "none"
            ? this.ui.logo.addClass("binf-hidden")
            : this.ui.branding.addClass("csui-logo-" + I),
            g.breadCrumbStyles && g.breadCrumbStyles.remove(),
            this._applyBrandingStyles(),
            this._resolveComponents().done(function () {
              g.trigger("before:render:controls", g),
                i.leftSide.each(D.bind(g, g.ui.left)),
                i.rightSide.each(D.bind(g, g.ui.right)),
                g.trigger("render:controls", g),
                g._showSystemMessage();
            });
          function D(A, B) {
            var M = B.get("view");
            if (M) {
              var E = y("<div>").addClass(B.get("parentClassName")).appendTo(A),
                P = g.addRegion(p.uniqueId("csui:navigation.header.control"), {
                  selector: E,
                }),
                O = new M({
                  context: a,
                  parentView: g,
                  themeCode: g.themeCode,
                  highContrast: c,
                });
              P.show(O);
            }
          }
          d.channel("branding:logo").trigger("update:logo");
        },
        loadBrandingCSSFile: function (a) {
          const g = "csuiBrandingCSSURL";
          if ((document.getElementById(g)?.remove(), !a)) return;
          const I = document.createElement("link");
          (I.id = g),
            (I.rel = "stylesheet"),
            (I.href = a),
            document.body.appendChild(I);
        },
        loadLogo: function (a) {
          if (!a) {
            this.ui.logo.removeAttr("style");
            return;
          }
          const g = `background-image: url(${a}); background-size: contain`;
          this.ui.logo.attr("style", g);
        },
        _resolveComponents: function () {
          if (this._controlsResolved) return this._controlsResolved;
          function a(A) {
            var B = y.Deferred();
            return x([A], B.resolve, B.reject), B.promise();
          }
          var g = i.leftSide.models.concat(i.rightSide.models),
            I = g.map(function (A) {
              return a(A.id);
            }),
            D = y.Deferred();
          return (
            y.whenAll.apply(y, I).always(function (A) {
              A.forEach(function (B, M) {
                g[M].set("view", B);
              }),
                D.resolve();
            }),
            (this._controlsResolved = D.promise()),
            this._controlsResolved
          );
        },
        _showSystemMessage: function () {
          const a = localStorage.getItem("shownSystemMsg");
          var g = this;
          a ||
            (localStorage.setItem("shownSystemMsg", !0),
            b.enableFeatureInSmartView() &&
              csui.require(
                [
                  "csui/models/system.messages/system.message.server.adaptor.mixin",
                ],
                function (I) {
                  I.mixin(T.prototype),
                    g.constructor.prototype
                      .makeServerAdaptor(
                        g.options.context?._factories?.connector?.property
                      )
                      .parseResponse(n);
                }
              ));
        },
        addLinkToIcon: function () {
          var a =
              this.options &&
              this.options.context &&
              this.options.context._user &&
              this.options.context._user.connector,
            g = new h((a && a.connection.url) || location.href),
            I = k.getHomeUrl(g);
          return I;
        },
        onClickHomeIcon: function (a) {
          C.isControlClick(a) ||
            (a.preventDefault(), this.applicationScope.set("id", ""));
        },
        onKeydownHomeIcon: function (a) {
          (a.keyCode === 32 || a.keyCode === 13) && this.onClickHomeIcon(a);
        },
        _toggleVisibility: function () {
          if (!this._isRendered) return;
          const a = this.ui.csuiLogo;
          this.applicationScope.id
            ? (a.attr("role", "link"),
              a.attr("data-href", this.addLinkToIcon()),
              this.ui.csuiLogo.css("cursor", "pointer"),
              a.attr("title", n.Home),
              a.attr("aria-label", n.HomeIconAria),
              a.attr("tabindex", "0"))
            : (a.removeAttr("role"),
              a.removeAttr("data-href"),
              this.ui.csuiLogo.css("cursor", "auto"),
              a.removeAttr("title"),
              a.removeAttr("aria-label"),
              a.attr("tabindex", "-1"));
        },
        _cacheAssets: function () {
          const a = this.user.connector?.getConnectionUrl()?.getOrigin(),
            g = this.user.connector?.connection?.supportPath,
            I = g ? a.concat(g) : a;
          v.forEach((D) => {
            const A = document.createElement("link");
            (A.rel = "prefetch"),
              (A.as = D.as),
              (A.href = `${I}/${D.href}`),
              y("head").append(A);
          });
        },
      });
      return p.extend(T.prototype, f), w.mixin(T.prototype), T;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.view",
    [
      "smart/controls/app.header/app.header.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "csui/utils/commonconfig.util",
    ],
    function (x, m, p) {
      "use strict";
      return x.extend({
        onBeforeAttach: function () {
          this._showSystemMessage();
        },
        _showSystemMessage: function () {
          const s = localStorage.getItem("shownSystemMsg"),
            e = this;
          s ||
            (localStorage.setItem("shownSystemMsg", !0),
            p.enableFeatureInSmartView() &&
              csui.require(
                [
                  "csui/models/system.messages/system.message.server.adaptor.mixin",
                ],
                function (r) {
                  r.mixin(x.prototype),
                    x.prototype
                      .makeServerAdaptor(
                        e.options.context?._factories?.connector?.property
                      )
                      .parseResponse(m);
                }
              ));
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/burger.menu/burger.menu",
    [
      "module",
      "nuc/lib/jquery",
      "nuc/lib/underscore",
      "csui-ext!csui/controls/app.header/burger.menu/burger.menu",
    ],
    function (x, m, p, y) {
      "use strict";
      const s = { allowedModules: [], ...x.config() },
        e = (l = []) => {
          const f = s.allowedModules;
          return (
            f.length > 0 && (l = l.filter((t) => f.indexOf(t.moduleName) > -1)),
            l
          );
        };
      return {
        getAllMenuItems: function (l) {
          let f = m.Deferred(),
            t = [],
            i = [],
            o = { groups: [], items: [] };
          return (
            y?.length &&
              y.forEach((n) => {
                t.push(
                  m.when(n(l)).then(function (u) {
                    u.items.length > 0
                      ? ((u.items = e(u.items)), i.push(u))
                      : console.debug("No items are found");
                  })
                );
              }),
            m.whenAll.apply(m, t).then(() => {
              i?.length &&
                i.forEach((n) => {
                  n?.groups?.length &&
                    n.groups.forEach(function (d) {
                      o.groups.some((h) => h.id === d.id) || o.groups.push(d);
                    }),
                    n.items.forEach(function (c) {
                      o.items.some((d) => d.signature === c.signature) ||
                        o.items.push(c);
                    });
                }),
                f.resolve(o);
            }),
            f.promise()
          );
        },
      };
    }
  ),
  csui.define(
    "hbs!csui/widgets/error.global/impl/error.global",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ' aria-describedby="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "msgId") || (e != null ? i(e, "msgId") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "msgId",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 92 },
                      end: { line: 5, column: 101 },
                    },
                  })
                : t)
            ) +
            '" '
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `        <div class='server-error-message-wrapper'>
          <div class='server-error-message horizontal-center-align'>
            <span id="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "msgId") || (e != null ? i(e, "msgId") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "msgId",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 22 },
                      end: { line: 12, column: 31 },
                    },
                  })
                : t)
            ) +
            `" class='csui-acc-focusable'>` +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 60 },
                      end: { line: 12, column: 71 },
                    },
                  })
                : t)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        5: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "        <div class='navigation-control-container' " +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "noHistory") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 20, column: 50 },
                  end: { line: 20, column: 97 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
          <a class='go-back-button circle-border horizontal-center-align' href="#"
            title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 19 },
                      end: { line: 22, column: 34 },
                    },
                  })
                : i)
            ) +
            "' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 48 },
                      end: { line: 22, column: 63 },
                    },
                  })
                : i)
            ) +
            `' class='csui-acc-focusable'>
              <span class='icon icon-back'></span>
          </a>
          <div class='go-back-text button-text horizontal-center-align' title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 79 },
                      end: { line: 25, column: 94 },
                    },
                  })
                : i)
            ) +
            `'>
              <span>` +
            s.escapeExpression(
              ((i =
                (i = o(r, "backText") || (e != null ? o(e, "backText") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backText",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 20 },
                      end: { line: 26, column: 32 },
                    },
                  })
                : i)
            ) +
            `</span>
          </div>
        </div>
        <div class='navigation-control-container'>
          <a class='go-home-button circle-border horizontal-center-align' href="#"
            title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 19 },
                      end: { line: 31, column: 34 },
                    },
                  })
                : i)
            ) +
            "' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 48 },
                      end: { line: 31, column: 63 },
                    },
                  })
                : i)
            ) +
            `' class='csui-acc-focusable'>
              <span class='icon icon-home'></span>
          </a>
          <div class='go-home-text button-text horizontal-center-align' title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 79 },
                      end: { line: 34, column: 94 },
                    },
                  })
                : i)
            ) +
            `'>
              <span>` +
            s.escapeExpression(
              ((i =
                (i = o(r, "homeText") || (e != null ? o(e, "homeText") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeText",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 20 },
                      end: { line: 35, column: 32 },
                    },
                  })
                : i)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        6: function (s, e, r, l, f) {
          return " style='display:none;' ";
        },
        8: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "showCloseButton") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(9, f, 0),
              inverse: s.noop,
              loc: {
                start: { line: 39, column: 8 },
                end: { line: 43, column: 15 },
              },
            }
          )) != null
            ? t
            : "";
        },
        9: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `          <div class='navigation-control-container'>
            <button type="submit" class="close-button highlighted-btn">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "closeText") || (e != null ? i(e, "closeText") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "closeText",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 71 },
                      end: { line: 41, column: 84 },
                    },
                  })
                : t)
            ) +
            `</button>
          </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "<div class='main-area-container' role='region' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "regionAria") || (e != null ? o(e, "regionAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "regionAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 59 },
                      end: { line: 1, column: 73 },
                    },
                  })
                : i)
            ) +
            `'>
  <div class='main-area-group'>
    <div class='error-message-area'>
      <div class='error-message-wrapper'>
        <h2 class='error-message horizontal-center-align' ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "message") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 5, column: 58 },
                  end: { line: 5, column: 110 },
                },
              }
            )) != null
              ? t
              : "") +
            ` >
          <span class='csui-acc-focusable'>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "errorMessage") ||
                  (e != null ? o(e, "errorMessage") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 43 },
                      end: { line: 6, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
        </h2>
      </div>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "message") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 9, column: 6 },
                  end: { line: 15, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>

    <div class='navigation-area horizontal-center-align'>
` +
            ((t = o(r, "unless").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "hideNavigationButtons") : e,
              {
                name: "unless",
                hash: {},
                fn: s.program(5, f, 0),
                inverse: s.program(8, f, 0),
                loc: {
                  start: { line: 19, column: 6 },
                  end: { line: 44, column: 17 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
  </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_error.global_impl_error.global", y), y
      );
    }
  ),
  csui.define("csui/widgets/error.global/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/error.global/impl/nls/root/lang", {
    errorMessage: "There was a problem serving the requested page.",
    backText: "Go back",
    backTooltip: "Navigate back to previous URL",
    homeText: "Home",
    homeTooltip: "Navigate to landing page",
    closeText: "Close",
    closeTooltip: "Close the error page",
    globalErrorRegionAria: "Global error",
  }),
  csui.define(
    "css!csui/widgets/error.global/impl/error.global",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/error.global/error.global.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/global.error",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/error.global/impl/error.global",
      "i18n!csui/widgets/error.global/impl/nls/lang",
      "csui/utils/log",
      "module",
      "css!csui/widgets/error.global/impl/error.global",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i) {
      "use strict";
      t = t(i.id);
      var o = p.ItemView.extend({
        className: "csui-global-error",
        template: l,
        templateHelpers: function () {
          return {
            errorMessage: f.errorMessage,
            backText: f.backText,
            backTooltip: f.backTooltip,
            homeText: f.homeText,
            homeTooltip: f.homeTooltip,
            closeText: f.closeText,
            closeTooltip: f.closeTooltip,
            msgId: x.uniqueId("msg"),
            regionAria: f.globalErrorRegionAria,
            noHistory: this.noHistory,
          };
        },
        TabableRegion: { behaviorClass: r, initialActivationWeight: 100 },
        ui: {
          errorMessage: ".error-message > span",
          closebutton: ".close-button",
        },
        events: {
          keydown: "onKeyInView",
          "click .go-home-button": "onClickHome",
          "click .go-home-text": "onClickHome",
          "click .go-back-button": "onClickBack",
          "click .go-back-text": "onClickBack",
          "click @ui.closebutton": "onClickClose",
        },
        constructor: function (u) {
          if (
            (p.ItemView.prototype.constructor.apply(this, arguments),
            this.model || (this.model = u.context.getModel(s, u)),
            (this.noHistory =
              u.context &&
              u.context.viewStateModel &&
              u.context.viewStateModel.getHistory().length < 1),
            y.isIE11())
          ) {
            var c = this,
              d = function () {
                c.render();
              };
            m(window).on("resize", d),
              this.once("before:destroy", function () {
                m(window).off("resize", d);
              });
          }
        },
        currentlyFocusedElement: function (n) {
          return this.ui.errorMessage;
        },
        onKeyInView: function (n) {
          (n.keyCode === 32 || n.keyCode === 13) &&
            (n.preventDefault(),
            n.stopPropagation(),
            m(n.target).trigger("click"));
        },
        onClickHome: function (n) {
          n.preventDefault(), n.stopPropagation();
          var u = this.options.context,
            c = u && u.viewStateModel,
            d = c && c.get(c.CONSTANTS.START_ID);
          if (d) {
            var h = u.getModel("nextNode");
            h.set("id", d);
          } else {
            var k = u.getModel(e);
            k.set("id", "");
          }
        },
        onClickBack: function (n) {
          n.preventDefault(), n.stopPropagation(), window.history.back();
        },
        onClickClose: function (n) {
          n.preventDefault(), n.stopPropagation(), this.destroy();
        },
      });
      return o;
    }
  ),
  csui.define("css!csui/pages/error.page/impl/error.page", [], function () {}),
  csui.define(
    "csui/pages/error.page/error.page.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/contexts/page/page.context",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/widgets/error.global/error.global.view",
      "csui/utils/url",
      "csui/utils/non-attaching.region/non-attaching.region",
      "css!csui/pages/error.page/impl/error.page",
    ],
    function (x, m, p, y, s, e, r, l) {
      var f = p.ItemView.extend({
        template: !1,
        constructor: function (i) {
          i || (i = {}),
            (i.el = document.body),
            p.ItemView.prototype.constructor.call(this, i),
            this.$el.addClass("binf-widgets csui-error-page-container"),
            (this.context = new y()),
            (this.applicationScope = this.context.getModel(s)),
            this.listenTo(this.applicationScope, "change:id", this._onChangeId),
            (this.globalErrorView = new e({
              model: i.model,
              context: this.context,
            }));
        },
        onRender: function () {
          this.globalErrorView.render(),
            this.$el.empty().append(this.globalErrorView.el),
            setTimeout(
              x.bind(function () {
                var t = new l({ el: this.el });
                t.show(this, { render: !1 });
              }, this)
            );
        },
        _onChangeId: function () {
          location.href = r.combine(
            new r(new r(location.pathname).getCgiScript()),
            "app"
          );
        },
      });
      return f;
    }
  ),
  csui.define("css!csui/pages/start/impl/start.page", [], function () {}),
  csui.define(
    "csui/pages/start/start.page.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/routing",
      "csui/utils/contexts/perspective/perspective.context",
      "csui/utils/contexts/factories/connector",
      "csui/pages/start/perspective.routing",
      "csui/utils/base",
      "csui/pages/start/impl/navigationheader/navigationheader.view",
      "csui/controls/app.header/app.header.view",
      "i18n",
      "csui/controls/app.header/burger.menu/burger.menu",
      "csui/controls/perspective.panel/perspective.panel.view",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/non-emptying.region/non-emptying.region",
      "csui/utils/non-attaching.region/non-attaching.region",
      "csui/utils/page.leaving.blocker",
      "csui/controls/iconpreload/icon.preload.view",
      "csui/pages/error.page/error.page.view",
      "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/namedsessionstorage",
      "i18n!csui/pages/start/impl/nls/lang",
      "csui/utils/commonconfig.util",
      "css!csui/pages/start/impl/start.page",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v,
      _,
      T,
      a,
      g,
      I
    ) {
      "use strict";
      let D = i;
      var A = m.extend(
        {
          useV2AppHeader: !0,
          enableHamburger: !0,
          signInPageUrl: "signin.html",
          redirectToSignInPage: !e.routesWithSlashes(),
        },
        x.config()
      );
      A.useV2AppHeader && (D = o);
      var B = s.ItemView.extend(
        {
          template: !1,
          behaviors: { TabablesBehavior: { behaviorClass: h } },
          constructor: function (E) {
            E || (E = {}),
              (E.el = document.body),
              s.View.prototype.constructor.call(this, E);
            var P = E.context || new r(),
              O = P.getObject(l);
            if (
              ((this.context = P),
              !O.connection.credentials &&
                !O.authenticator.isAuthenticated() &&
                !O.authenticator.syncStorage().isAuthenticated() &&
                !(O.authenticator.interactive && O.authenticator.interactive()))
            ) {
              A.redirectToSignInPage
                ? this._navigateToSignIn()
                : this._showMissingCredentialsError();
              return;
            }
            O.authenticator.on(
              "loggedOut",
              function (U) {
                U.reason === "failed" && this._navigateToSignIn(),
                  localStorage.removeItem("shownSystemMsg"),
                  U.reason === "logged-out" &&
                    P.viewStateModel &&
                    P.viewStateModel.clean();
              },
              this
            ),
              (this.brandingConfig = P.getModel(T)),
              this.loadSupportAssetID();
            let z = {
              context: P,
              signInPageUrl: this.options.signInPageUrl,
              transparent: !0,
              rtl: n.settings.rtl,
              brandingConfig: this.brandingConfig,
              skipLinks: [
                {
                  attributes: {
                    arialabel: g.skipLinkAria,
                    title: g.skipLinkAria,
                    href: "#content",
                    target: "_self",
                    id: "skipHeader",
                  },
                  execute: m.bind(function () {
                    this.navigationHeader?.el
                      ?.querySelector(".smart-application-header")
                      ?.setAttribute("inert", "");
                    const H =
                        "a[href]:not([tabindex='-1']), area[href]:not([tabindex='-1']), input:not([tabindex='-1']), select:not([tabindex='-1']), textarea:not([tabindex='-1']), otc-button:not([tabindex='-1']), button:not([tabindex='-1']), *[tabindex='0'], iframe:not([tabindex='-1']), object:not([tabindex='-1']), embed:not([tabindex='-1'])",
                      N = this.perspectivePanel.el?.querySelectorAll(H),
                      L = Array.from(N).filter(function (j) {
                        return p(j).is(":visible");
                      });
                    L.length > 0 && p(L[0]).trigger("focus");
                  }, this),
                },
              ],
              enableHamburger: A.enableHamburger,
            };
            (this.navigationHeader = new D(z)),
              (P.brandingConfigData = this.brandingConfig),
              this.navigationHeader.on(
                "render",
                m.bind(function () {
                  if (A.useV2AppHeader) {
                    (this.navigationHeader.brandingConfig =
                      this.brandingConfig),
                      (this.navigationHeader.brandingConfigData =
                        this.brandingConfig),
                      this.listenTo(
                        this.brandingConfig,
                        "change:branding",
                        m.bind(this._applyBrandingStyles, this)
                      ),
                      this.listenTo(
                        this.navigationHeader,
                        "request:data",
                        function () {
                          u.getAllMenuItems({ context: P, connector: O }).then(
                            m.bind(function (H) {
                              this.navigationHeader.trigger("sync:data", H);
                            }, this)
                          );
                        }
                      );
                    let U =
                      this.navigationHeader?.skipLinksCollectionView?.el?.querySelector(
                        "#skipHeader"
                      );
                    U &&
                      U?.addEventListener(
                        "blur",
                        m.bind(function (H) {
                          this.navigationHeader?.el
                            ?.querySelector(".smart-application-header")
                            ?.removeAttribute("inert");
                        }, this)
                      ),
                      this.listenTo(
                        this.navigationHeader,
                        "process:left:menu:item",
                        m.bind(function (H) {
                          let N = H.get("execute");
                          m.isFunction(N) &&
                            N({ context: this.context, menuItem: H });
                        }, this)
                      );
                  }
                }, this)
              ),
              (this.context = P),
              (this.context.navigationHeaderView = this.navigationHeader),
              (this.perspectivePanel = new c({ context: P })),
              this.listenTo(
                this.perspectivePanel,
                "before:start:perspective:loading",
                function () {
                  this.el.classList.add("mouse-blocked");
                }
              ).listenTo(
                this.perspectivePanel,
                "after:finish:perspective:loading",
                function () {
                  this.el.classList.remove("mouse-blocked"),
                    this.navigationHeader.el.classList.remove(
                      "smart-app-header-hide"
                    );
                }
              ),
              this.options.applyFastTheme &&
                this.perspectivePanel &&
                (document.body.classList.add("csui-pre-loading"),
                I.enableSideBar() &&
                  document.body.classList.add("csui-sidebar-enabled"),
                this.listenToOnce(
                  this.perspectivePanel,
                  "before:start:perspective:loading",
                  function () {}
                ),
                this.listenToOnce(
                  this.perspectivePanel,
                  "after:finish:perspective:loading",
                  function () {
                    var U = this.options.preLoaderEle || "#csui-pre-loader";
                    if (
                      (p("body > " + U).remove(),
                      document.body.classList.remove("csui-pre-loading"),
                      this.context?._applicationScope?.get("id") === "" &&
                        !this.navigationHeader.el.querySelector(
                          "otc-skiplinks"
                        ))
                    ) {
                      let H =
                          this.navigationHeader.el.querySelectorAll(
                            "[tabindex='0']"
                          ),
                        N = m.filter(H, function (V) {
                          return p(V).is(":visible");
                        });
                      p(N[0]).trigger("focus");
                    }
                  }
                )),
              this.propagateEventsToViews(
                this.navigationHeader,
                this.perspectivePanel
              );
            var F = f.getInstance({ context: P, urlCanChange: !0 });
            F.start(),
              this.$el.addClass("binf-widgets"),
              t.isAppleMobile() && this.$el.addClass("csui-on-ipad"),
              t.isIOSBrowser() && this.$el.addClass("csui-on-macintosh"),
              csui.require(
                ["csui/utils/accessibility"],
                function (U) {
                  U.isAccessibleMode() && this.$el.addClass("accessibility");
                }.bind(this)
              ),
              p(window).on("unload", function () {});
          },
          _applyBrandingStyles: function () {
            let M = this.navigationHeader;
            if (M.options.isPerspectiveEdit) {
              const E = this._addBrandingStyling(
                  M.options.context?.previewBranding,
                  !0
                ),
                P = "edit-branding-stylesheet";
              document.getElementById(P)?.remove();
              const O = document.createElement("link");
              (O.id = P),
                (O.rel = "stylesheet"),
                (O.href = E),
                p(".pman-mode-edit").append(O);
            } else {
              const E = M.brandingConfigData?.get("brandingCSS");
              this.loadBrandingCSSFile(E);
            }
          },
          loadBrandingCSSFile: function (M) {
            const E = "csuiBrandingCSSURL";
            if ((document.getElementById(E)?.remove(), !M)) return;
            const P = document.createElement("link");
            (P.id = E),
              (P.rel = "stylesheet"),
              (P.href = M),
              document.body.appendChild(P);
          },
          _addBrandingStyling: function (M, E) {
            if (!M) return;
            const P = M.get("brandingSettingCodes");
            return this.createStyleSheet(P, E);
          },
          loadSupportAssetID: function () {
            const M = p.Deferred();
            return (
              this.getDetailsForBrandingConfig()
                .done((E) => {
                  const P = E?.data?.brandingSettingCodes;
                  if (P) {
                    const O = this.createStyleSheet(P);
                    (E.data.brandingCSS = O ?? ""),
                      (E.data.tempBrandingCSS = O ?? "");
                  }
                  return (
                    (E.data.logoSrc = E.data.brandLogoUri),
                    this.brandingConfig.set(E.data),
                    this.brandingConfig.trigger("change:branding"),
                    M.resolve("Success")
                  );
                })
                .fail((E) => M.reject(E)),
              M.promise()
            );
          },
          onRender: function () {
            if (this._redirecting) return this;
            b.ensureOnThePage(),
              A?.useV2AppHeader &&
                this.navigationHeader.el.classList.add("smart-app-header-hide"),
              this._appendView(this.navigationHeader),
              this._appendView(this.perspectivePanel),
              this.$el.children(".cs-perspective-panel").attr("role", "main"),
              setTimeout(
                m.bind(function () {
                  var M = new S({ el: this.el });
                  M.show(this, { render: !1 });
                }, this)
              ),
              this.$el.on("globalmessage.shown", function (M, E) {
                var P = new k(E.options, E);
              });
          },
          onBeforeDestroy: function () {
            this.navigationHeader && this.navigationHeader.destroy(),
              this.perspectivePanel && this.perspectivePanel.destroy();
          },
          _appendView: function (M) {
            var E = new C({ el: this.el });
            E.show(M);
          },
          _navigateToSignIn: function () {
            if (!A.redirectToSignInPage) w.forceDisable(), location.reload();
            else {
              var M = this.options.signInPageUrl || A.signInPageUrl,
                E = location.search;
              (E += E ? "&" : "?"),
                (E += "nextUrl=" + encodeURIComponent(location.pathname)),
                (location.href = M + E + location.hash);
            }
            this._redirecting = !0;
          },
          _showMissingCredentialsError: function () {
            var M = new y.Model({
                message:
                  "The StartPageView was created without providing valid authentication data.",
                hideNavigationButtons: !0,
                errorCode: 401,
                showLogout: !1,
              }),
              E = new v({ model: M });
            E.render();
          },
        },
        {
          useV2AppHeader: A.useV2AppHeader ?? !1,
          enableHamburger: A.enableHamburger ?? !1,
        }
      );
      return m.extend(B.prototype, d), _.mixin(B.prototype), B;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/impl/nls/root/localized.strings",
    { HelpIconTitle: "Help", HelpIconAria: "Help pages, opens in new window" }
  ),
  csui.define(
    "csui/utils/context.help/context.help.ids",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/models/mixins/rules.matching/rules.matching.mixin",
      "csui-ext!csui/utils/context.help/context.help.ids",
    ],
    function (x, m, p, y) {
      var s = m.Model.extend({
        defaults: { sequence: 100, important: !1, module: null },
        constructor: function (f, t) {
          m.Model.prototype.constructor.apply(this, arguments),
            this.makeRulesMatching(t);
        },
      });
      p.mixin(s.prototype);
      var e = m.Collection.extend({
          model: s,
          comparator: "sequence",
          constructor: function (f, t) {
            m.Collection.prototype.constructor.apply(this, arguments);
          },
          findByApplicationScope: function (l) {
            return this.find(function (f) {
              return f.matchRules(l, f.attributes);
            });
          },
        }),
        r = new e([
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.getModel("applicationScope").id === "properties" &&
                l.context.viewStateModel &&
                l.context.viewStateModel.get("state").dropdown === "versions"
              );
            },
            contextHelpId: "qs-versionpg-bg",
          },
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.getModel("applicationScope").id === "properties" &&
                l.context.viewStateModel &&
                l.context.viewStateModel.get("state").dropdown === "audit"
              );
            },
            contextHelpId: "qs-audithistory-bg",
          },
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.getModel("applicationScope").id === "node" &&
                l.context.getModel("node").get("type") === 298
              );
            },
            contextHelpId: "qs-addtocollection-bg",
          },
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.getModel("applicationScope").id === "node" &&
                l.context.getModel("node").get("type") === 136
              );
            },
            contextHelpId: "compound-documents-so",
          },
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.getModel("applicationScope").id === "node" &&
                l.context.getModel("node").get("type") === 751
              );
            },
            contextHelpId: "qs-itemtypes-bg",
          },
          {
            sequence: 50,
            decides: function (l) {
              return (
                l.context.viewStateModel.get("session_state") &&
                l.context.viewStateModel.get("session_state").permissions
              );
            },
            contextHelpId: "qs-permissions-bg",
          },
        ]);
      return (
        r.map((l) => (l.helpDocId = "cssui240400-h-ugd")),
        y && r.add(x.flatten(y, !0)),
        r
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/help/impl/help",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return "icon-help-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="icon-help ' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 22 },
                  end: { line: 1, column: 64 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 82 },
                    },
                  })
                : i)
            ) +
            '"></div>'
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_help_impl_help",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/help.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n!csui/widgets/navigation.header/controls/help/impl/nls/localized.strings",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/context.help/context.help.ids",
      "csui/models/server.module/server.module.collection",
      "csui/lib/othelp",
      "hbs!csui/widgets/navigation.header/controls/help/impl/help",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o) {
      "use strict";
      var n =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/pages/start/impl/navigationheader/navigationheader.view"
        ] || {};
      m.extend(n, x.config()),
        n.help || (n.help = {}),
        m.defaults(n.help, {
          language: r.settings.locale.replace(/[-_]\w+$/, ""),
          preserve: !0,
        }),
        n.help.urlRoot === "" && (n.help.urlRoot = void 0),
        n.help.tenant === "" && (n.help.tenant = void 0),
        n.help.type === "" && (n.help.type = void 0);
      var u = y.ItemView.extend({
        tagName: "a",
        attributes: {
          href: "#",
          title: e.HelpIconTitle,
          "aria-label": e.HelpIconAria,
        },
        template: o,
        templateHelpers: function () {
          return {
            title: e.HelpIconTitle,
            highContrast: this.options.highContrast === 2,
          };
        },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (d) {
          y.ItemView.call(this, d),
            this.listenTo(this, "click:help", this._onClick);
        },
        onShow: function () {
          var c = this;
          this.$el.on("click", function (d) {
            s.isControlClick(d) || c.triggerMethod("click:help");
          }),
            this.$el.on("keydown", function (d) {
              d.keyCode === 32 &&
                (d.preventDefault(), c.triggerMethod("click:help"));
            });
        },
        _onClick: function (c) {
          const d = new t(),
            h = this.options.context,
            k =
              typeof c == "string" || c instanceof String
                ? c
                : h._applicationScope.get("id");
          var C = f.findByApplicationScope({ context: h });
          let S, w;
          C &&
            ((S = C.get("contextHelpId")),
            (w = C.get("helpDocId")),
            (S = typeof S == "function" ? S({ context: h }) : S)),
            d.fetch().then(function () {
              var b,
                v,
                _,
                T,
                a,
                g = [];
              (b = d.filter(function (I) {
                return !!I.get("helpDocId");
              })),
                (v = new i({ urlRoot: n.help.urlRoot })),
                (_ = { preserve: n.help.preserve, documents: [] }),
                m.each(b, function (I) {
                  var D = I.get("helpDocId");
                  g[D.match(/[^\d]+|\d+/g)[0]]
                    ? g[D.match(/[^\d]+|\d+/g)[0]].push(I)
                    : ((g[D.match(/[^\d]+|\d+/g)[0]] = []),
                      (g[D.match(/[^\d]+|\d+/g)[0]][0] = I));
                }),
                Object.keys(g).forEach(function (I) {
                  var D,
                    A = [],
                    B = [];
                  m.each(g[I], function (E) {
                    let P;
                    E.get("contextualHelp") && (D = E.get("contextualHelp")),
                      C && S && !w ? (P = S) : !P && D && k && !S && (P = D[k]);
                    var O = E.get("helpDocId"),
                      z = E.get("helpDocId").lastIndexOf("-"),
                      F = E.get("helpDocId").substring(z + 1);
                    B[F]
                      ? B[F].push({ helpDocId: O, topicId: P })
                      : ((B[F] = []), (B[F][0] = { helpDocId: O, topicId: P }));
                  });
                  var M = 0;
                  Object.keys(B).forEach(function (E) {
                    A[E] = m
                      .sortBy(B[E], function (P) {
                        return parseInt(P.helpDocId.match(/[^\d]+|\d+/g)[1]);
                      })
                      .reverse();
                  }),
                    Object.keys(A).forEach(function (E) {
                      for (var P = 0; P < A[E].length; P++)
                        if (A[E][P].topicId) {
                          M = P;
                          break;
                        }
                      _.documents.push({
                        module: A[E][M].helpDocId,
                        topic: A[E][M].topicId,
                      });
                    });
                }),
                m.each(_.documents, function (I, D) {
                  I.module === w
                    ? ((I.topic = S), (I.active = !0))
                    : I.topic && (I.active = !0),
                    I.module.match(/[^\d]+|\d+/g)[0] === "cssui" &&
                      I.topic === void 0 &&
                      (I.topic = "sui-overview-bg");
                }),
                (T = v.buildHelpUrl(n.help.language, _, {
                  tenant: n.help.tenant,
                  type: n.help.type,
                  options: { search: "allModules" },
                })),
                (a = window.open(T, "_blank")),
                a.focus();
            });
        },
      });
      return u;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/impl/nls/root/localized.strings",
    { HomeIconTitle: "Home", HomeIconAria: "Home page" }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/home/impl/home",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return "csui-icon-home-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="csui-icon-home ' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 27 },
                  end: { line: 1, column: 74 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 83 },
                      end: { line: 1, column: 92 },
                    },
                  })
                : i)
            ) +
            '"></div>'
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_home_impl_home",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/home.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/base",
      "i18n!csui/widgets/navigation.header/controls/home/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/node.links/node.links",
      "hbs!csui/widgets/navigation.header/controls/home/impl/home",
    ],
    function (x, m, p, y, s, e, r, l, f, t) {
      "use strict";
      var i = p.ItemView.extend({
        tagName: "a",
        className: "csui-home binf-hidden",
        attributes: {
          href: "",
          title: e.HomeIconTitle,
          "aria-label": e.HomeIconAria,
        },
        events: { click: "onClickHomeIcon", keydown: "onKeydownHomeIcon" },
        template: t,
        templateHelpers: function () {
          return {
            title: e.HomeIconTitle,
            highContrast: this.options.highContrast === 2,
          };
        },
        behaviors: { TabableRegion: { behaviorClass: r } },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (n) {
          p.ItemView.call(this, n),
            this.listenTo(n.context, "sync error", this._toggleVisibility),
            (this.applicationScope = n.context.getModel(l));
        },
        onRender: function () {
          var o =
              this.options &&
              this.options.context &&
              this.options.context._user &&
              this.options.context._user.connector,
            n = new y((o && o.connection.url) || location.href),
            u = f.getHomeUrl(n);
          this.$el.attr("href", u);
        },
        onClickHomeIcon: function (o) {
          s.isControlClick(o) ||
            (o.preventDefault(), this.applicationScope.set("id", ""));
        },
        onKeydownHomeIcon: function (o) {
          o.keyCode === 32 && this.onClickHomeIcon(o);
        },
        _toggleVisibility: function () {
          this._isRendered &&
            (this.applicationScope.id
              ? this.$el.removeClass("binf-hidden")
              : this.$el.addClass("binf-hidden"));
        },
      });
      return i;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/root/localized.strings",
    { ShowBreadcrumbs: "Show Breadcrumbs", HideBreadcrumbs: "Hide Breadcrumbs" }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-button-icon csui-breadcrumb-caret-type ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "breadcrumbsCaretName") ||
                  (e != null ? i(e, "breadcrumbsCaretName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "breadcrumbsCaretName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 57 },
                      end: { line: 1, column: 81 },
                    },
                  })
                : t)
            ) +
            `"></span>
<span class="csui-breadcrumb-btn-innertext">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "breadcrumbsText") ||
                  (e != null ? i(e, "breadcrumbsText") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "breadcrumbsText",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 44 },
                      end: { line: 2, column: 63 },
                    },
                  })
                : t)
            ) +
            "</span>"
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_breadcrumbs_impl_breadcrumbs",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/contexts/factories/ancestors",
      "csui/utils/contexts/factories/application.scope.factory",
      "hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
      "css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    ],
    function (x, m, p, y, s, e, r, l) {
      "use strict";
      var f = p.ItemView.extend({
        tagName: "button",
        attributes: { type: "button" },
        className: "breadcrumbs-handle binf-btn",
        ui: {
          breadcrumbsTextContainer: ".csui-breadcrumb-btn-innertext",
          breadcrumbsCaretContainer: ".csui-breadcrumb-caret-type",
        },
        serializeData: function () {
          var t = !!this.applicationScope.get("breadcrumbsVisible"),
            i = {
              breadcrumbsText: y.ShowBreadcrumbs,
              breadcrumbsCaretName:
                this.options.highContrast === 2
                  ? "icon-expandArrowDownWhite-black"
                  : "icon-expandArrowDownWhite",
            };
          return (
            t &&
              (i = {
                breadcrumbsText: y.HideBreadcrumbs,
                breadcrumbsCaretName:
                  this.options.highContrast === 2
                    ? "icon-expandArrowUpWhite-black"
                    : "icon-expandArrowUpWhite",
              }),
            i
          );
        },
        template: l,
        events: { keydown: "onKeyInView", click: "_toggleBreadCrumbs" },
        behaviors: { TabableRegion: { behaviorClass: s } },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onRender: function () {
          matchMedia &&
            ((this._mq = window.matchMedia("(max-width: 1124px)")),
            this._mq.addListener(x.bind(this._windowsWidthChange, this)),
            this._windowsWidthChange(this._mq));
        },
        constructor: function (i) {
          p.ItemView.call(this, i),
            (this.applicationScope = i.context.getModel(r)),
            this.stopListening(
              this.applicationScope,
              "change:breadcrumbsVisible"
            )
              .listenTo(
                this.applicationScope,
                "change:breadcrumbsVisible",
                this._breadcrumbVisibilityChanged
              )
              .listenTo(
                this.applicationScope,
                "change:breadcrumbsVisible",
                this._breadcrumbUpdateText
              ),
            this.stopListening(
              this.applicationScope,
              "change:breadcrumbsAvailable"
            ).listenTo(
              this.applicationScope,
              "change:breadcrumbsAvailable",
              this._breadcrumbAvailabilityChanged
            ),
            this.stopListening(
              this.applicationScope,
              "change:hideToggleButton"
            ).listenTo(
              this.applicationScope,
              "change:hideToggleButton",
              this._hideToggleButton
            ),
            this._breadcrumbVisibilityChanged(),
            this._breadcrumbAvailabilityChanged();
        },
        _breadcrumbVisibilityChanged: function () {
          (this._breadcrumbsVisible =
            this.applicationScope.get("breadcrumbsVisible")),
            this._breadcrumbsVisible
              ? (this.$el.removeClass("csui-breadcrumbs-hidden"),
                this.triggerMethod("refresh:tabindexes"))
              : this.$el.addClass("csui-breadcrumbs-hidden");
        },
        _hideToggleButton: function (t) {
          var i = !!t.get("hideToggleButton"),
            o = this.$el.closest(".tile-breadcrumb");
          o.length && o[i ? "addClass" : "removeClass"]("binf-hidden");
        },
        _breadcrumbAvailabilityChanged: function () {
          (this._breadcrumbsAvailable = this.applicationScope.get(
            "breadcrumbsAvailable"
          )),
            this._breadcrumbsAvailable
              ? (this.$el.removeClass("csui-breadcrumbs-not-available"),
                this.triggerMethod("refresh:tabindexes"))
              : this.$el.addClass("csui-breadcrumbs-not-available");
        },
        _breadcrumbUpdateText: function () {
          this.applicationScope.get("breadcrumbsVisible")
            ? (this.$el.attr("aria-label", y.HideBreadcrumbs),
              this.options.highContrast === 2
                ? this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowDownWhite-black")
                    .addClass("icon-expandArrowUpWhite-black")
                : this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowDownWhite")
                    .addClass("icon-expandArrowUpWhite"),
              this.ui.breadcrumbsTextContainer.text(y.HideBreadcrumbs))
            : (this.$el.attr("aria-label", y.ShowBreadcrumbs),
              this.options.highContrast === 2
                ? this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowUpWhite-black")
                    .addClass("icon-expandArrowDownWhite-black")
                : this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowUpWhite")
                    .addClass("icon-expandArrowDownWhite"),
              this.ui.breadcrumbsTextContainer.text(y.ShowBreadcrumbs));
        },
        _showBreadcrumbs: function () {
          this.applicationScope.set("breadcrumbsVisible", !0);
        },
        _hideBreadcrumbs: function () {
          this.applicationScope.set("breadcrumbsVisible", !1);
        },
        _toggleBreadCrumbs: function () {
          this.applicationScope.set(
            "breadcrumbsVisible",
            !this._breadcrumbsVisible
          );
        },
        _windowsWidthChange: function (t) {
          t.matches
            ? ((this._previousBreadcrumbState =
                this.applicationScope.get("breadcrumbsVisible")),
              this.applicationScope.set("breadcrumbsVisible", !0))
            : this.applicationScope.set(
                "breadcrumbsVisible",
                this._previousBreadcrumbState
              );
        },
        onKeyInView: function (t) {
          switch (t.keyCode) {
            case 9:
              this.ignoreFocusBlur = !1;
              break;
            case 13:
            case 32:
              (this.ignoreFocusBlur = !1),
                t.preventDefault(),
                this.applicationScope.set(
                  "breadcrumbsVisible",
                  !this._breadcrumbsVisible
                );
              break;
          }
        },
      });
      return f;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.slices/impl/search.slices",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<label class="csui-search-popover-row-body" data-sliceid="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 58 },
                      end: { line: 1, column: 69 },
                    },
                  })
                : t)
            ) +
            `">
    <input type="radio" class="csui-slice-option" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 64 },
                      end: { line: 2, column: 75 },
                    },
                  })
                : t)
            ) +
            '" name="slice" value="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "sliceDisplayName") ||
                  (e != null ? i(e, "sliceDisplayName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceDisplayName",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 97 },
                      end: { line: 2, column: 119 },
                    },
                  })
                : t)
            ) +
            `">
        <span class="csui-search-popover-checked" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 64 },
                      end: { line: 3, column: 75 },
                    },
                  })
                : t)
            ) +
            `"></span>
        <span class="csui-search-popover-label" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 62 },
                      end: { line: 4, column: 73 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "sliceDisplayName") ||
                  (e != null ? i(e, "sliceDisplayName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceDisplayName",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 75 },
                      end: { line: 4, column: 97 },
                    },
                  })
                : t)
            ) +
            `</span>
</label>`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_search.slices_impl_search.slices", y), y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.slices/search.slices.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "hbs!csui/widgets/search.slices/impl/search.slices",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.View.extend({
        className: "csui-search-popover-row",
        template: y,
        attributes: function () {
          return {
            id: this.model.get("sliceId"),
            title: this.model.get("sliceTooltip"),
            "aria-label": this.model.get("sliceDisplayName"),
            tabindex: "-1",
          };
        },
        templateContext: function () {
          var e = this.model && this.model.get("sliceDisplayName"),
            r = this.model && this.model.get("sliceId");
          return { sliceDisplayName: e, sliceId: r };
        },
        events: {
          "click .csui-search-popover-row-body": "setSlices",
          "keydown .csui-search-popover-row-body": "accessibility",
          "keyup .csui-search-popover-row-body": "keyUpHandler",
        },
        constructor: function (r) {
          r || (r = {}),
            (this.options = r),
            p.View.prototype.constructor.call(this, r);
        },
        setSlices: function (e) {
          e.preventDefault(), e.stopPropagation();
          var r = this.model.get("sliceId"),
            l = this.$el.find(".icon-listview-checkmark").length;
          (this.options.originatingView.options.sliceString = ""),
            this.options.parentView.removePreviousSelection(),
            l
              ? this.$el.find(".csui-slice-option").prop("checked", !1)
              : (this.$el
                  .find(".csui-search-popover-checked")
                  .addClass("icon-listview-checkmark"),
                (this.options.originatingView.options.sliceString =
                  "{" + r + "}"),
                this.$el.find(".csui-slice-option").prop("checked", !0)),
            this.options.originatingView.namedLocalStorage.set(
              "selectedSlice",
              this.options.originatingView.options.sliceString
            ),
            (this.options.originatingView.options.model.attributes.slice =
              this.options.originatingView.options.sliceString);
        },
        accessibility: function (e) {
          switch (e.keyCode) {
            case 9:
              e.shiftKey
                ? this.options.originatingView.$el.find(
                    ".csui-selected-checkbox"
                  ).length
                  ? (this.options.originatingView.$el
                      .find(".csui-selected-checkbox")
                      .addClass("active"),
                    this.options.originatingView.$el
                      .find('.csui-selected-checkbox input[type="checkbox"]')[0]
                      .focus())
                  : this.options.originatingView.ui.input[0].focus()
                : this.options.originatingView.$el
                    .find(".csui-slices-more")
                    .hasClass("binf-hidden") ||
                  !this.options.originatingView.$el.find(".csui-slices-more")
                    .length
                ? this.options.originatingView.searchFormsContainerView.$el.find(
                    ".csui-searchforms-popover-row"
                  ).length
                  ? this.options.originatingView.searchFormsContainerView.$el
                      .find(".csui-searchforms-popover-row")[0]
                      .focus()
                  : m(
                      this.options.originatingView.searchFormsContainerView.$el.find(
                        ".csui-searchforms-show-more"
                      )[0]
                    ).focus()
                : this.options.originatingView.$el
                    .find(".csui-slices-more")[0]
                    .focus(),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .removeClass("active");
              break;
            case 38:
              if (
                (this.$el
                  .find(".csui-search-popover-row-body")
                  .removeClass("active"),
                this.$el.prev().length)
              )
                this.$el
                  .prev()
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                  this.$el
                    .prev()
                    .find(
                      '.csui-search-popover-row-body input[type="radio"]'
                    )[0]
                    .focus();
              else {
                var r = this.options.parentView.$el.find(
                  ".csui-search-popover-row-body"
                );
                m(r[r.length - 1]).addClass("active"),
                  m(r[r.length - 1])
                    .find('input[type="radio"]')[0]
                    .focus();
              }
              break;
            case 40:
              this.$el
                .find(".csui-search-popover-row-body")
                .removeClass("active"),
                this.$el.next().length
                  ? (this.$el
                      .next()
                      .find(".csui-search-popover-row-body")
                      .addClass("active"),
                    this.$el
                      .next()
                      .find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                      .focus())
                  : (m(
                      this.options.parentView.$el.find(
                        ".csui-search-popover-row-body"
                      )[0]
                    ).addClass("active"),
                    m(
                      this.options.parentView.$el.find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                    )[0].focus());
              break;
            case 32:
              this.setSlices(e),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                this.$el
                  .find('.csui-search-popover-row-body input[type="radio"]')[0]
                  .focus();
              break;
            case 27:
              this.$el.removeClass("active"),
                this.options.originatingView.options.data.showOptionsDropDown &&
                  this.options.originatingView.hideSearchOptionsDropDown();
              break;
            case 13:
              this.setSlices(e),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                this.$el
                  .find('.csui-search-popover-row-body input[type="radio"]')[0]
                  .focus();
              break;
          }
          e.preventDefault();
        },
        keyUpHandler: function (e) {
          var r = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
          e.keyCode == 32 && r && (e.stopPropagation(), e.preventDefault());
        },
      });
      return s;
    }
  ),
  csui.define(
    "csui/widgets/search.slices/search.slices.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "csui/widgets/search.slices/search.slices.item.view",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.CollectionView.extend({
        className: "csui-search-slice-container",
        childView: y,
        childViewOptions: function () {
          return {
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            parentView: this,
          };
        },
        constructor: function (r) {
          r || (r = {}),
            (this.options = r),
            (this.collection = r.collection),
            (this.originatingView = r.originatingView),
            p.CollectionView.prototype.constructor.apply(this, arguments);
        },
        removePreviousSelection: function () {
          var e = this.$el.find(".csui-search-popover-checked");
          m(e).removeClass("icon-listview-checkmark"),
            this.$el.find(".active").removeClass("active");
        },
        getSelectedSlice: function () {
          !this.options.originatingView.options.sliceString &&
            this.options.originatingView.options.model &&
            this.options.originatingView.options.model.get("slice") &&
            (this.options.originatingView.options.sliceString =
              this.options.originatingView.options.model.get("slice")),
            this.$el
              .find(".csui-search-popover-checked")
              .removeClass("icon-listview-checkmark"),
            this._setSliceValue(
              this.options.originatingView.options.sliceString
            );
        },
        _setSliceValue: function (e) {
          (e =
            e ||
            this.options.originatingView.namedLocalStorage.get(
              "selectedSlice"
            )),
            e &&
              e !== "{}" &&
              (this.$el
                .find("#" + e.substring(1, e.length - 1))
                .find(".csui-search-popover-checked")
                .addClass("icon-listview-checkmark"),
              this.$el
                .find("#" + e.substring(1, e.length - 1))
                .find(".csui-slice-option")
                .prop("checked", !0));
        },
      });
      return s;
    }
  ),
  csui.define("csui/widgets/search.forms/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/search.forms/impl/nls/root/lang", {
    personalSearchFormsLabel: "My search forms",
    systemSearchFormsLabel: "Shared search forms",
    recentSearchFormsLabel: "Recent search forms",
    searchFormLabel: "Search forms",
    search: "Search",
    loading: "Loading...",
    showMore: "More search forms",
    openSearchFormsAria: "Open search forms dialog",
    showMoreSearchFormsAria: "Open more search forms dialog",
    searchFormTooltip: "Open: {0}",
    btnBack: "Back",
    btnBackAriaLabel: "Back to search forms",
    btnSearch: "Search",
  }),
  csui.define(
    "css!csui/widgets/search.forms/impl/search.forms",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/utils/non-emptying.region/non-emptying.region",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = p.View.extend({
        className: "csui-search-form-container",
        constructor: function (f) {
          f || (f = {}),
            (this.models = new y.Collection()),
            p.View.prototype.constructor.call(this, f);
        },
        findButton: function (l, f, t) {
          var i = x.find(l, function (o) {
            return o.get("btnType") === f;
          });
          i && i.set("hidden", t);
        },
        openFormInSidepanel: function (l, f) {
          var t = m.Deferred(),
            i = this;
          return (
            csui.require(
              [
                "csui/controls/side.panel/side.panel.view",
                "csui/widgets/search.forms/search.form.view",
                "csui/widgets/search.forms/search.forms.container.view",
                "i18n",
              ],
              function (o, n, u, c) {
                var d;
                const h = c && c.settings?.rtl;
                if (f) {
                  var k = l.get("schema");
                  (d = k.title ? k.title : l.get("name")),
                    (i.customSearchForm = new n({
                      model: l,
                      searchFormId: f,
                      hideSearchButton: !0,
                      showInSearchResultsNewPerspective: !0,
                      context: i.options.options.context,
                    })),
                    i.sidePanel &&
                      (i.sidePanel.options.slides[0].content =
                        i.customSearchForm);
                } else
                  i.searchFormsContainerView ||
                    (i.searchFormsContainerView = new u({
                      searchFormsList: l,
                      originatingView: i,
                    })),
                    (d = e.searchFormLabel),
                    i.sidePanel &&
                      (i.sidePanel.options.slides[0].content =
                        i.searchFormsContainerView),
                    i.searchFormsContainerView.$el.removeClass("binf-hidden");
                if (!i.sidePanel || (i.sidePanel && i.sidePanel.isDestroyed)) {
                  var C = new o({
                    slides: [
                      {
                        title: d,
                        content: f
                          ? i.customSearchForm
                          : i.searchFormsContainerView,
                        footer: {
                          leftButtons: [
                            {
                              type: "action",
                              v2Icon: {
                                iconName: h
                                  ? "csui_action_back_rtl32"
                                  : "csui_action_back32",
                                states: !0,
                              },
                              btnType: "back",
                              className:
                                "cs-go-back arrow_back csui-has-v2icon",
                              attributes: {
                                title: e.btnBack,
                                "aria-label": e.btnBackAriaLabel,
                              },
                              disabled:
                                !!i.options.originatingView.hideBackButton,
                            },
                          ],
                          rightButtons: [
                            {
                              label: e.search,
                              type: "action",
                              id: "search-btn",
                              btnType: "search",
                              attributes: {
                                title: e.btnSearch,
                                "aria-label": e.btnSearch,
                              },
                              className:
                                "binf-btn binf-btn-primary csui-custom-search-form-submit cs-search",
                              disabled: !1,
                            },
                          ],
                        },
                      },
                    ],
                    sidePanelClassName: "cvs-in-sidepanel",
                  });
                  (i.sidePanel = C), C.show();
                } else if (i.sidePanel.$el.is(":visible")) {
                  var S = new s({ el: i.sidePanel.ui.body });
                  (i.sidePanel.slides[0].title = d),
                    f
                      ? (S.$el
                          .find(".csui-search-forms-list")
                          .addClass("binf-hidden"),
                        S.$el
                          .find(".csui-search-form-collection")
                          .addClass("binf-hidden"),
                        S.$el
                          .find(".csui-custom-view-search")
                          .removeClass("binf-hidden"))
                      : (S.$el
                          .find(".csui-search-forms-list")
                          .removeClass("binf-hidden"),
                        S.$el
                          .find(".csui-search-form-collection")
                          .removeClass("binf-hidden"),
                        S.$el.find(".csui-custom-view-search").remove(),
                        i.sidePanel.trigger("after:show")),
                    i.sidePanel.headerView.update(
                      i.sidePanel.options.slides[0]
                    ),
                    f && S.show(i.sidePanel.options.slides[0].content);
                }
                i.sidePanel.listenTo(
                  i.customSearchForm,
                  "enable:search",
                  function (v) {
                    i.sidePanel.trigger("update:button", "search-btn", {
                      disabled: !v,
                    });
                  }
                );
                var w = x.filter(
                  x.flatten(
                    x.map(
                      i.customSearchForm &&
                        i.customSearchForm.model.get("data"),
                      x.values
                    )
                  ),
                  function (v) {
                    return v;
                  }
                );
                let b = !0;
                if (w && w.length > 0) {
                  for (let v of w)
                    if (
                      typeof v == "number" ||
                      (typeof v == "string" && !/^(anydate|anyvalue)/i.test(v))
                    ) {
                      b = !1;
                      break;
                    } else if (
                      typeof v == "object" &&
                      Object.values(v).some(
                        (_) => _ && !/^(anydate|anyvalue)/i.test(_)
                      )
                    ) {
                      b = !1;
                      break;
                    }
                }
                b
                  ? (m(".cs-search")
                      .addClass("binf-disabled")
                      .addClass("csui-search-form-submit-disabled"),
                    i.customSearchForm?.trigger("enable:search", !1))
                  : (m(".cs-search")
                      .removeClass("binf-disabled")
                      .removeClass("csui-search-form-submit-disabled"),
                    i.customSearchForm?.trigger("enable:search", !0)),
                  f
                    ? (i.options.originatingView.hideBackButton
                        ? i.findButton(
                            i.sidePanel.footerView.leftCollection.models,
                            "back",
                            !0
                          )
                        : i.findButton(
                            i.sidePanel.footerView.leftCollection.models,
                            "back",
                            !1
                          ),
                      i.customSearchForm.listenTo(
                        i.customSearchForm,
                        "render:form",
                        function () {
                          i.sidePanel.triggerMethod("set:focus");
                        }
                      ),
                      i.findButton(
                        i.sidePanel.footerView.rightCollection.models,
                        "search",
                        !1
                      ))
                    : (i.findButton(
                        i.sidePanel.footerView.leftCollection.models,
                        "back",
                        !0
                      ),
                      i.findButton(
                        i.sidePanel.footerView.rightCollection.models,
                        "search",
                        !0
                      )),
                  i.sidePanel &&
                    i.sidePanel.footerView.trigger("update:footer"),
                  i.options.originatingView.$el
                    .find(".csui-searchforms-popover-row")
                    .removeClass("binf-disabled"),
                  i.sidePanel &&
                    i.sidePanel.$el
                      .find(".csui-searchforms-popover-row")
                      .removeClass("binf-disabled"),
                  i.sidePanel.listenTo(
                    i.customSearchForm,
                    "button:click",
                    function (v) {
                      if (v.btnType === "search")
                        (i.customSearchForm.options.query =
                          i.options.options.model),
                          i.customSearchForm.loadCustomSearch();
                      else if (v.btnType === "back") {
                        i.openFormInSidepanel(
                          i.options.originatingView.searchboxModel.get(
                            "search_forms"
                          )
                        );
                        return;
                      }
                      i.sidePanel.hide();
                    }
                  ),
                  i.sidePanel.listenTo(i.sidePanel, "after:show", function () {
                    i.isNewForm &&
                      (i.customSearchForm.customFormView.formView.isFormChanged =
                        void 0),
                      this.$el.find(".csui-searchforms-popover-row").length &&
                        i.isKeyPress &&
                        (this.$el
                          .find(".csui-searchforms-popover-row")[0]
                          .focus(),
                        (i.isKeyPress = !1));
                    var v = i.options.originatingView.cid;
                    m(document).off("click." + v + " keydown." + v);
                  }),
                  i.sidePanel.listenTo(i.sidePanel, "before:hide", function () {
                    var v = i.options.originatingView;
                    v?.options?.otcEl ||
                      m(document).on(
                        "click." + v.cid + " keydown." + v.cid,
                        v,
                        v._hideSearchBar
                      ),
                      i.options.originatingView?.ui?.input?.attr("tabindex", 0);
                  }),
                  i.sidePanel.listenTo(i.sidePanel, "keydown", function (v) {
                    if (
                      v.keyCode === 9 &&
                      v.shiftKey &&
                      m(v.target)[0].id === "csui-side-panel-cancel"
                    ) {
                      var _ = i;
                      _.searchFormsContainerView &&
                        setTimeout(function () {
                          _.searchFormsContainerView.systemSearchForms.$el
                            .find(".csui-searchforms-popover-row")[0]
                            .focus();
                        }, 0);
                    }
                  }),
                  i.sidePanel.listenTo(
                    i.customSearchForm,
                    "click:search",
                    function () {
                      i.sidePanel.hide();
                    }
                  ),
                  t.resolve();
              },
              t.reject
            ),
            t.promise()
          );
        },
        isModelFetched: function (l) {
          if (
            ((this.isNewForm = !0),
            this.models && this.models.length && this.models.get(l))
          ) {
            var f = JSON.parse(
              JSON.stringify(this.models.get(l).originalAttributesData)
            );
            this.models.get(l).set("data", f),
              this.openFormInSidepanel(this.models.get(l), l);
          } else {
            var t = this;
            csui.require(
              ["csui/widgets/search.forms/search.form.model"],
              function (i) {
                var o = new i(
                  { id: l },
                  { connector: t.options.connector, options: t.options }
                );
                o.fetch().then(function (n) {
                  var u = JSON.parse(JSON.stringify(o.attributes.data));
                  (o.originalAttributesData = u),
                    t.models.push(o),
                    t.openFormInSidepanel(o, l);
                });
              }
            );
          }
        },
      });
      return r;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.forms/impl/search.forms",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return `    <span class="csui-icon-standard-search"></span>
`;
        },
        3: function (s, e, r, l, f) {
          return `    <span class="csui-icon-query-form-search"></span>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<a href="javascript:void(0)" class="csui-searchforms-popover-row"
   data-searchformid="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormId") ||
                  (e != null ? o(e, "searchFormId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 22 },
                      end: { line: 2, column: 39 },
                    },
                  })
                : i)
            ) +
            '" id="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormId") ||
                  (e != null ? o(e, "searchFormId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 45 },
                      end: { line: 2, column: 62 },
                    },
                  })
                : i)
            ) +
            `" title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormTooltip") ||
                  (e != null ? o(e, "searchFormTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormTooltip",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 71 },
                      end: { line: 2, column: 94 },
                    },
                  })
                : i)
            ) +
            `'
   aria-label='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormName") ||
                  (e != null ? o(e, "searchFormName") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormName",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 15 },
                      end: { line: 3, column: 35 },
                    },
                  })
                : i)
            ) +
            `'>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "quickLink") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.program(3, f, 0),
                loc: {
                  start: { line: 4, column: 2 },
                  end: { line: 8, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <span class="cs-label">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormName") ||
                  (e != null ? o(e, "searchFormName") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormName",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 25 },
                      end: { line: 9, column: 45 },
                    },
                  })
                : i)
            ) +
            `</span>
</a>`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_search.forms_impl_search.forms", y), y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "hbs!csui/widgets/search.forms/impl/search.forms",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.View.extend({
        className: "csui-search-form-item",
        template: y,
        attributes: { role: "listitem" },
        templateContext: function () {
          var r =
              this.model && this.model.has("name") && this.model.get("name"),
            l = this.model && this.model.has("id") && this.model.get("id"),
            f = this.model && this.model.cid;
          return {
            quickLink: this.model.get("type") === "quick",
            searchFormName: r,
            searchFormId: `${f}_${l}`,
            searchFormTooltip: x.str.sformat(s.searchFormTooltip, r),
          };
        },
        events: {
          "click .csui-searchforms-popover-row": "openFormView",
          "keydown .csui-searchforms-popover-row": "openFormView",
        },
        constructor: function (l) {
          l || (l = {}),
            (this.options = l),
            p.View.prototype.constructor.call(this, l);
        },
        openFormView: function (r) {
          r.preventDefault(), r.stopPropagation();
          var l = this.model,
            f = l.get("params") || {};
          if (r.keyCode === 13 || r.keyCode === 32 || r.type === "click") {
            if (l.get("type") === "quick") {
              f.location_id1 = "";
              var t = this.options.originatingView;
              t.options &&
                t.options.data &&
                t.options.data.searchFromHere &&
                t.searchOptions &&
                t.searchOptions.nodeId &&
                (f.location_id1 = t.searchOptions.nodeId),
                (f.where = f.where || "*"),
                this.options.originatingView.trigger("refine:search", r, f);
              return;
            } else if (
              this.model.get("type") === "direct" &&
              this.options.parentView &&
              this.options.parentView.options &&
              this.options.parentView.options.options &&
              this.options.parentView.options.options.fromSearchBox
            ) {
              x.extend(f, { forcePerspectiveChange: !0, enableSearchForm: !0 }),
                this.options.originatingView.trigger("refine:search", r, f);
              return;
            }
            if (
              this.$el
                .find(".csui-searchforms-popover-row")
                .hasClass("binf-disabled")
            )
              return;
            this.$el
              .find(".csui-searchforms-popover-row")
              .addClass("binf-disabled");
            var i =
              this.model.get("params") && this.model.get("params").query_id
                ? this.model.get("params").query_id
                : this.model.get("id");
            this.options.originatingView.isModelFetched
              ? this.options.originatingView.isModelFetched(i)
              : (this.options.originatingView.hideSearchOptionsDropDown(r),
                this.options.originatingView.searchForms.isModelFetched(i)),
              this.options.originatingView.searchFormsContainerView.$el.addClass(
                "binf-hidden"
              );
          } else r.type === "keydown" && this._handleKeyEvents(r);
        },
        _handleKeyEvents: function (r) {
          switch ((r.preventDefault(), r.keyCode)) {
            case 9:
              var l = this.options.parentView.options.parentView,
                f = this.options.parentView;
              if (r.shiftKey)
                r.shiftKey &&
                  (l.personalSearchForms &&
                  f.options.listName !== "personal_search_forms" &&
                  f.options.listName !== "recent_search_forms"
                    ? l.personalSearchForms.$el
                        .find(".csui-searchforms-popover-row")[0]
                        .focus()
                    : l.recentSearchForms &&
                      f.options.listName !== "recent_search_forms"
                    ? l.recentSearchForms.$el
                        .find(".csui-searchforms-popover-row")[0]
                        .focus()
                    : (l.recentSearchForms &&
                        f.options.listName === "recent_search_forms") ||
                      (l.personalSearchForms &&
                        f.options.listName === "personal_search_forms") ||
                      (l.systemSearchForms &&
                        f.options.listName === "system_search_forms")
                    ? this.options.originatingView.sidePanel
                      ? this.options.originatingView.sidePanel.$el
                          .find(".csui-sidepanel-close")
                          .trigger("focus")
                      : this.options.originatingView.$el.find(
                          ".csui-slices-more"
                        ).length > 0 &&
                        !this.options.originatingView.$el
                          .find(".csui-slices-more")
                          .hasClass("binf-hidden")
                      ? this.options.originatingView.$el
                          .find(".csui-slices-more")[0]
                          .focus()
                      : (m(
                          this.options.originatingView.$el.find(
                            ".csui-search-popover-row-body"
                          )[0]
                        ).addClass("active"),
                        m(
                          this.options.originatingView.$el.find(
                            '.csui-search-popover-row-body input[type="radio"]'
                          )[0]
                        )[0].focus())
                    : this.options.originatingView.$el.find(
                        ".csui-selected-checkbox"
                      ).length
                    ? (this.options.originatingView.$el
                        .find(".csui-selected-checkbox")
                        .addClass("active"),
                      this.options.originatingView.$el
                        .find('.csui-selected-checkbox input[type="checkbox"]')
                        .trigger("focus"))
                    : (m(
                        this.options.originatingView.$el.find(
                          ".csui-search-popover-row-body"
                        )[0]
                      ).addClass("active"),
                      m(
                        this.options.originatingView.$el.find(
                          '.csui-search-popover-row-body input[type="radio"]'
                        )[0]
                      )[0].focus()));
              else if (
                this.options.originatingView.$el.find(
                  ".csui-searchforms-show-more"
                ).length
              )
                this.options.originatingView.$el
                  .find(".csui-searchforms-show-more")
                  .focus();
              else if (
                l.personalSearchForms &&
                f.options.listName !== "system_search_forms" &&
                f.options.listName !== "personal_search_forms"
              )
                l.personalSearchForms.$el
                  .find(".csui-searchforms-popover-row")[0]
                  .focus();
              else if (
                l.systemSearchForms &&
                f.options.listName !== "system_search_forms"
              )
                l.systemSearchForms.$el
                  .find(".csui-searchforms-popover-row")[0]
                  .focus();
              else {
                var t = l.options.originatingView.sidePanel.$el.find(
                  '[id = "csui-side-panel-cancel"]'
                );
                t.addClass("active"),
                  setTimeout(function () {
                    t.trigger("focus");
                  }, 0);
              }
              break;
            case 38:
              if (this.$el.prev().length)
                this.$el.removeClass("active"),
                  this.$el
                    .prev()
                    .addClass("active")
                    .find(".csui-searchforms-popover-row")[0]
                    .focus();
              else {
                var i = this.options.parentView.$el.find(
                  ".csui-searchforms-popover-row"
                );
                i[i.length - 1].focus();
              }
              break;
            case 40:
              this.$el.next().length
                ? (this.$el.removeClass("active"),
                  this.$el
                    .next()
                    .addClass("active")
                    .find(".csui-searchforms-popover-row")[0]
                    .focus())
                : this.options.parentView.$el
                    .find(".csui-searchforms-popover-row")[0]
                    .focus();
              break;
            case 27:
              var o =
                  this.options.originatingView &&
                  this.options.originatingView.options,
                n = o && o.originatingView;
              this.$el.removeClass("active"),
                n &&
                  o.options &&
                  o.options.data &&
                  o.options.data.showOptionsDropDown &&
                  n.hideSearchOptionsDropDown(r);
              break;
          }
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/widgets/search.forms/search.forms.item.view",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p) {
      "use strict";
      var y = m.CollectionView.extend({
        className: "csui-search-form-list",
        childView: p,
        attributes: { role: "list" },
        childViewOptions: function () {
          return {
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            parentView: this,
          };
        },
        constructor: function (e) {
          e || (e = {}),
            (this.options = e),
            (this.collection = e.collection),
            (this.originatingView = e.originatingView),
            m.CollectionView.prototype.constructor.apply(this, arguments);
        },
      });
      return y;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.forms/impl/search.forms.container",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "  <div aria-labelledby='recent_search_forms_header_" +
            s.escapeExpression(
              ((i =
                (i = o(r, "cId") || (e != null ? o(e, "cId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 51 },
                      end: { line: 2, column: 58 },
                    },
                  })
                : i)
            ) +
            "' " +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "fromSearchBox") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(2, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 2, column: 60 },
                  end: { line: 2, column: 107 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
    <h2 id='recent_search_forms_header_` +
            s.escapeExpression(
              ((i =
                (i = o(r, "cId") || (e != null ? o(e, "cId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cId",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 39 },
                      end: { line: 3, column: 46 },
                    },
                  })
                : i)
            ) +
            `'
        class='csui-search-label ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "skipHeading") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(4, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 33 },
                  end: { line: 4, column: 72 },
                },
              }
            )) != null
              ? t
              : "") +
            `'>
      ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "labels") : e) != null
                  ? o(t, "recentSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `
    </h2>
    <div id='recent_search_forms' class="csui-recent-search-form-container"></div>
  </div>
`
          );
        },
        2: function (s, e, r, l, f) {
          return ' role="navigation" ';
        },
        4: function (s, e, r, l, f) {
          return " binf-hidden ";
        },
        6: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-more-forms">
    <a href="javascript:void(0)" role="button" class="csui-searchforms-show-more"
       data-searchformid="loadAllForms" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "showMoreAria") ||
                  (e != null ? i(e, "showMoreAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "showMoreAria",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 52 },
                      end: { line: 14, column: 68 },
                    },
                  })
                : t)
            ) +
            `">
      ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "showMorelabel") ||
                  (e != null ? i(e, "showMorelabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "showMorelabel",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 6 },
                      end: { line: 15, column: 23 },
                    },
                  })
                : t)
            ) +
            `</a>
  </div>
`
          );
        },
        8: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div aria-labelledby='personal_search_forms_header'>
    <h2 id='personal_search_forms_header'
        class='csui-search-label'>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "labels") : e) != null
                  ? i(t, "personalSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `</h2>
    <div id='personal_search_forms' class="csui-personal-search-form-container"></div>
  </div>
`
          );
        },
        10: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div aria-labelledby='system_search_forms_header'>
    <h2 id='system_search_forms_header'
        class='csui-search-label'>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "labels") : e) != null
                  ? i(t, "systemSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `</h2>
    <div id='system_search_forms' class="csui-system-search-form-container"></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "recent_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 9, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "showMore") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 11, column: 0 },
                  end: { line: 17, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "personal_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(8, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 19, column: 0 },
                  end: { line: 25, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "system_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(10, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 27, column: 0 },
                  end: { line: 33, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.forms_impl_search.forms.container",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.container.view",
    [
      "csui/lib/backbone",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/widgets/search.forms/search.forms.list.view",
      "hbs!csui/widgets/search.forms/impl/search.forms.container",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = p.View.extend({
        className: "csui-search-form-collection",
        template: s,
        templateContext: function () {
          return {
            searchForms: this.options.searchFormsList,
            fromSearchBox: this.options.fromSearchBox,
            labels: e,
            showMore: !!this.options.showMore,
            skipHeading:
              !!this.options.hasQuickSearches && !!this.options.fromSearchBox,
            showMorelabel: this.options.searchFormsList.recent_search_forms
              .length
              ? e.showMore
              : e.searchFormLabel,
            showMoreAria: this.options.searchFormsList.recent_search_forms
              .length
              ? e.showMoreSearchFormsAria
              : e.openSearchFormsAria,
            cId: this.cid,
          };
        },
        regions: function () {
          var l = {};
          return (
            m.each(this.options.searchFormsList, function (f, t) {
              l[t] = "#" + t;
            }),
            l
          );
        },
        constructor: function (f) {
          f || (f = {}),
            (this.options = f),
            p.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          if (
            (m.each(
              this.options.searchFormsList,
              m.bind(function (l, f) {
                var t = this._createCollection(l);
                t.length &&
                  (f === "recent_search_forms"
                    ? ((t = this.options.hasQuickSearches
                        ? t
                        : new x.Collection(
                            t.filter(function (i) {
                              return i.get("type") !== "quick";
                            })
                          )),
                      (this.recentSearchForms = this._createListView(t, f)),
                      this.showChildView(f, this.recentSearchForms))
                    : f === "system_search_forms"
                    ? ((this.systemSearchForms = this._createListView(t, f)),
                      this.showChildView(f, this.systemSearchForms))
                    : f === "personal_search_forms" &&
                      ((this.personalSearchForms = this._createListView(t, f)),
                      this.showChildView(f, this.personalSearchForms)));
              }, this)
            ),
            this.options.fromSearchBox)
          ) {
            let l = this.cid;
            this.$el
              .find("#recent_search_forms")
              .attr("id", `recent_search_forms_${l}`);
          }
        },
        _createListView: function (l, f) {
          var t = new y({
            options: this.options,
            originatingView: this.options.originatingView,
            collection: l,
            listName: f,
            parentView: this,
          });
          return t;
        },
        _createCollection: function (l) {
          var f,
            t = new x.Collection();
          return (
            m.each(l, function (i) {
              (f = new x.Model(i)), t.add(f);
            }),
            t
          );
        },
      });
      return r;
    }
  ),
  csui.define("csui/widgets/search.box/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/search.box/impl/nls/root/lang", {
    placeholder: "Search",
    clearerTitle: "Clear keywords",
    searchBoxTitle: "Enter your search term",
    searchOptionsTitle: "Show search options",
    searchOptionsHideTitle: "Hide search options",
    searchFromHere: "Search from here",
    searchIconTitle: "Search",
    searchIconAria: "Search in OpenText Content Management",
    searchOptionTooltip: "Select: {0}",
    startSearch: "Start search",
    searchLandmarkAria: "Global content search",
    searchWithinLabel: "Search within",
    showMore: "Show more",
    showMoreAria: "Show more slices",
    closeSearch: "Close search",
  }),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.box",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return `        <div class="csui-search-options-dropdown binf-hidden" >
        <div class="csui-search-options-wrapper csui-normal-scrolling"></div>
        </div>
`;
        },
        3: function (s, e, r, l, f) {
          return "icon-header-search-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="search-bar" role="dialog" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchLandmarkAria")
                  : t,
                e
              )
            ) +
            '" aria-expanded="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "showOptionsDropDown")
                  : t,
                e
              )
            ) +
            `">
  <div class="search-bar-content">
    <div class="csui-search-input-container">
      <input type="search" class="csui-input" placeholder="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "placeholder")
                  : t,
                e
              )
            ) +
            `"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchBoxTitle")
                  : t,
                e
              )
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchBoxTitle")
                  : t,
                e
              )
            ) +
            `">
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "messages") : e) != null
                ? i(t, "showOptionsDropDown")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 6, column: 6 },
                  end: { line: 10, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
    <span class="csui-clearer formfield_clear" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "clearerTitle")
                  : t,
                e
              )
            ) +
            `"
          aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "clearerTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
    <span class="csui-separator"></span>
    <span class="csui-formfield-search formfield_search" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "startSearchTitle")
                  : t,
                e
              )
            ) +
            `"
          aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "startSearchTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
  </div>
</div>
<div role="search" aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchLandmarkAria")
                  : t,
                e
              )
            ) +
            `" class="search-icon">
  <a href="javascript:void(0);"
     class="icon icon-global-search icon-header-search ` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "messages") : e) != null
                ? i(t, "highContrast")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 21, column: 55 },
                  end: { line: 21, column: 115 },
                },
              }
            )) != null
              ? t
              : "") +
            ` csui-header-search-icon csui-acc-focusable"
     title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchIconTitle")
                  : t,
                e
              )
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchIconAria")
                  : t,
                e
              )
            ) +
            `"
     aria-expanded="false"></a>
</div>`
          );
        },
      });
      return p.registerPartial("csui_widgets_search.box_impl_search.box", y), y;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.slices.popover",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t =
            s.lookupProperty ||
            function (i, o) {
              if (Object.prototype.hasOwnProperty.call(i, o)) return i[o];
            };
          return (
            '    <div class="csui-search-popover-row" data-sliceid="' +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `"
         title="` +
            s.escapeExpression(
              s.lambda(e != null ? t(e, "sliceTooltip") : e, e)
            ) +
            `" role="radio" aria-checked="false" tabindex="-1">
      <div class="csui-search-popover-row-body" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `">
        <div class="csui-search-popover-checked" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            '" id="' +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `"></div>
        <div class="csui-search-popover-label" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            '">' +
            s.escapeExpression(
              s.lambda(e != null ? t(e, "sliceDisplayName") : e, e)
            ) +
            `</div>
      </div>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-search-slice-container" role="radiogroup">
  <div class="csui-search-slice-container-first" role="presentation"></div>
` +
            ((t = i(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "slices") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 11, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-search-slice-container-last" role="presentation"></div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.box_impl_search.slices.popover",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.slice.dropdown",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary csui-searchbox-dd-panel" >
  <label class="csui-search-slice-name csui-selectlabel" for="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeIdSO") : e, e)) +
            `"
          title="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "fromHere") : e, e)) +
            " " +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeName") : e, e)) +
            `">
    <input type="checkbox" ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "checked") || (e != null ? i(e, "checked") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "checked",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 27 },
                      end: { line: 5, column: 38 },
                    },
                  })
                : t)
            ) +
            ' aria-checked="true"  class="csui-searchbox-option" name="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeId") : e, e)) +
            '" id="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeIdSO") : e, e)) +
            `"
           tabindex="-1" value="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeId") : e, e)) +
            `">
      <span class="csui-icon"></span>
      <span class="csui-ellipsis" aria-hidden="true" >` +
            s.escapeExpression(s.lambda(e != null ? i(e, "fromHere") : e, e)) +
            " " +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeName") : e, e)) +
            `</span>
  </label>
  </div>
`
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-searchbox-slices-wrapper csui-searchbox-dd-panel">
    <fieldset>
      <legend class="csui-search-label">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "searchWithinLabel")
                  : t,
                e
              )
            ) +
            `</legend>
      <div class="csui-search-slice-region" ></div>
    </fieldset>
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "slices") : e) != null ? i(t, "more") : t,
              {
                name: "if",
                hash: {},
                fn: s.program(4, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 19, column: 4 },
                  end: { line: 24, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
`
          );
        },
        4: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <button class="csui-slices-more" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "showMoreAria")
                  : t,
                e
              )
            ) +
            `" tabindex="-1" >
        <span  class="csui-more-text">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "showMore")
                  : t,
                e
              )
            ) +
            `</span>
       <span class="csui-button-icon icon-caret-down"></span>
    </button>
`
          );
        },
        6: function (s, e, r, l, f) {
          return `  <div class="csui-searchbox-searchform-wrapper csui-searchbox-dd-panel">
    <div class="csui-recent-searchforms-container" >
    </div>
  </div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "nodeId") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 11, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "slices") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 13, column: 0 },
                  end: { line: 26, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "search_forms") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 27, column: 0 },
                  end: { line: 32, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.box_impl_search.slice.dropdown",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/search.box/impl/search.box",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/search.box/search.box.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/search.box.factory",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/namedlocalstorage",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/search.slices/search.slices.list.view",
      "csui/widgets/search.forms/search.forms",
      "csui/widgets/search.forms/search.forms.container.view",
      "csui/utils/contexts/factories/next.node",
      "csui/utils/contexts/factories/search.formquery.factory",
      "i18n!csui/widgets/search.box/impl/nls/lang",
      "csui/utils/namedsessionstorage",
      "hbs!csui/widgets/search.box/impl/search.box",
      "hbs!csui/widgets/search.box/impl/search.slices.popover",
      "hbs!csui/widgets/search.box/impl/search.slice.dropdown",
      "i18n",
      "csui/utils/base",
      "css!csui/widgets/search.box/impl/search.box",
      "csui/lib/jquery.ui/js/jquery-ui",
      "csui/lib/binf/js/binf",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v
    ) {
      "use strict";
      var _ = m.defaults({}, x.config(), {
          showOptionsDropDown: !0,
          showSearchInput: !1,
          showInput: !1,
          inputValue: "",
          slice: "",
          nodeId: "",
          nodeName: "",
          searchFromHere: !0,
          enableSearchBarSettings: !0,
          customSearchIconClass: "icon-header-search",
          customSearchIconNoHoverClass: "icon-header-search-nohover",
          customSearchIconCloseClass: "icon-header-search_close",
        }),
        T = y.ItemView.extend({
          className: "csui-search-box",
          template: C,
          templateHelpers: function () {
            var a = {
              showOptionsDropDown: this.options.data.showOptionsDropDown,
              placeholder: this.options.data.placeholder || h.placeholder,
              clearerTitle: h.clearerTitle,
              startSearchTitle: h.startSearch,
              searchIconTitle: h.searchIconTitle,
              searchIconAria: h.searchIconAria,
              searchBoxTitle: h.searchBoxTitle,
              searchOptionsTitle: h.searchOptionsTitle,
              startSearch: h.startSearch,
              searchLandmarkAria: h.searchLandmarkAria,
              highContrast: this.options.highContrast === 2,
            };
            return { messages: a };
          },
          slicePopOverTemplate: S,
          sliceDropDownTemplate: w,
          namedSessionStorage: new k(),
          ui: {
            input: ".csui-input",
            clearer: ".csui-clearer",
            formfieldSearch: ".csui-formfield-search",
            innerSeparator: ".csui-separator",
            searchIcon: ".csui-header-search-icon",
            dropDown: ".csui-search-options-dropdown",
            dropDownWrapperClass: ".csui-search-options-wrapper",
          },
          events: {
            "click @ui.searchIcon": "searchHeaderIconClicked",
            "keydown .csui-header-search-icon": "searchIconKeyPressed",
            "click @ui.input": "inputClicked",
            "keydown @ui.input": "inputTyped",
            "keyup @ui.input": "inputChanged",
            "paste @ui.input": "inputChanged",
            "change @ui.input": "inputChanged",
            "click @ui.clearer": "clearerClicked",
            "click @ui.formfieldSearch": "formfieldSearchClicked",
            "click .csui-searchbox-option": "selectSearchOption",
            "keydown @ui.clearer": "keyDownOnClear",
            "keydown @ui.formfieldSearch": "keyDownOnFormfieldSearch",
            "keydown .csui-selected-checkbox": "accessibility",
            "keyup .csui-selected-checkbox": "keyUpHandler",
            "keyup .csui-slices-more": "keyUpHandler",
            "keydown .csui-slices-more": "_handleSlicesShowMore",
            "click .csui-slices-more": "showMore",
            "click .csui-searchforms-show-more": "openSearchForm",
            "keydown .csui-searchforms-show-more": "openSearchForm",
            "focus @ui.input": "focusedOnSearchInput",
          },
          currentlyFocusedElement: function (a) {
            if (this.$el) {
              var g = this.$el.find("*[data-cstabindex=-1]");
              g.length && g.prop("tabindex", 0);
              var I = !!a && a.shiftKey;
              !I &&
              this.$el.find(".search-bar").length &&
              this.$el.find(".search-bar").is(":visible")
                ? ((this.focusElement = this.$el.find(".csui-input")),
                  (this.skipShowingDropdown = !0))
                : this.$el.find("a.csui-acc-focusable").length &&
                  (this.focusElement = this.$el.find("a.csui-acc-focusable"));
            }
            return this.focusElement;
          },
          behaviors: { TabableRegion: { behaviorClass: i } },
          namedLocalStorage: new t("search_bar_settings"),
          constructor: function (g) {
            g || (g = {}),
              (g.data = m.defaults({}, g.data, _)),
              (this.direction = b.settings.rtl ? "left" : "right");
            var I = g.context;
            g.model || (g.model = I.getModel(l)),
              (this.applicationScope = I.getModel(f)),
              y.ItemView.prototype.constructor.apply(this, arguments),
              this.listenTo(this.model, "change:where", this._updateInput),
              (this.searchBoxFactory = I.getFactory(r)),
              (this.searchboxModel = this.searchBoxFactory.property),
              this.options.data.showOptionsDropDown &&
                (this.listenTo(I, "sync:perspective", this._perspectiveSynced),
                this.listenTo(
                  I,
                  "change:current:node",
                  this._currentNodeChanged
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareOptionsdropdown
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareSlicePopover
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareSearchFormsPopover
                ),
                this.listenTo(this, "refine:search", this._refineSearch)),
              this.options.data.enableSearchBarSettings &&
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.updateSearchBarSettings
                ),
              (this.model.get("where") || this.options.data.showSearchInput) &&
                p(document).on(
                  "click." + this.cid + " keydown." + this.cid,
                  this,
                  this._hideSearchBar
                ),
              p(document).on(
                "keydown." + this.cid,
                this,
                this._shortcutToQuery
              ),
              (this.searchForms = new n({
                options: this.options,
                connector: this.searchboxModel && this.searchboxModel.connector,
                originatingView: this,
              }));
          },
          _refineSearch: function (a, g) {
            this.model.clear({ silent: !0 }),
              this.model.set(g),
              this.hideSearchOptionsDropDown(a);
          },
          updateSearchBarSettings: function () {
            if (
              ((this.search_bar_settings = this.searchboxModel.get(
                "search_bar_settings"
              )),
              this.search_bar_settings &&
                this.search_bar_settings.full_text &&
                (this.namedLocalStorage.set(
                  "full_text",
                  this.search_bar_settings.full_text
                ),
                this.model))
            ) {
              var a =
                this.search_bar_settings && this.search_bar_settings.full_text;
              this.model.set("modifier", a.modifier, { silent: !0 }),
                this.model.set("lookfor", a.lookfor, { silent: !0 });
            }
          },
          _shortcutToQuery: function (a) {
            if (a.ctrlKey && a.keyCode == 114) {
              var g = a.data;
              g.isSearchInputVisible()
                ? g.ui.input.trigger("focus")
                : g.searchIconClicked(a);
            }
          },
          onBeforeDestroy: function () {
            p(document)
              .off("click." + this.cid)
              .off("keydown." + this.cid);
          },
          isSearchbarVisible: function () {
            return this.$(".search-bar").is(":visible");
          },
          isSearchInputVisible: function () {
            return this.$(".csui-input").is(":visible");
          },
          handleKeydownNavbar: function (a) {
            var g = p(".csui-navbar.binf-navbar .binf-container-fluid")
                .find("*[tabindex]:visible")
                .toArray(),
              I = g.unshift(this.$el);
            document.activeElement === g[I - 1] &&
              p(document)
                .find(".csui-help .csui-acc-tab-region")
                .trigger("focus");
          },
          _perspectiveSynced: function (a, g) {
            this._currentNodeChanged(g);
          },
          _currentNodeChanged: function (a) {
            a instanceof e && (a.get("container") || a.get("type") === 5574)
              ? ((this.searchboxModel.nodeId = a.get("id")),
                (this.searchboxModel.nodeName = a.get("name")),
                this.namedSessionStorage.set(
                  this.searchboxModel.nodeId,
                  this.searchboxModel.nodeName
                ),
                this.searchboxModel.trigger("change"))
              : ((this.searchboxModel.nodeId = void 0),
                (this.searchboxModel.nodeName = void 0),
                this.searchboxModel.trigger("change"));
          },
          _dataSynced: function (a, g) {
            this.searchboxModel &&
              ((this.options.data && this.options.data.alwaysFetchDropdown) ||
                !(this.searchboxModel && this.searchboxModel.fetched)) &&
              this.searchBoxFactory.fetch();
          },
          onRender: function (a) {
            this.options.data.showSearchInput &&
              (this.$el.find(".search-bar").show(), this.searchIconToClose());
            var g = this.options.data.inputValue || this.model.get("where");
            (this.slice = this.options.data.slice || this.model.get("slice")),
              g &&
                (this._setInputValue(g), this.$el.find(".search-bar").show()),
              (this.options.data.showInput || g) &&
                (this.triggerMethod("before:show:input", this),
                this.ui.input.show(),
                this.triggerMethod("show:input", this)),
              a &&
                a.data &&
                this.$el
                  .find(".csui-search-box .csui-header-search-icon")
                  .removeClass(a.data.options.data.customSearchIconCloseClass)
                  .addClass(a.data.options.data.customSearchIconClass);
          },
          _createSliceCollection: function (a) {
            var g,
              I = new s.Collection();
            return (
              m.each(a, function (D) {
                (g = new s.Model({
                  sliceId: D.sliceId,
                  sliceDisplayName: D.sliceDisplayName,
                  sliceTooltip: D.sliceTooltip,
                })),
                  I.add(g);
              }),
              I
            );
          },
          prepareSlicePopover: function (a) {
            var g = this.searchboxModel.get("slices"),
              I =
                g && g.length > 3
                  ? this._createSliceCollection(g.slice(0, 3))
                  : this._createSliceCollection(g);
            this.options.data.showOptionsDropDown &&
              (g &&
                (m.each(g, function (D) {
                  var A = D.sliceDisplayName;
                  D.sliceTooltip = m.str.sformat(h.searchOptionTooltip, A);
                }),
                this.searchSlicesListView ||
                  (this.searchSlicesListView = new o({
                    originatingView: this,
                    collection: I,
                  }))),
              p(".search-bar").is(":visible") &&
                p(".binf-navbar-brand").removeClass("binf-navbar-collapse"));
          },
          showSlices: function () {
            this.searchSlicesListView &&
              ((this.searchSlicesRegion = new y.Region({
                el: ".csui-search-slice-region",
              })),
              this.searchSlicesRegion.$el.length &&
                this.searchSlicesRegion.show(this.searchSlicesListView),
              this.searchSlicesListView.getSelectedSlice());
          },
          prepareSearchFormsPopover: function () {
            var a = this.searchboxModel.get("search_forms"),
              g = (a && a.recent_search_forms) || [],
              I = m.findIndex(g, { type: "quick" }) !== -1;
            this.searchFormsContainerView = new u({
              searchFormsList: { recent_search_forms: g.slice(0, 5) },
              originatingView: this,
              showMore: !0,
              hasQuickSearches: I,
              fromSearchBox: !0,
            });
          },
          showSearchForms: function () {
            this.$el.hasClass("csui-search-expanded") &&
              this.searchFormsContainerView &&
              !this.searchFormsContainerView._isRendered &&
              ((this.searchFormsRegion = new y.Region({
                el: ".csui-recent-searchforms-container",
              })),
              this.searchFormsRegion.$el.length &&
                this.searchFormsRegion.show(this.searchFormsContainerView));
          },
          accessibility: function (a) {
            switch (
              (this.$el
                .find(".csui-selected-checkbox")
                .attr("tabindex", "0")
                .removeClass("active"),
              a.keyCode)
            ) {
              case 13:
                this.selectSearchOption(a), a.preventDefault();
                break;
              case 32:
                this.selectSearchOption(a), a.preventDefault();
                break;
              case 27:
                this.$el.find(".csui-selected-checkbox").attr("tabindex", "-1"),
                  this.$el.find(".active").removeClass("active"),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(a);
                break;
              case 9:
                if (a.shiftKey) this.ui.input[0].focus();
                else {
                  var g = this.$el.find(".csui-search-popover-row-body");
                  p(g[0]).addClass("active"),
                    p(g[0]).find('input[type="radio"]')[0].focus();
                }
                a.preventDefault();
                break;
            }
          },
          keyUpHandler: function (a) {
            var g = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
            a.keyCode == 32 && g && (a.stopPropagation(), a.preventDefault());
          },
          hidePopover: function (a) {
            this.options.data.showOptionsDropDown &&
              (this.$el.find(".csui-selected-checkbox").attr("tabindex", "-1"),
              this.$el.find(".active").removeClass("active"),
              this.showOptionsDropdown(a));
          },
          resetPageDefaults: function (a) {
            this.model.resetDefaults = !0;
          },
          searchIconKeyPressed: function (a) {
            a.keyCode === 32 &&
              (a.preventDefault(),
              this.searchIconToClose(),
              this.searchIconClicked(a));
          },
          searchHeaderIconClicked: function (a) {
            p(".search-bar").is(":visible")
              ? (this._hideSearchBar(a), this._hideSearchPanel(a))
              : (this.searchIconToClose(), this.searchIconClicked(a));
            var g = this.options && this.options.parentView;
            g &&
              g.listenToOnce(
                g,
                "control:clicked",
                m.bind(function () {
                  p(".search-bar").is(":visible") &&
                    (this._hideSearchBar(a), this._hideSearchPanel(a));
                }, this)
              );
          },
          focusedOnSearchInput: function (a) {
            if (this.skipShowingDropdown || this._isDropdownVisible()) {
              this.skipShowingDropdown = !1;
              return;
            } else
              a.preventDefault(),
                this._dataSynced(),
                this.$el.addClass("csui-search-expanded"),
                this.ui.input.prop("tabindex", 0),
                this.$el.addClass("csui-searchbox-ready"),
                this.searchboxModel && this.searchboxModel.fetched
                  ? (this.showSearchForms(),
                    this.showSlices(),
                    (this.closeDropdown = !1),
                    p(document.activeElement)[0] === this.ui.input[0] &&
                      this.options.data.showOptionsDropDown &&
                      this.showOptionsDropdown(a))
                  : (this.listenTo(this.searchboxModel, "change", function () {
                      this.showSearchForms(),
                        this.showSlices(),
                        document.querySelector(
                          ".csui-search.search-input-open"
                        ) &&
                          this.applicationScope.get("id") !== "search" &&
                          p(document.activeElement)[0] === this.ui.input[0] &&
                          this.options.data.showOptionsDropDown &&
                          this.showOptionsDropdown(a);
                    }),
                    this._updateInput(),
                    this.options.data.showOptionsDropDown &&
                      (this.searchboxModel.get("slices") ||
                        this.prepareSlicePopover(),
                      this.searchboxModel.get("search_forms_slice") ||
                        this.prepareSearchFormsPopover()));
          },
          searchIconClicked: function (a) {
            this._dataSynced(),
              this.$el.parent().addClass("search-input-open"),
              this.ui.searchIcon.attr("aria-expanded", "true");
            var g = this.$el.find(".csui-searchbox-option")[0];
            if (
              (p(document).on(
                "click." + this.cid + " keydown." + this.cid,
                this,
                this._hideSearchBar
              ),
              this.resetPageDefaults(a),
              this.options.data.showOptionsDropDown &&
                g &&
                this.searchboxModel.nodeId !== void 0 &&
                (this.$el.find(".csui-searchbox-option")[0].checked =
                  this.options.data.searchFromHere),
              p(".search-bar").is(":visible"))
            ) {
              var I = this.ui.input.val().trim();
              I &&
                (this._setInputValue(I),
                p(a.currentTarget).attr("title", h.startSearch),
                p(a.currentTarget).attr("aria-label", h.startSearch),
                this.trigger("hide:breadcrumbspanel"));
              var D = "",
                A = this.$el.find(".csui-searchbox-option.selected");
              this.options.data.showOptionsDropDown
                ? A && (D = A.val())
                : (D = this.options.data.nodeId),
                history.state &&
                  history.state.search &&
                  (this.previousState = history.state.search),
                I &&
                  (this._setSearchQuery(I, this.options.sliceString, D, a),
                  this._updateInput(),
                  this.options.data.searchFromHere ||
                    p(this.ui.dropDown).addClass(
                      "csui-selected-checkbox-hidden"
                    ),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(a),
                  (this.options.data.searchFromHere = !0)),
                this.previousState &&
                  (this.model.prevSearchState = this.previousState);
            } else
              this.$el.addClass("csui-search-expanded"),
                v.onTransitionEnd(
                  this.$el.parent(),
                  function () {
                    this.isDestroyed ||
                      ((this.skipShowingDropdown = !0),
                      this.ui.input.trigger("focus"),
                      this.ui.input.prop("tabindex", 0),
                      this.$el.addClass("csui-searchbox-ready"),
                      this.searchboxModel && this.searchboxModel.fetched
                        ? (this.showSearchForms(),
                          this.showSlices(),
                          (this.closeDropdown = !1),
                          p(document.activeElement)[0] === this.ui.input[0] &&
                            this.options.data.showOptionsDropDown &&
                            this.showOptionsDropdown(a))
                        : this.listenTo(
                            this.searchboxModel,
                            "change",
                            function () {
                              this.showSearchForms(),
                                this.showSlices(),
                                document.querySelector(
                                  ".csui-search.search-input-open"
                                ) &&
                                  this.applicationScope.get("id") !==
                                    "search" &&
                                  p(document.activeElement)[0] ===
                                    this.ui.input[0] &&
                                  this.options.data.showOptionsDropDown &&
                                  this.showOptionsDropdown(a);
                            }
                          ));
                  },
                  this
                ),
                this._updateInput(),
                p(".binf-navbar-brand").removeClass("binf-navbar-collapse"),
                this.options.data.showOptionsDropDown &&
                  (this.searchboxModel.get("slices") ||
                    this.prepareSlicePopover(),
                  this.searchboxModel.get("search_forms_slice") ||
                    this.prepareSearchFormsPopover()),
                this.model.attributes.where === "" &&
                  ((a.currentTarget.title = ""),
                  p(a.currentTarget).addClass(
                    this.options.data.customSearchIconNoHoverClass
                  ));
          },
          inputTyped: function (a) {
            var g = this.ui.input.val().trim();
            if (a.which === 13)
              a.preventDefault(),
                a.stopPropagation(),
                this._setInputValue(g),
                g
                  ? ((this.closeDropdown = !0), this.searchIconClicked(a))
                  : (this.closeDropdown = !1),
                this.previousValue != g && (this.previousValue = g);
            else if (a.which === 27)
              a.preventDefault(), a.stopPropagation(), this._hideSearchPanel(a);
            else if (
              ((this.closeDropdown = !1),
              a.which === 9 && this._isDropdownVisible() && !a.shiftKey)
            ) {
              if (this.$el.find(".csui-selected-checkbox").is(":visible"))
                this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .addClass("active"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')[0]
                    .focus();
              else {
                var I = this.$el.find(".csui-search-popover-row-body");
                p(I[0]).addClass("active"),
                  p(I[0]).find('input[type="radio"]').trigger("focus");
              }
              a.preventDefault();
            } else
              a.shiftKey && a.key === "Tab"
                ? (this.$el.find(".active").removeClass("active"),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(a))
                : this.inputChanged(a);
          },
          inputChanged: function (a) {
            var g = this.ui.input.val();
            this.ui.clearer.prop("tabindex", g !== "" ? 0 : -1),
              this.ui.formfieldSearch.prop("tabindex", g !== "" ? 0 : -1),
              this.ui.clearer.toggle(!!g.length),
              this.ui.innerSeparator.toggle(!!g.length),
              this.ui.formfieldSearch.toggle(!!g.length),
              a.keyCode === 13 &&
                g &&
                (g ? (this.closeDropdown = !0) : (this.closeDropdown = !1)),
              this.options.data.showOptionsDropDown &&
                this.showOptionsDropdown(a);
          },
          inputClicked: function (a) {
            this.closeDropdown && (this.closeDropdown = !1),
              this.hidePopover(a);
          },
          showOptionsDropdown: function (a) {
            if (
              ((this.hideBackButton = !0),
              !this._isDropdownVisible() &&
                this.options.data.showOptionsDropDown)
            ) {
              var g = a || window.event,
                I = this.getSlices(),
                D =
                  I && I.length > 3
                    ? this._createSliceCollection(I.slice(0, 3))
                    : this._createSliceCollection(I);
              if (
                (!this.searchboxModel.nodeId ||
                (this.applicationScope.get("id") === "search" &&
                  p(this.ui.dropDown).hasClass("csui-selected-checkbox-hidden"))
                  ? (this.$el
                      .find(".csui-selected-checkbox")
                      .addClass("binf-hidden"),
                    p(this.ui.dropDown).addClass(
                      "csui-selected-checkbox-hidden"
                    ))
                  : p(this.ui.dropDown).removeClass(
                      "csui-selected-checkbox-hidden"
                    ),
                g.keyCode !== 27 &&
                  !this.closeDropdown &&
                  (p(this.ui.dropDown).removeClass("binf-hidden"),
                  this.$el.find(".csui-selected-checkbox").is(":visible") &&
                    (this.$el.find(".csui-searchbox-option")[0].checked =
                      this.options.data.searchFromHere),
                  !p(document.body).hasClass("binf-modal-open")))
              ) {
                if (
                  (p(document.body).addClass("binf-search-box-open"),
                  p(document)
                    .find(".csui-navbar.binf-navbar")
                    .addClass("masked"),
                  !p(document).find(".search-box-widget-mask").length)
                ) {
                  var A = document.createElement("div");
                  (A.className = "search-box-widget-mask"),
                    p(document.body).find(".binf-widgets").append(A);
                }
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .on(" keydown.", this.handleKeydownNavbar);
              }
              this.options.data.searchFromHere &&
                (this.$el.find(".csui-searchbox-option").addClass("selected"),
                this.$el.find(".csui-icon").addClass("icon-listview-checkmark"),
                this.$el.find(".csui-icon").addClass("icon-checkbox-selected")),
                I &&
                  (this.searchboxModel.get("slices").more &&
                    this.$el
                      .find(".csui-slices-more")
                      .removeClass("binf-hidden"),
                  (this.searchSlicesListView = new o({
                    originatingView: this,
                    collection: D,
                  }))),
                this.$el.find(".csui-search-form-collection").length &&
                  this.$el
                    .find(".csui-search-form-collection")
                    .removeClass("binf-hidden"),
                this.showSearchForms(),
                this.showSlices();
            }
          },
          prepareOptionsdropdown: function (a) {
            if (this.options.data.showOptionsDropDown) {
              if (!this.searchboxModel.nodeId) {
                var g =
                  m.has(this.options, "context") &&
                  this.options.context.getModel(c);
                g &&
                  g instanceof e &&
                  (g.get("container") || g.get("type") === 5574) &&
                  ((this.searchboxModel.nodeId = g.get("id")),
                  (this.searchboxModel.nodeName = g.get("name")),
                  this.namedSessionStorage.set(
                    this.searchboxModel.nodeId,
                    this.searchboxModel.nodeName
                  ));
              }
              !this.searchboxModel.nodeId &&
                this.model.get("location_id1") &&
                ((this.searchboxModel.nodeId = this.model.get("location_id1")),
                this.namedSessionStorage.get(this.searchboxModel.nodeId) &&
                  (this.searchboxModel.nodeName = this.namedSessionStorage.get(
                    this.searchboxModel.nodeId
                  ))),
                (this.searchOptions = {}),
                this.searchboxModel.nodeId &&
                  ((this.searchOptions.nodeId = this.searchboxModel.nodeId),
                  (this.searchOptions.nodeIdSO = m.uniqueId(
                    "csui-so-" + this.searchboxModel.nodeId
                  )),
                  !this.searchboxModel.nodeName &&
                    this.options.data.nodeName &&
                    (this.searchboxModel.nodeName = this.options.data.nodeName),
                  this.searchboxModel.nodeName &&
                    (this.searchOptions.nodeName =
                      " (" + this.searchboxModel.nodeName + ")"),
                  (this.searchOptions.select = h.searchOptionsSelect),
                  (this.searchOptions.fromHere = h.searchFromHere),
                  (this.searchOptions.checked = this.options.data.searchFromHere
                    ? "checked"
                    : "")),
                this.searchboxModel.get("slices") &&
                  ((this.searchOptions = m.extend(
                    this.searchOptions,
                    this.searchboxModel.attributes
                  )),
                  (this.searchOptions.slices.searchWithinLabel =
                    h.searchWithinLabel),
                  (this.searchOptions.slices.showMore = h.showMore),
                  (this.searchOptions.slices.showMoreAria = h.showMoreAria),
                  (this.searchOptions.slices.more =
                    this.searchOptions.slices.length > 3));
              var I = this.sliceDropDownTemplate(this.searchOptions);
              this.ui.dropDownWrapperClass.html(I),
                this.searchOptions.fromHere &&
                  (this.$el.find(".csui-searchbox-option").addClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-listview-checkmark icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !0));
            }
          },
          destroyOptionspopover: function (a) {
            this.ui.dropDown.html(""), this.ui.dropDown.addClass("binf-hidden");
          },
          selectSearchOption: function (a) {
            a.type === "keydown" && (a.keyCode === 13 || event.keyCode === 32)
              ? (this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .addClass("active"),
                this.$el
                  .find('.csui-selected-checkbox input[type="checkbox"]')
                  .trigger("focus"))
              : a.type === "click" &&
                (this.$el.find(".active").removeClass("active"),
                this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .removeClass("active")
                  .trigger("focus")),
              this.options.data.searchFromHere
                ? ((this.options.data.searchFromHere = !1),
                  this.$el
                    .find(".csui-searchbox-option")
                    .removeClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .removeClass("icon-listview-checkmark"),
                  this.$el
                    .find(".csui-icon")
                    .removeClass("icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !1))
                : ((this.options.data.searchFromHere = !0),
                  this.$el.find(".csui-searchbox-option").addClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-listview-checkmark"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !0));
          },
          handleSelectCheckbox: function (a) {
            if (a.keyCode === 40) {
              var g = this.$el.find(".csui-search-popover-row-body"),
                I = g.index(g.filter(".active"));
              (I = I >= 0 ? I : 0),
                p(g[I]).attr("tabindex", 0),
                p(g[I]).addClass("active"),
                p(g[I]).find('input[type="radio"]')[0].focus();
            }
          },
          hideSearchOptionsDropDown: function (a) {
            var g = this;
            if (
              g.$el.find(".csui-searchbox-option")[0] === document.activeElement
            )
              return !1;
            if (g.options.data.showOptionsDropDown) {
              var I = g;
              return I.showSearchOptionDropDown(a), !0;
            }
          },
          showSearchOptionDropDown: function (a) {
            this.options.data.showOptionsDropDown &&
              (!this.ui.dropDown.is(":hover") || a.type === "click"
                ? (this.ui.dropDown && this.ui.dropDown.addClass("binf-hidden"),
                  p(document.body).hasClass("binf-search-box-open") &&
                    (p(document.body).removeClass("binf-search-box-open"),
                    p(document)
                      .find(".csui-navbar.binf-navbar")
                      .removeClass("masked"),
                    p(document.body).find(".search-box-widget-mask").remove(),
                    p(document)
                      .find(".csui-navbar.binf-navbar")
                      .off(" keydown.", this.handleKeydownNavbar)))
                : this.popoverTimer && clearTimeout(this.popoverTimer));
          },
          keyDownOnClear: function (a) {
            (a.keyCode === 13 || a.keyCode === 32) && this.clearerClicked(a);
          },
          clearerClicked: function (a) {
            a.preventDefault(),
              a.stopPropagation(),
              this._setInputValue(""),
              this.hidePopover(a),
              this.ui.input.trigger("focus");
          },
          keyDownOnFormfieldSearch: function (a) {
            (a.keyCode === 13 || a.keyCode === 32) &&
              this.formfieldSearchClicked(a);
          },
          formfieldSearchClicked: function (a) {
            this.searchIconClicked(a);
          },
          _setSearchQuery: function (a, g, I, D) {
            this.model.clear({ silent: !0 }),
              this.options.context.getModel(d).clear({ silent: !0 });
            var A = {};
            g && (A.slice = g), I && (A.location_id1 = I), a && (A.where = a);
            var B =
              this.search_bar_settings && this.search_bar_settings.full_text;
            B &&
              (B.modifier || B.lookfor) &&
              ((A.modifier = B.modifier), (A.lookfor = B.lookfor)),
              this.model.set(A);
          },
          getSlices: function () {
            var a,
              g,
              I =
                this.options.model && this.options.model.get("slice")
                  ? this.options.model.get("slice")
                  : this.namedLocalStorage.get("selectedSlice");
            return (
              (this.options.sliceString = I),
              I
                ? (g = m.filter(
                    this.searchboxModel.get("slices"),
                    function (D) {
                      if (D.sliceId != I.substring(1, I.length - 1)) return !0;
                      a = D;
                    }
                  ))
                : (g = this.searchboxModel.get("slices")),
              a && g.unshift(a),
              g
            );
          },
          showMore: function () {
            var a = this._createSliceCollection(this.getSlices());
            (this.searchSlicesListView = new o({
              originatingView: this,
              collection: a,
            })),
              this.$el.find(".csui-slices-more").addClass("binf-hidden"),
              this.showSlices(),
              p(
                this.searchSlicesListView.$el.find(
                  '.csui-search-popover-row-body input[type="radio"]'
                )[3]
              )[0].focus();
          },
          _handleSlicesShowMore: function (a) {
            switch (a.keyCode) {
              case 27:
                this.options.data.showOptionsDropDown &&
                  this.hideSearchOptionsDropDown();
                break;
              case 32:
                this.showMore(),
                  p(
                    this.searchSlicesListView.$el.find(
                      ".csui-search-popover-row-body"
                    )[3]
                  ).addClass("active");
                break;
              case 13:
                this.showMore(),
                  p(
                    this.searchSlicesListView.$el.find(
                      ".csui-search-popover-row-body"
                    )[3]
                  ).addClass("active");
                break;
              case 9:
                a.shiftKey
                  ? (p(
                      this.searchSlicesListView.$el.find(
                        ".csui-search-popover-row-body"
                      )[0]
                    ).addClass("active"),
                    p(
                      this.searchSlicesListView.$el.find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                    )[0].focus())
                  : this.searchFormsContainerView.$el.find(
                      ".csui-searchforms-popover-row"
                    ).length
                  ? this.searchFormsContainerView.$el
                      .find(".csui-searchforms-popover-row")[0]
                      .focus()
                  : this.searchFormsContainerView.$el
                      .find(".csui-searchforms-show-more")[0]
                      .focus();
                break;
            }
            a.preventDefault();
          },
          openSearchForm: function (a) {
            if (a.keyCode === 13 || a.keyCode === 32 || a.type === "click") {
              if (
                this.$el
                  .find(".csui-searchforms-popover-row")
                  .hasClass("binf-disabled")
              )
                return;
              this.$el
                .find(".csui-searchforms-popover-row")
                .addClass("binf-disabled"),
                this.hideSearchOptionsDropDown(a);
              var g = p(a.currentTarget).data("searchformid");
              g === "loadAllForms" &&
                ((this.hideBackButton = !1),
                (this.searchForms.isKeyPress =
                  a.keyCode === 13 || a.keyCode === 32),
                this.searchForms.openFormInSidepanel(
                  this.searchboxModel.get("search_forms")
                ));
            } else if (a.keyCode === 9)
              if ((a.preventDefault(), a.shiftKey))
                if (this.$el.find(".csui-searchforms-popover-row").length) {
                  var I = this;
                  setTimeout(function () {
                    I.$el.find(".csui-searchforms-popover-row")[0].focus();
                  }, 0);
                } else
                  this.$el.find(".csui-slices-more").hasClass("binf-hidden")
                    ? this.$el.find(".csui-search-popover-row-body").length
                      ? (p(
                          this.$el.find(".csui-search-popover-row-body")[0]
                        ).addClass("active"),
                        p(
                          this.$el.find(
                            '.csui-search-popover-row-body input[type="radio"]'
                          )[0]
                        ).focus())
                      : this.ui.input && this.ui.input.trigger("focus")
                    : this.$el.find(".csui-slices-more").focus();
              else
                this.hideSearchOptionsDropDown(),
                  this.$el.find(".csui-clearer").is(":visible")
                    ? this.$el.find(".csui-clearer").focus()
                    : this.$el.find(".csui-header-search-icon").focus();
            else
              a.keyCode === 27 &&
                this.options.data.showOptionsDropDown &&
                this.hideSearchOptionsDropDown();
          },
          _hideSearchPanel: function (a) {
            a.data = a.data || this;
            var g = a || window.event,
              I = p(".search-bar"),
              D = a.data,
              A = D.$el.parent();
            p(document)
              .find("." + a.data.options.data.customSearchIconNoHoverClass)
              .removeClass(a.data.options.data.customSearchIconNoHoverClass),
              p(document).find(".csui-input").val(""),
              A.removeClass("search-input-open"),
              v.onTransitionEnd(
                A,
                function () {
                  D.options.parentView &&
                    D.options.parentView.trigger("render:controls"),
                    !this.isDestroyed &&
                      (p(".binf-navbar-brand").addClass("binf-navbar-collapse"),
                      D.$el
                        .removeClass("csui-searchbox-ready")
                        .removeClass("csui-search-expanded"));
                },
                this
              ),
              (p(document).find(
                ".csui-search-box .csui-header-search-icon"
              )[0].title = h.searchIconTitle),
              p(
                p(document).find(".csui-search-box .csui-header-search-icon")[0]
              ).attr("aria-label", h.searchIconTitle),
              p(
                p(document).find(".csui-search-box .csui-header-search-icon")[0]
              ).attr("aria-expanded", "false"),
              (a.data.slice = a.data.model.get("slice")),
              a.data.ui.dropDown.addClass("binf-hidden"),
              p(document.body).hasClass("binf-search-box-open") &&
                (p(document.body).removeClass("binf-search-box-open"),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .removeClass("masked"),
                p(document.body).find(".search-box-widget-mask").remove(),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .off(" keydown.", this.handleKeydownNavbar)),
              p(document)
                .find(".csui-search-box .csui-header-search-icon")
                .removeClass(a.data.options.data.customSearchIconCloseClass)
                .addClass(a.data.options.data.customSearchIconClass),
              p(document).off("click." + this.cid + " keydown." + this.cid);
            var B = a.data;
            B.trigger("hide:searchbar"),
              p(".csui-input").prop("tabindex", -1),
              D.$el.find(".active").removeClass("active"),
              m.isObject(D.ui.searchIcon) && D.ui.searchIcon.trigger("focus");
          },
          _isDropdownVisible: function () {
            return this.ui.dropDown.is(":visible");
          },
          _hideSearchBar: function (a) {
            a.data = a.data || this;
            var g = a || window.event,
              I = p(".search-bar"),
              D = a.data,
              A = D.$el.parent(),
              B = D.ui.input.val().trim(),
              M = I.find(".csui-search-options-dropdown");
            A.hasClass("search-input-open") &&
            B &&
            !p(a.target).is(".csui-input") &&
            D._isDropdownVisible() &&
            M.find(a.target).length === 0
              ? (M.addClass("binf-hidden"),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .removeClass("masked"),
                p(document.body).find(".search-box-widget-mask").remove())
              : ((D.applicationScope.get("id") !== "search" &&
                  I.is(":visible")) ||
                  p(a.target).find(".search-input-open").length ||
                  p(a.target).siblings().find(".search-input-open").length ||
                  p(a.target).hasClass("search-input-open")) &&
                ((g.type === "keydown" &&
                  (g.keyCode === 27 || g.which === 27) &&
                  !p(".search-bar-content .binf-popover").is(":visible")) ||
                  (!p(g.target).closest(I).length &&
                    g.type === "click" &&
                    !p(g.target).closest(".csui-header-search-icon").length &&
                    !p(g.target).closest(".esoc-activityfeed-invisiblebutton")
                      .length)) &&
                D._hideSearchPanel(a);
          },
          _updateInput: function () {
            if (this._isRendered) {
              var a = this.model.get("where") || "";
              this._setInputValue(a);
            }
          },
          _setInputValue: function (a) {
            this.ui.input.val(a),
              this.ui.clearer.toggle(!!a.length),
              this.ui.innerSeparator.toggle(!!a.length),
              this.ui.formfieldSearch.toggle(!!a.length),
              this.options.data.showOptionsDropDown &&
                (this.options.data.nodeName = this.searchboxModel.nodeName);
          },
          searchIconToClose: function () {
            m.isObject(this.ui.searchIcon) &&
              this.ui.searchIcon.hasClass(
                this.options.data.customSearchIconClass
              ) &&
              this.ui.searchIcon
                .removeClass(this.options.data.customSearchIconClass)
                .addClass(this.options.data.customSearchIconCloseClass),
              this.ui.input.addClass("csui-input-focus"),
              p(this.ui.searchIcon).attr("title", h.closeSearch),
              p(this.ui.searchIcon).attr("aria-label", h.closeSearch),
              p(this.ui.searchIcon).removeClass(
                this.options.data.customSearchIconNoHoverClass
              );
          },
          isTabIPad: function () {
            const a = navigator.userAgent,
              g = /iPad/i.test(a);
            return /Android/i.test(a) || g;
          },
          showHideTabIPad: function (a) {
            this.isTabIPad() &&
              (a
                ? p(".binf-widgets .csui-logo-left .csui-logo").show()
                : p(".binf-widgets .csui-logo-left .csui-logo").hide());
          },
        });
      return T;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/search/search.view",
    [
      "csui/widgets/search.box/search.box.view",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/controls/globalmessage/globalmessage",
    ],
    function (x, m, p) {
      "use strict";
      var y = x.extend({
        constructor: function (e) {
          x.call(this, e), (this.searchQuery = e.context.getModel(m));
        },
        onRender: function () {
          var s = function () {
            p.trigger("resize");
          };
          this.listenTo(this, "hide:input", s),
            this.listenTo(this, "show:input", s);
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/impl/nls/root/localized.strings",
    {
      FavoritesIconTitle: "Favorites",
      FavoritesTitleAria: "OpenText Content Management Favorites",
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return "favorite_header_icon-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="csui-favorites-icon-container" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 50 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "favoritesTitleAria") ||
                  (e != null ? o(e, "favoritesTitleAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "favoritesTitleAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 95 },
                    },
                  })
                : i)
            ) +
            `" role="button" aria-haspopup="true" aria-expanded="false">
  <span class="csui-icon-favorites favorite_header_icon ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 2, column: 56 },
                  end: { line: 2, column: 109 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></span>
</div>
<div class="csui-favorites-view-container"></div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_favorites_impl_favorites",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/tabletoolbar/impl/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/tabletoolbar/impl/nls/root/localized.strings", {
    ToolbarAria: "Table toolbar",
    ToolbarItemFilter: "Show filters",
    ToolbarItemFilterAria: "Show filter panel",
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemBrowse: "Browse",
    ToolbarItemCopy: "Copy",
    ToolbarItemEmailLink: "Mail as link",
    ToolbarItemEmailLinkShort: "Mail as link",
    ToolbarItemPaste: "Paste",
    ToolbarItemMove: "Move",
    ToolbarItemShare: "Share",
    ToolbarItemSendTo: "Send to",
    ToolbarItemView: "Open",
    ToolbarItemNavigate: "Visit",
    ToolbarItemViewProperties: "Properties",
    ToolbarItemVersionHistory: "Version history",
    ToolbarItemDelete: "Delete",
    ToolbarItemReserve: "Reserve",
    ToolbarItemUnreserve: "Unreserve",
    ToolbarItemRequestReservation: "Request reservation",
    ToolbarItemUnrequestReservation: "Cancel request reservation",
    ToolbarItemEdit: "Edit",
    ToolbarItemRename: "Rename",
    ToolbarItemRenameFavorite: "Rename favorite",
    ToolbarItemOpenSavedQuery: "Open",
    ToolbarItemExecuteSavedQuery: "Execute",
    ToolbarItemInfo: "Properties",
    ToolbarItemTimeline: "Timeline",
    ToolbarItemToggleTableLayout: "Toggle layout",
    ToolbarItemSettings: "Settings",
    ToolbarItemAddFolder: "Folder",
    ToolbarItemAddDocument: "Document",
    ToolbarItemAdd: "Add",
    ToolbarItemAddItem: "Add item",
    ToolbarItemAddVersion: "Add version",
    ToolbarItemAddCategories: "Add categories",
    ToolbarItemMore: "More actions",
    ToolbarItemMoreAria: "More actions of {0}",
    ToolbarItemPrint: "Print",
    ToolbarItemOriginalEdit: "Edit original",
    ToolbarItemOriginalShare: "Share original",
    ToolbarItemOriginalReserve: "Reserve original",
    ToolbarItemOriginalUnreserve: "Unreserve original",
    ToolbarItemOriginalCopy: "Copy original",
    ToolbarItemOriginalMove: "Move original",
    ToolbarItemOriginalDownload: "Download original",
    ToolbarItemOriginalDelete: "Delete original",
    ToolbarItemCopyLink: "Copy link",
    ToolbarItemOriginalCopyLink: "Copy link original",
    ToolbarItemPermissions: "View permissions",
    ToolbarItemDeletePermission: "Remove from list",
    ToolbarItemEditPermission: "Edit permissions",
    ToolbarItemApplyPermission: "Apply permissions to sub-items",
    ToolbarItemChangeOwnerPermission: "Change owner",
    ToolbarItemRemoveCollectionItems: "Remove from collection",
    ToolbarItemInformation: "Properties",
    ToolbarGoToLocation: "Go to location",
    ToolbarCollect: "Collect",
    ToolbarItemZipAndDownload: "Download",
    ToolbarItemGoBack: "Go back",
    ToolbarItemTreeBrowse: "Show navigation tree",
    ToolbarItemRestructure: "Restructure",
    MenuItemUploadFile: "Upload file",
    MenuItemAddNewFolder: "Add new Folder",
    MenuItemZipAndDownload: "Download",
    MenuItemCopy: "Copy",
    MenuItemMove: "Move",
    MenuItemEmailLink: "Email link",
    MenuItemShare: "Share",
    MenuItemReserve: "Reserve",
    MenuItemUnreserve: "Unreserve",
    MenuItemDelete: "Delete",
    MenuItemSendToDevice: "Send to device",
    MenuItemRename: "Rename",
    MenuItemTimeline: "Timeline",
    MenuItemInformation: "Properties",
    MenuItemCopyLink: "Copy link",
    MenuItemRestructure: "Restructure",
    ToolbarItemComment: "Comment",
    ToolbarItemShowDescription: "Show description",
    ToolbarItemConfiguration: "Configuration",
    ToolbarItemMaximizeWidgetView: "Maximize widget view",
    ToolbarItemRestoreWidgetViewSize: "Restore widget view size",
    AddUserOrGroups: "Add user or group",
    AddOwnerOrGroup: "Add owner or owner group",
    RestorePublicAccess: "Restore public access",
    AddToolbarItemsTitle: "Add {0}",
    ToolbarItemThumbnail: "Grid view",
    ToolbarItemListView: "List view",
    ThumbnailTitle: "Grid view",
    ListViewTitle: "List view",
    ToolbarItemDocPreview: "Intelligent Viewer",
  }),
  csui.define(
    "csui/widgets/favorites/tileview.toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        inlineActionbar: new p(
          {
            inspect: [
              {
                signature: "Properties",
                name: m.ToolbarItemInfo,
                commandData: { dialogView: !0 },
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: m.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            share: [
              {
                signature: "CopyLink",
                name: m.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
            ],
            edit: [
              {
                signature: "Edit",
                name: m.ToolbarItemEdit,
                iconName: "csui_action_edit32",
              },
            ],
            other: [
              {
                signature: "Download",
                name: m.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              { signature: "goToLocation", name: m.ToolbarGoToLocation },
            ],
          },
          {
            maxItemsShown: 1,
            dropDownText: m.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
      };
      s && r(s);
      function r(l) {
        x.each(l, function (f) {
          x.each(f, function (t, i) {
            var o = e[i];
            if (!o) throw new Error("Invalid target toolbar: " + i);
            x.each(t, function (n) {
              (n = new y(n)), o.addItem(n);
            });
          });
        });
      }
      return e;
    }
  ),
  csui.define("csui/widgets/favorites/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/favorites/impl/nls/root/lang", {
    dialogTitle: "Favorites",
    searchTitle: "Search Favorites",
    searchPlaceholder: "Favorites",
    searchAria: "Search for favorites",
    expandAria: "Expand the Favorites widget",
    emptyGroupDefaultText: "This group is empty.",
    emptyListText: "There are no items to display.",
    loadingListText: "Loading results...",
    failedListText: "Loading results failed.",
    loadingText: "Loading favorites",
    favoritesGroupAria: "{0}, Favorites Group",
    favoritesEmptyGroupAria: "{0}, Empty Favorites Group",
    addFav: "Add Favorite",
    addFavAria: "{0} Add Favorite",
    removeFav: "Remove Favorite",
    removeFavAria: "{0} Remove Favorite",
    addFavoriteNameLabel: "Favorite name",
    addFavoriteNamePlaceHolder: "Enter name",
    addFavoriteGroupLabel: "Group",
    addFavoriteAddButtonLabel: "Add",
    addFavoriteCancelButtonLabel: "Cancel",
    nameErrorMaxLengthExceed: "Name cannot be longer than 248 characters.",
    nameErrorContainSemiColon: "Name cannot contain a colon.",
    updateFavoriteFailMessage: `Failed to update Favorite for node "{0}". 

{1}`,
    openFavoritesView: "Open favorites view",
  }),
  csui.define(
    "css!csui/widgets/favorites/impl/favorites.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites/favorites.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/contexts/factories/favorites2",
      "csui/controls/list/list.view",
      "csui/controls/listitem/listitemstandard.view",
      "csui/controls/listitem/simpletreelistitem.view",
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/list/behaviors/list.view.keyboard.behavior",
      "csui/behaviors/collection.state/collection.state.behavior",
      "csui/controls/list/list.state.view",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/models/favorites2",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/progressblocker/blocker",
      "csui/widgets/favorites/tileview.toolbaritems",
      "csui/utils/commands",
      "i18n!csui/widgets/favorites/impl/nls/lang",
      "i18n!csui/controls/listitem/impl/nls/lang",
      "css!csui/widgets/favorites/impl/favorites.view",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v,
      _
    ) {
      "use strict";
      var T = p.defaults({}, x.config(), { openInPerspective: !0 }),
        a = r.extend({
          templateHelpers: function () {
            return {
              title: this.options.data.title || v.dialogTitle,
              icon: this.options.data.titleBarIcon,
              searchPlaceholder: v.searchPlaceholder,
              searchTitle: v.searchTitle,
              searchAria: v.searchAria,
              expandAria: v.expandAria,
              openPerspectiveAria: v.openFavoritesView,
              openPerspectiveTooltip: v.openFavoritesView,
              enableOpenPerspective: this._enableOpenPerspective,
            };
          },
          events: { "click .tile-expand": "onMoreLinkClick" },
          behaviors: {
            ExpandableList: {
              behaviorClass: t,
              expandedView:
                "csui/widgets/favorites2.table/favorites2.table.view",
              orderBy: function () {
                return this.options.orderBy;
              },
              titleBarIcon: function () {
                return this.options.data.titleBarIcon;
              },
              dialogTitle: v.dialogTitle,
              dialogTitleIconNameRight: "csui_action_minimize32",
              dialogClassName: "favorites",
            },
            DefaultAction: { behaviorClass: i },
            TabableRegion: { behaviorClass: o },
            ListViewKeyboardBehavior: { behaviorClass: n },
            CollectionState: {
              behaviorClass: u,
              collection: function () {
                return this.completeCollection;
              },
              stateView: c,
              stateMessages: {
                empty: v.emptyListText,
                loading: v.loadingListText,
                failed: v.failedListText,
              },
            },
          },
          getChildView: function (g) {
            return this.showFlatList ? l : f;
          },
          childViewOptions: function () {
            return {
              templateHelpers: function () {
                if (this instanceof l)
                  return {
                    name: this.model.get("favorite_name"),
                    enableIcon: !0,
                    showInlineActionBar: this.showInlineActionBar,
                    itemLabel: p.str.sformat(
                      _.itemTitleLabel,
                      this.model.get("favorite_name")
                    ),
                  };
                var g,
                  I = this.model.get("name");
                return (
                  this.model.childrenCollection &&
                  this.model.childrenCollection.length === 0
                    ? (g = p.str.sformat(v.favoritesEmptyGroupAria, I))
                    : (g = p.str.sformat(v.favoritesGroupAria, I)),
                  {
                    icon: "mime_fav_group32",
                    name: I,
                    ariaName: g,
                    expand: this.model.searchMode,
                  }
                );
              },
              childViewTemplateHelpers: function () {
                return {
                  icon: this.model.get("icon"),
                  name: this.model.get("favorite_name"),
                  text: v.emptyGroupDefaultText,
                  showInlineActionBar: this.showInlineActionBar,
                  itemLabel: p.str.sformat(
                    _.itemTitleLabel,
                    this.model.get("favorite_name")
                  ),
                };
              },
              checkDefaultAction: !0,
              context: this.context,
              iconSize: this.options.iconSize,
              toolbarData: this.toolbarData,
              refetchNodeActions: this.options.refetchNodeActions,
            };
          },
          childEvents: {
            "click:item": "_onClickItem",
            "click:tree:item": "_onClickTreeItem",
            render: "onRenderItem",
            "before:destroy": "onBeforeDestroyItem",
            "changed:focus": "onChangedfocus",
          },
          constructor: function (I) {
            I || (I = {}),
              p.defaults(I, {
                orderBy: "favorite_name asc",
                iconSize: "contain",
                refetchNodeActions: !0,
              }),
              I.data || (I.data = {}),
              (I.data.titleBarIcon =
                I.data.showTitleIcon === !1
                  ? void 0
                  : "title-icon title-favourites");
            var D = b.getSignatures(w);
            this.completeCollection =
              I.collection ||
              I.context.getCollection(d, {
                detached: !0,
                permanent: !0,
                favorites: {
                  options: {
                    promotedActionCommands: [],
                    nonPromotedActionCommands: D,
                  },
                },
              });
            var A = e.getLimitedResourceScope();
            A.commands?.push("editpermissions"),
              this.completeCollection.favorites.setResourceScope(A);
            var B = y.Collection.extend({
              model: this.completeCollection.model,
            });
            (I.collection = new B()),
              (this.showInlineActionBar =
                I.showInlineActionBar === !1 ? I.showInlineActionBar : !0);
            var M = I.context,
              E = M && M.viewStateModel;
            (this._enableOpenPerspective =
              T.openInPerspective && E && E.get("history")),
              r.prototype.constructor.apply(this, arguments),
              (this.loadingText = v.loadingText),
              S.imbue(this),
              this.listenTo(
                this.completeCollection,
                "update sync",
                p.bind(this._synchronizeCollections, this)
              ),
              this._synchronizeCollections(),
              this.listenTo(this, "render", this._onRender),
              this.listenTo(
                this,
                "change:filterValue",
                this._synchronizeCollections
              ),
              this.showInlineActionBar &&
                ((I.tileViewToolbarItems = w),
                (this.context = M),
                (this.toolbarData = {
                  toolbaritems: w,
                  collection: this.completeCollection.favorites,
                })),
              (this.applicationScope = I.context.getModel(h)),
              this.listenTo(
                this,
                "doc:preview:generic:actions",
                this._highlightRow
              );
          },
          _highlightRow: function (g, I) {
            m("." + I).removeClass(I);
            var D, A;
            if (
              ((D = p.findIndex(this.collection.models, function (P) {
                return (
                  (A = p.findIndex(P.get("favorites"), function (O) {
                    return O.id === g.get("id");
                  })),
                  A != -1
                );
              })),
              A !== -1)
            ) {
              var B = this.$childViewContainer.find(
                  p.str.sformat("div:nth-child({0})", D + 1)
                ),
                M = B && B.find(".cs-list-group a"),
                E = M && M.eq(A);
              E && E.addClass(I);
            }
          },
          _onRender: function () {
            this.$el.addClass("cs-favorites"),
              this.completeCollection.ensureFetched(),
              this.$el.on("keydown", p.bind(this.onKeyDown, this)),
              this._updateAccAttributes();
          },
          _updateAccAttributes: function () {
            var g = this.$el.find(".tile-content"),
              I = g.attr("aria-labelledby");
            g.removeAttr("role aria-expanded aria-labelledby"),
              this.showFlatList
                ? this.$el
                    .find(".tile-content > .binf-list-group")
                    .attr({ role: "listbox", "aria-labelledby": I })
                : this.$el
                    .find(".tile-content > .binf-list-group")
                    .attr({ role: "tree", "aria-labelledby": I });
          },
          onRenderCollection: function () {
            this._updateAccAttributes();
          },
          onRenderItem: function (g) {
            this.showFlatList &&
              ((g._nodeIconView = new C({
                el: g.$(".csui-type-icon").get(0),
                node: g.model,
                size: this.options.iconSize,
              })),
              g._nodeIconView.render(),
              this.completeCollection &&
                this.completeCollection.favorites &&
                this.completeCollection.favorites.length &&
                g.$el.attr("role", "option"),
              g.$el.attr(
                "aria-label",
                p.str.sformat(
                  _.typeAndNameAria,
                  g._nodeIconView.model.get("title"),
                  g.model.get("favorite_name")
                )
              ));
          },
          onBeforeDestroyItem: function (g) {
            this.showFlatList && g._nodeIconView && g._nodeIconView.destroy();
          },
          onChangedfocus: function () {
            this.trigger("changed:focus");
          },
          _onClickItem: function (g) {
            this.triggerMethod("execute:defaultAction", g.model);
          },
          _onClickTreeItem: function (g, I) {
            this.triggerMethod("execute:defaultAction", I.model);
          },
          onClickHeader: function (g) {
            this.options.avoidOpenPerspectiveOnHeader ||
              this.onClickOpenPerspective(g);
          },
          onClickOpenPerspective: function (g) {
            this.applicationScope.set("id", "favorites"),
              this.trigger("open:favorites:perspective");
          },
          onMoreLinkClick: function (g) {
            g.preventDefault(),
              g.stopPropagation(),
              this.triggerMethod("expand");
          },
          _synchronizeCollections: function () {
            var g,
              I = this,
              D = this.completeCollection.at(0),
              A = { connector: this.completeCollection.connector },
              B = { favorite_name: this.options.filterValue };
            if (this.completeCollection.length === 1 && D.get("tab_id") === -1)
              (this.showFlatList = !0),
                (g = new k(void 0, A)),
                g.reset((D.favorites && D.favorites.models) || []),
                g.setFilter(B),
                !I.options.filterValue || I.options.filterValue.length === 0
                  ? I.collection.reset(g.models)
                  : I.listenTo(g, "sync", function () {
                      I.collection.reset(g.models);
                    });
            else {
              I.showFlatList = !1;
              var M = this.isSearchOpen(),
                E = new y.Collection(),
                P = [];
              p.each(this.completeCollection.models, function (O) {
                (g = new k(void 0, A)),
                  g.reset(O.favorites.models),
                  g.setFilter(B);
                var z = new y.Model(O.attributes);
                if (
                  ((z.childrenCollection = g),
                  (z.searchMode = M),
                  z.get("tab_id") === -1 && z.set("flatten", !0),
                  E.add(z),
                  I.options.filterValue && I.options.filterValue.length > 0)
                ) {
                  var F = m.Deferred();
                  P.push(F.promise()),
                    I.listenTo(g, "sync", function () {
                      z.childrenCollection.length === 0 && E.remove(z),
                        F.resolve();
                    });
                }
              }),
                I.options.filterValue && I.options.filterValue.length > 0
                  ? m.when.apply(m, P).then(function () {
                      I.collection.reset(E.models);
                    })
                  : I.collection.reset(E.models);
            }
          },
          getElementByIndex: function (g, I) {
            if (this.showFlatList)
              return r.prototype.getElementByIndex.call(this, g);
            if (isNaN(g) || g < 0) return null;
            var D = this.children.findByIndex(g);
            return D && D.currentlyFocusedElement
              ? D.currentlyFocusedElement(I)
              : null;
          },
        });
      return a;
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/favorites.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/widgets/favorites/favorites.view",
      "csui/utils/contexts/factories/favorites2",
      "css!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    ],
    function (x, m, p, y, s, e, r, l) {
      "use strict";
      var f = p.LayoutView.extend({
        className: "csui-favorites-view initialLoading",
        template: e,
        templateHelpers: function () {
          return {
            title: y.FavoritesIconTitle,
            favoritesTitleAria: y.FavoritesTitleAria,
            highContrast: this.options.highContrast === 2,
          };
        },
        regions: {
          favoritesViewContainerRegion: ".csui-favorites-view-container",
        },
        ui: {
          favoritesButtonContainer: ".csui-favorites-icon-container",
          favoritesViewContainer: ".csui-favorites-view-container",
        },
        events: {
          dragenter: "_hideFavoritesView",
          keydown: "onKeyInView",
          "mouseenter .csui-favorites-view-container":
            "onMouseEnterFavoritesView",
          "mouseenter .csui-favorites-icon-container":
            "onMouseEnterFavoritesView",
          "mouseleave .csui-favorites-view-container":
            "onMouseLeaveFavoritesView",
          "mouseleave .csui-favorites-icon-container":
            "onMouseLeaveFavoritesView",
          "mouseenter .clicked-no-hover": "onMouseEnterClickedNoHoverItem",
          "focus .csui-favorites-icon-container": "onFocusButton",
          "blur .csui-favorites-icon-container": "onBlurButton",
          "blur .csui-favorites-view-container": "onBlurFavoritesViewContainer",
          "click .csui-favorites-icon-container": "onClickFavoritesIcon",
        },
        behaviors: { TabableRegionBehavior: { behaviorClass: s } },
        currentlyFocusedElement: function (t) {
          var i = this.ui.favoritesViewContainer.find(
            ".content-tile .cs-search-button"
          );
          return t.shiftKey && i.length > 0
            ? this.favoritesView._focusSearchButton()
            : this.ui.favoritesButtonContainer;
        },
        constructor: function (i) {
          p.LayoutView.call(this, i),
            this.propagateEventsToRegions(),
            this.listenTo(
              i.context,
              "change:perspective",
              this._hideFavoritesView
            );
        },
        onBeforeDestroy: function () {
          this.favoritesView && this.favoritesView.destroy();
        },
        onRender: function () {
          this.ui.favoritesViewContainer.addClass("binf-hidden");
        },
        onFocusButton: function () {
          this.options.highContrast === 2
            ? this.$el
                .find(".csui-icon-favorites")
                .addClass("fav_header42_mo_black")
            : this.$el.find(".csui-icon-favorites").addClass("fav_header42_mo");
        },
        onBlurButton: function () {
          this.options.highContrast === 2
            ? this.$el
                .find(".csui-icon-favorites")
                .removeClass("fav_header42_mo_black")
            : this.$el
                .find(".csui-icon-favorites")
                .removeClass("fav_header42_mo"),
            this.favoritesViewInFocus !== !0 &&
              document.activeElement !== this.ui.favoritesButtonContainer[0] &&
              this._hideFavoritesView();
        },
        onBlurFavoritesViewContainer: function (t) {
          this.favoritesViewInFocus !== !0 &&
            this.keyboardAction !== !0 &&
            this._hideFavoritesView();
        },
        onMouseEnterFavoritesView: function () {
          this.favoritesViewInFocus = !0;
        },
        onMouseLeaveFavoritesView: function () {
          this.favoritesViewInFocus = !1;
        },
        onMouseEnterClickedNoHoverItem: function (t) {
          t && t.target && m(t.target).removeClass("clicked-no-hover");
        },
        onKeyInView: function (t) {
          switch (t.keyCode) {
            case 9:
              var i = this.ui.favoritesButtonContainer.is(":focus");
              i &&
              t.shiftKey !== !0 &&
              !this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? this._focusOnFavoriteSearch(t)
                : !i && t.shiftKey
                ? (t.preventDefault(),
                  t.stopPropagation(),
                  this._focusOnFavoriteButton())
                : m(t.target).closest(".tile-header").length ||
                  this._hideFavoritesView();
              break;
            case 13:
            case 32:
              m(t.target).closest(".tile-header").length ||
                (this.triggerMethod("click:favorites:icon", t),
                this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                  this._focusOnFavoriteSearch(t));
              break;
            case 40:
              !this.favoritesView ||
              this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? (this.triggerMethod("click:favorites:icon", t),
                  this._focusOnFavoriteSearch(t))
                : this.favoritesViewInFocus !== !0 &&
                  this._focusOnFavoriteSearch(t);
              break;
            case 27:
              this._focusOnFavoriteButton(), this._hideFavoritesView();
              break;
          }
        },
        _focusOnFavoriteButton: function () {
          this.ui.favoritesButtonContainer.trigger("focus"),
            (this.favoritesViewInFocus = !1);
        },
        _focusOnFavoriteSearch: function (t) {
          var i = this.ui.favoritesViewContainer.find(
            ".content-tile .cs-search-button"
          );
          i.length > 0 &&
            (t.preventDefault(),
            t.stopPropagation(),
            (this.favoritesViewInFocus = !0),
            this.favoritesView._moveTo(
              t,
              this.favoritesView._focusSearchButton()
            ));
        },
        _focusOnFavoriteList: function (t) {
          var i = this.ui.favoritesViewContainer.find(
              "> .content-tile > .tile-content > .binf-list-group"
            ),
            o = this.favoritesView.showFlatList
              ? i.find("> .binf-list-group-item")
              : i.find("> .cs-simpletreelistitem");
          o.length > 0 &&
            (t.preventDefault(),
            t.stopPropagation(),
            (this.favoritesViewInFocus = !0),
            this.favoritesView._moveTo(t, this.favoritesView._focusList()));
        },
        _handleClickEvent: function (t) {
          !m(t.target).parents(".csui-favorites-view-container").length &&
            !m(t.target).parents(".csui-favorites-icon-container").length &&
            this._hideFavoritesView();
        },
        _toggleFavoritesView: function () {
          this.ui.favoritesViewContainer.hasClass("binf-hidden")
            ? this._showFavoritesView()
            : this._hideFavoritesView();
        },
        _showFavoritesView: function () {
          this.ui.favoritesViewContainer.removeClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "true"),
            this.$el.addClass("showing-favorites-view"),
            this.favoritesViewContainerRegion.show(this.favoritesView),
            m(document)
              .off("click." + this.cid)
              .on("click." + this.cid, x.bind(this._handleClickEvent, this));
        },
        _hideFavoritesView: function () {
          m(document).off("click." + this.cid),
            this.favoritesView &&
              this.favoritesView.isSearchOpen() &&
              this.favoritesView.searchClicked(event),
            (this.favoritesViewInFocus = !1),
            this.ui.favoritesViewContainer.addClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "false"),
            this.$el.removeClass("showing-favorites-view");
        },
        onClickFavoritesIcon: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            this.options &&
              this.options.parentView &&
              this.options.parentView.trigger("header:control:clicked");
          var i = m(".binf-open>.binf-dropdown-toggle");
          i.length > 0 && i.binf_dropdown("toggle"),
            this._ensureFavoritesView(),
            this._toggleFavoritesView(),
            this._focusOnFavoriteSearch(t);
        },
        _ensureFavoritesView: function () {
          if (!this.favoritesView) {
            var t = this,
              i = x.extend(this.options, {
                showInlineActionBar: !0,
                avoidOpenPerspectiveOnHeader: !0,
              });
            (this.favoritesView = new l(i)),
              this.favoritesView.listenToOnce(
                this.favoritesView.completeCollection,
                "request",
                this.favoritesView.blockActions
              ),
              this.favoritesView.listenToOnce(
                this.favoritesView.completeCollection,
                "sync error",
                this.favoritesView.unblockActions
              ),
              this.listenToOnce(
                this.favoritesView.completeCollection,
                "sync",
                function () {
                  this.$el.removeClass("initialLoading");
                }
              ),
              (this.favoritesView.blockingView.showloadingWheel = !1),
              this.listenTo(
                this.favoritesView,
                "childview:click:tree:item",
                function (o, n) {
                  n.$el && n.$el.addClass("clicked-no-hover"),
                    t._hideFavoritesView(),
                    t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "childview:click:item",
                function (o) {
                  o.$el && o.$el.addClass("clicked-no-hover"),
                    t._hideFavoritesView(),
                    t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "childview:before:execute:command",
                function (o) {
                  t._hideFavoritesView(), t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "before:keyboard:change:focus childview:before:keyboard:change:focus",
                function () {
                  t.keyboardAction = !0;
                }
              ),
              this.listenTo(
                this.favoritesView,
                "after:keyboard:change:focus childview:after:keyboard:change:focus",
                function () {
                  t.keyboardAction = !1;
                }
              ),
              this.listenTo(
                this.favoritesView,
                "open:favorites:perspective",
                function () {
                  this._hideFavoritesView();
                }
              );
          }
        },
      });
      return x.extend(f.prototype, r), f;
    }
  ),
  csui.define("csui/widgets/navigation.header/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/navigation.header/impl/nls/root/lang", {
    profileMenuItemLabel: "Profile",
    switchToClassicMenuItemLabel: "Classic view",
    signOutMenuItemLabel: "Sign out",
    EditPerspective: "Edit page",
    editMultiplePerspectives: "Edit home pages",
    CreatePerspective: "Edit page",
    personalizePage: "Personalize page",
    ContentServerAdministrationMenuItemLabel: "Administration",
    AboutBox: "About",
    RecycleBin: "Recycle bin",
  }),
  csui.define(
    "csui/widgets/navigation.header/profile.menuitems",
    [
      "csui/lib/underscore",
      "i18n!csui/widgets/navigation.header/impl/nls/lang",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/navigation.header/profile.menuitems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        profileMenu: new p(
          {
            profile: [
              { signature: "UserProfile", name: m.profileMenuItemLabel },
            ],
            others: [
              {
                signature: "SwitchToClassic",
                name: m.switchToClassicMenuItemLabel,
              },
              { signature: "EditPerspective", name: m.EditPerspective },
              {
                signature: "EditMultiplePerspectives",
                name: m.editMultiplePerspectives,
              },
              {
                signature: "ContentServerAdministration",
                name: m.ContentServerAdministrationMenuItemLabel,
              },
              { signature: "AboutBox", name: m.AboutBox },
              { signature: "RecycleBin", name: m.RecycleBin },
            ],
            proxy: [],
            signout: [{ signature: "SignOut", name: m.signOutMenuItemLabel }],
          },
          { maxItemsShown: 0, dropDownIconName: "csui_action_caret_down32" }
        ),
      };
      return (
        s &&
          x.each(s, function (r) {
            x.each(r, function (l, f) {
              var t = e[f];
              if (!t) throw new Error("Invalid target toolbar: " + f);
              x.each(l, function (i) {
                (i = new y(i)), t.addItem(i);
              });
            });
          }),
        e
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/profile.menuitems.mask",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.extend({
        constructor: function () {
          var r = x.config(),
            l = new y();
          p.prototype.constructor.call(this, l, { normalize: !1 }),
            m.each(
              r,
              function (f, t) {
                this.extendMask(f);
              },
              this
            ),
            this.storeMask();
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<a href="#" data-binf-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true"
   class="binf-dropdown-toggle nav-profile csui-navbar-icons csui-acc-focusable" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileMenuTitle") ||
                  (e != null ? i(e, "profileMenuTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileMenuTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 88 },
                      end: { line: 2, column: 108 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileMenuAria") ||
                  (e != null ? i(e, "profileMenuAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileMenuAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 122 },
                      end: { line: 2, column: 141 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="csui-profile-default-image image_user_placeholder">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "initials") || (e != null ? i(e, "initials") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "initials",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 66 },
                      end: { line: 3, column: 78 },
                    },
                  })
                : t)
            ) +
            `</span>
  <img class="csui-profile-image binf-img-circle binf-hidden" alt="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileImageAlt") ||
                  (e != null ? i(e, "profileImageAlt") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileImageAlt",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 67 },
                      end: { line: 4, column: 86 },
                    },
                  })
                : t)
            ) +
            '" src="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "imgSrc") || (e != null ? i(e, "imgSrc") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 93 },
                      end: { line: 4, column: 103 },
                    },
                  })
                : t)
            ) +
            `">
</a>
<ul class="binf-dropdown-menu csui-profile-dropdown" role="menu"></ul>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_user.profile_impl_user.profile",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/user",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/controls/toolbar/toolitem.view",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/utils/user.avatar.color",
      "csui/controls/globalmessage/globalmessage",
      "hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
      "csui-ext!csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
      "csui/lib/jquery.binary.ajax",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c, d, h, k, C, S, w) {
      "use strict";
      var b =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/utils/contexts/factories/user"
        ] || {};
      r = r(x.id);
      var v = s.CompositeView.extend({
        classname: "binf-dropdown",
        template: C,
        templateHelpers: function () {
          var _ = l.formatMemberName(this.model);
          return {
            profileMenuTitle: w.profileMenuTitle,
            profileMenuAria: m.str.sformat(w.profileMenuAria, _),
            profileImageAlt: m.str.sformat(w.profileImageAlt, _),
            imgSrc:
              "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
            initials: this.options.model.attributes.initials,
          };
        },
        serializeData: function () {
          return { items: this.collection.toJSON() };
        },
        childView: u,
        childViewContainer: "> .csui-profile-dropdown",
        ui: {
          userProfileMenu: "> .csui-profile-dropdown",
          userProfileMenuHandle: "> a",
          personalizedImage: ".csui-profile-image",
          defaultImage: ".csui-profile-default-image",
          profileDropdownToggler: "> .nav-profile",
        },
        events: {
          "keydown @ui.profileDropdownToggler": "_showDropdown",
          "keydown @ui.userProfileMenu": "_showDropdown",
          "focusout @ui.profileDropdownToggler": "_toggleDropdown",
          "focusout @ui.userProfileMenu": "_toggleDropdown",
        },
        behaviors: { TabableRegion: { behaviorClass: o } },
        currentlyFocusedElement: "> .csui-acc-focusable",
        constructor: function (T) {
          T || (T = {}),
            (this.options = T),
            this._ensureModels(T),
            this._getUserGroups(),
            s.CompositeView.prototype.constructor.call(this, T),
            (this.connector = this.options.context.getModel(t)),
            this.listenTo(this.model, "change", this._refreshUser)
              .listenTo(T.context, "sync error", this._refreshActions)
              .listenTo(this, "render", this._displayUser)
              .listenTo(this, "destroy", this._releasePhotoUrl)
              .listenTo(
                this,
                "childview:toolitem:action",
                this._triggerMenuItemAction
              )
              .listenTo(y, "closeToggleAction", this._closeToggle);
        },
        _getUserGroups: function () {
          let _ = this._getGroupsUrl();
          _ &&
            this.options.connector.makeAjaxCall({ type: "GET", url: _ }).always(
              m.bind(function (T, a, g) {
                if (g && g.status === 200) {
                  let I = T.results;
                  this.options.context._groups = I;
                  let D = !1;
                  m.each(I, function (A) {
                    D =
                      D ||
                      A?.data?.properties?.name?.indexOf(
                        "Business Administrators"
                      ) > -1;
                  }),
                    D &&
                      b?.initialResponse?.data &&
                      ((b.initialResponse.data.businessAdministrator = D),
                      this._ensureModels(this.options));
                }
              }, this)
            );
        },
        _getGroupsUrl: function () {
          let _ = this.options?.context?.getModel(i);
          if (_) {
            let T = _.connector ? _.connector : this.options.connector;
            return (
              (this.options.connector = this.options.connector
                ? this.options.connector
                : T),
              e.combine(
                T.getConnectionUrl().getApiBase("v2"),
                "members/memberof"
              )
            );
          }
        },
        _ensureModels: function (_) {
          var T = _.context,
            a = T.getModel(i);
          (this.username = "ensured"),
            (this.staticMenuItems = c.profileMenu.collection.toJSON()),
            (_.model = a),
            (_.collection = new n(c.profileMenu, {
              status: { context: T },
              commands: f,
              mask: new d(),
            }));
        },
        _refreshUser: function () {
          this._isRendered && !this.isDestroyed && this.render();
        },
        _refreshActions: function () {
          if (this._isRendered && !this.isDestroyed)
            if (S) {
              var _ = this.options,
                T = m
                  .chain(S)
                  .flatten(!0)
                  .map(function (g) {
                    return g(_);
                  })
                  .value(),
                a = this;
              p.whenAll.apply(p, T).always(function (g) {
                var I = new d();
                (g = m
                  .chain(g)
                  .flatten()
                  .pluck("profileMenu")
                  .flatten()
                  .value()),
                  m.each(g, function (D) {
                    if (D && a.staticMenuItems) {
                      for (var A = !1, B = 0; B < a.staticMenuItems.length; B++)
                        if (a.staticMenuItems[B].group === D.group) A = !0;
                        else if (A) {
                          a.staticMenuItems.splice(B + 1, 0, D);
                          break;
                        }
                      A ||
                        a.staticMenuItems.splice(
                          a.staticMenuItems.length - 1,
                          0,
                          D
                        );
                    }
                  }),
                  (g = a.staticMenuItems.concat([])),
                  (g = I.maskItems(g)),
                  c.profileMenu.reset(g);
              });
            } else this.collection.refilter();
        },
        _triggerMenuItemAction: function (_, T) {
          this.ui.profileDropdownToggler.binf_dropdown("toggle"),
            this._executeAction(T.toolItem);
        },
        _executeAction: function (_) {
          var T = _.get("signature"),
            a = f.findWhere({ signature: T }),
            g = this.options.context,
            I = { context: g, toolItem: _, data: _.get("commandData") },
            D = this;
          try {
            if (!a) throw new Error('Command "' + T + '" not found.');
            this.$el.addClass("binf-disabled"),
              a
                .execute(I)
                .done(function (A) {})
                .fail(function (A) {
                  A &&
                    ((A = new l.Error(A)),
                    k.showMessage("error", A.message, A.errorDetails));
                })
                .always(function () {
                  D.$el.removeClass("binf-disabled");
                });
          } catch (A) {
            r.warn(
              `Executing the command "{0}" failed.
{1}`,
              a.get("signature"),
              A.stack
            ) && console.warn(r.last);
          }
        },
        _displayUser: function () {
          this.model.get("id") &&
            (this._displayProfileImage(), this._assignUserColor());
        },
        _displayProfileImage: function () {
          var _ = this._getUserPhotoUrl();
          if (_) {
            var T = { url: _, dataType: "binary" };
            this.connector.makeAjaxCall(T).always(
              m.bind(function (a, g, I) {
                this.isDestroyed ||
                  (I.status === 200
                    ? this._showPersonalizedImage(a)
                    : this._showDefaultImage());
              }, this)
            );
          } else this._showDefaultImage();
        },
        _getUserPhotoUrl: function () {
          var _ = this.connector.connection,
            T = new e(_.url).getCgiScript(),
            a = this.model.get("photo_url");
          if (a && a.indexOf("?") > 0) return e.combine(T, a);
        },
        _showPersonalizedImage: function (_) {
          this._releasePhotoUrl(),
            (this._photoUrl = URL.createObjectURL(_)),
            this.ui.defaultImage.addClass("binf-hidden"),
            this.ui.personalizedImage
              .attr("src", this._photoUrl)
              .removeClass("binf-hidden"),
            this.$el.parents().find(".esoc-userprofile-pic-actions img")
              .length &&
              this.$el
                .parents()
                .find(".esoc-userprofile-pic-actions img")
                .trigger("focus");
        },
        _showDefaultImage: function (_) {
          this._releasePhotoUrl(),
            this.ui.personalizedImage.addClass("binf-hidden"),
            (this.ui.defaultImage[0].innerText =
              this.options.model.attributes.initials),
            this.ui.defaultImage.removeClass("binf-hidden"),
            this.$el.parents().find(" span.esoc-full-profile-avatar-cursor")
              .length &&
              this.$el
                .parents()
                .find(" span.esoc-full-profile-avatar-cursor")
                .trigger("focus");
        },
        _releasePhotoUrl: function () {
          this._photoUrl &&
            (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
        },
        _closeToggle: function () {
          this.$el.hasClass("binf-open") &&
            this.ui.userProfileMenuHandle.trigger("click");
        },
        _showDropdown: function (_) {
          var T = this.ui.userProfileMenu.find("> li > a"),
            a = 0,
            g = this.$el.find(document.activeElement);
          g.length > 0 &&
            ((a = T.index(g[0])),
            _.keyCode === 38 || _.keyCode === 40
              ? (_.preventDefault(),
                _.keyCode === 38 && (a = a === -1 ? T.length - 1 : a - 1),
                _.keyCode === 40 && (a = a === T.length - 1 ? -1 : a + 1),
                a === -1
                  ? this.ui.profileDropdownToggler.trigger("focus")
                  : p(T[a]).trigger("focus"))
              : _.keyCode === 27 &&
                p(g).closest("ul").is(".csui-profile-dropdown")
              ? (_.stopPropagation(),
                this.ui.profileDropdownToggler
                  .trigger("click")
                  .trigger("focus"))
              : (_.keyCode === 32 || _.keyCode === 13) &&
                (_.preventDefault(),
                _.stopPropagation(),
                p(g).trigger("click")));
        },
        _toggleDropdown: function (_) {
          var T = this;
          setTimeout(function () {
            document.activeElement.offsetParent &&
              !document.activeElement.offsetParent.classList.contains(
                "csui-profile-dropdown"
              ) &&
              document.activeElement !== T.ui.profileDropdownToggler[0] &&
              T.ui.userProfileMenu.is(":visible") &&
              p(T.ui.profileDropdownToggler).trigger("click");
          }, 100);
        },
        _assignUserColor: function () {
          var _ = h.getUserAvatarColor(this.model.attributes);
          this.ui.defaultImage.css("background", _);
        },
      });
      return v;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
    [
      "smart/controls/progresspanel/progressbar.maximize/progressbar.maximize.view",
    ],
    function (x) {
      var m = x.extend({
        constructor: function (y) {
          x.prototype.constructor.call(this, y);
        },
      });
      return m;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/logo/logo.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/marionette3",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/url",
      "csui/utils/node.links/node.links",
      "csui/utils/contexts/factories/application.scope.factory",
      "i18n!csui/pages/start/nls/lang",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      const l =
        "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIyIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTYuMTQ3MiAxMC42MTQ4QzE2LjE0NzIgMTQuNDEyNyAxMy45NjMyIDE4LjUzMTkgOC4xMTc3NyAxOC41MzE5QzMuODU0MTMgMTguNTQ3OSAtMS44Mzc3OWUtMDcgMTYuMTM5MSAtMS44Mzc3OWUtMDcgMTAuNjE0OEMtMS44Mzc3OWUtMDcgNi4wMTM5NSAyLjkwNjY2IDIuNDcyOTcgOC42NjM3NyAyLjc4NjEyQzE0Ljc5MDIgMy4xMzEzOSAxNi4xNDcyIDcuODc2NzggMTYuMTQ3MiAxMC42MTQ4Wk01LjIxMTExIDcuNzI0MjNDNC42OTA1NyA4LjU4NzU2IDQuNDMxMjEgOS41ODMxNyA0LjQ2NDM3IDEwLjU5MDdDNC40NjQzNyAxMi45MTkzIDUuNjEyNTggMTUuMDMxIDguMDkzNjggMTUuMDMxQzEwLjU3NDggMTUuMDMxIDExLjY1ODcgMTMuMDg3OSAxMS42NTg3IDEwLjc4MzRDMTEuNzE0NCAxMC4xMTg1IDExLjYzMzUgOS40NDkyNiAxMS40MjA4IDguODE2ODJDMTEuMjA4MiA4LjE4NDM3IDEwLjg2ODMgNy42MDIxNCAxMC40MjIyIDcuMTA1OTZDMTAuMDcyNyA2Ljc5NDA3IDkuNjYwMjYgNi41NjA5NSA5LjIxMjc5IDYuNDIyNDFDOC43NjUzMiA2LjI4Mzg4IDguMjkzMjkgNi4yNDMxNiA3LjgyODcxIDYuMzAzMDFDNy4zMDY0NyA2LjI5MTc5IDYuNzkwMzQgNi40MTY5OCA2LjMzMTI5IDYuNjY2MjJDNS44NzIyMyA2LjkxNTQ2IDUuNDg2MTMgNy4yODAxNCA1LjIxMTExIDcuNzI0MjNWNy43MjQyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik01NS40MjczIDQuNDgwMkM1NS44MzAzIDMuOTc3NjggNTYuMzQwNSAzLjU3MTY2IDU2LjkyMDcgMy4yOTE4NEM1Ny43ODk3IDIuOTQ4MzEgNTguNzE2MyAyLjc3Mzg5IDU5LjY1MDcgMi43Nzc5NkM2MC41NzU4IDIuNzUwMTUgNjEuNDkzNiAyLjk0ODYgNjIuMzI0NiAzLjM1NjA4QzYzLjkzMDQgNC4xNTkwMiA2NC4zMDc4IDUuNTQwMDggNjQuMzA3OCA3Ljg3NjY1VjE4LjE1NDNINTkuOTE1N1Y5LjcxNTM5QzU5Ljk5MTMgOC45NjAwMyA1OS45MjMyIDguMTk3MTggNTkuNzE1IDcuNDY3MTVDNTkuNTQwMSA3LjA5Njk4IDU5LjI1NjcgNi43ODg4NCA1OC45MDI0IDYuNTgzNzJDNTguNTQ4MSA2LjM3ODYxIDU4LjEzOTggNi4yODYyNSA1Ny43MzE3IDYuMzE4OTRDNTUuNDAzMiA2LjMxODk0IDU1LjQwMzIgOC4xODk4IDU1LjQwMzIgMTAuMDYwN1YxOC4xNTQzSDUwLjk2MjlWMy4xNjMzN0g1NS40MjczVjQuNDgwMloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00OC44NTkxIDE0LjI3NjNDNDguNDQ5NiAxNS4xMzU0IDQ3LjE0ODggMTguNTMxOSA0MS4zNzU2IDE4LjUzMTlDMzYuOTExMyAxOC41MzE5IDMzLjc3OTggMTUuODAxOSAzMy43Nzk4IDEwLjg3OThDMzMuNzc5OCA3LjI1MDUxIDM1LjU2MjMgMi43ODYxNCA0MS40OTYxIDIuNzg2MTRDNDIuNDg1OSAyLjcwNTMzIDQzLjQ4MTUgMi44Mzg0NyA0NC40MTUzIDMuMTc2NTJDNDUuMzQ5MSAzLjUxNDU3IDQ2LjE5OTIgNC4wNDk2MiA0Ni45MDc5IDQuNzQ1MzJDNDguODY3MSA2Ljg0OTAzIDQ4Ljk3OTUgOS43Nzk3OCA0OS4wMzU3IDExLjQ4MkgzOC4zMDA0QzM4LjMwMDQgMTMuMzUyOSAzOS4zMzYyIDE1LjIyMzcgNDEuNzIwOSAxNS4yMjM3QzQ0LjEwNTYgMTUuMjIzNyA0NC45MzI3IDEzLjYxNzkgNDUuNTE4OCAxMi41NzRMNDguODU5MSAxNC4yNzYzWk00NC40NTg5IDguNzE5ODlDNDQuNDMwMiA3Ljk0MjExIDQ0LjE0ODMgNy4xOTQ5OCA0My42NTYgNi41OTIwOUM0My4wNjQ3IDYuMDU4OTQgNDIuMjkyMSA1Ljc3MTczIDQxLjQ5NjEgNS43ODkxNUM0MS4wNzM5IDUuNzg3NTQgNDAuNjU2IDUuODczOCA0MC4yNjg5IDYuMDQyNDRDMzkuODgxOSA2LjIxMTA5IDM5LjUzNDEgNi40NTg0MyAzOS4yNDc4IDYuNzY4NzRDMzguNzcgNy4zMzI3NSAzOC40NjEgOC4wMjAyIDM4LjM1NjYgOC43NTIwMUw0NC40NTg5IDguNzE5ODlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTEwLjQ3NyA2LjI3MDk5SDExMy40MjRWMy4xNjM2SDExMC41MTdWLTMuMDYyOTllLTA3SDEwNi4xMTdWMy4xNTU1N0gxMDUuMzk0TDEwMy4zNzkgNi4yNzA5OUgxMDYuMDkzVjEzLjQwOTJDMTA2LjA5MyAxNC44NDY0IDEwNi4wOTMgMTUuOTE0NCAxMDYuNzI3IDE2LjgwNTZDMTA3LjY3NSAxOC4xODY3IDEwOS4zNDUgMTguMjc1IDExMC44NyAxOC4yNzVDMTExLjY1MiAxOC4yNjE4IDExMi40MyAxOC4xODM5IDExMy4xOTkgMTguMDQyMlYxNC41ODk1TDExMS41OTMgMTQuNjQ1N0MxMTAuNDEzIDE0LjY0NTcgMTEwLjQxMyAxMy44NDI4IDExMC40NDUgMTIuOTUxNUwxMTAuNDc3IDYuMjcwOTlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjYuNTIzNyAtMy4wNjI5OWUtMDdINzAuOTIzOFYzLjE1NTU3SDc1LjUwMDZMNzMuNDg1MiA2LjI3MDk5SDcwLjg2NzZWMTIuOTI3NEM3MC44Njc2IDEzLjg1MDggNzAuODY3NiAxNC42MjE2IDcyLjAxNTggMTQuNjIxNkw3My42MjE3IDE0LjU2NTRWMTguMDE4MUM3Mi44NTMzIDE4LjE1OTggNzIuMDc0NCAxOC4yMzc3IDcxLjI5MzEgMTguMjUwOUM2OS43Njc1IDE4LjI1MDkgNjguMDgxNCAxOC4xNjI2IDY3LjE1IDE2Ljc4MTVDNjYuNTQ3NyAxNS44OTAzIDY2LjUxNTYgMTQuODIyMyA2Ni41MTU2IDEzLjM4NTFMNjYuNTIzNyAtMy4wNjI5OWUtMDdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTE3LjQ5NSA2LjI3MDk3SDExNi45NDlWMy42MjEyNUgxMTUuOTQ1VjMuMTYzNTdIMTE4LjQ3NVYzLjYyMTI1SDExNy40ODdMMTE3LjQ5NSA2LjI3MDk3Wk0xMjEuNzU5IDYuMjcwOTdIMTIxLjIyMVY0LjM1MTkzVjMuNzE3NjFMMTIxLjA2OCA0LjIzOTUyTDEyMC40MzQgNi4yNzA5N0gxMTkuOTQ0TDExOS4zMTggNC4yMzk1MkwxMTkuMTU3IDMuNzI1NjRWNC4zNTE5M1Y2LjI3MDk3SDExOC42MzVWMy4xNjM1N0gxMTkuMzc0TDEyMC4xNzcgNS42MjA1OEwxMjAuOTQgMy4xNjM1N0gxMjEuNjc4TDEyMS43NTkgNi4yNzA5N1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04OS4zMzU2IDE0LjI4NDNMODguNTMyNyAxNS41ODVDODcuNzI5OCAxNi43NDEzIDg2LjI2MDQgMTguNTIzOCA4Mi4wMDQ4IDE4LjUyMzhDNzcuNTQwNCAxOC41MjM4IDc0LjU0NTQgMTUuNzkzOCA3NC41NDU0IDEwLjg3MThDNzQuNTQ1NCA3LjI0MjQ1IDc2LjMyNzkgMi43NzgwOCA4Mi4yNjE3IDIuNzc4MDhDODMuMjUxNSAyLjY5NzI3IDg0LjI0NzEgMi44MzA0MSA4NS4xODA5IDMuMTY4NDZDODYuMTE0NyAzLjUwNjUyIDg2Ljk2NDggNC4wNDE1NiA4Ny42NzM1IDQuNzM3MjZDODkuNjMyNyA2Ljg0MDk4IDg5Ljc0NTEgOS43NzE3MiA4OS44MDE0IDExLjQ3NEg3OS4wNjZDNzkuMDY2IDEzLjM0NDggNzkuOTY1MyAxNS4yMTU3IDgyLjM1IDE1LjIxNTdDODQuNzM0OCAxNS4yMTU3IDg1LjQ2NTUgMTMuNjA5OCA4Ni4wMTE1IDEyLjU2Nkw4OS4zMzU2IDE0LjI4NDNaTTg1LjE4NDQgOC43MTk4N0M4NS4xNTU3IDcuOTQyMDggODQuODczNyA3LjE5NDk1IDg0LjM4MTUgNi41OTIwN0M4My43OTAyIDYuMDU4OTEgODMuMDE3NiA1Ljc3MTcgODIuMjIxNiA1Ljc4OTEyQzgxLjc5OTQgNS43ODc1MSA4MS4zODE0IDUuODczNzcgODAuOTk0NCA2LjA0MjQyQzgwLjYwNzMgNi4yMTEwNiA4MC4yNTk2IDYuNDU4NCA3OS45NzMzIDYuNzY4NzFDNzkuNDk1NCA3LjMzMjcyIDc5LjE4NjUgOC4wMjAxNyA3OS4wODIgOC43NTE5OEw4NS4xODQ0IDguNzE5ODdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTA0LjQ2MyAxOC4xNTQ1TDk4Ljk1NDcgMTAuMjYxNkwxMDMuNTQ4IDMuMTU1NTJIOTguNTA1TDk2LjMzNzEgNi41MTE4Mkw5NC4wMDA1IDMuMTU1NTJIODguOTU4TDkzLjkxMjIgMTAuMjYxNkw4OC44MTM1IDE4LjE1NDVIOTMuODU2TDk2LjUyOTggMTQuMDExM0w5OS40MjA0IDE4LjE1NDVIMTA0LjQ2M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMi4yMzM3IDQuNDgwNDlDMjIuNzE1MiAzLjkxMjY2IDIzLjMyMTggMy40NjQxNiAyNC4wMDU5IDMuMTcwMjFDMjQuNjg5OSAyLjg3NjI1IDI1LjQzMjggMi43NDQ4NCAyNi4xNzYxIDIuNzg2MjhDMjkuODYxNyAyLjc4NjI4IDMyLjQ0NzEgNS41ODA1MiAzMi40NDcxIDEwLjU4MjlDMzIuNDQ3MSAxMy42NTgxIDMxLjMyMyAxOC41MjQgMjYuMDIzNiAxOC41MjRDMjUuMzA2OSAxOC41NDA4IDI0LjU5NTQgMTguMzk3NCAyMy45NDEyIDE4LjEwNDNDMjMuMjg2OSAxNy44MTEyIDIyLjcwNjMgMTcuMzc1OCAyMi4yNDE3IDE2LjgyOThWMjMuMTE2OEgxNy43NzczVjMuMTYzNjZIMjIuMjQxN0wyMi4yMzM3IDQuNDgwNDlaTTI1LjIyODcgNi4yMzg5NEMyNC43ODg2IDYuMjM3MDcgMjQuMzU0MiA2LjMzNzY3IDIzLjk1OTggNi41MzI3OEMyMy41NjU0IDYuNzI3OSAyMy4yMjE4IDcuMDEyMTYgMjIuOTU2MyA3LjM2MzA2QzIyLjI5MjIgOC4zMjc3NCAyMS45NjczIDkuNDg1NzYgMjIuMDMyOSAxMC42NTUxQzIxLjk1MDEgMTEuODk4NCAyMi4zMzA1IDEzLjEyODQgMjMuMTAwOSAxNC4xMDc4QzIzLjM1MTEgMTQuMzkyOSAyMy42NTgzIDE0LjYyMjMgMjQuMDAyNyAxNC43ODE0QzI0LjM0NyAxNC45NDA0IDI0LjcyMDkgMTUuMDI1NSAyNS4xMDAyIDE1LjAzMTJDMjcuMjYwMSAxNS4wMzEyIDI4LjIwNzYgMTIuNzU4OCAyOC4yMDc2IDEwLjU1ODhDMjguMjA3NiA4LjcxMiAyNy42NjE2IDYuNzUyODIgMjUuODQ2OSA2LjMyNzI2QzI1LjY0NTMgNi4yNzMwOSAyNS40Mzc0IDYuMjQ2MDkgMjUuMjI4NyA2LjI0Njk3VjYuMjM4OTRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K";
      return m.View.extend({
        tagName: "otc-brand",
        attributes: function () {},
        template: !1,
        constructor: function (i = {}) {
          m.View.apply(this, arguments),
            (this.brandingConfigData = this.options.context.getModel(p));
          var o = this.options?.context?._user?.connector;
          if (((this.logoUrl = "/"), o)) {
            let n = new y(o?.connection?.url ?? location.href);
            this.logoUrl = s.getHomeUrl(n);
          }
          (this.otcData = {
            logosrc: "/img/csui/themes/carbonfiber/image/csui/Smart_View_Logo_Image.svg",
            logourl: this.logoUrl,
            tooltipbrand: "",
            primarytext: "",
            secondarytext: "",
            versiontext: "",
          }),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            ),
            this.listenTo(
              this.options.context,
              "sync:perspective",
              this.updateData
            ),
            (this.performClickAction = !1);
        },
        onShow: function () {
          this.options?.otcEl?.addEventListener(
            "click",
            x.bind(this._onClick, this)
          );
        },
        _onClick: function (t) {
          this.applicationScope.set("id", "");
        },
        updateData: function () {
          let t = this.options?.context?.previewBranding?.get(
              "brandingSettingCodes"
            ),
            i = this?.options?.context?.brandingConfigData?.get(
              "brandingSettingCodes"
            ),
            o = t?.iconThemes ?? i?.iconThemes ?? "default",
            n = t?.customBrandingBgColor ?? i?.customBrandingBgColor ?? "",
            u = t?.primaryText ?? i?.primaryText ?? "",
            c = t?.secondaryText ?? i?.secondaryText ?? "",
            d = t?.versionText ?? i?.versionText ?? "",
            h =
              this?.options?.context?.previewBranding?.get("brandLogoUri") ??
              this?.options?.context?.brandingConfigData?.get("brandLogoUri");
          (h = h?.length ? h : l),
            (this.applicationScope =
              this.options?.applicationScope ??
              this.options.context.getModel(e));
          let k = this?.applicationScope?.id?.length ? this.logoUrl : "",
            C = this?.applicationScope?.id?.length ? r.LandingPageBackTo : "";
          (this.otcData = {
            logosrc: "/img/csui/themes/carbonfiber/image/csui/Smart_View_Logo_Image.svg",
            logourl: k,
            tooltipbrand: "",
            primarytext: "",
            secondarytext: "",
            versiontext: "",
            iconappearance: o,
          }),
          //ORIGINAL CODE
          // (this.otcData = {
          //   logosrc: h,
          //   logourl: k,
          //   tooltipbrand: C,
          //   primarytext: u,
          //   secondarytext: c,
          //   versiontext: d,
          //   iconappearance: o,
          //   backgroundColor: n,
          // }),
          //ORIGINAL CODE
            this.trigger("data:synced");
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/impl/nls/root/lang",
    {
      placeholder: "Search",
      clearerTitle: "Clear keywords",
      searchBoxTitle: "Enter your search term",
      searchOptionsTitle: "Show search options",
      searchOptionsHideTitle: "Hide search options",
      searchFromHere: "Search from here",
      searchIconTitle: "Search",
      searchIconAria: "Search in OpenText Content Management",
      searchOptionTooltip: "Select: {0}",
      startSearch: "Start search",
      searchLandmarkAria: "Global content search",
      searchWithinLabel: "Search within",
      showMore: "Show more",
      showMoreAria: "Show more slices",
      closeSearch: "Close search",
      tooltipstartsearch: "Start search",
      tooltipclearkeywords: "Clear keywords",
      tooltipsearchbutton: "Search",
      tooltipsearchbuttonopen: "Close search",
      arialabelsearchbutton: "Global search",
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/search.box/impl/search.box",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/search.box.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "csui/lib/backbone",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/contexts/factories/search.box.factory",
      "csui/utils/contexts/factories/next.node",
      "csui/utils/namedsessionstorage",
      "csui/widgets/search.forms/search.forms",
      "csui/utils/namedlocalstorage",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/contexts/factories/search.formquery.factory",
      "i18n!csui/controls/app.header/app.header.controls/search.box/impl/nls/lang",
      "css!csui/controls/app.header/app.header.controls/search.box/impl/search.box",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c, d) {
      var h = m.defaults({}, x.config() ?? {}, { enableSearchBarSettings: !0 });
      return y.View.extend({
        template: !1,
        namedSessionStorage: new i(),
        namedLocalStorage: new n("search_bar_settings"),
        performClickAction: !1,
        constructor: function (S = {}) {
          (S.data = m.defaults({}, S.data ?? {}, h)),
            y.View.prototype.constructor.apply(this, arguments);
          var w = this.options.context;
          if (!this.options.model) {
            let b = w.getModel(r);
            (this.options.model = b), (this.model = b);
          }
          (this.applicationScope = w.getModel(l)),
            (this.searchBoxFactory = w.getFactory(f)),
            (this.searchboxModel = this.searchBoxFactory.property),
            (this.searchForms = new o({
              options: this.options,
              connector: this.searchboxModel && this.searchboxModel.connector,
              originatingView: this,
            })),
            (this.brandingConfigData = this.options.context.getModel(u)),
            (this.otcData = { query: "", showFromHere: !1, isFetched: !0 }),
            (this.deferred = p.Deferred()),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            ),
            this.listenTo(w, "sync:perspective", this._perspectiveSynced),
            this.listenTo(w, "change:current:node", this._currentNodeChanged),
            this.listenTo(this.searchboxModel, "change", this.setOTCData),
            this.listenTo(
              this.searchboxModel,
              "change",
              this.updateSearchBarSettings
            ),
            (this.nextmodel = this.options.context.getModel(t)),
            this.listenTo(this, "form:click", this._formClick),
            this.listenTo(this, "slice:click", this._sliceClick),
            this.listenToOnce(this, "fetch:data", this._dataSynced),
            this.listenTo(this, "perform:search", this.performSearch),
            this.listenTo(this, "more:forms:click", this._moreFormsCicked),
            this.stopListening(this.nextmodel, "change:id").listenTo(
              this.nextmodel,
              "change:id",
              this._changeLocation
            ),
            this.options.otcEl.addEventListener(
              "open",
              m.bind(this._onOpen, this)
            ),
            (this.firstOpen = !0);
        },
        _onOpen: function () {
          this.firstOpen &&
            (this._updateInput(),
            this.trigger("data:synced"),
            (this.firstOpen = !1));
        },
        onDestroy: function () {
          this.options.otcEl.removeEventListener(
            "open",
            m.bind(this._onOpen, this)
          );
        },
        performSearch: function (C, S) {
          let w = C.detail.searchstring;
          w &&
            (this._setSearchQuery(w, S, C),
            this._updateInput(),
            this.trigger("data:synced"));
        },
        _changeLocation: function () {
          this.trigger("collapse:search");
        },
        _updateInput: function () {
          var C = this.model.get("where") || "";
          this.otcData.query = C;
        },
        updateData: function () {
          let C =
            this.options?.context?.previewBranding?.get("brandingSettingCodes")
              ?.iconThemes ??
            this.brandingConfigData?.get("brandingSettingCodes")?.iconThemes ??
            "default";
          (this.otcData = m.extend(this.otcData, {
            iconappearance: C,
            tooltipstartsearch: d.tooltipstartsearch,
            tooltipclearkeywords: d.tooltipclearkeywords,
            tooltipsearchbutton: d.tooltipsearchbutton,
            tooltipsearchbuttonopen: d.tooltipsearchbuttonopen,
            arialabelsearchbutton: d.arialabelsearchbutton,
          })),
            this.trigger("data:synced");
        },
        updateSearchBarSettings: function () {
          if (
            ((this.search_bar_settings = this.searchboxModel.get(
              "search_bar_settings"
            )),
            this.search_bar_settings &&
              this.search_bar_settings.full_text &&
              (this.namedLocalStorage.set(
                "full_text",
                this.search_bar_settings.full_text
              ),
              this.model))
          ) {
            var C =
              this.search_bar_settings && this.search_bar_settings.full_text;
            this.model.set("modifier", C.modifier, { silent: !0 }),
              this.model.set("lookfor", C.lookfor, { silent: !0 });
          }
        },
        _formClick: function (C) {
          (this.hideBackButton = !0),
            this.searchForms.isModelFetched(p(C.target).attr("formId"));
        },
        _moreFormsCicked: function (C) {
          (this.hideBackButton = !1),
            (this.searchForms.isKeyPress =
              C.keyCode === 13 || C.keyCode === 32),
            this.searchForms.openFormInSidepanel(
              this.searchboxModel.get("search_forms")
            );
        },
        _sliceClick: function (C) {
          if (p(C.target).attr("checked")) {
            let w = "{" + p(C.target).attr("sliceId") + "}";
            this.namedLocalStorage.set("selectedSlice", w);
          } else this.namedLocalStorage.remove("selectedSlice");
        },
        _perspectiveSynced: function (C, S) {
          this._currentNodeChanged(S);
        },
        _currentNodeChanged: function (C) {
          C instanceof e && (C.get("container") || C.get("type") === 5574)
            ? ((this.searchboxModel.nodeId = C.get("id")),
              (this.searchboxModel.nodeName = C.get("name")),
              this.namedSessionStorage.set(
                this.searchboxModel.nodeId,
                this.searchboxModel.nodeName
              ),
              this.searchboxModel.trigger("change"))
            : ((this.searchboxModel.nodeId = void 0),
              (this.searchboxModel.nodeName = void 0),
              this.searchboxModel.trigger("change"));
        },
        _getSliceString: function () {
          let C = "";
          return (
            this?.namedLocalStorage?.get("selectedSlice") &&
              (C = this?.namedLocalStorage?.get("selectedSlice")),
            C
          );
        },
        _setSearchQuery: function (C, S, w) {
          let b = this._getSliceString();
          this.model.clear({ silent: !0 }),
            this.options.context.getModel(c).clear({ silent: !0 });
          var v = {};
          b && (v.slice = b), S && (v.location_id1 = S), C && (v.where = C);
          var _ =
            this.search_bar_settings && this.search_bar_settings.full_text;
          _ &&
            (_.modifier || _.lookfor) &&
            ((v.modifier = _.modifier), (v.lookfor = _.lookfor)),
            this.model.set(v);
        },
        _dataSynced: function (C, S) {
          var w = this;
          this.searchboxModel &&
            ((this.options.data && this.options.data.alwaysFetchDropdown) ||
              !(this.searchboxModel && this.searchboxModel.fetched)) &&
            this.searchBoxFactory.fetch().then(
              () => {
                w.deferred.resolve();
              },
              () => {
                w.deferred.reject();
              }
            ),
            w.deferred.promise().then(
              () => {
                w.otcData.isFetched = !0;
              },
              () => {
                (w.otcData.isFetched = !1), w.trigger("data:synced");
              }
            );
        },
        setOTCData: function (C) {
          if (this.otcData.isFetched) {
            if (!this.searchboxModel.nodeId) {
              var S =
                m.has(this.options, "context") &&
                this.options.context.getModel(t);
              S &&
                S instanceof e &&
                (S.get("container") || S.get("type") === 5574) &&
                ((this.searchboxModel.nodeId = S.get("id")),
                (this.searchboxModel.nodeName = S.get("name")),
                this.namedSessionStorage.set(
                  this.searchboxModel.nodeId,
                  this.searchboxModel.nodeName
                ));
            }
            if (
              (!this.searchboxModel.nodeId &&
                this.model.get("location_id1") &&
                ((this.searchboxModel.nodeId = this.model.get("location_id1")),
                this.namedSessionStorage.get(this.searchboxModel.nodeId) &&
                  (this.searchboxModel.nodeName = this.namedSessionStorage.get(
                    this.searchboxModel.nodeId
                  ))),
              (this.searchOptions = {}),
              this.searchboxModel.nodeId &&
                ((this.searchOptions.nodeId = this.searchboxModel.nodeId),
                !this.searchboxModel.nodeName &&
                  this.options.data.nodeName &&
                  (this.searchboxModel.nodeName = this.options.data.nodeName),
                this.searchboxModel.nodeName &&
                  (this.searchOptions.nodeName = this.searchboxModel.nodeName)),
              this.searchboxModel.get("slices") &&
                (this.searchOptions = m.extend(
                  this.searchOptions,
                  this.searchboxModel.attributes
                )),
              (this.otcData.slices = this.searchOptions?.slices),
              this.searchOptions?.nodeName
                ? (this.otcData.location = {
                    locationId: this.searchOptions?.nodeId,
                    locationName: this.searchOptions?.nodeName,
                  })
                : (this.otcData.location = void 0),
              (this.otcData.forms =
                this.searchOptions?.search_forms?.recent_search_forms ?? []),
              this.namedLocalStorage.get("selectedSlice"))
            ) {
              let w = this.namedLocalStorage.get("selectedSlice");
              (selectedSliceID = w.substring(1, w.length - 1)),
                (this.otcData.selectedSlice = selectedSliceID);
            }
            this.trigger("data:synced");
          }
        },
        onRender: function () {
          // Explorer Insight START
          window.aiPlusContext = this;

          function addAviatorElementAsIcon() {
            var Menuelement = document.getElementsByTagName("otc-overflow-container")[0];
            
            if (Menuelement) {
                var AviatorElement = document.getElementById('aviator-icon');

                if (AviatorElement) {
                    return;
                } else {
                    const AviatorButtonElement = document.createElement('otc-button');
                    AviatorButtonElement.id = 'aviator-icon';
                    AviatorButtonElement.setAttribute("tabindex", "0");
                    AviatorButtonElement.setAttribute("headeritem", "");
                    AviatorButtonElement.setAttribute("icon", "csui_header:csui_li_header_aviator42");
                    AviatorButtonElement.setAttribute("iconappearance", "default");
                    AviatorButtonElement.setAttribute("slot", "beforeOverflow");
                    AviatorButtonElement.setAttribute("title", "AI+");
                    AviatorButtonElement.style.borderRadius = "16px";
                    
                    const searchIcon = Menuelement.querySelectorAll('otc-button')[0];
                    Menuelement.insertBefore(AviatorButtonElement, searchIcon);
                    
                    // SETUP JS
                    const script = document.createElement("script");
                    script.src = "/img/csui/themes/carbonfiber/marked.min.js";
                    const script2 = document.createElement("script");
                    script2.src = `/img/csui/themes/carbonfiber/aiplus.js?v=${Date.now().valueOf()}`;
                    AviatorButtonElement.appendChild(script);
                    AviatorButtonElement.appendChild(script2);

                    // SETUP FONTS
                    const fonts = [
                      "Poppins-Black.ttf",
                      "Poppins-BlackItalic.ttf",
                      "Poppins-Bold.ttf",
                      "Poppins-BoldItalic.ttf",
                      "Poppins-ExtraBold.ttf",
                      "Poppins-ExtraBoldItalic.ttf",
                      "Poppins-ExtraLight.ttf",
                      "Poppins-ExtraLightItalic.ttf",
                      "Poppins-Italic.ttf",
                      "Poppins-Light.ttf",
                      "Poppins-LightItalic.ttf",
                      "Poppins-Medium.ttf",
                      "Poppins-MediumItalic.ttf",
                      "Poppins-Regular.ttf",
                      "Poppins-SemiBold.ttf",
                      "Poppins-SemiBoldItalic.ttf",
                      "Poppins-Thin.ttf",
                      "Poppins-ThinItalic.ttf",
                    ];
                    
                    fonts.forEach(file => {
                      const link = document.createElement("link");
                      link.rel = "preload";
                      link.as = "font";
                      link.type = "font/ttf";
                      link.href = `/img/csui/themes/carbonfiber/fonts/aiplus_webfonts/${file}`;
                      link.crossOrigin = "anonymous";
                      document.head.appendChild(link);
                    });

                    AviatorButtonElement.addEventListener('click', function() {
                      showAviator();
                    });
                }
            } else {
                setTimeout(addAviatorElement, 1000);
            }
          }

          function checkForMenuElement() {
            var Menuelement = document.getElementById('csui_controls_app.header_app.header.controls_user.profile_user.profile.view_7_control');
            
            if (Menuelement) {
                Menuelement.addEventListener('click', function() {
                    addAviatorElement();             
                });
            } else {
                setTimeout(checkForMenuElement, 1000);
            }
            
            addAviatorElementAsIcon();
          }

          checkForMenuElement();
          // Explorer Insight END 
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/utils/contexts/factories/branding.config.factory",
    ],
    function (x, m, p, y) {
      "use strict";
      return p.View.extend({
        template: !1,
        constructor: function (r = {}) {
          p.View.prototype.constructor.apply(this, arguments),
            (this.from = 0),
            (this.to = 0),
            this.listenTo(this, "get:progress", this._setProgress),
            this.listenTo(
              this,
              "processbar:minimize",
              this._minimizeProgressbar
            ),
            (this.otcData = { slot: "unknown", state: "default" }),
            (this.progressValues = { from: 0, to: 1 }),
            (this.brandingConfigData = this.options.context.getModel(y)),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            );
        },
        updateData: function () {
          let e =
            this.options?.context?.previewBranding?.get("brandingSettingCodes")
              ?.iconThemes ??
            this.brandingConfigData?.get("brandingSettingCodes")?.iconThemes ??
            "default";
          (this.otcData = m.extend(this.otcData, { iconappearance: e })),
            this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues);
        },
        onShow: function () {
          this.options.otcEl.addEventListener(
            "click",
            m.bind(this._maximizeProgressbar, this)
          ),
            this.options.otcEl.addEventListener(
              "keydown",
              m.bind(this._maximizeProgressbar, this)
            );
        },
        _setProgress: function (e, r) {
          r === "rejected"
            ? ((this.otcData.state = "error"), this._progressComplete())
            : r === "resolved"
            ? ((this.otcData.state = "finished"),
              (this.progressValues.to = 100),
              this._progressComplete())
            : e !== this.progressValues.to &&
              ((this.progressValues.from = this.progressValues.to),
              (this.progressValues.to = e),
              e === 100
                ? ((this.otcData.state = "finished"), this._progressComplete())
                : ((this.otcData.state = "default"),
                  this.trigger("update:progress:values", this.progressValues)));
        },
        _minimizeProgressbar: function () {
          (this.otcData.slot = "beforeOverflow"),
            this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues);
        },
        _progressComplete: function () {
          this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues),
            setTimeout(() => {
              (this.otcData.slot = "unknown"),
                (this.otcData.state = "default"),
                this.trigger("data:synced"),
                (this.progressValues.from = 0),
                (this.progressValues.to = 1),
                this.trigger("update:progress:values", this.progressValues),
                this.trigger("processbar:maximize");
            }, 1e3);
        },
        _maximizeProgressbar: function (e) {
          (e.type === "click" || e.keyCode === 13 || e.keyCode === 32) &&
            ((this.otcData.slot = "unknown"),
            this.trigger("data:synced"),
            this.trigger("processbar:maximize"));
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          return '<div class="csui-favorites-view-container"></div>';
        },
      });
      return (
        p.registerPartial(
          "csui_controls_app.header_app.header.controls_favorites_impl_favorites",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/impl/nls/root/localized.strings",
    {
      FavoritesIconTitle: "Favorites",
      FavoritesTitleAria: "OpenText Content Management Favorites",
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/favorites.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/widgets/navigation.header/controls/favorites/favorites.view",
      "hbs!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
      "i18n!csui/controls/app.header/app.header.controls/favorites/impl/nls/localized.strings",
      "css!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = y.extend({
        template: s,
        constructor: function (f) {
          y.call(this, f),
            (this.brandingConfigData = this.options.context.getModel(p)),
            (this.otcData = {
              icon: "csui_header:csui_li_header_fav42",
              className: "csui-favorites",
              arialabel: e.FavoritesTitleAria,
              title: e.FavoritesIconTitle,
              overflowValue: e.FavoritesIconTitle,
            }),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            );
        },
        updateData: function () {
          let l =
            this.options?.context?.previewBranding?.get("brandingSettingCodes")
              ?.iconThemes ??
            this.brandingConfigData?.get("brandingSettingCodes")?.iconThemes ??
            "default";
          (this.otcData = m.extend(this.otcData, { iconappearance: l })),
            this.trigger("data:synced");
        },
        onRender: function () {
          x(this.ui.favoritesViewContainer)[0].classList.add("binf-hidden"),
            x(this?.options?.otcEl)
              .unbind("click")
              .bind("click", m.bind(this.onClickFavoritesIcon, this)),
            x(this?.options?.otcEl)
              .unbind("blur")
              .bind("blur", m.bind(this.onBlurButton, this)),
            x(this?.options?.otcEl).on(
              "mouseenter",
              m.bind(this._mouseEnterButton, this)
            ),
            x(this?.options?.otcEl).on(
              "mouseleave",
              m.bind(this._mouseLeaveButton, this)
            ),
            x(this?.options?.otcEl)
              .closest("otc-overflow-container")[0]
              .addEventListener(
                "blur",
                m.bind(this._onBlurOverflowButton, this)
              );
        },
        _onBlurOverflowButton: function () {
          this._hideFavoritesView();
        },
        _mouseEnterButton: function () {
          this.favoritesViewInFocus = !0;
        },
        _mouseLeaveButton: function () {
          this.favoritesViewInFocus = !1;
        },
        documentClick: function (l) {
          !x(l.target).parents(".csui-favorites-view-container").length &&
            !x(l.target).parents(".csui-favorites-icon-container").length &&
            l.target !== this?.el &&
            this._hideFavoritesView();
        },
        _showFavoritesView: function () {
          this.ui.favoritesViewContainer.removeClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "true"),
            this.$el.addClass("showing-favorites-view"),
            this.favoritesViewContainerRegion.show(this.favoritesView),
            this.favoritesViewContainerRegion.el.classList.remove(
              "binf-hidden"
            ),
            x(document)
              .off("click." + this.cid)
              .on("click." + this.cid, m.bind(this.documentClick, this)),
            this?.options?.otcEl?.setAttribute("menuopen", "");
        },
        _hideFavoritesView: function () {
          x(document).off("click." + this.cid),
            this.favoritesView &&
              this.favoritesView.isSearchOpen() &&
              this.favoritesView.searchClicked(event),
            (this.favoritesViewInFocus = !1),
            this.ui.favoritesViewContainer.addClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "false"),
            this.$el.removeClass("showing-favorites-view"),
            this?.options?.otcEl?.removeAttribute("menuopen");
        },
        onClickFavoritesIcon: function (l) {
          l.preventDefault(),
            l.stopPropagation(),
            this.options &&
              this.options.parentView &&
              this.options.parentView.trigger("header:control:clicked");
          var f = x(".binf-open>.binf-dropdown-toggle");
          f.length > 0 && f.binf_dropdown("toggle"),
            this._ensureFavoritesView(),
            this._toggleFavoritesView(),
            this._focusOnFavoriteSearch(l);
        },
        _focusOnNextElement: function () {
          let l = document.getElementsByTagName("otc-header-bar");
          var f = l[0].querySelectorAll("otc-toolbaritem");
          let t = l[0].querySelector("otc-overflow-container"),
            i = f[0].nextSibling;
          i?.getAttribute("slot") !== "otc-overflow-slot"
            ? i.focus()
            : t.focus();
        },
        onKeyInView: function (l) {
          let f = document.getElementsByTagName("otc-header-bar");
          var t = f[0].querySelectorAll("otc-toolbaritem");
          let i = f[0].querySelectorAll("[slot='afterOverflow']");
          switch (l.keyCode) {
            case 9:
              var o = x(this?.options?.otcEl).is(":focus");
              o &&
              l.shiftKey !== !0 &&
              !this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? this._focusOnFavoriteSearch(l)
                : !o && l.shiftKey
                ? (l.preventDefault(),
                  l.stopPropagation(),
                  this?.options?.otcEl?.getAttribute("slot") !==
                  "otc-overflow-slot"
                    ? this._focusOnFavoriteButton()
                    : this._focusOnOverflowButton())
                : !x(l.target).closest(".tile-header").length &&
                  this.favoritesViewInFocus &&
                  (this._hideFavoritesView(),
                  this?.options?.otcEl?.getAttribute("slot") !==
                  "otc-overflow-slot"
                    ? this._focusOnNextElement()
                    : i[0].focus(),
                  l.preventDefault());
              break;
            case 13:
            case 32:
              this?.options?.otcEl?.getAttribute("slot") === ""
                ? x(l.target).closest(".tile-header").length ||
                  (this.triggerMethod("click:favorites:icon", l),
                  this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                    this._focusOnFavoriteSearch(l))
                : x(l.target).closest(".tile-header").length ||
                  (this.onClickFavoritesIcon(l),
                  this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                    this._focusOnFavoriteSearch(l));
              break;
            case 40:
              this?.options?.otcEl?.getAttribute("slot") === "" &&
                (!this.favoritesView ||
                this.ui.favoritesViewContainer.hasClass("binf-hidden")
                  ? (this.triggerMethod("click:favorites:icon", l),
                    this._focusOnFavoriteSearch(l))
                  : this.favoritesViewInFocus !== !0 &&
                    this._focusOnFavoriteSearch(l));
              break;
            case 27:
              this?.options?.otcEl?.getAttribute("slot") !== "otc-overflow-slot"
                ? this._focusOnFavoriteButton()
                : this._focusOnOverflowButton(),
                this._hideFavoritesView();
              break;
          }
        },
        _focusOnFavoriteButton: function () {
          this.options?.otcEl?.focus(), (this.favoritesViewInFocus = !1);
        },
        _focusOnOverflowButton: function () {
          this.options?.otcEl?.closest("otc-overflow-container")?.focus(),
            (this.favoritesViewInFocus = !1);
        },
        onBlurButton: function () {
          this.favoritesViewInFocus !== !0 &&
            document.activeElement !== this?.options?.otcEl &&
            this._hideFavoritesView();
        },
      });
      return r;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/impl/nls/root/localized.strings",
    { HelpIconTitle: "Help", HelpIconAria: "Help pages, opens in new window" }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/help.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/utils/contexts/factories/branding.config.factory",
      "i18n!csui/controls/app.header/app.header.controls/help/impl/nls/localized.strings",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.extend({
        template: !1,
        constructor: function (l) {
          p.call(this, l),
            (this.brandingConfigData = this.options.context.getModel(y)),
            (this.otcData = {
              icon: "csui_header:csui_li_header_help42",
              title: s.HelpIconTitle,
              arialabel: s.HelpIconAria,
              overflowValue: s.HelpIconTitle,
            }),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            );
        },
        onShow: function () {
          var r = this;
          this.el.setAttribute("tabindex", -1),
            this.options?.otcEl?.addEventListener(
              "click",
              x.bind(this._onClick, this)
            ),
            m(this.options.otcEl).on("keydown", function (l) {
              (l.keyCode === 32 || l.keyCode === 13) &&
                (l.preventDefault(), r.triggerMethod("click:help"));
            });
        },
        updateData: function () {
          let r =
            this.options?.context?.previewBranding?.get("brandingSettingCodes")
              ?.iconThemes ??
            this.brandingConfigData?.get("brandingSettingCodes")?.iconThemes ??
            "default";
          (this.otcData = x.extend(this.otcData, { iconappearance: r })),
            this.trigger("data:synced");
        },
      });
      return e;
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/user.profile/impl/user.profile",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/utils/contexts/factories/member",
      "csui/utils/contexts/factories/user",
      "csui/utils/contexts/factories/recycle.bin",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/controls/globalmessage/globalmessage",
      "csui-ext!csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "css!csui/controls/app.header/app.header.controls/user.profile/impl/user.profile",
      "csui/lib/jquery.binary.ajax",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c, d, h) {
      "use strict";
      var k =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/utils/contexts/factories/user"
        ] || {};
      e = e(x.id);
      var C = y.ItemView.extend({
        template: !1,
        serializeData: function () {
          return { items: this.collection.toJSON() };
        },
        constructor: function (w) {
          w || (w = {}),
            y.ItemView.prototype.constructor.call(this, w),
            (this.model = this.options.context.getModel(f)),
            (this.userModel = this.options.context.getModel(t)),
            this.options.context
              .getModel(i, { permanent: !0, detached: !0 })
              .ensureFetched(),
            (this.connector = this.options.connector =
              this.model.connector ??
              this.userModel.connector ??
              this.options.connector),
            this._ensureModels(!0),
            (this.otcData = {
              initials: this.model?.attributes?.initials ?? "",
              interactive: "",
              image: "",
              arialabel: h.profileMenuTitle,
              title: h.profileMenuTitle,
              collection: this.collection,
            }),
            this.model.ensureFetched().then(
              m.bind(function () {
                this._setUserData(), this._getUserGroups();
              }, this)
            ),
            this.listenTo(this.model, "change", this._setUserData)
              .listenTo(this.userModel, "change", this._setUserMeberData)
              .listenTo(w.context, "sync error", this._refreshActions)
              .listenTo(this, "destroy", this._releasePhotoUrl)
              .listenTo(
                this,
                "childview:toolitem:action",
                this._triggerMenuItemAction
              ),
            this.listenTo(
              this,
              "execute:action",
              m.bind(function (b) {
                this._executeAction(b);
              }, this)
            ),
            this.listenTo(
              this,
              "set:focus",
              m.bind(function () {
                this.options?.otcEl?.focus();
              }, this)
            );
        },
        _executeAction: function (S) {
          var w = S.get("signature"),
            b = l.findWhere({ signature: w }),
            v = this.options.context,
            _ = {
              context: v,
              toolItem: S,
              originatingView: this,
              data: S.get("commandData"),
            },
            T = this;
          try {
            if (!b) throw new Error('Command "' + w + '" not found.');
            b.execute(_)
              .done(function (a) {})
              .fail(function (a) {
                a &&
                  ((a = new r.Error(a)),
                  c.showMessage("error", a.message, a.errorDetails));
              })
              .always(function () {});
          } catch (a) {
            e.warn(
              `Executing the command "{0}" failed.
{1}`,
              b.get("signature"),
              a.stack
            ) && console.warn(e.last);
          }
        },
        _getUserGroups: function () {
          let S = this._getGroupsUrl();
          S &&
            this.options.connector.makeAjaxCall({ type: "GET", url: S }).always(
              m.bind(function (w, b, v) {
                if (v && v.status === 200) {
                  let _ = w.results;
                  this.options.context._groups = _;
                  let T = !1;
                  m.each(_, function (a) {
                    T =
                      T ||
                      a?.data?.properties?.name?.indexOf(
                        "Business Administrators"
                      ) > -1;
                  }),
                    T &&
                      k?.initialResponse?.data &&
                      ((k.initialResponse.data.businessAdministrator = T),
                      this._ensureModels(this.options));
                }
              }, this)
            );
        },
        _ensureModels: function (S = !1) {
          (this.staticMenuItems = n.profileMenu.collection.toJSON()),
            (this.collection = S
              ? new o([])
              : new o(n.profileMenu, {
                  status: { context: this.options.context },
                  commands: l,
                  mask: new u(),
                }));
        },
        _getGroupsUrl: function () {
          if (this.model)
            return s.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "members/memberof"
            );
        },
        _refreshActions: function () {
          if (this._isRendered && !this.isDestroyed)
            if (d) {
              var S = this.options,
                w = m
                  .chain(d)
                  .flatten(!0)
                  .map(function (v) {
                    return v(S);
                  })
                  .value(),
                b = this;
              p.whenAll.apply(p, w).always(function (v) {
                var _ = new u();
                (b.staticMenuItems = n.profileMenu.collection.toJSON()),
                  (v = m
                    .chain(v)
                    .flatten()
                    .pluck("profileMenu")
                    .flatten()
                    .value()),
                  m.each(v, function (T) {
                    if (T && b.staticMenuItems) {
                      for (var a = !1, g = 0; g < b.staticMenuItems.length; g++)
                        if (b.staticMenuItems[g].group === T.group) a = !0;
                        else if (a) {
                          b.staticMenuItems.splice(g + 1, 0, T);
                          break;
                        }
                      a ||
                        b.staticMenuItems.splice(
                          b.staticMenuItems.length - 1,
                          0,
                          T
                        );
                    }
                  }),
                  (v = b.staticMenuItems.concat([])),
                  (v = _.maskItems(v)),
                  n.profileMenu.reset(v),
                  (b.collection = new o(n.profileMenu, {
                    status: { context: b.options.context },
                    commands: l,
                    mask: new u(),
                  })),
                  (b.otcData.collection = b.collection),
                  b._setOtcData();
              });
            } else this.collection.refilter();
        },
        _setUserMeberData: function () {
          (this.model.attributes = m.extend(
            this.model.attributes,
            this.userModel.attributes
          )),
            this._setUserData();
        },
        _setUserData: function () {
          var S = this._getUserPhotoUrl();
          if (S) {
            var w = { url: S, dataType: "binary" };
            this.connector.makeAjaxCall(w).always(
              m.bind(function (b, v, _) {
                this.isDestroyed ||
                  (_.status === 200
                    ? this._setPersonalizedImage(b)
                    : ((this.otcData.image = ""), this._setOtcData()));
              }, this)
            );
          } else (this.otcData.image = ""), this._setOtcData();
        },
        _getUserPhotoUrl: function () {
          var S = this.connector.connection,
            w = new s(S.url).getCgiScript(),
            b = this.model.get("photo_url");
          if (b && b.indexOf("?") > 0) return s.combine(w, b);
        },
        _setPersonalizedImage: function (S) {
          this._releasePhotoUrl(), (this._photoUrl = URL.createObjectURL(S));
          let w = S;
          var b = new FileReader();
          b.readAsDataURL(w),
            (b.onloadend = m.bind(function () {
              var v = b.result;
              (this.otcData.image = v), this._setOtcData();
            }, this));
        },
        _setOtcData: function () {
          (this.otcData = m.extend(this.otcData, {
            image: this.otcData.image ?? "",
            initials: this.model.attributes.initials,
            arialabel: m.str.sformat(
              h.profileMenuAria,
              this.model.get("initials"),
              this.model.get("display_name")
            ),
            collection: this.collection,
          })),
            this.trigger("data:synced");
        },
        _releasePhotoUrl: function () {
          this._photoUrl &&
            (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
        },
      });
      return C;
    }
  ),
  csui.define(
    "csui/themes/carbonfiber/ot-icons/icons_csui_header",
    [],
    function () {
      typeof otIconsRepository > "u" && (window.otIconsRepository = {}),
        (window.otIconsRepository.csui_header = {
          csui_li_header_fav42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .st0--header-li_header_fav42{fill:#333333;} </style> <path class="st0--header-li_header_fav42 ot-metaphor" d="M21.475,12.142l2.561,5.188c0.077,0.156,0.226,0.265,0.399,0.29l5.726,0.832  c0.435,0.063,0.608,0.598,0.294,0.904l-4.143,4.039c-0.125,0.122-0.182,0.297-0.152,0.469l0.978,5.703  c0.074,0.433-0.38,0.763-0.769,0.559l-5.121-2.692c-0.154-0.081-0.339-0.081-0.493,0l-5.121,2.692  c-0.389,0.204-0.843-0.126-0.769-0.559l0.978-5.703c0.029-0.172-0.028-0.347-0.152-0.469l-4.143-4.039  c-0.315-0.307-0.141-0.841,0.294-0.904l5.726-0.832c0.173-0.025,0.322-0.134,0.399-0.29l2.561-5.188  C20.719,11.748,21.281,11.748,21.475,12.142z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5" /></svg>',
          },
          csui_li_header_help42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .st0--header-li_header_help42{fill:#333333;} </style> <path class="st0--header-li_header_help42 ot-metaphor" d="M22.15,18.903c1.5-1,2.8-1.9,2.8-3.6c0-1.6-1.3-3.1-3.9-3.1  c-1.669-0.079-3.211,0.599-4.377,1.734c-0.497,0.485-1.311,0.421-1.774-0.096l0,0c-0.442-0.494-0.436-1.258,0.037-1.723  c1.686-1.657,4.013-2.6,6.414-2.515c4,0,6.5,2.3,6.5,5.1s-1.9,4.1-3.7,5.3c-1.4,1-2.7,1.8-2.7,3.3c0,0.229,0.058,0.458,0.158,0.675  c0.261,0.57,0.04,1.24-0.531,1.498l0,0c-0.457,0.206-1.015,0.094-1.312-0.31c-0.451-0.611-0.714-1.337-0.714-2.063  C19.05,21.003,20.65,20.003,22.15,18.903z M20.95,28.803c1,0,1.8,0.8,1.8,1.8s-0.8,1.8-1.8,1.8s-1.8-0.8-1.8-1.8  S19.95,28.803,20.95,28.803C20.95,28.703,20.95,28.703,20.95,28.803z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5" /></svg>',
          },
          csui_li_header_search42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .st0--header-li_header_search42{fill:#333333;} </style> <path class="st0--header-li_header_search42 ot-metaphor" d="M30.71,29.29l-5.04-5.04c1.08-1.4,1.73-3.15,1.73-5.05c0-4.52-3.68-8.2-8.2-8.2S11,14.68,11,19.2  s3.68,8.2,8.2,8.2c1.9,0,3.65-0.65,5.05-1.73l5.04,5.04C29.49,30.9,29.74,31,30,31s0.51-0.1,0.71-0.29  C31.1,30.32,31.1,29.68,30.71,29.29z M19.2,25.4c-3.42,0-6.2-2.78-6.2-6.2s2.78-6.2,6.2-6.2s6.2,2.78,6.2,6.2  C25.4,22.62,22.62,25.4,19.2,25.4z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5" /></svg>',
          },
          csui_li_header_searchOpen42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .st0--header-li_header_searchOpen42{fill:#333333;} </style> <path class="st0--header-li_header_searchOpen42 ot-metaphor" d="M17,29.5c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l6.8-6.8l-6.8-6.8c-0.4-0.4-0.4-1,0-1.4  s1-0.4,1.4,0L26,21l-8.2,8.2C17.6,29.4,17.3,29.5,17,29.5z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5" /></svg>',
          },
          csui_li_header_user42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <defs> <clipPath id="circleView"> <circle cx="21" cy="21" r="21" fill="#FFFFFF" /> </clipPath> </defs> <image x="0" y="0" width="42" height="42" clip-path="url(#circleView)" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACqgAwAEAAAAAQAAACoAAAAAJyDICAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABvVJREFUWAndWWlMVFcU/t6bGbZWBZGgKFiNotVWRAvV1CpqKg7FLXFBSJtqiP2h1FGjadOYoL8MoqDWpj8a11ZbtdJSNjfUWI0WrdaqaN1lEREB2Zlh3uu5M/PKm+XNvBlMf/Qkh3fvPcv95t5zz13g0FPSZ/QGx08mjoIgRoAjBh9G31qIXDVEsRo8nqDVeBZnvm7xtTvOJ8PZK8PRhbkAN5/spxLzxCZikVhLrCE2E3cRsz78iE0kLSWVnwDhZxTveE5tqsk7oHMNwTDiC/K+ipjZMoCM1ZJAiuzHmOnvZvpkEeAmNcbqgCZkahHU+Bk5zCQOJGaj5pIC/LSI7BeCiroGdBjZgCoSE7bSz12PuOCdyMxkP0KRPANlo2jijlCsJZAXNqV2pNXw+Hh6HGbFj8bowf0xtH8oNDwPsyDg/tMXuPmkBvkXb2B/6WVLm52xtSJQPJdA45+C/KxmF3JLk3ugSaujKZ6KSTOSWOfoZPa7byE7fTaGR4Q5ipzqdyprsebbX1BYdstJRg0svh+C4/QozHngSkEZqD5jFDjNRTJyOdXLZk7ENysWkG9lF44dCqKI9G0/YPeJ3x1FrM5CoQW8EI+C7XcdFZym0qIwb3kozNpzVO5L7BSPaVPHY5chxSuQzC/7UWwWyiueWUKCtcmILUotpbRkDJ6yFw/Od8pkLlbs+GU6dOqOktIAi6Fcm8p+Wg02fZLsNUjJDQO7aUkyWGy7IDYoUfDrPIwFC+wG0Vk7POhLUn6P2CkmmePFU8ZhUL9gVvSZhoSHYuH7Y5XsWb/T0DporVzBHmiigY3i58R2v0ZuED9isLzqczlueJQ7W+pfXI9Za/pJSvZANdhIAvs2SdP2jR7oeYU7mLisqvCjo3y2XjLuBmVJRVhKApdTLhmwPPkqaOiAfwdLyR3hEJdjpuENptANVBTTqO52K2EGIqWYV0Fms9uNSOpCAM+lsEo3UE5YSHV2eHBLTW12WcOtrjvhy7Z2d2JJRqNqwWUDOmvFEMpyIyWpu29dk88nNTu3dU2tdnXlChcLWuTWERV0elI0KSt3S3oHBXRXelDqFajaTxcNp9429cJQ6lNV8EWG9SyHSr8tUn0uNtPuMsQKVOToVO5+tUsd3Kn06rwrmTl9b1c+c2pTaGA53Tb14FgWV3W6yD5aii51K1ahX8DYZcbWvDOKcgcBbatilG3qxf4OQsVqUVk5luQcVJSrEaRm7cfp6/fUqFp1OETYph6N6q2AH89dRW2jb6u/sq4ReReue9MdWz310og+9sbSRFPHTuy+0N5TZXRZVbVuJfe0M3CPbUC5SmpVlZ4k610nLklF1V+2qykcmt35IFxitRUoL1aRplc/8xbdhQ6c+cNdB06yPSfL6B5V59TuoYEwilVWoGZ23/a8fTo6XJp7EOdvPXRsdlkv/fMuPv3qkEuZh0YdXf5KrUAnhFwhZa8TZKepCxsOHPPQj1W88eAxsNj2gSpQuP2mFSi7U3M4Qk68itPpY6Oxb02aqr4PrPsICW8PU6UrUzJS+TCx2J3kkw0JEHBapuRUZFeQD2KjMT0mGlNjhiGibx8nHU8NVS9egoXBqWt/4yQxq7slkZ+I4q0Xu4GynSnJcJaMJhKzSxb8dVpMixmOGbEjkDh+JN6MDGfNr5RuPq7B8at3cOzKbdoE7lp2LVsHbHZPoyg3kdXlQIGkVe/QKJcxwZghEThI0zUqSvWmxcx6RH89eorFWfvAwBOJ4IQxFJ83XDtNWnWISzIY6WWD0t5/T9fuV4k0s0boDXvkAK2LSd6iFTIoodZNWJ1jbuv0am3JvfhUbmrvwOR121lqeIoA0xq5E2eg+dvY+SupoaW9a1xG9iu7I8k7dVVm2+rY5ZvFpvZOI0SzHnk7X8j1nIEyaVHuNYre1DtVtZiwOlfpFU7up0dlll/ZoDx8Vk9XJH4+vZk6vaTZLybH7vQrF9Hpen9Yn9c1F7as5Id5vuI6evBYL6+owaS1O8z1za0m8HwqCnLyXBkpvohYlO9duono+KK2DtO8rwt+8/fTafhJo4e68uNTW+b3JUjZtM9E/um9Hwk0kyw9uiT3IyqZsKceHrspHBIHhvYRtqTP4RdNjpWkXn/ZEXHdrnxzTUMzG6hf0aVNx/HsWneO1AGVPFh3rxyqxvQK9Bc+jBulyUxLxIhBnjeCG5QbNxwoQfHlcnNrh5EBLKNRXIXi3POSe3df74BaPXGU4+ZQ7KZSTk6mpsAAndYU0itIFx7cy/LSN6Bvb1TXv0TF80Y8b2xGfUu7iQ4w9JhAb/ZAAdl9h6JthVRWfbT0BSj5t5E+wx+cdiot1Rm0yQ22Mvs/E4IJQgOFSjWVnxA/IkwleC3kLA5nsoPG/5f+AYHJnCJAa4aaAAAAAElFTkSuQmCC" /> <circle class="ot-top-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5" /></svg>',
          },
          // Insight Explorer START
          csui_li_header_aviator42: {
            category: "header",
            svg: `<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <defs><style>
            .aiplus-toolbar-hover:hover {
                fill: rgba(0,0,0,0.2)!important;
            }
        </style>  </defs> <image href="/img/csui/themes/carbonfiber/image/icons/aiplus/aiplus_white.svg" x="50%" y="50%" transform="translate(-10 -10)" width="20" height="20" clip-path="url(#circleView)"></image> <circle class="ot-top-state aiplus-toolbar-hover" fill="transparent" stroke="none" cx="21" cy="21" r="20.0"></circle><circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="20.5"></circle></svg>`,
          }
          // Insight Explorer END
        });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/csui.app.header.controls",
    ["csui/themes/carbonfiber/ot-icons/icons_csui_header"],
    function () {
      return [
        {
          id: "csui/controls/app.header/app.header.controls/logo/logo.view",
          type: "logo",
        },
        {
          id: "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
          sequence: 50,
          type: "progress",
        },
        {
          id: "csui/controls/app.header/app.header.controls/search.box/search.box.view",
          sequence: 100,
          type: "search",
        },
        {
          id: "csui/controls/app.header/app.header.controls/favorites/favorites.view",
          sequence: 200,
          type: "button",
        },
        {
          id: "csui/controls/app.header/app.header.controls/help/help.view",
          sequence: 300,
          type: "button",
        },
        {
          id: "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
          sequence: 999,
          type: "menu",
        },
      ];
    }
  ),
  csui.define("csui/utils/proxysettings/impl/nls/proxydynamic.lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/utils/proxysettings/impl/nls/root/proxydynamic.lang", {
    workAs: "Work as:",
    endWorkAs: "End working as {0}",
    workingAs: "Working as {0}",
    workingAsMessage: "You are working as {0}",
  }),
  csui.define(
    "csui/utils/proxysettings/proxy.dynamic.menu",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/proxy",
      "csui/utils/command.error",
      "csui/utils/contexts/factories/user",
      "i18n!csui/utils/proxysettings/impl/nls/proxydynamic.lang",
    ],
    function (x, m, p, y, s, e, r, l) {
      "use strict";
      var f;
      function t(i) {
        if (f || !s.enabled()) return m.Deferred().resolve([]);
        var o = m.Deferred(),
          n =
            i.connector.getConnectionUrl().getApiBase("v2") +
            "members/proxies/targets",
          u = { url: n, method: "GET" },
          c = [],
          d = i.context.getModel(r);
        return (
          d.get("proxy_proxy_user_id")
            ? ((f = !0),
              c.push({
                profileMenu: {
                  signature: "SwitchToNonProxyUser",
                  name: p.str.sformat(l.endWorkAs, d.get("display_name")),
                  group: "proxy",
                },
              }),
              y.showMessage(
                "warning",
                p.str.sformat(l.workingAs, d.get("display_name")),
                p.str.sformat(l.workingAsMessage, d.get("display_name"))
              ),
              o.resolve(c))
            : i.connector
                .makeAjaxCall(u)
                .then(function (h) {
                  (f = !0),
                    p.each(h.results.data, function (k) {
                      c.push({
                        profileMenu: {
                          groupBy: "proxy",
                          signature: "SwitchToProxyUser",
                          name: k.display_name,
                          userid: k.id,
                          group: "proxy",
                          isSubItem: !0,
                        },
                      });
                    }),
                    h.results.data.length > 0 &&
                      c.push({
                        profileMenu: {
                          groupBy: "proxy",
                          signature: "SwitchToProxyUser",
                          name: l.workAs,
                          group: "proxy",
                          isLabel: !0,
                        },
                      }),
                    o.resolve(c);
                })
                .catch(function (h) {
                  o.resolve(c);
                }),
          o.promise()
        );
      }
      return t;
    }
  ),
  csui.define(
    "csui/utils/usersettings/cm.dynamic.menu",
    [
      "module",
      "csui/lib/jquery",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/contexts/factories/user",
      "i18n!csui/utils/usersettings/impl/nls/lang",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e;
      function r(l) {
        if (e) return m.Deferred().resolve([]);
        e = !0;
        let f = m.Deferred(),
          t = [];
        return (
          l.context.getModel(y).get("type") === 10 &&
            (t.push({
              profileMenu: {
                signature: "SwitchToNonCMUser",
                name: s.endWorkAsCM,
                group: "proxy",
              },
            }),
            p.showMessage("warning", s.cmMode, s.workingAsMessage)),
          f.resolve(t),
          f.promise()
        );
      }
      return r;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<button type="button" class="csui-acc-focusable csui-sidebar-item ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "iconClass") || (e != null ? i(e, "iconClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 66 },
                      end: { line: 1, column: 79 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "tooltip") || (e != null ? i(e, "tooltip") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 88 },
                      end: { line: 1, column: 99 },
                    },
                  })
                : t)
            ) +
            `"> 
</button>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_pman.sidebar.item",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/pman.sidebar.item.view",
    [
      "csui/lib/marionette3",
      "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.item",
      "csui/controls/icons.v2",
    ],
    function (x, m) {
      "use strict";
      return x.View.extend({
        constructor: function (s) {
          x.View.prototype.constructor.apply(this, arguments);
        },
        tagName: "li",
        template: m,
        templateContext: function () {
          return {
            iconClass: this.model.get("iconClass"),
            tooltip: this.model.get("name"),
          };
        },
        events: {
          "click .csui-sidebar-item:not(.binf-active)": function () {
            this.showPanel();
          },
          "keydown .csui-sidebar-item:not(.binf-active)": function (y) {
            (y.key === "Enter" || y.key === " ") && this.showPanel();
          },
        },
        showPanel: function () {
          const y = this.model.getPanelView(this.options),
            s = this.model.getPanelTitle();
          this.trigger("show:panel", this, y, s);
        },
      });
    }
  ),
  csui.define(
    "csui/models/sidebar.items",
    ["csui/lib/backbone", "csui/models/sidebar.item"],
    function (x, m) {
      "use strict";
      var p = x.Collection.extend({
        model: m,
        constructor: function (s, e) {
          x.Collection.prototype.constructor.apply(this, arguments);
        },
      });
      return p;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/sidebar.items",
    [
      "csui/lib/underscore",
      "csui/models/sidebar.items",
      "csui-ext!csui/perspective.manage/sidebar/sidebar.items",
    ],
    function (x, m, p) {
      "use strict";
      let y = new m();
      return (
        p &&
          y.add(
            x
              .chain(p)
              .flatten(!0)
              .map(function (s) {
                return new s();
              })
              .sortBy((s) => s.get("sequence"))
              .value()
          ),
        y
      );
    }
  ),
  csui.define("csui/perspective.manage/sidebar/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/perspective.manage/sidebar/impl/nls/root/lang", {
    layouts: "Layouts",
    widgets: "Widgets",
    titleClearIcon: "Clear",
    sideBarCloseIcon: "Close",
  }),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-ribbon-panel csui-normal-scrolling">
    <ul class="csui-pman-sidebar-ribbon"></ul>
    <button class="icon icon-help" title="Help"></button>
</div>

<div class="csui-sidebar-slide-container">
    <div class="csui-sidebar-slide-main">
        <div class="csui-sidebar-slide-header">
			<h3 class="csui-sidebar-slide-title">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 40 },
                      end: { line: 9, column: 49 },
                    },
                  })
                : t)
            ) +
            `</h3>
			<div class="csui-sidebar-slide-close" title="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "sideBarCloseIcon") : e, e)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "sideBarCloseIcon") : e, e)
            ) +
            `"> 
			</div>
		</div>
		<div class="csui-sidebar-slide-body"></div>
	</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_pman.sidebar.container",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/pman.sidebar.container.view",
    [
      "csui/lib/marionette3",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/perspective.manage/sidebar/pman.sidebar.item.view",
      "csui/models/sidebar.items",
      "csui/perspective.manage/sidebar/sidebar.items",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
      "css!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
      "csui/controls/icons.v2",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      return x.CompositeView.extend({
        tagName: "div",
        template: r,
        templateContext: function () {
          return { sideBarCloseIcon: e.sideBarCloseIcon };
        },
        ui: {
          slideTitle: ".csui-sidebar-slide-title",
          slideBody: ".csui-sidebar-slide-body",
          closeIcon: ".csui-sidebar-slide-close",
          helpIcon: ".csui-ribbon-panel .icon-help",
        },
        className: "csui-sidebar-panel",
        events: {
          keydown: "onOpenPanelKeyDown",
          "click @ui.closeIcon": "closeSlidePanel",
          "click @ui.helpIcon": "onClickHelp",
        },
        childViewContainer: "ul.csui-pman-sidebar-ribbon",
        childView: p,
        childViewOptions: function () {
          return this.options;
        },
        childViewTriggers: {
          "set:active": "child:set:active",
          "show:panel": "child:show:panel",
        },
        onRender: function () {
          this.el
            .closest(".csui-sidebar")
            ?.classList.remove("csui-sidebar-open"),
            (this.slideRegion = new x.Region({ el: this.ui.slideBody }));
        },
        constructor: function (t) {
          (this.options = t || {}),
            x.CompositeView.prototype.constructor.apply(this, arguments);
          let i = this,
            o = new y();
          s.filter((n) => n.isEnabled(i.options) && o.add(n)),
            (this.collection = o),
            (this.helpView = new m(t));
        },
        onChildShowPanel(f, t, i) {
          this.openSlidePanel(t, i), this.setActive(f);
        },
        onChildSetActive(f) {
          this.setActive(f);
        },
        openSlidePanel: function (f, t) {
          this.slideRegion.show(f),
            this.el
              .closest(".csui-sidebar")
              ?.classList.add("csui-sidebar-open"),
            this.ui.slideTitle.text(t),
            this.ui.slideTitle.attr({ "aria-label": t, title: t });
        },
        closeSlidePanel: function () {
          this.el
            .closest(".csui-sidebar")
            ?.classList.remove("csui-sidebar-open"),
            this.clearActive();
        },
        onClickHelp: function () {
          this.helpView.triggerMethod("click:help", "editpage");
        },
        onOpenPanelKeyDown: function (f) {
          f.key === "Escape" && this.closeSlidePanel();
        },
        setActive: function (f) {
          this.clearActive(),
            f.el
              .querySelector(".csui-sidebar-item")
              .classList.add("binf-active");
        },
        clearActive: function () {
          this.el
            .querySelectorAll(".csui-sidebar-item")
            .forEach((f) => f.classList.remove("binf-active"));
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/list.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return "binf-active";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "className") : e, e)) +
            " " +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "active") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 31 },
                  end: { line: 1, column: 68 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `"
     draggable="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "draggable") : e, e)) +
            `" tabindex= "-1">
  <span>` +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `</span>
  <div class="csui-layout-icon ` +
            s.escapeExpression(s.lambda(e != null ? i(e, "iconClass") : e, e)) +
            `"></div>
</div>`
          );
        },
      });
      return p.registerPartial("csui_perspective.manage_impl_list.item", y), y;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts.panel.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/perspective.manage/impl/list.item",
    ],
    function (x, m, p) {
      "use strict";
      return m.View.extend({
        constructor: function (e) {
          m.View.prototype.constructor.apply(this, arguments);
        },
        tagName: "div",
        template: p,
        templateContext: function () {
          return {
            draggable: !!this.options.draggable,
            className: this.options.itemClassName,
            iconClass: this.model.get("icon"),
            active: this.model.get("type") === this.options?.perspectiveType,
          };
        },
        events: {
          "click .csui-layout-item:not(.binf-active)": x.debounce(
            function () {
              this.trigger("change:layout", this);
            },
            200,
            !0
          ),
          "keydown .csui-layout-item": x.debounce(
            function (s) {
              (s.key === "Enter" || s.key === " ") &&
                (this.trigger("change:layout"),
                document
                  .querySelector(
                    ".binf-widgets.perspective-editing .cs-perspective-with-breadcrumb-view .csui-sidebar .csui-layout-item.binf-active"
                  )
                  .attr("tabindex", 0));
            },
            200,
            !0
          ),
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/list",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="cs-header binf-panel-heading cs-header-with-go-back" role="link"
     aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 17 },
                      end: { line: 2, column: 31 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="icon circular arrow_back cs-go-back" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTooltip") ||
                  (e != null ? i(e, "goBackTooltip") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 59 },
                      end: { line: 3, column: 76 },
                    },
                  })
                : t)
            ) +
            `"></span>
</div>
<div class="cs-content">
  <div class="cs-list-group"></div>
</div>
`
          );
        },
      });
      return p.registerPartial("csui_perspective.manage_impl_list", y), y;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts.panel.view",
    [
      "csui/lib/backbone",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/perspective.manage/sidebar/layouts.panel.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/list",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      return p.CollectionView.extend({
        constructor: function (f) {
          if (
            (f || (f = {}),
            f.data || (f.data = {}),
            p.CollectionView.call(this, f),
            this.options.data?.items)
          ) {
            if (!this.collection) {
              const t = x.Collection.extend({
                model: x.Model.extend({ idAttribute: null }),
              });
              this.collection = new t();
            }
            this.collection.add(this.options.data.items);
          }
        },
        className: "csui-pman-list csui-normal-scrolling",
        childViewTriggers: {
          "change:layout": "child:Change:Layout",
          "set:active": "child:set:active",
        },
        onChildChangeLayout(l) {
          this.onChangeLayout(l);
        },
        onChildSetActive(l) {
          this.setActive(l);
        },
        template: e,
        childViewContainer: ".cs-list-group",
        childView: y,
        childViewOptions: function () {
          return this.options;
        },
        setActive: function (l) {
          this.el
            .querySelectorAll(".csui-layout-item")
            .forEach((f) => f.classList.remove("binf-active")),
            l.el
              .querySelector(".csui-layout-item")
              .classList.add("binf-active");
        },
        onChangeLayout: function (l) {
          let f = this,
            t = l.model.get("type"),
            i =
              this.options.context.pmanView.perspective.get("perspective").type;
          (i === "sidepanel-right" || i === "sidepanel-left") &&
          (t === "sidepanel-right" || t === "sidepanel-left")
            ? (f.setActive(l),
              f.options.context.pmanView.trigger("swap:layout", t))
            : csui.require(
                ["csui/dialogs/modal.alert/modal.alert"],
                function (o) {
                  o.confirmWarning(
                    s.changePageLayoutConfirmatonText,
                    s.layouts,
                    {
                      buttons: {
                        showYes: !0,
                        labelYes: s.proceedButton,
                        showNo: !0,
                        labelNo: s.changeLayoutCancelButton,
                      },
                    }
                  ).done(function (n) {
                    n &&
                      (f.setActive(l),
                      f.options.context.pmanView.trigger(
                        "change:layout",
                        l.model.get("type")
                      ),
                      f.options.context.pmanView.context.trigger(
                        "reset:widget:panel"
                      ));
                  });
                }
              );
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/perspectivelayouts",
    [
      "module",
      "csui/lib/underscore",
      "i18n",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui-ext!perspective.manage/impl/perspectivelayouts",
    ],
    function (x, m, p, y, s) {
      var e = m.extend({ enableNewlayoutOption: !1 }, x.config());
      const r = p?.settings.rtl;
      var l = [
        {
          title: y.LcrLayoutTitle,
          type: "left-center-right",
          icon: "csui-layout-lcr",
        },
        { title: y.FlowLayoutTitle, type: "flow", icon: "csui-layout-flow" },
      ];
      return (
        e.enableNewlayoutOption &&
          l.push(
            {
              title: y.RSPLayoutTitle,
              type: "sidepanel-right",
              icon: r
                ? "csui-layout-sidepanel-left"
                : "csui-layout-sidepanel-right",
            },
            {
              title: y.LSPLayoutTitle,
              type: "sidepanel-left",
              icon: r
                ? "csui-layout-sidepanel-right"
                : "csui-layout-sidepanel-left",
            }
          ),
        s && (l = m.union(l, s)),
        l
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts",
    [
      "csui/models/sidebar.item",
      "csui/perspective.manage/sidebar/layouts.panel.view",
      "csui/perspective.manage/impl/perspectivelayouts",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
    ],
    function (x, m, p, y) {
      "use strict";
      return x.extend({
        defaults: {
          signature: "Layouts",
          sequence: 1,
          name: y.layouts,
          iconClass: "csui-sidebar-layouts-btn",
          panelTitle: y.layouts,
        },
        getPanelView: function (e) {
          let r = e?.data ? e : { data: { items: p } };
          return (
            (r.draggable = !!r.data.draggable),
            (r.itemClassName = "csui-layout-item"),
            (r.context = e.context),
            (r.perspectiveType = e.perspectiveType),
            new m(r)
          );
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.widget",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="cs-item-picker" role="combobox"
     aria-expanded="false" aria-haspopup="listbox">
     <input id="search-input" type="text" class="search-widget binf-form-control cs-search" autocomplete="off"
          aria-autocomplete="list" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "ariaLabel") || (e != null ? i(e, "ariaLabel") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "ariaLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 47 },
                      end: { line: 4, column: 60 },
                    },
                  })
                : t)
            ) +
            `"
          placeholder="Search widgets" />
     <div class="search-widget cs-search-clear csui-icon formfield_clear" title="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "titleClearIcon") : e, e)
            ) +
            `"
          role="button" aria-label="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "titleClearIcon") : e, e)
            ) +
            `" tabindex="0"></div>
     <div class="search-widget cs-search-icon" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "titleSearchIcon") ||
                  (e != null ? i(e, "titleSearchIcon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "titleSearchIcon",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 54 },
                      end: { line: 8, column: 73 },
                    },
                  })
                : t)
            ) +
            `"
          role="button" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "titleSearchIcon") ||
                  (e != null ? i(e, "titleSearchIcon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "titleSearchIcon",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 36 },
                      end: { line: 9, column: 55 },
                    },
                  })
                : t)
            ) +
            `">
     </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.widget",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/search.widget",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.widget.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.widget",
      "css!csui/perspective.manage/sidebar/impl/search.widget",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return p.View.extend({
        template: s,
        templateContext: function () {
          return { titleClearIcon: y.titleClearIcon };
        },
        tagName: "div",
        ui: {
          searchInput: ".search-widget.cs-search",
          searchclear: ".search-widget.cs-search-clear",
        },
        events: {
          "keyup @ui.searchInput": "onKeyUp",
          "keydown @ui.searchInput": "onKeyDown",
          "click @ui.searchclear": "onClickClear",
          "keydown @ui.searchclear": "onClickClear",
          "input @ui.searchInput": "onSearchInput",
        },
        constructor: function (l) {
          (this.options = l || {}),
            p.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          this.ui.searchInput.show(), this.updateClearStyle();
        },
        updateClearStyle: function () {
          let r = this.ui.searchInput.val()?.length > 0;
          this.ui.searchclear.toggleClass("binf-hidden", !r);
        },
        onClickClear: function (r) {
          (r.type === "click" || r.key === "Enter") &&
            (this.ui.searchInput.val(""),
            this.updateClearStyle(),
            this.ui.searchInput[0].focus(),
            this.trigger("search:closed"));
        },
        onKeyUp: function (r) {
          this.updateClearStyle(),
            this.ui.searchInput.val() === "" &&
              (["Tab", "Enter", "Shift", "ArrowUp", "ArrowDown"].includes(
                r.key
              ) ||
                (this.trigger("item:clear"),
                this.ui.searchInput.removeAttr("aria-activedescendant")));
        },
        onKeyDown: function (r) {
          r.key === "Tab" &&
            x(this.ui.searchclear).is(":visible") &&
            (r.shiftKey
              ? this.updateClearStyle()
              : (r.preventDefault(),
                r.stopPropagation(),
                this.ui.searchclear[0].focus()));
        },
        onSearchInput: function (r) {
          let l = x(r.target).val().split(" ").join("").trim().toLowerCase();
          this.searchTimeout && clearTimeout(this.searchTimeout),
            (this.searchTimeout = setTimeout(() => {
              this.trigger("search:performed", l),
                l.length === 0 && this.trigger("search:closed");
            }, 200));
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/mixins/manifest.edit.mixin",
    ["csui/lib/underscore", "csui/lib/jquery"],
    function (x, m) {
      "use strict";
      var p = {
        mixin: function (y) {
          return x.extend(y, {
            objectToPrimitive: function (s) {
              var e = m.extend(!0, {}, this.manifest),
                r = this.manifest.schema.properties[s],
                l = this.manifest.options.fields[s],
                f = l && l.items.fields,
                t = x.keys(r.items.properties)[0];
              this.manifest.modifiedItems = e;
              var i = r.items.properties[t];
              delete r.items.properties,
                (r.items.type = i.type),
                (r.title = i.title),
                (r.required = r.items.required && r.items.required.length > 0),
                (r.itemKey = t),
                f && (delete l.items.fields, (l.items = x.values(f)[0]));
            },
            updateDataToPrimitive: function (s, e) {
              var r = [],
                l = this.manifest.schema.properties[e].itemKey;
              s[e].length == 0 && r.push(""),
                s[e].forEach(function (f) {
                  r.push(f[l]);
                }),
                (s[e] = r);
            },
            getPrimitiveToObjectvalues: function (s, e) {
              var r = this.manifest.schema.properties[s].itemKey;
              if (r) {
                this.manifest.modifiedItems &&
                  ((this.manifest.options.fields[s].items =
                    this.manifest.modifiedItems.options.fields[s].items),
                  (this.manifest.schema.properties[s].items =
                    this.manifest.modifiedItems.schema.properties[s].items));
                for (var l in e[s]) {
                  var f = {};
                  (f[r] = e[s][l]), (e[s][l] = f);
                }
                return e;
              }
              return e;
            },
          });
        },
      };
      return p;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/options.form.wrapper",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-pman-form-header">
    <div class="csui-pman-form-title">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 49 },
                    },
                  })
                : t)
            ) +
            `</div>
    <div class="csui-pman-form-description">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "description") ||
                  (e != null ? i(e, "description") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "description",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 44 },
                      end: { line: 3, column: 61 },
                    },
                  })
                : t)
            ) +
            `</div>
    <div class="csui-pman-config-unsupported">
        <div class="csui-state">
            <span class="csui-state-icon csui-icon csui-icon-notification-error-white"></span>
        </div>
        <div class="csui-error-message">
            <span>` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "configNotSupported") ||
                  (e != null ? i(e, "configNotSupported") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "configNotSupported",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 18 },
                      end: { line: 9, column: 42 },
                    },
                  })
                : t)
            ) +
            `</span>
        </div>
    </div>
</div>
<div class="csui-pman-form-content cs-formview-wrapper"></div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_impl_options.form.wrapper",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/impl/options.form",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/impl/options.form.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/lib/alpaca/js/alpaca.lite",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/perspective.manage/mixins/manifest.edit.mixin",
      "csui/controls/form/form.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/options.form.wrapper",
      "csui/utils/perspective/perspective.util",
      "css!csui/perspective.manage/impl/options.form",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i) {
      var o = y.LayoutView.extend(
          {
            template: t,
            className: "csui-pman-form-wrapper csui-normal-scrolling",
            regions: { bodyRegion: ".csui-pman-form-content" },
            templateHelpers: function () {
              return {
                title: this.options.manifest.title,
                description: this.options.manifest.description,
                configNotSupported: f.configNotSupported,
              };
            },
            ui: {
              unSupportedConfig: ".csui-pman-config-unsupported",
              description: ".csui-pman-form-description",
            },
            events: { keydown: "_onKeyDown" },
            constructor: function (c) {
              (this.options = c || {}),
                (this.manifest = this.options.manifest),
                y.LayoutView.prototype.constructor.apply(this, arguments);
            },
            _createForm: function (u) {
              (this.widgetOptionsFormView = new n({
                context: this.options.context,
                model: u,
                mode: "create",
              })),
                this.listenToOnce(
                  this.widgetOptionsFormView,
                  "render:form",
                  function () {
                    this.trigger("render:form");
                  }.bind(this)
                ),
                this.listenTo(
                  this.widgetOptionsFormView,
                  "change:field",
                  function (c) {
                    this.trigger("change:field", c);
                  }.bind(this)
                );
            },
            _hasSchema: function () {
              return this.manifest && this.manifest.hasConfigForm;
            },
            refresh: function (u) {
              this.widgetOptionsFormView
                ? this.widgetOptionsFormView.refresh(u)
                : u();
            },
            onRender: function () {
              this.ui.unSupportedConfig.hide();
              var u = this._hasSchema();
              if (!u) {
                this.trigger("render:form");
                return;
              }
              var c = this._prepareFormModel();
              (this.hasValidSchema = o._normalizeOptions(
                c.attributes.schema.properties,
                c.attributes.options.fields,
                c.attributes.data
              )),
                this.hasValidSchema
                  ? (this._createForm(c),
                    this.bodyRegion.show(this.widgetOptionsFormView))
                  : (this.ui.description.hide(),
                    this.ui.unSupportedConfig.show(),
                    this.trigger("render:form"));
            },
            onPopoverShow: function (u) {
              this._hasSchema() &&
                !this.hasValidSchema &&
                (u.find(".binf-popover-content").addClass("invalid-options"),
                u.find(".binf-arrow").addClass("invalid-options")),
                this._focusField(".alpaca-container-item-first");
            },
            _focusField: function (u) {
              var c = this.$el.find(u);
              if (c.length) {
                c = c.first();
                var d = c.find(
                    "input:visible, textarea:visible, button.binf-dropdown-toggle:visible"
                  ),
                  h = c.find(".cs-browse-icon");
                d.length &&
                  (h.length ? h.trigger("focus") : d.first().trigger("focus"));
              }
            },
            _onKeyDown: function (u) {
              var c = !0,
                d = m(u.target);
              switch (u.keyCode) {
                case 9:
                  !u.shiftKey && d.parents(".alpaca-container-item-last").length
                    ? (this._focusField(".alpaca-container-item-first"),
                      (c = !1))
                    : u.shiftKey &&
                      d.parents(".alpaca-container-item-first").length &&
                      (this._focusField(".alpaca-container-item-last"),
                      (c = !1));
                  break;
              }
              return c;
            },
            getValues: function () {
              if (this._hasSchema())
                if (this.hasValidSchema) {
                  var u = this.widgetOptionsFormView.getValues();
                  if (this.manifest.modifiedProperties)
                    for (var c in x.keys(u))
                      this.manifest.modifiedProperties.indexOf(x.keys(u)[c]) >=
                        0 &&
                        (u = this.getPrimitiveToObjectvalues(x.keys(u)[c], u));
                  return u;
                } else return this._getOptionsData();
            },
            validate: function () {
              if (!this._hasSchema()) return !0;
              if (!this.hasValidSchema) {
                var u = !0;
                if (i.hasRequiredFields(this.manifest)) {
                  var c = this._getOptionsData(),
                    d = this.manifest.schema.required;
                  x.each(d, function (h) {
                    c[h] || (u = !1);
                  });
                }
                return u;
              }
              return this.widgetOptionsFormView.validate();
            },
            _isPreviewWidget: function () {
              return (
                this.options.widgetConfig.type ===
                "csui/perspective.manage/widgets/perspective.widget"
              );
            },
            _prepareFormModel: function () {
              var u = this._getOptionsData(),
                c = [];
              for (var d in this.manifest.schema.properties) {
                if (d !== "businessobjecttypes") break;
                var h = this.manifest.schema.properties[d];
                h.type === "array" &&
                h.items.type === "object" &&
                x.keys(h.items.properties).length === 1
                  ? (c.push(d),
                    this.objectToPrimitive(d),
                    u[d] && this.updateDataToPrimitive(u, d))
                  : this.manifest.modifiedProperties &&
                    u[d] &&
                    this.updateDataToPrimitive(u, d);
              }
              c.length > 0 && (this.manifest.modifiedProperties = c);
              var k = JSON.parse(JSON.stringify(this.manifest.schema)),
                C = JSON.parse(JSON.stringify(this.manifest.options || {}));
              C || (C = {}),
                C.fields || (C.fields = {}),
                this._addWidgetSizePropertyIfSupported(k, C, u);
              var S = new p.Model({ schema: k, options: C, data: u });
              return S;
            },
            _getOptionsData: function () {
              var u = this.options.widgetConfig.options || {};
              return this._isPreviewWidget() && (u = u.options || {}), u;
            },
            _addWidgetSizePropertyIfSupported: function (u, c, d) {
              if (this.options.perspectiveView.getSupportedWidgetSizes) {
                var h = this.options.perspectiveView.getSupportedWidgetSizes(
                  this.manifest,
                  this.options.widgetView
                );
                if (
                  (this.options.context &&
                    this.options.context.perspective &&
                    (this.options.context.perspective.type ==
                      "sidepanel-right" ||
                    this.options.context.perspective.type == "sidepanel-left"
                      ? this.options.perspectiveView.$el.hasClass(
                          "cs-bcs-perspective-banner"
                        ) && delete u.properties.titlefield
                      : (h = x.filter(h, function (v) {
                          return v.kind !== "heroTile";
                        }))),
                  !(!h || h.length === 0))
                ) {
                  var k = {
                      title: f.widgetSizeTitle,
                      description: f.widgetSizeDescription,
                      type: "string",
                      enum: x.map(h, function (v) {
                        return v.kind;
                      }),
                    },
                    C = {
                      type: "select",
                      optionLabels: x.map(h, function (v) {
                        return v.label;
                      }),
                      removeDefaultNone: !0,
                    },
                    S = x.find(h, function (v) {
                      return v.selected;
                    });
                  S && (d[o.widgetSizeProperty] = S.kind);
                  var w = {};
                  (w[o.widgetSizeProperty] = k),
                    (u.properties = x.extend(w, u.properties));
                  var b = {};
                  (b[o.widgetSizeProperty] = C),
                    (c.fields = x.extend(b, c.fields)),
                    (u.required = u.required || []),
                    u.required.push(o.widgetSizeProperty);
                }
              }
            },
          },
          {
            widgetSizeProperty: "__widgetSize",
            _resolveOptionsType: function (u, c) {
              var d = u.type;
              return (
                d || (d = s.getSchemaType(c)),
                d || (c && s.isArray(c) ? (d = "array") : (d = "object")),
                u && u.enum
                  ? u.enum.length > 3
                    ? "select"
                    : "radio"
                  : s.defaultSchemaFieldMapping[d]
              );
            },
            _normalizeOptions: function (u, c, d) {
              var h = !0;
              return (
                x.each(u, function (k, C) {
                  var S = c[C],
                    w = d[C];
                  S || (c[C] = S = {});
                  var b = S.type;
                  switch (
                    (!b && k.type && (b = o._resolveOptionsType(k, w)),
                    s.getFieldClass(b) || (h = !1),
                    k.type)
                  ) {
                    case "array":
                      if (
                        (S.fields || x.defaults(S, { fields: { item: {} } }),
                        S.items && (S.fields.item = S.items),
                        k.items.type === "object")
                      ) {
                        S.fields.item.type &&
                          !s.getFieldClass(S.fields.item.type) &&
                          (h = !1),
                          S.fields.item.fields || (S.fields.item.fields = {}),
                          (!w || w.length === 0) && (d[C] = w = [{}]);
                        var v = o._normalizeOptions(
                          k.items.properties,
                          S.fields.item.fields,
                          w[0]
                        );
                        v || (h = !1);
                      }
                      w || (d[C] = [null]);
                      break;
                    case "object":
                      w || (d[C] = w = {}), S.fields || (S.fields = {});
                      var _ = o._normalizeOptions(k.properties, S.fields, w);
                      _ || (h = !1);
                      break;
                    default:
                      x.isUndefined(w) && (d[C] = k.default || null);
                      break;
                  }
                }),
                h
              );
            },
          }
        ),
        n = l.extend({
          className: function () {
            var u = l.prototype.className.call(this);
            return u + " perspective-widget-form";
          },
          constructor: function (c) {
            l.apply(this, arguments);
          },
          popover: !1,
          refresh: function (u) {
            this.form && this.form.refresh(u);
          },
          _modifyModel: function () {
            l.prototype._modifyModel.apply(this, arguments),
              (this.alpaca.options.hideInitValidationError = !1);
          },
        });
      return x.extend(n.prototype, e), r.mixin(o.prototype), o;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/widget.drag.template",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t =
            s.lookupProperty ||
            function (i, o) {
              if (Object.prototype.hasOwnProperty.call(i, o)) return i[o];
            };
          return (
            `<div class="csui-widget-template">
  <div class="csui-template-header">` +
            s.escapeExpression(s.lambda(e != null ? t(e, "header") : e, e)) +
            `</div>
  <div class="csui-template-body">` +
            s.escapeExpression(s.lambda(e != null ? t(e, "body") : e, e)) +
            `</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_impl_widget.drag.template",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.drag.template.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/widget.drag.template",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = m.ItemView.extend({
        constructor: function (r) {
          m.ItemView.prototype.constructor.apply(this, arguments);
        },
        className: "csui-template-wrapper",
        template: y,
        templateHelpers: function () {
          return {
            header: this.options && this.options.title,
            body: p.templateMessage,
          };
        },
        onRender: function () {
          this.$el.data("pman.widget", this.options.newWidget);
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/widget.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `
        <div class="` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "attributes") : e) != null
                ? i(t, "draggable")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(2, f, 0),
                inverse: s.program(4, f, 0),
                loc: {
                  start: { line: 11, column: 20 },
                  end: { line: 11, column: 76 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
             data-widget-type="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "dataAttr")
                  : t,
                e
              )
            ) +
            `"
             data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "allowMultiple")
                  : t,
                e
              )
            ) +
            `">
          <div class="csui-widget-item icon-draggable-handle csui-draggable-widget-item"
               data-widget-index="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "index")
                  : t,
                e
              )
            ) +
            '" draggable="true" title="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `">
            <span>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `</span>
            <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "icon")
                  : t,
                e
              )
            ) +
            `"></div>
          </div>
        </div>

        <div class="` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "attributes") : e) != null
                ? i(t, "draggable")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(4, f, 0),
                inverse: s.program(2, f, 0),
                loc: {
                  start: { line: 21, column: 20 },
                  end: { line: 21, column: 76 },
                },
              }
            )) != null
              ? t
              : "") +
            '" data-widget-type="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "dataAttr")
                  : t,
                e
              )
            ) +
            `"
             data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "allowMultiple")
                  : t,
                e
              )
            ) +
            `">
          <div class="csui-widget-item icon-draggable-handle" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "disableTitle")
                  : t,
                e
              )
            ) +
            `">
            <span>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `</span>
            <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "icon")
                  : t,
                e
              )
            ) +
            `"></div>
          </div>
        </div>

`
          );
        },
        2: function (s, e, r, l, f) {
          return "";
        },
        4: function (s, e, r, l, f) {
          return " binf-hidden ";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="csui-accordion-header" title="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `">
  <div class="csui-accordion-header-title">` +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `</div>
  <div class="csui-button-icon cs-icon icon-expandArrowDown"></div>
  <div class="csui-button-icon cs-icon icon-expandArrowUp"></div>
</div>
<div class="csui-accordion-content">
  <div class="cs-content csui-list-pannel">
    <div class="cs-list-group">
` +
            ((t = i(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "widgets") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 9, column: 6 },
                  end: { line: 29, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial("csui_perspective.manage_impl_widget.item", y), y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.item.view",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/perspective.manage/impl/widget.drag.template.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/widget.item",
    ],
    function (x, m, p, y, s, e, r, l, f) {
      "use strict";
      var t = Object.assign(
          { dragImageOffsetTop: 50, dragImageOffsetLeft: 50 },
          x.moduleConfig("csui/perspective.manage/impl/widget.list.view")
        ),
        i = s.ItemView.extend({
          constructor: function (n) {
            n || (n = {}),
              s.ItemView.prototype.constructor.apply(this, arguments);
          },
          className: "csui-module-group",
          template: f,
          templateHelpers: function () {
            var o = new y.Collection(this.model.attributes.widgets),
              n = l.disableTitle,
              u = 0;
            return (
              o.models.forEach(function (c) {
                c.set(
                  {
                    draggable: !!c.get("canDragAndDrop"),
                    disableTitle: n,
                    dataAttr: c.get("id").replace(/\//g, "-"),
                    allowMultiple: !!c.get("allowMultiple"),
                    index: u++,
                  },
                  { silent: !0 }
                );
              }),
              { widgets: o.models }
            );
          },
          ui: {
            accordionHeader: ".csui-accordion-header",
            accordionContent: ".csui-accordion-content",
            accordionHeaderIcon: ".csui-accordion-header .cs-icon",
            widget: ".csui-draggable-widget-item",
          },
          events: {
            "click @ui.accordionHeader": "toggle",
            "keydown @ui.accordionHeader": "toggle",
            "dragstart @ui.widget": "onDragStart",
            "dragend @ui.widget": "onDragEnd",
          },
          toggle: function () {
            var o = this.ui.accordionHeader.hasClass("csui-accordion-expand");
            this.ui.accordionHeader.toggleClass("csui-accordion-expand"),
              this.options.parentView.$el
                .find(".csui-module-group")
                .removeClass("csui-accordion-visible")
                .find(".csui-accordion-header")
                .removeClass("csui-accordion-expand"),
              o ||
                (this.$el.addClass("csui-accordion-visible"),
                this.ui.accordionHeader.addClass("csui-accordion-expand")),
              e.onTransitionEnd(
                this.ui.accordionContent,
                function () {
                  this.trigger("widgets:expanded");
                },
                this
              );
          },
          onRender: function () {
            var o = p(".perspective-editing .csui-dnd-container");
            o.length && this._makeWidgetSortable();
          },
          _makeWidgetSortable: function () {
            var o = this,
              n = this.$el.find(".csui-widget-item.csui-draggable-widget-item"),
              u = n.parent();
            u.data("pman.widget", this.model.get("widgets")),
              u.sortable({
                connectWith: [
                  ".perspective-editing .csui-dnd-container",
                  ".perspective-editing .pman-trash-area",
                ],
                containment: ".perspective-editing ",
                helper: function (c, d) {
                  var h = d.data("widget-index");
                  return (
                    (o.widgetDragTemplate = new r({
                      title: o.model.get("widgets")[h].get("title"),
                      newWidget: o.model.get("widgets")[h],
                    })),
                    o.widgetDragTemplate.render(),
                    o.widgetDragTemplate.$el.width("220px"),
                    o.widgetDragTemplate.$el.height("220px"),
                    o.widgetDragTemplate.$el.css({ opacity: 0.75 }),
                    o.widgetDragTemplate.$el.appendTo(
                      o.options.parentView.$el.closest(".pman-pannel-wrapper")
                    ),
                    o.widgetDragTemplate.$el
                  );
                },
                tolerance: "pointer",
                cursorAt: {
                  top: t.dragImageOffsetTop,
                  left: t.dragImageOffsetLeft,
                },
                start: function (c, d) {
                  d.item.css("display", "block"),
                    d.placeholder.css("display", "block"),
                    o.dragStart();
                },
                stop: function () {
                  o.dragEnd();
                },
              });
          },
          onDragStart: function (o) {
            var n = p(o.currentTarget).data("widget-index"),
              u = this.model.get("widgets")[n],
              c = o.originalEvent.dataTransfer,
              d = p(".csui-template-wrapper");
            d.find(".csui-template-header").text(u.get("title")),
              this._hasNativeDragImageSupport() &&
                (c.setData("text", JSON.stringify(u.toJSON())),
                c.setDragImage(
                  d[0],
                  t.dragImageOffsetLeft,
                  t.dragImageOffsetTop
                )),
              this.dragStart();
          },
          _hasNativeDragImageSupport: function () {
            var o = window.DataTransfer || window.Clipboard;
            return "setDragImage" in o.prototype;
          },
          onDragEnd: function (o) {
            this.dragEnd();
          },
          dragStart: function () {
            this.$el
              .closest(".csui-pman-panel")
              .addClass("csui-pman-drag-start"),
              p(document.body).addClass("csui-pman-dnd-active");
          },
          dragEnd: function () {
            this.$el
              .closest(".csui-pman-panel")
              .removeClass("csui-pman-drag-start"),
              p(document.body).removeClass("csui-pman-dnd-active");
          },
        });
      return i;
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.list.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/perspective.manage/impl/options.form.view",
      "csui/perspective.manage/impl/widget.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui/models/widget/widget.collection",
      "hbs!csui/perspective.manage/impl/widget.item",
    ],
    function (x, m, p, y, s, e, r, l, f, t) {
      "use strict";
      var i = x.config();
      m.defaults(i, { dragImageOffsetTop: 50, dragImageOffsetLeft: 50 });
      var o = s.ItemView.extend({
        tagName: "div",
        template: t,
        constructor: function (u) {
          u || (u = {}),
            u.data || (u.data = {}),
            u.existsWidgetTypes || (u.existsWidgetTypes = []),
            s.ItemView.call(this, u),
            (this.context = this.options.pmanView.context);
          var c = this;
          (c.widegtsUpdated = !1),
            (this.allWidgets = new f()),
            this.allWidgets.fetch().done(function () {
              (c.collection = c._groupWidgetsByModule()),
                c.render(),
                c.trigger("items:fetched");
            }),
            this.listenTo(
              this.context,
              "update:widget:panel",
              m.bind(function (d) {
                this.widegtsUpdated = !0;
                var h =
                    d.widgetModel && d.widgetModel.type
                      ? d.widgetModel.type
                      : void 0,
                  k =
                    d.oldWidgetModel && d.oldWidgetModel.type
                      ? d.oldWidgetModel.type
                      : void 0;
                if (h) {
                  var C = m.indexOf(this.options.existsWidgetTypes, h);
                  C >= 0
                    ? this.options.existsWidgetTypes.splice(C, 1)
                    : this.options.existsWidgetTypes.push(h),
                    (h = h.replace(/\//g, "-"));
                  var S = this.$el.find(
                    'div[data-widget-type="' +
                      h +
                      '"][data-widget-allow-multiple="false"]'
                  );
                  S.length && S.toggleClass("binf-hidden");
                }
                if (k) {
                  var C = m.indexOf(this.options.existsWidgetTypes, k);
                  C >= 0 && this.options.existsWidgetTypes.splice(C, 1),
                    (k = k.replace(/\//g, "-"));
                  var S = this.$el.find(
                    'div[data-widget-type="' +
                      k +
                      '"][data-widget-allow-multiple="false"]'
                  );
                  S.length && S.toggleClass("binf-hidden");
                }
              }, this)
            ),
            this.listenTo(
              this.context,
              "reset:widget:panel",
              m.bind(function (d) {
                (this.options.existsWidgetTypes = []),
                  (this.widegtsUpdated = !0);
              }, this)
            );
        },
        initialize: function () {
          m.bindAll(this, "renderItem");
        },
        className: "cs-module-list",
        render: function () {
          this.collection && this.collection.each(this.renderItem);
        },
        renderItem: function (n) {
          var u = this,
            c = new r({ model: n, parentView: u, context: this.context });
          c.render(),
            this.listenTo(
              c,
              "widgets:expanded",
              m.bind(this.trigger, this, "dom:refresh", this)
            ),
            p(this.el).append(c.el);
        },
        _groupWidgetsByModule: function () {
          var n = new y.Collection(),
            u = this.allWidgets.filter(function (c) {
              var d = c.get("manifest");
              if (
                !d ||
                !m.has(d, "title") ||
                !m.has(d, "description") ||
                d.deprecated
              )
                return !1;
              var h = JSON.parse(JSON.stringify(d.schema || {})),
                k = JSON.parse(JSON.stringify(d.options || {})),
                C = e._normalizeOptions(h.properties, k.fields || {}, {});
              return !!C;
            });
          return (
            m.each(
              u,
              m.bind(function (c) {
                var d = m.defaults(c.get("manifest"), {
                    allowMultiple: !0,
                    title: l.noTitle,
                  }),
                  h = d.allowMultiple;
                h ||
                  (h =
                    p.inArray(c.get("id"), this.options.existsWidgetTypes) ===
                    -1),
                  c.set({
                    allowMultiple: d.allowMultiple,
                    canDragAndDrop: h,
                    title: d.title,
                  });
              }, this)
            ),
            m.each(
              m.groupBy(u, function (c) {
                return c.serverModule.id;
              }),
              function (c, d) {
                var h = m.first(c).serverModule.get("title");
                (h = h
                  ? h.replace(/OpenText /, "")
                  : m.first(c).serverModule.get("id").toUpperCase()),
                  n.add({ id: d, title: h, widgets: c });
              }
            ),
            n
          );
        },
        _sanitiseWidgetLibrary: function () {},
        onInitWidgets: function () {
          this.$el.empty(),
            this.widegtsUpdated &&
              ((this.collection = this._groupWidgetsByModule()),
              (this.widegtsUpdated = !1)),
            this.render();
        },
      });
      return o;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.item.view",
    ["csui/utils/base", "csui/perspective.manage/impl/widget.item.view"],
    function (x, m) {
      "use strict";
      return m.extend({
        constructor: function (s) {
          s || (s = {}), m.prototype.constructor.apply(this, arguments);
        },
        initialize: function (y) {
          this.listenTo(this, "expand:header", this.expandHeader);
        },
        expandHeader: function () {
          this.ui.accordionHeader.addClass("csui-accordion-expand"),
            this.$el.addClass("csui-accordion-visible"),
            x.onTransitionEnd(
              this.ui.accordionContent,
              function () {
                this.trigger("widgets:expanded");
              },
              this
            );
        },
        toggle: function () {
          this.ui.accordionHeader.hasClass("csui-accordion-expand") ||
            (this.options.parentView.el
              .querySelectorAll(".csui-module-group")
              .forEach((s) => s.classList.remove("csui-accordion-visible")),
            this.options.parentView.el
              .querySelectorAll(".csui-accordion-header")
              .forEach((s) => s.classList.remove("csui-accordion-expand"))),
            this.el
              .querySelector(".csui-accordion-header")
              .classList.toggle("csui-accordion-expand"),
            this.el.classList.toggle("csui-accordion-visible"),
            x.onTransitionEnd(
              this.ui.accordionContent,
              function () {
                this.trigger("widgets:expanded");
              },
              this
            );
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.widget.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f, t, i) {
          var o,
            n =
              s.lookupProperty ||
              function (u, c) {
                if (Object.prototype.hasOwnProperty.call(u, c)) return u[c];
              };
          return (
            '                <div class="' +
            ((o = n(r, "if").call(
              e ?? (s.nullContext || {}),
              (o = e != null ? n(e, "attributes") : e) != null
                ? n(o, "draggable")
                : o,
              {
                name: "if",
                hash: {},
                fn: s.program(2, f, 0, t, i),
                inverse: s.program(4, f, 0, t, i),
                loc: {
                  start: { line: 5, column: 28 },
                  end: { line: 5, column: 84 },
                },
              }
            )) != null
              ? o
              : "") +
            `"
                     data-widget-type="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "dataAttr")
                  : o,
                e
              )
            ) +
            `"
                     data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "allowMultiple")
                  : o,
                e
              )
            ) +
            `">
                    <div class="csui-widget-item csui-search-widget-item icon-draggable-handle csui-draggable-widget-item"
                         data-widget-index="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "index")
                  : o,
                e
              )
            ) +
            '" draggable="true" title="' +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "title")
                  : o,
                e
              )
            ) +
            `">
                        <div class="csui-search-result-widget">
                            <div>
                                ` +
            s.escapeExpression(
              (
                n(r, "splitTitle") ||
                (e && n(e, "splitTitle")) ||
                s.hooks.helperMissing
              ).call(
                e ?? (s.nullContext || {}),
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "title")
                  : o,
                i[1] != null ? n(i[1], "query") : i[1],
                {
                  name: "splitTitle",
                  hash: {},
                  loc: {
                    start: { line: 12, column: 32 },
                    end: { line: 12, column: 72 },
                  },
                }
              )
            ) +
            `
                            </div>
                            <span class="csui-search-result-group-title">` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "widgetGroupTitle")
                  : o,
                e
              )
            ) +
            `</span>
                        </div>
                        <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "icon")
                  : o,
                e
              )
            ) +
            `"></div>
                    </div>
                </div>
`
          );
        },
        2: function (s, e, r, l, f) {
          return "";
        },
        4: function (s, e, r, l, f) {
          return " binf-hidden ";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f, t, i) {
          var o,
            n =
              s.lookupProperty ||
              function (u, c) {
                if (Object.prototype.hasOwnProperty.call(u, c)) return u[c];
              };
          return (
            `<div class="csui-search-widget-content">
    <div class="cs-content csui-list-pannel">
        <div class="cs-list-group">
` +
            ((o = n(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? n(e, "widgets") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, f, 0, t, i),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 12 },
                  end: { line: 19, column: 21 },
                },
              }
            )) != null
              ? o
              : "") +
            `        </div>
    </div>
</div>
`
          );
        },
        useDepths: !0,
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.widget.item",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/search.widget.item",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.widget.item.view",
    [
      "csui/lib/backbone",
      "csui/lib/handlebars",
      "csui/perspective.manage/impl/widget.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.widget.item",
      "css!csui/perspective.manage/sidebar/impl/search.widget.item",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return (
        m.registerHelper("splitTitle", function (r, l) {
          if (l.length) {
            let f = "",
              t = l;
            const i = r.split(" ");
            return (
              i.forEach(function (o, n) {
                let u = "";
                if (t.length === 0) u += `<span>${o}</span>`;
                else {
                  const c = o.toLowerCase(),
                    d = c.indexOf(t);
                  if (d !== -1)
                    (u += `<span>${o.substring(0, d)}</span>`),
                      (u += `<span class="csui-search-bold-character">${o.substring(
                        d,
                        d + t.length
                      )}</span>`),
                      (u += `<span>${o.substring(d + t.length)}</span>`);
                  else if (l.indexOf(c) !== -1) {
                    const k = t.substring(0, o.length),
                      C = c.indexOf(k);
                    C !== -1 &&
                      ((u += `<span>${o.substring(0, C)}</span>`),
                      (u += `<span class="csui-search-bold-character">${o.substring(
                        C,
                        C + t.length
                      )}</span>`),
                      (u += `<span>${o.substring(
                        C + t.length,
                        o.length
                      )}</span>`)),
                      (t = t.substring(o.length));
                  } else u += `<span>${o}</span>`;
                }
                n < i.length - 1 && (u += " "), (f += u);
              }),
              new m.SafeString(f)
            );
          }
        }),
        p.extend({
          constructor: function (l) {
            l || (l = {}), p.prototype.constructor.apply(this, arguments);
          },
          className: "csui-widget-module-group",
          template: s,
          templateHelpers: function () {
            let r = new x.Collection(this.model.attributes.widgets),
              l = y.disableTitle,
              f = 0,
              t = this.model.get("title");
            return (
              r.models.forEach(function (i) {
                i.set(
                  {
                    draggable: !!i.get("canDragAndDrop"),
                    disableTitle: l,
                    dataAttr: i.get("id").replace(/\//g, "-"),
                    allowMultiple: !!i.get("allowMultiple"),
                    index: f++,
                    widgetGroupTitle: t,
                  },
                  { silent: !0 }
                );
              }),
              { widgets: r.models, query: this.options?.query || "" }
            );
          },
        })
      );
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.no.results",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-empty-search-results">
<p class="csui-no-search-result-message" role="status">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "noWidgetsFound") ||
                  (e != null ? i(e, "noWidgetsFound") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "noWidgetsFound",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 55 },
                      end: { line: 2, column: 73 },
                    },
                  })
                : t)
            ) +
            `</p>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.no.results",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.no.results.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.no.results",
    ],
    function (x, m, p, y) {
      "use strict";
      return m.View.extend({
        className: "csui-empty-search-results",
        template: y,
        templateContext: function () {
          return { noWidgetsFound: p.noWidgetsFound };
        },
        onRender: function () {
          document
            .querySelector(".csui-sidebar-slide-body .cs-module-list")
            .appendChild(this.el);
        },
      });
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/widget.panel.list",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/perspective.manage/impl/options.form.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui/perspective.manage/impl/widget.list.view",
      "csui/perspective.manage/sidebar/widget.panel.item.view",
      "csui/perspective.manage/sidebar/search.widget.item.view",
      "csui/perspective.manage/sidebar/search.no.results.view",
      "css!csui/perspective.manage/sidebar/impl/widget.panel.list.css",
    ],
    function (x, m, p, y, s, e, r, l, f) {
      "use strict";
      return e.extend({
        constructor: function (o) {
          (this.options = o || {}),
            this.options.data || (o.data = {}),
            e.prototype.constructor.apply(this, arguments),
            (this.noSearchResultsView = new f());
        },
        filterWidgetsBySearch: function (i, o) {
          let u = this.extractWidgetNames(i.models).filter(function (c) {
            return c?.split(" ").join("").toLowerCase().includes(o);
          });
          return i.filter(function (c) {
            return u.some(function (d) {
              return c.get("manifest").title?.includes(d);
            });
          });
        },
        extractWidgetNames: function (i) {
          return i.map(function (o) {
            return o.get("manifest").title?.trim();
          });
        },
        _groupWidgetsByModule: function () {
          let i = new p.Collection();
          if (this.options?.query?.length) {
            let n = this.filterWidgetsBySearch(
              this.allWidgets,
              this.options.query
            );
            n.length || this.renderNoSearchResults(), (this.allWidgets = n);
          }
          let o = this.allWidgets.filter(function (n) {
            let u = n.get("manifest");
            if (
              !u ||
              !x.has(u, "title") ||
              !x.has(u, "description") ||
              u.deprecated
            )
              return !1;
            let c = JSON.parse(JSON.stringify(u.schema || {})),
              d = JSON.parse(JSON.stringify(u.options || {}));
            return !!y._normalizeOptions(c.properties, d.fields || {}, {});
          });
          return (
            x.each(
              o,
              x.bind(function (n) {
                let u = x.defaults(n.get("manifest"), {
                    allowMultiple: !0,
                    title: s.noTitle,
                  }),
                  c = u.allowMultiple;
                c ||
                  (c =
                    m.inArray(n.get("id"), this.options.existsWidgetTypes) ===
                    -1),
                  n.set({
                    allowMultiple: u.allowMultiple,
                    canDragAndDrop: c,
                    title: u.title,
                  });
              }, this)
            ),
            x.each(
              x.groupBy(o, function (n) {
                return n.serverModule.id;
              }),
              function (n, u) {
                let c = x.first(n).serverModule.get("title");
                (c = c
                  ? c.replace(/OpenText /, "")
                  : x.first(n).serverModule.get("id").toUpperCase()),
                  i.add({ id: u, title: c, widgets: n });
              }
            ),
            i
          );
        },
        renderItem: function (i) {
          let o = this;
          const n = this.options.query?.length
            ? new l({
                model: i,
                parentView: o,
                context: this.context,
                query: this.options.query,
              })
            : new r({ model: i, parentView: o, context: this.context });
          n.render(),
            this.listenTo(
              n,
              "widgets:expanded",
              x.bind(this.trigger, this, "dom:refresh", this)
            ),
            this.options?.query && n.trigger("expand:header"),
            m(this.el).append(n.el);
        },
        renderNoSearchResults: function () {
          return this.noSearchResultsView.render();
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/widget.panel",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          return `<div class="csui-search-widget-view"></div>
<div class="csui-widget-list-panel csui-normal-scrolling"></div>

`;
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_widget.panel",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/widget.panel",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/perspective.manage/sidebar/search.widget.view",
      "csui/perspective.manage/sidebar/widget.panel.list.view",
      "hbs!csui/perspective.manage/sidebar/impl/widget.panel",
      "css!csui/perspective.manage/sidebar/impl/widget.panel",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return m.View.extend({
        template: s,
        className: "csui-new-widget-panel",
        ui: { widgetTab: ".csui-widget-list-panel" },
        regions: {
          searchRegion: ".csui-search-widget-view",
          accordionRegion: ".csui-widget-list-panel",
        },
        constructor: function (l) {
          (this.options = l || {}),
            this.options.data || (l.data = {}),
            (this.options.pmanView = l.context.pmanView),
            (this.options.existsWidgetTypes =
              this._getExistsWidgetTypes() || []),
            m.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          this.showChildView("searchRegion", new p(this.options));
          let r = new y(this.options);
          this.showChildView("accordionRegion", r),
            this.listenTo(
              this.getChildView("searchRegion"),
              "search:performed",
              function (l) {
                let f = new y(x.extend({ query: l }, this.options));
                this.showChildView("accordionRegion", f);
              }
            ),
            this.listenTo(
              this.getChildView("searchRegion"),
              "search:closed",
              function () {
                let l = new y(this.options);
                this.showChildView("accordionRegion", l);
              }
            );
        },
        _getExistsWidgetTypes: function () {
          let r = this.options.context.perspective,
            l = r.get("type"),
            f = {},
            t = [];
          return (
            l == "flow"
              ? ((f = r.get("options")),
                f.widgets.forEach(
                  x.bind(function (i) {
                    i.type && t.push(i.type);
                  }, this)
                ))
              : l == "left-center-right" &&
                ((f = r.get("options")),
                f.center && t.push(f.center.type),
                f.right && t.push(f.right.type),
                f.left && t.push(f.left.type)),
            t
          );
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widgets",
    [
      "csui/models/sidebar.item",
      "csui/perspective.manage/sidebar/widget.panel.view",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
    ],
    function (x, m, p) {
      "use strict";
      return x.extend({
        defaults: {
          signature: "Widgets",
          sequence: 2,
          name: p.widgets,
          iconClass: "csui-sidebar-widget-btn",
          panelTitle: p.widgets,
        },
        getPanelView: function (s) {
          return new m(s);
        },
      });
    }
  ),
  csui.define(
    "json!csui/utils/contexts/perspective/impl/perspectives/error.global.json",
    {
      type: "left-center-right",
      options: { center: { type: "csui/widgets/error.global" } },
    }
  ),
  csui.define(
    "hbs!csui/widgets/placeholder/impl/placeholder",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            s.escapeExpression(
              ((t =
                (t = i(r, "label") || (e != null ? i(e, "label") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 0 },
                      end: { line: 1, column: 9 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_placeholder_impl_placeholder", y), y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/placeholder/impl/placeholder",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/placeholder/placeholder.view",
    [
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!./impl/placeholder",
      "css!./impl/placeholder",
    ],
    function (x, m, p) {
      var y = m.ItemView.extend({
        className: "cs-placeholder tile",
        template: p,
        constructor: function (e) {
          e || (e = {}),
            e.data || (e.data = {}),
            e.model ||
              (e.model = new x.Model({
                label: e.data.label,
                bgcolor: e.data.bgcolor,
                color: e.data.color,
              })),
            m.ItemView.prototype.constructor.call(this, e);
        },
        onRender: function () {
          this.$el.css({
            color: this.model.get("color"),
            backgroundColor: this.model.get("bgcolor"),
          });
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/recentlyaccessed.columns",
    ["csui/lib/backbone"],
    function (x) {
      var m = x.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        p = x.Collection.extend({
          model: m,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new p(
              this.map(function (s) {
                return s.attributes;
              })
            );
          },
        }),
        y = new p([
          { key: "type", titleIconInHeader: "mime_type", sequence: 10 },
          { key: "name", sequence: 20 },
          {
            key: "reserved",
            title: "State",
            sequence: 30,
            noTitleInHeader: !0,
          },
          { key: "parent_id", sequence: 40 },
          { key: "access_date_last", sequence: 50 },
          { key: "size", sequence: 60 },
          { key: "modify_date", sequence: 70 },
          {
            key: "favorite",
            sequence: 910,
            noTitleInHeader: !0,
            permanentColumn: !0,
          },
        ]);
      return y;
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/tileview.toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        inlineActionbar: new p(
          {
            inspect: [
              {
                signature: "Properties",
                name: m.ToolbarItemInfo,
                commandData: { dialogView: !0 },
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: m.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            share: [
              {
                signature: "CopyLink",
                name: m.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
            ],
            edit: [
              {
                signature: "Edit",
                name: m.ToolbarItemEdit,
                iconName: "csui_action_edit32",
              },
            ],
            other: [
              {
                signature: "Download",
                name: m.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              { signature: "goToLocation", name: m.ToolbarGoToLocation },
            ],
          },
          {
            maxItemsShown: 1,
            dropDownText: m.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
      };
      s && r(s);
      function r(l) {
        x.each(l, function (f) {
          x.each(f, function (t, i) {
            var o = e[i];
            if (!o) throw new Error("Invalid target toolbar: " + i);
            x.each(t, function (n) {
              (n = new y(n)), o.addItem(n);
            });
          });
        });
      }
      return e;
    }
  ),
  csui.define("csui/widgets/recentlyaccessed/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/recentlyaccessed/impl/nls/root/lang", {
    dialogTitle: "Recently Accessed",
    searchTitle: "Search Recently Accessed",
    searchPlaceholder: "Recently Accessed",
    searchAria: "Search for recently accessed objects",
    expandAria: "Expand the Recently Accessed widget",
    emptyListText: "There are no items to display.",
    loadingListText: "Loading results...",
    loadingText: "Loading recently accessed",
    failedListText: "Loading results failed.",
    access_date_last: "Last Accessed",
    parent_id: "Location",
    openRecentlyAccessedView: "Open recently accessed view",
  }),
  csui.define(
    "css!csui/widgets/recentlyaccessed/impl/recentlyaccessed",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/recentlyaccessed.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/list/list.view",
      "csui/controls/listitem/listitemstandard.view",
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/list/behaviors/list.view.keyboard.behavior",
      "csui/behaviors/collection.state/collection.state.behavior",
      "csui/controls/list/list.state.view",
      "csui/utils/contexts/factories/recentlyaccessed",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/progressblocker/blocker",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/commands",
      "csui/widgets/recentlyaccessed/tileview.toolbaritems",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/tile/behaviors/infinite.scrolling.behavior",
      "csui/behaviors/limiting/limiting.behavior",
      "csui/behaviors/collection.error/collection.error.behavior",
      "csui/utils/base",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/lang",
      "i18n!csui/controls/listitem/impl/nls/lang",
      "css!csui/widgets/recentlyaccessed/impl/recentlyaccessed",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v,
      _,
      T
    ) {
      "use strict";
      var a = x.moduleConfig("csui/behaviors/limiting/limiting.behavior"),
        g = p.defaults({}, m.config(), a, {
          openInPerspective: !0,
          limit: 25,
          filterByProperty: "name",
        }),
        I = n.getInfiniteScrollFlag(),
        D = s.extend({
          constructor: function (B) {
            B || (B = {}),
              p.defaults(B, {
                orderBy: "access_date_last desc",
                refetchNodeActions: !0,
              }),
              B.data || (B.data = {}),
              (B.data.titleBarIcon =
                B.data.showTitleIcon === !1
                  ? void 0
                  : "title-icon title-recentlyaccessed"),
              (B.tileViewToolbarItems = k),
              (this.context = B.context),
              (this.showInlineActionBar =
                B.showInlineActionBar === !1 ? B.showInlineActionBar : !0);
            var M = B.context,
              E = M && M.viewStateModel;
            this._enableOpenPerspective =
              g.openInPerspective && E && E.get("history");
            var P = h.getSignatures(k),
              O =
                B.collection ||
                B.context.getCollection(n, {
                  options: {
                    promotedActionCommands: [],
                    nonPromotedActionCommands: P,
                  },
                }),
              z = n.getLimitedResourceScope();
            z && z.commands && z.commands.push("editpermissions"),
              O.setResourceScope(z),
              O.setEnabledDelayRestCommands(!1),
              O.setEnabledLazyActionCommands(!1),
              (this.collection = O),
              s.prototype.constructor.call(this, B),
              I && this.listenTo(this, "change:filterValue", this.applyFilter),
              this.listenTo(
                this.completeCollection || this.collection,
                "error",
                function (F, U, H) {
                  var N = new v.Error(U);
                  C.showMessage("error", N.message);
                }
              ),
              (this.loadingText = _.loadingText),
              c.imbue(this),
              (this.applicationScope = B.context.getModel(d));
          },
          childEvents: {
            "click:item": "onClickItem",
            render: "onRenderItem",
            "before:destroy": "onBeforeDestroyItem",
          },
          templateHelpers: function () {
            return {
              title: this.options.data.title || _.dialogTitle,
              icon: this.options.data.titleBarIcon,
              searchPlaceholder: _.searchPlaceholder,
              searchTitle: _.searchTitle,
              searchAria: _.searchAria,
              expandAria: _.expandAria,
              openPerspectiveAria: _.openRecentlyAccessedView,
              openPerspectiveTooltip: _.openRecentlyAccessedView,
              enableOpenPerspective: this._enableOpenPerspective,
            };
          },
          childView: e,
          childViewOptions: function () {
            var A = this.showInlineActionBar
              ? {
                  toolbaritems: this.options.tileViewToolbarItems,
                  collection: this.completeCollection,
                }
              : void 0;
            return {
              templateHelpers: function () {
                return {
                  name: this.model.get("short_name"),
                  enableIcon: !0,
                  showInlineActionBar: this.showInlineActionBar,
                  itemLabel: p.str.sformat(
                    T.itemTitleLabel,
                    this.model.get("short_name")
                  ),
                };
              },
              context: this.context,
              checkDefaultAction: !0,
              toolbarData: A,
              refetchNodeActions: this.options.refetchNodeActions,
            };
          },
          behaviors: {
            LimitedList: {
              behaviorClass: I ? S : w,
              contentParent: ".tile-content",
              completeCollection: function () {
                var A = h.getSignatures(k),
                  B =
                    this.options.collection ||
                    this.options.context.getCollection(n, {
                      options: {
                        promotedActionCommands: [],
                        nonPromotedActionCommands: A,
                      },
                    }),
                  M = n.getLimitedResourceScope();
                return (
                  M && M.commands && M.commands.push("editpermissions"),
                  B.setResourceScope(M),
                  B.setEnabledDelayRestCommands(!1),
                  B.setEnabledLazyActionCommands(!1),
                  B
                );
              },
              limit: 0,
            },
            ExpandableList: {
              behaviorClass: r,
              expandedView:
                "csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view",
              orderBy: function () {
                return this.options.orderBy;
              },
              titleBarIcon: function () {
                return this.options.data.titleBarIcon;
              },
              dialogTitle: _.dialogTitle,
              dialogTitleIconNameRight: "csui_action_minimize32",
              dialogClassName: "recentlyaccessed",
            },
            DefaultAction: { behaviorClass: l },
            TabableRegion: { behaviorClass: f },
            ListViewKeyboardBehavior: { behaviorClass: t },
            CollectionState: {
              behaviorClass: i,
              collection: function () {
                return this.completeCollection;
              },
              stateView: o,
              stateMessages: {
                empty: _.emptyListText,
                loading: _.loadingListText,
                failed: _.failedListText,
              },
            },
          },
          filterChanged: function () {
            var A = this.ui.searchInput.val();
            if (this.lastFilterValue !== A) {
              this.lastFilterValue = A;
              var B = this;
              this.filterTimeout && clearTimeout(this.filterTimeout),
                (this.filterTimeout = setTimeout(function () {
                  (B.filterTimeout = void 0),
                    s.prototype.filterChanged.apply(B, arguments);
                }, 1e3));
            }
          },
          applyFilter: function () {
            var A = this.options.filterValue.toLowerCase().split(" "),
              B = g.filterByProperty,
              M = {};
            (M[B] = this.options.filterValue.toLowerCase()),
              this.collection.fetching
                ? (this.filterValuePending = M)
                : (this.collection.resetLimit(!1),
                  this.collection.setFilter(M));
          },
          onRender: function () {
            s.prototype.onRender.apply(this, arguments),
              this.$el.addClass("cs-recentlyaccessed");
          },
          onRenderItem: function (A) {
            (A._nodeIconView = new u({
              el: A.$(".csui-type-icon").get(0),
              node: A.model,
            })),
              A._nodeIconView.render(),
              this.completeCollection &&
                this.completeCollection.length &&
                A.$el.attr("role", "option"),
              A.$el.attr(
                "aria-label",
                p.str.sformat(
                  T.typeAndNameAria,
                  A._nodeIconView.model.get("title"),
                  A.model.get("short_name")
                )
              );
          },
          onBeforeDestroyItem: function (A) {
            A._nodeIconView && A._nodeIconView.destroy();
          },
          onClickItem: function (A) {
            this.triggerMethod("execute:defaultAction", A.model);
          },
          onClickHeader: function (A) {
            this.onClickOpenPerspective(A);
          },
          onClickOpenPerspective: function (A) {
            this.applicationScope.set("id", "recentlyaccessed"),
              this.trigger("open:recentlyaccessed:perspective");
          },
        });
      return D;
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcut/impl/shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="tile-header">
  <div class="tile-title">
    <h2 class="csui-heading">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "short_name") || (e != null ? i(e, "short_name") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "short_name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 29 },
                      end: { line: 3, column: 43 },
                    },
                  })
                : t)
            ) +
            `</h2>
  </div>
</div>

<div class="tile-icon">
  <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 19 },
                      end: { line: 8, column: 27 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 36 },
                      end: { line: 8, column: 45 },
                    },
                  })
                : t)
            ) +
            `"></div>
</div>
`
          );
        },
      });
      return p.registerPartial("csui_widgets_shortcut_impl_shortcut", y), y;
    }
  ),
  csui.define("csui/widgets/shortcut/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcut/impl/nls/root/lang", {
    loadingText: "Loading...",
  }),
  csui.define("css!csui/widgets/shortcut/impl/shortcut", [], function () {}),
  csui.define(
    "csui/widgets/shortcut/shortcut.view",
    [
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/utils/contexts/factories/node",
      "csui/utils/node.links/node.links",
      "csui/utils/defaultactionitems",
      "csui/utils/commands",
      "hbs!csui/widgets/shortcut/impl/shortcut",
      "i18n!csui/widgets/shortcut/impl/nls/lang",
      "css!csui/widgets/shortcut/impl/shortcut",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i) {
      "use strict";
      var o = m.ItemView.extend({
        tagName: "a",
        attributes: { href: "#" },
        className: function () {
          var n = this.options.data.background || "cs-tile-background-default";
          return "cs-shortcut tile " + n;
        },
        modelEvents: { change: "render" },
        triggers: { click: "click:link" },
        template: t,
        templateHelpers: function () {
          var n, u, c;
          return (
            this.model.fetched
              ? ((n = this.getName()),
                (u = n.length > 38 ? n.substr(0, 38) + "..." : n),
                (c = u.indexOf(" ")),
                u.length >= 20 &&
                  (c < 0 || c > 20) &&
                  (u = u.substr(0, 18) + "..."))
              : (u = i.loadingText),
            {
              short_name: u,
              icon: this.options.data.icon || "icon-folder",
              title: n,
            }
          );
        },
        behaviors: {
          DefaultAction: { behaviorClass: p },
          TabableRegion: { behaviorClass: y },
          ItemError: { behaviorClass: s },
        },
        events: { keydown: "onKeyInView" },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onKeyInView: function (n) {
          (n.keyCode === 32 || n.keyCode === 13) &&
            (n.preventDefault(),
            n.stopPropagation(),
            this.triggerMethod("click:link"));
        },
        constructor: function (u) {
          u || (u = {}),
            u.data || (u.data = {}),
            u.model ||
              (u.model = u.context.getModel(e, {
                attributes: { id: u.data.id || "volume", type: u.data.type },
              })),
            m.ItemView.prototype.constructor.call(this, u),
            this.model.excludeResources(),
            this.model.resetFields(),
            this.model.setFields({
              properties: ["container", "id", "name", "original_id", "type"],
              "versions.element(0)": ["mime_type"],
            }),
            this.model.resetExpand(),
            this.model.setExpand({ properties: ["original_id"] }),
            this.model.resetCommands(),
            this.model.setCommands(l.getAllCommandSignatures(f));
        },
        onRender: function () {
          var n =
            !this.model.fetched ||
            !this.defaultActionController.hasAction(this.model);
          this.$el[n ? "addClass" : "removeClass"]("csui-disabled"),
            this.$el.attr("href", r.getUrl(this.model) || "#");
        },
        getName: function () {
          return (this.options.data.displayName || "").trim().length > 0
            ? this.options.data.displayName
            : this.model.get("name") || "";
        },
        onClickLink: function () {
          this.triggerMethod("execute:defaultAction", this.model);
        },
      });
      return o;
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-details">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>

    <div class="tile-title">
        <span class="csui-heading binf-line-clamp">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 51 },
                      end: { line: 7, column: 59 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_small.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-details">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>

    <div class="tile-title">
        <span class="csui-heading binf-line-clamp" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "shortcutAria") ||
                  (e != null ? i(e, "shortcutAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "shortcutAria",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 63 },
                      end: { line: 7, column: 79 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 81 },
                      end: { line: 7, column: 89 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_medium.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="tile-group">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>
    <div class="tile-title">
        <span class="csui-heading binf-line-clamp" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "shortcutAria") ||
                  (e != null ? i(e, "shortcutAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "shortcutAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 63 },
                      end: { line: 6, column: 79 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 81 },
                      end: { line: 6, column: 89 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_large.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/widgets/shortcuts/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcuts/impl/nls/root/lang", {
    loadingText: "Loading shortcuts...",
    shortcutPrefixAria: "Shortcut to {0}",
    addShortcut: "Add shortcut",
    removeShortcut: "Remove shortcut",
    removeShortcutCnfrmMsg: "Shortcut will be removed from the group.",
    groupAria: "Shortcut Group",
    emptyGroup: "Add a shortcut to the group. Max. 4 shortcuts can be added",
    maxItemsGroup:
      'Shortcut group, 4 shortcuts added. Press "Enter" to access the list of shortcuts. Press "Ctrl+ Right or Left Arrow" to move the shortcut group to the right or left.',
    addShortcutToGroup: "Add shortcut to the group",
    shortcutSettings: "{0} shortcut settings",
    accessShortcutActions: "Shortcut {0}, press ENTER to access its actions",
    shortcutGroupWithOneItem:
      "Shortcut Group. {0} shortcut added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.",
    shortcutGroupWithMixedItems:
      "Shortcut Group. {0} shortcuts added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.",
    removeShortcutItem: "Remove {0} Shortcut",
  }),
  csui.define(
    "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
    ["csui/lib/underscore", "csui/utils/contexts/factories/node"],
    function (x, m) {
      "use strict";
      var p = {
        createDetailListForShortcuts: function (y) {
          const s = [];
          return (
            Array.isArray(y) &&
              y.forEach((e) => {
                const r = this.createMainNode(e);
                e.node = r;
                const l = this.createNode4BackgroundImage(
                  e.customBackgroundImage
                );
                l && s.push(l.fetch({ suppressError: !0 }));
              }),
            s
          );
        },
        createMainNode: function (y) {
          return this.options.context.getModel(m, {
            attributes: {
              id: y.id || y.launchButtonID || "volume",
              type: y.type,
            },
            options: {
              fields: {
                properties: [
                  "container",
                  "id",
                  "name",
                  "original_id",
                  "type",
                  "custom_view_search",
                  "image_url",
                ],
                "versions.element(0)": ["mime_type"],
              },
            },
          });
        },
        createNode4BackgroundImage: function (y) {
          if (y)
            return this.options.context.getModel(m, {
              attributes: { id: y },
              options: {
                fields: {
                  properties: [
                    "deploy_url",
                    "mime_type",
                    "modify_date",
                    "name",
                    "id",
                  ],
                  "versions.element(0)": ["owner_id", "version_number"],
                  nicknames: ["nickname"],
                },
              },
            });
        },
      };
      return p;
    }
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/utils/url",
      "csui/utils/contexts/factories/node",
      "csui/utils/defaultactionitems",
      "csui/utils/commands",
      "csui/utils/node.links/node.links",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "csui/utils/high.contrast/detector!",
      "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
      "csui/utils/contexts/factories/connector",
      "csui/controls/node-type.icon/node-type.icon.item.view.mixin",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c, d, h, k, C, S) {
      "use strict";
      var w = y.ItemView.extend(
        {
          constructor: function (v) {
            v || (v = {}),
              (v.model = v.model || new p.Model()),
              v.model.set(
                x.defaults(v.model.attributes, {
                  icon: w.DEFAULT_ICON,
                  theme: "csui-shortcut-theme-grey-shade1",
                  layout: "small",
                  id: "",
                  displayName: "",
                  customBackgroundColor: "",
                  customBackgroundImage: "",
                })
              ),
              h === 2 && v.model.set("icon", w.BLACK_FOLDER_ICON),
              y.ItemView.prototype.constructor.call(this, v),
              (this.node = this.model.get("node")),
              this.node || this._ensureNode(),
              this._ensureNodeFetched();
          },
          tagName: "a",
          className: function () {
            var b = [],
              v = this.model.get("customBackgroundImage"),
              _ = this.model.get("customBackgroundColor");
            return (
              b.push("csui-shortcut-item"),
              b.push("csui-acc-focusable"),
              b.push(this.model.get("theme")),
              b.push("csui-" + this.model.get("layout")),
              (_ || v) && b.push("cs-background-custom"),
              v && b.push("cs-background-image"),
              b.join(" ")
            );
          },
          getTemplate: function () {
            switch (this.model.get("layout")) {
              case "small":
                return n;
              case "medium":
                return u;
              default:
                return c;
            }
          },
          templateHelpers: function () {
            var b = this.getName();
            return { icon: this.model.get("icon") || w.DEFAULT_ICON, name: b };
          },
          behaviors: {
            DefaultAction: { behaviorClass: e },
            ItemError: {
              behaviorClass: r,
              model: function () {
                return this.options.model.get("node");
              },
              errorViewOptions: function () {
                return { low: this.model.get("layout") === "small" };
              },
            },
          },
          modelEvents: {
            change: "render",
            "change:shortcutTheme": "_onThemeChange",
            "change:customBackgroundColor": "_onCustomBackgroundColorChange",
            "change:customBackgroundImage": "_onCustomBackgroundImageChange",
            "change:id": "_ensureNode",
            "change:type": "_ensureNode",
          },
          events: { click: "onClicked", keydown: "onKeyInView" },
          onRender: function () {
            this._updateElement(),
              this._ensureBackgroundImageNodeThenApplyBackground(),
              this._updateNodeState();
          },
          onKeyInView: function (b) {
            (b.keyCode === 32 || b.keyCode === 13) && this.trigger("click");
          },
          _generateImageUrlFromBWSNode: function () {
            const b = this.model.get("layout") || "large",
              v = this.$el.find(".tile-icon>.icon");
            v.removeClass(h === 2 ? w.BLACK_FOLDER_ICON : w.DEFAULT_ICON),
              this.renderNodeTypeIconView(this.model.get("node"), v, "", "", {
                size: b,
                title: this.getName(),
              }),
              this.model.set("icon", "");
          },
          _updateElement: function () {
            var b = this.getName();
            this.node && this.$el.attr("href", o.getUrl(this.node)),
              this.model.get("node")?.get("image_url") &&
                this._generateImageUrlFromBWSNode(),
              this.$el
                .attr("class", x.result(this, "className"))
                .attr("title", this.getName()),
              this.$el.attr(
                "aria-label",
                x.str.sformat(d.shortcutPrefixAria, b)
              );
          },
          _onThemeChange: function () {
            this.trigger("change:shortcutTheme");
          },
          _onCustomBackgroundColorChange: function () {
            this.trigger("change:customBackgroundColor");
          },
          _onCustomBackgroundImageChange: function () {
            this.trigger("change:customBackgroundImage");
          },
          _ensureBackgroundImageNodeThenApplyBackground: function () {
            const b = this.model.get("customBackgroundImage");
            if (
              (b || this.model.set("deploy_url", ""),
              this.options.perspectiveMode === "edit" && this.isUpdating && b)
            ) {
              const v = this;
              this.createNode4BackgroundImage(b)
                .fetch()
                .done(function (T) {
                  const { deploy_url: a } = T;
                  v.model.set("deploy_url", a),
                    v._applyBackgroundStyle(v.model.attributes);
                });
              return;
            }
            this._applyBackgroundStyle(this.model.attributes);
          },
          _applyBackgroundStyle: function ({
            deploy_url: b,
            version_number: v,
            modify_date: _,
            customBackgroundColor: T,
          }) {
            const a = encodeURIComponent(_),
              I = this.options.context
                .getObject(C)
                .getConnectionUrl()
                .getOrigin(),
              D = b ? `${I}${b}?m=${a}&v=${v}` : "";
            (this.el.style.backgroundImage = `url(${D})`),
              (this.el.style.backgroundColor = T || ""),
              (this.el.style.backgroundBlendMode =
                T && D ? "soft-light" : "normal");
          },
          onClicked: function (b) {
            s.isControlClick(b) ||
              (b.preventDefault(),
              this.triggerMethod("execute:defaultAction", this.node));
          },
          getName: function () {
            return (this.model.get("displayName") || "").trim().length > 0
              ? this.model.get("displayName")
              : this.node.fetched
              ? this.node.get("name")
              : d.loadingText;
          },
          _ensureNode: function () {
            (this.node = this.options.context.getModel(f, {
              attributes: {
                id: this.options.model.get("id") || "volume",
                type: this.options.model.get("type") || 141,
              },
            })),
              w.prepareModelToFetch(this.node),
              this.model.set("node", this.node, { silent: !0 }),
              this.trigger("update:model", this.node),
              this._ensureNodeFetched();
          },
          _ensureNodeFetched: function () {
            this.listenToOnce(this.node, "change", this.render),
              this.node.ensureFetched({ suppressError: !0 });
          },
          _updateErrorState: function () {
            this.node.error
              ? (this.$el.addClass("csui-failed"), this.$el.removeAttr("title"))
              : this.$el.removeClass("csui-failed");
          },
          _updateNodeState: function () {
            this.node.fetched &&
            this.defaultActionController.hasAction(this.node)
              ? this.$el.removeClass("csui-disabled")
              : this.$el.addClass("csui-disabled"),
              this._updateErrorState();
          },
          focus: function () {
            this.$el.trigger("focus");
          },
        },
        {
          prepareModelToFetch: function (b) {
            b.excludeResources(),
              b.resetFields(),
              b.setFields({
                properties: [
                  "container",
                  "id",
                  "name",
                  "original_id",
                  "type",
                  "custom_view_search",
                  "image_url",
                ],
                "versions.element(0)": ["mime_type"],
              }),
              b.resetExpand(),
              b.setExpand({ properties: ["original_id"] }),
              b.resetCommands(),
              b.setCommands(t.getAllCommandSignatures(i));
          },
          DEFAULT_ICON: "icon-folder",
          BLACK_FOLDER_ICON: "icon-folder-black",
        }
      );
      return x.extend(w.prototype, k), S.mixin(w.prototype), w;
    }
  ),
  csui.define("csui/widgets/shortcuts/impl/nls/shortcuts.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcuts/impl/nls/root/shortcuts.manifest", {
    widgetTitle: "Shortcut Group",
    shortcutWidgetTitle: "Shortcut",
    widgetDescription:
      "Tile representing a hyperlink to an object; it navigates to its page when clicked",
    shortcutItemsTitle: "Shortcut Items",
    shortcutItemsDescription: "Shortcut Items description",
    idTitle: "Target object",
    idDescription: "An object to open by this shortcut",
    typeTitle: "Volume",
    typeDescription:
      "Sub-type number of a global volume to open by this shortcut if no object has been selected",
    displayNameTitle: "Display name",
    shortcutThemeTitle: "Theme",
    shortcutThemeDescription: "Styling of the shortcuts",
    typeEnterpriseVolume: "Enterprise",
    typePersonalVolume: "Personal",
    typeCategoryVolume: "Categories",
    shortcutThemeStone1: "Stone Group 1",
    shortcutThemeStone2: "Stone Group 2",
    shortcutThemeTeal1: "Teal Group 1",
    shortcutThemeTeal2: "Teal Group 2",
    shortcutThemePink1: "Pink Group 1",
    shortcutThemePink2: "Pink Group 2",
    shortcutThemeIndigo1: "Indigo Group 1",
    shortcutThemeIndigo2: "Indigo Group 2",
    customBackgroundColorTitle: "Custom background color",
    customBackgroundColorDescription: "A custom background color for the tile",
    customBackgroundImageTitle: "Custom background image",
    customBackgroundImageDescription: "A custom background image for the tile",
    customBackgroundBlendModeTitle: "Blend background color",
    customBackgroundBlendModeDescription:
      "Blends the background image with the theme color, or the individual shortcut color (if one is set)",
    none: "None",
  }),
  csui.define(
    "json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{shortcutWidgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "tile",
      schema: {
        type: "object",
        properties: {
          id: {
            title: "{{idTitle}}",
            description: "{{idDescription}}",
            type: "integer",
          },
          displayName: { title: "{{displayNameTitle}}", type: "string" },
          type: {
            title: "{{typeTitle}}",
            description: "{{typeDescription}}",
            type: "integer",
            enum: [141, 142, 133],
          },
          shortcutTheme: {
            title: "{{shortcutThemeTitle}}",
            description: "{{shortcutThemeDescription}}",
            type: "string",
            enum: [
              "csui-shortcut-theme-stone1",
              "csui-shortcut-theme-stone2",
              "csui-shortcut-theme-teal1",
              "csui-shortcut-theme-teal2",
              "csui-shortcut-theme-pink1",
              "csui-shortcut-theme-pink2",
              "csui-shortcut-theme-indigo1",
              "csui-shortcut-theme-indigo2",
            ],
          },
          customBackgroundImage: {
            title: "{{customBackgroundImageTitle}}",
            description: "{{customBackgroundImageDescription}}",
            type: "integer",
          },
          customBackgroundColor: {
            title: "{{customBackgroundColorTitle}}",
            description: "{{customBackgroundColorDescription}}",
            type: "string",
            enum: [
              "",
              "Aqua",
              "Aquamarine",
              "Blue",
              "BlueViolet",
              "Brown",
              "BurlyWood",
              "CadetBlue",
              "Chartreuse",
              "Chocolate",
              "Coral",
              "CornflowerBlue",
              "Crimson",
              "DarkBlue",
              "DarkCyan",
              "DarkGoldenRod",
              "DarkGray",
              "DarkGreen",
              "DarkKhaki",
              "DarkMagenta",
              "DarkOliveGreen",
              "DarkOrange",
              "DarkOrchid",
              "DarkRed",
              "DarkSalmon",
              "DarkSeaGreen",
              "DarkSlateBlue",
              "DarkSlateGray",
              "DarkTurquoise",
              "DarkViolet",
              "DeepPink",
              "DeepSkyBlue",
              "DimGray",
              "DodgerBlue",
              "FireBrick",
              "ForestGreen",
              "Fuchsia",
              "Gainsboro",
              "Gold",
              "GoldenRod",
              "Gray",
              "Green",
              "GreenYellow",
              "HotPink",
              "IndianRed",
              "Indigo",
              "Khaki",
              "LawnGreen",
              "LightBlue",
              "LightCoral",
              "LightGray",
              "LightGreen",
              "LightPink",
              "LightSalmon",
              "LightSeaGreen",
              "LightSkyBlue",
              "LightSlateGray",
              "LightSteelBlue",
              "Lime",
              "LimeGreen",
              "Maroon",
              "MediumAquaMarine",
              "MediumBlue",
              "MediumOrchid",
              "MediumPurple",
              "MediumSeaGreen",
              "MediumSlateBlue",
              "MediumSpringGreen",
              "MediumTurquoise",
              "MediumVioletRed",
              "MidnightBlue",
              "Moccasin",
              "NavajoWhite",
              "Navy",
              "Olive",
              "OliveDrab",
              "Orange",
              "OrangeRed",
              "Orchid",
              "PaleGoldenRod",
              "PaleGreen",
              "PaleTurquoise",
              "PaleVioletRed",
              "PeachPuff",
              "Peru",
              "Pink",
              "Plum",
              "PowderBlue",
              "Purple",
              "RebeccaPurple",
              "Red",
              "RosyBrown",
              "RoyalBlue",
              "SaddleBrown",
              "Salmon",
              "SandyBrown",
              "SeaGreen",
              "Sienna",
              "Silver",
              "SkyBlue",
              "SlateBlue",
              "SlateGray",
              "SpringGreen",
              "SteelBlue",
              "Tan",
              "Teal",
              "Thistle",
              "Tomato",
              "Turquoise",
              "Violet",
              "Wheat",
              "Yellow",
              "YellowGreen",
            ],
            default: "",
          },
        },
      },
      options: {
        fields: {
          shortcutTheme: {
            type: "select",
            optionLabels: [
              "{{shortcutThemeStone1}}",
              "{{shortcutThemeStone2}}",
              "{{shortcutThemeTeal1}}",
              "{{shortcutThemeTeal2}}",
              "{{shortcutThemePink1}}",
              "{{shortcutThemePink2}}",
              "{{shortcutThemeIndigo1}}",
              "{{shortcutThemeIndigo2}}",
            ],
          },
          id: {
            type: "otcs_node_picker",
            type_control: {
              parameters: {
                select_types: [],
                startLocations: [
                  "csui/dialogs/node.picker/start.locations/enterprise.volume",
                  "csui/dialogs/node.picker/start.locations/personal.volume",
                  "csui/dialogs/node.picker/start.locations/favorites",
                  "csui/dialogs/node.picker/start.locations/recent.containers",
                ],
              },
            },
          },
          type: {
            type: "select",
            optionLabels: [
              "{{typeEnterpriseVolume}}",
              "{{typePersonalVolume}}",
              "{{typeCategoryVolume}}",
            ],
          },
          customBackgroundColor: {
            type: "select",
            optionLabels: [
              "{{none}}",
              "Aqua",
              "Aquamarine",
              "Blue",
              "BlueViolet",
              "Brown",
              "BurlyWood",
              "CadetBlue",
              "Chartreuse",
              "Chocolate",
              "Coral",
              "CornflowerBlue",
              "Crimson",
              "DarkBlue",
              "DarkCyan",
              "DarkGoldenRod",
              "DarkGray",
              "DarkGreen",
              "DarkKhaki",
              "DarkMagenta",
              "DarkOliveGreen",
              "DarkOrange",
              "DarkOrchid",
              "DarkRed",
              "DarkSalmon",
              "DarkSeaGreen",
              "DarkSlateBlue",
              "DarkSlateGray",
              "DarkTurquoise",
              "DarkViolet",
              "DeepPink",
              "DeepSkyBlue",
              "DimGray",
              "DodgerBlue",
              "FireBrick",
              "ForestGreen",
              "Fuchsia",
              "Gainsboro",
              "Gold",
              "GoldenRod",
              "Gray",
              "Green",
              "GreenYellow",
              "HotPink",
              "IndianRed",
              "Indigo",
              "Khaki",
              "LawnGreen",
              "LightBlue",
              "LightCoral",
              "LightGray",
              "LightGreen",
              "LightPink",
              "LightSalmon",
              "LightSeaGreen",
              "LightSkyBlue",
              "LightSlateGray",
              "LightSteelBlue",
              "Lime",
              "LimeGreen",
              "Maroon",
              "MediumAquaMarine",
              "MediumBlue",
              "MediumOrchid",
              "MediumPurple",
              "MediumSeaGreen",
              "MediumSlateBlue",
              "MediumSpringGreen",
              "MediumTurquoise",
              "MediumVioletRed",
              "MidnightBlue",
              "Moccasin",
              "NavajoWhite",
              "Navy",
              "Olive",
              "OliveDrab",
              "Orange",
              "OrangeRed",
              "Orchid",
              "PaleGoldenRod",
              "PaleGreen",
              "PaleTurquoise",
              "PaleVioletRed",
              "PeachPuff",
              "Peru",
              "Pink",
              "Plum",
              "PowderBlue",
              "Purple",
              "RebeccaPurple",
              "Red",
              "RosyBrown",
              "RoyalBlue",
              "SaddleBrown",
              "Salmon",
              "SandyBrown",
              "SeaGreen",
              "Sienna",
              "Silver",
              "SkyBlue",
              "SlateBlue",
              "SlateGray",
              "SpringGreen",
              "SteelBlue",
              "Tan",
              "Teal",
              "Thistle",
              "Tomato",
              "Turquoise",
              "Violet",
              "Wheat",
              "Yellow",
              "YellowGreen",
            ],
          },
          customBackgroundImage: {
            type: "otcs_node_picker",
            type_control: {
              parameters: {
                select_types: [1305],
                startLocations: [
                  "csui/dialogs/node.picker/start.locations/support.assets.volume",
                ],
                startLocation:
                  "csui/dialogs/node.picker/start.locations/support.assets.volume",
              },
            },
          },
        },
      },
    }
  ),
  csui.define(
    "csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
      "csui/models/widget/widget.model",
      "csui/utils/base",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest",
      "json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json",
    ],
    function (x, m, p, y, s, e, r, l, f, t) {
      "use strict";
      t = e.resolveLocalizedManifest("shortcut.manifest", t, f);
      var i = s.extend({
        constructor: function (n) {
          n || (n = {}),
            (n.model = n.model || new y.Model()),
            this._injectConfigurationBehaviour(n),
            n.container.options.data.___pman_isdropped &&
              n.collection.getShortcuts().length === 0 &&
              n.model.set("___pman_opencallout", !0, { silent: !0 }),
            n.context &&
              n.context.perspective &&
              (n.type = n.context.perspective.type),
            s.prototype.constructor.apply(this, arguments),
            this._registerEventHandlers();
        },
        tagName: "div",
        modelEvents: m.defaults(
          { "refresh:mask": "onRefreshMask" },
          m.result(s.prototype, "modelEvents")
        ),
        onRefreshMask: function () {
          var o = this._getDefaultWidgetConfig();
          this.trigger("refresh:mask", o);
        },
        attachElContent: function (o) {
          var n = this.$el.find(
            ".csui-configure-perspective-widget .pman-widget-popover"
          );
          return (
            n.length
              ? (this.$el
                  .children()
                  .not(".csui-configure-perspective-widget")
                  .remove(),
                this.$el.prepend(p(o)))
              : this.$el.html(o),
            !0
          );
        },
        _getDefaultWidgetConfig: function (o) {
          o || (o = this.options);
          var n = l.groupAria + " ";
          o.collection.getShortcuts().forEach(function (c, d) {
            d > 0 && (n += ", "),
              (n += c.get("displayName") || c.get("node").get("name"));
          });
          var u = {
            allowReplace: !1,
            notifyUpdatesImmediatly: !0,
            useEnterToConfigure: this._isNewPlaceholder(o),
            ItemsInGroupAriaLabel: n,
          };
          return (
            o.collection.getShortcuts().length > 1 &&
              (u = m.extend(u, {
                removeConfirmTitle: l.removeShortcut,
                removeConfirmMsg: l.removeShortcutCnfrmMsg,
                confirmOnRemove: !1,
              })),
            u
          );
        },
        _injectConfigurationBehaviour: function (o) {
          var n = this._getDefaultWidgetConfig(o);
          let u,
            c = !!o.context._user?.get("privilege_system_admin_rights");
          o.perspectiveMode === "personalize" || !c
            ? ((u = structuredClone(t)),
              delete u.options.fields.customBackgroundColor,
              delete u.options.fields.customBackgroundImage,
              delete u.schema.properties.customBackgroundColor,
              delete u.schema.properties.customBackgroundImage)
            : (u = t),
            (this.behaviors = m.defaults(
              {
                PerspectiveWidgetConfig: m.extend(
                  {
                    behaviorClass: x(
                      "csui/perspective.manage/behaviours/pman.widget.config.behaviour"
                    ),
                    widgetConfig: function () {
                      return { options: o.model.attributes };
                    },
                    manifest: u,
                  },
                  n
                ),
              },
              this.behaviors
            ));
        },
        isShortcutValid: function (o) {
          var n = !0;
          return (
            this.collection.getShortcuts().length === 0 &&
              this.options.perspectiveMode === "edit" &&
              (n = this.isOptionsValid(o)),
            n
          );
        },
        validateConfiguration: function (o) {
          var n = this.isShortcutValid(o),
            u = n ? "removeClass" : "addClass";
          return (
            this.$el.find(".tile-group")[u]("binf-hidden"),
            this.$el[u]("csui-pman-shortcut-error"),
            n
          );
        },
        isOptionsValid: function (o) {
          return !!o.id || !!o.type;
        },
        _updateShortcut: function (o) {
          this.isShortcutValid(o.options) &&
            this.$el
              .find(".csui-configure-perspective-widget")
              .removeClass("binf-perspective-has-error");
        },
        _registerEventHandlers: function () {
          this.listenTo(this, "delete:widget", function () {
            delete this.options.container.options.data.___pman_opencallout;
          }),
            this.listenTo(this, "update:widget:options", this._updateShortcut);
        },
        _updateElement: function () {
          this.$el.attr("class", m.result(this, "className")),
            this.model.get("node")?.get("image_url") &&
              this._generateImageUrlFromBWSNode();
        },
        _ensureNode: function () {
          this._isNewPlaceholder()
            ? (this.node = new y.Model())
            : s.prototype._ensureNode.apply(this, arguments);
        },
        _ensureNodeFetched: function () {
          this._isNewPlaceholder() ||
            ((this.isUpdating = !0),
            s.prototype._ensureNodeFetched.apply(this, arguments),
            delete this.isUpdating);
        },
        _updateNodeState: function () {
          this._isNewPlaceholder() ||
            s.prototype._updateErrorState.apply(this, arguments);
        },
        getName: function () {
          return this._isNewPlaceholder()
            ? l.addShortcut
            : s.prototype.getName.apply(this, arguments);
        },
        onRender: function () {
          s.prototype.onRender.apply(this, arguments),
            this._isNewPlaceholder() &&
              this.$el.addClass("csui-pman-shortcut-new"),
            this.$el.addClass("csui-pman-editable-widget"),
            this.$el.find(".binf-popover").length ||
              r.clearFocusables(this.$el);
        },
        onDomRefresh: function () {
          var o = this.$el.find(".wrapper-button");
          if (
            (this.$el.find(".binf-popover").length ||
              r.clearFocusables(this.$el),
            this._isNewPlaceholder())
          )
            o.attr("aria-label", l.addShortcutToGroup);
          else {
            var n =
              this.model.get("displayName") ||
              this.model.get("node").get("name");
            o.attr("aria-label", m.str.sformat(l.accessShortcutActions, n)),
              this.$el
                .find(".icon-edit")
                .attr("aria-label", m.str.sformat(l.shortcutSettings, n)),
              this.$el
                .find(".clear-icon")
                .attr("aria-label", m.str.sformat(l.removeShortcutItem, n));
          }
        },
        onClicked: function (o) {
          o.preventDefault(),
            this.$el.find(".pman-widget-popover").has(o.target).length ||
              o.stopPropagation();
        },
        _isNewPlaceholder: function (o) {
          return (o || this.options).model.isAddShortcut();
        },
        focus: function () {
          this.$el
            .find(".csui-configure-perspective-widget .wrapper-button")
            .trigger("focus");
        },
      });
      return i;
    }
  ),
  csui.define("css!csui/widgets/shortcuts/impl/shortcuts", [], function () {}),
  csui.define(
    "csui/widgets/shortcuts/shortcuts.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
      "csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view",
      "csui/utils/contexts/factories/node",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
      "csui/utils/perspective/perspective.util",
      "smart/controls/progressblocker/blocker",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "css!csui/widgets/shortcuts/impl/shortcuts",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c) {
      "use strict";
      var d = m.defaults({}, x.config() || {}, { isPageHasDarkTheme: !0 }),
        h = ["shade1", "shade2", "shade3", "shade4"],
        k = y.Model.extend({
          idAttribute: "shortcutItemId",
          isAddShortcut: function () {
            return this.get("isAddNew") === !0;
          },
        }),
        C = y.Collection.extend({
          constructor: function (w, b) {
            b || (b = {}),
              m.defaults(b, {
                model: k,
                comparator: function (v, _) {
                  return _.get("isAddNew") ? -1 : 0;
                },
              }),
              (this.options = b),
              y.Collection.prototype.constructor.call(this, w, b);
          },
          getShortcuts: function () {
            return this.filter(function (w) {
              return !w.isAddShortcut();
            });
          },
          evaluateAddNewExistence: function () {
            var w = this.options[n.KEY_WIDGET_ID];
            if (
              !(
                this.options.perspectiveMode === n.MODE_PERSONALIZE &&
                w &&
                !n.isPersonalWidgetId(w)
              )
            ) {
              var b = this.where(function (v) {
                return v.isAddShortcut();
              });
              return this.length < 4 && b.length === 0
                ? (this.add({
                    id: "",
                    isAddNew: !0,
                    icon: "icon-new",
                    displayName: "",
                    customBackgroundColor: "",
                    customBackgroundImage: "",
                  }),
                  !0)
                : this.length > 4 && b.length > 0
                ? (this.remove(b), !0)
                : !1;
            }
          },
        }),
        S = s.CollectionView.extend(
          {
            constructor: function (b) {
              b || (b = {}),
                b.data || (b.data = {}),
                (b = m.defaults(b, {
                  reorderOnSort: !0,
                  widgetContainer: this,
                })),
                (b.data = this._normalizeData(b.data)),
                (b.collection =
                  b.collection ||
                  new C([], m.pick(b, "perspectiveMode", n.KEY_WIDGET_ID))),
                s.CollectionView.prototype.constructor.call(this, b);
            },
            tagName: "div",
            className:
              "csui-shortcut-container tile initialLoading csui-shortcut-group-container csui-widget-focusable",
            attributes: function () {
              var w = {};
              return (
                this._isInlineEditMode() ||
                  (w = m.extend(
                    { role: "navigation", "aria-label": c.groupAria },
                    w
                  )),
                w
              );
            },
            regions: {
              shortcut0: ".shortcut-region-0",
              shortcut1: ".shortcut-region-1",
              shortcut2: ".shortcut-region-2",
              shortcut3: ".shortcut-region-3",
            },
            behaviors: function () {
              if (!this._isInlineEditMode())
                return { TabableRegion: { behaviorClass: r } };
            },
            events: function () {
              var w = {};
              return (
                this._isInlineEditMode()
                  ? (w = m.extend(w, {
                      drop: "onDrop",
                      dragover: "onDragOver",
                      dragenter: "onDragEnter",
                      keydown: "_onEditKeyDown",
                    }))
                  : (w = m.extend(w, { keydown: "onKeyInView" })),
                w
              );
            },
            childEvents: {
              "change:shortcutTheme": "_onChangeTheme",
              "change:customBackgroundColor": "_onChangeCustomBackgroundColor",
              "change:customBackgroundImage": "_onChangeCustomBackgroundImage",
              "add:shortcut": "_onAddShortcut",
              "delete:widget": "_onRemoveShortcut",
              "update:widget:options": "_updateShortcutOptions",
            },
            childViewOptions: function (w, b) {
              return {
                context: this.options.context,
                collection: this.options.collection,
                container: this,
                perspectiveMode: this.options.perspectiveMode,
              };
            },
            getChildView: function () {
              return this._isInlineEditMode() ? f : l;
            },
            _normalizeData: function (w) {
              return (
                w || (w = { shortcutItems: [] }),
                w.shortcutTheme || (w.shortcutTheme = ""),
                w
              );
            },
            initialize: function () {
              (this.loadingText = c.loadingText),
                (this.darkBackground = d.isPageHasDarkTheme),
                u.imbue(this),
                this.listenTo(this.collection, "add", this._onCollectionChange)
                  .listenTo(this.collection, "remove", this._onCollectionChange)
                  .listenTo(this.collection, "reset", this._onCollectionChange),
                this._isInlineEditMode() &&
                  this.listenTo(
                    this.collection,
                    "add",
                    this._onCollectionInlineAdd
                  ).listenTo(
                    this.collection,
                    "remove",
                    this._onCollectionInlineRemove
                  );
              var w = m.map(
                m.first(this.options.data.shortcutItems || [], 4),
                m.clone
              );
              this._fetchModels(w).always(
                m.bind(function () {
                  this._setupCollection(w);
                }, this)
              ),
                (this._currentShortcutIndex = 0),
                this.listenTo(this, "add:child", this.propagateEventsToViews);
            },
            _fetchModels: function (w) {
              this.blockActions();
              const b = this.createDetailListForShortcuts(w),
                v = p.whenAll.apply(p, b),
                _ = this;
              return (
                v.always(function (T) {
                  T.forEach((a) => {
                    const g = a[0],
                      I = g?.id,
                      D = w.findIndex((A) => A?.customBackgroundImage === I);
                    (w[D].deploy_url = g?.deploy_url),
                      (w[D].modify_date = g?.modify_date),
                      (w[D].mime_type = g?.mime_type),
                      (w[D].version_number = g?.version_number);
                  }),
                    _.unblockActions();
                }),
                v
              );
            },
            _setupCollection: function (w) {
              if (!this._isInlineEditMode()) {
                var b = m.filter(w, function (v) {
                  return !v.node.error;
                });
                b.length > 0 ? (w = b) : (w = m.first(w, 1));
              }
              (w = w || []), this.collection.reset(w);
            },
            _isInlineEditMode: function () {
              return !!this.options.perspectiveMode;
            },
            _onCollectionChange: function () {
              this._isInlineEditMode() &&
                this.collection.evaluateAddNewExistence(),
                this._updateShortcutStyles();
            },
            _onCollectionInlineAdd: function () {
              this.collection.each(function (w) {
                w.trigger("refresh:mask");
              });
            },
            _onCollectionInlineRemove: function () {
              this.collection.each(function (w) {
                w.trigger("refresh:mask");
              });
            },
            _getLayout: function (w) {
              var b = "small";
              return w === 1 ? (b = "large") : w === 2 && (b = "medium"), b;
            },
            _getShortcutTheme: function (w, b) {
              var v = this.options.data.shortcutTheme
                ? this.options.data.shortcutTheme
                : "csui-shortcut-theme-grey";
              return b > 1 && ((w += 4 - b), (v += "-" + h[w])), v;
            },
            _updateShortcutOptions: function (w, b) {
              var v = w.model,
                _ = b.options;
              if (v.get("isAddNew")) {
                if (b.softUpdate) return;
                if (!b.isValid || !w.isOptionsValid(_)) {
                  this.options.perspectiveMode === n.MODE_EDIT_PERSPECTIVE &&
                    this._notifyOptionsChange(!w.isShortcutValid(_));
                  return;
                }
                v.set(
                  {
                    isAddNew: void 0,
                    displayName: void 0,
                    icon: void 0,
                    customBackgroundColor: void 0,
                    customBackgroundImage: void 0,
                  },
                  { silent: !0, unset: !0 }
                );
              }
              (w.isUpdating = !0),
                this._setDefaultOptions(_),
                v.set(_),
                this._notifyOptionsChange();
              var T = this.collection.evaluateAddNewExistence();
              delete w.isUpdating,
                T ||
                  (this._updateShortcutStyles(),
                  w.model.trigger("refresh:mask")),
                this.triggerMethod("dom:refresh");
            },
            _setDefaultOptions: function (w) {
              w.type = w.type || 141;
            },
            _onRemoveShortcut: function (w) {
              var b = this.collection.indexOf(w.model);
              this.collection.remove(w.model);
              var v = this.collection.getShortcuts();
              v.length === 0
                ? this.options.widgetContainer.trigger("remove:widget")
                : (this._notifyOptionsChange(),
                  this.children.findByIndex(b).focus());
            },
            _notifyOptionsChange: function (w) {
              var b = this.collection.getShortcuts().map(function (v) {
                return {
                  id: v.get("id"),
                  type: v.get("type"),
                  displayName: v.get("displayName"),
                  icon: v.has("icon") ? v.get("icon") : "",
                  customBackgroundColor:
                    (v.has("customBackgroundColor") &&
                      v.get("customBackgroundColor")) ||
                    "",
                  customBackgroundImage:
                    (v.has("customBackgroundImage") &&
                      v.get("customBackgroundImage")) ||
                    "",
                };
              });
              this.options.widgetContainer.trigger("update:widget:options", {
                shortcutTheme: this.collection.first().get("shortcutTheme"),
                shortcutItems: b,
                isValid: !w,
              });
            },
            _onChangeTheme: function (w) {
              (this.options.data.shortcutTheme = w.model.get("shortcutTheme")),
                this._updateShortcutStyles();
            },
            _onChangeBackgroundColor: function (w) {
              this.options.data.customBackgroundColor = w.model.get(
                "customBackgroundColor"
              );
            },
            _onChangeBackgroundImage: function (w) {
              this.options.data.customBackgroundImage = w.model.get(
                "customBackgroundImage"
              );
            },
            _onAddShortcut: function (w, b) {
              this.collection.add(
                {
                  id: "",
                  icon: "",
                  displayName: "",
                  customBackgroundColor: "",
                  type: 141,
                  shortcutTheme: this.options.data.shortcutTheme,
                  customBackgroundImage: "",
                },
                { at: this.collection.length - 1 }
              ),
                this.collection.sort(),
                this._notifyOptionsChange();
            },
            _updateShortcutStyles: function () {
              var w = this.options.data.shortcutTheme,
                b = this._getLayout(this.collection.length);
              this.collection.each(function (v, _) {
                var T = this._isInlineEditMode()
                    ? this.collection.getShortcuts().length
                    : this.collection.length,
                  a = this._getShortcutTheme(_, T);
                v.set({ layout: b, theme: a, shortcutTheme: w });
              }, this);
            },
            onDrop: function (w) {
              this.options.widgetContainer.trigger("replace:widget", w);
            },
            onDragOver: function (w) {
              w.preventDefault();
            },
            onDragEnter: function (w) {
              w.preventDefault();
            },
            onRender: function () {
              this._clearShortcutTabIndexes();
            },
            onDomRefresh: function () {
              if (this._isInlineEditMode()) {
                var w = !0,
                  b = c.groupAria,
                  v = this.collection.getShortcuts().length,
                  _ = "",
                  T = this.$el.parent().find(".shortcut-group-wrapper");
                switch (
                  (T.length > 0 && (w = !1),
                  w &&
                    this.$el.before(
                      "<div class='shortcut-group-button-wrapper'><button class='shortcut-group-wrapper binf-btn' tabindex='0'></button></div>"
                    ),
                  this.$el
                    .parent()
                    .off(
                      "click",
                      ".shortcut-group-wrapper",
                      this._onEditEnterPress
                    )
                    .on(
                      "click",
                      ".shortcut-group-wrapper",
                      this._onEditEnterPress.bind(this)
                    ),
                  this.$el
                    .parent()
                    .off(
                      "keydown",
                      ".shortcut-group-wrapper",
                      this._onKeyInEmptyPlaceHolder
                    )
                    .on(
                      "keydown",
                      ".shortcut-group-wrapper",
                      m.bind(this._onKeyInEmptyPlaceHolder, this)
                    ),
                  v)
                ) {
                  case 0:
                    _ = c.emptyGroup;
                    break;
                  case 1:
                    _ = m.str.sformat(c.shortcutGroupWithOneItem, v, 4 - v);
                    break;
                  case 4:
                    _ = c.maxItemsGroup;
                    break;
                  default:
                    _ = m.str.sformat(c.shortcutGroupWithMixedItems, v, 4 - v);
                }
                this.$el
                  .parent()
                  .find(".shortcut-group-wrapper")
                  .attr("aria-label", _);
              }
            },
            _clearShortcutTabIndexes: function () {
              this.$el.find(".binf-popover").length ||
                e.clearFocusables(this.$el);
            },
            currentlyFocusedElement: function () {
              var w = this._currentlyFocusedShortcut();
              return w && w.$el;
            },
            _currentlyFocusedShortcut: function () {
              return this.children.findByIndex(this._currentShortcutIndex);
            },
            _onEditEnterPress: function (w) {
              var b = p(w.target);
              return this.collection.getShortcuts().length === 0 &&
                this.$el.has(b).length === 0
                ? (this.$el.find(".csui-pman-widget-masking").trigger("click"),
                  !1)
                : b.is(this.$el.parent().find(".shortcut-group-wrapper"))
                ? (this._enterConfiguration(), !1)
                : !0;
            },
            _onEditKeyDown: function (w) {
              var b = !0,
                v = p(w.target);
              switch (w.keyCode) {
                case 13:
                case 32:
                  b = this._onEditEnterPress(w);
                  break;
                case 27:
                  this.collection.getShortcuts().length > 0
                    ? (v.is(this.$el.find(".wrapper-button"))
                        ? this.$el
                            .parent()
                            .find(".shortcut-group-wrapper")
                            .trigger("focus")
                        : this.$el
                            .find(".csui-pman-shortcut-new .wrapper-button")
                            .trigger("focus"),
                      (b = !1))
                    : this.collection.getShortcuts().length === 0 &&
                      (this._exitConfiguration(), (b = !1));
                  break;
                case 38:
                  this._selectPreviousShortcut();
                  break;
                case 40:
                  this._selectNextShortcut();
                  break;
              }
              return b;
            },
            _enterConfiguration: function () {
              (this._currentShortcutIndex = -1), this._selectShortcut(0);
            },
            _exitConfiguration: function () {
              this.$el
                .parent()
                .find(".shortcut-group-wrapper")
                .trigger("focus"),
                this._clearShortcutTabIndexes(this.$el);
            },
            onKeyInView: function (w) {
              switch (w.keyCode) {
                case 13:
                case 32:
                  this.currentlyFocusedElement().trigger("click");
                  break;
                case 38:
                  this._selectPreviousShortcut();
                  break;
                case 40:
                  this._selectNextShortcut();
                  break;
              }
            },
            _onKeyInEmptyPlaceHolder: function (w) {
              switch (w.keyCode) {
                case 9:
                  if (
                    w.shiftKey &&
                    p(w.target).is(p(".shortcut-group-wrapper"))
                  ) {
                    var b = p(document.activeElement)
                        .closest(
                          ".csui-draggable-item.csui-pman-editable-widget"
                        )
                        .index(),
                      v = p(".csui-dnd-container>.csui-pman-editable-widget"),
                      _ = v.eq(b - 1).offset().top,
                      T = v.eq(b).offset().top === _;
                    if (!T) {
                      var a = b < 0 ? 0 : _ - p(".pman-header").height();
                      p("html, body").animate({ scrollTop: a }, 0);
                    }
                  }
                  break;
              }
            },
            _selectNextShortcut: function () {
              var w = Math.min(
                this._currentShortcutIndex + 1,
                this.collection.length - 1
              );
              this._selectShortcut(w);
            },
            _selectPreviousShortcut: function () {
              var w = Math.max(this._currentShortcutIndex - 1, 0);
              this._selectShortcut(w);
            },
            _selectShortcut: function (w) {
              w !== this._currentShortcutIndex &&
                ((this._currentShortcutIndex = w),
                this.trigger("changed:focus", this),
                this._currentlyFocusedShortcut().focus());
            },
          },
          {
            migrateSingleShortcut: function (w) {
              var b;
              switch (w.background) {
                case "cs-tile-background1":
                  b = "csui-shortcut-theme-stone1";
                  break;
                case "cs-tile-background2":
                  b = "csui-shortcut-theme-teal2";
                  break;
                case "cs-tile-background3":
                  b = "csui-shortcut-theme-pink1";
                  break;
              }
              return { shortcutItems: [w], shortcutTheme: b };
            },
            migrateData: function (w, b) {
              switch (w) {
                case "shortcut":
                case "csui/widgets/shortcut":
                  return S.migrateSingleShortcut(b);
                default:
                  return b;
              }
            },
          }
        );
      return m.extend(S.prototype, i), m.extend(S.prototype, o), S;
    }
  ),
  csui.define("csui/widgets/welcome.placeholder/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/welcome.placeholder/impl/nls/root/lang", {
    greetingWithName: "Hello {0}",
    greetingWithoutName: "Hello",
    greetingMorning: "Good morning, {0}!",
    greetingAfternoon: "Good afternoon, {0}!",
    greetingEvening: "Good evening, {0}!",
    greetingMorningNoName: "Good morning!",
    greetingAfternoonNoName: "Good afternoon!",
    greetingEveningNoName: "Good evening!",
    videoLabel: "Smart UI introduction video",
    withVideoWrapperAria: "{0} {1}",
    videoSrc:
      "//sunnyside.vidavee.com/opentext/rest/file/GetFileAsset/EBC85A92D0C5DE3A272CC1C165E85A78/introVideo_2020.mp4",
    videoPoster:
      "//sunnyside.vidavee.com/opentext/rest/file/GetFileThumbnail/EBC85A92D0C5DE3A272CC1C165E85A78/thumbnail.jpg",
    message:
      "As a foundational technology in the Digital Workplace, OpenText Content Management will pave the way to personal productivity, seamless collaboration, and integration with business processes.",
  }),
  csui.define(
    "hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `
  <div class="binf-modal-dialog">
    <div class="binf-modal-content csui-video">
      <video  preload="none"
             poster="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "videoPoster") ||
                  (e != null ? i(e, "videoPoster") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoPoster",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 21 },
                      end: { line: 5, column: 36 },
                    },
                  })
                : t)
            ) +
            `"
             controls="controls">
        <source
          src="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "videoSrc") || (e != null ? i(e, "videoSrc") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoSrc",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 15 },
                      end: { line: 8, column: 27 },
                    },
                  })
                : t)
            ) +
            `"
          type="video/mp4">
        </source>
      </video>

    </div>
  </div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_welcome.placeholder_impl_welcome.video_welcome.video",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/url",
      "csui/utils/contexts/factories/node",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/lang",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
      "css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s, e, r, l, f, t) {
      var i = p.ItemView.extend({
        _dataDefaults: { videoSrc: r.videoSrc, videoPoster: r.videoPoster },
        className: "cs-dialog welcome-video binf-modal binf-fade",
        template: t,
        events: {
          "hide.binf.modal": "onDestroy",
          "hidden.binf.modal": "onDestroy",
          "keydown video": "onKeyDown",
          "shown.binf.modal": "onShown",
        },
        templateHelpers: function () {
          var o = this.options.data;
          return { videoSrc: o.videoSrc, videoPoster: o.videoPoster };
        },
        behaviors: {
          TabablesBehavior: {
            behaviorClass: l,
            recursiveNavigation: !0,
            containTabFocus: !0,
          },
          TabableRegion: { behaviorClass: f },
        },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (n) {
          n || (n = {}),
            n.data || (n.data = {}),
            x.each(this._dataDefaults, function (u, c) {
              var d = n.data[c];
              d || (n.data[c] = u);
            }),
            p.ItemView.prototype.constructor.apply(this, arguments),
            (this.connection = n.context.getModel(e).connector.connection);
        },
        onKeyDown: function (o) {
          o.keyCode === 27 && this.destroy();
        },
        onDestroy: function () {
          l.popTabableHandler(), this.$el.remove();
        },
        show: function () {
          this.render(),
            y.isAppleMobile() && this.$el.addClass("mobile"),
            this.$el.binf_modal("show");
        },
        onShown: function () {
          this.$("video").trigger("focus");
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <button class="csui-videoButton" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "videoLabel") || (e != null ? i(e, "videoLabel") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoLabel",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 49 },
                      end: { line: 9, column: 63 },
                    },
                  })
                : t)
            ) +
            `"></button>
`
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `    <div class="csui-message">
      <p title="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 16 },
                      end: { line: 13, column: 27 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 29 },
                      end: { line: 13, column: 40 },
                    },
                  })
                : t)
            ) +
            `</p>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `
<div class="csui-hero-tile">
  <div class="csui-hero-left">
    <div role="heading" aria-level="2" class="csui-greeting">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "greeting") || (e != null ? o(e, "greeting") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "greeting",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 61 },
                      end: { line: 4, column: 73 },
                    },
                  })
                : i)
            ) +
            `</div>
    <span class="csui-date">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "date") || (e != null ? o(e, "date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "date",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 28 },
                      end: { line: 5, column: 36 },
                    },
                  })
                : i)
            ) +
            `</span>
  </div>
    <div class="csui-hero-right">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "includeVideo") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 8, column: 4 },
                  end: { line: 10, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "includeMessage") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 11, column: 4 },
                  end: { line: 15, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>

</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_welcome.placeholder_impl_welcome.placeholder",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/welcome.placeholder.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/user",
      "csui/utils/types/date",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/lang",
      "hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
      "css!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    ],
    function (x, m, p, y, s, e, r, l, f, t) {
      var i = p.ItemView.extend({
        _dataDefaults: {
          includeMessage: !0,
          includeVideo: !0,
          message: f.message,
        },
        className: "tile hero",
        template: t,
        ui: {
          welcomeMessageContainer: "> .csui-hero-tile .csui-message",
          welcomeMessage: "> .csui-hero-tile .csui-message > p",
          greetingsMessage: "> .csui-hero-tile .csui-hero-left .csui-greeting",
        },
        behaviors: { TabableRegion: { behaviorClass: r } },
        triggers: { "click .csui-hero-tile": "show:video" },
        templateHelpers: function () {
          var o = this.options.data,
            n = this.user.get("first_name"),
            u = new Date(),
            c = u.getHours(),
            d = this._getGreeting(n, c);
          return {
            videoSrc: o.videoSrc,
            videoPoster: o.videoPoster,
            includeMessage: o.includeMessage,
            includeVideo: o.includeVideo,
            greeting: d,
            message: o.message,
            videoLabel: f.videoLabel,
            date: e.formatExactDate(e.deserializeDate(u)),
          };
        },
        events: { keydown: "onKeyInView" },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onKeyInView: function (o) {
          (o.keyCode === 32 || o.keyCode === 13) &&
            (o.preventDefault(),
            o.stopPropagation(),
            this.triggerMethod("show:video"));
        },
        constructor: function (n) {
          n || (n = {}),
            n.data || (n.data = {}),
            m.each(this._dataDefaults, function (u, c) {
              var d = n.data[c];
              (d == null || d === "") && (n.data[c] = u);
            }),
            p.ItemView.call(this, n),
            (this.user = n.context.getModel(s)),
            this.listenTo(this.user, "change", this._updateGreeting),
            x(window).on("resize.app", this.render),
            this.listenTo(this, "dom:refresh", this._setTextEllipse);
        },
        onRender: function () {
          var o = this.templateHelpers();
          o.includeVideo &&
            this.$el.attr(
              "aria-label",
              m.str.sformat(f.withVideoWrapperAria, o.greeting, o.videoLabel)
            );
        },
        onDestroy: function () {
          x(window).off("resize.app", this.render);
        },
        onShowVideo: function () {
          var o = new l(this.options);
          o.show();
        },
        _setTextEllipse: function () {
          var o = this.ui.welcomeMessage,
            n = this.ui.welcomeMessageContainer.height(),
            u = parseInt(o.css("line-height"), 10);
          if (u <= n) {
            for (; o.outerHeight() > n; ) {
              var c = o.text(),
                d = c.replace(/\W*\s(\S)*$/, "...");
              if (d.length < c.length) o.text(d);
              else break;
            }
            this.ui.welcomeMessageContainer.removeClass("binf-hidden");
          } else this.ui.welcomeMessageContainer.addClass("binf-hidden");
        },
        _getGreeting: function (o, n) {
          return this._generateGreetingMessage(o, n);
        },
        _updateGreeting: function () {
          x(this.ui.greetingsMessage).text(
            this._generateGreetingMessage(
              this.user.get("first_name"),
              new Date().getHours()
            )
          );
        },
        _generateGreetingMessage: function (o, n) {
          var u;
          if (o) {
            var c =
              n < 12
                ? f.greetingMorning
                : n < 18
                ? f.greetingAfternoon
                : f.greetingEvening;
            u = m.str.sformat(c, o);
          } else
            u =
              n < 12
                ? f.greetingMorningNoName
                : n < 18
                ? f.greetingAfternoonNoName
                : f.greetingEveningNoName;
          return u;
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          return `      <div id="cs-link-content" class="cs-link-content"></div>
`;
        },
        3: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '      <div id="cs-link-image" class="cs-link-image">' +
            ((t =
              ((i =
                (i =
                  o(r, "LinkPreviewImage") ||
                  (e != null ? o(e, "LinkPreviewImage") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "LinkPreviewImage",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 52 },
                      end: { line: 11, column: 74 },
                    },
                  })
                : i)) != null
              ? t
              : "") +
            `</div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div id="cs-link" class="cs-link">
  <div class="cs-link-popoverhead">
    <div id="cs-link-heading" class="cs-link-heading">` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "LinkHeading") ||
                  (e != null ? o(e, "LinkHeading") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "LinkHeading",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 54 },
                      end: { line: 3, column: 69 },
                    },
                  })
                : i)
            ) +
            `</div>
    <div id="cs-link-expand" class="cs-link-expand cs-link-expand-icon"></div>
  </div>
  <div class="cs-link-preview-content">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isPreviewContent") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 7, column: 4 },
                  end: { line: 9, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isLinkPreviewImage") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 10, column: 4 },
                  end: { line: 12, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_cslink.preview_cslink.preview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/controls/rich.text.editor/impl/rich.text.util",
      "csui/models/node/node.model",
      "csui/utils/commands",
      "csui/utils/url",
      "hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i) {
      var o = y.ItemView.extend({
        template: t,
        className: "cs-link",
        behaviors: { DefaultAction: { behaviorClass: s } },
        subTypeName: "wiki",
        constructor: function (u) {
          u || (u = {}),
            y.ItemView.prototype.constructor.call(this, u),
            (this.options = u),
            (this.subTypeName = u.subTypeName || this.subTypeName),
            (this.modelFetched = !1),
            (this.linkPreviewContent = null),
            (this.linkPreviewImage = null),
            (this.model = this.options.previewModel);
          var c = this;
          this.model ||
            this._obtainId().done(function () {
              c._executeProcess();
            });
        },
        _obtainId: function () {
          this.id = this.options.objId || -1;
          var n = this.options.targetEle,
            u = n.href || n.closest("a").href,
            c = u.match(/^.*\/open\/(.+)$/i) || u.match(/^.*\/nodes\/(.+)$/i),
            d = x.Deferred(),
            h = this,
            k = !0;
          if (this.options.isSameDomain && c)
            if (isNaN(parseInt(c[1]))) {
              k = !1;
              var C =
                  this.options.targetEle.href &&
                  this.options.targetEle.href.substring(
                    this.options.targetEle.href.lastIndexOf("/") + 1,
                    this.options.targetEle.href.length
                  ),
                S;
              e._getNicknameId(h.options, C)
                .done(function (w) {
                  (S = e.getNewNodeModel(
                    {},
                    { connector: h.options.connector }
                  )),
                    (S.attributes = S.parse(w)),
                    (S = e.getNewNodeModel(
                      { attributes: S.attributes },
                      { connector: h.options.connector }
                    )),
                    (h.model = S),
                    (h.id = h.model.get("id")),
                    d.resolve();
                })
                .fail(function () {
                  x(h.options.targetEle).attr("title", i.cannotFindObject);
                });
            } else this.id = c[1];
          return k && d.resolve(), d.promise();
        },
        _executeProcess: function () {
          this.id !== -1
            ? ((this.model = new r(
                { id: this.id },
                {
                  connector: this.options.connector,
                  commands: l.getAllSignatures(),
                  fields: this.options.fields || {},
                  expand: this.options.expand || {},
                }
              )),
              this.model.fetch().fail(
                m.bind(function () {
                  x(this.options.targetEle).attr("title", i.cannotFindObject);
                }, this)
              ),
              this.listenTo(this.model, "sync", function (n) {
                this.trigger("model:fetched", this.model),
                  (this.linkHeading = this.model.attributes.name);
                var u = this,
                  c = this._getContent();
                c.done(function (d) {
                  u.model.get("type") === 5574
                    ? u._callbackExecuteProcess(d)
                    : x(u.options.targetEle).attr(
                        "title",
                        m.str.sformat(i.goToTooltip, u.model.get("name"))
                      );
                });
              }))
            : x(this.options.targetEle).attr("title", i.previewUnavailable);
        },
        _getContent: function () {
          var n = x.Deferred(),
            u = this.options.connector,
            c = { url: this._getUrl(), type: "GET" };
          return (
            u
              .makeAjaxCall(c)
              .done(function (d) {
                n.resolve(d);
              })
              .fail(function (d) {
                n.reject(d);
              }),
            n.promise()
          );
        },
        _getUrl: function () {
          return f.combine(
            this.options.connector.getConnectionUrl().getApiBase("v2"),
            "/" + this.subTypeName + "/" + this.id + "/previewcontent"
          );
        },
        _callbackExecuteProcess: function (n) {
          (this.modelFetched = !0),
            (this.linkPreviewImage = n.results.data.firstImage),
            (this.linkPreviewContent = n.results.data.previewContent);
          var u = x("<div>" + this.linkPreviewContent + "</div>")
            .find("*")
            .text()
            .trim();
          (this.isEmptyContent = u === "" || u === i.pageDefaultContent),
            this.isDestroyed ||
              (x(this.options.targetEle).attr({
                title: "",
                "data-binf-original-title": "",
              }),
              (this.linkPreviewContent !== null && !this.isEmptyContent) ||
              this.linkPreviewImage !== null
                ? (this.render(),
                  x(this.options.targetEle).binf_popover("show"),
                  this.linkPreviewContent !== null && !this.isEmptyContent
                    ? x(".cs-link-content").html(this.linkPreviewContent)
                    : x(".cs-link-preview-content").addClass(
                        "cs-link-image-only"
                      ),
                  this.eventHandlers())
                : x(this.options.targetEle).attr(
                    "title",
                    m.str.sformat(i.goToTooltip, this.model.get("name"))
                  ));
        },
        onDestroy: function () {
          this.hidePopover();
        },
        eventHandlers: function () {
          var n = this;
          x(".cs-link-popover").on("mouseleave", function (u) {
            x("#" + u.target.id).attr("aria-describedby") !==
              x(n.options.targetEle).attr("aria-describedby") &&
              n.hidePopover();
          }),
            x(".cs-link-expand").on("click", function (u) {
              n.expandLinkView();
            });
        },
        hidePopover: function () {
          x(this.options.targetEle).binf_popover("hide"),
            x(this.options.targetEle).binf_popover("destroy");
        },
        expandLinkView: function () {
          this.triggerMethod("execute:defaultAction", this.model);
        },
        onRender: function () {
          var n = this,
            u = this.options.targetEle;
          if (this.modelFetched) {
            var c = {
                LinkHeading: this.linkHeading,
                isLinkPreviewImage: this.linkPreviewImage !== null,
                LinkPreviewImage: this.linkPreviewImage,
                isPreviewContent: !this.isEmptyContent,
                linkPreviewContent: this.linkPreviewContent,
              },
              d = this.template(c);
            x(u).binf_popover({
              html: !0,
              trigger: "manual",
              content: d,
              container: x.fn.binf_modal.getDefaultContainer(),
              placement: function (h) {
                x(h).addClass("cs-link-popover");
                var k = x("<div/>")
                  .attr("style", "display:none")
                  .addClass(
                    "cs-link-popover binf-popover cs-link-popover-temp-div"
                  )
                  .append(t);
                x(u).append(k),
                  (n.linkPreviewImage === null ||
                    n.linkPreviewContent === null ||
                    n.isEmptyContent) &&
                    x(h).addClass("cs-link-preview-width");
                var C = x(".cs-link-popover-temp-div").height() + 40,
                  S = x(".cs-link-popover-temp-div").width() + 40;
                k.remove();
                var w = x(u),
                  b = w.offset(),
                  v = b.left,
                  _ = b.top,
                  T = x(window).width() - (v + w.outerWidth()),
                  a = x(window).height() - (_ + w.outerHeight(!0));
                return a > C
                  ? ((n.popoverPosition = "bottom"), "bottom")
                  : _ > C
                  ? ((n.popoverPosition = "top"), "top")
                  : T > S
                  ? ((n.popoverPosition = "right"), "right")
                  : v > S
                  ? ((n.popoverPosition = "left"), "left")
                  : ((n.popoverPosition = "auto"), "auto");
              },
            });
          } else
            this.model &&
              !this.model.fetching &&
              x(u).attr(
                "title",
                m.str.sformat(i.goToTooltip, this.model.get("name"))
              );
          x("*").one("scroll", function () {
            n.destroy();
          }),
            x(this.options.targetEle).one("remove", function () {
              n.destroy();
            }),
            x(this.options.targetEle)
              .off("mouseleave")
              .on("mouseleave", function (h) {
                setTimeout(function () {
                  x(".cs-link-popover:hover").length === 0 && n.destroy();
                }, 10);
              });
        },
      });
      return o;
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/html.editor.model",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/node/node.model",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = s.extend({
        constructor: function (l) {
          (this.options = l || (l = {})),
            p.Model.prototype.constructor.call(this, l),
            this.makeConnectable(l).makeFetchable(l);
        },
      });
      return (
        x.extend(e.prototype, {
          isFetchable: function () {
            return !!this.options;
          },
          url: function () {
            var r = y.combine(
              this.options.connector.connection.url,
              "nodes/" + this.options.id + "/content"
            );
            return r;
          },
          parse: function (r) {
            return { data: r, oldData: r };
          },
        }),
        e
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class='csui-richtext-message-wrapper'>
  <div id="csui-richtext-content-body-` +
            s.escapeExpression(
              ((i =
                (i = o(r, "id") || (e != null ? o(e, "id") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 46 },
                    },
                  })
                : i)
            ) +
            '" class="csui-richtext-message" data-placeholder = "' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "placeholder") ||
                  (e != null ? o(e, "placeholder") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "placeholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 98 },
                      end: { line: 2, column: 113 },
                    },
                  })
                : i)
            ) +
            `">
    ` +
            ((t =
              ((i =
                (i = o(r, "data") || (e != null ? o(e, "data") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "data",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 4 },
                      end: { line: 3, column: 16 },
                    },
                  })
                : i)) != null
              ? t
              : "") +
            `
  </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_html.editor_impl_html.editor", y), y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `  <div class="binf-dropdown">
    <a title="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "tooltip") || (e != null ? o(e, "tooltip") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 14 },
                      end: { line: 3, column: 25 },
                    },
                  })
                : i)
            ) +
            `" class="binf-dropdown-toggle csui-html-editor-control"
       href="#" data-binf-toggle="dropdown" role="button" aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "moreActionsAria") ||
                  (e != null ? o(e, "moreActionsAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "moreActionsAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 70 },
                      end: { line: 4, column: 89 },
                    },
                  })
                : i)
            ) +
            `"
       aria-expanded="false">
      <span class="csui-icon ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "reserved") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(2, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 6, column: 29 },
                  end: { line: 6, column: 84 },
                },
              }
            )) != null
              ? t
              : "") +
            " " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "iconClass") || (e != null ? o(e, "iconClass") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 85 },
                      end: { line: 6, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
      </span>
    </a>
    <ul class="binf-dropdown-menu" role="menu"></ul>
  </div>
`
          );
        },
        2: function (s, e, r, l, f) {
          return " csui-html-editor-reserved-icon ";
        },
        4: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "reserved") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(5, f, 0),
              inverse: s.noop,
              loc: {
                start: { line: 12, column: 2 },
                end: { line: 15, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        5: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <span class="csui-icon csui-html-editor-reserved-readonly ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "iconClass") || (e != null ? i(e, "iconClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 62 },
                      end: { line: 13, column: 75 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "tooltip") || (e != null ? i(e, "tooltip") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 84 },
                      end: { line: 13, column: 95 },
                    },
                  })
                : t)
            ) +
            `">
    </span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "haveEditPermission") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(1, f, 0),
              inverse: s.program(4, f, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 16, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_dropdown.menu_dropdown.menu",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<a tabindex="-1" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "actionName") || (e != null ? i(e, "actionName") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "actionName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 24 },
                      end: { line: 1, column: 38 },
                    },
                  })
                : t)
            ) +
            `">
  ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "actionName") || (e != null ? i(e, "actionName") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "actionName",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 16 },
                    },
                  })
                : t)
            ) +
            `
</a>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_dropdown.menu_dropdown.option",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/contexts/factories/member",
      "csui/utils/base",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu",
      "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o) {
      "use strict";
      var n = s.ItemView.extend({
          tagName: "li",
          template: o,
          events: { "click a": "_executeAction", "keyup a": "onKeyUp" },
          templateHelpers: function () {
            return {
              actionName:
                t[this.model.get("signature") || this.model.get("name")],
            };
          },
          constructor: function (c) {
            s.ItemView.prototype.constructor.apply(this, arguments);
          },
          _executeAction: function () {
            if (this.options.openForEdit) this.options.openForEdit();
            else {
              var c = this.options.command.execute(this.options.status);
              c.always(
                m.bind(function () {
                  this.trigger("csui.command.executed", c);
                }, this)
              );
            }
          },
          onKeyUp: function (c) {
            [13, 32].indexOf(c.keyCode) !== -1 && this._executeAction();
          },
        }),
        u = s.CompositeView.extend({
          className: "csui-html-editor-dropdown",
          template: i,
          childView: n,
          childViewContainer: "ul.binf-dropdown-menu",
          childEvents: { "csui.command.executed": "afterCommandExecution" },
          ui: { dropdownMenu: ".binf-dropdown-menu" },
          childViewOptions: function (c) {
            var d = c.get("openForEdit") ? "HTMLEdit" : c.get("signature"),
              h = { status: this.status, node: this.options.node };
            return (
              d === "HTMLEdit"
                ? (h.openForEdit = this.options.openForEdit)
                : (d === "properties"
                    ? (d = "Properties")
                    : ["reserve", "unreserve"].indexOf(d) !== -1 &&
                      (d === "unreserve" ? (d = "Unreserve") : (d = "Reserve"),
                      (d += "Doc")),
                  (h.command = r.get(d))),
              h
            );
          },
          templateHelpers: function () {
            var c = {
              haveEditPermission: this.haveEditPermissions,
              tooltip: t.more,
              iconClass: "icon-html-edit-toolbar-more",
              reserved: this.node.get("reserved"),
              moreActionsAria: m.str.sformat(
                t.moreActionsAria,
                this.parentView.options.title
                  ? this.parentView.options.title
                  : ""
              ),
            };
            if (c.reserved) {
              var d = this.node.get("reserved_user_id") === this.user.get("id");
              d ||
                (c.tooltip = m.str.sformat(
                  t.reservedBy,
                  this.node.get("reserved_user_id"),
                  f.formatExactDate(this.node.get("reserved_date"))
                )),
                (c.iconClass = d
                  ? "icon-html-editor-reserved-owned"
                  : "icon-html-editor-reserved_other");
            }
            return c;
          },
          constructor: function (d) {
            (this.parentView = d.parentView),
              (this.node = d.node),
              (this.user = d.user),
              (this.haveEditPermissions = !!(
                d.node.actions.get("reserve") || d.node.actions.get("unreserve")
              )),
              (d.collection = this.buildCollection()),
              s.CompositeView.prototype.constructor.apply(this, arguments),
              this.listenTo(
                this.options.node,
                "change",
                this.updateActionCollection
              ),
              (this.status = {
                context: this.options.context,
                container: this.options.node,
                nodes: new e([this.options.node]),
              }),
              this.node.get("reserved") &&
                this.node.get("reserved_user_id") !== this.user.get("id") &&
                (this.reservedByUserModel = this.options.context.getModel(l, {
                  attributes: { id: this.node.get("reserved_user_id") },
                }));
          },
          buildCollection: function () {
            var c = new y.Collection();
            if (this.haveEditPermissions) {
              (!this.node.get("reserved") ||
                this.node.get("reserved_user_id") === this.user.get("id")) &&
                c.add(new y.Model({ openForEdit: !0, name: "Edit" }));
              var d,
                h = ["properties", "permissions", "unreserve"],
                k = this;
              h.map(function (C) {
                (C = k.node.actions.get(C)), C && c.add(C);
              });
            }
            return c;
          },
          updateActionCollection: function () {
            (this.haveEditPermissions = !!(
              this.options.node.actions.get("reserve") ||
              this.options.node.actions.get("unreserve")
            )),
              (this.collection = this.buildCollection()),
              this.render();
          },
          afterCommandExecution: function (c, d) {
            d.fail(
              m.bind(function () {
                c.model.get("name") === "Unreserve" && this.node.fetch();
              }, this)
            );
          },
          adjustDropdownMenu: function () {
            if (document.dir === "rtl") return !1;
            this.ui.dropdownMenu.removeClass(
              "csui-html-editor-floating-dd-menu"
            );
            var c = this.ui.dropdownMenu.offset().left,
              d = this.ui.dropdownMenu.outerWidth(),
              h = document.body.scrollWidth,
              k = c + 2 * d <= h;
            k &&
              this.ui.dropdownMenu.addClass(
                "csui-html-editor-floating-dd-menu"
              );
          },
          onRender: function () {
            var c = this.$el.find(".binf-dropdown");
            c.on(
              "binf.dropdown.before.show",
              m.bind(function () {
                c.on(
                  "binf.dropdown.after.show",
                  this.adjustDropdownMenu.bind(this)
                ),
                  p(window).on(
                    "resize.html.editor.dropdown.menu",
                    this.adjustDropdownMenu.bind(this)
                  );
              }, this)
            ),
              c.on(
                "hide.binf.dropdown",
                m.bind(function () {
                  c.off("binf.dropdown.after.show"),
                    p(window).off("resize.html.editor.dropdown.menu");
                })
              ),
              this.reservedByUserModel &&
                !this.reservedByUserModel.fetched &&
                this.reservedByUserModel.fetch().done(
                  m.bind(function (d) {
                    this.$el
                      .find(
                        ".binf-dropdown-toggle.csui-html-editor-control, .csui-html-editor-reserved-readonly"
                      )
                      .attr(
                        "title",
                        m.str.sformat(
                          t.reservedBy,
                          d.data.display_name,
                          f.formatExactDate(this.node.get("reserved_date"))
                        )
                      );
                  }, this)
                );
          },
        });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/edit.icon",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-rich-text-edit-icon-wrapper csui-rich-text-edit-icon-wrapper-' +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 79 },
                      end: { line: 1, column: 87 },
                    },
                  })
                : t)
            ) +
            `">
  <span title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "editLable") || (e != null ? i(e, "editLable") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "editLable",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 15 },
                      end: { line: 2, column: 30 },
                    },
                  })
                : t)
            ) +
            '" class="icon icon-edit icon-edit-' +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 64 },
                      end: { line: 2, column: 72 },
                    },
                  })
                : t)
            ) +
            `"></span>
</span>`
          );
        },
      });
      return p.registerPartial("csui_widgets_html.editor_impl_edit.icon", y), y;
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/html.editor.content.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/lib/radio",
      "csui/utils/contexts/factories/connector",
      "csui/utils/url",
      "csui/utils/base",
      "csui/utils/froala/bootstrap",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/user",
      "csui/widgets/html.editor/impl/html.editor.model",
      "hbs!csui/widgets/html.editor/impl/html.editor",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/controls/progressblocker/blocker",
      "csui/controls/error/error.view",
      "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
      "csui/controls/rich.text.editor/rich.text.editor",
      "csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/node.links/node.links",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "hbs!csui/widgets/html.editor/impl/edit.icon",
      "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
      "css!csui/widgets/html.editor/impl/html.editor",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      l,
      f,
      t,
      i,
      o,
      n,
      u,
      c,
      d,
      h,
      k,
      C,
      S,
      w,
      b,
      v,
      _
    ) {
      "use strict";
      var T = y.ItemView.extend({
        className: "csui-html-editor-wrapper",
        modelEvents: { change: "render", error: "render" },
        ui: { richText: ".csui-richtext-message" },
        events: {
          'mouseenter .csui-richtext-message[contenteditable="false"] a':
            "_showPreview",
          'focusin .csui-richtext-message[contenteditable="true"]':
            "_actionButtonsPositionInEdge",
          'focusin .csui-richtext-message[contenteditable="false"] a':
            "_updateUrl",
        },
        getTemplate: function () {
          return this.model.error ? !1 : n;
        },
        templateHelpers: function () {
          return {
            placeholder: b.PageDefaultContent,
            id: this.model.get("id"),
            data: this.model.get("data"),
          };
        },
        constructor: function (g) {
          if (
            (g || (g = {}),
            (g.id = g.wikiPageId),
            (g = m.extend(g, (g.data = {}))),
            (this.parentView = g.parentView),
            (this.ui.richTextEle = "#csui-richtext-content-body" + g.id),
            c.imbue(this),
            (this.context = g.context),
            (this.connector = this.context.getObject(e)),
            (this.node = new t(
              { id: g.id },
              {
                connector: this.connector,
                expand: { properties: ["original_id", "parent_id"] },
                commands: [
                  "permissions",
                  "properties",
                  "reserve",
                  "unreserve",
                  "addcategory",
                  "editpermissions",
                ],
              }
            )),
            (this.user = this.context.getModel(i)),
            !g.model)
          ) {
            g.model = new o({
              connector: this.connector,
              context: this.context,
              id: g.id,
            });
            var I = r.combine(
              this.connector.connection.url,
              "nodes/" + g.id + "/content"
            );
            g.model
              .fetch({
                url: I,
                success: g.model.fetchSuccess,
                error: g.model.fetchError,
                dataType: "text",
              })
              .done(
                m.bind(function (D) {
                  s
                    .channel("quicklink:Tiles")
                    .trigger("transparent:background"),
                    this._getLatestVersion().done(
                      m.bind(function () {
                        this.oldVersion = this.model.get("version");
                      }, this)
                    );
                }, this)
              );
          }
          (g.richTextElementId = "csui-richtext-content-body-" + g.id),
            y.ItemView.prototype.constructor.call(this, g),
            (this._errorRegion = new y.Region({ el: this.el })),
            this.listenTo(
              this.model,
              "sync",
              m.bind(function () {
                this.model.error ||
                  this.user
                    .ensureFetched()
                    .done(this._renderActionsDropdown.bind(this));
              }, this)
            ),
            (this.mode = "read"),
            (this.utils = k.getRichTextEditorUtils()),
            (this.enableSaveButton = !1),
            (this.previewLinkViews = {});
        },
        onRender: function () {
          var a = this.model.error;
          this.$el[a ? "addClass" : "removeClass"]("csui-disabled"),
            a
              ? this.$el.parent().addClass("csui-html-editor-error")
              : this.$el.parent().removeClass("csui-html-editor-error"),
            a &&
              this._errorRegion.show(
                new d({
                  model: new p.Model({
                    message: b.noWikiPageFound,
                    title: a.message,
                  }),
                })
              ),
            this.$el.addClass(
              this.options.header ? "" : "csui-html-editor-no-header"
            ),
            this.$el.parent().addClass(this.options.header || a ? "" : "tile"),
            this.filterHtmlContent(),
            this.refreshTabableElements();
        },
        filterHtmlContent: function () {
          this.$el.find("table").each(function (a, g) {
            x(g)
              .css({
                border: g.getAttribute("border") + "px solid",
                borderSpacing: g.getAttribute("cellspacing") + "px",
                "text-align": g.getAttribute("align"),
              })
              .removeAttr("cellpadding cellspacing border align"),
              x(g)
                .find("th,td")
                .css("padding", g.getAttribute("cellpadding") + "px");
          }),
            this.$el.find("big").each(function (a, g) {
              x(g).replaceWith(
                '<span class="csui-big">' + x(g).html() + "</span>"
              );
            });
        },
        refreshTabableElements: function () {
          this.mode === "read"
            ? (this.tabableElements = this.$el.find("a").toArray())
            : ((this.tabableElements = []),
              this.tabableElements.push(this.editorInstance.$el[0]),
              (this.tabableElements = this.tabableElements.concat(
                x(
                  ".froala-save-cancel.csui-html-editor-action-buttons > button:not([disabled])"
                ).toArray()
              ))),
            (this.currentlyFocusedElementIndex = -1);
        },
        moveTab: function (a) {
          this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
            a.target
          );
          var g = x(this.tabableElements[this.currentlyFocusedElementIndex]),
            I = !1;
          a.keyCode === 9 &&
            (a.shiftKey
              ? this.currentlyFocusedElementIndex > 0
                ? ((this.currentlyFocusedElementIndex -= 1),
                  x(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"),
                  a.stopPropagation(),
                  a.preventDefault())
                : (I = !0)
              : this.currentlyFocusedElementIndex <
                this.tabableElements.length - 1
              ? ((this.currentlyFocusedElementIndex += 1),
                x(this.tabableElements[this.currentlyFocusedElementIndex])
                  .prop("tabindex", 0)
                  .trigger("focus"),
                a.stopPropagation(),
                a.preventDefault())
              : (I = !0),
            I &&
              (this.mode === "write"
                ? (a.shiftKey
                    ? (this.currentlyFocusedElementIndex =
                        this.tabableElements.length - 1)
                    : (this.currentlyFocusedElementIndex = 0),
                  x(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : g.on(
                    "focusout",
                    m.bind(function () {
                      g.off("focusout"),
                        (this.currentlyFocusedElementIndex = -1);
                    }, this)
                  )),
            this.mode === "write" && (a.stopPropagation(), a.preventDefault()));
        },
        _showPreview: function (a) {
          var g, I;
          this.utils.getUrl(this, a).done(
            m.bind(function () {
              (I = m.extend(
                { targetEle: a.target, connector: this.connector },
                this.options
              )),
                this.previewLinkViews[a.target.href]
                  ? ((I.previewModel = this.previewLinkViews[a.target.href]),
                    (g = new h(I)))
                  : ((g = new h(I)),
                    this.listenTo(g, "model:fetched", function (D) {
                      this.previewLinkViews[a.target.href] = D;
                    })),
                g.render();
            }, this)
          );
        },
        _updateUrl: function (a) {
          this.utils.getUrl(this, a);
        },
        _renderActionsDropdown: function () {
          this.node.fetch().done(
            m.bind(function (a) {
              if (
                ((this.dropdownMenu = new C({
                  openForEdit: this._openForEdit.bind(this),
                  node: this.node,
                  user: this.user,
                  context: this.options.context,
                  parentView: this,
                })),
                new y.Region({
                  el: this.parentView.$el.find(".tile-controls"),
                }).show(this.dropdownMenu),
                (this.grandParentEle = this.$el.closest(
                  ".csui-html-editor-grand-parent"
                )),
                this.listenTo(
                  this.dropdownMenu,
                  "render",
                  m.bind(function () {
                    this.refreshTabableElements(),
                      this.trigger("refresh:tabindexes");
                  }, this)
                ),
                (this.editIconEle = this.parentView.$el.find(".tile-controls")),
                this.options.header)
              ) {
                var g = this.options.titlefield || "";
                this.editIconEle
                  .closest(".tile-header")
                  .attr({ title: g, "aria-label": g });
              }
            }, this)
          );
        },
        editModeAccessibility: function () {
          x(document).on(
            "keydown.html.editor",
            m.bind(function (a) {
              const g = x(".fr-toolbar")[0];
              g &&
                g.style.display != "none" &&
                !x.contains(g, a.target) &&
                (a.keyCode === 9
                  ? this.moveTab(a)
                  : [13, 32].indexOf(a.keyCode) !== -1 &&
                    x(a.target).hasClass("csui-html-edit-icon") &&
                    (x(a.target).trigger("click"), a.preventDefault()));
            }, this)
          );
        },
        removeEditModeAccessibility: function () {
          x(document).off("keydown.html.editor");
        },
        _openForEdit: function () {
          this.editModeAccessibility(),
            this.blockActions(),
            this._getLatestVersion()
              .done(
                m.bind(function () {
                  this._toggleReserve(!0)
                    .done(
                      m.bind(function () {
                        this.oldVersion === this.model.get("version")
                          ? this._getLatestContent().done(
                              m.bind(function () {
                                this._editContent();
                              }, this)
                            )
                          : u.confirmQuestion(
                              m.bind(function (a) {
                                a
                                  ? (this._editContent(),
                                    (this.enableSaveButton = !0))
                                  : this._getLatestContent().done(
                                      m.bind(function () {
                                        this._editContent(),
                                          (this.oldVersion =
                                            this.model.get("version")),
                                          (this.enableSaveButton = !1);
                                      }, this)
                                    ),
                                  (this.alreadyTriggered = !0);
                              }, this),
                              b.versionDifferenceConfirmMessage,
                              b.versionDifferenceConfirmTitle
                            );
                      }, this)
                    )
                    .fail(this.unblockActions.bind(this));
                }, this)
              )
              .fail(this.unblockActions.bind(this)),
            l.isAppleMobile() &&
              this.$el
                .find(".csui-richtext-message")
                .attr("contenteditable", !0)
                .trigger("focus");
        },
        destroyFREditor: function (a) {
          x(".csui-rich-text-mask").remove(),
            x(".csui-html-editor-zindex").removeClass(
              "csui-html-editor-zindex"
            ),
            x("#csui-richtext-sharedspace").remove(),
            x(".cui-rich-editor-widget-wrapper").removeAttr("style"),
            this.editIconEle.removeClass("binf-hidden"),
            this.unblockActions(),
            this._unbindEvents(),
            x("body").find(".csui-html-editor-action-buttons").remove(),
            window.removeEventListener(
              "resize",
              this._positionActionButtonsInstance,
              !0
            ),
            this.removeEditModeAccessibility(),
            (this.mode = "read"),
            this.refreshTabableElements(),
            x(".csui-html-editor-zero-zindex").removeClass(
              "csui-html-editor-zero-zindex"
            ),
            a.destroy();
        },
        extractSelectionData: function (a) {
          return a
            ? {
                anchorNode: a.anchorNode,
                anchorOffset: a.anchorOffset,
                focusNode: a.focusNode,
                focusOffset: a.focusOffset,
              }
            : null;
        },
        _editContent: async function () {
          var a = this;
          a.contentChanged = !!a.autoSaved;
          const g = a.node.get("parent_id_expand").image_folder_id;
          async function I(V) {
            try {
              var L = new FormData();
              L.append("parent_id", g),
                L.append("type", 144),
                L.append("name", a.editorInstance.opts.imageUploadParams.name),
                L.append("file", V);
              var j = {
                  url: a.connector.connection.url + "/nodes",
                  type: "POST",
                  data: L,
                  connector: a.connector,
                },
                G = await a.updateAjaxCall(j);
              return G.id;
            } catch (W) {
              throw (console.error("Error fetching image ID:", W), W);
            }
          }
          var D = new r(this.connector.connection.url),
            A = D.getCgiScript(),
            B = {
              placeholderText: b.PageDefaultContent,
              externalParams: {
                getImageId: I.bind(this),
                connectionUrl: A,
                imageBrowseEnabled:
                  a.node.get("parent_id_expand").imagebrowseenabled,
                enableSaveButton: a._enableSaveButton,
                disableSaveButton: a._disableSaveButton,
                widgetSelector: "div[data-csui-widget_type]",
              },
              requestHeaders: {
                otcsticket: a.connector.connection.session.ticket,
              },
              events: {
                cancel: function () {
                  var V = this;
                  a.blockActions(),
                    a.contentChanged
                      ? (this.$tb.hide(),
                        this.opts.externalParams.actionButtons.hide(),
                        u.confirmQuestion(
                          function (L) {
                            L
                              ? a
                                  ._getLatestVersion()
                                  .done(function () {
                                    a.oldVersion !== a.model.get("version")
                                      ? a
                                          ._getLatestContent()
                                          .done(
                                            m.bind(function () {
                                              (a.oldVersion =
                                                this.model.get("version")),
                                                V.html.set(
                                                  a.model.get("oldData")
                                                );
                                            }, a)
                                          )
                                          .fail(function (j) {
                                            a.editorInstance.events.trigger(
                                              "onFailure",
                                              [j]
                                            );
                                          })
                                      : V.html.set(a.model.get("oldData")),
                                      a.trigger("updateScrollbar"),
                                      a.destroyFREditor(V),
                                      a.autoSaved &&
                                        a.deleteAutoSavedContent({
                                          connector: a.connector,
                                          wikiId: a.node.get("parent_id"),
                                          pageId: a.model.get("id"),
                                        }),
                                      a._toggleReserve();
                                  })
                                  .fail(function (j) {
                                    a.editorInstance.events.trigger(
                                      "onFailure",
                                      [j]
                                    );
                                  })
                              : (this.$tb.show(),
                                this.opts.externalParams.actionButtons.show(),
                                x(a.options.richTextElementId).trigger("focus"),
                                a.unblockActions());
                          }.bind(this),
                          b.CancelConfirmMessage,
                          b.cancelTitle,
                          (u.buttonData.Yes = {
                            label: b.Yes,
                            tooltip: b.Yes,
                            aria: "",
                          }),
                          (u.buttonData.No = {
                            label: b.No,
                            tooltip: b.No,
                            aria: "",
                          })
                        ))
                      : a
                          ._getLatestVersion()
                          .done(function () {
                            a.oldVersion !== a.model.get("version")
                              ? a
                                  ._getLatestContent()
                                  .done(
                                    m.bind(function () {
                                      (a.oldVersion =
                                        this.model.get("version")),
                                        V.html.set(a.model.get("oldData"));
                                    }, a)
                                  )
                                  .fail(function (L) {
                                    a.editorInstance.events.trigger(
                                      "onFailure",
                                      [L]
                                    );
                                  })
                              : V.html.set(a.model.get("oldData")),
                              a.destroyFREditor(V),
                              a._toggleReserve();
                          })
                          .fail(function (L) {
                            a.editorInstance.events.trigger("onFailure", [L]);
                          });
                },
                "save.before": function () {
                  a._autoSaveContent();
                },
                onSave: function () {
                  a.blockActions(),
                    a
                      ._getLatestVersion()
                      .done(function () {
                        a.alreadyTriggered ||
                        a.oldVersion === a.model.get("version")
                          ? ((a.enableSaveButton = !1),
                            a
                              ._saveContent()
                              .done(() => {
                                a.editorInstance.events.trigger("onSuccess");
                              })
                              .fail((V) => {
                                a.editorInstance.events.trigger("onFailure", [
                                  V,
                                ]);
                              }))
                          : u.confirmQuestion(
                              function (V) {
                                V
                                  ? ((a.enableSaveButton = !1),
                                    a
                                      ._saveContent()
                                      .done(() => {
                                        a.editorInstance.events.trigger(
                                          "onSuccess"
                                        );
                                      })
                                      .fail((L) => {
                                        a.editorInstance.events.trigger(
                                          "onFailure",
                                          [L]
                                        );
                                      }))
                                  : (x(a.options.richTextElementId).trigger(
                                      "focus"
                                    ),
                                    a._enableSaveButton(),
                                    a.unblockActions());
                              },
                              b.versionDifferenceConfirmMessage,
                              b.versionDifferenceConfirmTitle
                            );
                      })
                      .fail(function (V) {
                        a.editorInstance.events.trigger("onFailure", [V]);
                      });
                },
                onSuccess: function () {
                  a.model.set({
                    data: a.editorInstance.html.get(),
                    oldData: a.editorInstance.html.get(),
                  }),
                    a
                      ._getLatestVersion()
                      .done(function () {
                        (a.oldVersion = a.model.get("version")),
                          a.destroyFREditor(a.editorInstance),
                          a.node.fetch(),
                          a.unblockActions();
                      })
                      .fail(function (V) {
                        a.editorInstance.events.trigger("onFailure", [V]);
                      });
                },
                onFailure: function (V) {
                  let L = new l.RequestErrorMessage(V);
                  S.showMessage("error", L.toString() || V?.message),
                    a.trigger("updateScrollbar"),
                    a.unblockActions(),
                    a._enableSaveButton();
                },
                click: function (V) {
                  const L = V.target;
                  L.nodeName === "A" &&
                    L.href &&
                    !this.edit.isDisabled() &&
                    V.preventDefault();
                },
                initialized: function () {
                  x(a.options.richTextElementId).addClass(
                    "csui-rich-text-editor-toolbar"
                  ),
                    (a.mode = "write"),
                    a.unblockActions(),
                    a.$el.find(".csui-richtext-message").trigger("focus"),
                    (a.editorInstance.opts.externalParams.actionButtons = x(
                      ".froala-save-cancel"
                    )),
                    (a.editorInstance.initialEditorText = a.editorInstance.html
                      .get()
                      .trim()),
                    a._actionButtonsPosition(),
                    a.refreshTabableElements(),
                    N(),
                    (this.html.get = this.opts.customHtmlGet.bind(this));
                },
                contentChanged: function () {
                  a._validateState();
                },
              },
            };
          (a.editorInstance = await f("#" + this.options.richTextElementId, B)),
            (window.onbeforeunload = function () {
              return !1;
            }),
            csui.require(
              ["csui/dialogs/node.picker/node.picker"],
              function (V) {
                a.editorInstance.opts.csLink = {
                  nodeLink: w,
                  nodePicker: function () {
                    return new V({
                      connector: a.connector,
                      dialogTitle: b.contentServerLink,
                      context: a.options.context,
                      resolveShortcuts: !0,
                      resultOriginalNode: !1,
                      currentUser: a.options.context.getModel(i),
                    });
                  },
                };
              }
            );
          var M = a.$("#" + this.options.richTextElementId),
            E = M.find(".fr-wrapper");
          E.attr("contenteditable", !0),
            this.editIconEle.addClass("binf-hidden");
          var P = document.createElement("div"),
            O = document.createElement("div"),
            z = x.fn.binf_modal.getDefaultContainer();
          (P.className = "csui-rich-text-mask"),
            (O.className = "csui-rich-text-mask csui-rich-text-body-mask"),
            a.grandParentEle.before(P),
            x(z).append(O),
            l.isMSBrowser() &&
              x("#breadcrumb-wrap") &&
              x("#breadcrumb-wrap").addClass("csui-html-editor-zero-zindex");
          var F = x(P),
            U = x(O),
            H =
              this.grandParentEle.find(".csui-html-editor-no-header").length > 0
                ? 5
                : 80,
            N = function () {
              U.css("height", "0px"), F.css("top", "0px");
              var V = M.offset().top - x(P).offset().top - H,
                L = M.offset().top - H;
              (L = V < 0 ? L + -V : L),
                (V = V < 0 ? 0 : V),
                U.css("height", L + "px"),
                F.css({
                  height: document.body.scrollHeight - O.offsetHeight,
                  top: V,
                }),
                x(P).parent().addClass("csui-html-editor-zindex");
            };
          N(),
            x(window).on("resize", N),
            x(".csui-richtext-message").on("change", N);
        },
        _saveContent: function () {
          var a = this,
            g = x.Deferred(),
            I = new FormData();
          I.append(
            "TextField",
            a.editorInstance.html.get() === ""
              ? "<p></p>"
              : a.editorInstance.html.get()
          );
          var D = {
              url: a.connector.connection.url + "/nodes/" + a.options.id,
              type: "PUT",
              data: I,
              dataType: "json",
              processData: !1,
              contentType: !1,
              connector: a.connector,
              view: a,
              requestType: "saveContent",
            },
            A = a.updateAjaxCall(D),
            B = function () {
              if (a.autoSaved) {
                const E = a.connector.getConnectionUrl().getApiBase("v2"),
                  P = a.node.get("parent_id"),
                  O = a.model.get("id"),
                  z = {
                    type: "DELETE",
                    connector: a.connector,
                    wikiId: P,
                    pageId: O,
                    url: r.combine(E, "/wiki/" + P + "/autosave/" + O),
                  };
                return a.updateAjaxCall(z);
              } else return x.Deferred().resolve().promise();
            },
            M = function () {
              return a._toggleReserve(!0);
            };
          return (
            Promise.all([A, B(), M()])
              .then(function () {
                g.resolve();
              })
              .catch(function (E) {
                g.reject(E);
              }),
            g.promise()
          );
        },
        _disableSaveButton: function () {
          var a = x("body").find(".csui-html-edit-save");
          a.length && (a[0].disabled = !0);
        },
        _enableSaveButton: function () {
          var a = x("body").find(".csui-html-edit-save");
          a.length && (a[0].disabled = !1);
        },
        _toggleReserve: function (a) {
          let g = x.Deferred(),
            I = new FormData();
          if (a) {
            if (
              this.node.get("reserved") &&
              this.node.get("reserved_user_id") === this.user.get("id")
            )
              return g.resolve(), g;
            I.append("reserved_user_id", this.user.get("id"));
          } else if (this.node.get("reserved"))
            I.append("reserved_user_id", null);
          else return this.node.fetch(), g.resolve(), g;
          let D =
              this.connector.connection.url + "/nodes/" + this.node.get("id"),
            A = this;
          return (
            this.updateAjaxCall({
              url: D,
              connector: this.connector,
              data: I,
              type: "PUT",
            })
              .done(function () {
                g.resolve();
              })
              .fail(function (B) {
                S.showMessage("error", B.responseJSON.errorDetail), g.reject();
              })
              .always(function () {
                A.node.fetch();
              }),
            g
          );
        },
        _autoSaveContent: function () {
          let a = this.editorInstance;
          if (a && a.html.get().trim() !== this.model.get("data").trim()) {
            let g = a.html.get(),
              I = new FormData();
            I.append("wikiId", this.node.get("parent_id")),
              I.append("pageId", this.model.get("id")),
              I.append("source", g),
              this.updateAjaxCall({
                connector: this.connector,
                url: r.combine(
                  this.connector.getConnectionUrl().getApiBase("v2"),
                  "/wiki/autosave"
                ),
                type: "POST",
                data: I,
                view: this,
              }),
              (this.autoSaved = !0);
          }
        },
        _getLatestContent: function () {
          var a = {
            url: r.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "/wiki/" + this.model.get("id") + "/autosave"
            ),
            type: "GET",
            requestType: "getContent",
            connector: this.connector,
            view: this,
          };
          return this.updateAjaxCall(a);
        },
        _getLatestVersion: function () {
          var a = {
            url: r.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "/nodes/" + this.model.get("id")
            ),
            type: "GET",
            requestType: "versions-reserve",
            connector: this.connector,
            view: this,
          };
          return this.updateAjaxCall(a);
        },
        _validateState: function () {
          (this.utils = this.utils || k.getRichTextEditorUtils()),
            this.editorInstance &&
            this.editorInstance.html.get().trim() !==
              this.editorInstance.initialEditorText
              ? ((this.contentChanged = !0),
                this._enableSaveButton(),
                this.refreshTabableElements())
              : ((this.contentChanged = !1),
                this._disableSaveButton(),
                this.refreshTabableElements());
        },
        _appendActionButtons: function () {
          var a = x("body"),
            g = {
              saveLabel: b.saveTitle,
              cancelLabel: b.cancelTitle,
              cancelAria: b.cancelAria,
              saveAria: b.saveAria,
              isFroala: !0,
            };
          (this.scrollbarWidth = window.innerWidth - document.body.clientWidth),
            a.append(_(g)),
            a.find(".csui-html-edit-save").on(
              "click",
              m.bind(function () {
                this.editorInstance.events.trigger("onSave");
              }, this)
            ),
            a.find(".csui-html-edit-cancel").on(
              "click",
              m.bind(function () {
                this.editorInstance.events.trigger("cancel");
              }, this)
            );
        },
        _actionButtonsPosition: function () {
          this.enableSaveButton
            ? (this._enableSaveButton(), this.refreshTabableElements())
            : (this._disableSaveButton(), this.refreshTabableElements());
        },
        _unbindEvents: function () {
          window.onbeforeunload = null;
        },
        updateAjaxCall: function (a) {
          var g = x.Deferred(),
            I = a.url,
            D = a.data,
            A = a.type,
            B = a.connector,
            M = a.view,
            E = a.requestType;
          return (
            B.makeAjaxCall({
              url: I,
              type: A,
              data: D,
              contentType: !1,
              crossDomain: !0,
              processData: !1,
              success: function (P, O, z) {
                switch (E) {
                  case "getContent":
                    P.results.data.autoSaved
                      ? ((M.autoSaved = !0),
                        u.confirmQuestion(
                          function (F) {
                            var U = P.results.data.content;
                            F
                              ? ((U = P.results.data.autoSaved),
                                (M.enableSaveButton = !0))
                              : ((M.enableSaveButton = !1),
                                M.deleteAutoSavedContent({
                                  connector: M.connector,
                                  wikiId: M.node.get("parent_id"),
                                  pageId: M.model.get("id"),
                                }),
                                M._toggleReserve()),
                              M.model.set({ data: U }),
                              g.resolve();
                          },
                          b.RestoreDialogMessage,
                          b.RestoreDiaglogTitle,
                          (u.buttonData.Yes = {
                            label: b.Continue,
                            tooltip: b.Continue,
                            aria: "",
                          }),
                          (u.buttonData.No = {
                            label: b.Discard,
                            tooltip: b.Discard,
                            aria: "",
                          })
                        ))
                      : (M.model.set({
                          data: P.results.data.content,
                          oldData: P.results.data.content,
                        }),
                        g.resolve());
                    break;
                  case "versions-reserve":
                    (M.model.attributes.version =
                      P.results.data.versions.length),
                      M.node.set({
                        reserved: P.results.data.properties.reserved,
                        reserved_user_id:
                          P.results.data.properties.reserved_user_id,
                      }),
                      g.resolve();
                    break;
                  default:
                    g.resolve(P);
                }
              },
              error: function (P, O, z) {
                g.reject(P);
              },
            }),
            g.promise()
          );
        },
        deleteAutoSavedContent: function (a) {
          this.autoSaved &&
            ((a.type = "DELETE"),
            (a.url = r.combine(
              a.connector.getConnectionUrl().getApiBase("v2"),
              "/wiki/" + a.wikiId + "/autosave/" + a.pageId
            )),
            this.updateAjaxCall(a),
            (this.autoSaved = !1));
        },
      });
      return T;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-html-editor-tile-controls tile-controls"></div>
<div class="csui-html-editor-wrapper-parent cui-rich-editor-widget-wrapper
csui-html-editor-wrapper-parent-` +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 32 },
                      end: { line: 3, column: 40 },
                    },
                  })
                : t)
            ) +
            `">
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_html.editor.wrapper.template",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/html.editor/html.editor.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/radio",
      "csui/models/node/node.model",
      "csui/models/node.children2/node.children2",
      "csui/utils/contexts/factories/node",
      "csui/utils/commands",
      "csui/controls/tile/tile.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/widgets/html.editor/impl/html.editor.content.view",
      "hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n) {
      var u = f.extend({
          constructor: function (h) {
            h || (h = {}),
              (h.icon = "cs-wiki-icon-wiki"),
              (this.context = h.context),
              (h.id = "csui-html-tile-wrapper-" + h.wikiPageId),
              f.prototype.constructor.call(this, h),
              (h = h.data ? x.extend(h, h.data) : h),
              (this.options = h),
              (this.options.parentView = this),
              (this.contentViewOptions = this.options);
          },
          contentView: o,
          contentViewOptions: function () {
            x.extend(this.options, { parentView: this });
          },
          onShow: function () {
            this.$el.addClass(
              "cui-rich-editor-widget-wrapper cui-rich-editor-widget-wrapper-" +
                this.options.wikiPageId
            );
          },
        }),
        c = p.CompositeView.extend({
          tagName: "div",
          className: "csui-html-editor-grand-parent",
          templateHelpers: function () {
            return {};
          },
          template: n,
          ui: {
            editIcon: ".tile-controls",
            contentAreaLinks: ".csui-html-editor-wrapper a",
          },
          events: {
            keydown: "onKeyInView",
            "click @ui.contentAreaLinks": "onClickLink",
            "click @ui.editIcon": "onClickEditIcon",
          },
          constructor: function (h) {
            (h = h || {}),
              h.data || (h.data = {}),
              x.extend(h, h.data),
              (h.wikiPageId = h.wikipageid || h.id),
              (h.id = "csui-html-editor-grand-parent-" + h.wikiPageId),
              (h.title = h.titlefield || h.title),
              (h.header = !!h.title),
              (h.scrollableParent = h.header
                ? ".tile-content"
                : ".csui-html-editor-wrapper-parent"),
              (this.context = h.context),
              p.CompositeView.prototype.constructor.apply(this, arguments);
          },
          behaviors: {
            TabableRegionBehavior: { behaviorClass: t },
            DefaultAction: { behaviorClass: i },
          },
          onClickEditIcon: function (d) {
            y.channel("dropdown:open").trigger("align:dropDown:menu", this);
          },
          onClickLink: function (d) {
            var h = m(d.target).attr("href")
              ? m(d.target)
              : m(d.target).parents("a");
            h[0] &&
              h.attr("href") &&
              this._handleClickLink({
                event: d,
                connector: this.options.model.connector,
                callingViewInstance: this,
              });
          },
          _handleClickLink: function (d) {
            var h,
              k = m(d.event.target).attr("href")
                ? m(d.event.target)
                : m(d.event.target).parents("a"),
              C = d.callingViewInstance,
              S = this,
              w = k.attr("href") ? k.attr("href") : "";
            if (
              this.htmlEditorContentView &&
              this.htmlEditorContentView.mode === "read"
            )
              if (w.match(/^.*\/open|Open\/(.+)$/)) {
                if (
                  (d.event.stopPropagation(),
                  d.event.preventDefault(),
                  w.indexOf("open/") !== -1 || w.indexOf("Open/") !== -1)
                ) {
                  var b = w.substring(w.lastIndexOf("/") + 1, w.length);
                  b.match(/^[0-9]+$/)
                    ? ((h = this.getNewNodeModel({
                        attributes: {
                          id: parseInt(
                            w.substring(w.lastIndexOf("/") + 1, w.length),
                            10
                          ),
                        },
                        connector: d.connector,
                      })),
                      h
                        .fetch()
                        .done(function () {
                          C.triggerMethod("execute:defaultAction", h);
                        })
                        .fail(function (a, g, I) {
                          window.location.href = w;
                        }))
                    : this.updateAjaxCall({
                        url:
                          d.connector.getConnectionUrl().getApiBase("v2") +
                          "/wiki/nickname/" +
                          b +
                          "?actions=open&fields=properties",
                        connector: d.connector,
                        view: d.callingViewInstance,
                        type: "GET",
                      })
                        .done(function (a) {
                          (h = S.getNewNodeModel(
                            {},
                            { connector: d.connector }
                          )),
                            (h.attributes = h.parse(a)),
                            (h = S.getNewNodeModel(
                              { attributes: h.attributes },
                              { connector: d.connector }
                            )),
                            C.triggerMethod("execute:defaultAction", h);
                        })
                        .fail(function () {
                          window.location.href = w;
                        });
                }
              } else if (
                w.match(/^.*\/wiki\/[0-9]+\/(.+)$/) ||
                w.match(/^.*\/wiki\/[0-9]+$/)
              ) {
                var v;
                if (
                  (d.event.stopPropagation(),
                  d.event.preventDefault(),
                  w.match(/^.*\/wiki\/[0-9]+\/(.+)$/))
                )
                  v = decodeURIComponent(
                    w.substring(w.lastIndexOf("/") + 1, w.length)
                  );
                else if (w.match(/^.*\/wiki\/[0-9]+$/)) {
                  var _ = decodeURIComponent(
                    w.substring(0, w.lastIndexOf("/") - 5)
                  );
                  v = decodeURIComponent(
                    _.substring(_.lastIndexOf("/") + 1, _.length)
                  );
                }
                this.updateAjaxCall({
                  url:
                    d.connector.getConnectionUrl().getApiBase("v2") +
                    "/wiki/" +
                    this.options.wikiid +
                    "/wikipages",
                  connector: d.connector,
                  view: d.callingViewInstance,
                  type: "GET",
                })
                  .done(function (a) {
                    (h = a.results.find(function (g) {
                      if (g.name === v) return g;
                    })),
                      h
                        ? ((h = S.getNewNodeModel({
                            attributes: h,
                            connector: d.connector,
                          })),
                          h
                            .fetch()
                            .done(function () {
                              d.callingViewInstance.triggerMethod(
                                "execute:defaultAction",
                                h
                              );
                            })
                            .fail(function (g, I, D) {
                              window.location.href = w;
                            }))
                        : (window.location.href = w);
                  })
                  .fail(function () {
                    window.location.href = w;
                  });
              } else if (w.match(/^.*objId\=(.+)$/)) {
                d.event.stopPropagation(), d.event.preventDefault();
                var T = w.indexOf("objId=");
                T !== -1 &&
                  ((h = this.getNewNodeModel({
                    attributes: {
                      id: parseInt(
                        w.substring(
                          T + 6,
                          w.substring(T + 1, w.length).indexOf("&") + T + 1
                        ),
                        10
                      ),
                    },
                    connector: d.connector,
                  })),
                  h
                    .fetch()
                    .done(function () {
                      d.callingViewInstance.triggerMethod(
                        "execute:defaultAction",
                        h
                      );
                    })
                    .fail(function (a, g, I) {
                      window.location.href = w;
                    }));
              } else
                w.match(/^.*\/app\/nodes\/(.+)$/) &&
                  (d.event.stopPropagation(),
                  d.event.preventDefault(),
                  w.indexOf("nodes/") !== -1 &&
                    ((h = this.getNewNodeModel({
                      attributes: {
                        id: parseInt(
                          w.substring(w.lastIndexOf("/") + 1, w.length),
                          10
                        ),
                      },
                      connector: d.connector,
                    })),
                    h
                      .fetch()
                      .done(function () {
                        C.triggerMethod("execute:defaultAction", h);
                      })
                      .fail(function (a, g, I) {
                        window.location.href = w;
                      })));
          },
          updateAjaxCall: function (d) {
            var h = m.Deferred(),
              k = d.url,
              C = d.data,
              S = d.type,
              w = d.connector;
            return (
              (this.ajaxRequest = m.ajax(
                w.extendAjaxOptions({
                  url: k,
                  type: S,
                  data: C,
                  contentType: !1,
                  crossDomain: !0,
                  processData: !1,
                  success: function (b, v, _) {
                    h.resolve(b);
                  },
                  error: function (b, v, _) {
                    h.reject();
                  },
                })
              )),
              h.promise()
            );
          },
          currentlyFocusedElement: function () {
            return this.htmlEditorContentView.dropdownMenu &&
              !this.htmlEditorContentView.dropdownMenu.haveEditPermissions
              ? this.htmlEditorContentView.$el.find("a:first")
              : this.$el.find(
                  ".csui-html-editor-dropdown .csui-html-editor-control"
                );
          },
          getNewNodeModel: function (d) {
            return new s(d.attributes, {
              connector: d.connector,
              commands: l.getAllSignatures(),
              fields: d.fields || {},
              expand: d.expand || {},
            });
          },
          onKeyInView: function (d) {
            this.htmlEditorContentView.mode === "read" &&
              this.htmlEditorContentView.moveTab(d);
          },
          onRender: function (d) {
            var h = this;
            this.getWikiDetails().done(function () {
              var k;
              (h.options.autosaveInterval = 6e4),
                h.options.header === void 0 || h.options.header
                  ? ((k = new u(h.options)),
                    h.listenToOnce(
                      k,
                      "show",
                      x.bind(function () {
                        h.htmlEditorContentView = k.getChildView("content");
                      }, h)
                    ))
                  : ((h.options.parentView = h),
                    (k = new o(h.options)),
                    (h.htmlEditorContentView = k)),
                new p.Region({
                  el: h.$el.find(".csui-html-editor-wrapper-parent"),
                }).show(k),
                (h._triggerView = h),
                h.listenTo(
                  h.htmlEditorContentView,
                  "refresh:tabindexes",
                  x.bind(function () {
                    h.trigger("refresh:tabindexes");
                  }, h)
                );
            });
          },
          onShow: function () {
            this.options.scrollableParent &&
              this.$el
                .find(this.options.scrollableParent)
                .addClass("csui-normal-scrolling");
          },
          getWikiDetails: function () {
            var d = this.options.context.getModel(r),
              h =
                !!d.get("data") &&
                !!d.get("data").bwsinfo &&
                !!d.get("data").bwsinfo.id,
              k = this,
              C = m.Deferred(),
              S,
              w,
              b;
            if (
              !h ||
              this.options.data.wikicontainerid ||
              this.options.data.wikitemplateid
            )
              C.resolve();
            else {
              d =
                d.get("type") === 848
                  ? d
                  : new s(
                      { id: d.get("data").bwsinfo.id },
                      { connector: d.connector }
                    );
              var v = this.getChildren(d, 5573, ["id", "main_page_id"]);
              v.fetch().done(function () {
                if (((S = v.length > 0 ? v.models[0] : void 0), S))
                  if (((b = S.get("main_page_id")), b))
                    (k.options.wikiid = S.get("id")),
                      (k.options.wikiPageid = b),
                      (k.options.wikiPageId = b),
                      C.resolve();
                  else {
                    var _ = k.getChildren(S, 5574, ["id"]);
                    _.fetch().done(function () {
                      (w = _.length > 0 ? _.models[0] : void 0),
                        w &&
                          ((k.options.wikiid = S.get("id")),
                          (k.options.wikiPageid = w.get("id")),
                          (k.options.wikiPageId = w.get("id"))),
                        C.resolve();
                    });
                  }
                else C.resolve();
              });
            }
            return C.promise();
          },
          getChildren: function (d, h, k) {
            var C = new e(
              {},
              x.defaults(
                {
                  top: 1,
                  autoreset: !0,
                  fields: { properties: k },
                  delayRestCommands: !1,
                  orderBy: "create_date",
                  filter: { type: h },
                },
                { node: d }
              )
            );
            return C;
          },
        });
      return c;
    }
  ),
  csui.define("csui/widgets/document.overview/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/document.overview/impl/nls/root/lang", {
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemEdit: "Edit",
    ToolbarItemProperties: "Properties",
    location: "Location",
    docPreviewImgAlt: "Document Preview",
    name: "Name",
    description: "Description",
    created: "Created",
    createdBy: "Created by",
    modifiedBy: "Modified by",
    type: "Type",
    modified: "Modified",
    ownedBy: "Owned by",
    size: "Size",
    reservedBy: "Reserved by",
    noValue: "No value",
    reservedByUnreserve: "Reserved by {0}, Press to unreserve",
    goBackTitle: "Go back",
    goBackAria: "Go back",
  }),
  csui.define(
    "hbs!csui/widgets/document.overview/impl/document.overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"
           aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 23 },
                      end: { line: 6, column: 37 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTitle") ||
                  (e != null ? i(e, "goBackTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTitle",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 61 },
                    },
                  })
                : t)
            ) +
            `" role="link" tabindex="0"></div>
`
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `        <div class="description_section doc-overview-general-information">
          <div class="doc-overview-form-group">
            <label class="doc-overview-control-label" for="desc` +
            s.escapeExpression(
              ((t =
                (t = i(r, "unique") || (e != null ? i(e, "unique") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 109, column: 63 },
                      end: { line: 109, column: 73 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 109, column: 82 },
                      end: { line: 109, column: 96 },
                    },
                  })
                : t)
            ) +
            `">
              ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 110, column: 14 },
                      end: { line: 110, column: 28 },
                    },
                  })
                : t)
            ) +
            `
            </label>
            <div class="binf-col-sm-9">
              <button disabled id="desc` +
            s.escapeExpression(
              ((t =
                (t = i(r, "unique") || (e != null ? i(e, "unique") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 39 },
                      end: { line: 113, column: 49 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 63 },
                      end: { line: 113, column: 77 },
                    },
                  })
                : t)
            ) +
            `:
              ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_value") || (e != null ? i(e, "desc_value") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 114, column: 14 },
                      end: { line: 114, column: 28 },
                    },
                  })
                : t)
            ) +
            `"><span class="csui-ellipsis-area no-ellipsis"><span><span
                  class="cs-field-textarea-data">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_value") || (e != null ? i(e, "desc_value") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 115, column: 49 },
                      end: { line: 115, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span></span>
                </span>
              </button>
            </div>
            <div style="clear:both;"></div>
          </div>
        </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="cs-content-wrapper cs-content-overlay-wrapper">

  <div class="cs-content-header">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "back_button") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 7, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="title-container"></div>
    <div class="actions-container">
      <div class="commentRegion"></div>
      <div class="favoriteRegion"></div>
    </div>
  </div>
  <div class="cs-content-container csui-normal-scrolling">
    <div class="description-container cs-content">

      <div class="created_by_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-doc-overview-created-by-pic"></div>
            <div class="csui-doc-overview-created-by-user"></div>
          </div>
        </div>
      </div>

      <div class="modified_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 61 },
                      end: { line: 31, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 80 },
                      end: { line: 31, column: 96 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 12 },
                      end: { line: 32, column: 28 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 37 },
                      end: { line: 35, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 61 },
                      end: { line: 35, column: 77 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 79 },
                      end: { line: 35, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
              <span title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 27 },
                      end: { line: 36, column: 42 },
                    },
                  })
                : i)
            ) +
            '">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 44 },
                      end: { line: 36, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>
      <div class="modified_by_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-doc-overview-modified-by-pic"></div>
            <div class="csui-doc-overview-modified-by-user"></div>
          </div>
        </div>
      </div>
      <div class="type_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="type` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 55, column: 61 },
                      end: { line: 55, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 55, column: 80 },
                      end: { line: 55, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 56, column: 12 },
                      end: { line: 56, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 27 },
                      end: { line: 59, column: 40 },
                    },
                  })
                : i)
            ) +
            '" id="type' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 50 },
                      end: { line: 59, column: 60 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 60, column: 32 },
                      end: { line: 60, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 60, column: 48 },
                      end: { line: 60, column: 61 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 61, column: 20 },
                      end: { line: 61, column: 33 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="size_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="size` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 70, column: 61 },
                      end: { line: 70, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 70, column: 80 },
                      end: { line: 70, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 71, column: 12 },
                      end: { line: 71, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_full_value") ||
                  (e != null ? o(e, "size_full_value") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_full_value",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 27 },
                      end: { line: 74, column: 46 },
                    },
                  })
                : i)
            ) +
            '" id="size' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 56 },
                      end: { line: 74, column: 66 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 75, column: 32 },
                      end: { line: 75, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 75, column: 48 },
                      end: { line: 75, column: 62 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 76, column: 20 },
                      end: { line: 76, column: 34 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="reserve_info doc-overview-general-information binf-hidden">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "reservedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "reservedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="doc-overview-reserve">
              <div class="csui-doc-overview-reserve-btn"></div>
              <div class="csui-doc-overview-reserve-user"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="location-container doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9 location-view"></div>
        </div>
      </div>

` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "has_description") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 106, column: 6 },
                  end: { line: 122, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `
    </div>

    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">
      <div class="metadata-tab">
        <div class="thumbnail_section metadata-preview preview-section"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `">
          <img role="link" src="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgSrc") || (e != null ? o(e, "imgSrc") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 130, column: 32 },
                      end: { line: 130, column: 42 },
                    },
                  })
                : i)
            ) +
            '" class="img-doc-preview binf-hidden" alt="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgAlt") || (e != null ? o(e, "imgAlt") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 130, column: 85 },
                      end: { line: 130, column: 95 },
                    },
                  })
                : i)
            ) +
            `" />
        </div>
      </div>
    </div>
  </div>
  <div class="cs-fadeout-container"></div>
  <div class="cs-content-footer">
    <button class="binf-btn primary-btn command-btn open-btn" type="button"
            data-signature="OpenDocument">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn csui-doc-overview-download-btn" type="button"
            data-signature="Download">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemDownload")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn edit-btn" type="button"
            data-signature="Edit">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemEdit")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn properties-btn" type="button"
            data-signature="Properties">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemProperties")
                  : t,
                e
              )
            ) +
            `</button>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_document.overview_impl_document.overview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/document.overview/impl/document.overview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/document.overview/document.overview.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/jquery",
      "csui/utils/log",
      "csui/utils/url",
      "csui/utils/types/date",
      "csui/utils/nodesprites",
      "csui/utils/contexts/factories/node",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/commandhelper",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/document.overview/impl/nls/lang",
      "csui/utils/contexts/factories/largefilesettings.factory",
      "csui/utils/contexts/factories/next.node",
      "hbs!csui/widgets/document.overview/impl/document.overview",
      "css!csui/widgets/document.overview/impl/document.overview",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c, d, h, k, C, S) {
      "use strict";
      e = e(m.id);
      var w = p.extend(
          { fileActionSettings: [] },
          x.moduleConfig(
            "csui/utils/commands/open.document/delegates/open.document.delegates"
          )
        ),
        b = y.ItemView.extend({
          className: "cs-form csui-general-form cs-document-overview-wrapper",
          template: S,
          templateHelpers: function () {
            var v = !0,
              _ = f.findTypeByNode(this.options.node),
              T = this.options.node.get("size_formatted"),
              a = this.options.node.get("size"),
              g = l.formatExactDateTime(
                l.deserializeDate(this.options.node.get("modify_date"))
              ),
              I = this.options.node.get("description"),
              D = !!I,
              A = {
                unique: p.uniqueId("_doc"),
                lang: h,
                back_button: v,
                mime_type: _,
                has_description: D,
                size_value: T,
                size_full_value: a,
                modify_date: g,
                desc_value: I,
                type_label: h.type,
                size_label: h.size,
                modify_label: h.modified,
                desc_label: h.description,
                imgSrc:
                  "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
                imgAlt: h.docPreviewImgAlt,
                goBackTitle: h.goBackTitle,
                goBackAria: h.goBackAria,
              };
            return A;
          },
          ui: {
            location: ".location-view",
            back: ".cs-go-back",
            titleContainer: ".title-container",
            commentButtonRegion: ".commentRegion",
            favoriteStarRegion: ".favoriteRegion",
            thumbnailContainer: ".thumbnail-container",
            modifySectionBtn: ".modified_section button",
            mimeTypeBtn: ".type_section button",
            sizeSectionBtn: ".size_section button",
            thumbnailImg: ".img-doc-preview",
            reserveInfo: ".reserve_info",
            reserveUser: ".csui-doc-overview-reserve-user",
            reserverBtn: ".csui-doc-overview-reserve-btn",
            createdBy: ".created_by_section .binf-col-sm-9",
            modifiedBy: ".modified_by_section .binf-col-sm-9",
            creadyByUser: ".csui-doc-overview-created-by-user",
            createdByPic: ".csui-doc-overview-created-by-pic",
            modifiedByUser: ".csui-doc-overview-modified-by-user",
            modifiedByPic: ".csui-doc-overview-modified-by-pic",
            openBtn: ".open-btn",
            editBtn: ".edit-btn",
            downloadBtn: ".csui-doc-overview-download-btn",
            propertiesBtn: ".properties-btn",
            thumbnailSection: ".thumbnail_section",
          },
          events: {
            "click .command-btn": "_handleClickButton",
            "click @ui.back": "onBackButton",
            keydown: "onKeyInView",
          },
          constructor: function (_) {
            _ || (_ = {}),
              d.imbue(this),
              _.data || (_.data = {}),
              _.node ||
                (_.node = _.context.getModel(t, {
                  attributes: _.data.id && { id: _.data.id },
                  temporary: !0,
                })),
              (this.previewInFullMode = !0),
              (this.options = _);
            var T = _.context && _.context.viewStateModel;
            (this.back_button = T && T.hasRouted()),
              (this.largeFileSettingsFactory =
                this.options.context.getFactory(k)),
              (this.largeFileSettingsModel =
                this.largeFileSettingsFactory &&
                this.largeFileSettingsFactory.property),
              y.ItemView.prototype.constructor.apply(this, arguments),
              (this.commandController = new o({ commands: _.commands || u })),
              (this.commands = this.commandController.commands),
              (this.reloadWidget = !1),
              (this.parentNode = void 0),
              (this.supportOriginatingView = !0),
              this.listenTo(
                this.options.node,
                "change",
                p.bind(this._handleNodeChange, this)
              ),
              this.listenTo(
                this,
                "new:version:added",
                p.bind(this._handleVersionChange, this)
              ),
              this.listenTo(
                this.options.node,
                "delete",
                p.bind(this._navigateToParent, this)
              ),
              this.listenTo(
                this,
                "disable:blocking",
                this._currentlyFocusedElement
              ),
              T &&
                this.listenTo(T, "navigate", function (a) {
                  a && !this.back_button && this.ui.back.show();
                }),
              this.blockActions();
          },
          onRender: function () {
            this._showMetadataItemName(),
              this._addCommentView(),
              this._addFavoriteView(),
              this._showThumbnail(),
              this._addLocationView(),
              this._showCreatedByUserName(),
              this._showModifiedByUserName(),
              this._showReserveRow(),
              this._checkPermissions(),
              this.back_button || this.ui.back.hide();
          },
          _currentlyFocusedElement: function () {
            (this.tabableElements = this.$el.find(
              "[tabindex='0']:not([disabled]):not(.csui-disabled):visible"
            )),
              this.tabableElements.length > 0 &&
                (
                  p.find(this.tabableElements, function (_) {
                    return _.className.includes("title");
                  }) || this.tabableElements[0]
                ).focus();
          },
          _unblockActions: function () {
            this.unblockActions(),
              this.$el
                .find(".cs-content-wrapper")
                .removeClass("cs-content-overlay-wrapper");
          },
          onShow: function () {
            this.$el.addClass("adjust-scroll");
          },
          onDomRefresh: function () {
            this.metadataItemNameView &&
              this.metadataItemNameView.triggerMethod("dom:refresh");
          },
          _isReserved: function () {
            return this.options.node.get("reserved") === !0;
          },
          _showMetadataItemName: function () {
            csui.require(
              [
                "csui/widgets/metadata/impl/header/item.name/metadata.item.name.view",
              ],
              p.bind(function (v) {
                this.metadataItemNameView &&
                  this.metadataItemNameView.destroy(),
                  (this.metadataItemNameView = new v({
                    model: this.options.node,
                    container: this.options.node.parent,
                    containerCollection: this.options.containerCollection,
                    collection: this.options.collection,
                    context: this.options.context,
                    nameSchema: {},
                    commands: this.commands,
                    originatingView: this,
                    showDropdownMenu: !0,
                    showPropertiesCommand: !0,
                    noMetadataNavigation: !0,
                  })),
                  this.listenTo(
                    this.metadataItemNameView,
                    "metadata:item:name:save",
                    this._saveItemName
                  );
                var _ = this.metadataItemNameView.render();
                y.triggerMethodOn(_, "before:show", _, this),
                  this.ui.titleContainer.append(_.el),
                  y.triggerMethodOn(_, "show", _, this);
              }, this)
            );
          },
          _saveItemName: function (v) {
            var _ = this,
              T = v.sender.getValue(),
              a = { name: T },
              g = v.sender && v.sender.model,
              I = this.options.model || this.options.node;
            g &&
              g.changed.name_multilingual &&
              p.extend(a, { name_multilingual: g.changed.name_multilingual }),
              I.setFields("versions.element(0)", "owner_id");
            var D = p.clone(I.attributes);
            return I.save(D, { data: a, wait: !0, silent: !0 })
              .then(function () {
                I.fetch({ silent: !0 }).done(function () {
                  _._updateModifyDateAndTimeStamp(),
                    v.success(),
                    I.trigger("change:name", I, a);
                });
              })
              .fail(function (A) {
                v.error(A);
              });
          },
          _addCommentView: function () {
            csui.require(
              [
                "csui/controls/tableheader/comment/comment.button.view",
                "esoc/widgets/utils/commentdialog/commentdialog.view",
              ],
              p.bind(function (v) {
                var _ = this.options;
                (_.originatingView = this),
                  (_.model = this.options.node || this.options.model);
                var T = new v(_),
                  a = new y.Region({ el: this.ui.commentButtonRegion });
                a.show(T), this._unblockActions();
              }, this)
            );
          },
          _addFavoriteView: function () {
            csui.require(
              ["csui/widgets/favorites/favorite.star.view"],
              p.bind(function (v) {
                var _ = this.options;
                (_.model = this.options.node || this.options.model),
                  (_.popoverAtBodyElement = !0);
                var T = new v(_),
                  a = new y.Region({ el: this.ui.favoriteStarRegion });
                a.show(T);
              }, this)
            );
          },
          _handleNodeChange: function () {
            this.options.node.isReservedClicked ||
            this.options.node.isUnreservedClicked
              ? (this._updateReserveField(),
                this._updateModifyDateAndTimeStamp(),
                (this.options.node.isReservedClicked = !1),
                (this.options.node.isUnreservedClicked = !1))
              : this.options.node.changed.csuiDelayedActionsRetrieved
              ? ((this.isReserved = !1),
                this._updateReserveField(),
                this._checkPermissions())
              : this.render();
          },
          _handleVersionChange: function () {
            this.ui.thumbnailContainer.addClass("binf-hidden"),
              this.$el.removeClass(
                "cs-document-overview-wrapper-with-thumbnail"
              );
          },
          _updateModifyDateAndTimeStamp: function () {
            var v = this.ui.modifySectionBtn,
              _ = v.find("span"),
              T = l.formatExactDateTime(
                l.deserializeDate(this.options.node.get("modify_date"))
              );
            _.text() != T &&
              (v.attr("aria-label", h.modified + ":" + T),
              _.attr("title", T).text(T));
          },
          _showThumbnail: function () {
            if (
              ((this.thumbnail =
                this.options.thumbnail || new i({ node: this.options.node })),
              this.listenTo(this.thumbnail, "loadUrl", this._showImage),
              this.listenTo(this.thumbnail, "error", this._showDefaultImage),
              this.listenTo(
                this,
                "destroy",
                p.bind(this._destroyThumbnail, this)
              ),
              !this.thumbnailSet)
            ) {
              var v = this;
              (this.thumbnailSet = !0),
                this.thumbnail.hasOwnProperty("imgUrl") && this.thumbnail.imgUrl
                  ? this._showImage()
                  : this.thumbnail.loadUrl();
            }
          },
          _showImage: function () {
            this.$el.addClass("cs-document-overview-wrapper-with-thumbnail"),
              this.ui.thumbnailContainer.removeClass("binf-hidden"),
              this.trigger("thumbnail:show:image");
            var v = this,
              _ = this.ui.thumbnailImg;
            _.attr("src", this.thumbnail.imgUrl),
              _.prop("tabindex", "0"),
              _.one("load", function (T) {
                T.target.clientHeight >= T.target.clientWidth
                  ? _.addClass("cs-form-img-vertical")
                  : _.addClass("cs-form-img-horizontal"),
                  _.addClass("cs-form-img-border"),
                  _.removeClass("binf-hidden");
                var a = s.Event("tab:content:render");
                v.$el.trigger(a);
              });
          },
          _showDefaultImage: function (v, _) {
            e.warn(_.message);
          },
          _destroyThumbnail: function () {
            this.thumbnail &&
              (this.thumbnail.destroy(), (this.thumbnail = void 0)),
              (this.thumbnailSet = !1);
          },
          _addLocationView: function () {
            var v = this,
              _ = function () {
                csui.require(
                  ["csui/controls/table/cells/parent/parent.view"],
                  p.bind(function (A) {
                    var B = new A({
                      model: v.options.node,
                      context: v.options.context,
                      nameEdit: !1,
                      iconSize: "contain",
                      el: v.$el.find(v.ui.location),
                    });
                    B.render();
                  }, this)
                );
              };
            if (this.options.node.get("parent_id_expand")) _();
            else {
              var T = this.options.node,
                a = T.get("parent_id"),
                g = T.connector,
                I = r.combine(
                  g.getConnectionUrl().getApiBase("v2"),
                  "/nodes/" + a + "/properties"
                ),
                D = { type: "GET", url: I };
              g.makeAjaxCall(D).done(
                p.bind(function (A) {
                  T.set("parent_id_expand", A.results.data.properties, {
                    silent: !0,
                  }),
                    _();
                }, this)
              );
            }
          },
          _showReserveRow: function () {
            this._updateReserveField();
          },
          _cleanAndInitReserveRow: function () {
            this.ui.reserveInfo.addClass("binf-hidden"),
              this.reserveFieldView.$el.html(),
              this.ui.reserveUser.html();
          },
          _updateReserveField: function () {
            var v = this._isReserved();
            if (v && !this.isReserved) {
              this.ui.reserveInfo.removeClass("binf-hidden");
              var _ = {
                  context: this.options.context,
                  tableView: this,
                  model: this.options.node || this.options.model,
                  reservedByLabel: h.reservedByUnreserve,
                },
                T = this;
              csui.require(
                ["csui/controls/node.state/impl/reservation/reservation.view"],
                function (a) {
                  T.reserveFieldView = new a(_);
                  var g = new y.Region({ el: T.ui.reserverBtn });
                  (T.reserveFieldView.tagName = "span"),
                    g.show(T.reserveFieldView),
                    T.$el
                      .find("li.csui-node-state-reservation")
                      .attr("role", "none")
                      .find("button")
                      .removeAttr("tabindex"),
                    T._getUserField({
                      userid: T.options.node.get("reserved_user_id"),
                      placeholder: T.ui.reserveUser,
                      showUserProfileLink: !0,
                    }),
                    (T.isReserved = !0);
                }
              );
            } else
              !v &&
                this.isReserved &&
                (this.reserveFieldView && this.reserveFieldView.destroy(),
                this._cleanAndInitReserveRow(),
                (this.isReserved = !1));
          },
          _showCreatedByUserName: function () {
            var v = {
              baseElement: this.ui.createdBy,
              userId: this.options.node.get("create_user_id"),
            };
            this._showUserName(v);
          },
          _showUserName: function (v) {
            this._getUserField({
              userid: v.userId,
              placeholder: this.ui.creadyByUser,
              showUserProfileLink: !0,
            }),
              this._getUserField({
                userid: v.userId,
                placeholder: this.ui.createdByPic,
                userWidgetWrapperClass: "",
                showUserWidgetFor: "profilepic",
                showUserProfileLink: !0,
                disableTabForProfilePic: !0,
              });
          },
          _showModifiedByUserName: function () {
            const v = {
              baseElement: this.ui.modifiedBy,
              userId: this.options.node.get("modify_user_id"),
            };
            this._showModifiedUserName(v);
          },
          _showModifiedUserName: function (v) {
            this._getUserField({
              userid: v.userId,
              placeholder: this.ui.modifiedByUser,
              showUserProfileLink: !0,
            }),
              this._getUserField({
                userid: v.userId,
                placeholder: this.ui.modifiedByPic,
                userWidgetWrapperClass: "",
                showUserWidgetFor: "profilepic",
                showUserProfileLink: !0,
                disableTabForProfilePic: !0,
              });
          },
          _getUserField: function (v) {
            csui.require(
              ["esoc/controls/userwidget/userwidget.view"],
              p.bind(function (_) {
                var T = p.extend(
                    {
                      context: this.options.context,
                      showMiniProfile: !0,
                      connector: this.options.node.connector,
                      imgSrc:
                        "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
                    },
                    v
                  ),
                  a = new _(T),
                  g = new y.Region({ el: s(v.placeholder) });
                g.show(a);
              }, this)
            );
          },
          _checkPermissions: function () {
            var v = { signature: "Edit", actionBtnEle: this.ui.editBtn },
              _ = { signature: "Download", actionBtnEle: this.ui.downloadBtn },
              T = { signature: "OpenDocument", actionBtnEle: this.ui.openBtn },
              a = {
                signature: "Properties",
                actionBtnEle: this.ui.propertiesBtn,
              },
              g = { exclude: ["OpenSpecificNodePerspective", "Download"] };
            let I = this,
              D = w.fileActionSettings.filter(function (A) {
                if (
                  (A.Action === "Download" && (I.orderOfDownload = A.order),
                  I.orderOfDownload &&
                    A.Action === "OpenInBrowser" &&
                    I.orderOfDownload < A.order)
                )
                  return !0;
              });
            D && D.length && g.exclude.push("OpenInBrowser"),
              this._checkPermForSpecificAction(T, g),
              this._checkPermForSpecificAction(v),
              this._checkPermForSpecificAction(_),
              this._checkPermForSpecificAction(a);
          },
          _checkPermForOpenAction: function (v) {
            var _ = this.commands.findWhere({ signature: v.signature });
            _.checkPermission(this.options.node).then(function (T) {
              T
                ? v.actionBtnEle.removeClass("binf-hidden")
                : v.actionBtnEle.addClass("binf-hidden");
            });
          },
          _checkPermForSpecificAction: function (v, _ = {}) {
            var T = this.commands.findWhere({ signature: v.signature }),
              a = {
                nodes: new n([this.options.node]),
                container: this.options.node.parent,
                commandData: _,
              },
              g = { context: this.options.context };
            if (!(T && T.enabled(a, g)))
              T &&
                T.get("signature") === "OpenDocument" &&
                this.ui.thumbnailSection.css("cursor", "default"),
                v.actionBtnEle.addClass("binf-hidden");
            else {
              if (T && T.get("signature") === "OpenDocument") {
                var I = this;
                s(this.ui.thumbnailSection).on("click", function (D) {
                  I._handleClickThumbnail(D);
                });
              }
              v.actionBtnEle.removeClass("binf-hidden");
            }
          },
          onKeyInView: function (v) {
            var _ = v || window.event,
              T = _.target || _.srcElement;
            (_.keyCode === 13 || _.keyCode === 32) &&
              (this.$el.find(".title-input").is(_.target) ||
                (_.preventDefault(),
                _.stopPropagation(),
                s(T).trigger("click")));
          },
          onBackButton: function () {
            if (!this.backButtonClicked) {
              var v = this.options,
                _ = v && v.context,
                T = _ && _.viewStateModel;
              T && T.restoreLastFragment(), (this.backButtonClicked = !0);
            }
          },
          _handleClickThumbnail: function (v) {
            v.stopImmediatePropagation(), this._executeCommand("OpenDocument");
          },
          _handleClickButton: function (v) {
            v.stopImmediatePropagation();
            var _ = s(v.target).data("signature");
            this._executeCommand(_);
          },
          _executeCommand: function (v) {
            var _ = this.commands.get(v),
              T = this;
            T.collection = new n([this.options.node]);
            var a = {
                nodes: new n([this.options.node]),
                container: this.options.node,
                originatingView: T,
              },
              g = { context: this.options.context };
            try {
              if (!_) throw new Error('Command "' + v + '" not found.');
              var I = _.execute(a, g);
              c.handleExecutionResults(I, {
                command: _,
                suppressSuccessMessage: a.suppressSuccessMessage,
                suppressFailMessage: a.suppressFailMessage,
              });
            } catch (D) {
              e.warn(
                `Executing the command "{0}" failed.
{1}`,
                _.get("signature"),
                D.message
              ) && console.warn(e.last);
            }
          },
          _navigateToParent: function () {
            var v = this.options.model.get("parent_id");
            v && this._setNextNodeModelFactory(v);
          },
          _setNextNodeModelFactory: function (v) {
            if (this.options.context && v !== void 0) {
              var _ = this.options.context.getModel(C);
              _ &&
                (_.get("id") === v && _.unset("id", { silent: !0 }),
                _.set("id", v));
            }
          },
        });
      return b;
    }
  ),
  csui.define("csui/widgets/version.overview/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/version.overview/impl/nls/root/lang", {
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemProperties: "Properties",
    location: "Location",
    docPreviewImgAlt: "Version Preview",
    name: "Name",
    description: "Description",
    created: "Created",
    createdBy: "Created by",
    type: "Type",
    modified: "Modified",
    ownedBy: "Owned by",
    size: "Size",
    noValue: "No value",
    goBackTitle: "Go back",
    goBackAria: "Go back",
    versionText: "v {0}",
    versionAria: "version {0}",
    lockedBy: "Locked by",
  }),
  csui.define(
    "hbs!csui/widgets/version.overview/impl/version.overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"
           aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 23 },
                      end: { line: 6, column: 37 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTitle") ||
                  (e != null ? i(e, "goBackTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTitle",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 61 },
                    },
                  })
                : t)
            ) +
            `" role="link" tabindex="0"></div>
`
          );
        },
        3: function (s, e, r, l, f) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="lock_info  version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "lockedBy") || (e != null ? i(e, "lockedBy") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "lockedBy",
                    hash: {},
                    loc: {
                      start: { line: 88, column: 63 },
                      end: { line: 88, column: 75 },
                    },
                  })
                : t)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "lockedBy") || (e != null ? i(e, "lockedBy") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "lockedBy",
                    hash: {},
                    loc: {
                      start: { line: 89, column: 12 },
                      end: { line: 89, column: 24 },
                    },
                  })
                : t)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="version-overview-lock">
              <div class="csui-version-overview-lock-btn"></div>
              <div class="csui-version-overview-lock-user"></div>
            </div>
          </div>
        </div>
      </div>
`
          );
        },
        5: function (s, e, r, l, f) {
          return "binf-hidden";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, l, f) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="cs-content-wrapper cs-content-overlay-wrapper">

  <div class="cs-content-header">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "back_button") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 7, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="title-container"></div>
    <div class="overview-page-version-label">
      <span class="csui-overview-version-label" aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "versionAria") ||
                  (e != null ? o(e, "versionAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "versionAria",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 60 },
                      end: { line: 10, column: 75 },
                    },
                  })
                : i)
            ) +
            `">
        ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "versionText") ||
                  (e != null ? o(e, "versionText") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "versionText",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 8 },
                      end: { line: 11, column: 23 },
                    },
                  })
                : i)
            ) +
            `
      </span>
    </div>
  </div>
  <div class="cs-content-container">
    <div class="description-container cs-content">

      <div class="created_by_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-version-overview-created-by-pic"></div>
            <div class="csui-version-overview-created-by-user"></div>
          </div>
        </div>
      </div>

      <div class="modified_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 65 },
                      end: { line: 32, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 84 },
                      end: { line: 32, column: 100 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 33, column: 12 },
                      end: { line: 33, column: 28 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 37 },
                      end: { line: 36, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 61 },
                      end: { line: 36, column: 77 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 79 },
                      end: { line: 36, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
              <span title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 27 },
                      end: { line: 37, column: 42 },
                    },
                  })
                : i)
            ) +
            '">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 44 },
                      end: { line: 37, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="modified_by_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-version-overview-modified-by-pic"></div>
            <div class="csui-version-overview-modified-by-user"></div>
          </div>
        </div>
      </div>

      <div class="type_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="type` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 58, column: 65 },
                      end: { line: 58, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 58, column: 84 },
                      end: { line: 58, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 12 },
                      end: { line: 59, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 62, column: 27 },
                      end: { line: 62, column: 40 },
                    },
                  })
                : i)
            ) +
            '" id="type' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 62, column: 50 },
                      end: { line: 62, column: 60 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 63, column: 32 },
                      end: { line: 63, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 63, column: 48 },
                      end: { line: 63, column: 61 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 64, column: 20 },
                      end: { line: 64, column: 33 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="size_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="size` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 73, column: 65 },
                      end: { line: 73, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 73, column: 84 },
                      end: { line: 73, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 12 },
                      end: { line: 74, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_full_value") ||
                  (e != null ? o(e, "size_full_value") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_full_value",
                    hash: {},
                    loc: {
                      start: { line: 77, column: 27 },
                      end: { line: 77, column: 46 },
                    },
                  })
                : i)
            ) +
            '" id="size' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 77, column: 56 },
                      end: { line: 77, column: 66 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 78, column: 32 },
                      end: { line: 78, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 78, column: 48 },
                      end: { line: 78, column: 62 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 79, column: 20 },
                      end: { line: 79, column: 34 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "locked") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 85, column: 6 },
                  end: { line: 99, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `
      <div class="location-container version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9 location-view"></div>
        </div>
      </div>

      <div class="description_section version-overview-general-information ` +
            ((t = o(r, "unless").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "has_description") : e,
              {
                name: "unless",
                hash: {},
                fn: s.program(5, f, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 110, column: 75 },
                  end: { line: 110, column: 124 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="desc` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 112, column: 65 },
                      end: { line: 112, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 112, column: 84 },
                      end: { line: 112, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 12 },
                      end: { line: 113, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="desc` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 116, column: 37 },
                      end: { line: 116, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 116, column: 61 },
                      end: { line: 116, column: 75 },
                    },
                  })
                : i)
            ) +
            `:
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_value") || (e != null ? o(e, "desc_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 117, column: 12 },
                      end: { line: 117, column: 26 },
                    },
                  })
                : i)
            ) +
            `"><span class="csui-ellipsis-area no-ellipsis"><span><span
                class="cs-field-textarea-data">` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_value") || (e != null ? o(e, "desc_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 118, column: 47 },
                      end: { line: 118, column: 61 },
                    },
                  })
                : i)
            ) +
            `</span></span>
              </span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

    </div>

    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">
      <div class="metadata-tab">
        <div class="thumbnail_section metadata-preview preview-section"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `">
          <img role="link" src="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgSrc") || (e != null ? o(e, "imgSrc") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 132, column: 32 },
                      end: { line: 132, column: 42 },
                    },
                  })
                : i)
            ) +
            '" class="img-doc-preview binf-hidden" alt="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgAlt") || (e != null ? o(e, "imgAlt") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 132, column: 85 },
                      end: { line: 132, column: 95 },
                    },
                  })
                : i)
            ) +
            `" />
        </div>
      </div>
    </div>
  </div>
  <div class="cs-fadeout-container"></div>
  <div class="cs-content-footer">
    <button class="binf-btn primary-btn command-btn open-btn" type="button"
            data-signature="OpenVersionDelegate">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn csui-version-overview-download-btn" type="button"
            data-signature="VersionDownload">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemDownload")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn" type="button"
            data-signature="VersionProperties">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemProperties")
                  : t,
                e
              )
            ) +
            `</button>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_version.overview_impl_version.overview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/version.overview/impl/version.overview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/version.overview/version.overview.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/jquery",
      "csui/utils/log",
      "csui/utils/contexts/factories/version",
      "csui/utils/commands/versions",
      "csui/utils/base",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/models/node.actions",
      "csui/widgets/document.overview/document.overview.view",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/version.overview/impl/nls/lang",
      "hbs!csui/widgets/version.overview/impl/version.overview",
      "css!csui/widgets/version.overview/impl/version.overview",
    ],
    function (x, m, p, y, s, e, r, l, f, t, i, o, n, u, c) {
      "use strict";
      e = e(m.id);
      var d = p.extend(
          { fileActionSettings: [] },
          x.moduleConfig(
            "csui/utils/commands/open.document/delegates/open.document.delegates"
          )
        ),
        h = o.extend({
          className: "cs-form csui-general-form cs-version-overview-wrapper",
          template: c,
          templateHelpers: function () {
            var k = this.options.node.get("file_size"),
              C = this.getFormattedSizeValue(k),
              S = this.options.node.get("version_number_name"),
              w = this.options.node.get("locked"),
              b = o.prototype.templateHelpers.call(this);
            return (
              p.extend(b, {
                size_value: C,
                size_full_value: k,
                versionText: p.str.sformat(u.versionText, S),
                versionAria: p.str.sformat(u.versionAria, S),
                locked: w,
                lockedBy: u.lockedBy,
                back_button: this.back_button,
              }),
              b
            );
          },
          ui: function () {
            return p.extend({}, o.prototype.ui, {
              creadyByUser: ".csui-version-overview-created-by-user",
              createdByPic: ".csui-version-overview-created-by-pic",
              modifiedByUser: ".csui-version-overview-modified-by-user",
              modifiedByPic: ".csui-version-overview-modified-by-pic",
              downloadBtn: ".csui-version-overview-download-btn",
              lockInfo: ".lock_info",
              lockUser: ".csui-version-overview-lock-user",
              lockBtn: ".csui-version-overview-lock-btn",
              locationContainer: ".location-container",
              descriptionSection: ".description_section",
              descriptionSectionBtn: ".description_section button",
              descriptionField:
                ".description_section span.cs-field-textarea-data",
            });
          },
          constructor: function (C) {
            C || (C = {}),
              n.imbue(this),
              C.data || (C.data = {}),
              C.node || (C.node = C.context.getModel(r)),
              (this.options = C);
            var S = C.context && C.context.viewStateModel;
            (this.back_button = S && S.hasRouted()),
              y.ItemView.prototype.constructor.apply(this, arguments),
              (this.commands = l),
              (this.isReloading = !1),
              (this.parentNode = void 0),
              (this.supportOriginatingView = !0),
              this.listenTo(
                this.options.node,
                "change:id change:version_number",
                p.bind(this.handleFetch, this)
              ),
              this.listenTo(
                this.options.node.actions,
                "reset",
                p.bind(this._checkPermissions, this)
              ),
              this.listenTo(
                this.options.node,
                "change",
                p.bind(this.render, this)
              ),
              this.listenTo(
                this.options.node,
                "change:modify_date",
                p.bind(this._updateModifyDateAndTimeStamp, this)
              ),
              this.listenTo(
                this.options.node,
                "change:description",
                p.bind(this._updateDescription, this)
              ),
              this.listenTo(
                this.options.node,
                "delete",
                p.bind(this._navigateToParent, this)
              ),
              this.blockActions();
          },
          onRender: function () {
            this.options.node.fetched &&
              (this._showMetadataItemName(),
              this._showThumbnail(),
              this._addLocationView(),
              this._showCreatedByUserName(),
              this._showModifiedByUserName(),
              this._checkPermissions(),
              this._showLockRow(),
              setTimeout(() => {
                this._currentlyFocusedElement();
              }, 1e3));
          },
          handleFetch: function () {
            this.isReloading ||
              ((this.isReloading = !0),
              (this.thumbnailSet = !1),
              (this.backButtonClicked = !1),
              this.render());
          },
          _showMetadataItemName: function () {
            csui.require(
              [
                "csui/widgets/metadata/impl/header/item.name/metadata.item.name.view",
              ],
              p.bind(function (k) {
                this.metadataItemNameView &&
                  this.metadataItemNameView.destroy(),
                  (this.metadataItemNameView = new k({
                    model: this.options.node,
                    container: this.options.node.parent,
                    containerCollection: this.options.containerCollection,
                    collection: this.options.collection,
                    context: this.options.context,
                    nameSchema: {},
                    commands: this.commands,
                    originatingView: this,
                    showDropdownMenu: !0,
                    showPropertiesCommand: !0,
                    noMetadataNavigation: !0,
                  }));
                var C = this.metadataItemNameView.render();
                y.triggerMethodOn(C, "before:show", C, this),
                  this.ui.titleContainer.append(C.el),
                  y.triggerMethodOn(C, "show", C, this),
                  this._unblockActions(),
                  this.isReloading && (this.isReloading = !1);
              }, this)
            );
          },
          _updateDescription: function () {
            var k = this.options.node.get("description");
            k
              ? (this.ui.descriptionSectionBtn.attr(
                  "aria-label",
                  u.description + ":" + k
                ),
                this.ui.descriptionField.text(k),
                this.ui.descriptionSection.removeClass("binf-hidden"))
              : (this.ui.descriptionSectionBtn.removeAttr("aria-label"),
                this.ui.descriptionField.text(null),
                this.ui.descriptionSection.addClass("binf-hidden"));
          },
          _showThumbnail: function () {
            if (
              (this.isReloading ||
                ((this.thumbnail =
                  this.options.thumbnail || new t({ node: this.options.node })),
                this.listenTo(this.thumbnail, "loadUrl", this._showImage),
                this.listenTo(this.thumbnail, "error", this._showDefaultImage),
                this.listenTo(
                  this,
                  "destroy",
                  p.bind(this._destroyThumbnail, this)
                )),
              !this.thumbnailSet)
            ) {
              var k = this;
              (this.thumbnailSet = !0),
                this.thumbnail.hasOwnProperty("imgUrl") && this.thumbnail.imgUrl
                  ? this._showImage()
                  : this.thumbnail.loadUrl();
            }
          },
          _showImage: function () {
            this.$el.addClass("cs-version-overview-wrapper-with-thumbnail"),
              this.ui.thumbnailContainer.removeClass("binf-hidden"),
              this.trigger("thumbnail:show:image");
            var k = this,
              C = this.ui.thumbnailImg;
            C.attr("src", this.thumbnail.imgUrl),
              C.prop("tabindex", "0"),
              C.one("load", function (S) {
                S.target.clientHeight >= S.target.clientWidth
                  ? C.addClass("cs-form-img-vertical")
                  : C.addClass("cs-form-img-horizontal"),
                  C.addClass("cs-form-img-border"),
                  C.removeClass("binf-hidden");
                var w = s.Event("tab:content:render");
                k.$el.trigger(w);
              });
          },
          _addLocationView: function () {
            var k = this,
              C = function () {
                csui.require(
                  ["csui/controls/table/cells/parent/parent.view"],
                  p.bind(function (S) {
                    if (
                      ((k.parentContainer = k.ancestors.at(
                        k.ancestors.length - 2
                      )),
                      k.parentContainer && k.parentContainer.attributes)
                    ) {
                      var w = new S({
                        parent: k.parentContainer.attributes,
                        context: k.options.context,
                        nameEdit: !1,
                        iconSize: "contain",
                        el: k.$el.find(k.ui.location),
                        connector: k.options.node.connector,
                      });
                      w.render();
                    }
                  }, this)
                );
              };
            if (
              ((this.ancestors =
                this.options.context.getCollection("ancestors")),
              !this.ancestors)
            ) {
              this._hideLocationField();
              return;
            }
            this.listenTo(this.ancestors, "sync", function () {
              C();
            }),
              this.listenTo(this.ancestors, "error", this._hideLocationField),
              C();
          },
          _hideLocationField: function () {
            this.ui.locationContainer.addClass("binf-hidden");
          },
          _showCreatedByUserName: function () {
            var k = {
              baseElement: this.ui.createdBy,
              userId: this.options.node.get("owner_id"),
            };
            this._showUserName(k);
          },
          _showModifiedByUserName: function () {
            const k = {
              baseElement: this.ui.modifiedBy,
              userId: this.options.node?.get("id_expand")?.modify_user_id,
            };
            this._showModifiedUserName(k);
          },
          _checkPermissions: function () {
            var k = {
                signature: "VersionDownload",
                actionBtnEle: this.ui.downloadBtn,
              },
              C = {
                signature: "OpenVersionDelegate",
                actionBtnEle: this.ui.openBtn,
              },
              S = { exclude: ["OpenVersionPerspective", "Download"] };
            let w = this,
              b = d.fileActionSettings.filter(function (v) {
                if (
                  (v.Action === "Download" && (w.orderOfDownload = v.order),
                  w.orderOfDownload &&
                    v.Action === "OpenInBrowser" &&
                    w.orderOfDownload < v.order)
                )
                  return !0;
              });
            b && b.length && S.exclude.push("OpenInBrowser"),
              this._checkPermForSpecificAction(C, S),
              this._checkPermForSpecificAction(k);
          },
          getFormattedSizeValue: function (k) {
            return f.formatFriendlyFileSize(k);
          },
          _showLockRow: function () {
            this._updatelockField();
          },
          _updatelockField: function () {
            var k = this.options.node.get("locked");
            if (k && !this.isLocked) {
              this.ui.lockInfo.removeClass("binf-hidden");
              var C = {
                  context: this.options.context,
                  tableView: this,
                  versionOverview: !0,
                  model: this.options.node || this.options.model,
                },
                S = this;
              csui.require(
                ["csui/controls/node.state/impl/locked/locked.view"],
                function (w) {
                  S.lockFieldView = new w(p.extend(C));
                  var b = new y.Region({ el: S.ui.lockBtn });
                  b.show(S.lockFieldView),
                    S.$el
                      .find("li.csui-node-state-locked")
                      .attr("role", "none")
                      .find("button")
                      .removeAttr("tabindex"),
                    S._getUserField({
                      userid: S.options.node.get("locked_user_id"),
                      placeholder: S.ui.lockUser,
                      showUserProfileLink: !0,
                    }),
                    (S.isLocked = !0);
                }
              );
            } else
              !k &&
                this.isLocked &&
                (this.lockFieldView && this.lockFieldView.destroy(),
                this._cleanAndInitLockRow(),
                (this.isLocked = !1));
          },
          _cleanAndInitLockRow: function () {
            this.ui.lockInfo.addClass("binf-hidden"),
              this.lockFieldView.$el.html(),
              this.ui.lockUser.html();
          },
          _handleClickThumbnail: function (k) {
            k.stopImmediatePropagation(),
              this._executeCommand("OpenVersionDelegate");
          },
          _navigateToParent: function () {
            var k =
              this.parentContainer.get("id") ||
              (this.options.node.get("id_expand") &&
                this.options.node.get("id_expand").parent_id);
            k && this._setNextNodeModelFactory(k);
          },
        });
      return h;
    }
  ),
  csui.define("json!csui/widgets/error.global/error.global.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "fullpage",
    schema: {
      type: "object",
      properties: {
        serverError: {
          title: "{{serverErrorTitle}}",
          description: "{{serverErrorDescription}}",
          type: "string",
        },
      },
    },
    options: {},
  }),
  csui.define("json!csui/widgets/favorites/favorites.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{title}}",
    description: "{{description}}",
    kind: "tile",
    schema: { type: "object", properties: {} },
    actions: [
      {
        toolItems: "csui/widgets/favorites2.table/toolbaritems",
        toolItemMasks: "csui/widgets/favorites2.table/toolbaritems.masks",
        toolbars: [
          {
            id: "tableHeaderToolbar",
            title: "{{tableHeaderToolbarTitle}}",
            description: "{{tableHeaderToolbarDescription}}",
          },
          {
            id: "inlineActionbar",
            title: "{{inlineActionbarTitle}}",
            description: "{{inlineActionbarDescription}}",
          },
        ],
      },
    ],
  }),
  csui.define("json!csui/widgets/placeholder/placeholder.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    supportedKinds: ["tile", "header", "fullpage"],
    schema: {
      type: "object",
      properties: {
        label: {
          title: "{{labelTitle}}",
          description: "{{labelDescription}}",
          type: "string",
        },
        color: {
          title: "{{foregroundColorTitle}}",
          description: "{{foregroundColorDescription}}",
          type: "string",
        },
        bgcolor: {
          title: "{{backgroundColorTitle}}",
          description: "{{backgroundColorDescription}}",
          type: "string",
        },
      },
    },
  }),
  csui.define(
    "json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{title}}",
      description: "{{description}}",
      kind: "tile",
      schema: { type: "object", properties: {} },
      actions: [
        {
          toolItems: "csui/widgets/recentlyaccessedtable/toolbaritems",
          toolItemMasks:
            "csui/widgets/recentlyaccessedtable/toolbaritems.masks",
          toolbars: [
            {
              id: "tableHeaderToolbar",
              title: "{{tableHeaderToolbarTitle}}",
              description: "{{tableHeaderToolbarDescription}}",
            },
            {
              id: "inlineActionbar",
              title: "{{inlineActionbarTitle}}",
              description: "{{inlineActionbarDescription}}",
            },
          ],
        },
      ],
    }
  ),
  csui.define("json!csui/widgets/shortcut/shortcut.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    deprecated: !0,
    useInstead: "csui/widgets/shortcuts",
    schema: {
      type: "object",
      properties: {
        id: {
          title: "{{idTitle}}",
          description: "{{idDescription}}",
          type: "integer",
        },
        type: {
          title: "{{typeTitle}}",
          description: "{{typeDescription}}",
          type: "integer",
          enum: [141, 142, 133],
          default: 141,
        },
        background: {
          title: "{{backgroundTitle}}",
          description: "{{backgroundDescription}}",
          type: "string",
          enum: [
            "cs-tile-background1",
            "cs-tile-background2",
            "cs-tile-background3",
          ],
        },
        displayName: { title: "{{displayNameTitle}}", type: "string" },
      },
      oneOf: [{ required: ["id"] }, { required: ["type"] }],
    },
    options: {
      fields: {
        id: {
          type: "otcs_node_picker",
          type_control: { parameters: { select_types: [] } },
        },
        type: {
          type: "select",
          optionLabels: [
            "{{typeEnterpriseVolume}}",
            "{{typePersonalVolume}}",
            "{{typeCategoryVolume}}",
          ],
        },
        background: {
          type: "select",
          optionLabels: [
            "{{backgroundGrey}}",
            "{{backgroundGreen}}",
            "{{backgroundOrange}}",
          ],
        },
      },
    },
  }),
  csui.define("json!csui/widgets/shortcuts/shortcuts.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    selfConfigurable: !0,
    schema: {
      type: "object",
      properties: {
        shortcutTheme: {
          title: "{{shortcutThemeTitle}}",
          description: "{{shortcutThemeDescription}}",
          type: "string",
          enum: [
            "csui-shortcut-theme-stone1",
            "csui-shortcut-theme-stone2",
            "csui-shortcut-theme-teal1",
            "csui-shortcut-theme-teal2",
            "csui-shortcut-theme-pink1",
            "csui-shortcut-theme-pink2",
            "csui-shortcut-theme-indigo1",
            "csui-shortcut-theme-indigo2",
          ],
          default: "csui-shortcut-theme-stone1",
        },
        shortcutItems: {
          title: "{{shortcutItemsTitle}}",
          description: "{{shortcutItemsDescription}}",
          type: "array",
          minItems: 1,
          maxItems: 4,
          items: {
            type: "object",
            properties: {
              id: {
                title: "{{idTitle}}",
                description: "{{idDescription}}",
                type: "integer",
              },
              type: {
                title: "{{typeTitle}}",
                description: "{{typeDescription}}",
                type: "integer",
                enum: [141, 142, 133],
              },
              displayName: { title: "{{displayNameTitle}}", type: "string" },
              customBackgroundImage: {
                title: "{{customBackgroundImageTitle}}",
                description: "{{customBackgroundImageDescription}}",
                type: "integer",
              },
              customBackgroundColor: {
                title: "{{customBackgroundColorTitle}}",
                description: "{{customBackgroundColorDescription}}",
                type: "string",
                enum: [
                  "",
                  "Aqua",
                  "Aquamarine",
                  "Blue",
                  "BlueViolet",
                  "Brown",
                  "BurlyWood",
                  "CadetBlue",
                  "Chartreuse",
                  "Chocolate",
                  "Coral",
                  "CornflowerBlue",
                  "Crimson",
                  "DarkBlue",
                  "DarkCyan",
                  "DarkGoldenRod",
                  "DarkGray",
                  "DarkGreen",
                  "DarkKhaki",
                  "DarkMagenta",
                  "DarkOliveGreen",
                  "DarkOrange",
                  "DarkOrchid",
                  "DarkRed",
                  "DarkSalmon",
                  "DarkSeaGreen",
                  "DarkSlateBlue",
                  "DarkSlateGray",
                  "DarkTurquoise",
                  "DarkViolet",
                  "DeepPink",
                  "DeepSkyBlue",
                  "DimGray",
                  "DodgerBlue",
                  "FireBrick",
                  "ForestGreen",
                  "Fuchsia",
                  "Gainsboro",
                  "Gold",
                  "GoldenRod",
                  "Gray",
                  "Green",
                  "GreenYellow",
                  "HotPink",
                  "IndianRed",
                  "Indigo",
                  "Khaki",
                  "LawnGreen",
                  "LightBlue",
                  "LightCoral",
                  "LightGray",
                  "LightGreen",
                  "LightPink",
                  "LightSalmon",
                  "LightSeaGreen",
                  "LightSkyBlue",
                  "LightSlateGray",
                  "LightSteelBlue",
                  "Lime",
                  "LimeGreen",
                  "Maroon",
                  "MediumAquaMarine",
                  "MediumBlue",
                  "MediumOrchid",
                  "MediumPurple",
                  "MediumSeaGreen",
                  "MediumSlateBlue",
                  "MediumSpringGreen",
                  "MediumTurquoise",
                  "MediumVioletRed",
                  "MidnightBlue",
                  "Moccasin",
                  "NavajoWhite",
                  "Navy",
                  "Olive",
                  "OliveDrab",
                  "Orange",
                  "OrangeRed",
                  "Orchid",
                  "PaleGoldenRod",
                  "PaleGreen",
                  "PaleTurquoise",
                  "PaleVioletRed",
                  "PeachPuff",
                  "Peru",
                  "Pink",
                  "Plum",
                  "PowderBlue",
                  "Purple",
                  "RebeccaPurple",
                  "Red",
                  "RosyBrown",
                  "RoyalBlue",
                  "SaddleBrown",
                  "Salmon",
                  "SandyBrown",
                  "SeaGreen",
                  "Sienna",
                  "Silver",
                  "SkyBlue",
                  "SlateBlue",
                  "SlateGray",
                  "SpringGreen",
                  "SteelBlue",
                  "Tan",
                  "Teal",
                  "Thistle",
                  "Tomato",
                  "Turquoise",
                  "Violet",
                  "Wheat",
                  "Yellow",
                  "YellowGreen",
                ],
                default: "",
              },
            },
            oneOf: [{ required: ["id"] }, { required: ["type"] }],
          },
        },
      },
    },
    options: {
      fields: {
        shortcutTheme: {
          type: "select",
          optionLabels: [
            "{{shortcutThemeStone1}}",
            "{{shortcutThemeStone2}}",
            "{{shortcutThemeTeal1}}",
            "{{shortcutThemeTeal2}}",
            "{{shortcutThemePink1}}",
            "{{shortcutThemePink2}}",
            "{{shortcutThemeIndigo1}}",
            "{{shortcutThemeIndigo2}}",
          ],
        },
        shortcutItems: {
          items: {
            fields: {
              id: {
                type: "otcs_node_picker",
                type_control: { parameters: { select_types: [] } },
              },
              type: {
                type: "select",
                optionLabels: [
                  "{{typeEnterpriseVolume}}",
                  "{{typePersonalVolume}}",
                  "{{typeCategoryVolume}}",
                ],
              },
              customBackgroundImage: {
                type: "otcs_node_picker",
                hidden: !0,
                type_control: {
                  parameters: {
                    select_types: [1305],
                    startLocations: [
                      "csui/dialogs/node.picker/start.locations/support.assets.volume",
                    ],
                    startLocation:
                      "csui/dialogs/node.picker/start.locations/support.assets.volume",
                  },
                },
              },
              customBackgroundColor: {
                type: "select",
                optionLabels: [
                  "{{none}}",
                  "Aqua",
                  "Aquamarine",
                  "Blue",
                  "BlueViolet",
                  "Brown",
                  "BurlyWood",
                  "CadetBlue",
                  "Chartreuse",
                  "Chocolate",
                  "Coral",
                  "CornflowerBlue",
                  "Crimson",
                  "DarkBlue",
                  "DarkCyan",
                  "DarkGoldenRod",
                  "DarkGray",
                  "DarkGreen",
                  "DarkKhaki",
                  "DarkMagenta",
                  "DarkOliveGreen",
                  "DarkOrange",
                  "DarkOrchid",
                  "DarkRed",
                  "DarkSalmon",
                  "DarkSeaGreen",
                  "DarkSlateBlue",
                  "DarkSlateGray",
                  "DarkTurquoise",
                  "DarkViolet",
                  "DeepPink",
                  "DeepSkyBlue",
                  "DimGray",
                  "DodgerBlue",
                  "FireBrick",
                  "ForestGreen",
                  "Fuchsia",
                  "Gainsboro",
                  "Gold",
                  "GoldenRod",
                  "Gray",
                  "Green",
                  "GreenYellow",
                  "HotPink",
                  "IndianRed",
                  "Indigo",
                  "Khaki",
                  "LawnGreen",
                  "LightBlue",
                  "LightCoral",
                  "LightGray",
                  "LightGreen",
                  "LightPink",
                  "LightSalmon",
                  "LightSeaGreen",
                  "LightSkyBlue",
                  "LightSlateGray",
                  "LightSteelBlue",
                  "Lime",
                  "LimeGreen",
                  "Maroon",
                  "MediumAquaMarine",
                  "MediumBlue",
                  "MediumOrchid",
                  "MediumPurple",
                  "MediumSeaGreen",
                  "MediumSlateBlue",
                  "MediumSpringGreen",
                  "MediumTurquoise",
                  "MediumVioletRed",
                  "MidnightBlue",
                  "Moccasin",
                  "NavajoWhite",
                  "Navy",
                  "Olive",
                  "OliveDrab",
                  "Orange",
                  "OrangeRed",
                  "Orchid",
                  "PaleGoldenRod",
                  "PaleGreen",
                  "PaleTurquoise",
                  "PaleVioletRed",
                  "PeachPuff",
                  "Peru",
                  "Pink",
                  "Plum",
                  "PowderBlue",
                  "Purple",
                  "RebeccaPurple",
                  "Red",
                  "RosyBrown",
                  "RoyalBlue",
                  "SaddleBrown",
                  "Salmon",
                  "SandyBrown",
                  "SeaGreen",
                  "Sienna",
                  "Silver",
                  "SkyBlue",
                  "SlateBlue",
                  "SlateGray",
                  "SpringGreen",
                  "SteelBlue",
                  "Tan",
                  "Teal",
                  "Thistle",
                  "Tomato",
                  "Turquoise",
                  "Violet",
                  "Wheat",
                  "Yellow",
                  "YellowGreen",
                ],
              },
            },
          },
        },
      },
    },
  }),
  csui.define(
    "json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{widgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "header",
      schema: {
        type: "object",
        properties: {
          message: {
            title: "{{messageTitle}}",
            description: "{{messageDescription}}",
            type: "string",
          },
          videoPoster: {
            title: "{{videoPosterTitle}}",
            description: "{{videoPosterDescription}}",
            type: "string",
          },
          videoSrc: {
            title: "{{videoSourceTitle}}",
            description: "{{videoSourceDescription}}",
            type: "string",
          },
        },
      },
    }
  ),
  csui.define(
    "json!csui/widgets/recycle.items.table/recycle.items.table.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{title}}",
      description: "{{description}}",
      kind: "tile",
      schema: { type: "object", properties: {} },
      actions: [
        {
          toolItems: "csui/widgets/recycle.items.table/recycle.toolbaritems",
          toolItemMasks:
            "csui/widgets/recycle.items.table/recycle.toolbaritems.masks",
          toolbars: [
            {
              id: "tableHeaderToolbar",
              title: "{{tableHeaderToolbarTitle}}",
              description: "{{tableHeaderToolbarDescription}}",
            },
            {
              id: "inlineActionbar",
              title: "{{inlineActionbarTitle}}",
              description: "{{inlineActionbarDescription}}",
            },
          ],
        },
      ],
    }
  ),
  csui.define("json!csui/widgets/html.editor/html.editor.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{title}}",
    description: "{{description}}",
    kind: "tile",
    supportedKinds: ["tile", "header", "heroTile", "fullpage"],
    schema: {
      type: "object",
      properties: {
        titlefield: {
          title: "{{titleLabel}}",
          description: "{{titleDesc}}",
          type: "string",
          default: "",
        },
        wikicontainerid: {
          title: "{{wikiContainerID}}",
          description: "{{wikiContainerIDDesc}}",
          type: "integer",
        },
        wikitemplateid: {
          title: "{{wikiTemplateID}}",
          description: "{{wikiTemplateIDDesc}}",
          type: "integer",
        },
        wikiid: {
          title: "{{wikiContainerID}}",
          description: "{{wikiContainerIDDesc}}",
          type: "integer",
        },
        wikipageid: {
          title: "{{wikiTemplateID}}",
          description: "{{wikiTemplateIDDesc}}",
          type: "integer",
        },
      },
    },
    options: {
      fields: {
        wikicontainerid: {
          type: "otcs_node_picker",
          type_control: {
            parameters: {
              select_types: [5573],
              startLocations: [
                "csui/dialogs/node.picker/start.locations/enterprise.volume",
                "csui/dialogs/node.picker/start.locations/personal.volume",
                "csui/dialogs/node.picker/start.locations/favorites",
                "csui/dialogs/node.picker/start.locations/recent.containers",
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              ],
            },
          },
        },
        wikitemplateid: {
          type: "otcs_node_picker",
          type_control: {
            parameters: {
              select_types: [5574],
              startLocation:
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              startLocations: [
                "csui/dialogs/node.picker/start.locations/enterprise.volume",
                "csui/dialogs/node.picker/start.locations/personal.volume",
                "csui/dialogs/node.picker/start.locations/favorites",
                "csui/dialogs/node.picker/start.locations/recent.containers",
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              ],
            },
          },
        },
        wikipageid: {
          type: "otcs_node_picker",
          hidden: !0,
          type_control: { parameters: { select_types: [5574] } },
        },
        wikiid: {
          type: "otcs_node_picker",
          hidden: !0,
          type_control: { parameters: { select_types: [5573] } },
        },
        width: {
          type: "select",
          optionLabels: ["{{default}}", "{{full}}", "{{half}}", "{{quarter}}"],
        },
      },
    },
    callback: "wiki/callbacks/wikiHookCallback",
  }),
  csui.define(
    "json!csui/widgets/document.overview/document.overview.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{widgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "fullpage",
      schema: {
        type: "object",
        properties: {
          id: {
            title: "{{idTitle}}",
            description: "{{idDescription}}",
            type: "integer",
          },
        },
        required: ["id"],
      },
      options: {
        fields: {
          id: {
            type: "otcs_node_picker",
            type_control: { parameters: { select_types: [144] } },
          },
        },
      },
    }
  ),
  csui.define("csui/widgets/favorites/impl/nls/favorites.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/favorites/impl/nls/root/favorites.manifest", {
    title: "Favorites",
    description: "Shows favorite objects of the current user.",
    tableHeaderToolbarTitle: "Table Header Toolbar",
    tableHeaderToolbarDescription:
      "Toolbar, which is activated in the table header, once a table row is selected.",
    inlineActionbarTitle: "Inline Action Bar",
    inlineActionbarDescription:
      "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
  }),
  csui.define("csui/widgets/placeholder/impl/nls/placeholder.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/placeholder/impl/nls/root/placeholder.manifest", {
    widgetTitle: "Placeholder",
    widgetDescription:
      "Shows a colorful tile taking the space instead of a real widget.",
    labelTitle: "Label",
    labelDescription: "Label of the tile",
    foregroundColorTitle: "Foreground color",
    foregroundColorDescription: "Color for the label of the tile",
    backgroundColorTitle: "Background color",
    backgroundColorDescription: "Color for the background of the tile",
  }),
  csui.define(
    "csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/impl/nls/root/recentlyaccessed.manifest",
    {
      title: "Recently Accessed",
      description: "Shows documents accessed recently by the current user.",
      tableHeaderToolbarTitle: "Table Header Toolbar",
      tableHeaderToolbarDescription:
        "Toolbar, which is activated in the table header, once a table row is selected.",
      inlineActionbarTitle: "Inline Action Bar",
      inlineActionbarDescription:
        "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
    }
  ),
  csui.define("csui/widgets/shortcut/impl/nls/shortcut.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcut/impl/nls/root/shortcut.manifest", {
    widgetTitle: "Single Shortcut",
    widgetDescription:
      "Tile representing a hyperlink to an object; it navigates to its page when clicked",
    idTitle: "Target object",
    idDescription: "An object to open by this shortcut",
    typeTitle: "Volume",
    typeDescription:
      "Sub-type number of a global volume to open by this shortcut if no object has been selected",
    backgroundTitle: "Background",
    backgroundDescription: "Styling of the background below the shortcut tile",
    typeEnterpriseVolume: "Enterprise",
    typePersonalVolume: "Personal",
    typeCategoryVolume: "Categories",
    displayNameTitle: "Display name",
    backgroundGrey: "Grey",
    backgroundGreen: "Green",
    backgroundOrange: "Orange",
  }),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/nls/root/welcome.placeholder.manifest",
    {
      widgetTitle: "Welcome Header",
      widgetDescription:
        "Shows a wide widget with initial information for the user home page.",
      messageTitle: "Display message",
      messageDescription: "Message to be displayed at the bottom of the tile",
      videoPosterTitle: "Video thumbnail",
      videoPosterDescription:
        "Web address of the poster to show when the video is not playing",
      videoSourceTitle: "Video location",
      videoSourceDescription: "Web address of the video to play",
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/impl/nls/recycle.items.table.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/impl/nls/root/recycle.items.table.manifest",
    {
      title: "Recycle bin",
      description: "Shows items deleted by the current user.",
      tableHeaderToolbarTitle: "Table Header Toolbar",
      tableHeaderToolbarDescription:
        "Toolbar, which is activated in the table header, once a table row is selected.",
      inlineActionbarTitle: "Inline Action Bar",
      inlineActionbarDescription:
        "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
    }
  ),
  csui.define("csui/widgets/html.editor/impl/nls/html.editor.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/html.editor/impl/nls/root/html.editor.manifest", {
    title: "HTML Tile",
    description:
      "Returns the HTML output of an object and inserts it into a tile.",
    widthLabel: "Width",
    widthDesc: "The maximum width on the largest screen-size.",
    default: "Default",
    full: "Full",
    half: "Half",
    quarter: "Quarter",
    titleLabel: "Title",
    titleDesc: "Title for the tile",
    objIdLabel: "Object ID",
    objIdDesc:
      "Object ID for which we have to render and allow users to edit rich text content.",
    wikiContainerID: "Target wiki for HTML Content (optional)",
    wikiTemplateID: "Template wiki page (optional)",
    wikiContainerIDDesc:
      "If not specified, a target wiki will be created automatically in perspective asset volume",
    wikiTemplateIDDesc:
      "If not specified, a target wiki template will be pointed automatically from perspective asset folder",
  }),
  csui.define(
    "csui/widgets/document.overview/impl/nls/document.overview.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/document.overview/impl/nls/root/document.overview.manifest",
    {
      widgetTitle: "Document Overview",
      widgetDescription:
        "Shows basic information about a document and offers the most often actions for it.",
      idTitle: "Document",
      idDescription: "A document to show the overview for",
    }
  ),
  csui.define(
    "bundles/csui-app",
    [
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/behaviors/item.state/item.state.behavior",
      "csui/behaviors/item.state/item.state.view",
      "csui/behaviors/limiting/limiting.behavior",
      "csui/behaviors/resizable/resizable.behavior",
      "csui/controls/tile/behaviors/expanding.behavior",
      "csui/controls/tile/tile.view",
      "csui/controls/iconpreload/icon.preload.view",
      "csui/controls/rich.text.editor/rich.text.editor",
      "csui/controls/selected.count/selected.count.view",
      "csui/controls/selected.count/selected.count.control.view",
      "csui/lib/jquery.simulate",
      "csui/lib/othelp",
      "csui/utils/froala/bootstrap",
      "csui/pages/start/start.page.view",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/widgets/navigation.header/controls/home/home.view",
      "csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view",
      "csui/widgets/navigation.header/controls/search/search.view",
      "csui/widgets/navigation.header/controls/favorites/favorites.view",
      "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
      "csui/widgets/navigation.header/navigation.header.controls",
      "csui/controls/app.header/app.header.controls/logo/logo.view",
      "csui/controls/app.header/app.header.controls/search.box/search.box.view",
      "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
      "csui/controls/app.header/app.header.controls/favorites/favorites.view",
      "csui/controls/app.header/app.header.controls/help/help.view",
      "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
      "csui/controls/app.header/app.header.controls/csui.app.header.controls",
      "csui/controls/app.header/burger.menu/burger.menu",
      "csui/utils/proxysettings/proxy.dynamic.menu",
      "csui/utils/usersettings/cm.dynamic.menu",
      "csui/perspective.manage/sidebar/pman.sidebar.container.view",
      "csui/perspective.manage/sidebar/layouts",
      "csui/perspective.manage/sidebar/widgets",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/tabletoolbar/impl/nls/localized.strings",
      "json!csui/utils/contexts/perspective/impl/perspectives/error.global.json",
      "csui/widgets/error.global/error.global.view",
      "csui/widgets/favorites/favorites.view",
      "csui/widgets/favorites/tileview.toolbaritems",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/widgets/placeholder/placeholder.view",
      "csui/widgets/recentlyaccessed/recentlyaccessed.columns",
      "csui/widgets/recentlyaccessed/recentlyaccessed.view",
      "csui/widgets/recentlyaccessed/tileview.toolbaritems",
      "csui/widgets/search.box/search.box.view",
      "csui/widgets/shortcut/shortcut.view",
      "csui/widgets/shortcuts/shortcuts.view",
      "csui/widgets/welcome.placeholder/welcome.placeholder.view",
      "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
      "csui/widgets/html.editor/html.editor.view",
      "csui/widgets/document.overview/document.overview.view",
      "csui/widgets/version.overview/version.overview.view",
      "json!csui/widgets/error.global/error.global.manifest.json",
      "json!csui/widgets/favorites/favorites.manifest.json",
      "json!csui/widgets/placeholder/placeholder.manifest.json",
      "json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json",
      "json!csui/widgets/shortcut/shortcut.manifest.json",
      "json!csui/widgets/shortcuts/shortcuts.manifest.json",
      "json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json",
      "json!csui/widgets/recycle.items.table/recycle.items.table.manifest.json",
      "json!csui/widgets/html.editor/html.editor.manifest.json",
      "json!csui/widgets/document.overview/document.overview.manifest.json",
      "i18n!csui/widgets/favorites/impl/nls/favorites.manifest",
      "i18n!csui/widgets/placeholder/impl/nls/placeholder.manifest",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest",
      "i18n!csui/widgets/shortcut/impl/nls/shortcut.manifest",
      "i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest",
      "i18n!csui/widgets/recycle.items.table/impl/nls/recycle.items.table.manifest",
      "i18n!csui/widgets/html.editor/impl/nls/html.editor.manifest",
      "i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest",
      "i18n!csui/widgets/favorites/impl/nls/lang",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/lang",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
    ],
    {}
  ),
  csui.require(["require", "css"], function (x, m) {
    m.styleLoad(x, "csui/bundles/csui-app", !0);
  });
/**
 * @preserve
 * jQuery Simulate v0.0.1 - simulate browser mouse and keyboard events
 * https://github.com/jquery/jquery-simulate
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun Dec 9 12:15:33 2012 -0500
 */
/**
 * @preserve
 * CryptoJS 3.2.1
 * Copyright (c) 2009-2013 Jeff Mott
 * Copyright (c) 2013-2016 Evan Vosberg
 * https://github.com/brix/crypto-js
 * Available under MIT license
 */
//# sourceMappingURL=csui-app.js.map

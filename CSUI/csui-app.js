csui.define(
  "csui/behaviors/expanding/expanding.behavior",
  [
    "require",
    "csui/lib/underscore",
    "csui/lib/backbone",
    "csui/lib/marionette",
  ],
  function (x, m, p, y) {
    var s = y.Behavior.extend({
      constructor: function (d, t) {
        y.Behavior.prototype.constructor.apply(this, arguments);
        var i = m.bind(this._destroyExpandedView, this, !1),
          o = m.bind(this._destroyExpandedView, this, !0),
          n = t.options && t.options.context;
        (this.boundHistoryBack = m.bind(this.historyBack, this)),
          this.listenTo(this, "before:destroy", i),
          n &&
            this.listenTo(n, "request", i).listenTo(
              n,
              "request:perspective",
              i
            );
      },
      onExpand: function () {
        if (!this.expanded) {
          this.expanded = !0;
          var a = this,
            d = this.view.completeCollection
              ? this.view.completeCollection.clone()
              : this.view.collection.clone();
          this.view.currentFilter !== void 0 &&
            d.setFilter(this.view.currentFilter, { fetch: !1 }),
            this.view.isSearchOpen() && this.view.searchClicked();
          var t = a.getOption("expandedView"),
            i = t;
          m.isString(t) !== !0 &&
            (i = t.prototype instanceof p.View ? t : t.call(a.view));
          var o = ["csui/controls/dialog/dialog.view"];
          m.isString(i) && o.push(i),
            x(
              o,
              function (n) {
                m.isString(i) && (i = arguments[1]);
                var u = e(a.options, "expandedViewOptions", a.view);
                (a.expandedView = new i(
                  m.extend(
                    {
                      context: a.view.options.context,
                      collection: d,
                      orderBy: e(a.options, "orderBy", a.view),
                      filterBy: a.view.currentFilter,
                      limited: !1,
                      isExpandedView: !0,
                    },
                    u
                  )
                )),
                  (a.dialog = new n({
                    iconLeft:
                      e(a.options, "titleBarIcon", a.view) ||
                      e(a.view.options, "titleBarIcon", a.view),
                    iconNameLeft:
                      e(a.options, "titleBarIconName", a.view) ||
                      e(a.view.options, "titleBarIconName", a.view),
                    actionIconLeft:
                      e(a.options, "actionTitleBarIcon", a.view) ||
                      e(a.view.options, "actionTitleBarIcon", a.view),
                    actionIconNameLeft:
                      e(a.options, "actionTitleBarIconName", a.view) ||
                      e(a.view.options, "actionTitleBarIconName", a.view),
                    imageLeftUrl: e(a.options, "titleBarImageUrl", a.view),
                    imageLeftClass: e(a.options, "titleBarImageClass", a.view),
                    title: e(a.options, "dialogTitle", a.view),
                    iconRight: e(a.options, "dialogTitleIconRight", a.view),
                    iconNameRight: e(
                      a.options,
                      "dialogTitleIconNameRight",
                      a.view
                    ),
                    className: r(a.options, "dialogClassName", a.view),
                    largeSize: !0,
                    view: a.expandedView,
                    headerView: e(a.options, "headerView", a.view),
                    notabablesBehavior: e(
                      a.options,
                      "notabablesBehavior",
                      a.view
                    ),
                  })),
                  a.bindHistoryBack(),
                  a
                    .listenTo(a.dialog, "before:hide", a._expandOtherView)
                    .listenTo(a.dialog, "destroy", a._enableExpandingAgain),
                  a._expandOtherView(!1),
                  a.dialog.show();
              },
              function (n) {
                a.expanded = !1;
              }
            );
        }
      },
      bindHistoryBack: function () {
        window.addEventListener("popstate", this.boundHistoryBack);
      },
      historyBack: function (a) {
        this.dialog && this.dialog.destroy();
      },
      _destroyExpandedView: function (a) {
        if (this.dialog) {
          var d = a ? "kill" : "destroy";
          this.dialog[d](),
            (this.dialog = void 0),
            window.removeEventListener("popstate", this.boundHistoryBack);
        }
      },
      _expandOtherView: function (a) {
        this.options.collapsedView &&
          this.options.collapsedView.triggerMethod(
            a === !1 ? "go:away" : "go:back"
          );
      },
      _enableExpandingAgain: function () {
        if (((this.expanded = !1), this.view.tabableRegionBehavior)) {
          var a = this.view.tabableRegionBehavior,
            d = this.view.ui.tileExpand;
          a.currentlyFocusedElement &&
            a.currentlyFocusedElement.prop("tabindex", -1),
            d && d.prop("tabindex", 0),
            d.trigger("focus"),
            a.setInitialTabIndex(),
            (this.view.currentTabPosition = 2);
        }
      },
    });
    function e(a, d, t) {
      if (a != null) {
        var i = a[d];
        return m.isFunction(i) ? a[d].call(t) : i;
      }
    }
    function r(a, d, t) {
      var i = e(a, d, t);
      return i ? (i += " csui-expanded") : (i = "csui-expanded"), i;
    }
    return s;
  }
),
  csui.define("csui/behaviors/item.error/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/behaviors/item.error/impl/nls/root/lang", {
    itemCannotBeAccessed: "Item cannot be accessed.",
  }),
  csui.define(
    "csui/behaviors/item.error/item.error.behavior",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/error/error.view",
      "i18n!csui/behaviors/item.error/impl/nls/lang",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.Behavior.extend({
        constructor: function (d, t) {
          p.Behavior.prototype.constructor.apply(this, arguments),
            (this.view = t);
          var i = r.call(this, "model") || t.model || t.options.model;
          this._setupErrorHandling(i);
          var o = this.getOption("errorView");
          x.isFunction(o) &&
            !(o.prototype instanceof m.View) &&
            (o = o.call(t)),
            o || (o = y);
          var n = t.getTemplate,
            u = this;
          t.getTemplate = function () {
            if (this.model && this.model.error) {
              var h = r.call(u, "el");
              if (typeof h != "string" && !r.call(u, "region")) return !1;
            }
            return n.apply(t, arguments);
          };
          var c;
          this.listenTo(t, "render", function () {
            var h = this.model && this.model.error;
            if (h) {
              if ((c && c.empty(), (c = r.call(this, "region")), !c)) {
                var f = r.call(this, "el") || t.el;
                typeof f == "string" && (f = t.$(f)),
                  (c = new p.Region({ el: f }));
              }
              c.show(
                new o(
                  x.extend(
                    {
                      model: new m.Model({
                        message: s.itemCannotBeAccessed,
                        title: h.message,
                      }),
                    },
                    r.call(this, "errorViewOptions")
                  )
                )
              );
            }
          })
            .listenTo(t, "before:destroy", function () {
              c && c.empty();
            })
            .listenTo(t, "update:model", this._setupErrorHandling);
        },
        _setupErrorHandling: function (a) {
          this.model && this.stopListening(this.model),
            (this.model = a),
            this.listenTo(this.model, "error", function () {
              this.view.render();
            });
        },
      });
      function r(a) {
        var d = this.getOption(a);
        return x.isFunction(d) ? d.call(this.view) : d;
      }
      return e;
    }
  ),
  csui.define(
    "hbs!csui/behaviors/item.state/impl/item.state",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 0 },
                      end: { line: 1, column: 11 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
      });
      return (
        p.registerPartial("csui_behaviors_item.state_impl_item.state", y), y
      );
    }
  ),
  csui.define(
    "csui/behaviors/item.state/item.state.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "hbs!csui/behaviors/item.state/impl/item.state",
    ],
    function (x, m, p) {
      "use strict";
      var y = m.ItemView.extend({
        className: "csui-item-state",
        template: p,
        constructor: function () {
          m.ItemView.prototype.constructor.apply(this, arguments),
            this.listenTo(this.model, "change:state", this.render).listenTo(
              this,
              "render",
              this._updateClasses
            );
        },
        serializeData: function () {
          return x.extend(this.model.toJSON(), {
            message: this.options.stateMessages[this.model.get("state")],
          });
        },
        _updateClasses: function () {
          this.$el
            .removeClass("csui-state-loading csui-state-failed")
            .addClass("csui-state-" + this.model.get("state"));
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/behaviors/item.state/item.state.behavior",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/item.state/item.state.view",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.Behavior.extend({
        constructor: function (a, d) {
          p.Behavior.prototype.constructor.apply(this, arguments),
            (this.view = d);
          var t = e.call(this, "model") || d.model || d.options.model;
          this.listenTo(t, "request", this._fetchingCollectionStarted)
            .listenTo(t, "sync", this._fetchingCollectionSucceeded)
            .listenTo(t, "error", this._fetchingCollectionFailed),
            (this.itemState = new m.Model({
              state: t.fetching ? "loading" : t.error ? "failed" : "loaded",
            }));
          var i = this.getOption("stateView");
          x.isFunction(i) &&
            !(i.prototype instanceof m.View) &&
            (i = i.call(d)),
            (this.stateView = i || y);
          var o = d.getTemplate,
            n = this;
          d.getTemplate = function () {
            if (!t.fetched) {
              var c = e.call(n, "el");
              if (typeof c != "string" && !e.call(n, "region")) return !1;
            }
            return o.apply(d, arguments);
          };
          var u;
          this.listenTo(d, "render", function () {
            if (!t.fetched) {
              if ((u && u.empty(), (u = e.call(this, "region")), !u)) {
                var c = e.call(this, "el") || d.el;
                typeof c == "string" && (c = d.$(c)),
                  (u = new p.Region({ el: c }));
              }
              u.show(
                new this.stateView(
                  x.extend(
                    {
                      model: this.itemState,
                      stateMessages: e.call(this, "stateMessages") || {},
                    },
                    e.call(this, "stateViewOptions")
                  )
                )
              );
            }
          }).listenTo(d, "before:destroy", function () {
            u && u.empty();
          });
        },
        _fetchingCollectionStarted: function () {
          this.itemState.set("state", "loading"),
            this.view.render(),
            this.view.blockWithoutIndicator &&
              this.view.blockWithoutIndicator();
        },
        _fetchingCollectionSucceeded: function (r) {
          this.itemState.set("state", "loaded"),
            this.view.unblockActions && this.view.unblockActions();
        },
        _fetchingCollectionFailed: function () {
          this.itemState.set("state", "failed"),
            this.view.unblockActions && this.view.unblockActions();
        },
      });
      function e(r) {
        var a = this.getOption(r);
        return x.isFunction(a) ? a.call(this.view) : a;
      }
      return s;
    }
  ),
  csui.define(
    "csui/behaviors/limiting/limiting.behavior",
    ["csui/lib/underscore", "csui/lib/backbone", "csui/lib/marionette"],
    function (x, m, p) {
      "use strict";
      var y = p.Behavior.extend({
        defaults: { limit: 6, filterByProperty: "name" },
        collectionEvents: { reset: "enableMoreLink" },
        events: {
          "click .cs-more": "onMoreLinkClick",
          "click .tile-expand": "onMoreLinkClick",
        },
        ui: { moreLink: ".cs-more" },
        constructor: function (r, a) {
          p.Behavior.prototype.constructor.apply(this, arguments);
        },
        initialize: function (e, r) {
          if (r.options.limited !== !1) {
            var a = r.collection,
              d;
            a ||
              ((a = this.getOption("completeCollection")),
              a instanceof m.Collection ||
                ((d = this.getOption("completeCollectionOptions")),
                a.prototype instanceof m.Collection
                  ? (a = new a(void 0, d))
                  : ((a = a.call(r)),
                    a instanceof m.Collection || (a = new a(void 0, d))))),
              r.options.orderBy && a.setOrder(r.options.orderBy, !1),
              this.listenTo(a, "add", this._addItem)
                .listenTo(a, "remove", this._removeItem)
                .listenTo(a, "reset", this.enableMoreLink)
                .listenTo(a, "sync", function (i) {
                  i instanceof m.Collection && this.synchronizeCollections();
                }),
              (r.completeCollection = a);
            var t = m.Collection.extend(a ? { model: a.model } : {});
            (r.collection = new t()),
              this.synchronizeCollections(),
              this.listenTo(
                r,
                "change:filterValue",
                this.synchronizeCollections
              );
          }
        },
        synchronizeCollections: function () {
          if (this.view.collection !== this.view.completeCollection) {
            var e;
            if (
              this.view.options.filterValue &&
              this.view.options.filterValue.length > 0
            ) {
              var r = this.view.options.filterValue.toLowerCase().split(" "),
                a = s(this.options, "filterByProperty", this.view);
              (this.view.currentFilter = {}),
                (this.view.currentFilter[a] =
                  this.view.options.filterValue.toLowerCase()),
                (e = this.view.completeCollection.filter(function (d) {
                  var t = d.get(a),
                    i;
                  return (
                    t &&
                      ((t = t.trim().toLowerCase()),
                      (i = x.reduce(
                        r,
                        function (o, n) {
                          return o && t.indexOf(n) >= 0;
                        },
                        !0
                      ))),
                    i
                  );
                }));
            } else
              (this.view.currentFilter = void 0),
                (e = this.view.completeCollection.models);
            this.view.collection.reset(e);
          }
        },
        enableMoreLink: function () {
          var e = s(this.options, "limit", this.view),
            r =
              this.view.completeCollection &&
              this.view.completeCollection.length > e;
          this.ui.moreLink instanceof Object &&
            this.ui.moreLink[r ? "removeClass" : "addClass"]("binf-hidden");
        },
        onMoreLinkClick: function (e) {
          e.preventDefault(),
            e.stopPropagation(),
            this.view.triggerMethod("expand");
        },
        _addItem: function (e) {
          var r = this.view.completeCollection.indexOf(e);
          this.view.collection.add(e, { at: r });
        },
        _removeItem: function (e) {
          this.view.collection.remove(e);
        },
      });
      function s(e, r, a) {
        if (e != null) {
          var d = e[r];
          return x.isFunction(d) ? e[r].call(a) : d;
        }
      }
      return y;
    }
  ),
  csui.define("css!csui/behaviors/resizable/resizable", [], function () {}),
  csui.define(
    "csui/behaviors/resizable/resizable.behavior",
    [
      "csui/lib/marionette",
      "module",
      "i18n",
      "css!csui/behaviors/resizable/resizable",
    ],
    function (x, m, p) {
      let y = m.config();
      y = { ...y, ...y?.csui };
      var s = x.Behavior.extend({
        constructor: function (r = {}, a) {
          y.enablePanelResize &&
            (this.listenTo(a, {
              dynamicDomLoaded: this.initializeResizeBehaviour,
            }),
            (this.options = r));
        },
        initializeResizeBehaviour: function (e, r) {
          e.parent()[0]?.classList.add("csui-resizable"),
            e.resizable({
              minWidth: this.options?.minWidth
                ? Math.max(this.options.minWidth, 240)
                : 248,
              maxWidth: "50%",
              handles: p.settings.rtl ? "w" : "e",
              start: function () {
                e[0]?.classList.add("csui-no-transition");
              },
              stop: function () {
                e[0]?.classList.remove("csui-no-transition"),
                  r.triggerMethod("dom:refresh");
              },
            });
        },
      });
      return (s.config = y), s;
    }
  ),
  csui.define(
    "hbs!csui/controls/tile/behaviors/impl/expanding.behavior",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="cs-more tile-expand" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "expandIconTitle") ||
                  (e != null ? o(e, "expandIconTitle") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "expandIconTitle",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 40 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "expandIconAria") ||
                  (e != null ? o(e, "expandIconAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "expandIconAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 91 },
                    },
                  })
                : i)
            ) +
            `"
     role="button">
  ` +
            ((t = (
              o(r, "icon-v2") ||
              (e && o(e, "icon-v2")) ||
              s.hooks.helperMissing
            ).call(e ?? (s.nullContext || {}), {
              name: "icon-v2",
              hash: { states: "true", iconName: "csui_action_expand32" },
              loc: {
                start: { line: 3, column: 2 },
                end: { line: 3, column: 61 },
              },
            })) != null
              ? t
              : "") +
            `
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_tile_behaviors_impl_expanding.behavior",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/tile/behaviors/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/tile/behaviors/impl/nls/root/lang", {
    expandIconTooltip: "Expand",
    expandIconAria: "Expand {0} widget",
  }),
  csui.define(
    "csui/controls/tile/behaviors/expanding.behavior",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!csui/controls/tile/behaviors/impl/expanding.behavior",
      "i18n!csui/controls/tile/behaviors/impl/nls/lang",
      "csui/controls/icons.v2",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      var a = y.Behavior.extend({
        defaults: { expandButton: ".tile-footer" },
        triggers: {
          "click .cs-more": "expand",
          "click .tile-header": "expand",
        },
        lastActiveElm: [],
        constructor: function (i, o) {
          y.Behavior.prototype.constructor.apply(this, arguments),
            this.listenTo(o, "render", this._renderExpandButton),
            this.listenTo(o, "expand", this._expand);
          var n = m.bind(this._destroyExpandedView, this, !1),
            u = m.bind(this._destroyExpandedView, this, !0),
            c = o.options && o.options.context;
          this.listenTo(this, "before:destroy", n),
            c &&
              this.listenTo(c, "request", n).listenTo(
                c,
                "request:perspective",
                n
              );
        },
        _renderExpandButton: function () {
          var t = d.call(this, "expandButton"),
            i = this.view.$(t),
            o = d.call(this, "expandIconTitle"),
            n = o || e.expandIconTooltip,
            u = d.call(this, "dialogTitle"),
            c = d.call(this, "expandIconAria"),
            h = c || m.str.sformat(e.expandIconAria, u),
            f = { expandIconTitle: n, expandIconAria: h };
          i.html(s(f));
        },
        _expand: function () {
          if (!(this.expanded || (this.view && this.view.errorExists))) {
            (this.expanded = !0),
              this.lastActiveElm.push(document.activeElement);
            var t = this.getOption("expandedView"),
              i = t.prototype instanceof p.View ? t : t.call(this.view),
              o = ["csui/controls/dialog/dialog.view"],
              n = this;
            m.isString(i) && o.push(i),
              x(o, function (u) {
                m.isString(i) && (i = arguments[1]);
                var c = d.call(n, "expandedViewOptions"),
                  h = new i(c);
                (n._dialog = new u({
                  iconLeft: d.call(n, "titleBarIcon"),
                  imageLeftUrl: d.call(n, "titleBarImageUrl"),
                  imageLeftClass: d.call(n, "titleBarImageClass"),
                  title: d.call(n, "dialogTitle"),
                  iconRight: d.call(n, "dialogTitleIconRight"),
                  className:
                    "cs-expanded " + (d.call(n, "dialogClassName") || ""),
                  largeSize: !0,
                  view: h,
                })),
                  n
                    .listenTo(n._dialog, "hide", function () {
                      n.triggerMethod("collapse");
                    })
                    .listenTo(n._dialog, "destroy", n._enableExpandingAgain),
                  n._dialog.show();
              });
          }
        },
        _enableExpandingAgain: function () {
          (this.expanded = !1),
            (
              this.lastActiveElm.length > 0 && this.lastActiveElm.pop()
            )?.focus();
        },
        _destroyExpandedView: function () {
          this._dialog && (this._dialog.destroy(), (this._dialog = void 0));
        },
      });
      function d(t) {
        var i = this.options || {},
          o = i[t];
        return m.isFunction(o) ? i[t].call(this.view) : o;
      }
      return a;
    }
  ),
  csui.define(
    "hbs!csui/controls/tile/impl/tile",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `    <div class="tile-type-icon">
      <span class="icon title-icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 35 },
                      end: { line: 5, column: 43 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></span>
    </div>
`
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "imageUrl") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(4, d, 0),
              inverse: s.noop,
              loc: {
                start: { line: 8, column: 4 },
                end: { line: 12, column: 11 },
              },
            }
          )) != null
            ? t
            : "";
        },
        4: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '      <div class="tile-type-image ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "imageClass") || (e != null ? i(e, "imageClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imageClass",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 34 },
                      end: { line: 9, column: 48 },
                    },
                  })
                : t)
            ) +
            `">
        <span class="tile-type-icon tile-type-icon-img"><img src="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "imageUrl") || (e != null ? i(e, "imageUrl") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imageUrl",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 66 },
                      end: { line: 10, column: 78 },
                    },
                  })
                : t)
            ) +
            `" alt="" aria-hidden="true"></span>
      </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="tile-header">

` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "icon") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.program(3, d, 0),
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 13, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            `
  <div class="tile-title" >
    <h2 class="csui-heading">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 16, column: 29 },
                      end: { line: 16, column: 38 },
                    },
                  })
                : i)
            ) +
            `</h2>
  </div>

  <div class="tile-controls" title="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 19, column: 36 },
                      end: { line: 19, column: 45 },
                    },
                  })
                : i)
            ) +
            `"></div>

</div>

<div class="tile-content"></div>

<div class="tile-footer"></div>
`
          );
        },
      });
      return p.registerPartial("csui_controls_tile_impl_tile", y), y;
    }
  ),
  csui.define("css!csui/controls/tile/impl/tile", [], function () {}),
  csui.define(
    "csui/controls/tile/tile.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "hbs!csui/controls/tile/impl/tile",
      "css!csui/controls/list/impl/list",
      "css!csui/controls/tile/impl/tile",
    ],
    function (x, m, p, y, s, e) {
      var r = y.LayoutView.extend({
        className: "cs-tile cs-list tile content-tile initialLoading",
        template: e,
        regions: {
          headerControls: ".tile-controls",
          content: ".tile-content",
          footer: ".tile-footer",
        },
        ui: { footer: ".tile-footer", headerControls: ".tile-controls" },
        constructor: function () {
          y.LayoutView.prototype.constructor.apply(this, arguments),
            this.listenTo(this, "render", this._renderContentView),
            this.listenToOnce(this.collection, "sync", function () {
              this.$el.removeClass("initialLoading");
            }),
            this.listenToOnce(
              this.collection,
              "error",
              x.bind(this.handleError, this)
            ),
            this.listenToOnce(
              this.model,
              "error",
              x.bind(this.handleError, this)
            );
        },
        handleError: function () {
          (this.errorExists = !0),
            this.ui.headerControls.addClass("binf-hidden"),
            this.ui.footer.addClass("binf-hidden");
        },
        serializeData: function () {
          return x.reduce(
            ["icon", "imageUrl", "imageClass", "title"],
            function (d, t) {
              return (d[t] = a.call(this, t)), d;
            },
            {},
            this
          );
        },
        _renderContentView: function () {
          var d = a.call(this, "contentView");
          if (!d)
            throw new y.Error({
              name: "NoContentViewError",
              message: 'A "contentView" must be specified',
            });
          var t = a.call(this, "contentViewOptions");
          (this.contentView = new d(t)),
            this.propagateEventsToViews(this.contentView),
            this.content.show(this.contentView);
        },
      });
      x.extend(r.prototype, s);
      function a(d, t) {
        var i;
        return (
          t
            ? (i = t[d])
            : ((i = a.call(this, d, this.options || {})),
              i === void 0 && (i = this[d])),
          x.isFunction(i) && !(i.prototype instanceof p.View) ? i.call(this) : i
        );
      }
      return r;
    }
  ),
  csui.define(
    "csui/controls/iconpreload/icon.preload.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/non-emptying.region/non-emptying.region",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = x.config().iconClasses || {};
      e = Array.prototype.concat.apply([], m.values(e));
      var r = y.ItemView.extend({
        id: "csui-icon-preload",
        template: !1,
        onRender: function () {
          this._preloadIcons();
        },
        constructor: function (d) {
          y.ItemView.prototype.constructor.apply(this, arguments);
        },
        _preloadIcons: function () {
          m.each(
            e,
            function (a) {
              this.$el.append(
                '<span class="csui-icon ' +
                  a +
                  '" style="position:fixed;top:-100px;left:-100px;"></span>'
              );
            },
            this
          );
        },
      });
      return (
        (r.ensureOnThePage = function () {
          if (!p("#csui-icon-preload").length) {
            var a = new r(),
              d = p.fn.binf_modal.getDefaultContainer(),
              t = new s({ el: d });
            t.show(a);
          }
        }),
        r
      );
    }
  ),
  csui.define("csui/widgets/html.editor/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/html.editor/impl/nls/root/lang", {
    ConfirmQuestionMessage: "Are you sure to leave this page?",
    ConfirmQuestionTitle: "Cancel edits?",
    CancelConfirmMessage: "Are you sure you want to cancel?",
    cancelTitle: "Cancel",
    cancelAria: "Cancel edit",
    saveTitle: "Save",
    saveAria: "Save contents",
    okTitle: "OK",
    sourceDialogTitle: "Source",
    moreActionsAria: "{0} actions menu",
    PageDefaultContent: "your content goes here",
    noWikiPageFound: "Item cannot be accessed.",
    RestoreDialogMessage:
      "You have unsaved changes. Do you want to restore changes and continue editing?",
    RestoreDiaglogTitle: "Restore changes",
    reservedBy: `Reserved by {0}
{1}`,
    more: "more",
    properties: "Properties",
    permissions: "View permissions",
    Edit: "Edit",
    unreserve: "Unreserve",
    Continue: "Continue",
    Discard: "Discard",
    Yes: "Yes",
    No: "No",
    insertContentServerLink: "Insert Content Management Link",
    openCodeView: "Source",
    contentServerLink: "Content Management Link",
    versionDifferenceConfirmMessage:
      "Another user has saved an alternate version of this page. Do you still want to add a new version?",
    versionDifferenceConfirmTitle: "Intermediate version added",
    brokenLinkMessage:
      "Sorry, the item you requested could not be accessed. Either it does not exist, or you do not have permission to access it. If you were sent a link to this item, please contact the sender for assistance.",
    goToTooltip: "go to {0}",
    previewUnavailable: "Preview Unavailable",
    cannotFindObject: "Cannot find object",
  }),
  csui.define(
    "csui/controls/rich.text.editor/impl/rich.text.util",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/url",
      "csui/models/node/node.model",
      "csui/utils/base",
      "csui/utils/commands",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "csui/utils/log",
    ],
    function (x, m, p, y, s, e, r, a) {
      var d = {
        isEmptyContentElement: function (t) {
          return m.trim(m(t).text());
        },
        checkDomain: function (t, i) {
          var o = t.connector.connection.url,
            n = i.target.href;
          return (
            (t.options.isSameDomain =
              n.search(new RegExp(o.split("/api")[0], "i")) !== -1),
            t.options.isSameDomain
          );
        },
        getUrl: function (t, i) {
          var o = m.Deferred();
          if (i.target.href) {
            var n = i.target.href.match(/^.*\/app\/(.+)$/i),
              u = new p(i.target.href).isAbsolute(),
              c = u ? this.checkDomain(t, i) : !0,
              h = i.target.href.match(/^.*\/wiki\/(.+)$/i),
              f =
                i.target.href.match(/^.*\/open\/(.+)$/i) ||
                i.target.href.match(/^.*\/nodes\/(.+)$/i),
              k = i.target.href.match(/^.*objId\=(.+)$/i),
              C,
              S = this;
            !n && c
              ? h || k
                ? S.renderLinks({
                    event: i,
                    connector: t.connector,
                    callingViewInstance: t,
                  }).done(function () {
                    o.resolve();
                  })
                : (f && ((C = f[1]), this.updateLink(i, C)), o.resolve())
              : o.resolve();
          }
          return o.promise();
        },
        renderLinks: function (t) {
          var i,
            o = m.Deferred(),
            n = t.event.target.href
              ? m(t.event.target)
              : m(t.event.target).parents("a"),
            u = t.callingViewInstance,
            c = this;
          if (
            ((t.event.target = n[0]),
            t.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i) ||
              t.event.target.href.match(/^.*\/wiki\/[0-9]+$/i))
          )
            t.event.stopPropagation(),
              t.event.preventDefault(),
              t.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i)
                ? ((i = t.event.target.href.match(/^.*\/wiki\/(.+)\/(.+)$/i)),
                  (i = parseInt(i[1])),
                  c
                    ._getWikiPageId(t, i, t.event.target.href)
                    .done(function (f, k) {
                      (c.id = f),
                        k
                          ? c.updateLink(t.event, k.id)
                          : a.info(r.brokenLinkMessage),
                        o.resolve();
                    }))
                : t.event.target.href.match(/^.*\/wiki\/[0-9]+$/i) &&
                  ((i = t.event.target.href.match(/^.*\/wiki\/(.+)$/i)),
                  (i = parseInt(i[1])),
                  c.updateLink(t.event, i),
                  o.resolve());
          else if (t.event.target.href.match(/^.*objId\=(.+)$/)) {
            t.event.stopPropagation(), t.event.preventDefault();
            var h = t.event.target.href.match(/^.*objId\=(.+)$/)[1];
            h !== -1 &&
              ((i = this.getNewNodeModel({
                attributes: { id: parseInt(h) },
                connector: t.connector,
              })),
              c.updateLink(t.event, i.attributes.id)),
              o.resolve();
          }
          return o.promise();
        },
        getNewNodeModel: function (t) {
          return new y(t.attributes, {
            connector: t.connector,
            commands: e.getAllSignatures(),
            fields: t.fields || {},
            expand: t.expand || {},
          });
        },
        updateLink: function (t, i) {
          var o =
              /^.*\/(cs\.\w{3}|livelink\.\w{3}|llisapi\.\w{3}|llisapi|cs|livelink).*$/,
            n = !!i && i,
            u = t.target.href.match(o),
            c =
              !!u &&
              u.length &&
              t.target.href.substring(
                0,
                t.target.href.indexOf("/".concat(u[1])) +
                  "/".concat(u[1]).length
              );
          t.target.href =
            c && c.length ? c.concat("/app/nodes/", n) : t.target.href;
        },
        _getWikiPageId: function (t, i, o) {
          var n = decodeURIComponent(
              o.substring(o.lastIndexOf("/") + 1, o.length)
            ),
            u = m.Deferred(),
            c = t.connector,
            h = { url: this._getWikiContainerUrl(t, i), type: "GET" };
          return (
            c
              .makeAjaxCall(h)
              .done(function (f) {
                (f.targetWikiPageNode = f.results.find(function (k) {
                  if (k.name === n) return k;
                })),
                  f.targetWikiPageNode && f.targetWikiPageNode.id
                    ? u.resolve(f.targetWikiPageNode.id, f.targetWikiPageNode)
                    : u.resolve(-1);
              })
              .fail(function (f) {
                u.reject(f);
              }),
            u.promise()
          );
        },
        _getWikiContainerUrl: function (t, i) {
          return p.combine(
            t.connector.getConnectionUrl().getApiBase("v2"),
            "/wiki/" + i + "/wikipages"
          );
        },
        _getNicknameId: function (t, i) {
          var o = m.Deferred(),
            n = {
              url: p.combine(
                t.connector.getConnectionUrl().getApiBase("v2"),
                "/wiki/nickname/" + i + "?actions=open"
              ),
              requestType: "nickname",
              view: this,
              type: "GET",
            };
          return (
            i &&
              t.connector
                .makeAjaxCall(n)
                .done(function (u) {
                  o.resolve(u);
                })
                .fail(function () {
                  o.reject();
                }),
            o.promise()
          );
        },
      };
      return d;
    }
  ),
  csui.define(
    "css!csui/widgets/html.editor/impl/html.editor",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/rich.text.editor/rich.text.editor",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/rich.text.editor/impl/rich.text.util",
      "css!csui/widgets/html.editor/impl/html.editor",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = function () {
          return y;
        },
        e = function (r) {
          return (
            !!r &&
            r.html
              .get()
              .trim()
              .replace(/<\/div>|<div>|<\/p>|<p>|&nbsp;|<br \/>|\s/g, "")
          );
        };
      return { getRichTextEditorUtils: s, isEmptyContent: e };
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-selected-counter-region">
  <button type="button" class="binf-btn binf-btn-primary"
          aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedButtonAria") ||
                  (e != null ? i(e, "selectedButtonAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedButtonAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 22 },
                      end: { line: 3, column: 44 },
                    },
                  })
                : t)
            ) +
            `" aria-haspopup="true"
          title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedButtonTitle") ||
                  (e != null ? i(e, "selectedButtonTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedButtonTitle",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 17 },
                      end: { line: 4, column: 40 },
                    },
                  })
                : t)
            ) +
            `"><span
      class="csui-selected-counter-label">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedLabel") ||
                  (e != null ? i(e, "selectedLabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 42 },
                      end: { line: 5, column: 59 },
                    },
                  })
                : t)
            ) +
            `</span><span
      class="binf-badge binf-badge-light csui-selected-counter-value">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedCount") ||
                  (e != null ? i(e, "selectedCount") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedCount",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 70 },
                      end: { line: 6, column: 87 },
                    },
                  })
                : t)
            ) +
            `</span>
  </button>
</div>
<div class="csui-dropmenu-container binf-hidden">
  <span class="csui-selected-count-clearall binf-hidden"><span
      class="csui-selected-count-clearall-label"
      role="button" tabindex="0" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearAllAria") ||
                  (e != null ? i(e, "clearAllAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAllAria",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 45 },
                      end: { line: 12, column: 61 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "clearAll") || (e != null ? i(e, "clearAll") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAll",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 63 },
                      end: { line: 12, column: 75 },
                    },
                  })
                : t)
            ) +
            `</span></span>

  <ul class="csui-selected-items-dropdown csui-normal-scrolling" role="menu"></ul>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.list.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<span class="csui-selected-list-item-icon csui-type-icon"></span>
<div class="csui-selected-list-item-name-wrapper">
    <span class="csui-selected-list-item-name">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 47 },
                      end: { line: 3, column: 55 },
                    },
                  })
                : t)
            ) +
            `</span>
  <span class="csui-icon formfield_clear csui-deselected-icon" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearItem") || (e != null ? i(e, "clearItem") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearItem",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 75 },
                      end: { line: 4, column: 88 },
                    },
                  })
                : t)
            ) +
            `"
        title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearItem") || (e != null ? i(e, "clearItem") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearItem",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 15 },
                      end: { line: 5, column: 28 },
                    },
                  })
                : t)
            ) +
            `">
  </span>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.list.item",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/selected.count/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/selected.count/impl/nls/root/lang", {
    clearAll: "Clear all",
    clearAllAria: "Clear all selections",
    selectedLabel: "Selected",
    selectedButtonTitle: "Selected {0}",
    selectedButtonAria: "Selected {0} items",
    unselectAria: "Unselect {0} {1}",
    clearItem: "Clear item",
    dialogTitle: "Clear all",
    dialogTemplate: "Do you want to clear your selection?",
    parentName: "/{0}",
  }),
  csui.define(
    "css!csui/controls/selected.count/impl/selected.count",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/selected.count/selected.count.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/utils/base",
      "nuc/utils/log",
      "hbs!csui/controls/selected.count/impl/selected.count",
      "hbs!csui/controls/selected.count/impl/selected.list.item",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n) {
      "use strict";
      (t = t(x.id)),
        t.deprecate(
          'Selected count view "csui/controls/selected.count/selected.count.view" is deprecated, please migrate to selected.count.control.view.js "csui/controls/selected.count/selected.count.control.view"'
        );
      var u = s.ItemView.extend({
          className: "csui-selected-item",
          template: o,
          tagName: "li",
          events: { keydown: "onKeyInView" },
          modelEvents: { change: "onModelChange" },
          triggers: { "click .csui-deselected-icon": "remove:selected:item" },
          templateHelpers: function () {
            return {
              name: this.options.model.get("name"),
              clearItem: n.clearItem,
            };
          },
          constructor: function (f) {
            (this.model = f.model),
              s.ItemView.prototype.constructor.apply(this, arguments);
          },
          onRender: function () {
            (this._nodeIconView = new e({
              el: this.$(".csui-type-icon").get(0),
              node: this.model,
              size: "contain",
            })),
              this._nodeIconView.render(),
              this.$el.attr("tabindex", "-1"),
              this.$el.attr("role", "menuitem"),
              this.$el.attr(
                "aria-label",
                m.str.sformat(
                  n.unselectAria,
                  this.model.get("name"),
                  this._nodeIconView.$el.attr("aria-label")
                )
              );
          },
          onModelChange: function () {
            this.render();
          },
          onKeyInView: function (h) {
            this.trigger("keydown:item", h);
          },
        }),
        c = s.CompositeView.extend({
          className: "csui-selected-count",
          template: i,
          templateHelpers: function () {
            var h = this.collection && this.collection.length;
            return {
              selectedCount: h,
              clearAll: n.clearAll,
              clearAllAria: n.clearAllAria,
              selectedLabel: n.selectedLabel,
              selectedButtonTitle: m.str.sformat(n.selectedButtonTitle, h),
              selectedButtonAria: m.str.sformat(n.selectedButtonAria, h),
            };
          },
          childViewContainer: ".csui-selected-items-dropdown",
          childView: u,
          childEvents: {
            "remove:selected:item": "onRemoveSelectedItem",
            "keydown:item": "onKeydownItem",
          },
          ui: {
            selectedCountButton: ".csui-selected-counter-region button",
            selectedCountValue:
              ".csui-selected-counter-region .csui-selected-counter-value",
            dropdownContainer: ".csui-dropmenu-container",
            clearAll: ".csui-selected-count-clearall",
            ClearAllButton: ".csui-selected-count-clearall > span",
          },
          events: {
            "click @ui.selectedCountButton": "onClickSelectedCount",
            "click @ui.ClearAllButton": "onClickClearAll",
            "mouseenter @ui.selectedCountButton":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.selectedCountButton":
              "onMouseLeaveSelectedCounterView",
            "mouseenter @ui.dropdownContainer":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.dropdownContainer":
              "onMouseLeaveSelectedCounterView",
            "mouseup @ui.clearAll": "onMouseUpClearAll",
            "blur  @ui.selectedCountButton": "onBlurSelectedCountButton",
            "blur @ui.dropdownContainer": "onBlurSelectedCounterView",
            keydown: "onKeydownSelectedCount",
            keyup: "onKeyupItem",
          },
          behaviors: { TabableRegion: { behaviorClass: r } },
          currentlyFocusedElement: function () {
            return this.ui.selectedCountButton;
          },
          constructor: function h(f) {
            (f = m.defaults(f, { showOnlyOnSelection: !0 })),
              (this.collection = f.collection),
              h.__super__.constructor.apply(this, arguments),
              (this.currentlyFocusedIndex = 0),
              (this.showClearAll = !1),
              (this.selectedItemInFocus = !1),
              (this.scrollableParent = f.scrollableParent),
              this.listenTo(this.collection, "reset remove add", function () {
                !this.isDestroyed && this.onCollectionUpdate();
              }),
              (this.selectedCount = this.collection.length),
              this.scrollableParent &&
                ((this.windowResizeHandler = m.bind(this.setDropdownCss, this)),
                p(window).on("resize", this.windowResizeHandler));
          },
          onRender: function () {
            this.selectedCount
              ? (this.ui.dropdownContainer.addClass("binf-hidden"),
                p(document).off("mouseup.csui.select.count"))
              : this.options.showOnlyOnSelection &&
                this.$el.addClass("binf-hidden");
          },
          onDestroy: function () {
            this.stopListening(this.collection, "reset remove add"),
              this.windowResizeHandler &&
                p(window).off("resize", this.windowResizeHandler);
          },
          onClickClearAll: function (h) {
            (this.selectedItemInFocus = !0),
              a
                .confirmQuestion(
                  m.str.sformat(n.dialogTemplate, n.dialogTitle),
                  n.dialogTitle,
                  {}
                )
                .always(
                  m.bind(function (f) {
                    f
                      ? this.collection.reset([])
                      : (this.ui.ClearAllButton.trigger("focus"),
                        this._moveTabindexToFocusedElement()),
                      (this.selectedItemInFocus = !1);
                  }, this)
                ),
              (this.currentlyFocusedIndex = 0);
          },
          onMouseUpClearAll: function (h) {
            h.preventDefault(),
              h.stopPropagation(),
              this.ui.ClearAllButton.trigger("focus");
          },
          isDDOpen: function () {
            return (
              !this.ui.dropdownContainer[0].classList.contains("binf-hidden") &&
              !this.el.classList.contains("binf-hidden")
            );
          },
          _focusOnSelectedCountButton: function () {
            this.ui.selectedCountButton.trigger("focus"),
              (this.selectedCountViewInFocus = !0);
          },
          onMouseEnterSelectedCounterView: function () {
            this.selectedCountViewInFocus = !0;
          },
          onMouseLeaveSelectedCounterView: function () {
            this.selectedItemInFocus === !1 &&
              (this.selectedCountViewInFocus = !1);
          },
          onClickSelectedCount: function (h) {
            h.preventDefault(), h.stopPropagation();
            var f = this.$el.find(".binf-open>.binf-dropdown-toggle");
            f.length > 0 && f.binf_dropdown("toggle"),
              this.ui.dropdownContainer.hasClass("binf-hidden")
                ? this._showItemView()
                : this._hideItemView();
          },
          resetState: function () {
            var h = this.$el.find(".binf-open>.binf-dropdown-toggle");
            h.length > 0 && h.binf_dropdown("toggle"), this._hideItemView();
          },
          _showItemView: function () {
            (this.selectedCountViewInFocus = !0),
              this.ui.dropdownContainer.removeClass("binf-hidden"),
              this.ui.selectedCountButton.addClass("binf-open"),
              this.ui.selectedCountButton.attr("aria-expanded", "true"),
              this.selectedCount > 4 &&
                ((this.showClearAll = !0),
                this.ui.clearAll.removeClass("binf-hidden")),
              this.scrollableParent && this.setDropdownCss(),
              this.ui.clearAll.hasClass("binf-hidden")
                ? this.ui.dropdownContainer
                    .find(".csui-selected-item:first")
                    .trigger("focus")
                : this.ui.clearAll
                    .find(".csui-selected-count-clearall-label")
                    .trigger("focus"),
              p(document).on(
                "mouseup.csui.select.count",
                m.bind(this.onDocumentClick, this)
              );
          },
          onDocumentClick: function (h) {
            this.$el[0] !== h.target &&
              !this.$el.has(h.target).length &&
              !this.selectedItemInFocus &&
              this._hideItemView();
          },
          setDropdownCss: function () {
            var h = this.ui.dropdownContainer.find(
                ".csui-selected-items-dropdown"
              ),
              f = p(this.scrollableParent),
              k,
              C,
              S;
            if (f && f.length > 0) {
              (C = f.height()),
                (S =
                  parseInt(f.css("margin-top")) +
                  parseInt(f.css("margin-bottom"))),
                (k = h.offset().top - f.offset().top);
              var w = Math.abs(C - S);
              h.css({ "max-height": w - (24 + k) + "px" });
            }
          },
          _hideItemView: function (h) {
            (this.selectedCountViewInFocus = !1),
              m.isFunction(this.ui.dropdownContainer.addClass) &&
                this.ui.dropdownContainer.addClass("binf-hidden"),
              this.ui.selectedCountButton.removeClass("binf-open"),
              this.ui.selectedCountButton.attr("aria-expanded", "false"),
              p(document).off("mouseup.csui.select.count");
          },
          onRemoveSelectedItem: function (h) {
            var f = h._index,
              k;
            (this.selectedCountViewInFocus = !0),
              this.collection.remove(h.model),
              (k = m.sortBy(this.children.toArray(), "cid")),
              f === this.selectedCount
                ? k[f - 1] && k[f - 1].$el.trigger("focus")
                : k[f] && k[f].$el.trigger("focus"),
              this.collection.length === 0 &&
                this.ui.dropdownContainer.addClass("binf-hidden");
          },
          onCollectionUpdate: function () {
            (this.selectedCount = this.collection.length),
              this.selectedCount && !this.isDDOpen()
                ? (this.options.showOnlyOnSelection &&
                    this.$el.removeClass("binf-hidden"),
                  m.isFunction(this.ui.dropdownContainer.addClass) &&
                    this.ui.dropdownContainer.addClass("binf-hidden"),
                  this.trigger("show:counter", !0))
                : this.selectedCount ||
                  (this.ui.selectedCountButton.removeClass("binf-open"),
                  this.options.showOnlyOnSelection &&
                    this.$el.addClass("binf-hidden"),
                  p(document).off("mouseup.csui.select.count"),
                  this.trigger("show:counter", !1)),
              this.ui.selectedCountValue.text(this.selectedCount),
              this.ui.selectedCountButton.attr(
                "aria-label",
                m.str.sformat(n.selectedButtonAria, this.selectedCount)
              ),
              this.ui.selectedCountButton.attr(
                "title",
                m.str.sformat(n.selectedButtonTitle, this.selectedCount)
              ),
              !this.showClearAll && this.selectedCount > 4
                ? ((this.showClearAll = !0),
                  this.ui.clearAll.removeClass("binf-hidden"))
                : this.selectedCount <= 4 &&
                  this.showClearAll &&
                  ((this.showClearAll = !1),
                  this.ui.clearAll.addClass("binf-hidden")),
              this.selectedCount > 0 && this._moveTabindexToFocusedElement();
          },
          _moveTabindexToFocusedElement: function () {
            this._focusableElements = d.findFocusables(this.el);
            for (var h = 0; h < this._focusableElements.length; h++)
              this._focusableElements[h].setAttribute("tabindex", "0");
          },
          onBlurSelectedCountButton: function (h) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onBlurSelectedCounterView: function (h) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onKeydownSelectedCount: function (h) {
            switch (h.keyCode) {
              case 9:
                if (
                  h.shiftKey &&
                  !this.ui.dropdownContainer.hasClass("binf-hidden")
                )
                  h.preventDefault(),
                    h.stopPropagation(),
                    this.ui.ClearAllButton.trigger("focus");
                else {
                  var f = m.sortBy(this.children.toArray(), "cid");
                  (this.selectedCountViewInFocus = !0),
                    this.ui.ClearAllButton.is(":focus") &&
                      (f[this.currentlyFocusedIndex].$el.trigger("focus"),
                      h.stopPropagation(),
                      h.preventDefault());
                }
                break;
              case 13:
                this.ui.ClearAllButton.is(":focus") && this.onClickClearAll(h);
                break;
              case 32:
                this.ui.selectedCountButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickSelectedCount(h));
                break;
              case 46:
                this.ui.ClearAllButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickClearAll(h));
                break;
              case 37:
                h.stopPropagation();
                break;
              case 39:
                h.stopPropagation();
                break;
            }
          },
          onKeydownItem: function (h, f) {
            var k = m.sortBy(this.children.toArray(), "cid");
            switch ((f.preventDefault(), f.keyCode)) {
              case 46:
              case 13:
              case 32:
                this.onRemoveSelectedItem(h), f.stopPropagation();
                break;
              case 40:
                (this.selectedCountViewInFocus = !0),
                  h._index !== this.selectedCount - 1 &&
                    (k[h._index + 1].$el.trigger("focus"),
                    (this.currentlyFocusedIndex = h._index + 1)),
                  f.stopPropagation();
                break;
              case 38:
                (this.selectedCountViewInFocus = !0),
                  h._index > 0 &&
                    (k[h._index - 1].$el.trigger("focus"),
                    (this.currentlyFocusedIndex = h._index - 1)),
                  f.stopPropagation();
                break;
              case 37:
                f.stopPropagation();
                break;
              case 39:
                f.stopPropagation();
                break;
            }
          },
          onKeyupItem: function (h) {
            h.keyCode === 27 &&
              this.isDDOpen() &&
              ((this.currentlyFocusedIndex = 0),
              h.preventDefault(),
              h.stopPropagation(),
              this._hideItemView(),
              this._focusOnSelectedCountButton());
          },
        });
      return c;
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count.label",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-selected-counter-label">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedLabel") ||
                  (e != null ? i(e, "selectedLabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedLabel",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 42 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : t)
            ) +
            '</span><span class="binf-badge binf-badge-light csui-selected-counter-value">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "selectedCount") ||
                  (e != null ? i(e, "selectedCount") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "selectedCount",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 136 },
                      end: { line: 1, column: 153 },
                    },
                  })
                : t)
            ) +
            "</span>"
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count.label",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/impl/selected.count.label.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/controls/selected.count/impl/selected.count.label",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y) {
      "use strict";
      return m.View.extend({
        tagName: "button",
        className: function () {
          let e = "binf-btn binf-btn-primary";
          return (
            this.options.showOnlyOnSelection &&
              this.options.collection.length === 0 &&
              (e = " binf-hidden"),
            e
          );
        },
        template: p,
        templateContext: function () {
          return {
            selectedCount: this.selectedCount,
            selectedLabel: y.selectedLabel,
          };
        },
        ui: { selectedCountValue: ".csui-selected-counter-value" },
        events: { click: "toggleSelectedCount" },
        attributes: function () {
          return {
            title: x.str.sformat(y.selectedButtonTitle, this.selectedCount),
            "aria-label": x.str.sformat(
              y.selectedButtonAria,
              this.selectedCount
            ),
            "aria-haspopup": !0,
          };
        },
        constructor: function (r) {
          (r = x.defaults(r.parentView.options, { showOnlyOnSelection: !0 })),
            (this.options = r),
            m.View.prototype.constructor.apply(this, arguments),
            (this.selectedCount = this.options.collection.length),
            this.listenTo(
              this.options.collection,
              "reset remove add",
              function () {
                this.updateCounter();
              }
            );
        },
        updateCounter: function () {
          const e = this.options.collection.length;
          if (e === 0) {
            this.el.classList.add("binf-hidden");
            return;
          }
          this.el.classList.contains("binf-hidden") &&
            this.el.classList.remove("binf-hidden"),
            typeof this.ui.selectedCountValue?.text == "function" &&
              this.ui.selectedCountValue?.text(e),
            (this.el.ariaLabel = x.str.sformat(y.selectedButtonAria, e)),
            (this.el.title = x.str.sformat(y.selectedButtonTitle, e));
        },
        toggleSelectedCount: function () {
          this.options.parentView?.selectedItemsCollectionView?.isRendered
            ? this.options.parentView.selectedItemsCollectionView._hideItemView()
            : ((this.el.ariaExpanded = !0),
              this.options.parentView.showSelectedDropdown());
        },
        onDestroy: function () {
          this.stopListening(this.options.collection, "reset remove add");
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.items.collection",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-dropmenu-container binf-hidden">
  <span class="csui-selected-count-clearall binf-hidden"><span
      class="csui-selected-count-clearall-label"
      role="button" tabindex="0" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "clearAllAria") ||
                  (e != null ? i(e, "clearAllAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAllAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 45 },
                      end: { line: 4, column: 61 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "clearAll") || (e != null ? i(e, "clearAll") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "clearAll",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 63 },
                      end: { line: 4, column: 75 },
                    },
                  })
                : t)
            ) +
            `</span></span>

  <ul class="csui-selected-items-dropdown csui-normal-scrolling" role="menu"></ul>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.items.collection",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/impl/selected.items.collection.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/dialogs/modal.alert/modal.alert",
      "hbs!csui/controls/selected.count/impl/selected.items.collection",
      "hbs!csui/controls/selected.count/impl/selected.list.item",
      "i18n!csui/controls/selected.count/impl/nls/lang",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e, r, a) {
      "use strict";
      var d = p.ItemView.extend({
          className: "csui-selected-item",
          template: r,
          tagName: "li",
          events: { keydown: "onKeyInView" },
          modelEvents: { change: "onModelChange" },
          triggers: { "click .csui-deselected-icon": "remove:selected:item" },
          templateHelpers: function () {
            return {
              name: this.options.model.get("name"),
              clearItem: a.clearItem,
            };
          },
          constructor: function (o) {
            (this.model = o.model),
              p.ItemView.prototype.constructor.apply(this, arguments),
              this.listenTo(this, "show", this.applyCSS);
          },
          onRender: function () {
            (this._nodeIconView = new y({
              el: this.$(".csui-type-icon").get(0),
              node: this.model,
              size: "contain",
            })),
              this._nodeIconView.render(),
              this.$el.attr("tabindex", "-1"),
              this.$el.attr("role", "menuitem"),
              this.$el.attr(
                "aria-label",
                x.str.sformat(
                  a.unselectAria,
                  this.model.get("name"),
                  this._nodeIconView.$el.attr("aria-label")
                )
              );
          },
          applyCSS: function () {
            const i = this.$el.find(".csui-selected-list-item-name-wrapper"),
              o = this.$el.innerWidth(),
              n = this.$el.find(".csui-icon-group").innerWidth(),
              u = i.innerWidth();
            u && u + n + 16 > o && i.css("max-width", "calc(100% - 20px)");
          },
          onModelChange: function () {
            this.render();
          },
          onKeyInView: function (i) {
            this.trigger("keydown:item", i);
          },
        }),
        t = p.CompositeView.extend({
          className: "csui-selected-count",
          template: e,
          templateHelpers: function () {
            return { clearAll: a.clearAll, clearAllAria: a.clearAllAria };
          },
          childViewContainer: ".csui-selected-items-dropdown",
          childView: d,
          childEvents: {
            "remove:selected:item": "onRemoveSelectedItem",
            "keydown:item": "onKeydownItem",
          },
          ui: {
            dropdownContainer: ".csui-dropmenu-container",
            clearAll: ".csui-selected-count-clearall",
            ClearAllButton: ".csui-selected-count-clearall > span",
          },
          events: {
            "click @ui.ClearAllButton": "onClickClearAll",
            "mouseenter @ui.dropdownContainer":
              "onMouseEnterSelectedCounterView",
            "mouseleave @ui.dropdownContainer":
              "onMouseLeaveSelectedCounterView",
            "mouseup @ui.clearAll": "onMouseUpClearAll",
            "blur @ui.dropdownContainer": "onBlurSelectedCounterView",
            keydown: "onKeydownSelectedCount",
            keyup: "onKeyupItem",
          },
          constructor: function i(o) {
            (this.options = o),
              (this.collection = o.collection),
              (this.selectCountView = o.selectCountView),
              i.__super__.constructor.apply(this, arguments),
              (this.currentlyFocusedIndex = 0),
              (this.showClearAll = !1),
              (this.selectedItemInFocus = !1),
              (this.scrollableParent =
                this.options.parentView?.options?.scrollableParent),
              this.listenTo(this.collection, "reset remove add", function () {
                !this.isDestroyed && this.onCollectionUpdate();
              }),
              (this.selectedCount = this.collection.length),
              this.scrollableParent &&
                ((this.windowResizeHandler = x.bind(this.setDropdownCss, this)),
                window.addEventListener("resize", this.windowResizeHandler));
          },
          onRender: function () {
            this.onClickSelectedCount();
          },
          onDestroy: function () {
            this.stopListening(this.options.collection, "reset remove add"),
              this.windowResizeHandler &&
                window.removeEventListener("resize", this.windowResizeHandler);
          },
          onClickClearAll: function () {
            (this.selectedItemInFocus = !0),
              s
                .confirmQuestion(
                  x.str.sformat(a.dialogTemplate, a.dialogTitle),
                  a.dialogTitle,
                  {}
                )
                .always(
                  x.bind(function (i) {
                    i
                      ? (this.collection.reset([]), this._hideItemView())
                      : (this.ui.ClearAllButton.trigger("focus"),
                        this._moveTabindexToFocusedElement &&
                          this._moveTabindexToFocusedElement()),
                      (this.selectedItemInFocus = !1);
                  }, this)
                ),
              (this.currentlyFocusedIndex = 0);
          },
          onMouseUpClearAll: function (i) {
            i.preventDefault(),
              i.stopPropagation(),
              this.ui.ClearAllButton.trigger("focus");
          },
          isDDOpen: function () {
            return (
              !this.ui.dropdownContainer[0].classList.contains("binf-hidden") &&
              !this.el.classList.contains("binf-hidden")
            );
          },
          onClickSelectedCount: function () {
            var i = this.$el.find(".binf-open>.binf-dropdown-toggle");
            i.length > 0 && i.binf_dropdown("toggle"),
              this.ui.dropdownContainer.hasClass("binf-hidden") &&
                this._showItemView();
          },
          resetState: function () {
            var i = this.$el.find(".binf-open>.binf-dropdown-toggle");
            i.length > 0 && i.binf_dropdown("toggle"), this._hideItemView();
          },
          _showItemView: function () {
            (this.selectedCountViewInFocus = !0),
              this.ui.dropdownContainer.removeClass("binf-hidden"),
              this.selectedCount > 4 &&
                ((this.showClearAll = !0),
                this.ui.clearAll.removeClass("binf-hidden")),
              this.scrollableParent && this.setDropdownCss(),
              m(document).on(
                "mouseup.csui.select.count",
                x.bind(this.onDocumentClick, this)
              );
          },
          onShow: function () {
            this.ui.clearAll?.[0].classList?.contains("binf-hidden")
              ? this.ui.dropdownContainer?.[0]
                  .querySelector(".csui-selected-item")
                  ?.focus()
              : typeof this.ui.clearAll?.[0]?.querySelector == "function" &&
                this.ui.clearAll?.[0]
                  ?.querySelector(".csui-selected-count-clearall-label")
                  ?.focus();
          },
          onDocumentClick: function (i) {
            !i.target.closest(".csui-selected-counter-region>button") &&
              this.$el[0] !== i.target &&
              !this.$el.has(i.target).length &&
              !this.selectedItemInFocus &&
              this._hideItemView();
          },
          setDropdownCss: function () {
            const i = this.ui.dropdownContainer.find(
                ".csui-selected-items-dropdown"
              ),
              o = m(this.scrollableParent);
            if (o && o.length > 0) {
              const n = o.height(),
                u =
                  parseInt(o.css("margin-top")) +
                  parseInt(o.css("margin-bottom")),
                c = i.offset().top - o.offset().top,
                h = Math.abs(n - u - 200);
              i.css({ "max-height": h - (24 + c) + "px" });
            }
          },
          _hideItemView: function () {
            this.options.parentView.destroySelectedDropdown(),
              m(document).off("mouseup.csui.select.count");
          },
          onRemoveSelectedItem: function (i) {
            var o = i._index,
              n;
            (this.selectedCountViewInFocus = !0),
              this.collection.remove(i.model),
              (n = x.sortBy(this.children.toArray(), "cid")),
              o === this.collection.length
                ? n[o - 1] && n[o - 1].$el.trigger("focus")
                : n[o] && n[o].$el.trigger("focus"),
              this.collection.length === 0 && this._hideItemView();
          },
          onBlurSelectedCounterView: function (i) {
            this.selectedCountViewInFocus || this._hideItemView();
          },
          onKeydownSelectedCount: function (i) {
            switch (i.keyCode) {
              case 9:
                if (
                  i.shiftKey &&
                  !this.ui.dropdownContainer.hasClass("binf-hidden")
                )
                  i.preventDefault(),
                    i.stopPropagation(),
                    this.ui.ClearAllButton.trigger("focus");
                else {
                  var o = x.sortBy(this.children.toArray(), "cid");
                  (this.selectedCountViewInFocus = !0),
                    this.ui.ClearAllButton.is(":focus") &&
                      (o[this.currentlyFocusedIndex]?.$el?.trigger("focus"),
                      i.stopPropagation(),
                      i.preventDefault());
                }
                break;
              case 13:
                this.ui.ClearAllButton.is(":focus") && this.onClickClearAll(i);
                break;
              case 46:
                this.ui.ClearAllButton.is(":focus") &&
                  ((this.selectedCountViewInFocus = !0),
                  this.onClickClearAll(i));
                break;
              case 37:
              case 39:
                i.stopPropagation();
                break;
            }
          },
          onKeydownItem: function (i, o) {
            var n = x.sortBy(this.children.toArray(), "cid");
            switch ((o.preventDefault(), o.keyCode)) {
              case 46:
              case 13:
              case 32:
                this.onRemoveSelectedItem(i), o.stopPropagation();
                break;
              case 40:
                (this.selectedCountViewInFocus = !0),
                  i._index !== this.selectedCount - 1 &&
                    (n[i._index + 1]?.$el?.trigger("focus"),
                    (this.currentlyFocusedIndex = i._index + 1)),
                  o.stopPropagation();
                break;
              case 38:
                (this.selectedCountViewInFocus = !0),
                  i._index > 0 &&
                    (n[i._index - 1]?.$el?.trigger("focus"),
                    (this.currentlyFocusedIndex = i._index - 1)),
                  o.stopPropagation();
                break;
              case 37:
                o.stopPropagation();
                break;
              case 39:
                o.stopPropagation();
                break;
            }
          },
          onKeyupItem: function (i) {
            i.keyCode === 27 &&
              this.isDDOpen() &&
              ((this.currentlyFocusedIndex = 0),
              i.preventDefault(),
              i.stopPropagation(),
              this._hideItemView(),
              this.options.parentView?.selectedLabel.el.focus(),
              (this.selectedCountViewInFocus = !0));
          },
          onCollectionUpdate: function () {
            this.collection.length <= 4 &&
              this.ui.clearAll[0].classList.add("binf-hidden");
          },
        });
      return t;
    }
  ),
  csui.define(
    "hbs!csui/controls/selected.count/impl/selected.count.control",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          return `<div class="csui-selected-counter-region"></div>
<div class="csui-selected-dropdown"></div>`;
        },
      });
      return (
        p.registerPartial(
          "csui_controls_selected.count_impl_selected.count.control",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/selected.count/selected.count.control.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/selected.count/impl/selected.count.label.view",
      "csui/controls/selected.count/impl/selected.items.collection.view",
      "hbs!csui/controls/selected.count/impl/selected.count.control",
      "css!csui/controls/selected.count/impl/selected.count",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      return m.View.extend({
        className: "csui-selected-count",
        template: e,
        regions: {
          selectedLabel: ".csui-selected-counter-region",
          selectedItemsDropdown: ".csui-selected-dropdown",
        },
        constructor: function (d) {
          d || (d = {}),
            (this.options = d),
            (this.options.collection = this.options.collection),
            m.View.prototype.constructor.apply(this, arguments);
        },
        behaviors: { TabableRegion: { behaviorClass: p } },
        onRender: function () {
          (this.selectedLabel = new y({
            collection: this.options.collection,
            parentView: this,
          })),
            this._regions.selectedLabel.show(this.selectedLabel);
        },
        showSelectedDropdown: function () {
          (this.selectedItemsCollectionView = new s({
            collection: this.options.collection,
            parentView: this,
          })),
            this._regions.selectedItemsDropdown.show(
              this.selectedItemsCollectionView
            );
        },
        destroySelectedDropdown: function () {
          this.selectedLabel?.el?.ariaExpanded === "true" &&
            (this.selectedLabel.el.ariaExpanded = !1),
            this.selectedItemsCollectionView?.destroy();
        },
        currentlyFocusedElement: function () {
          return this.selectedLabel?.el;
        },
        resetState: function () {
          this.selectedItemsCollectionView?.resetState();
        },
      });
    }
  );
csui.define(
  "csui/lib/jquery.simulate",
  ["module", "csui/lib/jquery"],
  function (x, m) {
    (function (p, y) {
      "use strict";
      var s = /^key/,
        e = /^(?:mouse|contextmenu)|click/,
        r = /\[object (?:HTML)?Document\]/;
      function a(o) {
        return r.test(Object.prototype.toString.call(o));
      }
      function d(o) {
        for (var n = 0; n < window.frames.length; n += 1)
          if (window.frames[n] && window.frames[n].document === o)
            return window.frames[n];
        return window;
      }
      (p.fn.simulate = function (o, n) {
        return this.each(function () {
          new p.simulate(this, o, n);
        });
      }),
        (p.simulate = function (o, n, u) {
          var c = p.camelCase("simulate-" + n);
          (this.target = o),
            (this.options = u || {}),
            this[c] ? this[c]() : this.simulateEvent(o, n, this.options);
        }),
        p.extend(p.simulate, {
          keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38,
          },
          buttonCode: { LEFT: 0, MIDDLE: 1, RIGHT: 2 },
        }),
        p.extend(p.simulate.prototype, {
          simulateEvent: function (o, n, u) {
            var c = this.createEvent(n, u);
            this.dispatchEvent(o, n, c, u);
          },
          createEvent: function (o, n) {
            if (s.test(o)) return this.keyEvent(o, n);
            if (e.test(o)) return this.mouseEvent(o, n);
          },
          mouseEvent: function (o, n) {
            var u,
              c,
              h = a(this.target)
                ? this.target
                : this.target.ownerDocument || document,
              f,
              k;
            return (
              (n = p.extend(
                {
                  bubbles: !0,
                  cancelable: o !== "mousemove",
                  view: d(h),
                  detail: 0,
                  screenX: 0,
                  screenY: 0,
                  clientX: 1,
                  clientY: 1,
                  ctrlKey: !1,
                  altKey: !1,
                  shiftKey: !1,
                  metaKey: !1,
                  button: 0,
                  relatedTarget: y,
                },
                n
              )),
              h.createEvent
                ? ((u = h.createEvent("MouseEvents")),
                  u.initMouseEvent(
                    o,
                    n.bubbles,
                    n.cancelable,
                    n.view,
                    n.detail,
                    n.screenX,
                    n.screenY,
                    n.clientX,
                    n.clientY,
                    n.ctrlKey,
                    n.altKey,
                    n.shiftKey,
                    n.metaKey,
                    n.button,
                    n.relatedTarget || h.body.parentNode
                  ),
                  u.pageX === 0 &&
                    u.pageY === 0 &&
                    Object.defineProperty &&
                    ((c = a(u.relatedTarget)
                      ? u.relatedTarget
                      : u.relatedTarget.ownerDocument || document),
                    (f = c.documentElement),
                    (k = c.body),
                    Object.defineProperty(u, "pageX", {
                      get: function () {
                        return (
                          n.clientX +
                          ((f && f.scrollLeft) || (k && k.scrollLeft) || 0) -
                          ((f && f.clientLeft) || (k && k.clientLeft) || 0)
                        );
                      },
                    }),
                    Object.defineProperty(u, "pageY", {
                      get: function () {
                        return (
                          n.clientY +
                          ((f && f.scrollTop) || (k && k.scrollTop) || 0) -
                          ((f && f.clientTop) || (k && k.clientTop) || 0)
                        );
                      },
                    })))
                : h.createEventObject &&
                  ((u = h.createEventObject()),
                  p.extend(u, n),
                  (u.button = { 0: 1, 1: 4, 2: 2 }[u.button] || u.button)),
              u
            );
          },
          keyEvent: function (o, n) {
            var u, c;
            if (
              ((n = p.extend(
                {
                  bubbles: !0,
                  cancelable: !0,
                  view: d(c),
                  ctrlKey: !1,
                  altKey: !1,
                  shiftKey: !1,
                  metaKey: !1,
                  keyCode: 0,
                  charCode: y,
                },
                n
              )),
              (c = a(this.target)
                ? this.target
                : this.target.ownerDocument || document),
              c.createEvent)
            )
              try {
                (u = c.createEvent("KeyEvents")),
                  u.initKeyEvent(
                    o,
                    n.bubbles,
                    n.cancelable,
                    n.view,
                    n.ctrlKey,
                    n.altKey,
                    n.shiftKey,
                    n.metaKey,
                    n.keyCode,
                    n.charCode
                  );
              } catch {
                (u = c.createEvent("Events")),
                  u.initEvent(o, n.bubbles, n.cancelable),
                  p.extend(u, {
                    view: n.view,
                    ctrlKey: n.ctrlKey,
                    altKey: n.altKey,
                    shiftKey: n.shiftKey,
                    metaKey: n.metaKey,
                    keyCode: n.keyCode,
                    charCode: n.charCode,
                  });
              }
            else
              c.createEventObject &&
                ((u = c.createEventObject()), p.extend(u, n));
            return (
              (/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()) ||
                {}.toString.call(window.opera) === "[object Opera]") &&
                ((u.keyCode = n.charCode > 0 ? n.charCode : n.keyCode),
                (u.charCode = y)),
              u
            );
          },
          dispatchEvent: function (o, n, u, c) {
            c.jQueryTrigger === !0
              ? p(o).trigger(p.extend({}, u, c, { type: n }))
              : o.dispatchEvent
              ? o.dispatchEvent(u)
              : o.fireEvent && o.fireEvent("on" + n, u);
          },
          simulateFocus: function () {
            var o,
              n = !1,
              u = p(this.target);
            function c() {
              n = !0;
            }
            u.on("focus", c),
              u.first().trigger("focus"),
              n ||
                ((o = p.Event("focusin")),
                o.preventDefault(),
                u.trigger(o),
                u.triggerHandler("focus")),
              u.unbind("focus", c);
          },
          simulateBlur: function () {
            var o,
              n = !1,
              u = p(this.target);
            function c() {
              n = !0;
            }
            u.on("blur", c),
              u.first().trigger("blur"),
              setTimeout(function () {
                u[0].ownerDocument.activeElement === u[0] &&
                  p(u[0].ownerDocument.body).trigger("focus"),
                  n ||
                    ((o = p.Event("focusout")),
                    o.preventDefault(),
                    u.trigger(o),
                    u.triggerHandler("blur")),
                  u.off("blur", c);
              }, 1);
          },
        });
      function t(o) {
        var n,
          u,
          c = p(o);
        return (
          a(c[0])
            ? ((u = c), (n = { left: 0, top: 0 }))
            : ((u = p(c[0].ownerDocument || document)), (n = c.offset())),
          {
            x: n.left + c.outerWidth() / 2 - u.scrollLeft(),
            y: n.top + c.outerHeight() / 2 - u.scrollTop(),
          }
        );
      }
      function i(o) {
        var n,
          u,
          c = p(o);
        return (
          a(c[0])
            ? ((u = c), (n = { left: 0, top: 0 }))
            : ((u = p(c[0].ownerDocument || document)), (n = c.offset())),
          { x: n.left - document.scrollLeft(), y: n.top - document.scrollTop() }
        );
      }
      p.extend(p.simulate.prototype, {
        simulateDrag: function () {
          var o = 0,
            n = this.target,
            u = this.options,
            c = u.handle === "corner" ? i(n) : t(n),
            h = Math.floor(c.x),
            f = Math.floor(c.y),
            k = { clientX: h, clientY: f },
            C = u.dx || (u.x !== y ? u.x - h : 0),
            S = u.dy || (u.y !== y ? u.y - f : 0),
            w = u.moves || 3;
          for (this.simulateEvent(n, "mousedown", k); o < w; o++)
            (h += C / w),
              (f += S / w),
              (k = { clientX: Math.round(h), clientY: Math.round(f) }),
              this.simulateEvent(n.ownerDocument, "mousemove", k);
          p.contains(document, n)
            ? (this.simulateEvent(n, "mouseup", k),
              this.simulateEvent(n, "click", k))
            : this.simulateEvent(document, "mouseup", k);
        },
      });
    })(m);
  }
);
csui.define("csui/lib/othelp", [], function () {
  let x;
  function m(s, e) {
    x = e();
  }
  m.amd = !0;
  function p() {
    throw new Error("Not imlemented");
  }
  (function (s, e) {
    typeof exports == "object"
      ? (module.exports = exports = e())
      : typeof m == "function" && m.amd
      ? m([], e)
      : (s.CryptoJS = e());
  })(this, function () {
    var s =
      s ||
      (function (e, r) {
        var a;
        if (
          (typeof window < "u" && window.crypto && (a = window.crypto),
          !a && typeof window < "u" && window.msCrypto && (a = window.msCrypto),
          !a && typeof global < "u" && global.crypto && (a = global.crypto),
          !a && typeof p == "function")
        )
          try {
            a = p("crypto");
          } catch {}
        var d = function () {
            if (a) {
              if (typeof a.getRandomValues == "function")
                try {
                  return a.getRandomValues(new Uint32Array(1))[0];
                } catch {}
              if (typeof a.randomBytes == "function")
                try {
                  return a.randomBytes(4).readInt32LE();
                } catch {}
            }
            throw new Error(
              "Native crypto module could not be used to get secure random number."
            );
          },
          t =
            Object.create ||
            (function () {
              function v() {}
              return function (b) {
                var _;
                return (
                  (v.prototype = b), (_ = new v()), (v.prototype = null), _
                );
              };
            })(),
          i = {},
          o = (i.lib = {}),
          n = (o.Base = (function () {
            return {
              extend: function (v) {
                var b = t(this);
                return (
                  v && b.mixIn(v),
                  (!b.hasOwnProperty("init") || this.init === b.init) &&
                    (b.init = function () {
                      b.$super.init.apply(this, arguments);
                    }),
                  (b.init.prototype = b),
                  (b.$super = this),
                  b
                );
              },
              create: function () {
                var v = this.extend();
                return v.init.apply(v, arguments), v;
              },
              init: function () {},
              mixIn: function (v) {
                for (var b in v) v.hasOwnProperty(b) && (this[b] = v[b]);
                v.hasOwnProperty("toString") && (this.toString = v.toString);
              },
              clone: function () {
                return this.init.prototype.extend(this);
              },
            };
          })()),
          u = (o.WordArray = n.extend({
            init: function (v, b) {
              (v = this.words = v || []),
                b != r ? (this.sigBytes = b) : (this.sigBytes = v.length * 4);
            },
            toString: function (v) {
              return (v || h).stringify(this);
            },
            concat: function (v) {
              var b = this.words,
                _ = v.words,
                T = this.sigBytes,
                l = v.sigBytes;
              if ((this.clamp(), T % 4))
                for (var g = 0; g < l; g++) {
                  var I = (_[g >>> 2] >>> (24 - (g % 4) * 8)) & 255;
                  b[(T + g) >>> 2] |= I << (24 - ((T + g) % 4) * 8);
                }
              else for (var g = 0; g < l; g += 4) b[(T + g) >>> 2] = _[g >>> 2];
              return (this.sigBytes += l), this;
            },
            clamp: function () {
              var v = this.words,
                b = this.sigBytes;
              (v[b >>> 2] &= 4294967295 << (32 - (b % 4) * 8)),
                (v.length = e.ceil(b / 4));
            },
            clone: function () {
              var v = n.clone.call(this);
              return (v.words = this.words.slice(0)), v;
            },
            random: function (v) {
              for (var b = [], _ = 0; _ < v; _ += 4) b.push(d());
              return new u.init(b, v);
            },
          })),
          c = (i.enc = {}),
          h = (c.Hex = {
            stringify: function (v) {
              for (var b = v.words, _ = v.sigBytes, T = [], l = 0; l < _; l++) {
                var g = (b[l >>> 2] >>> (24 - (l % 4) * 8)) & 255;
                T.push((g >>> 4).toString(16)), T.push((g & 15).toString(16));
              }
              return T.join("");
            },
            parse: function (v) {
              for (var b = v.length, _ = [], T = 0; T < b; T += 2)
                _[T >>> 3] |=
                  parseInt(v.substr(T, 2), 16) << (24 - (T % 8) * 4);
              return new u.init(_, b / 2);
            },
          }),
          f = (c.Latin1 = {
            stringify: function (v) {
              for (var b = v.words, _ = v.sigBytes, T = [], l = 0; l < _; l++) {
                var g = (b[l >>> 2] >>> (24 - (l % 4) * 8)) & 255;
                T.push(String.fromCharCode(g));
              }
              return T.join("");
            },
            parse: function (v) {
              for (var b = v.length, _ = [], T = 0; T < b; T++)
                _[T >>> 2] |= (v.charCodeAt(T) & 255) << (24 - (T % 4) * 8);
              return new u.init(_, b);
            },
          }),
          k = (c.Utf8 = {
            stringify: function (v) {
              try {
                return decodeURIComponent(escape(f.stringify(v)));
              } catch {
                throw new Error("Malformed UTF-8 data");
              }
            },
            parse: function (v) {
              return f.parse(unescape(encodeURIComponent(v)));
            },
          }),
          C = (o.BufferedBlockAlgorithm = n.extend({
            reset: function () {
              (this._data = new u.init()), (this._nDataBytes = 0);
            },
            _append: function (v) {
              typeof v == "string" && (v = k.parse(v)),
                this._data.concat(v),
                (this._nDataBytes += v.sigBytes);
            },
            _process: function (v) {
              var b,
                _ = this._data,
                T = _.words,
                l = _.sigBytes,
                g = this.blockSize,
                I = g * 4,
                D = l / I;
              v
                ? (D = e.ceil(D))
                : (D = e.max((D | 0) - this._minBufferSize, 0));
              var A = D * g,
                B = e.min(A * 4, l);
              if (A) {
                for (var M = 0; M < A; M += g) this._doProcessBlock(T, M);
                (b = T.splice(0, A)), (_.sigBytes -= B);
              }
              return new u.init(b, B);
            },
            clone: function () {
              var v = n.clone.call(this);
              return (v._data = this._data.clone()), v;
            },
            _minBufferSize: 0,
          })),
          S = (o.Hasher = C.extend({
            cfg: n.extend(),
            init: function (v) {
              (this.cfg = this.cfg.extend(v)), this.reset();
            },
            reset: function () {
              C.reset.call(this), this._doReset();
            },
            update: function (v) {
              return this._append(v), this._process(), this;
            },
            finalize: function (v) {
              v && this._append(v);
              var b = this._doFinalize();
              return b;
            },
            blockSize: 512 / 32,
            _createHelper: function (v) {
              return function (b, _) {
                return new v.init(_).finalize(b);
              };
            },
            _createHmacHelper: function (v) {
              return function (b, _) {
                return new w.HMAC.init(v, _).finalize(b);
              };
            },
          })),
          w = (i.algo = {});
        return i;
      })(Math);
    return (
      (function () {
        var e = s,
          r = e.lib,
          a = r.WordArray,
          d = e.enc,
          t = (d.Base64 = {
            stringify: function (o) {
              var n = o.words,
                u = o.sigBytes,
                c = this._map;
              o.clamp();
              for (var h = [], f = 0; f < u; f += 3)
                for (
                  var k = (n[f >>> 2] >>> (24 - (f % 4) * 8)) & 255,
                    C = (n[(f + 1) >>> 2] >>> (24 - ((f + 1) % 4) * 8)) & 255,
                    S = (n[(f + 2) >>> 2] >>> (24 - ((f + 2) % 4) * 8)) & 255,
                    w = (k << 16) | (C << 8) | S,
                    v = 0;
                  v < 4 && f + v * 0.75 < u;
                  v++
                )
                  h.push(c.charAt((w >>> (6 * (3 - v))) & 63));
              var b = c.charAt(64);
              if (b) for (; h.length % 4; ) h.push(b);
              return h.join("");
            },
            parse: function (o) {
              var n = o.length,
                u = this._map,
                c = this._reverseMap;
              if (!c) {
                c = this._reverseMap = [];
                for (var h = 0; h < u.length; h++) c[u.charCodeAt(h)] = h;
              }
              var f = u.charAt(64);
              if (f) {
                var k = o.indexOf(f);
                k !== -1 && (n = k);
              }
              return i(o, n, c);
            },
            _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
          });
        function i(o, n, u) {
          for (var c = [], h = 0, f = 0; f < n; f++)
            if (f % 4) {
              var k = u[o.charCodeAt(f - 1)] << ((f % 4) * 2),
                C = u[o.charCodeAt(f)] >>> (6 - (f % 4) * 2),
                S = k | C;
              (c[h >>> 2] |= S << (24 - (h % 4) * 8)), h++;
            }
          return a.create(c, h);
        }
      })(),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.WordArray,
          t = a.Hasher,
          i = r.algo,
          o = [];
        (function () {
          for (var k = 0; k < 64; k++)
            o[k] = (e.abs(e.sin(k + 1)) * 4294967296) | 0;
        })();
        var n = (i.MD5 = t.extend({
          _doReset: function () {
            this._hash = new d.init([
              1732584193, 4023233417, 2562383102, 271733878,
            ]);
          },
          _doProcessBlock: function (k, C) {
            for (var S = 0; S < 16; S++) {
              var w = C + S,
                v = k[w];
              k[w] =
                (((v << 8) | (v >>> 24)) & 16711935) |
                (((v << 24) | (v >>> 8)) & 4278255360);
            }
            var b = this._hash.words,
              _ = k[C + 0],
              T = k[C + 1],
              l = k[C + 2],
              g = k[C + 3],
              I = k[C + 4],
              D = k[C + 5],
              A = k[C + 6],
              B = k[C + 7],
              M = k[C + 8],
              E = k[C + 9],
              P = k[C + 10],
              O = k[C + 11],
              z = k[C + 12],
              j = k[C + 13],
              U = k[C + 14],
              H = k[C + 15],
              N = b[0],
              V = b[1],
              L = b[2],
              F = b[3];
            (N = u(N, V, L, F, _, 7, o[0])),
              (F = u(F, N, V, L, T, 12, o[1])),
              (L = u(L, F, N, V, l, 17, o[2])),
              (V = u(V, L, F, N, g, 22, o[3])),
              (N = u(N, V, L, F, I, 7, o[4])),
              (F = u(F, N, V, L, D, 12, o[5])),
              (L = u(L, F, N, V, A, 17, o[6])),
              (V = u(V, L, F, N, B, 22, o[7])),
              (N = u(N, V, L, F, M, 7, o[8])),
              (F = u(F, N, V, L, E, 12, o[9])),
              (L = u(L, F, N, V, P, 17, o[10])),
              (V = u(V, L, F, N, O, 22, o[11])),
              (N = u(N, V, L, F, z, 7, o[12])),
              (F = u(F, N, V, L, j, 12, o[13])),
              (L = u(L, F, N, V, U, 17, o[14])),
              (V = u(V, L, F, N, H, 22, o[15])),
              (N = c(N, V, L, F, T, 5, o[16])),
              (F = c(F, N, V, L, A, 9, o[17])),
              (L = c(L, F, N, V, O, 14, o[18])),
              (V = c(V, L, F, N, _, 20, o[19])),
              (N = c(N, V, L, F, D, 5, o[20])),
              (F = c(F, N, V, L, P, 9, o[21])),
              (L = c(L, F, N, V, H, 14, o[22])),
              (V = c(V, L, F, N, I, 20, o[23])),
              (N = c(N, V, L, F, E, 5, o[24])),
              (F = c(F, N, V, L, U, 9, o[25])),
              (L = c(L, F, N, V, g, 14, o[26])),
              (V = c(V, L, F, N, M, 20, o[27])),
              (N = c(N, V, L, F, j, 5, o[28])),
              (F = c(F, N, V, L, l, 9, o[29])),
              (L = c(L, F, N, V, B, 14, o[30])),
              (V = c(V, L, F, N, z, 20, o[31])),
              (N = h(N, V, L, F, D, 4, o[32])),
              (F = h(F, N, V, L, M, 11, o[33])),
              (L = h(L, F, N, V, O, 16, o[34])),
              (V = h(V, L, F, N, U, 23, o[35])),
              (N = h(N, V, L, F, T, 4, o[36])),
              (F = h(F, N, V, L, I, 11, o[37])),
              (L = h(L, F, N, V, B, 16, o[38])),
              (V = h(V, L, F, N, P, 23, o[39])),
              (N = h(N, V, L, F, j, 4, o[40])),
              (F = h(F, N, V, L, _, 11, o[41])),
              (L = h(L, F, N, V, g, 16, o[42])),
              (V = h(V, L, F, N, A, 23, o[43])),
              (N = h(N, V, L, F, E, 4, o[44])),
              (F = h(F, N, V, L, z, 11, o[45])),
              (L = h(L, F, N, V, H, 16, o[46])),
              (V = h(V, L, F, N, l, 23, o[47])),
              (N = f(N, V, L, F, _, 6, o[48])),
              (F = f(F, N, V, L, B, 10, o[49])),
              (L = f(L, F, N, V, U, 15, o[50])),
              (V = f(V, L, F, N, D, 21, o[51])),
              (N = f(N, V, L, F, z, 6, o[52])),
              (F = f(F, N, V, L, g, 10, o[53])),
              (L = f(L, F, N, V, P, 15, o[54])),
              (V = f(V, L, F, N, T, 21, o[55])),
              (N = f(N, V, L, F, M, 6, o[56])),
              (F = f(F, N, V, L, H, 10, o[57])),
              (L = f(L, F, N, V, A, 15, o[58])),
              (V = f(V, L, F, N, j, 21, o[59])),
              (N = f(N, V, L, F, I, 6, o[60])),
              (F = f(F, N, V, L, O, 10, o[61])),
              (L = f(L, F, N, V, l, 15, o[62])),
              (V = f(V, L, F, N, E, 21, o[63])),
              (b[0] = (b[0] + N) | 0),
              (b[1] = (b[1] + V) | 0),
              (b[2] = (b[2] + L) | 0),
              (b[3] = (b[3] + F) | 0);
          },
          _doFinalize: function () {
            var k = this._data,
              C = k.words,
              S = this._nDataBytes * 8,
              w = k.sigBytes * 8;
            C[w >>> 5] |= 128 << (24 - (w % 32));
            var v = e.floor(S / 4294967296),
              b = S;
            (C[(((w + 64) >>> 9) << 4) + 15] =
              (((v << 8) | (v >>> 24)) & 16711935) |
              (((v << 24) | (v >>> 8)) & 4278255360)),
              (C[(((w + 64) >>> 9) << 4) + 14] =
                (((b << 8) | (b >>> 24)) & 16711935) |
                (((b << 24) | (b >>> 8)) & 4278255360)),
              (k.sigBytes = (C.length + 1) * 4),
              this._process();
            for (var _ = this._hash, T = _.words, l = 0; l < 4; l++) {
              var g = T[l];
              T[l] =
                (((g << 8) | (g >>> 24)) & 16711935) |
                (((g << 24) | (g >>> 8)) & 4278255360);
            }
            return _;
          },
          clone: function () {
            var k = t.clone.call(this);
            return (k._hash = this._hash.clone()), k;
          },
        }));
        function u(k, C, S, w, v, b, _) {
          var T = k + ((C & S) | (~C & w)) + v + _;
          return ((T << b) | (T >>> (32 - b))) + C;
        }
        function c(k, C, S, w, v, b, _) {
          var T = k + ((C & w) | (S & ~w)) + v + _;
          return ((T << b) | (T >>> (32 - b))) + C;
        }
        function h(k, C, S, w, v, b, _) {
          var T = k + (C ^ S ^ w) + v + _;
          return ((T << b) | (T >>> (32 - b))) + C;
        }
        function f(k, C, S, w, v, b, _) {
          var T = k + (S ^ (C | ~w)) + v + _;
          return ((T << b) | (T >>> (32 - b))) + C;
        }
        (r.MD5 = t._createHelper(n)), (r.HmacMD5 = t._createHmacHelper(n));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          a = r.WordArray,
          d = r.Hasher,
          t = e.algo,
          i = [],
          o = (t.SHA1 = d.extend({
            _doReset: function () {
              this._hash = new a.init([
                1732584193, 4023233417, 2562383102, 271733878, 3285377520,
              ]);
            },
            _doProcessBlock: function (n, u) {
              for (
                var c = this._hash.words,
                  h = c[0],
                  f = c[1],
                  k = c[2],
                  C = c[3],
                  S = c[4],
                  w = 0;
                w < 80;
                w++
              ) {
                if (w < 16) i[w] = n[u + w] | 0;
                else {
                  var v = i[w - 3] ^ i[w - 8] ^ i[w - 14] ^ i[w - 16];
                  i[w] = (v << 1) | (v >>> 31);
                }
                var b = ((h << 5) | (h >>> 27)) + S + i[w];
                w < 20
                  ? (b += ((f & k) | (~f & C)) + 1518500249)
                  : w < 40
                  ? (b += (f ^ k ^ C) + 1859775393)
                  : w < 60
                  ? (b += ((f & k) | (f & C) | (k & C)) - 1894007588)
                  : (b += (f ^ k ^ C) - 899497514),
                  (S = C),
                  (C = k),
                  (k = (f << 30) | (f >>> 2)),
                  (f = h),
                  (h = b);
              }
              (c[0] = (c[0] + h) | 0),
                (c[1] = (c[1] + f) | 0),
                (c[2] = (c[2] + k) | 0),
                (c[3] = (c[3] + C) | 0),
                (c[4] = (c[4] + S) | 0);
            },
            _doFinalize: function () {
              var n = this._data,
                u = n.words,
                c = this._nDataBytes * 8,
                h = n.sigBytes * 8;
              return (
                (u[h >>> 5] |= 128 << (24 - (h % 32))),
                (u[(((h + 64) >>> 9) << 4) + 14] = Math.floor(c / 4294967296)),
                (u[(((h + 64) >>> 9) << 4) + 15] = c),
                (n.sigBytes = u.length * 4),
                this._process(),
                this._hash
              );
            },
            clone: function () {
              var n = d.clone.call(this);
              return (n._hash = this._hash.clone()), n;
            },
          }));
        (e.SHA1 = d._createHelper(o)), (e.HmacSHA1 = d._createHmacHelper(o));
      })(),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.WordArray,
          t = a.Hasher,
          i = r.algo,
          o = [],
          n = [];
        (function () {
          function h(S) {
            for (var w = e.sqrt(S), v = 2; v <= w; v++) if (!(S % v)) return !1;
            return !0;
          }
          function f(S) {
            return ((S - (S | 0)) * 4294967296) | 0;
          }
          for (var k = 2, C = 0; C < 64; )
            h(k) &&
              (C < 8 && (o[C] = f(e.pow(k, 1 / 2))),
              (n[C] = f(e.pow(k, 1 / 3))),
              C++),
              k++;
        })();
        var u = [],
          c = (i.SHA256 = t.extend({
            _doReset: function () {
              this._hash = new d.init(o.slice(0));
            },
            _doProcessBlock: function (h, f) {
              for (
                var k = this._hash.words,
                  C = k[0],
                  S = k[1],
                  w = k[2],
                  v = k[3],
                  b = k[4],
                  _ = k[5],
                  T = k[6],
                  l = k[7],
                  g = 0;
                g < 64;
                g++
              ) {
                if (g < 16) u[g] = h[f + g] | 0;
                else {
                  var I = u[g - 15],
                    D =
                      ((I << 25) | (I >>> 7)) ^
                      ((I << 14) | (I >>> 18)) ^
                      (I >>> 3),
                    A = u[g - 2],
                    B =
                      ((A << 15) | (A >>> 17)) ^
                      ((A << 13) | (A >>> 19)) ^
                      (A >>> 10);
                  u[g] = D + u[g - 7] + B + u[g - 16];
                }
                var M = (b & _) ^ (~b & T),
                  E = (C & S) ^ (C & w) ^ (S & w),
                  P =
                    ((C << 30) | (C >>> 2)) ^
                    ((C << 19) | (C >>> 13)) ^
                    ((C << 10) | (C >>> 22)),
                  O =
                    ((b << 26) | (b >>> 6)) ^
                    ((b << 21) | (b >>> 11)) ^
                    ((b << 7) | (b >>> 25)),
                  z = l + O + M + n[g] + u[g],
                  j = P + E;
                (l = T),
                  (T = _),
                  (_ = b),
                  (b = (v + z) | 0),
                  (v = w),
                  (w = S),
                  (S = C),
                  (C = (z + j) | 0);
              }
              (k[0] = (k[0] + C) | 0),
                (k[1] = (k[1] + S) | 0),
                (k[2] = (k[2] + w) | 0),
                (k[3] = (k[3] + v) | 0),
                (k[4] = (k[4] + b) | 0),
                (k[5] = (k[5] + _) | 0),
                (k[6] = (k[6] + T) | 0),
                (k[7] = (k[7] + l) | 0);
            },
            _doFinalize: function () {
              var h = this._data,
                f = h.words,
                k = this._nDataBytes * 8,
                C = h.sigBytes * 8;
              return (
                (f[C >>> 5] |= 128 << (24 - (C % 32))),
                (f[(((C + 64) >>> 9) << 4) + 14] = e.floor(k / 4294967296)),
                (f[(((C + 64) >>> 9) << 4) + 15] = k),
                (h.sigBytes = f.length * 4),
                this._process(),
                this._hash
              );
            },
            clone: function () {
              var h = t.clone.call(this);
              return (h._hash = this._hash.clone()), h;
            },
          }));
        (r.SHA256 = t._createHelper(c)),
          (r.HmacSHA256 = t._createHmacHelper(c));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          a = r.WordArray,
          d = e.enc,
          t =
            (d.Utf16 =
            d.Utf16BE =
              {
                stringify: function (o) {
                  for (
                    var n = o.words, u = o.sigBytes, c = [], h = 0;
                    h < u;
                    h += 2
                  ) {
                    var f = (n[h >>> 2] >>> (16 - (h % 4) * 8)) & 65535;
                    c.push(String.fromCharCode(f));
                  }
                  return c.join("");
                },
                parse: function (o) {
                  for (var n = o.length, u = [], c = 0; c < n; c++)
                    u[c >>> 1] |= o.charCodeAt(c) << (16 - (c % 2) * 16);
                  return a.create(u, n * 2);
                },
              });
        d.Utf16LE = {
          stringify: function (o) {
            for (
              var n = o.words, u = o.sigBytes, c = [], h = 0;
              h < u;
              h += 2
            ) {
              var f = i((n[h >>> 2] >>> (16 - (h % 4) * 8)) & 65535);
              c.push(String.fromCharCode(f));
            }
            return c.join("");
          },
          parse: function (o) {
            for (var n = o.length, u = [], c = 0; c < n; c++)
              u[c >>> 1] |= i(o.charCodeAt(c) << (16 - (c % 2) * 16));
            return a.create(u, n * 2);
          },
        };
        function i(o) {
          return ((o << 8) & 4278255360) | ((o >>> 8) & 16711935);
        }
      })(),
      (function () {
        if (typeof ArrayBuffer == "function") {
          var e = s,
            r = e.lib,
            a = r.WordArray,
            d = a.init,
            t = (a.init = function (i) {
              if (
                (i instanceof ArrayBuffer && (i = new Uint8Array(i)),
                (i instanceof Int8Array ||
                  (typeof Uint8ClampedArray < "u" &&
                    i instanceof Uint8ClampedArray) ||
                  i instanceof Int16Array ||
                  i instanceof Uint16Array ||
                  i instanceof Int32Array ||
                  i instanceof Uint32Array ||
                  i instanceof Float32Array ||
                  i instanceof Float64Array) &&
                  (i = new Uint8Array(i.buffer, i.byteOffset, i.byteLength)),
                i instanceof Uint8Array)
              ) {
                for (var o = i.byteLength, n = [], u = 0; u < o; u++)
                  n[u >>> 2] |= i[u] << (24 - (u % 4) * 8);
                d.call(this, n, o);
              } else d.apply(this, arguments);
            });
          t.prototype = a;
        }
      })(),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.WordArray,
          t = a.Hasher,
          i = r.algo,
          o = d.create([
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1,
            10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1,
            2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15,
            14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13,
          ]),
          n = d.create([
            5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7,
            0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9,
            11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13,
            9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11,
          ]),
          u = d.create([
            11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13,
            11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13,
            15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14,
            5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8,
            5, 6,
          ]),
          c = d.create([
            8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15,
            7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6,
            14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9,
            12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13,
            11, 11,
          ]),
          h = d.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),
          f = d.create([1352829926, 1548603684, 1836072691, 2053994217, 0]),
          k = (i.RIPEMD160 = t.extend({
            _doReset: function () {
              this._hash = d.create([
                1732584193, 4023233417, 2562383102, 271733878, 3285377520,
              ]);
            },
            _doProcessBlock: function (T, l) {
              for (var g = 0; g < 16; g++) {
                var I = l + g,
                  D = T[I];
                T[I] =
                  (((D << 8) | (D >>> 24)) & 16711935) |
                  (((D << 24) | (D >>> 8)) & 4278255360);
              }
              var A = this._hash.words,
                B = h.words,
                M = f.words,
                E = o.words,
                P = n.words,
                O = u.words,
                z = c.words,
                j,
                U,
                H,
                N,
                V,
                L,
                F,
                G,
                W,
                q;
              (L = j = A[0]),
                (F = U = A[1]),
                (G = H = A[2]),
                (W = N = A[3]),
                (q = V = A[4]);
              for (var R, g = 0; g < 80; g += 1)
                (R = (j + T[l + E[g]]) | 0),
                  g < 16
                    ? (R += C(U, H, N) + B[0])
                    : g < 32
                    ? (R += S(U, H, N) + B[1])
                    : g < 48
                    ? (R += w(U, H, N) + B[2])
                    : g < 64
                    ? (R += v(U, H, N) + B[3])
                    : (R += b(U, H, N) + B[4]),
                  (R = R | 0),
                  (R = _(R, O[g])),
                  (R = (R + V) | 0),
                  (j = V),
                  (V = N),
                  (N = _(H, 10)),
                  (H = U),
                  (U = R),
                  (R = (L + T[l + P[g]]) | 0),
                  g < 16
                    ? (R += b(F, G, W) + M[0])
                    : g < 32
                    ? (R += v(F, G, W) + M[1])
                    : g < 48
                    ? (R += w(F, G, W) + M[2])
                    : g < 64
                    ? (R += S(F, G, W) + M[3])
                    : (R += C(F, G, W) + M[4]),
                  (R = R | 0),
                  (R = _(R, z[g])),
                  (R = (R + q) | 0),
                  (L = q),
                  (q = W),
                  (W = _(G, 10)),
                  (G = F),
                  (F = R);
              (R = (A[1] + H + W) | 0),
                (A[1] = (A[2] + N + q) | 0),
                (A[2] = (A[3] + V + L) | 0),
                (A[3] = (A[4] + j + F) | 0),
                (A[4] = (A[0] + U + G) | 0),
                (A[0] = R);
            },
            _doFinalize: function () {
              var T = this._data,
                l = T.words,
                g = this._nDataBytes * 8,
                I = T.sigBytes * 8;
              (l[I >>> 5] |= 128 << (24 - (I % 32))),
                (l[(((I + 64) >>> 9) << 4) + 14] =
                  (((g << 8) | (g >>> 24)) & 16711935) |
                  (((g << 24) | (g >>> 8)) & 4278255360)),
                (T.sigBytes = (l.length + 1) * 4),
                this._process();
              for (var D = this._hash, A = D.words, B = 0; B < 5; B++) {
                var M = A[B];
                A[B] =
                  (((M << 8) | (M >>> 24)) & 16711935) |
                  (((M << 24) | (M >>> 8)) & 4278255360);
              }
              return D;
            },
            clone: function () {
              var T = t.clone.call(this);
              return (T._hash = this._hash.clone()), T;
            },
          }));
        function C(T, l, g) {
          return T ^ l ^ g;
        }
        function S(T, l, g) {
          return (T & l) | (~T & g);
        }
        function w(T, l, g) {
          return (T | ~l) ^ g;
        }
        function v(T, l, g) {
          return (T & g) | (l & ~g);
        }
        function b(T, l, g) {
          return T ^ (l | ~g);
        }
        function _(T, l) {
          return (T << l) | (T >>> (32 - l));
        }
        (r.RIPEMD160 = t._createHelper(k)),
          (r.HmacRIPEMD160 = t._createHmacHelper(k));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          a = r.Base,
          d = e.enc,
          t = d.Utf8,
          i = e.algo,
          o = (i.HMAC = a.extend({
            init: function (n, u) {
              (n = this._hasher = new n.init()),
                typeof u == "string" && (u = t.parse(u));
              var c = n.blockSize,
                h = c * 4;
              u.sigBytes > h && (u = n.finalize(u)), u.clamp();
              for (
                var f = (this._oKey = u.clone()),
                  k = (this._iKey = u.clone()),
                  C = f.words,
                  S = k.words,
                  w = 0;
                w < c;
                w++
              )
                (C[w] ^= 1549556828), (S[w] ^= 909522486);
              (f.sigBytes = k.sigBytes = h), this.reset();
            },
            reset: function () {
              var n = this._hasher;
              n.reset(), n.update(this._iKey);
            },
            update: function (n) {
              return this._hasher.update(n), this;
            },
            finalize: function (n) {
              var u = this._hasher,
                c = u.finalize(n);
              u.reset();
              var h = u.finalize(this._oKey.clone().concat(c));
              return h;
            },
          }));
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.Base,
          d = r.WordArray,
          t = e.algo,
          i = t.SHA1,
          o = t.HMAC,
          n = (t.PBKDF2 = a.extend({
            cfg: a.extend({ keySize: 128 / 32, hasher: i, iterations: 1 }),
            init: function (u) {
              this.cfg = this.cfg.extend(u);
            },
            compute: function (u, c) {
              for (
                var h = this.cfg,
                  f = o.create(h.hasher, u),
                  k = d.create(),
                  C = d.create([1]),
                  S = k.words,
                  w = C.words,
                  v = h.keySize,
                  b = h.iterations;
                S.length < v;

              ) {
                var _ = f.update(c).finalize(C);
                f.reset();
                for (var T = _.words, l = T.length, g = _, I = 1; I < b; I++) {
                  (g = f.finalize(g)), f.reset();
                  for (var D = g.words, A = 0; A < l; A++) T[A] ^= D[A];
                }
                k.concat(_), w[0]++;
              }
              return (k.sigBytes = v * 4), k;
            },
          }));
        e.PBKDF2 = function (u, c, h) {
          return n.create(h).compute(u, c);
        };
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.Base,
          d = r.WordArray,
          t = e.algo,
          i = t.MD5,
          o = (t.EvpKDF = a.extend({
            cfg: a.extend({ keySize: 128 / 32, hasher: i, iterations: 1 }),
            init: function (n) {
              this.cfg = this.cfg.extend(n);
            },
            compute: function (n, u) {
              for (
                var c,
                  h = this.cfg,
                  f = h.hasher.create(),
                  k = d.create(),
                  C = k.words,
                  S = h.keySize,
                  w = h.iterations;
                C.length < S;

              ) {
                c && f.update(c), (c = f.update(n).finalize(u)), f.reset();
                for (var v = 1; v < w; v++) (c = f.finalize(c)), f.reset();
                k.concat(c);
              }
              return (k.sigBytes = S * 4), k;
            },
          }));
        e.EvpKDF = function (n, u, c) {
          return o.create(c).compute(n, u);
        };
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.WordArray,
          d = e.algo,
          t = d.SHA256,
          i = (d.SHA224 = t.extend({
            _doReset: function () {
              this._hash = new a.init([
                3238371032, 914150663, 812702999, 4144912697, 4290775857,
                1750603025, 1694076839, 3204075428,
              ]);
            },
            _doFinalize: function () {
              var o = t._doFinalize.call(this);
              return (o.sigBytes -= 4), o;
            },
          }));
        (e.SHA224 = t._createHelper(i)),
          (e.HmacSHA224 = t._createHmacHelper(i));
      })(),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.Base,
          t = a.WordArray,
          i = (r.x64 = {}),
          o = (i.Word = d.extend({
            init: function (u, c) {
              (this.high = u), (this.low = c);
            },
          })),
          n = (i.WordArray = d.extend({
            init: function (u, c) {
              (u = this.words = u || []),
                c != e ? (this.sigBytes = c) : (this.sigBytes = u.length * 8);
            },
            toX32: function () {
              for (
                var u = this.words, c = u.length, h = [], f = 0;
                f < c;
                f++
              ) {
                var k = u[f];
                h.push(k.high), h.push(k.low);
              }
              return t.create(h, this.sigBytes);
            },
            clone: function () {
              for (
                var u = d.clone.call(this),
                  c = (u.words = this.words.slice(0)),
                  h = c.length,
                  f = 0;
                f < h;
                f++
              )
                c[f] = c[f].clone();
              return u;
            },
          }));
      })(),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.WordArray,
          t = a.Hasher,
          i = r.x64,
          o = i.Word,
          n = r.algo,
          u = [],
          c = [],
          h = [];
        (function () {
          for (var C = 1, S = 0, w = 0; w < 24; w++) {
            u[C + 5 * S] = (((w + 1) * (w + 2)) / 2) % 64;
            var v = S % 5,
              b = (2 * C + 3 * S) % 5;
            (C = v), (S = b);
          }
          for (var C = 0; C < 5; C++)
            for (var S = 0; S < 5; S++)
              c[C + 5 * S] = S + ((2 * C + 3 * S) % 5) * 5;
          for (var _ = 1, T = 0; T < 24; T++) {
            for (var l = 0, g = 0, I = 0; I < 7; I++) {
              if (_ & 1) {
                var D = (1 << I) - 1;
                D < 32 ? (g ^= 1 << D) : (l ^= 1 << (D - 32));
              }
              _ & 128 ? (_ = (_ << 1) ^ 113) : (_ <<= 1);
            }
            h[T] = o.create(l, g);
          }
        })();
        var f = [];
        (function () {
          for (var C = 0; C < 25; C++) f[C] = o.create();
        })();
        var k = (n.SHA3 = t.extend({
          cfg: t.cfg.extend({ outputLength: 512 }),
          _doReset: function () {
            for (var C = (this._state = []), S = 0; S < 25; S++)
              C[S] = new o.init();
            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
          },
          _doProcessBlock: function (C, S) {
            for (
              var w = this._state, v = this.blockSize / 2, b = 0;
              b < v;
              b++
            ) {
              var _ = C[S + 2 * b],
                T = C[S + 2 * b + 1];
              (_ =
                (((_ << 8) | (_ >>> 24)) & 16711935) |
                (((_ << 24) | (_ >>> 8)) & 4278255360)),
                (T =
                  (((T << 8) | (T >>> 24)) & 16711935) |
                  (((T << 24) | (T >>> 8)) & 4278255360));
              var l = w[b];
              (l.high ^= T), (l.low ^= _);
            }
            for (var g = 0; g < 24; g++) {
              for (var I = 0; I < 5; I++) {
                for (var D = 0, A = 0, B = 0; B < 5; B++) {
                  var l = w[I + 5 * B];
                  (D ^= l.high), (A ^= l.low);
                }
                var M = f[I];
                (M.high = D), (M.low = A);
              }
              for (var I = 0; I < 5; I++)
                for (
                  var E = f[(I + 4) % 5],
                    P = f[(I + 1) % 5],
                    O = P.high,
                    z = P.low,
                    D = E.high ^ ((O << 1) | (z >>> 31)),
                    A = E.low ^ ((z << 1) | (O >>> 31)),
                    B = 0;
                  B < 5;
                  B++
                ) {
                  var l = w[I + 5 * B];
                  (l.high ^= D), (l.low ^= A);
                }
              for (var j = 1; j < 25; j++) {
                var D,
                  A,
                  l = w[j],
                  U = l.high,
                  H = l.low,
                  N = u[j];
                N < 32
                  ? ((D = (U << N) | (H >>> (32 - N))),
                    (A = (H << N) | (U >>> (32 - N))))
                  : ((D = (H << (N - 32)) | (U >>> (64 - N))),
                    (A = (U << (N - 32)) | (H >>> (64 - N))));
                var V = f[c[j]];
                (V.high = D), (V.low = A);
              }
              var L = f[0],
                F = w[0];
              (L.high = F.high), (L.low = F.low);
              for (var I = 0; I < 5; I++)
                for (var B = 0; B < 5; B++) {
                  var j = I + 5 * B,
                    l = w[j],
                    G = f[j],
                    W = f[((I + 1) % 5) + 5 * B],
                    q = f[((I + 2) % 5) + 5 * B];
                  (l.high = G.high ^ (~W.high & q.high)),
                    (l.low = G.low ^ (~W.low & q.low));
                }
              var l = w[0],
                R = h[g];
              (l.high ^= R.high), (l.low ^= R.low);
            }
          },
          _doFinalize: function () {
            var C = this._data,
              S = C.words,
              w = this._nDataBytes * 8,
              v = C.sigBytes * 8,
              b = this.blockSize * 32;
            (S[v >>> 5] |= 1 << (24 - (v % 32))),
              (S[((e.ceil((v + 1) / b) * b) >>> 5) - 1] |= 128),
              (C.sigBytes = S.length * 4),
              this._process();
            for (
              var _ = this._state,
                T = this.cfg.outputLength / 8,
                l = T / 8,
                g = [],
                I = 0;
              I < l;
              I++
            ) {
              var D = _[I],
                A = D.high,
                B = D.low;
              (A =
                (((A << 8) | (A >>> 24)) & 16711935) |
                (((A << 24) | (A >>> 8)) & 4278255360)),
                (B =
                  (((B << 8) | (B >>> 24)) & 16711935) |
                  (((B << 24) | (B >>> 8)) & 4278255360)),
                g.push(B),
                g.push(A);
            }
            return new d.init(g, T);
          },
          clone: function () {
            for (
              var C = t.clone.call(this),
                S = (C._state = this._state.slice(0)),
                w = 0;
              w < 25;
              w++
            )
              S[w] = S[w].clone();
            return C;
          },
        }));
        (r.SHA3 = t._createHelper(k)), (r.HmacSHA3 = t._createHmacHelper(k));
      })(Math),
      (function () {
        var e = s,
          r = e.lib,
          a = r.Hasher,
          d = e.x64,
          t = d.Word,
          i = d.WordArray,
          o = e.algo;
        function n() {
          return t.create.apply(t, arguments);
        }
        var u = [
            n(1116352408, 3609767458),
            n(1899447441, 602891725),
            n(3049323471, 3964484399),
            n(3921009573, 2173295548),
            n(961987163, 4081628472),
            n(1508970993, 3053834265),
            n(2453635748, 2937671579),
            n(2870763221, 3664609560),
            n(3624381080, 2734883394),
            n(310598401, 1164996542),
            n(607225278, 1323610764),
            n(1426881987, 3590304994),
            n(1925078388, 4068182383),
            n(2162078206, 991336113),
            n(2614888103, 633803317),
            n(3248222580, 3479774868),
            n(3835390401, 2666613458),
            n(4022224774, 944711139),
            n(264347078, 2341262773),
            n(604807628, 2007800933),
            n(770255983, 1495990901),
            n(1249150122, 1856431235),
            n(1555081692, 3175218132),
            n(1996064986, 2198950837),
            n(2554220882, 3999719339),
            n(2821834349, 766784016),
            n(2952996808, 2566594879),
            n(3210313671, 3203337956),
            n(3336571891, 1034457026),
            n(3584528711, 2466948901),
            n(113926993, 3758326383),
            n(338241895, 168717936),
            n(666307205, 1188179964),
            n(773529912, 1546045734),
            n(1294757372, 1522805485),
            n(1396182291, 2643833823),
            n(1695183700, 2343527390),
            n(1986661051, 1014477480),
            n(2177026350, 1206759142),
            n(2456956037, 344077627),
            n(2730485921, 1290863460),
            n(2820302411, 3158454273),
            n(3259730800, 3505952657),
            n(3345764771, 106217008),
            n(3516065817, 3606008344),
            n(3600352804, 1432725776),
            n(4094571909, 1467031594),
            n(275423344, 851169720),
            n(430227734, 3100823752),
            n(506948616, 1363258195),
            n(659060556, 3750685593),
            n(883997877, 3785050280),
            n(958139571, 3318307427),
            n(1322822218, 3812723403),
            n(1537002063, 2003034995),
            n(1747873779, 3602036899),
            n(1955562222, 1575990012),
            n(2024104815, 1125592928),
            n(2227730452, 2716904306),
            n(2361852424, 442776044),
            n(2428436474, 593698344),
            n(2756734187, 3733110249),
            n(3204031479, 2999351573),
            n(3329325298, 3815920427),
            n(3391569614, 3928383900),
            n(3515267271, 566280711),
            n(3940187606, 3454069534),
            n(4118630271, 4000239992),
            n(116418474, 1914138554),
            n(174292421, 2731055270),
            n(289380356, 3203993006),
            n(460393269, 320620315),
            n(685471733, 587496836),
            n(852142971, 1086792851),
            n(1017036298, 365543100),
            n(1126000580, 2618297676),
            n(1288033470, 3409855158),
            n(1501505948, 4234509866),
            n(1607167915, 987167468),
            n(1816402316, 1246189591),
          ],
          c = [];
        (function () {
          for (var f = 0; f < 80; f++) c[f] = n();
        })();
        var h = (o.SHA512 = a.extend({
          _doReset: function () {
            this._hash = new i.init([
              new t.init(1779033703, 4089235720),
              new t.init(3144134277, 2227873595),
              new t.init(1013904242, 4271175723),
              new t.init(2773480762, 1595750129),
              new t.init(1359893119, 2917565137),
              new t.init(2600822924, 725511199),
              new t.init(528734635, 4215389547),
              new t.init(1541459225, 327033209),
            ]);
          },
          _doProcessBlock: function (f, k) {
            for (
              var C = this._hash.words,
                S = C[0],
                w = C[1],
                v = C[2],
                b = C[3],
                _ = C[4],
                T = C[5],
                l = C[6],
                g = C[7],
                I = S.high,
                D = S.low,
                A = w.high,
                B = w.low,
                M = v.high,
                E = v.low,
                P = b.high,
                O = b.low,
                z = _.high,
                j = _.low,
                U = T.high,
                H = T.low,
                N = l.high,
                V = l.low,
                L = g.high,
                F = g.low,
                G = I,
                W = D,
                q = A,
                R = B,
                Q = M,
                X = E,
                te = P,
                Y = O,
                K = z,
                $ = j,
                ie = U,
                se = H,
                re = N,
                ce = V,
                pe = L,
                ue = F,
                ee = 0;
              ee < 80;
              ee++
            ) {
              var Z,
                oe,
                fe = c[ee];
              if (ee < 16)
                (oe = fe.high = f[k + ee * 2] | 0),
                  (Z = fe.low = f[k + ee * 2 + 1] | 0);
              else {
                var me = c[ee - 15],
                  le = me.high,
                  de = me.low,
                  Te =
                    ((le >>> 1) | (de << 31)) ^
                    ((le >>> 8) | (de << 24)) ^
                    (le >>> 7),
                  ge =
                    ((de >>> 1) | (le << 31)) ^
                    ((de >>> 8) | (le << 24)) ^
                    ((de >>> 7) | (le << 25)),
                  ve = c[ee - 2],
                  ae = ve.high,
                  he = ve.low,
                  Me =
                    ((ae >>> 19) | (he << 13)) ^
                    ((ae << 3) | (he >>> 29)) ^
                    (ae >>> 6),
                  be =
                    ((he >>> 19) | (ae << 13)) ^
                    ((he << 3) | (ae >>> 29)) ^
                    ((he >>> 6) | (ae << 26)),
                  we = c[ee - 7],
                  De = we.high,
                  Ae = we.low,
                  ye = c[ee - 16],
                  Ee = ye.high,
                  xe = ye.low;
                (Z = ge + Ae),
                  (oe = Te + De + (Z >>> 0 < ge >>> 0 ? 1 : 0)),
                  (Z = Z + be),
                  (oe = oe + Me + (Z >>> 0 < be >>> 0 ? 1 : 0)),
                  (Z = Z + xe),
                  (oe = oe + Ee + (Z >>> 0 < xe >>> 0 ? 1 : 0)),
                  (fe.high = oe),
                  (fe.low = Z);
              }
              var Be = (K & ie) ^ (~K & re),
                ke = ($ & se) ^ (~$ & ce),
                Pe = (G & q) ^ (G & Q) ^ (q & Q),
                Oe = (W & R) ^ (W & X) ^ (R & X),
                Ve =
                  ((G >>> 28) | (W << 4)) ^
                  ((G << 30) | (W >>> 2)) ^
                  ((G << 25) | (W >>> 7)),
                Ce =
                  ((W >>> 28) | (G << 4)) ^
                  ((W << 30) | (G >>> 2)) ^
                  ((W << 25) | (G >>> 7)),
                Ne =
                  ((K >>> 14) | ($ << 18)) ^
                  ((K >>> 18) | ($ << 14)) ^
                  ((K << 23) | ($ >>> 9)),
                Le =
                  (($ >>> 14) | (K << 18)) ^
                  (($ >>> 18) | (K << 14)) ^
                  (($ << 23) | (K >>> 9)),
                _e = u[ee],
                Fe = _e.high,
                Se = _e.low,
                J = ue + Le,
                ne = pe + Ne + (J >>> 0 < ue >>> 0 ? 1 : 0),
                J = J + ke,
                ne = ne + Be + (J >>> 0 < ke >>> 0 ? 1 : 0),
                J = J + Se,
                ne = ne + Fe + (J >>> 0 < Se >>> 0 ? 1 : 0),
                J = J + Z,
                ne = ne + oe + (J >>> 0 < Z >>> 0 ? 1 : 0),
                Ie = Ce + Oe,
                je = Ve + Pe + (Ie >>> 0 < Ce >>> 0 ? 1 : 0);
              (pe = re),
                (ue = ce),
                (re = ie),
                (ce = se),
                (ie = K),
                (se = $),
                ($ = (Y + J) | 0),
                (K = (te + ne + ($ >>> 0 < Y >>> 0 ? 1 : 0)) | 0),
                (te = Q),
                (Y = X),
                (Q = q),
                (X = R),
                (q = G),
                (R = W),
                (W = (J + Ie) | 0),
                (G = (ne + je + (W >>> 0 < J >>> 0 ? 1 : 0)) | 0);
            }
            (D = S.low = D + W),
              (S.high = I + G + (D >>> 0 < W >>> 0 ? 1 : 0)),
              (B = w.low = B + R),
              (w.high = A + q + (B >>> 0 < R >>> 0 ? 1 : 0)),
              (E = v.low = E + X),
              (v.high = M + Q + (E >>> 0 < X >>> 0 ? 1 : 0)),
              (O = b.low = O + Y),
              (b.high = P + te + (O >>> 0 < Y >>> 0 ? 1 : 0)),
              (j = _.low = j + $),
              (_.high = z + K + (j >>> 0 < $ >>> 0 ? 1 : 0)),
              (H = T.low = H + se),
              (T.high = U + ie + (H >>> 0 < se >>> 0 ? 1 : 0)),
              (V = l.low = V + ce),
              (l.high = N + re + (V >>> 0 < ce >>> 0 ? 1 : 0)),
              (F = g.low = F + ue),
              (g.high = L + pe + (F >>> 0 < ue >>> 0 ? 1 : 0));
          },
          _doFinalize: function () {
            var f = this._data,
              k = f.words,
              C = this._nDataBytes * 8,
              S = f.sigBytes * 8;
            (k[S >>> 5] |= 128 << (24 - (S % 32))),
              (k[(((S + 128) >>> 10) << 5) + 30] = Math.floor(C / 4294967296)),
              (k[(((S + 128) >>> 10) << 5) + 31] = C),
              (f.sigBytes = k.length * 4),
              this._process();
            var w = this._hash.toX32();
            return w;
          },
          clone: function () {
            var f = a.clone.call(this);
            return (f._hash = this._hash.clone()), f;
          },
          blockSize: 1024 / 32,
        }));
        (e.SHA512 = a._createHelper(h)),
          (e.HmacSHA512 = a._createHmacHelper(h));
      })(),
      (function () {
        var e = s,
          r = e.x64,
          a = r.Word,
          d = r.WordArray,
          t = e.algo,
          i = t.SHA512,
          o = (t.SHA384 = i.extend({
            _doReset: function () {
              this._hash = new d.init([
                new a.init(3418070365, 3238371032),
                new a.init(1654270250, 914150663),
                new a.init(2438529370, 812702999),
                new a.init(355462360, 4144912697),
                new a.init(1731405415, 4290775857),
                new a.init(2394180231, 1750603025),
                new a.init(3675008525, 1694076839),
                new a.init(1203062813, 3204075428),
              ]);
            },
            _doFinalize: function () {
              var n = i._doFinalize.call(this);
              return (n.sigBytes -= 16), n;
            },
          }));
        (e.SHA384 = i._createHelper(o)),
          (e.HmacSHA384 = i._createHmacHelper(o));
      })(),
      s.lib.Cipher ||
        (function (e) {
          var r = s,
            a = r.lib,
            d = a.Base,
            t = a.WordArray,
            i = a.BufferedBlockAlgorithm,
            o = r.enc,
            n = o.Utf8,
            u = o.Base64,
            c = r.algo,
            h = c.EvpKDF,
            f = (a.Cipher = i.extend({
              cfg: d.extend(),
              createEncryptor: function (M, E) {
                return this.create(this._ENC_XFORM_MODE, M, E);
              },
              createDecryptor: function (M, E) {
                return this.create(this._DEC_XFORM_MODE, M, E);
              },
              init: function (M, E, P) {
                (this.cfg = this.cfg.extend(P)),
                  (this._xformMode = M),
                  (this._key = E),
                  this.reset();
              },
              reset: function () {
                i.reset.call(this), this._doReset();
              },
              process: function (M) {
                return this._append(M), this._process();
              },
              finalize: function (M) {
                M && this._append(M);
                var E = this._doFinalize();
                return E;
              },
              keySize: 128 / 32,
              ivSize: 128 / 32,
              _ENC_XFORM_MODE: 1,
              _DEC_XFORM_MODE: 2,
              _createHelper: (function () {
                function M(E) {
                  return typeof E == "string" ? B : I;
                }
                return function (E) {
                  return {
                    encrypt: function (P, O, z) {
                      return M(O).encrypt(E, P, O, z);
                    },
                    decrypt: function (P, O, z) {
                      return M(O).decrypt(E, P, O, z);
                    },
                  };
                };
              })(),
            })),
            k = (a.StreamCipher = f.extend({
              _doFinalize: function () {
                var M = this._process(!0);
                return M;
              },
              blockSize: 1,
            })),
            C = (r.mode = {}),
            S = (a.BlockCipherMode = d.extend({
              createEncryptor: function (M, E) {
                return this.Encryptor.create(M, E);
              },
              createDecryptor: function (M, E) {
                return this.Decryptor.create(M, E);
              },
              init: function (M, E) {
                (this._cipher = M), (this._iv = E);
              },
            })),
            w = (C.CBC = (function () {
              var M = S.extend();
              (M.Encryptor = M.extend({
                processBlock: function (P, O) {
                  var z = this._cipher,
                    j = z.blockSize;
                  E.call(this, P, O, j),
                    z.encryptBlock(P, O),
                    (this._prevBlock = P.slice(O, O + j));
                },
              })),
                (M.Decryptor = M.extend({
                  processBlock: function (P, O) {
                    var z = this._cipher,
                      j = z.blockSize,
                      U = P.slice(O, O + j);
                    z.decryptBlock(P, O),
                      E.call(this, P, O, j),
                      (this._prevBlock = U);
                  },
                }));
              function E(P, O, z) {
                var j,
                  U = this._iv;
                U ? ((j = U), (this._iv = e)) : (j = this._prevBlock);
                for (var H = 0; H < z; H++) P[O + H] ^= j[H];
              }
              return M;
            })()),
            v = (r.pad = {}),
            b = (v.Pkcs7 = {
              pad: function (M, E) {
                for (
                  var P = E * 4,
                    O = P - (M.sigBytes % P),
                    z = (O << 24) | (O << 16) | (O << 8) | O,
                    j = [],
                    U = 0;
                  U < O;
                  U += 4
                )
                  j.push(z);
                var H = t.create(j, O);
                M.concat(H);
              },
              unpad: function (M) {
                var E = M.words[(M.sigBytes - 1) >>> 2] & 255;
                M.sigBytes -= E;
              },
            }),
            _ = (a.BlockCipher = f.extend({
              cfg: f.cfg.extend({ mode: w, padding: b }),
              reset: function () {
                var M;
                f.reset.call(this);
                var E = this.cfg,
                  P = E.iv,
                  O = E.mode;
                this._xformMode == this._ENC_XFORM_MODE
                  ? (M = O.createEncryptor)
                  : ((M = O.createDecryptor), (this._minBufferSize = 1)),
                  this._mode && this._mode.__creator == M
                    ? this._mode.init(this, P && P.words)
                    : ((this._mode = M.call(O, this, P && P.words)),
                      (this._mode.__creator = M));
              },
              _doProcessBlock: function (M, E) {
                this._mode.processBlock(M, E);
              },
              _doFinalize: function () {
                var M,
                  E = this.cfg.padding;
                return (
                  this._xformMode == this._ENC_XFORM_MODE
                    ? (E.pad(this._data, this.blockSize),
                      (M = this._process(!0)))
                    : ((M = this._process(!0)), E.unpad(M)),
                  M
                );
              },
              blockSize: 128 / 32,
            })),
            T = (a.CipherParams = d.extend({
              init: function (M) {
                this.mixIn(M);
              },
              toString: function (M) {
                return (M || this.formatter).stringify(this);
              },
            })),
            l = (r.format = {}),
            g = (l.OpenSSL = {
              stringify: function (M) {
                var E,
                  P = M.ciphertext,
                  O = M.salt;
                return (
                  O
                    ? (E = t
                        .create([1398893684, 1701076831])
                        .concat(O)
                        .concat(P))
                    : (E = P),
                  E.toString(u)
                );
              },
              parse: function (M) {
                var E,
                  P = u.parse(M),
                  O = P.words;
                return (
                  O[0] == 1398893684 &&
                    O[1] == 1701076831 &&
                    ((E = t.create(O.slice(2, 4))),
                    O.splice(0, 4),
                    (P.sigBytes -= 16)),
                  T.create({ ciphertext: P, salt: E })
                );
              },
            }),
            I = (a.SerializableCipher = d.extend({
              cfg: d.extend({ format: g }),
              encrypt: function (M, E, P, O) {
                O = this.cfg.extend(O);
                var z = M.createEncryptor(P, O),
                  j = z.finalize(E),
                  U = z.cfg;
                return T.create({
                  ciphertext: j,
                  key: P,
                  iv: U.iv,
                  algorithm: M,
                  mode: U.mode,
                  padding: U.padding,
                  blockSize: M.blockSize,
                  formatter: O.format,
                });
              },
              decrypt: function (M, E, P, O) {
                (O = this.cfg.extend(O)), (E = this._parse(E, O.format));
                var z = M.createDecryptor(P, O).finalize(E.ciphertext);
                return z;
              },
              _parse: function (M, E) {
                return typeof M == "string" ? E.parse(M, this) : M;
              },
            })),
            D = (r.kdf = {}),
            A = (D.OpenSSL = {
              execute: function (M, E, P, O) {
                O || (O = t.random(64 / 8));
                var z = h.create({ keySize: E + P }).compute(M, O),
                  j = t.create(z.words.slice(E), P * 4);
                return (
                  (z.sigBytes = E * 4), T.create({ key: z, iv: j, salt: O })
                );
              },
            }),
            B = (a.PasswordBasedCipher = I.extend({
              cfg: I.cfg.extend({ kdf: A }),
              encrypt: function (M, E, P, O) {
                O = this.cfg.extend(O);
                var z = O.kdf.execute(P, M.keySize, M.ivSize);
                O.iv = z.iv;
                var j = I.encrypt.call(this, M, E, z.key, O);
                return j.mixIn(z), j;
              },
              decrypt: function (M, E, P, O) {
                (O = this.cfg.extend(O)), (E = this._parse(E, O.format));
                var z = O.kdf.execute(P, M.keySize, M.ivSize, E.salt);
                O.iv = z.iv;
                var j = I.decrypt.call(this, M, E, z.key, O);
                return j;
              },
            }));
        })(),
      (s.mode.CFB = (function () {
        var e = s.lib.BlockCipherMode.extend();
        (e.Encryptor = e.extend({
          processBlock: function (a, d) {
            var t = this._cipher,
              i = t.blockSize;
            r.call(this, a, d, i, t), (this._prevBlock = a.slice(d, d + i));
          },
        })),
          (e.Decryptor = e.extend({
            processBlock: function (a, d) {
              var t = this._cipher,
                i = t.blockSize,
                o = a.slice(d, d + i);
              r.call(this, a, d, i, t), (this._prevBlock = o);
            },
          }));
        function r(a, d, t, i) {
          var o,
            n = this._iv;
          n ? ((o = n.slice(0)), (this._iv = void 0)) : (o = this._prevBlock),
            i.encryptBlock(o, 0);
          for (var u = 0; u < t; u++) a[d + u] ^= o[u];
        }
        return e;
      })()),
      (s.mode.ECB = (function () {
        var e = s.lib.BlockCipherMode.extend();
        return (
          (e.Encryptor = e.extend({
            processBlock: function (r, a) {
              this._cipher.encryptBlock(r, a);
            },
          })),
          (e.Decryptor = e.extend({
            processBlock: function (r, a) {
              this._cipher.decryptBlock(r, a);
            },
          })),
          e
        );
      })()),
      (s.pad.AnsiX923 = {
        pad: function (e, r) {
          var a = e.sigBytes,
            d = r * 4,
            t = d - (a % d),
            i = a + t - 1;
          e.clamp(),
            (e.words[i >>> 2] |= t << (24 - (i % 4) * 8)),
            (e.sigBytes += t);
        },
        unpad: function (e) {
          var r = e.words[(e.sigBytes - 1) >>> 2] & 255;
          e.sigBytes -= r;
        },
      }),
      (s.pad.Iso10126 = {
        pad: function (e, r) {
          var a = r * 4,
            d = a - (e.sigBytes % a);
          e.concat(s.lib.WordArray.random(d - 1)).concat(
            s.lib.WordArray.create([d << 24], 1)
          );
        },
        unpad: function (e) {
          var r = e.words[(e.sigBytes - 1) >>> 2] & 255;
          e.sigBytes -= r;
        },
      }),
      (s.pad.Iso97971 = {
        pad: function (e, r) {
          e.concat(s.lib.WordArray.create([2147483648], 1)),
            s.pad.ZeroPadding.pad(e, r);
        },
        unpad: function (e) {
          s.pad.ZeroPadding.unpad(e), e.sigBytes--;
        },
      }),
      (s.mode.OFB = (function () {
        var e = s.lib.BlockCipherMode.extend(),
          r = (e.Encryptor = e.extend({
            processBlock: function (a, d) {
              var t = this._cipher,
                i = t.blockSize,
                o = this._iv,
                n = this._keystream;
              o && ((n = this._keystream = o.slice(0)), (this._iv = void 0)),
                t.encryptBlock(n, 0);
              for (var u = 0; u < i; u++) a[d + u] ^= n[u];
            },
          }));
        return (e.Decryptor = r), e;
      })()),
      (s.pad.NoPadding = { pad: function () {}, unpad: function () {} }),
      (function (e) {
        var r = s,
          a = r.lib,
          d = a.CipherParams,
          t = r.enc,
          i = t.Hex,
          o = r.format,
          n = (o.Hex = {
            stringify: function (u) {
              return u.ciphertext.toString(i);
            },
            parse: function (u) {
              var c = i.parse(u);
              return d.create({ ciphertext: c });
            },
          });
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.BlockCipher,
          d = e.algo,
          t = [],
          i = [],
          o = [],
          n = [],
          u = [],
          c = [],
          h = [],
          f = [],
          k = [],
          C = [];
        (function () {
          for (var v = [], b = 0; b < 256; b++)
            b < 128 ? (v[b] = b << 1) : (v[b] = (b << 1) ^ 283);
          for (var _ = 0, T = 0, b = 0; b < 256; b++) {
            var l = T ^ (T << 1) ^ (T << 2) ^ (T << 3) ^ (T << 4);
            (l = (l >>> 8) ^ (l & 255) ^ 99), (t[_] = l), (i[l] = _);
            var g = v[_],
              I = v[g],
              D = v[I],
              A = (v[l] * 257) ^ (l * 16843008);
            (o[_] = (A << 24) | (A >>> 8)),
              (n[_] = (A << 16) | (A >>> 16)),
              (u[_] = (A << 8) | (A >>> 24)),
              (c[_] = A);
            var A = (D * 16843009) ^ (I * 65537) ^ (g * 257) ^ (_ * 16843008);
            (h[l] = (A << 24) | (A >>> 8)),
              (f[l] = (A << 16) | (A >>> 16)),
              (k[l] = (A << 8) | (A >>> 24)),
              (C[l] = A),
              _ ? ((_ = g ^ v[v[v[D ^ g]]]), (T ^= v[v[T]])) : (_ = T = 1);
          }
        })();
        var S = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
          w = (d.AES = a.extend({
            _doReset: function () {
              var v;
              if (!(this._nRounds && this._keyPriorReset === this._key)) {
                for (
                  var b = (this._keyPriorReset = this._key),
                    _ = b.words,
                    T = b.sigBytes / 4,
                    l = (this._nRounds = T + 6),
                    g = (l + 1) * 4,
                    I = (this._keySchedule = []),
                    D = 0;
                  D < g;
                  D++
                )
                  D < T
                    ? (I[D] = _[D])
                    : ((v = I[D - 1]),
                      D % T
                        ? T > 6 &&
                          D % T == 4 &&
                          (v =
                            (t[v >>> 24] << 24) |
                            (t[(v >>> 16) & 255] << 16) |
                            (t[(v >>> 8) & 255] << 8) |
                            t[v & 255])
                        : ((v = (v << 8) | (v >>> 24)),
                          (v =
                            (t[v >>> 24] << 24) |
                            (t[(v >>> 16) & 255] << 16) |
                            (t[(v >>> 8) & 255] << 8) |
                            t[v & 255]),
                          (v ^= S[(D / T) | 0] << 24)),
                      (I[D] = I[D - T] ^ v));
                for (var A = (this._invKeySchedule = []), B = 0; B < g; B++) {
                  var D = g - B;
                  if (B % 4) var v = I[D];
                  else var v = I[D - 4];
                  B < 4 || D <= 4
                    ? (A[B] = v)
                    : (A[B] =
                        h[t[v >>> 24]] ^
                        f[t[(v >>> 16) & 255]] ^
                        k[t[(v >>> 8) & 255]] ^
                        C[t[v & 255]]);
                }
              }
            },
            encryptBlock: function (v, b) {
              this._doCryptBlock(v, b, this._keySchedule, o, n, u, c, t);
            },
            decryptBlock: function (v, b) {
              var _ = v[b + 1];
              (v[b + 1] = v[b + 3]),
                (v[b + 3] = _),
                this._doCryptBlock(v, b, this._invKeySchedule, h, f, k, C, i);
              var _ = v[b + 1];
              (v[b + 1] = v[b + 3]), (v[b + 3] = _);
            },
            _doCryptBlock: function (v, b, _, T, l, g, I, D) {
              for (
                var A = this._nRounds,
                  B = v[b] ^ _[0],
                  M = v[b + 1] ^ _[1],
                  E = v[b + 2] ^ _[2],
                  P = v[b + 3] ^ _[3],
                  O = 4,
                  z = 1;
                z < A;
                z++
              ) {
                var j =
                    T[B >>> 24] ^
                    l[(M >>> 16) & 255] ^
                    g[(E >>> 8) & 255] ^
                    I[P & 255] ^
                    _[O++],
                  U =
                    T[M >>> 24] ^
                    l[(E >>> 16) & 255] ^
                    g[(P >>> 8) & 255] ^
                    I[B & 255] ^
                    _[O++],
                  H =
                    T[E >>> 24] ^
                    l[(P >>> 16) & 255] ^
                    g[(B >>> 8) & 255] ^
                    I[M & 255] ^
                    _[O++],
                  N =
                    T[P >>> 24] ^
                    l[(B >>> 16) & 255] ^
                    g[(M >>> 8) & 255] ^
                    I[E & 255] ^
                    _[O++];
                (B = j), (M = U), (E = H), (P = N);
              }
              var j =
                  ((D[B >>> 24] << 24) |
                    (D[(M >>> 16) & 255] << 16) |
                    (D[(E >>> 8) & 255] << 8) |
                    D[P & 255]) ^
                  _[O++],
                U =
                  ((D[M >>> 24] << 24) |
                    (D[(E >>> 16) & 255] << 16) |
                    (D[(P >>> 8) & 255] << 8) |
                    D[B & 255]) ^
                  _[O++],
                H =
                  ((D[E >>> 24] << 24) |
                    (D[(P >>> 16) & 255] << 16) |
                    (D[(B >>> 8) & 255] << 8) |
                    D[M & 255]) ^
                  _[O++],
                N =
                  ((D[P >>> 24] << 24) |
                    (D[(B >>> 16) & 255] << 16) |
                    (D[(M >>> 8) & 255] << 8) |
                    D[E & 255]) ^
                  _[O++];
              (v[b] = j), (v[b + 1] = U), (v[b + 2] = H), (v[b + 3] = N);
            },
            keySize: 256 / 32,
          }));
        e.AES = a._createHelper(w);
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.WordArray,
          d = r.BlockCipher,
          t = e.algo,
          i = [
            57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51,
            43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15,
            7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28,
            20, 12, 4,
          ],
          o = [
            14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8,
            16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33,
            48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32,
          ],
          n = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],
          u = [
            {
              0: 8421888,
              268435456: 32768,
              536870912: 8421378,
              805306368: 2,
              1073741824: 512,
              1342177280: 8421890,
              1610612736: 8389122,
              1879048192: 8388608,
              2147483648: 514,
              2415919104: 8389120,
              2684354560: 33280,
              2952790016: 8421376,
              3221225472: 32770,
              3489660928: 8388610,
              3758096384: 0,
              4026531840: 33282,
              134217728: 0,
              402653184: 8421890,
              671088640: 33282,
              939524096: 32768,
              1207959552: 8421888,
              1476395008: 512,
              1744830464: 8421378,
              2013265920: 2,
              2281701376: 8389120,
              2550136832: 33280,
              2818572288: 8421376,
              3087007744: 8389122,
              3355443200: 8388610,
              3623878656: 32770,
              3892314112: 514,
              4160749568: 8388608,
              1: 32768,
              268435457: 2,
              536870913: 8421888,
              805306369: 8388608,
              1073741825: 8421378,
              1342177281: 33280,
              1610612737: 512,
              1879048193: 8389122,
              2147483649: 8421890,
              2415919105: 8421376,
              2684354561: 8388610,
              2952790017: 33282,
              3221225473: 514,
              3489660929: 8389120,
              3758096385: 32770,
              4026531841: 0,
              134217729: 8421890,
              402653185: 8421376,
              671088641: 8388608,
              939524097: 512,
              1207959553: 32768,
              1476395009: 8388610,
              1744830465: 2,
              2013265921: 33282,
              2281701377: 32770,
              2550136833: 8389122,
              2818572289: 514,
              3087007745: 8421888,
              3355443201: 8389120,
              3623878657: 0,
              3892314113: 33280,
              4160749569: 8421378,
            },
            {
              0: 1074282512,
              16777216: 16384,
              33554432: 524288,
              50331648: 1074266128,
              67108864: 1073741840,
              83886080: 1074282496,
              100663296: 1073758208,
              117440512: 16,
              134217728: 540672,
              150994944: 1073758224,
              167772160: 1073741824,
              184549376: 540688,
              201326592: 524304,
              218103808: 0,
              234881024: 16400,
              251658240: 1074266112,
              8388608: 1073758208,
              25165824: 540688,
              41943040: 16,
              58720256: 1073758224,
              75497472: 1074282512,
              92274688: 1073741824,
              109051904: 524288,
              125829120: 1074266128,
              142606336: 524304,
              159383552: 0,
              176160768: 16384,
              192937984: 1074266112,
              209715200: 1073741840,
              226492416: 540672,
              243269632: 1074282496,
              260046848: 16400,
              268435456: 0,
              285212672: 1074266128,
              301989888: 1073758224,
              318767104: 1074282496,
              335544320: 1074266112,
              352321536: 16,
              369098752: 540688,
              385875968: 16384,
              402653184: 16400,
              419430400: 524288,
              436207616: 524304,
              452984832: 1073741840,
              469762048: 540672,
              486539264: 1073758208,
              503316480: 1073741824,
              520093696: 1074282512,
              276824064: 540688,
              293601280: 524288,
              310378496: 1074266112,
              327155712: 16384,
              343932928: 1073758208,
              360710144: 1074282512,
              377487360: 16,
              394264576: 1073741824,
              411041792: 1074282496,
              427819008: 1073741840,
              444596224: 1073758224,
              461373440: 524304,
              478150656: 0,
              494927872: 16400,
              511705088: 1074266128,
              528482304: 540672,
            },
            {
              0: 260,
              1048576: 0,
              2097152: 67109120,
              3145728: 65796,
              4194304: 65540,
              5242880: 67108868,
              6291456: 67174660,
              7340032: 67174400,
              8388608: 67108864,
              9437184: 67174656,
              10485760: 65792,
              11534336: 67174404,
              12582912: 67109124,
              13631488: 65536,
              14680064: 4,
              15728640: 256,
              524288: 67174656,
              1572864: 67174404,
              2621440: 0,
              3670016: 67109120,
              4718592: 67108868,
              5767168: 65536,
              6815744: 65540,
              7864320: 260,
              8912896: 4,
              9961472: 256,
              11010048: 67174400,
              12058624: 65796,
              13107200: 65792,
              14155776: 67109124,
              15204352: 67174660,
              16252928: 67108864,
              16777216: 67174656,
              17825792: 65540,
              18874368: 65536,
              19922944: 67109120,
              20971520: 256,
              22020096: 67174660,
              23068672: 67108868,
              24117248: 0,
              25165824: 67109124,
              26214400: 67108864,
              27262976: 4,
              28311552: 65792,
              29360128: 67174400,
              30408704: 260,
              31457280: 65796,
              32505856: 67174404,
              17301504: 67108864,
              18350080: 260,
              19398656: 67174656,
              20447232: 0,
              21495808: 65540,
              22544384: 67109120,
              23592960: 256,
              24641536: 67174404,
              25690112: 65536,
              26738688: 67174660,
              27787264: 65796,
              28835840: 67108868,
              29884416: 67109124,
              30932992: 67174400,
              31981568: 4,
              33030144: 65792,
            },
            {
              0: 2151682048,
              65536: 2147487808,
              131072: 4198464,
              196608: 2151677952,
              262144: 0,
              327680: 4198400,
              393216: 2147483712,
              458752: 4194368,
              524288: 2147483648,
              589824: 4194304,
              655360: 64,
              720896: 2147487744,
              786432: 2151678016,
              851968: 4160,
              917504: 4096,
              983040: 2151682112,
              32768: 2147487808,
              98304: 64,
              163840: 2151678016,
              229376: 2147487744,
              294912: 4198400,
              360448: 2151682112,
              425984: 0,
              491520: 2151677952,
              557056: 4096,
              622592: 2151682048,
              688128: 4194304,
              753664: 4160,
              819200: 2147483648,
              884736: 4194368,
              950272: 4198464,
              1015808: 2147483712,
              1048576: 4194368,
              1114112: 4198400,
              1179648: 2147483712,
              1245184: 0,
              1310720: 4160,
              1376256: 2151678016,
              1441792: 2151682048,
              1507328: 2147487808,
              1572864: 2151682112,
              1638400: 2147483648,
              1703936: 2151677952,
              1769472: 4198464,
              1835008: 2147487744,
              1900544: 4194304,
              1966080: 64,
              2031616: 4096,
              1081344: 2151677952,
              1146880: 2151682112,
              1212416: 0,
              1277952: 4198400,
              1343488: 4194368,
              1409024: 2147483648,
              1474560: 2147487808,
              1540096: 64,
              1605632: 2147483712,
              1671168: 4096,
              1736704: 2147487744,
              1802240: 2151678016,
              1867776: 4160,
              1933312: 2151682048,
              1998848: 4194304,
              2064384: 4198464,
            },
            {
              0: 128,
              4096: 17039360,
              8192: 262144,
              12288: 536870912,
              16384: 537133184,
              20480: 16777344,
              24576: 553648256,
              28672: 262272,
              32768: 16777216,
              36864: 537133056,
              40960: 536871040,
              45056: 553910400,
              49152: 553910272,
              53248: 0,
              57344: 17039488,
              61440: 553648128,
              2048: 17039488,
              6144: 553648256,
              10240: 128,
              14336: 17039360,
              18432: 262144,
              22528: 537133184,
              26624: 553910272,
              30720: 536870912,
              34816: 537133056,
              38912: 0,
              43008: 553910400,
              47104: 16777344,
              51200: 536871040,
              55296: 553648128,
              59392: 16777216,
              63488: 262272,
              65536: 262144,
              69632: 128,
              73728: 536870912,
              77824: 553648256,
              81920: 16777344,
              86016: 553910272,
              90112: 537133184,
              94208: 16777216,
              98304: 553910400,
              102400: 553648128,
              106496: 17039360,
              110592: 537133056,
              114688: 262272,
              118784: 536871040,
              122880: 0,
              126976: 17039488,
              67584: 553648256,
              71680: 16777216,
              75776: 17039360,
              79872: 537133184,
              83968: 536870912,
              88064: 17039488,
              92160: 128,
              96256: 553910272,
              100352: 262272,
              104448: 553910400,
              108544: 0,
              112640: 553648128,
              116736: 16777344,
              120832: 262144,
              124928: 537133056,
              129024: 536871040,
            },
            {
              0: 268435464,
              256: 8192,
              512: 270532608,
              768: 270540808,
              1024: 268443648,
              1280: 2097152,
              1536: 2097160,
              1792: 268435456,
              2048: 0,
              2304: 268443656,
              2560: 2105344,
              2816: 8,
              3072: 270532616,
              3328: 2105352,
              3584: 8200,
              3840: 270540800,
              128: 270532608,
              384: 270540808,
              640: 8,
              896: 2097152,
              1152: 2105352,
              1408: 268435464,
              1664: 268443648,
              1920: 8200,
              2176: 2097160,
              2432: 8192,
              2688: 268443656,
              2944: 270532616,
              3200: 0,
              3456: 270540800,
              3712: 2105344,
              3968: 268435456,
              4096: 268443648,
              4352: 270532616,
              4608: 270540808,
              4864: 8200,
              5120: 2097152,
              5376: 268435456,
              5632: 268435464,
              5888: 2105344,
              6144: 2105352,
              6400: 0,
              6656: 8,
              6912: 270532608,
              7168: 8192,
              7424: 268443656,
              7680: 270540800,
              7936: 2097160,
              4224: 8,
              4480: 2105344,
              4736: 2097152,
              4992: 268435464,
              5248: 268443648,
              5504: 8200,
              5760: 270540808,
              6016: 270532608,
              6272: 270540800,
              6528: 270532616,
              6784: 8192,
              7040: 2105352,
              7296: 2097160,
              7552: 0,
              7808: 268435456,
              8064: 268443656,
            },
            {
              0: 1048576,
              16: 33555457,
              32: 1024,
              48: 1049601,
              64: 34604033,
              80: 0,
              96: 1,
              112: 34603009,
              128: 33555456,
              144: 1048577,
              160: 33554433,
              176: 34604032,
              192: 34603008,
              208: 1025,
              224: 1049600,
              240: 33554432,
              8: 34603009,
              24: 0,
              40: 33555457,
              56: 34604032,
              72: 1048576,
              88: 33554433,
              104: 33554432,
              120: 1025,
              136: 1049601,
              152: 33555456,
              168: 34603008,
              184: 1048577,
              200: 1024,
              216: 34604033,
              232: 1,
              248: 1049600,
              256: 33554432,
              272: 1048576,
              288: 33555457,
              304: 34603009,
              320: 1048577,
              336: 33555456,
              352: 34604032,
              368: 1049601,
              384: 1025,
              400: 34604033,
              416: 1049600,
              432: 1,
              448: 0,
              464: 34603008,
              480: 33554433,
              496: 1024,
              264: 1049600,
              280: 33555457,
              296: 34603009,
              312: 1,
              328: 33554432,
              344: 1048576,
              360: 1025,
              376: 34604032,
              392: 33554433,
              408: 34603008,
              424: 0,
              440: 34604033,
              456: 1049601,
              472: 1024,
              488: 33555456,
              504: 1048577,
            },
            {
              0: 134219808,
              1: 131072,
              2: 134217728,
              3: 32,
              4: 131104,
              5: 134350880,
              6: 134350848,
              7: 2048,
              8: 134348800,
              9: 134219776,
              10: 133120,
              11: 134348832,
              12: 2080,
              13: 0,
              14: 134217760,
              15: 133152,
              2147483648: 2048,
              2147483649: 134350880,
              2147483650: 134219808,
              2147483651: 134217728,
              2147483652: 134348800,
              2147483653: 133120,
              2147483654: 133152,
              2147483655: 32,
              2147483656: 134217760,
              2147483657: 2080,
              2147483658: 131104,
              2147483659: 134350848,
              2147483660: 0,
              2147483661: 134348832,
              2147483662: 134219776,
              2147483663: 131072,
              16: 133152,
              17: 134350848,
              18: 32,
              19: 2048,
              20: 134219776,
              21: 134217760,
              22: 134348832,
              23: 131072,
              24: 0,
              25: 131104,
              26: 134348800,
              27: 134219808,
              28: 134350880,
              29: 133120,
              30: 2080,
              31: 134217728,
              2147483664: 131072,
              2147483665: 2048,
              2147483666: 134348832,
              2147483667: 133152,
              2147483668: 32,
              2147483669: 134348800,
              2147483670: 134217728,
              2147483671: 134219808,
              2147483672: 134350880,
              2147483673: 134217760,
              2147483674: 134219776,
              2147483675: 0,
              2147483676: 133120,
              2147483677: 2080,
              2147483678: 131104,
              2147483679: 134350848,
            },
          ],
          c = [
            4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504,
            2147483679,
          ],
          h = (t.DES = d.extend({
            _doReset: function () {
              for (var S = this._key, w = S.words, v = [], b = 0; b < 56; b++) {
                var _ = i[b] - 1;
                v[b] = (w[_ >>> 5] >>> (31 - (_ % 32))) & 1;
              }
              for (var T = (this._subKeys = []), l = 0; l < 16; l++) {
                for (var g = (T[l] = []), I = n[l], b = 0; b < 24; b++)
                  (g[(b / 6) | 0] |= v[(o[b] - 1 + I) % 28] << (31 - (b % 6))),
                    (g[4 + ((b / 6) | 0)] |=
                      v[28 + ((o[b + 24] - 1 + I) % 28)] << (31 - (b % 6)));
                g[0] = (g[0] << 1) | (g[0] >>> 31);
                for (var b = 1; b < 7; b++) g[b] = g[b] >>> ((b - 1) * 4 + 3);
                g[7] = (g[7] << 5) | (g[7] >>> 27);
              }
              for (var D = (this._invSubKeys = []), b = 0; b < 16; b++)
                D[b] = T[15 - b];
            },
            encryptBlock: function (S, w) {
              this._doCryptBlock(S, w, this._subKeys);
            },
            decryptBlock: function (S, w) {
              this._doCryptBlock(S, w, this._invSubKeys);
            },
            _doCryptBlock: function (S, w, v) {
              (this._lBlock = S[w]),
                (this._rBlock = S[w + 1]),
                f.call(this, 4, 252645135),
                f.call(this, 16, 65535),
                k.call(this, 2, 858993459),
                k.call(this, 8, 16711935),
                f.call(this, 1, 1431655765);
              for (var b = 0; b < 16; b++) {
                for (
                  var _ = v[b],
                    T = this._lBlock,
                    l = this._rBlock,
                    g = 0,
                    I = 0;
                  I < 8;
                  I++
                )
                  g |= u[I][((l ^ _[I]) & c[I]) >>> 0];
                (this._lBlock = l), (this._rBlock = T ^ g);
              }
              var D = this._lBlock;
              (this._lBlock = this._rBlock),
                (this._rBlock = D),
                f.call(this, 1, 1431655765),
                k.call(this, 8, 16711935),
                k.call(this, 2, 858993459),
                f.call(this, 16, 65535),
                f.call(this, 4, 252645135),
                (S[w] = this._lBlock),
                (S[w + 1] = this._rBlock);
            },
            keySize: 64 / 32,
            ivSize: 64 / 32,
            blockSize: 64 / 32,
          }));
        function f(S, w) {
          var v = ((this._lBlock >>> S) ^ this._rBlock) & w;
          (this._rBlock ^= v), (this._lBlock ^= v << S);
        }
        function k(S, w) {
          var v = ((this._rBlock >>> S) ^ this._lBlock) & w;
          (this._lBlock ^= v), (this._rBlock ^= v << S);
        }
        e.DES = d._createHelper(h);
        var C = (t.TripleDES = d.extend({
          _doReset: function () {
            var S = this._key,
              w = S.words;
            if (w.length !== 2 && w.length !== 4 && w.length < 6)
              throw new Error(
                "Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192."
              );
            var v = w.slice(0, 2),
              b = w.length < 4 ? w.slice(0, 2) : w.slice(2, 4),
              _ = w.length < 6 ? w.slice(0, 2) : w.slice(4, 6);
            (this._des1 = h.createEncryptor(a.create(v))),
              (this._des2 = h.createEncryptor(a.create(b))),
              (this._des3 = h.createEncryptor(a.create(_)));
          },
          encryptBlock: function (S, w) {
            this._des1.encryptBlock(S, w),
              this._des2.decryptBlock(S, w),
              this._des3.encryptBlock(S, w);
          },
          decryptBlock: function (S, w) {
            this._des3.decryptBlock(S, w),
              this._des2.encryptBlock(S, w),
              this._des1.decryptBlock(S, w);
          },
          keySize: 192 / 32,
          ivSize: 64 / 32,
          blockSize: 64 / 32,
        }));
        e.TripleDES = d._createHelper(C);
      })(),
      (function () {
        var e = s,
          r = e.lib,
          a = r.StreamCipher,
          d = e.algo,
          t = (d.RC4 = a.extend({
            _doReset: function () {
              for (
                var n = this._key,
                  u = n.words,
                  c = n.sigBytes,
                  h = (this._S = []),
                  f = 0;
                f < 256;
                f++
              )
                h[f] = f;
              for (var f = 0, k = 0; f < 256; f++) {
                var C = f % c,
                  S = (u[C >>> 2] >>> (24 - (C % 4) * 8)) & 255;
                k = (k + h[f] + S) % 256;
                var w = h[f];
                (h[f] = h[k]), (h[k] = w);
              }
              this._i = this._j = 0;
            },
            _doProcessBlock: function (n, u) {
              n[u] ^= i.call(this);
            },
            keySize: 256 / 32,
            ivSize: 0,
          }));
        function i() {
          for (
            var n = this._S, u = this._i, c = this._j, h = 0, f = 0;
            f < 4;
            f++
          ) {
            (u = (u + 1) % 256), (c = (c + n[u]) % 256);
            var k = n[u];
            (n[u] = n[c]),
              (n[c] = k),
              (h |= n[(n[u] + n[c]) % 256] << (24 - f * 8));
          }
          return (this._i = u), (this._j = c), h;
        }
        e.RC4 = a._createHelper(t);
        var o = (d.RC4Drop = t.extend({
          cfg: t.cfg.extend({ drop: 192 }),
          _doReset: function () {
            t._doReset.call(this);
            for (var n = this.cfg.drop; n > 0; n--) i.call(this);
          },
        }));
        e.RC4Drop = a._createHelper(o);
      })(),
      (s.mode.CTRGladman = (function () {
        var e = s.lib.BlockCipherMode.extend();
        function r(t) {
          if (((t >> 24) & 255) === 255) {
            var i = (t >> 16) & 255,
              o = (t >> 8) & 255,
              n = t & 255;
            i === 255
              ? ((i = 0),
                o === 255 ? ((o = 0), n === 255 ? (n = 0) : ++n) : ++o)
              : ++i,
              (t = 0),
              (t += i << 16),
              (t += o << 8),
              (t += n);
          } else t += 1 << 24;
          return t;
        }
        function a(t) {
          return (t[0] = r(t[0])) === 0 && (t[1] = r(t[1])), t;
        }
        var d = (e.Encryptor = e.extend({
          processBlock: function (t, i) {
            var o = this._cipher,
              n = o.blockSize,
              u = this._iv,
              c = this._counter;
            u && ((c = this._counter = u.slice(0)), (this._iv = void 0)), a(c);
            var h = c.slice(0);
            o.encryptBlock(h, 0);
            for (var f = 0; f < n; f++) t[i + f] ^= h[f];
          },
        }));
        return (e.Decryptor = d), e;
      })()),
      (function () {
        var e = s,
          r = e.lib,
          a = r.StreamCipher,
          d = e.algo,
          t = [],
          i = [],
          o = [],
          n = (d.Rabbit = a.extend({
            _doReset: function () {
              for (var c = this._key.words, h = this.cfg.iv, f = 0; f < 4; f++)
                c[f] =
                  (((c[f] << 8) | (c[f] >>> 24)) & 16711935) |
                  (((c[f] << 24) | (c[f] >>> 8)) & 4278255360);
              var k = (this._X = [
                  c[0],
                  (c[3] << 16) | (c[2] >>> 16),
                  c[1],
                  (c[0] << 16) | (c[3] >>> 16),
                  c[2],
                  (c[1] << 16) | (c[0] >>> 16),
                  c[3],
                  (c[2] << 16) | (c[1] >>> 16),
                ]),
                C = (this._C = [
                  (c[2] << 16) | (c[2] >>> 16),
                  (c[0] & 4294901760) | (c[1] & 65535),
                  (c[3] << 16) | (c[3] >>> 16),
                  (c[1] & 4294901760) | (c[2] & 65535),
                  (c[0] << 16) | (c[0] >>> 16),
                  (c[2] & 4294901760) | (c[3] & 65535),
                  (c[1] << 16) | (c[1] >>> 16),
                  (c[3] & 4294901760) | (c[0] & 65535),
                ]);
              this._b = 0;
              for (var f = 0; f < 4; f++) u.call(this);
              for (var f = 0; f < 8; f++) C[f] ^= k[(f + 4) & 7];
              if (h) {
                var S = h.words,
                  w = S[0],
                  v = S[1],
                  b =
                    (((w << 8) | (w >>> 24)) & 16711935) |
                    (((w << 24) | (w >>> 8)) & 4278255360),
                  _ =
                    (((v << 8) | (v >>> 24)) & 16711935) |
                    (((v << 24) | (v >>> 8)) & 4278255360),
                  T = (b >>> 16) | (_ & 4294901760),
                  l = (_ << 16) | (b & 65535);
                (C[0] ^= b),
                  (C[1] ^= T),
                  (C[2] ^= _),
                  (C[3] ^= l),
                  (C[4] ^= b),
                  (C[5] ^= T),
                  (C[6] ^= _),
                  (C[7] ^= l);
                for (var f = 0; f < 4; f++) u.call(this);
              }
            },
            _doProcessBlock: function (c, h) {
              var f = this._X;
              u.call(this),
                (t[0] = f[0] ^ (f[5] >>> 16) ^ (f[3] << 16)),
                (t[1] = f[2] ^ (f[7] >>> 16) ^ (f[5] << 16)),
                (t[2] = f[4] ^ (f[1] >>> 16) ^ (f[7] << 16)),
                (t[3] = f[6] ^ (f[3] >>> 16) ^ (f[1] << 16));
              for (var k = 0; k < 4; k++)
                (t[k] =
                  (((t[k] << 8) | (t[k] >>> 24)) & 16711935) |
                  (((t[k] << 24) | (t[k] >>> 8)) & 4278255360)),
                  (c[h + k] ^= t[k]);
            },
            blockSize: 128 / 32,
            ivSize: 64 / 32,
          }));
        function u() {
          for (var c = this._X, h = this._C, f = 0; f < 8; f++) i[f] = h[f];
          (h[0] = (h[0] + 1295307597 + this._b) | 0),
            (h[1] =
              (h[1] + 3545052371 + (h[0] >>> 0 < i[0] >>> 0 ? 1 : 0)) | 0),
            (h[2] = (h[2] + 886263092 + (h[1] >>> 0 < i[1] >>> 0 ? 1 : 0)) | 0),
            (h[3] =
              (h[3] + 1295307597 + (h[2] >>> 0 < i[2] >>> 0 ? 1 : 0)) | 0),
            (h[4] =
              (h[4] + 3545052371 + (h[3] >>> 0 < i[3] >>> 0 ? 1 : 0)) | 0),
            (h[5] = (h[5] + 886263092 + (h[4] >>> 0 < i[4] >>> 0 ? 1 : 0)) | 0),
            (h[6] =
              (h[6] + 1295307597 + (h[5] >>> 0 < i[5] >>> 0 ? 1 : 0)) | 0),
            (h[7] =
              (h[7] + 3545052371 + (h[6] >>> 0 < i[6] >>> 0 ? 1 : 0)) | 0),
            (this._b = h[7] >>> 0 < i[7] >>> 0 ? 1 : 0);
          for (var f = 0; f < 8; f++) {
            var k = c[f] + h[f],
              C = k & 65535,
              S = k >>> 16,
              w = ((((C * C) >>> 17) + C * S) >>> 15) + S * S,
              v = (((k & 4294901760) * k) | 0) + (((k & 65535) * k) | 0);
            o[f] = w ^ v;
          }
          (c[0] =
            (o[0] +
              ((o[7] << 16) | (o[7] >>> 16)) +
              ((o[6] << 16) | (o[6] >>> 16))) |
            0),
            (c[1] = (o[1] + ((o[0] << 8) | (o[0] >>> 24)) + o[7]) | 0),
            (c[2] =
              (o[2] +
                ((o[1] << 16) | (o[1] >>> 16)) +
                ((o[0] << 16) | (o[0] >>> 16))) |
              0),
            (c[3] = (o[3] + ((o[2] << 8) | (o[2] >>> 24)) + o[1]) | 0),
            (c[4] =
              (o[4] +
                ((o[3] << 16) | (o[3] >>> 16)) +
                ((o[2] << 16) | (o[2] >>> 16))) |
              0),
            (c[5] = (o[5] + ((o[4] << 8) | (o[4] >>> 24)) + o[3]) | 0),
            (c[6] =
              (o[6] +
                ((o[5] << 16) | (o[5] >>> 16)) +
                ((o[4] << 16) | (o[4] >>> 16))) |
              0),
            (c[7] = (o[7] + ((o[6] << 8) | (o[6] >>> 24)) + o[5]) | 0);
        }
        e.Rabbit = a._createHelper(n);
      })(),
      (s.mode.CTR = (function () {
        var e = s.lib.BlockCipherMode.extend(),
          r = (e.Encryptor = e.extend({
            processBlock: function (a, d) {
              var t = this._cipher,
                i = t.blockSize,
                o = this._iv,
                n = this._counter;
              o && ((n = this._counter = o.slice(0)), (this._iv = void 0));
              var u = n.slice(0);
              t.encryptBlock(u, 0), (n[i - 1] = (n[i - 1] + 1) | 0);
              for (var c = 0; c < i; c++) a[d + c] ^= u[c];
            },
          }));
        return (e.Decryptor = r), e;
      })()),
      (function () {
        var e = s,
          r = e.lib,
          a = r.StreamCipher,
          d = e.algo,
          t = [],
          i = [],
          o = [],
          n = (d.RabbitLegacy = a.extend({
            _doReset: function () {
              var c = this._key.words,
                h = this.cfg.iv,
                f = (this._X = [
                  c[0],
                  (c[3] << 16) | (c[2] >>> 16),
                  c[1],
                  (c[0] << 16) | (c[3] >>> 16),
                  c[2],
                  (c[1] << 16) | (c[0] >>> 16),
                  c[3],
                  (c[2] << 16) | (c[1] >>> 16),
                ]),
                k = (this._C = [
                  (c[2] << 16) | (c[2] >>> 16),
                  (c[0] & 4294901760) | (c[1] & 65535),
                  (c[3] << 16) | (c[3] >>> 16),
                  (c[1] & 4294901760) | (c[2] & 65535),
                  (c[0] << 16) | (c[0] >>> 16),
                  (c[2] & 4294901760) | (c[3] & 65535),
                  (c[1] << 16) | (c[1] >>> 16),
                  (c[3] & 4294901760) | (c[0] & 65535),
                ]);
              this._b = 0;
              for (var C = 0; C < 4; C++) u.call(this);
              for (var C = 0; C < 8; C++) k[C] ^= f[(C + 4) & 7];
              if (h) {
                var S = h.words,
                  w = S[0],
                  v = S[1],
                  b =
                    (((w << 8) | (w >>> 24)) & 16711935) |
                    (((w << 24) | (w >>> 8)) & 4278255360),
                  _ =
                    (((v << 8) | (v >>> 24)) & 16711935) |
                    (((v << 24) | (v >>> 8)) & 4278255360),
                  T = (b >>> 16) | (_ & 4294901760),
                  l = (_ << 16) | (b & 65535);
                (k[0] ^= b),
                  (k[1] ^= T),
                  (k[2] ^= _),
                  (k[3] ^= l),
                  (k[4] ^= b),
                  (k[5] ^= T),
                  (k[6] ^= _),
                  (k[7] ^= l);
                for (var C = 0; C < 4; C++) u.call(this);
              }
            },
            _doProcessBlock: function (c, h) {
              var f = this._X;
              u.call(this),
                (t[0] = f[0] ^ (f[5] >>> 16) ^ (f[3] << 16)),
                (t[1] = f[2] ^ (f[7] >>> 16) ^ (f[5] << 16)),
                (t[2] = f[4] ^ (f[1] >>> 16) ^ (f[7] << 16)),
                (t[3] = f[6] ^ (f[3] >>> 16) ^ (f[1] << 16));
              for (var k = 0; k < 4; k++)
                (t[k] =
                  (((t[k] << 8) | (t[k] >>> 24)) & 16711935) |
                  (((t[k] << 24) | (t[k] >>> 8)) & 4278255360)),
                  (c[h + k] ^= t[k]);
            },
            blockSize: 128 / 32,
            ivSize: 64 / 32,
          }));
        function u() {
          for (var c = this._X, h = this._C, f = 0; f < 8; f++) i[f] = h[f];
          (h[0] = (h[0] + 1295307597 + this._b) | 0),
            (h[1] =
              (h[1] + 3545052371 + (h[0] >>> 0 < i[0] >>> 0 ? 1 : 0)) | 0),
            (h[2] = (h[2] + 886263092 + (h[1] >>> 0 < i[1] >>> 0 ? 1 : 0)) | 0),
            (h[3] =
              (h[3] + 1295307597 + (h[2] >>> 0 < i[2] >>> 0 ? 1 : 0)) | 0),
            (h[4] =
              (h[4] + 3545052371 + (h[3] >>> 0 < i[3] >>> 0 ? 1 : 0)) | 0),
            (h[5] = (h[5] + 886263092 + (h[4] >>> 0 < i[4] >>> 0 ? 1 : 0)) | 0),
            (h[6] =
              (h[6] + 1295307597 + (h[5] >>> 0 < i[5] >>> 0 ? 1 : 0)) | 0),
            (h[7] =
              (h[7] + 3545052371 + (h[6] >>> 0 < i[6] >>> 0 ? 1 : 0)) | 0),
            (this._b = h[7] >>> 0 < i[7] >>> 0 ? 1 : 0);
          for (var f = 0; f < 8; f++) {
            var k = c[f] + h[f],
              C = k & 65535,
              S = k >>> 16,
              w = ((((C * C) >>> 17) + C * S) >>> 15) + S * S,
              v = (((k & 4294901760) * k) | 0) + (((k & 65535) * k) | 0);
            o[f] = w ^ v;
          }
          (c[0] =
            (o[0] +
              ((o[7] << 16) | (o[7] >>> 16)) +
              ((o[6] << 16) | (o[6] >>> 16))) |
            0),
            (c[1] = (o[1] + ((o[0] << 8) | (o[0] >>> 24)) + o[7]) | 0),
            (c[2] =
              (o[2] +
                ((o[1] << 16) | (o[1] >>> 16)) +
                ((o[0] << 16) | (o[0] >>> 16))) |
              0),
            (c[3] = (o[3] + ((o[2] << 8) | (o[2] >>> 24)) + o[1]) | 0),
            (c[4] =
              (o[4] +
                ((o[3] << 16) | (o[3] >>> 16)) +
                ((o[2] << 16) | (o[2] >>> 16))) |
              0),
            (c[5] = (o[5] + ((o[4] << 8) | (o[4] >>> 24)) + o[3]) | 0),
            (c[6] =
              (o[6] +
                ((o[5] << 16) | (o[5] >>> 16)) +
                ((o[4] << 16) | (o[4] >>> 16))) |
              0),
            (c[7] = (o[7] + ((o[6] << 8) | (o[6] >>> 24)) + o[5]) | 0);
        }
        e.RabbitLegacy = a._createHelper(n);
      })(),
      (s.pad.ZeroPadding = {
        pad: function (e, r) {
          var a = r * 4;
          e.clamp(), (e.sigBytes += a - (e.sigBytes % a || a));
        },
        unpad: function (e) {
          for (
            var r = e.words, a = e.sigBytes - 1, a = e.sigBytes - 1;
            a >= 0;
            a--
          )
            if ((r[a >>> 2] >>> (24 - (a % 4) * 8)) & 255) {
              e.sigBytes = a + 1;
              break;
            }
        },
      }),
      s
    );
  });
  var y = function (s) {
    var e = "product",
      r = "version",
      a = "https://docsapi.opentext.com/mapperpi",
      d = {
        tboolean:
          "touch bookmarks toc bookmarkEntries sectionNumbers caseSensitive highContrast autoHideToc".split(
            " "
          ),
        nameValuePair: {
          find: ["anyWord", "allWords", "exactWord"],
          search: ["allModules", "document", "section", "page"],
          sort: ["match", "divisions"],
        },
        tstring: "query",
      };
    Array.isArray ||
      (Array.isArray = function (t) {
        return t instanceof Array;
      }),
      typeof String.prototype.endsWith > "u" &&
        (String.prototype.endsWith = function (t) {
          return this.lastIndexOf(t) == this.length - t.length;
        }),
      typeof debug > "u" && (debug = !1),
      typeof trace > "u" && (trace = !1),
      s && ((e = s.product || e), (r = s.version || r), (a = s.urlRoot || a));
    try {
      console ||
        (console = {
          error: function () {},
          log: function () {},
          warn: function () {},
        });
    } catch {
      console = {
        error: function () {},
        log: function () {},
        warn: function () {},
      };
    }
    return {
      buildHelpUrl: function (t, i, o) {
        if (!t || !i)
          return console.error("Please specify 'locale' and 'context'"), "";
        if (typeof t == "string" && 0 > t.indexOf(",") && typeof i == "string")
          return this._.generateSixParam(t, i, o);
        var n = null,
          n =
            typeof t == "string" && -1 < t.indexOf(",")
              ? t.split(",")
              : typeof t == "string"
              ? [t]
              : t;
        return this._.generateComplexParam(n, i, o);
      },
      optionConstants: d,
      _: {
        generateComplexParam: function (t, i, o) {
          var n,
            u = [],
            c,
            h,
            f = [],
            k = null,
            k = !1,
            C = [],
            S = [],
            w,
            v,
            b,
            _,
            T,
            l,
            g,
            I,
            D,
            A;
          if (!t || !i)
            return (
              console.error(
                "Missing parameter!, Please specify 'locale', and 'context', not:",
                t,
                i,
                o
              ),
              ""
            );
          if (
            typeof t != "object" ||
            typeof i != "object" ||
            (o && typeof o != "object")
          )
            return (
              console.error(
                "Invalid parameter!:",
                t,
                i,
                o,
                "are not objects. Parameter order should be ([],{},{})"
              ),
              ""
            );
          (v = o ? o.tenant : null),
            (b = o ? o.condition : null),
            (_ = (o && o.type) || "ofh1"),
            (T = function (B, M) {
              if (B) {
                g = !1;
                for (I in M) g |= M[I] == B;
                g || M.push(B);
              }
            }),
            (n = "");
          for (w in i.documents)
            (l = i.documents[w]),
              l.active && l.active === !0 && (k && delete l.active, (k = !0)),
              l.exclude === !0 && u.push(l),
              this.fixApp(l),
              T(l.version, S),
              l.err || C.push(l);
          if (typeof o == "object" && o.options) {
            debug && console.log("Complex params options: ", o.options),
              (k = { find: 1, search: 10, sort: 100 }),
              (l = 0),
              (D = 1);
            for (w in d.tboolean)
              (I = d.tboolean[w]),
                (I = o.options[I]),
                typeof I == "boolean" && (l += I ? D : 0),
                (D *= 2);
            (l = l.toString(16)),
              l != "0" && (n += 2 > l.length ? "0" + l : l),
              (l = 0);
            for (w in o.options)
              if ((I = d.nameValuePair[w])) {
                for (D = o.options[w], A = 0; A < I.length; A++)
                  if (I[A] == D) {
                    l += (A + 1) * k[w];
                    break;
                  }
              }
            if (
              (0 < l &&
                l != 121 &&
                ((l = l.toString(16)),
                (n +=
                  (n.length === 0 ? "00" : "") + (2 > l.length ? "0" + l : l))),
              typeof o.options.query == "string" &&
                (n += "S" + encodeURI(o.options.query)),
              o.options.flags &&
                (c = ("" + o.options.flags).replace(/[^a-zA-Z0-9]/g, "")),
              o.options.custom)
            )
              for (l in ((h = ""), o.options.custom))
                0 <= ",ml,t,o,f,key,type,".indexOf("," + l + ",") ||
                  ((I =
                    "" +
                    l.replace(/[^a-zA-Z0-9]/g, "") +
                    "=" +
                    encodeURIComponent(o.options.custom[l])),
                  (h += "&" + I));
          }
          for (
            debug &&
              console.log("Complex params: ", v, b, _, JSON.stringify(C), n),
              o = a + "?ml=",
              o += this.altArray(t),
              S.length == 1 && (o = o + "," + S[0]),
              w = 0;
            w < C.length;
            w++
          )
            (k = C[w].module),
              C[w].version && (k += C[w].version),
              C[w].release && (k += "-" + C[w].release),
              C[w].help && (k += "-" + C[w].help),
              C[w].docType && (k += "-" + C[w].docType),
              C[w].locale && (k += "-" + C[w].locale),
              C[w].PageID && (k += "." + C[w].PageID),
              C[w].exclude && (k += "_"),
              C[w].active && (k += "~"),
              T(k, f);
          return (
            debug &&
              (console.log("Complex params: ", S, o, JSON.stringify(u)),
              console.log("Compressable: ", JSON.stringify(f))),
            (k = this.compress(
              { docs: f, preserve: i.preserve, locale: t },
              t[0]
            )),
            debug && console.log("Compressed:", k),
            v && (k += "&t=" + encodeURIComponent(v)),
            b && (k += "&c=" + encodeURIComponent(b)),
            n &&
              (0 < parseInt(n, 16) || 0 <= n.indexOf("S")) &&
              (k += "&o=" + n),
            c && (k += "&f=" + c),
            h && (k += h),
            (t = this.generateKey()),
            a + "?type=" + _ + "&ml=" + (k + ("&key=" + t))
          );
        },
        compress: function (t, i) {
          var o = t.locale,
            n,
            u;
          n = null;
          var c = [],
            h,
            f = "NotAPossibleValue",
            k = f,
            C = !0,
            S = f,
            w = !0,
            v;
          o || (o = i),
            (o && o !== null) || (o = "en"),
            (n = t.docs),
            t.preserve !== !0 && (n = n.sort()),
            (u = this.altArray(o)),
            (c = []),
            (h = null),
            (k = f = "NotAPossibleValue"),
            (C = !0),
            (S = f),
            (w = !0);
          for (v in n)
            (h = this.parseRevnum(n[v])),
              c.push(h),
              C &&
                k != h.help &&
                (k == f ? (k = h.help) : k != h.help && (C = !1)),
              w &&
                S != h.release &&
                (S == f ? (S = h.release) : S != h.release && (w = !1));
          2 > n.length && (w = C = !1),
            w && S !== null && (u = u + "-" + S.toUpperCase()),
            C && k !== null && ((u += "-"), (u += k)),
            (k = f = v = null);
          for (h in c)
            (n = c[h]),
              v === null || v != n.product
                ? ((u += "$"), (v = n.product), (f = k = null), (u += v))
                : (u += ","),
              (S = n.version),
              w ||
                n.release === null ||
                (n.release && (S += "-" + n.release.toUpperCase())),
              (f === null || f != S) && ((u += S), (f = S), (k = null)),
              (S = ""),
              n.docType && (S += n.docType),
              n.locale !== null &&
                o != n.locale &&
                ((S += "-"), (S += n.locale)),
              n.PageID !== null &&
                0 < n.PageID.length &&
                ((S += "."), (S += window.encodeURIComponent(n.PageID))),
              (k === null || k != S) &&
                (k !== null && u.substring(u.length - 1) != "," && (u += ","),
                (k = S),
                C || n.help === null || ((u += n.help), (u += "-")),
                (u += k)),
              n.flag !== null && (u += n.flag);
          return u;
        },
        fixApp: function (t) {
          var i = null,
            o;
          if (t) {
            if (
              (t.version ||
                ((i = this.parseRevnum(t.module)),
                (t.module = i.product),
                (t.version =
                  i.version && 0 < i.version.length ? i.version : "0"),
                (t.release =
                  i.release && 0 < i.release.length ? i.release : null),
                (t.docType = i.docType),
                (t.help = i.help),
                (t.err = i.err)),
              t.version[0] == "v" && (t.version = t.version.substring(1)),
              -1 < t.module.indexOf("-"))
            ) {
              for (
                i = t.module.split(/(?=-)/),
                  i[0] = i[0].split(/\d+$/)[0],
                  t.module = i[0] + t.version,
                  o = 1;
                o < i.length;
                o++
              )
                t.module += i[o];
              (i = this.parseRevnum(t.module)),
                (t.module = i.product),
                (t.version = i.version),
                (t.release = i.release),
                (t.docType = i.docType),
                (t.help = i.help),
                (t.err = i.err);
            }
            i || (i = this.parseRevnum(t.module)),
              (t.locale =
                i.locale && 0 < i.locale.length && !t.locale
                  ? i.locale
                  : t.locale),
              (t.PageID =
                i.PageID && 0 < i.PageID.length && !t.topic
                  ? i.PageID
                  : t.topic),
              (t.module = t.module.split(/\d+$/)[0]);
          }
        },
        generateKeyAES: function (t, i) {
          return x.PBKDF2(i, x.enc.Hex.parse(t), {
            keySize: this.keySize,
            iterations: this.iterationCount,
          });
        },
        encrypt: function (t, i, o, n) {
          return (
            (t = this.generateKeyAES(t, o)),
            x.AES.encrypt(n, t, { iv: x.enc.Hex.parse(i) }).ciphertext.toString(
              x.enc.Base64
            )
          );
        },
        AesUtil: function (t, i) {
          (this.keySize = t / 32), (this.iterationCount = i);
        },
        generateSixParam: function (t, i, o) {
          var n = null,
            u = null,
            c = null,
            h = null,
            f;
          if (
            (o &&
              ((n = o.product), (u = o.version), (c = o.module), (h = o.type)),
            typeof h == "string" && h.length === 0 && (h = null),
            (o = this.generateKey()),
            (n = n || e),
            (u = u || r),
            (f = a),
            typeof c != "string" &&
              typeof h != "string" &&
              0 < f.indexOf("mapperpi") &&
              (f = f.substring(0, f.length - 2)),
            (f = f + "?" + ("product=" + encodeURIComponent(n))),
            (f += "&version=" + encodeURIComponent(u)),
            (f += "&locale=" + encodeURIComponent(t)),
            (f += "&context=" + encodeURIComponent(i)),
            typeof c == "string" && typeof h == "string")
          )
            (f += "&module=" + encodeURIComponent(c)),
              (f += "&type=" + encodeURIComponent(h));
          else if ((!c && h) || (!h && c))
            return (
              console.error(
                "'module' and 'type' need to be either BOTH or NEITHER defined"
              ),
              ""
            );
          return (f += "&key=" + o), debug && console.log(f), f;
        },
        generateKey: function () {
          var t = this.generatePassPhrase();
          return this.encryptByAES("Vignette", t);
        },
        parseRevnum: function (t) {
          var i = null,
            o;
          if (
            (i = t.match(
              /^([a-zA-Z]+)(\d+(-\d+\w*)?)((-[a-z])?)(-[a-z]+)?(-[_a-z]+)?(-\d+)?(\.([a-zA-Z0-9#.\_\-]+))?([\_\~])?$/i
            ))
          ) {
            (t = i[2]),
              i[3] &&
                i[3][0] == "-" &&
                (t = t.substring(0, t.length - i[3].length)),
              (i = {
                product: i[1],
                version: t,
                release: i[3],
                help: i[4],
                docType: i[6],
                locale: i[7],
                revision: i[8],
                PageID: i[10],
                flag: i[11],
              });
            for (o in i)
              i[o] && i[o][0] == "-"
                ? (i[o] = i[o].substring(1))
                : i[o] || (i[o] = null);
            i.PageID !== null &&
              i.flag === null &&
              i.PageID.endsWith("_") &&
              ((i.flag = "_"),
              (i.PageID = i.PageID.substring(0, i.PageID.length - 1)));
          } else
            i = {
              product: t,
              version: null,
              release: null,
              help: null,
              docType: null,
              locale: null,
              revision: null,
              PageID: null,
              flag: null,
              err: !0,
            };
          return i;
        },
        generatePassPhrase: function () {
          var o = new Date(),
            t = o.getFullYear(),
            i = o.getMonth(),
            o = o.getDate(),
            n = "" + i,
            u = "" + o;
          return 10 > i && (n = "0" + n), 10 > o && (u = "0" + u), t + n + u;
        },
        encryptByAES: function (t, i) {
          var o,
            n = x.lib.WordArray.random(16).toString(x.enc.Hex),
            u = x.lib.WordArray.random(16).toString(x.enc.Hex);
          return (
            x.enc.Utf8.parse(i),
            this.AesUtil(256, 1e3),
            (o = this.encrypt(n, u, i, t)),
            trace &&
              (console.log(x.enc.Utf8.stringify(o), x.enc.Hex.stringify(o)),
              console.log(
                x.enc.Hex.parse(x.enc.Utf8.parse(i).toString(x.enc.Hex))
              )),
            trace &&
              (console.log(
                "encrypted.toString()  -> base64(ciphertext)  :",
                o.toString()
              ),
              console.log(
                "base64(ciphertext)    <- encrypted.toString():",
                o.ciphertext.toString(x.enc.Base64)
              ),
              console.log(
                "ciphertext.toString() -> ciphertext hex      :",
                o.ciphertext.toString()
              )),
            u.toString() + "~" + o.toString() + "~" + n.toString()
          );
        },
        altArray: function (t) {
          var i = "",
            o,
            n;
          if (Array.isArray(t)) {
            for (o = 0; o < t.length; o++)
              (n = t[o].replace(/-/g, "_")),
                (i = o % 2 === 0 ? i + n.toLowerCase() : i + n.toUpperCase());
            return i;
          }
          return t;
        },
      },
    };
  };
  return y;
}),
  csui.define("json!csui/utils/froala/localization.mappings.json", {
    "en-us": "",
    "ru-ru": "ru",
    pt: "pt_br",
    "zh-cn": "zh_cn",
    "zh-tw": "zh_tw",
    "uk-ua": "uk",
    "fi-fi": "fi",
    "nb-no": "nb",
    "pl-pl": "pl",
    "tr-tr": "tr",
    "cs-cz": "cs",
    "da-dk": "da",
    "ko-kr": "ko",
    "ca-es": "ca",
    "kk-kz": "kk",
  }),
  csui.define(
    "csui/lib/froala_editor/js/plugins/custcsuiImage",
    ["csui/lib/froala_editor/js/froala_editor.pkgd.min"],
    function (x) {
      "use strict";
      x.PLUGINS.customAttachmentsPlugin = function (m) {
        function p() {
          m.events.on("image.beforeUpload", function (e, r) {
            const { getImageId: a, connectionUrl: d } = m.opts.externalParams,
              t = e[0];
            var i = new FileReader(),
              o = Math.random().toString(36).substring(2, 15),
              n = o + "_" + e[0].name;
            return (
              (m.opts.imageUploadParams.name = n),
              (i.onload = async function (u) {
                const c = await a(t),
                  h = `${d}?func=doc.fetch&nodeId=${c}&viewType=1`;
                m.image.insert(h, !1, {}, r),
                  m.events.trigger("contentChanged");
              }),
              i.readAsDataURL(e[0]),
              !1
            );
          }),
            m.events.on("popups.show.image.edit", function () {
              const e = m.image.get()[0],
                r = m.popups.get("image.edit")[0],
                a = m.opts.iframe
                  ? m.$iframe.closest(".csui-normal-scrolling")[0]
                  : m.$el[0].closest(".csui-normal-scrolling");
              s(e, r, a);
            }),
            m.events.on("popups.hide.image.edit", function () {
              m.toolbar.enable(),
                m.shared.$image_resizer.removeClass("fr-active");
            });
          function y() {
            m.popups.hide("image.edit");
          }
          function s(e, r, a) {
            let d = 0;
            const t = e.getBoundingClientRect(),
              i = r.getBoundingClientRect(),
              o = a?.getBoundingClientRect(),
              n = m.opts.iframe ? m.$iframe[0].getBoundingClientRect().top : 0,
              u = t.top + n,
              c = u + t.height,
              h = Math.max(u, o.top),
              f = Math.min(c, o.bottom);
            i.height < h
              ? (d = h - i.height + window.scrollY)
              : window.innerHeight - f > i.height
              ? (d = f + window.scrollY)
              : (d =
                  h > 0 ? h + window.scrollY : f - i.height + window.scrollY),
              (r.style.top = `${d}px`);
          }
        }
        return { _init: p };
      };
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/cslink",
    [
      "csui/lib/jquery",
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
    ],
    function (x, m, p) {
      "use strict";
      m.DefineIconTemplate(
        "cslink",
        '<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13,10H11l-1,1L9,10H7a3,3,0,0,0,0,6H9l1-1,1,1h2a3,3,0,0,0,0-6ZM7,15a2,2,0,0,1,0-4H9v1H7a1,1,0,0,0,0,2H9v1Zm5.5-2.5a.5.5,0,0,1,0,1h-5a.5.5,0,0,1,0-1ZM13,15H11V14h2a1,1,0,0,0,0-2H11V11h2a2,2,0,0,1,0,4Z" style="fill:#333"/><path d="M7,5.435A1.465,1.465,0,1,0,8.465,6.9h0A1.466,1.466,0,0,0,7,5.435Z" style="fill:#333"/><path d="M10.237,2.09a1.8,1.8,0,0,0,.028-.273,1.816,1.816,0,0,0-3.483-.722,5.83,5.83,0,0,0-5.62,5.392A1.815,1.815,0,0,0,1.817,10a1.783,1.783,0,0,0,.194-.02,5.861,5.861,0,0,0,.835,1.063c.1.1.208.2.317.291a4.251,4.251,0,0,1,.205-.408l.059-.1a4.227,4.227,0,0,1,.3-.431,4.851,4.851,0,0,1-.718-.857,1.8,1.8,0,0,0-.768-3.12A4.685,4.685,0,0,1,6.666,2.171a1.811,1.811,0,0,0,3.1.894,4.766,4.766,0,0,1,1.982,3.851A4.625,4.625,0,0,1,11.335,8.8h1.143a5.786,5.786,0,0,0-2.24-6.709Z" style="fill:#333"/></svg>'
      ),
        m.DefineIcon("cslink", { NAME: "cslink", template: "cslink" }),
        m.RegisterCommand("cslink", {
          title: p.insertContentServerLink,
          icon: "cslink",
          undo: !0,
          focus: !0,
          showOnMobile: !0,
          callback: function () {
            const y = this;
            y.toolbar.disable();
            let s;
            y.selection.isCollapsed() || (s = y.selection.get()),
              y.selection.save(),
              y.$tb.hide(),
              x(".froala-save-cancel").hide(),
              y.opts.csLink
                .nodePicker()
                .show()
                .done(function (e) {
                  const r = e.nodes[0],
                    a =
                      y.opts.csLink.getUrl &&
                      typeof y.opts.csLink.getUrl == "function"
                        ? y.opts.csLink.getUrl(r)
                        : y.opts.csLink.nodeLink.getUrl(e.nodes[0]);
                  typeof y.opts.externalParams.enableSaveButton == "function" &&
                    y.opts.externalParams.enableSaveButton(),
                    y.selection.restore(),
                    s
                      ? y.format.apply("a", { href: a }, y.selection.text())
                      : y.link.insert(a, r.get("name"));
                })
                .fail(function (e) {})
                .always(function (e) {
                  y.$tb.show(),
                    x(".froala-save-cancel").show(),
                    y.toolbar.enable();
                });
          },
        });
    }
  ),
  csui.define(
    "csui/controls/source.dialog/source.dialog.textarea.field.view",
    [
      "csui/controls/form/fields/textareafield.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
    ],
    function (x, m) {
      "use strict";
      var p = x.extend({
        behaviors: { TabableRegionBehavior: { behaviorClass: m } },
        onAfterShow: function () {
          this.$el.find("*[tabindex]").prop("tabindex", 0),
            this.currentlyFocusedElement().focus();
        },
        onDomRefresh: function () {
          this.refreshFocusEngage();
        },
        currentlyFocusedElement: function () {
          return this.focusables[0];
        },
        refreshFocusEngage: function () {
          this.focusables = this.$el.find("textarea").filter(function (y, s) {
            return s.offsetWidth && s.offsetHeight;
          });
        },
        onLastTabElement: function () {
          return this.refreshFocusEngage(), this.currentlyFocusedElement();
        },
      });
      return p;
    }
  ),
  csui.define(
    "css!csui/controls/source.dialog/impl/source.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/source.dialog/source.dialog.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/controls/dialog/dialog.view",
      "csui/controls/source.dialog/source.dialog.textarea.field.view",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/controls/source.dialog/impl/source.dialog",
    ],
    function (x, m, p, y, s) {
      var e = p.extend({
        className: "fr-source-code-view",
        constructor: function (a = {}) {
          x.defaults(a, {
            buttons: [
              {
                id: "froalaOkButton",
                default: !0,
                label: s.okTitle,
                click: x.bind(this._okAction, this),
                enabled: !0,
              },
              {
                id: "froalaCancelButton",
                label: s.cancelTitle,
                close: !0,
                enabled: !0,
              },
            ],
            title: s.sourceDialogTitle,
            view: new y({
              model: new m.Model({ data: a.data, options: a }),
              mode: "writeonly",
            }),
          }),
            p.prototype.constructor.call(this, a);
        },
        _okAction: function () {
          const r = this.options.view.model;
          this.trigger("toggle:content", {
            data: r.get("data"),
            enableSaveButton: !!r.changed.data,
          }),
            this.destroy();
        },
        destroy: function () {
          p.prototype.destroy.call(this), this.trigger("show:froala-toolbar");
        },
      });
      return e;
    }
  ),
  csui.define(
    "css!csui/lib/froala_editor/css/plugins/source.dialog",
    [],
    function () {}
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/sourcecode",
    [
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "csui/controls/source.dialog/source.dialog.view",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/lib/froala_editor/css/plugins/source.dialog",
    ],
    function (x, m, p) {
      "use strict";
      x.DefineIconTemplate(
        "codeView",
        '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fr-source"></svg>'
      ),
        x.DefineIcon("codeView", { NAME: "codeView", template: "codeView" }),
        x.RegisterCommand("codeCustomView", {
          title: p.openCodeView,
          icon: "codeView",
          callback: function () {
            let y = this.html.get(!1, !0);
            y =
              (this.codeBeautifier &&
                !y.includes("fr-embedly") &&
                this.codeBeautifier.run(y, this.opts.codeBeautifierOptions)) ||
              y;
            const s = { data: y, largeSize: !0 };
            var e = new m(s);
            e.show(),
              this.$tb.hide(),
              this.$sc.find(".csui-html-editor-action-buttons").hide(),
              e.on(
                "toggle:content",
                function (r) {
                  this.html.set(r.data),
                    r.enableSaveButton &&
                      this.opts.externalParams.enableSaveButton();
                }.bind(this)
              ),
              e.on(
                "show:froala-toolbar",
                function () {
                  this.$tb.show(),
                    this.$sc.find(".csui-html-editor-action-buttons").show(),
                    this.el.focus();
                }.bind(this)
              );
          },
        });
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return "froala-save-cancel";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isFroala") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 12 },
                  end: { line: 1, column: 53 },
                },
              }
            )) != null
              ? t
              : "") +
            ` csui-html-editor-action-buttons">
  <button type="button" title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "saveLabel") || (e != null ? o(e, "saveLabel") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "saveLabel",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 31 },
                      end: { line: 2, column: 44 },
                    },
                  })
                : i)
            ) +
            `" role="button" data-cstabindex="-1" tabindex="-1"
          aria-label="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "saveAria") || (e != null ? o(e, "saveAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "saveAria",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 22 },
                      end: { line: 3, column: 34 },
                    },
                  })
                : i)
            ) +
            `"
          class="icon circular csui-html-edit-icon csui-html-edit-save"></button>
  <button type="button" title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "cancelLabel") ||
                  (e != null ? o(e, "cancelLabel") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cancelLabel",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 31 },
                      end: { line: 5, column: 46 },
                    },
                  })
                : i)
            ) +
            `" role="button" data-cstabindex="-1" tabindex="-1"
          aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "cancelAria") || (e != null ? o(e, "cancelAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cancelAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 22 },
                      end: { line: 6, column: 36 },
                    },
                  })
                : i)
            ) +
            `"
          class="icon circular csui-html-edit-icon csui-html-edit-cancel"></button>
</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_html.editor.action.buttons",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/floatingspace",
    [
      "csui/lib/jquery",
      "csui/lib/froala_editor/js/froala_editor.pkgd.min",
      "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "csui/lib/underscore",
      "i18n",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      m.PLUGINS.customFloatingspace = function (r) {
        let a, d;
        function t() {
          const f = x("body"),
            k = {
              saveLabel: y.saveTitle,
              cancelLabel: y.cancelTitle,
              cancelAria: y.cancelAria,
              saveAria: y.saveAria,
              isFroala: !0,
            };
          f.append(p(k)),
            f.find(".csui-html-edit-save").on(
              "click",
              s.bind(function () {
                r.opts.externalParams.disableSaveButton(),
                  this.events.trigger("onSave");
              }, r)
            ),
            f.find(".csui-html-edit-cancel").on(
              "click",
              s.bind(function () {
                this.events.trigger("cancel");
              }, r)
            );
        }
        function i(f) {
          const k = window.innerWidth,
            C = r.$box[0].getBoundingClientRect(),
            S = k - C.right,
            w = C.left;
          let v = C.width + Math.max(S, w),
            b = (v - f) / v;
          return (
            C.width / k > 0.8 && ((b = 1), (v = Math.min(C.width, v))), v * b
          );
        }
        function o() {
          if (x("body.binf-modal-open").length !== 0) return;
          const k = r.$tb,
            C = x(".csui-html-editor-action-buttons"),
            S = C.outerWidth(),
            w = C.outerHeight();
          let v = {};
          a ||
            (a = r.$box
              .parents()
              .closest(r.opts.externalParams.widgetSelector)[0]);
          let b = d || i(S);
          const _ = a.getBoundingClientRect(),
            T = window.innerWidth,
            l = document.documentElement.scrollTop;
          let g = k.outerHeight(),
            I,
            D = !1;
          _.top > g + w
            ? ((I = _.top + l - g), (D = !0))
            : (I = _.top + l + _.height);
          const A = window.getComputedStyle(a),
            B = parseFloat(A.paddingRight);
          let M = _.left,
            E = T - _.right;
          const P = e.settings.rtl,
            O = r.$sc[0].querySelector(".fr-popup.fr-active");
          (v.position = "absolute"),
            (v.zIndex = O ? 1070 : 1069),
            (v.top = `${I}px`),
            (v.borderRadius = "1px"),
            (v.display = "none"),
            (v["max-width"] = `${b}px`),
            (v.width = "max-content"),
            k.css(v),
            d || ((b = k.outerWidth()), (d = b)),
            E < M
              ? (M = _.right - b - B)
              : M === E && (M = _.left + (_.width - b) / 2),
            (M = Math.max(M, 0)),
            P
              ? ((v.right = `${Math.max(T - M - b, 0)}px`), (v.left = "auto"))
              : ((v.left = `${M}px`), (v.right = "auto")),
            (v.display = "block"),
            k.css(v),
            (g = k.outerHeight()),
            _.top > g + w
              ? ((I = _.top + l - g), (D = !0))
              : (I = _.top + l + _.height),
            k.css("top", `${I}px`);
          let z, j;
          function U() {
            return I + (g - w) / 2;
          }
          function H(N, V, L) {
            C.css({
              position: "absolute",
              "margin-top": "0px",
              width: "max-content",
              top: `${N}px`,
              left: V !== null ? `${V}px` : "auto",
              right: L !== null ? `${L}px` : "auto",
              zIndex: 1069,
            });
          }
          P
            ? M - S >= 5
              ? ((z = U()), (j = M - S - 5), j < 0 && (j = 5), H(z, j, null))
              : T - (M + b + S) >= 5
              ? ((z = U()), (j = T - (M + b + S + 5)), H(z, null, j))
              : D
              ? ((z = I + g - 20),
                k.css("top", `${I - w}px`),
                (j = T - (M + b)),
                H(z, null, j))
              : ((z = I + g + 5), (j = T - (M + b)), H(z, null, j))
            : T - M >= b + S + 5
            ? ((z = U()), (j = M + b + 5), H(z, j, null))
            : M >= S + 5
            ? ((z = U()), (j = M - S - 5), H(z, j, null))
            : D
            ? (k.css("top", `${I - w}px`),
              (z = I + g - 20),
              (j = M),
              H(z, j, null))
            : ((z = I + g + 5), (j = 0), H(z, j, null));
        }
        function n() {
          const f =
            r.$tb[0].querySelector(".fr-dropdown.fr-active") ||
            (r.$sc[0].querySelector(".fr-popup.fr-active") && 1070);
          r.$tb.css("zIndex", f || 1069);
        }
        function u() {
          const f = x(".fr-tooltip");
          f.length &&
            (f.css({ right: "auto" }), r.$tb.off("mouseenter", ".fr-command"));
        }
        function c() {
          x("body").append(r.$tb), t(), o();
          const f = s.debounce(() => {
            (d = null), o();
          }, 110);
          r.$box
            .closest(".csui-normal-scrolling")
            .on("scroll wheel", function () {
              r.popups.hideAll();
            }),
            x(window).on("resize.customFloatingspace", f),
            x(window).on("scroll.customFloatingspace", o),
            x(".fr-toolbar").on("mouseenter", ".fr-command", u),
            x(".fr-dropdown").on("blur click", r.button.bulkRefresh),
            r.events.on("buttons.refresh", n),
            r.events.on("destroy", h),
            window.addEventListener("popstate", h);
        }
        function h() {
          x(window).off("resize.customFloatingspace"),
            x(window).off("scroll.customFloatingspace"),
            x(".fr-toolbar").remove(),
            x(".csui-html-editor-action-buttons").remove(),
            x(".csui-rich-text-mask").remove(),
            r.popups.hideAll(),
            window.removeEventListener("popstate", h);
        }
        return { _init: c };
      };
    }
  ),
  csui.define(
    "csui/lib/froala_editor/js/plugins/video",
    ["csui/lib/froala_editor/js/froala_editor.pkgd.min"],
    function (x) {
      "use strict";
      x.PLUGINS.customVideoPlugin = function (m) {
        function p(e) {
          return !!e.match(/\.(mp4|mkv|ogg|webm|m4v|ogv|mov).*/gi);
        }
        function y(e, r) {
          const a = `<video width="640" controls>
                            <source src="${e}" type="video/mp4">
                            Your browser does not support the video tag.
                          </video>`;
          r.video.insert(a);
        }
        function s() {
          m.events.on("commands.after", function (e) {
            if (e === "videoInsertByURL") {
              const r = document.querySelector(
                '.fr-video-by-url-layer input[type="text"]'
              );
              if (r) {
                const a = r.value;
                p(a) && (y(a, this), this.popups.hide("video.insert"));
              }
            }
          });
        }
        return { _init: s };
      };
    }
  ),
  csui.define(
    "csui/utils/froala/bootstrap",
    [
      "require",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "i18n",
      "json!csui/utils/froala/localization.mappings.json",
      "csui/lib/froala_editor/js/plugins/custcsuiImage",
      "csui/lib/froala_editor/js/plugins/cslink",
      "csui/lib/froala_editor/js/plugins/sourcecode",
      "csui/lib/froala_editor/js/plugins/floatingspace",
      "csui/lib/froala_editor/js/plugins/video",
    ],
    function (x, m, p, y, s) {
      "use strict";
      const e =
        "PYC4mA3B12C11A8E7D6D3eMRPYa1c1REe1BGQOQIc1CDBREJImD6F5F4D4E1B9A5C3F5E4==";
      return function (a, d) {
        let t = {
          key: e,
          attribution: !1,
          toolbarSticky: !1,
          toolbarButtons: [
            "bold",
            "italic",
            "underline",
            "strikeThrough",
            "subscript",
            "superscript",
            "fontSize",
            "textColor",
            "backgroundColor",
            "inlineClass",
            "inlineStyle",
            "clearFormatting",
            "alignLeft",
            "alignCenter",
            "alignRight",
            "alignJustify",
            "formatOL",
            "formatUL",
            "paragraphFormat",
            "paragraphStyle",
            "lineHeight",
            "outdent",
            "indent",
            "quote",
            "trackChanges",
            "markdown",
            "insertLink",
            "cslink",
            "insertImage",
            "insertTable",
            "fontAwesome",
            "specialCharacters",
            "undo",
            "redo",
            "customText",
            "spellChecker",
            "codeCustomView",
          ],
          imageInsertButtons: ["imageUpload"],
          imageAllowedTypes: ["jpeg", "jpg", "png", "gif"],
          imageResize: !0,
          imageEditButtons: [
            "imageReplace",
            "imageAlign",
            "imageRemove",
            "|",
            "imageLink",
            "linkEdit",
            "linkRemove",
            "-",
            "imageDisplay",
            "imageStyle",
            "imageAlt",
            "imageSize",
          ],
          imageDefaultAlign: "left",
          scrollableContainer: "body",
          pluginsEnabled: [
            "align",
            "codeBeautifier",
            "colors",
            "entities",
            "file",
            "fontAwesome",
            "fontFamily",
            "fontSize",
            "resize",
            "inlineStyle",
            "link",
            "lists",
            "paragraphFormat",
            "paragraphStyle",
            "quote",
            "save",
            "specialCharacters",
            "table",
            "tableDragStart",
            "wordPaste",
            "spellChecker",
            "customAttachmentsPlugin",
            "customFloatingspace",
          ],
          saveInterval: 6e4,
          linkInsertButtons: ["linkBack"],
          linkEditButtons: ["linkOpen", "linkEdit", "linkRemove"],
          autofocus: !0,
          useClasses: !1,
          zIndex: 1069,
          direction: y.settings.rtl ? "rtl" : "auto",
          fontSize: [
            "8",
            "9",
            "10",
            "11",
            "12",
            "14",
            "16",
            "18",
            "24",
            "30",
            "36",
            "48",
            "60",
            "72",
            "96",
          ],
          fontSizeSelection: !0,
          fontSizeDefaultSelection: "16",
          dontConvertExternalCss: !0,
          htmlRemoveTags: ["script"],
        };
        (d.customHtmlGet = function (n, u) {
          const c = this;
          if (!c.$wp)
            return c.$oel
              .clone()
              .removeClass("fr-view")
              .removeAttr("contenteditable")
              .get(0).outerHTML;
          var h = "";
          c.events.trigger("html.beforeGet");
          var f = [],
            k = {},
            C,
            S,
            w = [];
          if ((c.html.syncInputs(), !c.opts.useClasses && !u)) {
            let W = function (q, R) {
              return q[3] - R[3];
            };
            var v = new RegExp(
              "^".concat(c.opts.htmlIgnoreCSSProperties.join("$|^"), "$"),
              "gi"
            );
            for (C = 0; C < c.doc.styleSheets.length; C++) {
              let q = function (R) {
                var Q = /(#[^\s+>~.[:]+)/g,
                  X = /(\[[^]]+\])/g,
                  te = /(\.[^\s+>~.[:]+)/g,
                  Y =
                    /(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,
                  K = /(:[\w-]+\([^)]*\))/gi,
                  $ = /(:[^\s+>~.[:]+)/g,
                  ie = /([^\s+>~.[:]+)/g;
                (function () {
                  var re = /:not\(([^)]*)\)/g;
                  re.test(R) && (R = R.replace(re, "     $1 "));
                })();
                var se =
                  (R.match(Q) || []).length * 100 +
                  (R.match(X) || []).length * 10 +
                  (R.match(te) || []).length * 10 +
                  (R.match(K) || []).length * 10 +
                  (R.match($) || []).length * 10 +
                  (R.match(Y) || []).length;
                return (
                  (R = R.replace(/[*\s+>~]/g, " ")),
                  (R = R.replace(/[#.]/g, " ")),
                  (se += (R.match(ie) || []).length),
                  se
                );
              };
              if (c.opts.dontConvertExternalCss) {
                const R = /lib\/froala_editor\/css\/.*\.css/,
                  Q = c.doc.styleSheets[C]?.href;
                if (!(Q && R.test(Q))) continue;
              }
              var b = void 0,
                _ = 0;
              try {
                (b = c.doc.styleSheets[C].cssRules),
                  c.doc.styleSheets[C].ownerNode &&
                    c.doc.styleSheets[C].ownerNode.nodeType === "STYLE" &&
                    (_ = 1);
              } catch {}
              if (b) {
                for (var T = 0, l = b.length; T < l; T++)
                  if (b[T].selectorText && b[T].style.cssText.length > 0) {
                    var g = b[T].selectorText
                        .replace(/body \s tbody \.fr-view /g, "")
                        .replace(/::/g, ":"),
                      I = void 0;
                    try {
                      I = c.el.querySelectorAll(g);
                    } catch {
                      I = [];
                    }
                    for (S = 0; S < I.length; S++) {
                      !I[S].getAttribute("fr-original-style") &&
                      I[S].getAttribute("style")
                        ? (I[S].setAttribute(
                            "fr-original-style",
                            I[S].getAttribute("style")
                          ),
                          f.push(I[S]))
                        : I[S].getAttribute("fr-original-style") ||
                          (I[S].setAttribute("fr-original-style", ""),
                          f.push(I[S])),
                        k[I[S]] || (k[I[S]] = {});
                      for (
                        var D = _ * 1e3 + q(b[T].selectorText),
                          A = b[T].style.cssText.split(";"),
                          B = 0;
                        B < A.length;
                        B++
                      ) {
                        var M = A[B].trim().split(":")[0];
                        if (
                          M &&
                          !M.match(v) &&
                          ((!k[I[S]][M] ||
                            (k[I[S]][M] &&
                              I[S].getAttribute("fr-original-style") == "")) &&
                            ((k[I[S]][M] = 0),
                            (
                              I[S].getAttribute("fr-original-style") || ""
                            ).indexOf("".concat(M, ":")) >= 0 &&
                              (k[I[S]][M] = 1e4)),
                          D >= k[I[S]][M] &&
                            ((k[I[S]][M] = D), A[B].trim().length))
                        ) {
                          var E = A[B].trim().split(":");
                          E.splice(0, 1);
                          var P = E.join(":").trim();
                          P.indexOf("!important") > -1 && (D = D + 1),
                            w.push([I[S], M.trim(), P, D]);
                        }
                      }
                    }
                  }
              }
            }
            for (w.sort(W), C = 0; C < w.length; C++) {
              var O = w[C];
              O[0].style[O[1]] = O[2].replace(/!important/, "");
            }
            for (C = 0; C < f.length; C++)
              if (
                (f[C].getAttribute("class") &&
                  (f[C].setAttribute(
                    "fr-original-class",
                    f[C].getAttribute("class")
                  ),
                  f[C].removeAttribute("class")),
                (f[C].getAttribute("fr-original-style") || "").trim().length >
                  0)
              ) {
                var z = f[C].getAttribute("fr-original-style").split(";");
                for (S = 0; S < z.length; S++)
                  if (z[S].indexOf(":") > 0) {
                    var j = z[S].split(":"),
                      U = j[0];
                    j.splice(0, 1), (f[C].style[U.trim()] = j.join(":").trim());
                  }
              }
          }
          if (c.node.isEmpty(c.el))
            c.opts.fullPage &&
              ((h = getDoctype(c.iframe_document)),
              (h += "<html"
                .concat(c.node.attributes(c.$html.get(0)), ">")
                .concat(
                  c.$html.find("head").get(0).outerHTML,
                  "<body></body></html>"
                )));
          else if ((typeof n > "u" && (n = !1), !c.opts.fullPage))
            (h = c.$el.html()),
              c.opts.iframe &&
                c.$html &&
                c.$html.find(".fr-element").length > 0 &&
                (h = c.$html.find(".fr-element").html());
          else {
            (h = getDoctype(c.iframe_document)), c.$el.removeClass("fr-view");
            var H = c.opts.heightMin,
              N = c.opts.height,
              V = c.opts.heightMax;
            (c.opts.heightMin = null),
              (c.opts.height = null),
              (c.opts.heightMax = null),
              c.size.refresh(),
              (h += "<html"
                .concat(c.node.attributes(c.$html.get(0)), ">")
                .concat(c.$html.html(), "</html>")),
              c.opts.iframe &&
                c.$html &&
                c.$html.find(".fr-element").length > 0 &&
                (h = c.$html.find(".fr-element").html()),
              (c.opts.heightMin = H),
              (c.opts.height = N),
              (c.opts.heightMax = V),
              c.size.refresh(),
              c.$el.addClass("fr-view");
          }
          if (!c.opts.useClasses && !u)
            for (C = 0; C < f.length; C++)
              f[C].getAttribute("fr-original-class") &&
                (f[C].setAttribute(
                  "class",
                  f[C].getAttribute("fr-original-class")
                ),
                f[C].removeAttribute("fr-original-class")),
                f[C].getAttribute("fr-original-style") !== null &&
                typeof f[C].getAttribute("fr-original-style") < "u"
                  ? (f[C].getAttribute("fr-original-style").length !== 0
                      ? f[C].setAttribute(
                          "style",
                          f[C].getAttribute("fr-original-style")
                        )
                      : f[C].removeAttribute("style"),
                    f[C].removeAttribute("fr-original-style"))
                  : f[C].removeAttribute("style");
          c.opts.fullPage &&
            ((h = h.replace(
              /<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,
              ""
            )),
            (h = h.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g, "")),
            (h = h.replace(
              /<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,
              ""
            )),
            (h = h.replace(
              /<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$2>$3</body>"
            )),
            (h = h.replace(
              /<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$3>$4</body>"
            )),
            (h = h.replace(
              /<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$3>$4</body>"
            )),
            (h = h.replace(
              /<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              '<body$1class="$2$4"$5>$6</body>'
            )),
            (h = h.replace(
              /<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,
              "<body$1$2>$3</body>"
            ))),
            c.opts.htmlSimpleAmpersand && (h = h.replace(/&amp;/gi, "&")),
            c.events.trigger("html.afterGet"),
            n ||
              (h = h.replace(
                /<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,
                ""
              )),
            (h = c.clean.invisibleSpaces(h));
          function L(W) {
            var q = W.parentNode;
            if (
              q &&
              (c.node.isBlock(q) || c.node.isElement(q)) &&
              ["TD", "TH"].indexOf(q.tagName) < 0
            ) {
              for (
                var R = W.previousSibling, Q = W.nextSibling;
                R &&
                ((R.nodeType === Node.TEXT_NODE &&
                  R.textContent.replace(/\n|\r/g, "").length === 0) ||
                  c.node.hasClass(R, "fr-tmp"));

              )
                R = R.previousSibling;
              if (Q) return !1;
              R &&
                q &&
                R.tagName !== "BR" &&
                !c.node.isBlock(R) &&
                !Q &&
                q.textContent.replace(/\u200B/g, "").length > 0 &&
                R.textContent.length > 0 &&
                !c.node.hasClass(R, "fr-marker") &&
                ((c.el === q &&
                  !Q &&
                  c.opts.enter === FroalaEditor.ENTER_BR &&
                  c.browser.msie) ||
                  W.parentNode.removeChild(W));
            } else
              q &&
                !(c.node.isBlock(q) || c.node.isElement(q)) &&
                !W.previousSibling &&
                !W.nextSibling &&
                c.node.isDeletable(W.parentNode) &&
                L(W.parentNode);
          }
          function F(W) {
            if (
              (c.events.trigger("html.processGet", [W]),
              W &&
                W.getAttribute &&
                W.getAttribute("class") === "" &&
                W.removeAttribute("class"),
              W &&
                W.getAttribute &&
                W.getAttribute("style") === "" &&
                W.removeAttribute("style"),
              W && W.nodeType === Node.ELEMENT_NODE)
            ) {
              let te = function (Y) {
                var K = Y.parentNode;
                if (
                  K &&
                  (c.node.isBlock(K) || c.node.isElement(K)) &&
                  ["TD", "TH"].indexOf(K.tagName) < 0
                ) {
                  for (
                    var $ = Y.previousSibling, ie = Y.nextSibling;
                    $ &&
                    (($.nodeType === Node.TEXT_NODE &&
                      $.textContent.replace(/\n|\r/g, "").length === 0) ||
                      c.node.hasClass($, "fr-tmp"));

                  )
                    $ = $.previousSibling;
                  if (ie) return !1;
                  $ &&
                    K &&
                    $.tagName !== "BR" &&
                    !c.node.isBlock($) &&
                    !ie &&
                    K.textContent.replace(/\u200B/g, "").length > 0 &&
                    $.textContent.length > 0 &&
                    !c.node.hasClass($, "fr-marker") &&
                    ((c.el === K &&
                      !ie &&
                      c.opts.enter === FroalaEditor.ENTER_BR &&
                      c.browser.msie) ||
                      Y.parentNode.removeChild(Y));
                } else
                  K &&
                    !(c.node.isBlock(K) || c.node.isElement(K)) &&
                    !Y.previousSibling &&
                    !Y.nextSibling &&
                    c.node.isDeletable(Y.parentNode) &&
                    te(Y.parentNode);
              };
              var q = W.querySelectorAll('[class=""],[style=""]'),
                R;
              for (R = 0; R < q.length; R++) {
                var Q = q[R];
                Q.getAttribute("class") === "" && Q.removeAttribute("class"),
                  Q.getAttribute("style") === "" && Q.removeAttribute("style");
              }
              if (W.tagName === "BR") te(W);
              else {
                var X = W.querySelectorAll("br");
                for (R = 0; R < X.length; R++) te(X[R]);
              }
            }
          }
          h = c.clean.exec(h, F);
          var G = c.events.chainTrigger("html.get", h);
          return (
            typeof G == "string" && (h = G),
            (h = h.replace(
              /<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,
              function (W) {
                return W.replace(
                  /<br>/g,
                  `
`
                );
              }
            )),
            (h = h.replace(
              /<meta((?:[\w\W]*?)) data-fr-http-equiv="/g,
              '<meta$1 http-equiv="'
            )),
            h
          );
        }),
          (d = d || {});
        const i = ["image", "insertImage"];
        d.externalParams.imageBrowseEnabled && t.pluginsEnabled.push(...i),
          (d = m.extend({}, t, d));
        const o = function (n) {
          csui.require(
            [
              "csui/lib/froala_editor/js/froala_editor.pkgd.min",
              "css!csui/lib/froala_editor/css/froala_editor.pkgd.min",
            ],
            function (u) {
              return n(new u(a, d));
            }
          );
        };
        return new Promise(function (n, u) {
          let c = y.settings.locale;
          if ((s.hasOwnProperty(c) && (c = s[c]), !c)) {
            o(n);
            return;
          }
          const h = `csui/lib/froala_editor/js/languages/${c}`;
          x(
            [h],
            function (f) {
              (d.language = c), o(n);
            },
            function (f) {
              o(n);
            }
          );
        });
      };
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/impl/navigation.header.controls",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/navigation.header.controls",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui-ext!csui/widgets/navigation.header/navigation.header.controls",
      "css!csui/widgets/navigation.header/impl/navigation.header.controls",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = x.config(),
        e = new p.Model(m.extend({ location: "left" }, s.logo)),
        r = new p.Collection([]),
        a = new p.Collection(
          [
            {
              id: "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
              sequence: 100,
              parentClassName:
                "csui-progressbar-maximize binf-hidden csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/search/search.view",
              sequence: 100,
              parentClassName: "csui-search csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/help/help.view",
              sequence: 200,
              parentClassName: "csui-help csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/favorites/favorites.view",
              sequence: 300,
              parentClassName: "csui-favorites csui-icons",
            },
            {
              id: "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
              sequence: 400,
              parentClassName: "csui-profile csui-icons",
            },
          ],
          { comparator: "sequence" }
        );
      y &&
        m.filter(y, function (i) {
          return (
            (i.id.indexOf("iwatch/") === 0 || i.id.indexOf("conws/") === 0) &&
            a.add(i)
          );
        });
      var d = m.reduce(
        m.values(s.masks || {}),
        function (i, o) {
          return {
            blacklist: i.blacklist.concat(o.blacklist || []),
            whitelist: i.whitelist.concat(o.whitelist || []),
          };
        },
        { blacklist: [], whitelist: [] }
      );
      d = {
        blacklist: m.unique(d.blacklist),
        whitelist: m.unique(d.whitelist),
      };
      function t(i) {
        return (
          !m.contains(d.blacklist, i.id) &&
          (!d.whitelist.length || m.contains(d.whitelist, i.id))
        );
      }
      return (
        r.remove(r.reject(t)),
        a.remove(a.reject(t)),
        { logo: e, leftSide: r, rightSide: a }
      );
    }
  ),
  csui.define(
    "hbs!csui/pages/start/impl/navigationheader/impl/navigationheader",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-global-message"></div>
<nav class="csui-navbar binf-navbar binf-navbar-default zero-gutter" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "mainNavigationAria") ||
                  (e != null ? i(e, "mainNavigationAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "mainNavigationAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 81 },
                      end: { line: 2, column: 103 },
                    },
                  })
                : t)
            ) +
            `">
  <div class="binf-container-fluid">
    <span class="binf-navbar-brand binf-collapse binf-navbar-collapse">        
      <span class="csui-logo">
        <span class="csui-logo-image" role="img" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "productLogoAria") ||
                  (e != null ? i(e, "productLogoAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "productLogoAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 61 },
                      end: { line: 6, column: 80 },
                    },
                  })
                : t)
            ) +
            `"></span>
      </span>
    </span>
    <div class="binf-nav binf-navbar-nav binf-navbar-left"></div>
    <div class="binf-nav binf-navbar-nav binf-navbar-right" ></div>
    <div class="binf-nav binf-navbar-nav csui-navbar-message"></div>
  </div>
</nav>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_pages_start_impl_navigationheader_impl_navigationheader",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/utils/contexts/factories/connector",
      "csui/models/node/node.model",
      "csui/utils/url",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return {
        mixin: function (r) {
          const a = "[data-theme] .binf-widgets ";
          return x.extend(r, {
            output: {},
            BRANDING_CONFIG_STYLESHEET_NAME: "BRANDINGCONFIG_CSS_FILE.css",
            BRANDING_CONFIG: {
              FOLDER_NAME: "Branding Config",
              FOLDER_TYPE_NAME: "Support Asset Image Folder",
              FOLDER_TYPE: 1306,
            },
            SUB_TYPE: 1309,
            IMG_NO_UPLOAD: "No Img Uploaded",
            CSS_NO_UPLOAD: "No style modified",
            SUCCESS: "success",
            ERROR: "error",
            SUCCESS_WITHOUT_CSS: "success without CSS",
            NO_RESULT_FOUND: "no result found",
            brandingStylesheet: `
            ${a},
            ${a} .csui-navbar.binf-navbar, 
            ${a}.csui-pman-header-config .pman-header-preview-panel,
            ${a} #breadcrumb-wrap .csui-perspective-breadcrumb,
            ${a} #breadcrumb-wrap .breadcrumb-inner.breadcrumb-inner-header,        
            ${a} .csui-perspective-breadcrumb,
            ${a} .csui-image-picker .csui-brand-image-logo {
              background: [CUSTOM_BRANDING_BGCOLOR];
            }
            ${a} .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #content-region, ${a} .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #sidebar-region{
              background: [LANDING_PAGE_BGCOLOR];
            }
            ${a} .csui-perspective-view .banner-content-sidebar-perspective.cs-perspective #main{
              background-color: [LANDING_PAGE_BGCOLOR];
            }
        `,
            getSupportAssetVolumeID: function () {
              const t = (this.context || this.options.context).getObject(p),
                i = {
                  url: `${t.getConnectionUrl().getApiBase()}volumes/${
                    this.SUB_TYPE
                  }`,
                };
              return t.makeAjaxCall(i);
            },
            fetchBrandingConfigFolderDetails: function (d, t, i) {
              let o = m.Deferred();
              const u = (this.context || this.options.context).getObject(p),
                c = {
                  url: `${u.getConnectionUrl().getApiBase("v2")}app/container/${
                    d.id
                  }`,
                };
              return (
                u
                  .makeAjaxCall(c)
                  .then((h) => {
                    const f =
                      Array.isArray(h.results.contents) &&
                      h.results.contents.filter(
                        (k) => k.name === this.BRANDING_CONFIG.FOLDER_NAME
                      );
                    if (f.length > 0) {
                      const { size: k, id: C } = f[0];
                      if (k > 0)
                        this.getItemsFromNode(C)
                          .done((S) => {
                            const w = S.results?.contents;
                            this.deleteItemsFromBranding(w, t, i)
                              .done(() => o.resolve(f[0]))
                              .fail((v) => o.reject(v));
                          })
                          .fail((S) => o.reject(S));
                      else return o.resolve(f[0]);
                    } else
                      this.createBrandingConfigFolder(d).done((k) =>
                        o.resolve(k)
                      );
                  })
                  .fail(function (h) {
                    return o.reject(h);
                  }),
                o.promise()
              );
            },
            getItemsFromNode: function (d) {
              const i = (this.context || this.options.context).getObject(p),
                o = {
                  url: `${i
                    .getConnectionUrl()
                    .getApiBase("v2")}app/container/${d}`,
                };
              return i.makeAjaxCall(o);
            },
            getDetailsForBrandingConfig: function () {
              let d = m.Deferred();
              const i = (this.context || this.options.context).getObject(p),
                o = {
                  url: `${i
                    .getConnectionUrl()
                    .getApiBase("v2")}server/settings/branding`,
                };
              return (
                i
                  .makeAjaxCall(o)
                  .then((n) => {
                    if (n?.results?.value)
                      try {
                        const u = n.results.value;
                        return (
                          u.brandLogoUri &&
                            (u.brandLogoUri = `${i
                              .getConnectionUrl()
                              .getOrigin()}${u.brandLogoUri}`),
                          d.resolve({ statusMsg: this.SUCCESS, data: u })
                        );
                      } catch {
                        return d.reject({ statusMsg: this.ERROR });
                      }
                    else return d.reject({ statusMsg: this.ERROR });
                  })
                  .fail(function (n) {
                    return d.reject(n);
                  }),
                d.promise()
              );
            },
            deleteItemsFromBranding: function (d, t, i) {
              let o = m.Deferred();
              if ((d.length === 0 || i) && !t)
                return o.resolve({ statusMsg: "Nothing to be deleted" });
              let n = [],
                u = [];
              const h = (this.context || this.options.context).getObject(p);
              return (
                (u = d.map((f) => f.id)),
                u.forEach((f) => {
                  n.push(o);
                  const k = {
                    method: "DELETE",
                    url: `${h.getConnectionUrl().getApiBase()}nodes/${f}`,
                  };
                  h.makeAjaxCall(k)
                    .then((C) => o.resolve(C))
                    .fail(function (C) {
                      return o.reject(C);
                    });
                }),
                m.whenAll.apply(m, n)
              );
            },
            createBrandingConfigFolder: function ({ id: d, container: t }) {
              const o = (this.context || this.options.context).getObject(p);
              let n = m.Deferred();
              const u = {
                  type: this.BRANDING_CONFIG.FOLDER_TYPE,
                  type_name: this.BRANDING_CONFIG.FOLDER_TYPE_NAME,
                  container: t,
                  name: this.BRANDING_CONFIG.FOLDER_NAME,
                  parent_id: d,
                },
                c = {
                  method: "POST",
                  url: `${o.getConnectionUrl().getApiBase()}nodes`,
                  data: u,
                };
              return (
                o
                  .makeAjaxCall(c)
                  .then((h) => n.resolve(h))
                  .fail(function (h) {
                    return n.reject(h);
                  }),
                n.promise()
              );
            },
            uploadConfigInBrandingFolder: function (d, t) {
              let i = m.Deferred();
              const n = (this.context || this.options.context).getObject(p);
              return !d || !t || !(d instanceof File)
                ? i.resolve({ statusMsg: this.IMG_NO_UPLOAD })
                : new y({ type: 144 }, { connector: n }).save(
                    {
                      name: d.name,
                      type: 1305,
                      parent_id: t.id,
                      advanced_versioning: !1,
                    },
                    { files: { file: d } }
                  );
            },
            getBlodURL: function (d) {
              return !d || !(d instanceof Blob)
                ? void 0
                : URL.createObjectURL(d);
            },
            uploadBrandingConfigSettings: function (d) {
              const i = (this.context || this.options.context).getObject(p),
                o = {
                  method: "POST",
                  url: `${i
                    .getConnectionUrl()
                    .getApiBase("v2")}server/settings/branding`,
                  data: { value: JSON.stringify(d) },
                };
              return i.makeAjaxCall(o);
            },
            getNodeDetails: function (d) {
              const i = (this.context || this.options.context).getObject(p),
                o = {
                  url: `${i
                    .getConnectionUrl()
                    .getApiBase("v2")}/nodes/${d}/nodes?fields=properties`,
                };
              return i.makeAjaxCall(o);
            },
            getFileDetails: function (d) {
              const i = (this.context || this.options.context).getObject(p);
              var o = new s(i.connection.url).getCgiScript();
              const u = {
                url: `${o}?func=doc.fetchcsui&nodeid=${d}`,
                dataType: "binary",
              };
              return i.makeAjaxCall(u);
            },
            createStyleSheet: function (d) {
              if (!d) return;
              const { customBrandingBgColor: t, breadcrumbColor: i } = d;
              let o = this.brandingStylesheet.trim();
              const n = new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/);
              n.test(t) &&
                ((o = o.replaceAll("[CUSTOM_BRANDING_BGCOLOR]", t)),
                (o = o.replaceAll("[LANDING_PAGE_BGCOLOR]", t))),
                n.test(t) && (o = o.replaceAll("[BREADCRUMB_COLOR]", i));
              const u = URL.createObjectURL(
                new Blob([o], {
                  type: "text/css",
                  name: this.BRANDING_CONFIG_STYLESHEET_NAME,
                })
              );
              if (!matchMedia("(forced-colors: active)")?.matches) return u;
            },
          });
        },
      };
    }
  ),
  csui.define(
    "csui/utils/cache.assets/cache.assets",
    ["csui/lib/underscore", "csui-ext!csui/utils/cache.assets/cache.assets"],
    function (x, m) {
      let p = [
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/theme_unchecked.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/theme_checked.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_default.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_light.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/icons.setting/images/icon_theme_dark.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_favorites_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_favorites_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_help_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_help_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/light_search_icon.svg",
        },
        {
          as: "image",
          href: "csui/themes/carbonfiber/image/branding/navigationheader/images/dark_search_icon.svg",
        },
      ];
      return m && ((m = x.flatten(m)), p.push(...m)), p;
    }
  ),
  csui.define(
    "css!csui/pages/start/impl/navigationheader/impl/navigationheader",
    [],
    function () {}
  ),
  csui.define(
    "csui/pages/start/impl/navigationheader/navigationheader.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/contexts/factories/user",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/widgets/navigation.header/navigation.header.controls",
      "hbs!csui/pages/start/impl/navigationheader/impl/navigationheader",
      "i18n!csui/pages/start/impl/nls/lang",
      "i18n!csui/pages/start/nls/lang",
      "csui/utils/high.contrast/detector!",
      "csui/lib/radio",
      "csui/utils/url",
      "csui/utils/node.links/node.links",
      "csui/utils/base",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
      "csui/utils/commonconfig.util",
      "csui/utils/cache.assets/cache.assets",
      "css!csui/pages/start/impl/navigationheader/impl/navigationheader",
      "csui/lib/jquery.when.all",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b
    ) {
      "use strict";
      var _ = m.config();
      p.defaults(_, { enableMinimiseButtonOnProgressPanel: !0 });
      var T = e.LayoutView.extend({
        template: o,
        regions: { messageRegion: ".csui-navbar-message" },
        ui: {
          navbar: ".csui-navbar",
          branding: ".binf-navbar-brand",
          logo: ".csui-logo-image",
          left: ".binf-navbar-left",
          right: ".binf-navbar-right",
          csuiLogo: ".csui-logo",
        },
        events: {
          "click @ui.csuiLogo": "onClickHomeIcon",
          "keydown @ui.csuiLogo": "onKeydownHomeIcon",
        },
        templateHelpers: function () {
          return {
            mainNavigationAria: n.mainNavigationAria,
            productLogoAria: p.str.sformat(n.productLogoAria, u.ProductName),
          };
        },
        constructor: function (g) {
          console.warn(
            'DEPRECATED: Instead use "smart/controls/app.header/app.header.view".'
          ),
            e.LayoutView.call(this, g),
            this.propagateEventsToRegions(),
            (this.headerConfig = null),
            (this.user = g.user || this.options.context.getModel(a)),
            (this.applicationScope =
              g.applicationScope || this.options.context.getModel(t)),
            (this.brandingConfigData = this.options.context.getModel(S)),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this._applyBrandingStyles
            ),
            this.listenTo(
              this,
              "render:controls",
              this._adjustControls.bind(this)
            ),
            this.listenTo(
              this,
              "processbar:minimize processbar:maximize",
              this._adjustControlsWithAnimation.bind(this)
            ),
            this.listenTo(
              this,
              "before:destroy",
              p.bind(function () {
                y(window).off(
                  "resize." + this.cid,
                  this._adjustControls.bind(this)
                );
              }, this)
            ),
            y(window).on("resize." + this.cid, this._adjustControls.bind(this)),
            this.listenTo(
              this.options.context?.previewBranding,
              "change",
              this._onRenderPage
            ),
            this.listenTo(
              this.options.context?.previewBranding,
              "exit:edit:perspective",
              this._applyBrandingStyles
            ),
            this.listenTo(
              this.options.context,
              "sync error",
              this._toggleVisibility
            ),
            this.listenTo(
              this,
              "before:destroy",
              p.bind(function () {}, this)
            ),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this._applyBrandingStyles
            ),
            Array.isArray(b) && b.length > 0 && this._cacheAssets();
        },
        _onRenderPage: function () {
          if (this.options.isPerspectiveEdit) {
            const g = this.user?.get("headerconfig");
            if (this.headerConfig?.options?.header?.widgets) {
              var l = [];
              p.each(this.headerConfig.options.header.widgets, function (I) {
                var D = { options: I.options, view: I.view };
                l.push(D);
              }),
                (this.headerConfig.options.header.widgets = l);
            }
            (this.headerConfig = p.clone(g)), this.render();
          }
        },
        _applyBrandingStyles: function () {
          if ((this.applyIconTheme(), this.options.isPerspectiveEdit)) {
            const l = this._addBrandingStyling(
                this.options.context?.previewBranding,
                !0
              ),
              g = this.options.context?.previewBranding?.get("brandLogoUri");
            this.loadLogo(g);
            const I = "edit-branding-stylesheet";
            document.getElementById(I)?.remove();
            const D = document.createElement("link");
            (D.id = I),
              (D.rel = "stylesheet"),
              (D.href = l),
              y(".pman-mode-edit").append(D);
          } else {
            const l = this.brandingConfigData?.get("brandLogoUri"),
              g = this.brandingConfigData?.get("brandingCSS");
            this.loadLogo(l), this.loadBrandingCSSFile(g);
          }
        },
        _addBrandingStyling: function (l, g) {
          if (!l) return;
          const I = l.get("brandingSettingCodes");
          return this.createStyleSheet(I, g);
        },
        applyIconTheme: function () {
          const l = this.options.context,
            g =
              l?.previewBranding?.get("brandingSettingCodes")?.iconThemes ??
              l?.navigationHeaderView?.brandingConfigData?.get(
                "brandingSettingCodes"
              )?.iconThemes;
          (this.themeCode = g),
            !g || g === "default"
              ? (this.$el.removeClass("icon_theme_dark"),
                this.$el.removeClass("icon_theme_light"))
              : g === "dark"
              ? (this.$el.removeClass("icon_theme_light"),
                this.$el.addClass("icon_theme_" + g))
              : (this.$el.removeClass("icon_theme_dark"),
                this.$el.addClass("icon_theme_" + g)),
            matchMedia("(forced-colors: active)").matches &&
              this.$el
                .removeClass("icon_theme_dark")
                .removeClass("icon_theme_light");
        },
        _adjustControls: function () {
          for (
            var l = this.el.offsetWidth,
              g = this.el.getElementsByClassName("binf-navbar-left")[0],
              I = 0,
              D = this.el.getElementsByClassName("binf-navbar-right")[0],
              A = 0,
              B = this.el.getElementsByClassName("csui-logo")[0],
              M = i.logo.get("location"),
              E = this.el.getElementsByClassName("csui-logo-" + M)[0],
              P = E && window.getComputedStyle(E).position === "absolute",
              O = M === "left" ? 53 : -240,
              z = B.offsetWidth + O,
              j = 0;
            j < D.childElementCount;
            j++
          )
            A += D.children[j].offsetWidth || 0;
          for (j = 0; j < g.childElementCount; j++)
            I += g.children[j].offsetWidth || 0;
          var U = !(P && M !== "left"
            ? I + z / 2 < l / 2 && A + z / 2 < l / 2
            : l > I + A + z);
          if (
            (U
              ? B.classList.add("binf-logo-hide")
              : z > 40 && B.classList.remove("binf-logo-hide"),
            this.listenTo(
              this,
              "header:control:clicked",
              p.bind(function () {
                this.trigger("control:clicked");
              }, this)
            ),
            this.options.isPerspectiveEdit)
          ) {
            let H = this.$el[0].querySelectorAll('[tabindex="0"]');
            this.$el.find(H).attr("tabindex", "-1");
          }
        },
        _adjustControlsWithAnimation: function () {
          setTimeout(
            p.bind(function () {
              this._adjustControls();
            }, this),
            301
          );
        },
        onRender: function () {
          var l = this.options.context,
            g = this;
          r.setProgresspanelMessageRegionView(this, {
            classes: "csui-global-message",
            enableMinimiseButtonOnProgressPanel:
              _.enableMinimiseButtonOnProgressPanel,
          });
          var I = i.logo.get("location");
          I === "none"
            ? this.ui.logo.addClass("binf-hidden")
            : this.ui.branding.addClass("csui-logo-" + I),
            g.breadCrumbStyles && g.breadCrumbStyles.remove(),
            this._applyBrandingStyles(),
            this._resolveComponents().done(function () {
              g.trigger("before:render:controls", g),
                i.leftSide.each(D.bind(g, g.ui.left)),
                i.rightSide.each(D.bind(g, g.ui.right)),
                g.trigger("render:controls", g),
                g._showSystemMessage();
            });
          function D(A, B) {
            var M = B.get("view");
            if (M) {
              var E = y("<div>").addClass(B.get("parentClassName")).appendTo(A),
                P = g.addRegion(p.uniqueId("csui:navigation.header.control"), {
                  selector: E,
                }),
                O = new M({
                  context: l,
                  parentView: g,
                  themeCode: g.themeCode,
                  highContrast: c,
                });
              P.show(O);
            }
          }
          h.channel("branding:logo").trigger("update:logo");
        },
        loadBrandingCSSFile: function (l) {
          const g = "csuiBrandingCSSURL";
          if ((document.getElementById(g)?.remove(), !l)) return;
          const I = document.createElement("link");
          (I.id = g),
            (I.rel = "stylesheet"),
            (I.href = l),
            document.body.appendChild(I);
        },
        loadLogo: function (l) {
          if (!l) {
            this.ui.logo.removeAttr("style");
            return;
          }
          const g = `background-image: url(${l}); background-size: contain`;
          this.ui.logo.attr("style", g);
        },
        _resolveComponents: function () {
          if (this._controlsResolved) return this._controlsResolved;
          function l(A) {
            var B = y.Deferred();
            return x([A], B.resolve, B.reject), B.promise();
          }
          var g = i.leftSide.models.concat(i.rightSide.models),
            I = g.map(function (A) {
              return l(A.id);
            }),
            D = y.Deferred();
          return (
            y.whenAll.apply(y, I).always(function (A) {
              A.forEach(function (B, M) {
                g[M].set("view", B);
              }),
                D.resolve();
            }),
            (this._controlsResolved = D.promise()),
            this._controlsResolved
          );
        },
        _showSystemMessage: function () {
          const l = localStorage.getItem("shownSystemMsg");
          var g = this;
          l ||
            (localStorage.setItem("shownSystemMsg", !0),
            v.enableFeatureInSmartView() &&
              csui.require(
                [
                  "csui/models/system.messages/system.message.server.adaptor.mixin",
                ],
                function (I) {
                  I.mixin(T.prototype),
                    g.constructor.prototype
                      .makeServerAdaptor(
                        g.options.context?._factories?.connector?.property
                      )
                      .parseResponse(n);
                }
              ));
        },
        addLinkToIcon: function () {
          var l =
              this.options &&
              this.options.context &&
              this.options.context._user &&
              this.options.context._user.connector,
            g = new f((l && l.connection.url) || location.href),
            I = k.getHomeUrl(g);
          return I;
        },
        onClickHomeIcon: function (l) {
          C.isControlClick(l) ||
            (l.preventDefault(), this.applicationScope.set("id", ""));
        },
        onKeydownHomeIcon: function (l) {
          (l.keyCode === 32 || l.keyCode === 13) && this.onClickHomeIcon(l);
        },
        _toggleVisibility: function () {
          if (!this._isRendered) return;
          const l = this.ui.csuiLogo;
          this.applicationScope.id
            ? (l.attr("role", "link"),
              l.attr("data-href", this.addLinkToIcon()),
              this.ui.csuiLogo.css("cursor", "pointer"),
              l.attr("title", n.Home),
              l.attr("aria-label", n.HomeIconAria),
              l.attr("tabindex", "0"))
            : (l.removeAttr("role"),
              l.removeAttr("data-href"),
              this.ui.csuiLogo.css("cursor", "auto"),
              l.removeAttr("title"),
              l.removeAttr("aria-label"),
              l.attr("tabindex", "-1"));
        },
        _cacheAssets: function () {
          const l = this.user.connector?.getConnectionUrl()?.getOrigin(),
            g = this.user.connector?.connection?.supportPath,
            I = g ? l.concat(g) : l;
          b.forEach((D) => {
            const A = document.createElement("link");
            (A.rel = "prefetch"),
              (A.as = D.as),
              (A.href = `${I}/${D.href}`),
              y("head").append(A);
          });
        },
      });
      return p.extend(T.prototype, d), w.mixin(T.prototype), T;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.view",
    [
      "smart/controls/app.header/app.header.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "csui/utils/commonconfig.util",
    ],
    function (x, m, p) {
      "use strict";
      return x.extend({
        onBeforeAttach: function () {
          this._showSystemMessage();
        },
        _showSystemMessage: function () {
          const s = localStorage.getItem("shownSystemMsg"),
            e = this;
          s ||
            (localStorage.setItem("shownSystemMsg", !0),
            p.enableFeatureInSmartView() &&
              csui.require(
                [
                  "csui/models/system.messages/system.message.server.adaptor.mixin",
                ],
                function (r) {
                  r.mixin(x.prototype),
                    x.prototype
                      .makeServerAdaptor(
                        e.options.context?._factories?.connector?.property
                      )
                      .parseResponse(m);
                }
              ));
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/burger.menu/burger.menu",
    [
      "module",
      "nuc/lib/jquery",
      "nuc/lib/underscore",
      "csui-ext!csui/controls/app.header/burger.menu/burger.menu",
    ],
    function (x, m, p, y) {
      "use strict";
      const s = { allowedModules: [], ...x.config() },
        e = (a = []) => {
          const d = s.allowedModules;
          return (
            d.length > 0 && (a = a.filter((t) => d.indexOf(t.moduleName) > -1)),
            a
          );
        };
      return {
        getAllMenuItems: function (a) {
          let d = m.Deferred(),
            t = [],
            i = [],
            o = { groups: [], items: [] };
          return (
            y?.length &&
              y.forEach((n) => {
                t.push(
                  m.when(n(a)).then(function (u) {
                    u.items.length > 0
                      ? ((u.items = e(u.items)), i.push(u))
                      : console.debug("No items are found");
                  })
                );
              }),
            m.whenAll.apply(m, t).then(() => {
              i?.length &&
                i.forEach((n) => {
                  n?.groups?.length &&
                    n.groups.forEach(function (h) {
                      o.groups.some((f) => f.id === h.id) || o.groups.push(h);
                    }),
                    n.items.forEach(function (c) {
                      o.items.some((h) => h.signature === c.signature) ||
                        o.items.push(c);
                    });
                }),
                d.resolve(o);
            }),
            d.promise()
          );
        },
      };
    }
  ),
  csui.define(
    "hbs!csui/widgets/error.global/impl/error.global",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ' aria-describedby="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "msgId") || (e != null ? i(e, "msgId") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "msgId",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 92 },
                      end: { line: 5, column: 101 },
                    },
                  })
                : t)
            ) +
            '" '
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `        <div class='server-error-message-wrapper'>
          <div class='server-error-message horizontal-center-align'>
            <span id="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "msgId") || (e != null ? i(e, "msgId") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "msgId",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 22 },
                      end: { line: 12, column: 31 },
                    },
                  })
                : t)
            ) +
            `" class='csui-acc-focusable'>` +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 12, column: 60 },
                      end: { line: 12, column: 71 },
                    },
                  })
                : t)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        5: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "        <div class='navigation-control-container' " +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "noHistory") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 20, column: 50 },
                  end: { line: 20, column: 97 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
          <a class='go-back-button circle-border horizontal-center-align' href="#"
            title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 19 },
                      end: { line: 22, column: 34 },
                    },
                  })
                : i)
            ) +
            "' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 22, column: 48 },
                      end: { line: 22, column: 63 },
                    },
                  })
                : i)
            ) +
            `' class='csui-acc-focusable'>
              <span class='icon icon-back'></span>
          </a>
          <div class='go-back-text button-text horizontal-center-align' title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "backTooltip") ||
                  (e != null ? o(e, "backTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backTooltip",
                    hash: {},
                    loc: {
                      start: { line: 25, column: 79 },
                      end: { line: 25, column: 94 },
                    },
                  })
                : i)
            ) +
            `'>
              <span>` +
            s.escapeExpression(
              ((i =
                (i = o(r, "backText") || (e != null ? o(e, "backText") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "backText",
                    hash: {},
                    loc: {
                      start: { line: 26, column: 20 },
                      end: { line: 26, column: 32 },
                    },
                  })
                : i)
            ) +
            `</span>
          </div>
        </div>
        <div class='navigation-control-container'>
          <a class='go-home-button circle-border horizontal-center-align' href="#"
            title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 19 },
                      end: { line: 31, column: 34 },
                    },
                  })
                : i)
            ) +
            "' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 48 },
                      end: { line: 31, column: 63 },
                    },
                  })
                : i)
            ) +
            `' class='csui-acc-focusable'>
              <span class='icon icon-home'></span>
          </a>
          <div class='go-home-text button-text horizontal-center-align' title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "homeTooltip") ||
                  (e != null ? o(e, "homeTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeTooltip",
                    hash: {},
                    loc: {
                      start: { line: 34, column: 79 },
                      end: { line: 34, column: 94 },
                    },
                  })
                : i)
            ) +
            `'>
              <span>` +
            s.escapeExpression(
              ((i =
                (i = o(r, "homeText") || (e != null ? o(e, "homeText") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "homeText",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 20 },
                      end: { line: 35, column: 32 },
                    },
                  })
                : i)
            ) +
            `</span>
          </div>
        </div>
`
          );
        },
        6: function (s, e, r, a, d) {
          return " style='display:none;' ";
        },
        8: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "showCloseButton") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(9, d, 0),
              inverse: s.noop,
              loc: {
                start: { line: 39, column: 8 },
                end: { line: 43, column: 15 },
              },
            }
          )) != null
            ? t
            : "";
        },
        9: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `          <div class='navigation-control-container'>
            <button type="submit" class="close-button highlighted-btn">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "closeText") || (e != null ? i(e, "closeText") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "closeText",
                    hash: {},
                    loc: {
                      start: { line: 41, column: 71 },
                      end: { line: 41, column: 84 },
                    },
                  })
                : t)
            ) +
            `</button>
          </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "<div class='main-area-container' role='region' aria-label='" +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "regionAria") || (e != null ? o(e, "regionAria") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "regionAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 59 },
                      end: { line: 1, column: 73 },
                    },
                  })
                : i)
            ) +
            `'>
  <div class='main-area-group'>
    <div class='error-message-area'>
      <div class='error-message-wrapper'>
        <h2 class='error-message horizontal-center-align' ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "message") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 5, column: 58 },
                  end: { line: 5, column: 110 },
                },
              }
            )) != null
              ? t
              : "") +
            ` >
          <span class='csui-acc-focusable'>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "errorMessage") ||
                  (e != null ? o(e, "errorMessage") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "errorMessage",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 43 },
                      end: { line: 6, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
        </h2>
      </div>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "message") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 9, column: 6 },
                  end: { line: 15, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>

    <div class='navigation-area horizontal-center-align'>
` +
            ((t = o(r, "unless").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "hideNavigationButtons") : e,
              {
                name: "unless",
                hash: {},
                fn: s.program(5, d, 0),
                inverse: s.program(8, d, 0),
                loc: {
                  start: { line: 19, column: 6 },
                  end: { line: 44, column: 17 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
  </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_error.global_impl_error.global", y), y
      );
    }
  ),
  csui.define("csui/widgets/error.global/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/error.global/impl/nls/root/lang", {
    errorMessage: "There was a problem serving the requested page.",
    backText: "Go back",
    backTooltip: "Navigate back to previous URL",
    homeText: "Home",
    homeTooltip: "Navigate to landing page",
    closeText: "Close",
    closeTooltip: "Close the error page",
    globalErrorRegionAria: "Global error",
  }),
  csui.define(
    "css!csui/widgets/error.global/impl/error.global",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/error.global/error.global.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/global.error",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/error.global/impl/error.global",
      "i18n!csui/widgets/error.global/impl/nls/lang",
      "csui/utils/log",
      "module",
      "css!csui/widgets/error.global/impl/error.global",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i) {
      "use strict";
      t = t(i.id);
      var o = p.ItemView.extend({
        className: "csui-global-error",
        template: a,
        templateHelpers: function () {
          return {
            errorMessage: d.errorMessage,
            backText: d.backText,
            backTooltip: d.backTooltip,
            homeText: d.homeText,
            homeTooltip: d.homeTooltip,
            closeText: d.closeText,
            closeTooltip: d.closeTooltip,
            msgId: x.uniqueId("msg"),
            regionAria: d.globalErrorRegionAria,
            noHistory: this.noHistory,
          };
        },
        TabableRegion: { behaviorClass: r, initialActivationWeight: 100 },
        ui: {
          errorMessage: ".error-message > span",
          closebutton: ".close-button",
        },
        events: {
          keydown: "onKeyInView",
          "click .go-home-button": "onClickHome",
          "click .go-home-text": "onClickHome",
          "click .go-back-button": "onClickBack",
          "click .go-back-text": "onClickBack",
          "click @ui.closebutton": "onClickClose",
        },
        constructor: function (u) {
          if (
            (p.ItemView.prototype.constructor.apply(this, arguments),
            this.model || (this.model = u.context.getModel(s, u)),
            (this.noHistory =
              u.context &&
              u.context.viewStateModel &&
              u.context.viewStateModel.getHistory().length < 1),
            y.isIE11())
          ) {
            var c = this,
              h = function () {
                c.render();
              };
            m(window).on("resize", h),
              this.once("before:destroy", function () {
                m(window).off("resize", h);
              });
          }
        },
        currentlyFocusedElement: function (n) {
          return this.ui.errorMessage;
        },
        onKeyInView: function (n) {
          (n.keyCode === 32 || n.keyCode === 13) &&
            (n.preventDefault(),
            n.stopPropagation(),
            m(n.target).trigger("click"));
        },
        onClickHome: function (n) {
          n.preventDefault(), n.stopPropagation();
          var u = this.options.context,
            c = u && u.viewStateModel,
            h = c && c.get(c.CONSTANTS.START_ID);
          if (h) {
            var f = u.getModel("nextNode");
            f.set("id", h);
          } else {
            var k = u.getModel(e);
            k.set("id", "");
          }
        },
        onClickBack: function (n) {
          n.preventDefault(), n.stopPropagation(), window.history.back();
        },
        onClickClose: function (n) {
          n.preventDefault(), n.stopPropagation(), this.destroy();
        },
      });
      return o;
    }
  ),
  csui.define("css!csui/pages/error.page/impl/error.page", [], function () {}),
  csui.define(
    "csui/pages/error.page/error.page.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/contexts/page/page.context",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/widgets/error.global/error.global.view",
      "csui/utils/url",
      "csui/utils/non-attaching.region/non-attaching.region",
      "css!csui/pages/error.page/impl/error.page",
    ],
    function (x, m, p, y, s, e, r, a) {
      var d = p.ItemView.extend({
        template: !1,
        constructor: function (i) {
          i || (i = {}),
            (i.el = document.body),
            p.ItemView.prototype.constructor.call(this, i),
            this.$el.addClass("binf-widgets csui-error-page-container"),
            (this.context = new y()),
            (this.applicationScope = this.context.getModel(s)),
            this.listenTo(this.applicationScope, "change:id", this._onChangeId),
            (this.globalErrorView = new e({
              model: i.model,
              context: this.context,
            }));
        },
        onRender: function () {
          this.globalErrorView.render(),
            this.$el.empty().append(this.globalErrorView.el),
            setTimeout(
              x.bind(function () {
                var t = new a({ el: this.el });
                t.show(this, { render: !1 });
              }, this)
            );
        },
        _onChangeId: function () {
          location.href = r.combine(
            new r(new r(location.pathname).getCgiScript()),
            "app"
          );
        },
      });
      return d;
    }
  ),
  csui.define("css!csui/pages/start/impl/start.page", [], function () {}),
  csui.define(
    "csui/pages/start/start.page.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/routing",
      "csui/utils/contexts/perspective/perspective.context",
      "csui/utils/contexts/factories/connector",
      "csui/pages/start/perspective.routing",
      "csui/utils/base",
      "csui/pages/start/impl/navigationheader/navigationheader.view",
      "csui/controls/app.header/app.header.view",
      "i18n",
      "csui/controls/app.header/burger.menu/burger.menu",
      "csui/controls/perspective.panel/perspective.panel.view",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/non-emptying.region/non-emptying.region",
      "csui/utils/non-attaching.region/non-attaching.region",
      "csui/utils/page.leaving.blocker",
      "csui/controls/iconpreload/icon.preload.view",
      "csui/pages/error.page/error.page.view",
      "csui/perspective.manage/mixins/update.supportasset.branding.config.mixin",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/namedsessionstorage",
      "i18n!csui/pages/start/impl/nls/lang",
      "csui/utils/commonconfig.util",
      "css!csui/pages/start/impl/start.page",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b,
      _,
      T,
      l,
      g,
      I
    ) {
      "use strict";
      let D = i;
      var A = m.extend(
        {
          useV2AppHeader: !0,
          enableHamburger: !0,
          signInPageUrl: "signin.html",
          redirectToSignInPage: !e.routesWithSlashes(),
        },
        x.config()
      );
      A.useV2AppHeader && (D = o);
      var B = s.ItemView.extend(
        {
          template: !1,
          behaviors: { TabablesBehavior: { behaviorClass: f } },
          constructor: function (E) {
            E || (E = {}),
              (E.el = document.body),
              s.View.prototype.constructor.call(this, E);
            var P = E.context || new r(),
              O = P.getObject(a);
            if (
              ((this.context = P),
              !O.connection.credentials &&
                !O.authenticator.isAuthenticated() &&
                !O.authenticator.syncStorage().isAuthenticated() &&
                !(O.authenticator.interactive && O.authenticator.interactive()))
            ) {
              A.redirectToSignInPage
                ? this._navigateToSignIn()
                : this._showMissingCredentialsError();
              return;
            }
            O.authenticator.on(
              "loggedOut",
              function (U) {
                U.reason === "failed" && this._navigateToSignIn(),
                  localStorage.removeItem("shownSystemMsg"),
                  U.reason === "logged-out" &&
                    P.viewStateModel &&
                    P.viewStateModel.clean();
              },
              this
            ),
              (this.brandingConfig = P.getModel(T)),
              this.loadSupportAssetID();
            let z = {
              context: P,
              signInPageUrl: this.options.signInPageUrl,
              transparent: !0,
              rtl: n.settings.rtl,
              brandingConfig: this.brandingConfig,
              skipLinks: [
                {
                  attributes: {
                    arialabel: g.skipLinkAria,
                    title: g.skipLinkAria,
                    href: "#content",
                    target: "_self",
                    id: "skipHeader",
                  },
                  execute: m.bind(function () {
                    this.navigationHeader?.el
                      ?.querySelector(".smart-application-header")
                      ?.setAttribute("inert", "");
                    const N = this.perspectivePanel.el?.querySelectorAll(
                        "a[href]:not([tabindex='-1']), area[href]:not([tabindex='-1']), input:not([tabindex='-1']), select:not([tabindex='-1']), textarea:not([tabindex='-1']), otc-button:not([tabindex='-1']), button:not([tabindex='-1']), *[tabindex='0'], iframe:not([tabindex='-1']), object:not([tabindex='-1']), embed:not([tabindex='-1'])"
                      ),
                      L = Array.from(N).filter(function (F) {
                        return p(F).is(":visible");
                      });
                    L.length > 0 && p(L[0]).trigger("focus");
                  }, this),
                },
              ],
              enableHamburger: A.enableHamburger,
            };
            (this.navigationHeader = new D(z)),
              (P.brandingConfigData = this.brandingConfig),
              this.navigationHeader.on(
                "render",
                m.bind(function () {
                  if (A.useV2AppHeader) {
                    (this.navigationHeader.brandingConfig =
                      this.brandingConfig),
                      (this.navigationHeader.brandingConfigData =
                        this.brandingConfig),
                      this.listenTo(
                        this.brandingConfig,
                        "change:branding",
                        m.bind(this._applyBrandingStyles, this)
                      ),
                      this.listenToOnce(
                        this.navigationHeader,
                        "render:header",
                        m.bind(this._applyBrandingStyles, this)
                      ),
                      this.listenTo(
                        this.navigationHeader,
                        "request:data",
                        function () {
                          u.getAllMenuItems({ context: P, connector: O }).then(
                            m.bind(function (H) {
                              this.navigationHeader.trigger("sync:data", H);
                            }, this)
                          );
                        }
                      );
                    let U =
                      this.navigationHeader?.skipLinksCollectionView?.el?.querySelector(
                        "#skipHeader"
                      );
                    U &&
                      U?.addEventListener(
                        "blur",
                        m.bind(function (H) {
                          this.navigationHeader?.el
                            ?.querySelector(".smart-application-header")
                            ?.removeAttribute("inert");
                        }, this)
                      ),
                      this.listenTo(
                        this.navigationHeader,
                        "process:left:menu:item",
                        m.bind(function (H) {
                          let N = H.get("execute");
                          m.isFunction(N) &&
                            N({ context: this.context, menuItem: H });
                        }, this)
                      );
                  }
                }, this)
              ),
              (this.context = P),
              (this.context.navigationHeaderView = this.navigationHeader),
              (this.perspectivePanel = new c({ context: P })),
              this.listenTo(
                this.perspectivePanel,
                "before:start:perspective:loading",
                function () {
                  this.el.classList.add("mouse-blocked");
                }
              ).listenTo(
                this.perspectivePanel,
                "after:finish:perspective:loading",
                function () {
                  this.el.classList.remove("mouse-blocked"),
                    this.navigationHeader.el.classList.remove(
                      "smart-app-header-hide"
                    );
                }
              ),
              this.options.applyFastTheme &&
                this.perspectivePanel &&
                (document.body.classList.add("csui-pre-loading"),
                I.enableSideBar() &&
                  document.body.classList.add("csui-sidebar-enabled"),
                this.listenToOnce(
                  this.perspectivePanel,
                  "before:start:perspective:loading",
                  function () {}
                ),
                this.listenToOnce(
                  this.perspectivePanel,
                  "after:finish:perspective:loading",
                  function () {
                    var U = this.options.preLoaderEle || "#csui-pre-loader";
                    if (
                      (p("body > " + U).remove(),
                      document.body.classList.remove("csui-pre-loading"),
                      this.context?._applicationScope?.get("id") === "" &&
                        !this.navigationHeader.el.querySelector(
                          "otc-skiplinks"
                        ))
                    ) {
                      let H =
                          this.navigationHeader.el.querySelectorAll(
                            "[tabindex='0']"
                          ),
                        N = m.filter(H, function (V) {
                          return p(V).is(":visible");
                        });
                      p(N[0]).trigger("focus");
                    }
                  }
                )),
              this.propagateEventsToViews(
                this.navigationHeader,
                this.perspectivePanel
              );
            var j = d.getInstance({ context: P, urlCanChange: !0 });
            j.start(),
              this.$el.addClass("binf-widgets"),
              t.isAppleMobile() && this.$el.addClass("csui-on-ipad"),
              t.isIOSBrowser() && this.$el.addClass("csui-on-macintosh"),
              csui.require(
                ["csui/utils/accessibility"],
                function (U) {
                  U.isAccessibleMode() && this.$el.addClass("accessibility");
                }.bind(this)
              ),
              p(window).on("unload", function () {});
          },
          _applyBrandingStyles: function () {
            let M = this.navigationHeader;
            if (M.options.isPerspectiveEdit) {
              const E = this._addBrandingStyling(
                  M.options.context?.previewBranding,
                  !0
                ),
                P = "edit-branding-stylesheet";
              document.getElementById(P)?.remove();
              const O = document.createElement("link");
              (O.id = P),
                (O.rel = "stylesheet"),
                (O.href = E),
                p(".pman-mode-edit").append(O);
            } else {
              const E = M.brandingConfigData?.get("brandingCSS");
              this.loadBrandingCSSFile(E);
            }
          },
          loadBrandingCSSFile: function (M) {
            const E = "csuiBrandingCSSURL";
            if ((document.getElementById(E)?.remove(), !M)) return;
            const P = document.createElement("link");
            (P.id = E),
              (P.rel = "stylesheet"),
              (P.href = M),
              document.body.appendChild(P);
          },
          _addBrandingStyling: function (M, E) {
            if (!M) return;
            const P = M.get("brandingSettingCodes");
            return this.createStyleSheet(P, E);
          },
          loadSupportAssetID: function () {
            const M = p.Deferred();
            return (
              this.getDetailsForBrandingConfig()
                .done((E) => {
                  const P = E?.data?.brandingSettingCodes;
                  if (P) {
                    const O = this.createStyleSheet(P);
                    (E.data.brandingCSS = O ?? ""),
                      (E.data.tempBrandingCSS = O ?? "");
                  }
                  return (
                    (E.data.logoSrc = E.data.brandLogoUri),
                    this.brandingConfig.set(E.data),
                    this.navigationHeader.trigger("render:header"),
                    M.resolve("Success")
                  );
                })
                .fail((E) => M.reject(E)),
              M.promise()
            );
          },
          onRender: function () {
            if (this._redirecting) return this;
            v.ensureOnThePage(),
              A?.useV2AppHeader &&
                this.navigationHeader.el.classList.add("smart-app-header-hide"),
              this._appendView(this.navigationHeader),
              this._appendView(this.perspectivePanel),
              this.$el.children(".cs-perspective-panel").attr("role", "main"),
              setTimeout(
                m.bind(function () {
                  var M = new S({ el: this.el });
                  M.show(this, { render: !1 });
                }, this)
              ),
              this.$el.on("globalmessage.shown", function (M, E) {
                var P = new k(E.options, E);
              });
          },
          onBeforeDestroy: function () {
            this.navigationHeader && this.navigationHeader.destroy(),
              this.perspectivePanel && this.perspectivePanel.destroy();
          },
          _appendView: function (M) {
            var E = new C({ el: this.el });
            E.show(M);
          },
          _navigateToSignIn: function () {
            if (!A.redirectToSignInPage) w.forceDisable(), location.reload();
            else {
              var M = this.options.signInPageUrl || A.signInPageUrl,
                E = location.search;
              (E += E ? "&" : "?"),
                (E += "nextUrl=" + encodeURIComponent(location.pathname)),
                (location.href = M + E + location.hash);
            }
            this._redirecting = !0;
          },
          _showMissingCredentialsError: function () {
            var M = new y.Model({
                message:
                  "The StartPageView was created without providing valid authentication data.",
                hideNavigationButtons: !0,
                errorCode: 401,
                showLogout: !1,
              }),
              E = new b({ model: M });
            E.render();
          },
        },
        {
          useV2AppHeader: A.useV2AppHeader ?? !1,
          enableHamburger: A.enableHamburger ?? !1,
        }
      );
      return m.extend(B.prototype, h), _.mixin(B.prototype), B;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/impl/nls/root/localized.strings",
    { HelpIconTitle: "Help", HelpIconAria: "Help pages, opens in new window" }
  ),
  csui.define(
    "csui/utils/context.help/context.help.ids",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/models/mixins/rules.matching/rules.matching.mixin",
      "csui-ext!csui/utils/context.help/context.help.ids",
    ],
    function (x, m, p, y) {
      var s = m.Model.extend({
        defaults: { sequence: 100, important: !1, module: null },
        constructor: function (d, t) {
          m.Model.prototype.constructor.apply(this, arguments),
            this.makeRulesMatching(t);
        },
      });
      p.mixin(s.prototype);
      var e = m.Collection.extend({
          model: s,
          comparator: "sequence",
          constructor: function (d, t) {
            m.Collection.prototype.constructor.apply(this, arguments);
          },
          findByApplicationScope: function (a) {
            return this.find(function (d) {
              return d.matchRules(a, d.attributes);
            });
          },
        }),
        r = new e([
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.getModel("applicationScope").id === "properties" &&
                a.context.viewStateModel &&
                a.context.viewStateModel.get("state").dropdown === "versions"
              );
            },
            contextHelpId: "qs-versionpg-bg",
          },
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.getModel("applicationScope").id === "properties" &&
                a.context.viewStateModel &&
                a.context.viewStateModel.get("state").dropdown === "audit"
              );
            },
            contextHelpId: "qs-audithistory-bg",
          },
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.getModel("applicationScope").id === "node" &&
                a.context.getModel("node").get("type") === 298
              );
            },
            contextHelpId: "qs-addtocollection-bg",
          },
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.getModel("applicationScope").id === "node" &&
                a.context.getModel("node").get("type") === 136
              );
            },
            contextHelpId: "compound-documents-so",
          },
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.getModel("applicationScope").id === "node" &&
                a.context.getModel("node").get("type") === 751
              );
            },
            contextHelpId: "qs-itemtypes-bg",
          },
          {
            sequence: 50,
            decides: function (a) {
              return (
                a.context.viewStateModel.get("session_state") &&
                a.context.viewStateModel.get("session_state").permissions
              );
            },
            contextHelpId: "qs-permissions-bg",
          },
        ]);
      return (
        r.map((a) => (a.helpDocId = "cssui250100-h-ugd")),
        y && r.add(x.flatten(y, !0)),
        r
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/help/impl/help",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return "icon-help-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="icon-help ' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 22 },
                  end: { line: 1, column: 64 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 82 },
                    },
                  })
                : i)
            ) +
            '"></div>'
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_help_impl_help",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/help/help.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "i18n!csui/widgets/navigation.header/controls/help/impl/nls/localized.strings",
      "i18n",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/context.help/context.help.ids",
      "csui/models/server.module/server.module.collection",
      "csui/lib/othelp",
      "hbs!csui/widgets/navigation.header/controls/help/impl/help",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o) {
      "use strict";
      var n =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/pages/start/impl/navigationheader/navigationheader.view"
        ] || {};
      m.extend(n, x.config()),
        n.help || (n.help = {}),
        m.defaults(n.help, {
          language: r.settings.locale.replace(/[-_]\w+$/, ""),
          preserve: !0,
        }),
        n.help.urlRoot === "" && (n.help.urlRoot = void 0),
        n.help.tenant === "" && (n.help.tenant = void 0),
        n.help.type === "" && (n.help.type = void 0);
      var u = y.ItemView.extend({
        tagName: "a",
        attributes: {
          href: "#",
          title: e.HelpIconTitle,
          "aria-label": e.HelpIconAria,
        },
        template: o,
        templateHelpers: function () {
          return {
            title: e.HelpIconTitle,
            highContrast: this.options.highContrast === 2,
          };
        },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (h) {
          y.ItemView.call(this, h),
            this.listenTo(this, "click:help", this._onClick);
        },
        onShow: function () {
          var c = this;
          this.$el.on("click", function (h) {
            s.isControlClick(h) || c.triggerMethod("click:help");
          }),
            this.$el.on("keydown", function (h) {
              h.keyCode === 32 &&
                (h.preventDefault(), c.triggerMethod("click:help"));
            });
        },
        _onClick: function (c) {
          const h = new t(),
            f = this.options.context,
            k =
              typeof c == "string" || c instanceof String
                ? c
                : f._applicationScope.get("id");
          var C = d.findByApplicationScope({ context: f });
          let S, w;
          C &&
            ((S = C.get("contextHelpId")),
            (w = C.get("helpDocId")),
            (S = typeof S == "function" ? S({ context: f }) : S)),
            h.fetch().then(function () {
              var v,
                b,
                _,
                T,
                l,
                g = [];
              (v = h.filter(function (I) {
                return !!I.get("helpDocId");
              })),
                (b = new i({ urlRoot: n.help.urlRoot })),
                (_ = { preserve: n.help.preserve, documents: [] }),
                m.each(v, function (I) {
                  var D = I.get("helpDocId");
                  g[D.match(/[^\d]+|\d+/g)[0]]
                    ? g[D.match(/[^\d]+|\d+/g)[0]].push(I)
                    : ((g[D.match(/[^\d]+|\d+/g)[0]] = []),
                      (g[D.match(/[^\d]+|\d+/g)[0]][0] = I));
                }),
                Object.keys(g).forEach(function (I) {
                  var D,
                    A = [],
                    B = [];
                  m.each(g[I], function (E) {
                    let P;
                    E.get("contextualHelp") && (D = E.get("contextualHelp")),
                      C && S && !w ? (P = S) : !P && D && k && !S && (P = D[k]);
                    var O = E.get("helpDocId"),
                      z = E.get("helpDocId").lastIndexOf("-"),
                      j = E.get("helpDocId").substring(z + 1);
                    B[j]
                      ? B[j].push({ helpDocId: O, topicId: P })
                      : ((B[j] = []), (B[j][0] = { helpDocId: O, topicId: P }));
                  });
                  var M = 0;
                  Object.keys(B).forEach(function (E) {
                    A[E] = m
                      .sortBy(B[E], function (P) {
                        return parseInt(P.helpDocId.match(/[^\d]+|\d+/g)[1]);
                      })
                      .reverse();
                  }),
                    Object.keys(A).forEach(function (E) {
                      for (var P = 0; P < A[E].length; P++)
                        if (A[E][P].topicId) {
                          M = P;
                          break;
                        }
                      _.documents.push({
                        module: A[E][M].helpDocId,
                        topic: A[E][M].topicId,
                      });
                    });
                }),
                m.each(_.documents, function (I, D) {
                  I.module === w
                    ? ((I.topic = S), (I.active = !0))
                    : I.topic && (I.active = !0),
                    I.module.match(/[^\d]+|\d+/g)[0] === "cssui" &&
                      I.topic === void 0 &&
                      (I.topic = "sui-overview-bg");
                }),
                (T = b.buildHelpUrl(n.help.language, _, {
                  tenant: n.help.tenant,
                  type: n.help.type,
                  options: { search: "allModules" },
                })),
                (l = window.open(T, "_blank")),
                l.focus();
            });
        },
      });
      return u;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/impl/nls/root/localized.strings",
    { HomeIconTitle: "Home", HomeIconAria: "Home page" }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/home/impl/home",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return "csui-icon-home-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="csui-icon-home ' +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 27 },
                  end: { line: 1, column: 74 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 83 },
                      end: { line: 1, column: 92 },
                    },
                  })
                : i)
            ) +
            '"></div>'
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_home_impl_home",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/home/home.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/base",
      "i18n!csui/widgets/navigation.header/controls/home/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/node.links/node.links",
      "hbs!csui/widgets/navigation.header/controls/home/impl/home",
    ],
    function (x, m, p, y, s, e, r, a, d, t) {
      "use strict";
      var i = p.ItemView.extend({
        tagName: "a",
        className: "csui-home binf-hidden",
        attributes: {
          href: "",
          title: e.HomeIconTitle,
          "aria-label": e.HomeIconAria,
        },
        events: { click: "onClickHomeIcon", keydown: "onKeydownHomeIcon" },
        template: t,
        templateHelpers: function () {
          return {
            title: e.HomeIconTitle,
            highContrast: this.options.highContrast === 2,
          };
        },
        behaviors: { TabableRegion: { behaviorClass: r } },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (n) {
          p.ItemView.call(this, n),
            this.listenTo(n.context, "sync error", this._toggleVisibility),
            (this.applicationScope = n.context.getModel(a));
        },
        onRender: function () {
          var o =
              this.options &&
              this.options.context &&
              this.options.context._user &&
              this.options.context._user.connector,
            n = new y((o && o.connection.url) || location.href),
            u = d.getHomeUrl(n);
          this.$el.attr("href", u);
        },
        onClickHomeIcon: function (o) {
          s.isControlClick(o) ||
            (o.preventDefault(), this.applicationScope.set("id", ""));
        },
        onKeydownHomeIcon: function (o) {
          o.keyCode === 32 && this.onClickHomeIcon(o);
        },
        _toggleVisibility: function () {
          this._isRendered &&
            (this.applicationScope.id
              ? this.$el.removeClass("binf-hidden")
              : this.$el.addClass("binf-hidden"));
        },
      });
      return i;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/root/localized.strings",
    { ShowBreadcrumbs: "Show Breadcrumbs", HideBreadcrumbs: "Hide Breadcrumbs" }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-button-icon csui-breadcrumb-caret-type ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "breadcrumbsCaretName") ||
                  (e != null ? i(e, "breadcrumbsCaretName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "breadcrumbsCaretName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 57 },
                      end: { line: 1, column: 81 },
                    },
                  })
                : t)
            ) +
            `"></span>
<span class="csui-breadcrumb-btn-innertext">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "breadcrumbsText") ||
                  (e != null ? i(e, "breadcrumbsText") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "breadcrumbsText",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 44 },
                      end: { line: 2, column: 63 },
                    },
                  })
                : t)
            ) +
            "</span>"
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_breadcrumbs_impl_breadcrumbs",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/utils/contexts/factories/ancestors",
      "csui/utils/contexts/factories/application.scope.factory",
      "hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
      "css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",
    ],
    function (x, m, p, y, s, e, r, a) {
      "use strict";
      var d = p.ItemView.extend({
        tagName: "button",
        attributes: { type: "button" },
        className: "breadcrumbs-handle binf-btn",
        ui: {
          breadcrumbsTextContainer: ".csui-breadcrumb-btn-innertext",
          breadcrumbsCaretContainer: ".csui-breadcrumb-caret-type",
        },
        serializeData: function () {
          var t = !!this.applicationScope.get("breadcrumbsVisible"),
            i = {
              breadcrumbsText: y.ShowBreadcrumbs,
              breadcrumbsCaretName:
                this.options.highContrast === 2
                  ? "icon-expandArrowDownWhite-black"
                  : "icon-expandArrowDownWhite",
            };
          return (
            t &&
              (i = {
                breadcrumbsText: y.HideBreadcrumbs,
                breadcrumbsCaretName:
                  this.options.highContrast === 2
                    ? "icon-expandArrowUpWhite-black"
                    : "icon-expandArrowUpWhite",
              }),
            i
          );
        },
        template: a,
        events: { keydown: "onKeyInView", click: "_toggleBreadCrumbs" },
        behaviors: { TabableRegion: { behaviorClass: s } },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onRender: function () {
          matchMedia &&
            ((this._mq = window.matchMedia("(max-width: 1124px)")),
            this._mq.addListener(x.bind(this._windowsWidthChange, this)),
            this._windowsWidthChange(this._mq));
        },
        constructor: function (i) {
          p.ItemView.call(this, i),
            (this.applicationScope = i.context.getModel(r)),
            this.stopListening(
              this.applicationScope,
              "change:breadcrumbsVisible"
            )
              .listenTo(
                this.applicationScope,
                "change:breadcrumbsVisible",
                this._breadcrumbVisibilityChanged
              )
              .listenTo(
                this.applicationScope,
                "change:breadcrumbsVisible",
                this._breadcrumbUpdateText
              ),
            this.stopListening(
              this.applicationScope,
              "change:breadcrumbsAvailable"
            ).listenTo(
              this.applicationScope,
              "change:breadcrumbsAvailable",
              this._breadcrumbAvailabilityChanged
            ),
            this.stopListening(
              this.applicationScope,
              "change:hideToggleButton"
            ).listenTo(
              this.applicationScope,
              "change:hideToggleButton",
              this._hideToggleButton
            ),
            this._breadcrumbVisibilityChanged(),
            this._breadcrumbAvailabilityChanged();
        },
        _breadcrumbVisibilityChanged: function () {
          (this._breadcrumbsVisible =
            this.applicationScope.get("breadcrumbsVisible")),
            this._breadcrumbsVisible
              ? (this.$el.removeClass("csui-breadcrumbs-hidden"),
                this.triggerMethod("refresh:tabindexes"))
              : this.$el.addClass("csui-breadcrumbs-hidden");
        },
        _hideToggleButton: function (t) {
          var i = !!t.get("hideToggleButton"),
            o = this.$el.closest(".tile-breadcrumb");
          o.length && o[i ? "addClass" : "removeClass"]("binf-hidden");
        },
        _breadcrumbAvailabilityChanged: function () {
          (this._breadcrumbsAvailable = this.applicationScope.get(
            "breadcrumbsAvailable"
          )),
            this._breadcrumbsAvailable
              ? (this.$el.removeClass("csui-breadcrumbs-not-available"),
                this.triggerMethod("refresh:tabindexes"))
              : this.$el.addClass("csui-breadcrumbs-not-available");
        },
        _breadcrumbUpdateText: function () {
          this.applicationScope.get("breadcrumbsVisible")
            ? (this.$el.attr("aria-label", y.HideBreadcrumbs),
              this.options.highContrast === 2
                ? this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowDownWhite-black")
                    .addClass("icon-expandArrowUpWhite-black")
                : this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowDownWhite")
                    .addClass("icon-expandArrowUpWhite"),
              this.ui.breadcrumbsTextContainer.text(y.HideBreadcrumbs))
            : (this.$el.attr("aria-label", y.ShowBreadcrumbs),
              this.options.highContrast === 2
                ? this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowUpWhite-black")
                    .addClass("icon-expandArrowDownWhite-black")
                : this.ui.breadcrumbsCaretContainer
                    .removeClass("icon-expandArrowUpWhite")
                    .addClass("icon-expandArrowDownWhite"),
              this.ui.breadcrumbsTextContainer.text(y.ShowBreadcrumbs));
        },
        _showBreadcrumbs: function () {
          this.applicationScope.set("breadcrumbsVisible", !0);
        },
        _hideBreadcrumbs: function () {
          this.applicationScope.set("breadcrumbsVisible", !1);
        },
        _toggleBreadCrumbs: function () {
          this.applicationScope.set(
            "breadcrumbsVisible",
            !this._breadcrumbsVisible
          );
        },
        _windowsWidthChange: function (t) {
          t.matches
            ? ((this._previousBreadcrumbState =
                this.applicationScope.get("breadcrumbsVisible")),
              this.applicationScope.set("breadcrumbsVisible", !0))
            : this.applicationScope.set(
                "breadcrumbsVisible",
                this._previousBreadcrumbState
              );
        },
        onKeyInView: function (t) {
          switch (t.keyCode) {
            case 9:
              this.ignoreFocusBlur = !1;
              break;
            case 13:
            case 32:
              (this.ignoreFocusBlur = !1),
                t.preventDefault(),
                this.applicationScope.set(
                  "breadcrumbsVisible",
                  !this._breadcrumbsVisible
                );
              break;
          }
        },
      });
      return d;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.slices/impl/search.slices",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<label class="csui-search-popover-row-body" data-sliceid="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 58 },
                      end: { line: 1, column: 69 },
                    },
                  })
                : t)
            ) +
            `">
    <input type="radio" class="csui-slice-option" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 64 },
                      end: { line: 2, column: 75 },
                    },
                  })
                : t)
            ) +
            '" name="slice" value="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "sliceDisplayName") ||
                  (e != null ? i(e, "sliceDisplayName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceDisplayName",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 97 },
                      end: { line: 2, column: 119 },
                    },
                  })
                : t)
            ) +
            `">
        <span class="csui-search-popover-checked" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 64 },
                      end: { line: 3, column: 75 },
                    },
                  })
                : t)
            ) +
            `"></span>
        <span class="csui-search-popover-label" data-sliceid="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "sliceId") || (e != null ? i(e, "sliceId") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceId",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 62 },
                      end: { line: 4, column: 73 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "sliceDisplayName") ||
                  (e != null ? i(e, "sliceDisplayName") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "sliceDisplayName",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 75 },
                      end: { line: 4, column: 97 },
                    },
                  })
                : t)
            ) +
            `</span>
</label>`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_search.slices_impl_search.slices", y), y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.slices/search.slices.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "hbs!csui/widgets/search.slices/impl/search.slices",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.View.extend({
        className: "csui-search-popover-row",
        template: y,
        attributes: function () {
          return {
            id: this.model.get("sliceId"),
            title: this.model.get("sliceTooltip"),
            "aria-label": this.model.get("sliceDisplayName"),
            tabindex: "-1",
          };
        },
        templateContext: function () {
          var e = this.model && this.model.get("sliceDisplayName"),
            r = this.model && this.model.get("sliceId");
          return { sliceDisplayName: e, sliceId: r };
        },
        events: {
          "click .csui-search-popover-row-body": "setSlices",
          "keydown .csui-search-popover-row-body": "accessibility",
          "keyup .csui-search-popover-row-body": "keyUpHandler",
        },
        constructor: function (r) {
          r || (r = {}),
            (this.options = r),
            p.View.prototype.constructor.call(this, r);
        },
        setSlices: function (e) {
          e.preventDefault(), e.stopPropagation();
          var r = this.model.get("sliceId"),
            a = this.$el.find(".icon-listview-checkmark").length;
          (this.options.originatingView.options.sliceString = ""),
            this.options.parentView.removePreviousSelection(),
            a
              ? this.$el.find(".csui-slice-option").prop("checked", !1)
              : (this.$el
                  .find(".csui-search-popover-checked")
                  .addClass("icon-listview-checkmark"),
                (this.options.originatingView.options.sliceString =
                  "{" + r + "}"),
                this.$el.find(".csui-slice-option").prop("checked", !0)),
            this.options.originatingView.namedLocalStorage.set(
              "selectedSlice",
              this.options.originatingView.options.sliceString
            ),
            (this.options.originatingView.options.model.attributes.slice =
              this.options.originatingView.options.sliceString);
        },
        accessibility: function (e) {
          switch (e.keyCode) {
            case 9:
              e.shiftKey
                ? this.options.originatingView.$el.find(
                    ".csui-selected-checkbox"
                  ).length
                  ? (this.options.originatingView.$el
                      .find(".csui-selected-checkbox")
                      .addClass("active"),
                    this.options.originatingView.$el
                      .find('.csui-selected-checkbox input[type="checkbox"]')[0]
                      .focus())
                  : this.options.originatingView.ui.input[0].focus()
                : this.options.originatingView.$el
                    .find(".csui-slices-more")
                    .hasClass("binf-hidden") ||
                  !this.options.originatingView.$el.find(".csui-slices-more")
                    .length
                ? this.options.originatingView.searchFormsContainerView.$el.find(
                    ".csui-searchforms-popover-row"
                  ).length
                  ? this.options.originatingView.searchFormsContainerView.$el
                      .find(".csui-searchforms-popover-row")[0]
                      .focus()
                  : m(
                      this.options.originatingView.searchFormsContainerView.$el.find(
                        ".csui-searchforms-show-more"
                      )[0]
                    ).focus()
                : this.options.originatingView.$el
                    .find(".csui-slices-more")[0]
                    .focus(),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .removeClass("active");
              break;
            case 38:
              if (
                (this.$el
                  .find(".csui-search-popover-row-body")
                  .removeClass("active"),
                this.$el.prev().length)
              )
                this.$el
                  .prev()
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                  this.$el
                    .prev()
                    .find(
                      '.csui-search-popover-row-body input[type="radio"]'
                    )[0]
                    .focus();
              else {
                var r = this.options.parentView.$el.find(
                  ".csui-search-popover-row-body"
                );
                m(r[r.length - 1]).addClass("active"),
                  m(r[r.length - 1])
                    .find('input[type="radio"]')[0]
                    .focus();
              }
              break;
            case 40:
              this.$el
                .find(".csui-search-popover-row-body")
                .removeClass("active"),
                this.$el.next().length
                  ? (this.$el
                      .next()
                      .find(".csui-search-popover-row-body")
                      .addClass("active"),
                    this.$el
                      .next()
                      .find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                      .focus())
                  : (m(
                      this.options.parentView.$el.find(
                        ".csui-search-popover-row-body"
                      )[0]
                    ).addClass("active"),
                    m(
                      this.options.parentView.$el.find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                    )[0].focus());
              break;
            case 32:
              this.setSlices(e),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                this.$el
                  .find('.csui-search-popover-row-body input[type="radio"]')[0]
                  .focus();
              break;
            case 27:
              this.$el.removeClass("active"),
                this.options.originatingView.options.data.showOptionsDropDown &&
                  this.options.originatingView.hideSearchOptionsDropDown();
              break;
            case 13:
              this.setSlices(e),
                this.$el
                  .find(".csui-search-popover-row-body")
                  .addClass("active"),
                this.$el
                  .find('.csui-search-popover-row-body input[type="radio"]')[0]
                  .focus();
              break;
          }
          e.preventDefault();
        },
        keyUpHandler: function (e) {
          var r = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
          e.keyCode == 32 && r && (e.stopPropagation(), e.preventDefault());
        },
      });
      return s;
    }
  ),
  csui.define(
    "csui/widgets/search.slices/search.slices.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "csui/widgets/search.slices/search.slices.item.view",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.CollectionView.extend({
        className: "csui-search-slice-container",
        childView: y,
        childViewOptions: function () {
          return {
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            parentView: this,
          };
        },
        constructor: function (r) {
          r || (r = {}),
            (this.options = r),
            (this.collection = r.collection),
            (this.originatingView = r.originatingView),
            p.CollectionView.prototype.constructor.apply(this, arguments);
        },
        removePreviousSelection: function () {
          var e = this.$el.find(".csui-search-popover-checked");
          m(e).removeClass("icon-listview-checkmark"),
            this.$el.find(".active").removeClass("active");
        },
        getSelectedSlice: function () {
          !this.options.originatingView.options.sliceString &&
            this.options.originatingView.options.model &&
            this.options.originatingView.options.model.get("slice") &&
            (this.options.originatingView.options.sliceString =
              this.options.originatingView.options.model.get("slice")),
            this.$el
              .find(".csui-search-popover-checked")
              .removeClass("icon-listview-checkmark"),
            this._setSliceValue(
              this.options.originatingView.options.sliceString
            );
        },
        _setSliceValue: function (e) {
          (e =
            e ||
            this.options.originatingView.namedLocalStorage.get(
              "selectedSlice"
            )),
            e &&
              e !== "{}" &&
              (this.$el
                .find("#" + e.substring(1, e.length - 1))
                .find(".csui-search-popover-checked")
                .addClass("icon-listview-checkmark"),
              this.$el
                .find("#" + e.substring(1, e.length - 1))
                .find(".csui-slice-option")
                .prop("checked", !0));
        },
      });
      return s;
    }
  ),
  csui.define("csui/widgets/search.forms/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/search.forms/impl/nls/root/lang", {
    personalSearchFormsLabel: "My search forms",
    systemSearchFormsLabel: "Shared search forms",
    recentSearchFormsLabel: "Recent search forms",
    searchFormLabel: "Search forms",
    search: "Search",
    loading: "Loading...",
    showMore: "More search forms",
    openSearchFormsAria: "Open search forms dialog",
    showMoreSearchFormsAria: "Open more search forms dialog",
    searchFormTooltip: "Open: {0}",
    btnBack: "Back",
    btnBackAriaLabel: "Back to search forms",
    btnSearch: "Search",
  }),
  csui.define(
    "css!csui/widgets/search.forms/impl/search.forms",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/utils/non-emptying.region/non-emptying.region",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = p.View.extend({
        className: "csui-search-form-container",
        constructor: function (d) {
          d || (d = {}),
            (this.models = new y.Collection()),
            p.View.prototype.constructor.call(this, d);
        },
        findButton: function (a, d, t) {
          var i = x.find(a, function (o) {
            return o.get("btnType") === d;
          });
          i && i.set("hidden", t);
        },
        openFormInSidepanel: function (a, d) {
          var t = m.Deferred(),
            i = this;
          return (
            csui.require(
              [
                "csui/controls/side.panel/side.panel.view",
                "csui/widgets/search.forms/search.form.view",
                "csui/widgets/search.forms/search.forms.container.view",
                "i18n",
              ],
              function (o, n, u, c) {
                var h;
                const f = c && c.settings?.rtl;
                if (d) {
                  var k = a.get("schema");
                  (h = k.title ? k.title : a.get("name")),
                    (i.customSearchForm = new n({
                      model: a,
                      searchFormId: d,
                      hideSearchButton: !0,
                      showInSearchResultsNewPerspective: !0,
                      context: i.options.options.context,
                    })),
                    i.sidePanel &&
                      (i.sidePanel.options.slides[0].content =
                        i.customSearchForm);
                } else
                  i.searchFormsContainerView ||
                    (i.searchFormsContainerView = new u({
                      searchFormsList: a,
                      originatingView: i,
                    })),
                    (h = e.searchFormLabel),
                    i.sidePanel &&
                      (i.sidePanel.options.slides[0].content =
                        i.searchFormsContainerView),
                    i.searchFormsContainerView.$el.removeClass("binf-hidden");
                if (!i.sidePanel || (i.sidePanel && i.sidePanel.isDestroyed)) {
                  var C = new o({
                    slides: [
                      {
                        title: h,
                        content: d
                          ? i.customSearchForm
                          : i.searchFormsContainerView,
                        footer: {
                          leftButtons: [
                            {
                              type: "action",
                              v2Icon: {
                                iconName: f
                                  ? "csui_action_back_rtl32"
                                  : "csui_action_back32",
                                states: !0,
                              },
                              btnType: "back",
                              className:
                                "cs-go-back arrow_back csui-has-v2icon",
                              attributes: {
                                title: e.btnBack,
                                "aria-label": e.btnBackAriaLabel,
                              },
                              disabled:
                                !!i.options.originatingView.hideBackButton,
                            },
                          ],
                          rightButtons: [
                            {
                              label: e.search,
                              type: "action",
                              id: "search-btn",
                              btnType: "search",
                              attributes: {
                                title: e.btnSearch,
                                "aria-label": e.btnSearch,
                              },
                              className:
                                "binf-btn binf-btn-primary csui-custom-search-form-submit cs-search",
                              disabled: !1,
                            },
                          ],
                        },
                      },
                    ],
                    sidePanelClassName: "cvs-in-sidepanel",
                  });
                  (i.sidePanel = C), C.show();
                } else if (i.sidePanel.$el.is(":visible")) {
                  var S = new s({ el: i.sidePanel.ui.body });
                  (i.sidePanel.slides[0].title = h),
                    d
                      ? (S.$el
                          .find(".csui-search-forms-list")
                          .addClass("binf-hidden"),
                        S.$el
                          .find(".csui-search-form-collection")
                          .addClass("binf-hidden"),
                        S.$el
                          .find(".csui-custom-view-search")
                          .removeClass("binf-hidden"))
                      : (S.$el
                          .find(".csui-search-forms-list")
                          .removeClass("binf-hidden"),
                        S.$el
                          .find(".csui-search-form-collection")
                          .removeClass("binf-hidden"),
                        S.$el.find(".csui-custom-view-search").remove(),
                        i.sidePanel.trigger("after:show")),
                    i.sidePanel.headerView.update(
                      i.sidePanel.options.slides[0]
                    ),
                    d && S.show(i.sidePanel.options.slides[0].content);
                }
                i.sidePanel.listenTo(
                  i.customSearchForm,
                  "enable:search",
                  function (b) {
                    i.sidePanel.trigger("update:button", "search-btn", {
                      disabled: !b,
                    });
                  }
                );
                var w = x.filter(
                  x.flatten(
                    x.map(
                      i.customSearchForm &&
                        i.customSearchForm.model.get("data"),
                      x.values
                    )
                  ),
                  function (b) {
                    return b;
                  }
                );
                let v = !0;
                if (w && w.length > 0) {
                  for (let b of w)
                    if (
                      typeof b == "number" ||
                      (typeof b == "string" && !/^(anydate|anyvalue)/i.test(b))
                    ) {
                      v = !1;
                      break;
                    } else if (
                      typeof b == "object" &&
                      Object.values(b).some(
                        (_) => _ && !/^(anydate|anyvalue)/i.test(_)
                      )
                    ) {
                      v = !1;
                      break;
                    }
                }
                v
                  ? (m(".cs-search")
                      .addClass("binf-disabled")
                      .addClass("csui-search-form-submit-disabled"),
                    i.customSearchForm?.trigger("enable:search", !1))
                  : (m(".cs-search")
                      .removeClass("binf-disabled")
                      .removeClass("csui-search-form-submit-disabled"),
                    i.customSearchForm?.trigger("enable:search", !0)),
                  d
                    ? (i.options.originatingView.hideBackButton
                        ? i.findButton(
                            i.sidePanel.footerView.leftCollection.models,
                            "back",
                            !0
                          )
                        : i.findButton(
                            i.sidePanel.footerView.leftCollection.models,
                            "back",
                            !1
                          ),
                      i.customSearchForm.listenTo(
                        i.customSearchForm,
                        "render:form",
                        function () {
                          i.sidePanel.triggerMethod("set:focus");
                        }
                      ),
                      i.findButton(
                        i.sidePanel.footerView.rightCollection.models,
                        "search",
                        !1
                      ))
                    : (i.findButton(
                        i.sidePanel.footerView.leftCollection.models,
                        "back",
                        !0
                      ),
                      i.findButton(
                        i.sidePanel.footerView.rightCollection.models,
                        "search",
                        !0
                      )),
                  i.sidePanel &&
                    i.sidePanel.footerView.trigger("update:footer"),
                  i.options.originatingView.$el
                    .find(".csui-searchforms-popover-row")
                    .removeClass("binf-disabled"),
                  i.sidePanel &&
                    i.sidePanel.$el
                      .find(".csui-searchforms-popover-row")
                      .removeClass("binf-disabled"),
                  i.sidePanel.listenTo(
                    i.customSearchForm,
                    "button:click",
                    function (b) {
                      if (b.btnType === "search")
                        (i.customSearchForm.options.query =
                          i.options.options.model),
                          i.customSearchForm.loadCustomSearch();
                      else if (b.btnType === "back") {
                        i.openFormInSidepanel(
                          i.options.originatingView.searchboxModel.get(
                            "search_forms"
                          )
                        );
                        return;
                      }
                      i.sidePanel.hide();
                    }
                  ),
                  i.sidePanel.listenTo(i.sidePanel, "after:show", function () {
                    i.isNewForm &&
                      (i.customSearchForm.customFormView.formView.isFormChanged =
                        void 0),
                      this.$el.find(".csui-searchforms-popover-row").length &&
                        i.isKeyPress &&
                        (this.$el
                          .find(".csui-searchforms-popover-row")[0]
                          .focus(),
                        (i.isKeyPress = !1));
                    var b = i.options.originatingView.cid;
                    m(document).off("click." + b + " keydown." + b);
                  }),
                  i.sidePanel.listenTo(i.sidePanel, "before:hide", function () {
                    var b = i.options.originatingView;
                    b?.options?.otcEl ||
                      m(document).on(
                        "click." + b.cid + " keydown." + b.cid,
                        b,
                        b._hideSearchBar
                      ),
                      i.options.originatingView?.ui?.input?.attr("tabindex", 0);
                  }),
                  i.sidePanel.listenTo(i.sidePanel, "keydown", function (b) {
                    if (
                      b.keyCode === 9 &&
                      b.shiftKey &&
                      m(b.target)[0].id === "csui-side-panel-cancel"
                    ) {
                      var _ = i;
                      _.searchFormsContainerView &&
                        setTimeout(function () {
                          _.searchFormsContainerView.systemSearchForms.$el
                            .find(".csui-searchforms-popover-row")[0]
                            .focus();
                        }, 0);
                    }
                  }),
                  i.sidePanel.listenTo(
                    i.customSearchForm,
                    "click:search",
                    function () {
                      i.sidePanel.hide();
                    }
                  ),
                  t.resolve();
              },
              t.reject
            ),
            t.promise()
          );
        },
        isModelFetched: function (a) {
          if (
            ((this.isNewForm = !0),
            this.models && this.models.length && this.models.get(a))
          ) {
            var d = JSON.parse(
              JSON.stringify(this.models.get(a).originalAttributesData)
            );
            this.models.get(a).set("data", d),
              this.openFormInSidepanel(this.models.get(a), a);
          } else {
            var t = this;
            csui.require(
              ["csui/widgets/search.forms/search.form.model"],
              function (i) {
                var o = new i(
                  { id: a },
                  { connector: t.options.connector, options: t.options }
                );
                o.fetch().then(function (n) {
                  var u = JSON.parse(JSON.stringify(o.attributes.data));
                  (o.originalAttributesData = u),
                    t.models.push(o),
                    t.openFormInSidepanel(o, a);
                });
              }
            );
          }
        },
      });
      return r;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.forms/impl/search.forms",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return `    <span class="csui-icon-standard-search"></span>
`;
        },
        3: function (s, e, r, a, d) {
          return `    <span class="csui-icon-query-form-search"></span>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<a href="javascript:void(0)" class="csui-searchforms-popover-row"
   data-searchformid="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormId") ||
                  (e != null ? o(e, "searchFormId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 22 },
                      end: { line: 2, column: 39 },
                    },
                  })
                : i)
            ) +
            '" id="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormId") ||
                  (e != null ? o(e, "searchFormId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormId",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 45 },
                      end: { line: 2, column: 62 },
                    },
                  })
                : i)
            ) +
            `" title='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormTooltip") ||
                  (e != null ? o(e, "searchFormTooltip") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormTooltip",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 71 },
                      end: { line: 2, column: 94 },
                    },
                  })
                : i)
            ) +
            `'
   aria-label='` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormName") ||
                  (e != null ? o(e, "searchFormName") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormName",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 15 },
                      end: { line: 3, column: 35 },
                    },
                  })
                : i)
            ) +
            `'>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "quickLink") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.program(3, d, 0),
                loc: {
                  start: { line: 4, column: 2 },
                  end: { line: 8, column: 9 },
                },
              }
            )) != null
              ? t
              : "") +
            '  <span class="cs-label">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "searchFormName") ||
                  (e != null ? o(e, "searchFormName") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "searchFormName",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 25 },
                      end: { line: 9, column: 45 },
                    },
                  })
                : i)
            ) +
            `</span>
</a>`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_search.forms_impl_search.forms", y), y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "hbs!csui/widgets/search.forms/impl/search.forms",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.View.extend({
        className: "csui-search-form-item",
        template: y,
        attributes: { role: "listitem" },
        templateContext: function () {
          var r =
              this.model && this.model.has("name") && this.model.get("name"),
            a = this.model && this.model.has("id") && this.model.get("id"),
            d = this.model && this.model.cid;
          return {
            quickLink: this.model.get("type") === "quick",
            searchFormName: r,
            searchFormId: `${d}_${a}`,
            searchFormTooltip: x.str.sformat(s.searchFormTooltip, r),
          };
        },
        events: {
          "click .csui-searchforms-popover-row": "openFormView",
          "keydown .csui-searchforms-popover-row": "openFormView",
        },
        constructor: function (a) {
          a || (a = {}),
            (this.options = a),
            p.View.prototype.constructor.call(this, a);
        },
        openFormView: function (r) {
          r.preventDefault(), r.stopPropagation();
          var a = this.model,
            d = a.get("params") || {};
          if (r.keyCode === 13 || r.keyCode === 32 || r.type === "click") {
            if (a.get("type") === "quick") {
              d.location_id1 = "";
              var t = this.options.originatingView;
              t.options &&
                t.options.data &&
                t.options.data.searchFromHere &&
                t.searchOptions &&
                t.searchOptions.nodeId &&
                (d.location_id1 = t.searchOptions.nodeId),
                (d.where = d.where || "*"),
                this.options.originatingView.trigger("refine:search", r, d);
              return;
            } else if (
              this.model.get("type") === "direct" &&
              this.options.parentView &&
              this.options.parentView.options &&
              this.options.parentView.options.options &&
              this.options.parentView.options.options.fromSearchBox
            ) {
              x.extend(d, { forcePerspectiveChange: !0, enableSearchForm: !0 }),
                this.options.originatingView.trigger("refine:search", r, d);
              return;
            }
            if (
              this.$el
                .find(".csui-searchforms-popover-row")
                .hasClass("binf-disabled")
            )
              return;
            this.$el
              .find(".csui-searchforms-popover-row")
              .addClass("binf-disabled");
            var i =
              this.model.get("params") && this.model.get("params").query_id
                ? this.model.get("params").query_id
                : this.model.get("id");
            this.options.originatingView.isModelFetched
              ? this.options.originatingView.isModelFetched(i)
              : (this.options.originatingView.hideSearchOptionsDropDown(r),
                this.options.originatingView.searchForms.isModelFetched(i)),
              this.options.originatingView.searchFormsContainerView.$el.addClass(
                "binf-hidden"
              );
          } else r.type === "keydown" && this._handleKeyEvents(r);
        },
        _handleKeyEvents: function (r) {
          switch ((r.preventDefault(), r.keyCode)) {
            case 9:
              var a = this.options.parentView.options.parentView,
                d = this.options.parentView;
              if (r.shiftKey)
                r.shiftKey &&
                  (a.personalSearchForms &&
                  d.options.listName !== "personal_search_forms" &&
                  d.options.listName !== "recent_search_forms"
                    ? a.personalSearchForms.$el
                        .find(".csui-searchforms-popover-row")[0]
                        .focus()
                    : a.recentSearchForms &&
                      d.options.listName !== "recent_search_forms"
                    ? a.recentSearchForms.$el
                        .find(".csui-searchforms-popover-row")[0]
                        .focus()
                    : (a.recentSearchForms &&
                        d.options.listName === "recent_search_forms") ||
                      (a.personalSearchForms &&
                        d.options.listName === "personal_search_forms") ||
                      (a.systemSearchForms &&
                        d.options.listName === "system_search_forms")
                    ? this.options.originatingView.sidePanel
                      ? this.options.originatingView.sidePanel.$el
                          .find(".csui-sidepanel-close")
                          .trigger("focus")
                      : this.options.originatingView.$el.find(
                          ".csui-slices-more"
                        ).length > 0 &&
                        !this.options.originatingView.$el
                          .find(".csui-slices-more")
                          .hasClass("binf-hidden")
                      ? this.options.originatingView.$el
                          .find(".csui-slices-more")[0]
                          .focus()
                      : (m(
                          this.options.originatingView.$el.find(
                            ".csui-search-popover-row-body"
                          )[0]
                        ).addClass("active"),
                        m(
                          this.options.originatingView.$el.find(
                            '.csui-search-popover-row-body input[type="radio"]'
                          )[0]
                        )[0].focus())
                    : this.options.originatingView.$el.find(
                        ".csui-selected-checkbox"
                      ).length
                    ? (this.options.originatingView.$el
                        .find(".csui-selected-checkbox")
                        .addClass("active"),
                      this.options.originatingView.$el
                        .find('.csui-selected-checkbox input[type="checkbox"]')
                        .trigger("focus"))
                    : (m(
                        this.options.originatingView.$el.find(
                          ".csui-search-popover-row-body"
                        )[0]
                      ).addClass("active"),
                      m(
                        this.options.originatingView.$el.find(
                          '.csui-search-popover-row-body input[type="radio"]'
                        )[0]
                      )[0].focus()));
              else if (
                this.options.originatingView.$el.find(
                  ".csui-searchforms-show-more"
                ).length
              )
                this.options.originatingView.$el
                  .find(".csui-searchforms-show-more")
                  .focus();
              else if (
                a.personalSearchForms &&
                d.options.listName !== "system_search_forms" &&
                d.options.listName !== "personal_search_forms"
              )
                a.personalSearchForms.$el
                  .find(".csui-searchforms-popover-row")[0]
                  .focus();
              else if (
                a.systemSearchForms &&
                d.options.listName !== "system_search_forms"
              )
                a.systemSearchForms.$el
                  .find(".csui-searchforms-popover-row")[0]
                  .focus();
              else {
                var t = a.options.originatingView.sidePanel.$el.find(
                  '[id = "csui-side-panel-cancel"]'
                );
                t.addClass("active"),
                  setTimeout(function () {
                    t.trigger("focus");
                  }, 0);
              }
              break;
            case 38:
              if (this.$el.prev().length)
                this.$el.removeClass("active"),
                  this.$el
                    .prev()
                    .addClass("active")
                    .find(".csui-searchforms-popover-row")[0]
                    .focus();
              else {
                var i = this.options.parentView.$el.find(
                  ".csui-searchforms-popover-row"
                );
                i[i.length - 1].focus();
              }
              break;
            case 40:
              this.$el.next().length
                ? (this.$el.removeClass("active"),
                  this.$el
                    .next()
                    .addClass("active")
                    .find(".csui-searchforms-popover-row")[0]
                    .focus())
                : this.options.parentView.$el
                    .find(".csui-searchforms-popover-row")[0]
                    .focus();
              break;
            case 27:
              var o =
                  this.options.originatingView &&
                  this.options.originatingView.options,
                n = o && o.originatingView;
              this.$el.removeClass("active"),
                n &&
                  o.options &&
                  o.options.data &&
                  o.options.data.showOptionsDropDown &&
                  n.hideSearchOptionsDropDown(r);
              break;
          }
        },
      });
      return e;
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/widgets/search.forms/search.forms.item.view",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p) {
      "use strict";
      var y = m.CollectionView.extend({
        className: "csui-search-form-list",
        childView: p,
        attributes: function () {
          return {
            role: "list",
            "aria-labelledby": this.options.ariaLabelledBy,
          };
        },
        childViewOptions: function () {
          return {
            collection: this.options.collection,
            originatingView: this.options.originatingView,
            parentView: this,
          };
        },
        constructor: function (e) {
          e || (e = {}),
            (this.options = e),
            (this.collection = e.collection),
            (this.originatingView = e.originatingView),
            m.CollectionView.prototype.constructor.apply(this, arguments);
        },
      });
      return y;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.forms/impl/search.forms.container",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            "  <div " +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "fromSearchBox") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(2, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 2, column: 7 },
                  end: { line: 2, column: 54 },
                },
              }
            )) != null
              ? t
              : "") +
            `>
    <h2 id='recent_search_forms_header_` +
            s.escapeExpression(
              ((i =
                (i = o(r, "cId") || (e != null ? o(e, "cId") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "cId",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 39 },
                      end: { line: 3, column: 46 },
                    },
                  })
                : i)
            ) +
            `'
        class='csui-search-label ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "skipHeading") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(4, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 33 },
                  end: { line: 4, column: 72 },
                },
              }
            )) != null
              ? t
              : "") +
            `'>
      ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "labels") : e) != null
                  ? o(t, "recentSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `
    </h2>
    <div id='recent_search_forms' class="csui-recent-search-form-container"></div>
  </div>
`
          );
        },
        2: function (s, e, r, a, d) {
          return ' role="navigation" ';
        },
        4: function (s, e, r, a, d) {
          return " binf-hidden ";
        },
        6: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-more-forms">
    <a href="javascript:void(0)" role="button" class="csui-searchforms-show-more"
       data-searchformid="loadAllForms" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "showMoreAria") ||
                  (e != null ? i(e, "showMoreAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "showMoreAria",
                    hash: {},
                    loc: {
                      start: { line: 14, column: 52 },
                      end: { line: 14, column: 68 },
                    },
                  })
                : t)
            ) +
            `">
      ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "showMorelabel") ||
                  (e != null ? i(e, "showMorelabel") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "showMorelabel",
                    hash: {},
                    loc: {
                      start: { line: 15, column: 6 },
                      end: { line: 15, column: 23 },
                    },
                  })
                : t)
            ) +
            `</a>
  </div>
`
          );
        },
        8: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div>
    <h2 id='personal_search_forms_header'
        class='csui-search-label'>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "labels") : e) != null
                  ? i(t, "personalSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `</h2>
    <div id='personal_search_forms' class="csui-personal-search-form-container"></div>
  </div>
`
          );
        },
        10: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div>
    <h2 id='system_search_forms_header'
        class='csui-search-label'>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "labels") : e) != null
                  ? i(t, "systemSearchFormsLabel")
                  : t,
                e
              )
            ) +
            `</h2>
    <div id='system_search_forms' class="csui-system-search-form-container"></div>
  </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "recent_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 9, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `  
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "showMore") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 11, column: 0 },
                  end: { line: 17, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "personal_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(8, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 19, column: 0 },
                  end: { line: 25, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "searchForms") : e) != null
                ? i(t, "system_search_forms")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(10, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 27, column: 0 },
                  end: { line: 33, column: 7 },
                },
              }
            )) != null
              ? t
              : "")
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.forms_impl_search.forms.container",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/search.forms/search.forms.container.view",
    [
      "csui/lib/backbone",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/widgets/search.forms/search.forms.list.view",
      "hbs!csui/widgets/search.forms/impl/search.forms.container",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
      "css!csui/widgets/search.forms/impl/search.forms",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = p.View.extend({
        className: "csui-search-form-collection",
        attributes: { role: "application" },
        template: s,
        templateContext: function () {
          return {
            searchForms: this.options.searchFormsList,
            fromSearchBox: this.options.fromSearchBox,
            labels: e,
            showMore: !!this.options.showMore,
            skipHeading:
              !!this.options.hasQuickSearches && !!this.options.fromSearchBox,
            showMorelabel: this.options.searchFormsList.recent_search_forms
              .length
              ? e.showMore
              : e.searchFormLabel,
            showMoreAria: this.options.searchFormsList.recent_search_forms
              .length
              ? e.showMoreSearchFormsAria
              : e.openSearchFormsAria,
            cId: this.cid,
          };
        },
        regions: function () {
          var a = {};
          return (
            m.each(this.options.searchFormsList, function (d, t) {
              a[t] = "#" + t;
            }),
            a
          );
        },
        constructor: function (d) {
          d || (d = {}),
            (this.options = d),
            p.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          if (
            (m.each(
              this.options.searchFormsList,
              m.bind(function (a, d) {
                var t = this._createCollection(a);
                if (t.length) {
                  let i = `${d}_header`;
                  d === "recent_search_forms"
                    ? ((t = this.options.hasQuickSearches
                        ? t
                        : new x.Collection(
                            t.filter(function (o) {
                              return o.get("type") !== "quick";
                            })
                          )),
                      this.cid && (i = `${d}_header_${this.cid}`),
                      (this.recentSearchForms = this._createListView(t, d, i)),
                      this.showChildView(d, this.recentSearchForms))
                    : d === "system_search_forms"
                    ? ((this.systemSearchForms = this._createListView(t, d, i)),
                      this.showChildView(d, this.systemSearchForms))
                    : d === "personal_search_forms" &&
                      ((this.personalSearchForms = this._createListView(
                        t,
                        d,
                        i
                      )),
                      this.showChildView(d, this.personalSearchForms));
                }
              }, this)
            ),
            this.options.fromSearchBox)
          ) {
            let a = this.cid;
            this.$el
              .find("#recent_search_forms")
              .attr("id", `recent_search_forms_${a}`);
          }
        },
        _createListView: function (a, d, t) {
          var i = new y({
            options: this.options,
            originatingView: this.options.originatingView,
            collection: a,
            listName: d,
            parentView: this,
            ariaLabelledBy: t,
          });
          return i;
        },
        _createCollection: function (a) {
          var d,
            t = new x.Collection();
          return (
            m.each(a, function (i) {
              (d = new x.Model(i)), t.add(d);
            }),
            t
          );
        },
      });
      return r;
    }
  ),
  csui.define("csui/widgets/search.box/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/search.box/impl/nls/root/lang", {
    placeholder: "Search",
    clearerTitle: "Clear keywords",
    searchBoxTitle: "Enter your search term",
    searchOptionsTitle: "Show search options",
    searchOptionsHideTitle: "Hide search options",
    searchFromHere: "Search from here",
    searchIconTitle: "Search",
    searchIconAria: "Search in OpenText Content Management",
    searchOptionTooltip: "Select: {0}",
    startSearch: "Start search",
    searchLandmarkAria: "Global content search",
    searchWithinLabel: "Search within",
    showMore: "Show more",
    showMoreAria: "Show more slices",
    closeSearch: "Close search",
  }),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.box",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return `        <div class="csui-search-options-dropdown binf-hidden" >
        <div class="csui-search-options-wrapper csui-normal-scrolling"></div>
        </div>
`;
        },
        3: function (s, e, r, a, d) {
          return "icon-header-search-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="search-bar" role="dialog" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchLandmarkAria")
                  : t,
                e
              )
            ) +
            '" aria-expanded="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "showOptionsDropDown")
                  : t,
                e
              )
            ) +
            `">
  <div class="search-bar-content">
    <div class="csui-search-input-container">
      <input type="search" class="csui-input" placeholder="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "placeholder")
                  : t,
                e
              )
            ) +
            `"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchBoxTitle")
                  : t,
                e
              )
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchBoxTitle")
                  : t,
                e
              )
            ) +
            `">
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "messages") : e) != null
                ? i(t, "showOptionsDropDown")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 6, column: 6 },
                  end: { line: 10, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
    <span class="csui-clearer formfield_clear" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "clearerTitle")
                  : t,
                e
              )
            ) +
            `"
          aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "clearerTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
    <span class="csui-separator"></span>
    <span class="csui-formfield-search formfield_search" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "startSearchTitle")
                  : t,
                e
              )
            ) +
            `"
          aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "startSearchTitle")
                  : t,
                e
              )
            ) +
            `" role="button"></span>
  </div>
</div>
<div role="search" aria-label="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchLandmarkAria")
                  : t,
                e
              )
            ) +
            `" class="search-icon">
  <a href="javascript:void(0);"
     class="icon icon-global-search icon-header-search ` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "messages") : e) != null
                ? i(t, "highContrast")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 21, column: 55 },
                  end: { line: 21, column: 115 },
                },
              }
            )) != null
              ? t
              : "") +
            ` csui-header-search-icon csui-acc-focusable"
     title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchIconTitle")
                  : t,
                e
              )
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "messages") : e) != null
                  ? i(t, "searchIconAria")
                  : t,
                e
              )
            ) +
            `"
     aria-expanded="false"></a>
</div>`
          );
        },
      });
      return p.registerPartial("csui_widgets_search.box_impl_search.box", y), y;
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.slices.popover",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t =
            s.lookupProperty ||
            function (i, o) {
              if (Object.prototype.hasOwnProperty.call(i, o)) return i[o];
            };
          return (
            '    <div class="csui-search-popover-row" data-sliceid="' +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `"
         title="` +
            s.escapeExpression(
              s.lambda(e != null ? t(e, "sliceTooltip") : e, e)
            ) +
            `" role="radio" aria-checked="false" tabindex="-1">
      <div class="csui-search-popover-row-body" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `">
        <div class="csui-search-popover-checked" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            '" id="' +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            `"></div>
        <div class="csui-search-popover-label" data-sliceid="` +
            s.escapeExpression(s.lambda(e != null ? t(e, "sliceId") : e, e)) +
            '">' +
            s.escapeExpression(
              s.lambda(e != null ? t(e, "sliceDisplayName") : e, e)
            ) +
            `</div>
      </div>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-search-slice-container" role="radiogroup">
  <div class="csui-search-slice-container-first" role="presentation"></div>
` +
            ((t = i(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "slices") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 3, column: 2 },
                  end: { line: 11, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  <div class="csui-search-slice-container-last" role="presentation"></div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.box_impl_search.slices.popover",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/search.box/impl/search.slice.dropdown",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary csui-searchbox-dd-panel" >
  <label class="csui-search-slice-name csui-selectlabel" for="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeIdSO") : e, e)) +
            `"
          title="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "fromHere") : e, e)) +
            " " +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeName") : e, e)) +
            `">
    <input type="checkbox" ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "checked") || (e != null ? i(e, "checked") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "checked",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 27 },
                      end: { line: 5, column: 38 },
                    },
                  })
                : t)
            ) +
            ' aria-checked="true"  class="csui-searchbox-option" name="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeId") : e, e)) +
            '" id="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeIdSO") : e, e)) +
            `"
           tabindex="-1" value="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeId") : e, e)) +
            `">
      <span class="csui-icon"></span>
      <span class="csui-ellipsis" aria-hidden="true" >` +
            s.escapeExpression(s.lambda(e != null ? i(e, "fromHere") : e, e)) +
            " " +
            s.escapeExpression(s.lambda(e != null ? i(e, "nodeName") : e, e)) +
            `</span>
  </label>
  </div>
`
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `  <div class="csui-searchbox-slices-wrapper csui-searchbox-dd-panel">
    <fieldset>
      <legend class="csui-search-label">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "searchWithinLabel")
                  : t,
                e
              )
            ) +
            `</legend>
      <div class="csui-search-slice-region" ></div>
    </fieldset>
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "slices") : e) != null ? i(t, "more") : t,
              {
                name: "if",
                hash: {},
                fn: s.program(4, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 19, column: 4 },
                  end: { line: 24, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
`
          );
        },
        4: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <button class="csui-slices-more" aria-label="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "showMoreAria")
                  : t,
                e
              )
            ) +
            `" tabindex="-1" >
        <span  class="csui-more-text">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "slices") : e) != null
                  ? i(t, "showMore")
                  : t,
                e
              )
            ) +
            `</span>
       <span class="csui-button-icon icon-caret-down"></span>
    </button>
`
          );
        },
        6: function (s, e, r, a, d) {
          return `  <div class="csui-searchbox-searchform-wrapper csui-searchbox-dd-panel">
    <div class="csui-recent-searchforms-container" >
    </div>
  </div>
`;
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "nodeId") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 0 },
                  end: { line: 11, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "slices") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 13, column: 0 },
                  end: { line: 26, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "search_forms") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(6, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 27, column: 0 },
                  end: { line: 32, column: 7 },
                },
              }
            )) != null
              ? t
              : "") +
            `
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_search.box_impl_search.slice.dropdown",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/search.box/impl/search.box",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/search.box/search.box.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/backbone",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/search.box.factory",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/namedlocalstorage",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/search.slices/search.slices.list.view",
      "csui/widgets/search.forms/search.forms",
      "csui/widgets/search.forms/search.forms.container.view",
      "csui/utils/contexts/factories/next.node",
      "csui/utils/contexts/factories/search.formquery.factory",
      "i18n!csui/widgets/search.box/impl/nls/lang",
      "csui/utils/namedsessionstorage",
      "hbs!csui/widgets/search.box/impl/search.box",
      "hbs!csui/widgets/search.box/impl/search.slices.popover",
      "hbs!csui/widgets/search.box/impl/search.slice.dropdown",
      "i18n",
      "csui/utils/base",
      "css!csui/widgets/search.box/impl/search.box",
      "csui/lib/jquery.ui/js/jquery-ui",
      "csui/lib/binf/js/binf",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b
    ) {
      "use strict";
      var _ = m.defaults({}, x.config(), {
          showOptionsDropDown: !0,
          showSearchInput: !1,
          showInput: !1,
          inputValue: "",
          slice: "",
          nodeId: "",
          nodeName: "",
          searchFromHere: !0,
          enableSearchBarSettings: !0,
          customSearchIconClass: "icon-header-search",
          customSearchIconNoHoverClass: "icon-header-search-nohover",
          customSearchIconCloseClass: "icon-header-search_close",
        }),
        T = y.ItemView.extend({
          className: "csui-search-box",
          template: C,
          templateHelpers: function () {
            var l = {
              showOptionsDropDown: this.options.data.showOptionsDropDown,
              placeholder: this.options.data.placeholder || f.placeholder,
              clearerTitle: f.clearerTitle,
              startSearchTitle: f.startSearch,
              searchIconTitle: f.searchIconTitle,
              searchIconAria: f.searchIconAria,
              searchBoxTitle: f.searchBoxTitle,
              searchOptionsTitle: f.searchOptionsTitle,
              startSearch: f.startSearch,
              searchLandmarkAria: f.searchLandmarkAria,
              highContrast: this.options.highContrast === 2,
            };
            return { messages: l };
          },
          slicePopOverTemplate: S,
          sliceDropDownTemplate: w,
          namedSessionStorage: new k(),
          ui: {
            input: ".csui-input",
            clearer: ".csui-clearer",
            formfieldSearch: ".csui-formfield-search",
            innerSeparator: ".csui-separator",
            searchIcon: ".csui-header-search-icon",
            dropDown: ".csui-search-options-dropdown",
            dropDownWrapperClass: ".csui-search-options-wrapper",
          },
          events: {
            "click @ui.searchIcon": "searchHeaderIconClicked",
            "keydown .csui-header-search-icon": "searchIconKeyPressed",
            "click @ui.input": "inputClicked",
            "keydown @ui.input": "inputTyped",
            "keyup @ui.input": "inputChanged",
            "paste @ui.input": "inputChanged",
            "change @ui.input": "inputChanged",
            "click @ui.clearer": "clearerClicked",
            "click @ui.formfieldSearch": "formfieldSearchClicked",
            "click .csui-searchbox-option": "selectSearchOption",
            "keydown @ui.clearer": "keyDownOnClear",
            "keydown @ui.formfieldSearch": "keyDownOnFormfieldSearch",
            "keydown .csui-selected-checkbox": "accessibility",
            "keyup .csui-selected-checkbox": "keyUpHandler",
            "keyup .csui-slices-more": "keyUpHandler",
            "keydown .csui-slices-more": "_handleSlicesShowMore",
            "click .csui-slices-more": "showMore",
            "click .csui-searchforms-show-more": "openSearchForm",
            "keydown .csui-searchforms-show-more": "openSearchForm",
            "focus @ui.input": "focusedOnSearchInput",
          },
          currentlyFocusedElement: function (l) {
            if (this.$el) {
              var g = this.$el.find("*[data-cstabindex=-1]");
              g.length && g.prop("tabindex", 0);
              var I = !!l && l.shiftKey;
              !I &&
              this.$el.find(".search-bar").length &&
              this.$el.find(".search-bar").is(":visible")
                ? ((this.focusElement = this.$el.find(".csui-input")),
                  (this.skipShowingDropdown = !0))
                : this.$el.find("a.csui-acc-focusable").length &&
                  (this.focusElement = this.$el.find("a.csui-acc-focusable"));
            }
            return this.focusElement;
          },
          behaviors: { TabableRegion: { behaviorClass: i } },
          namedLocalStorage: new t("search_bar_settings"),
          constructor: function (g) {
            g || (g = {}),
              (g.data = m.defaults({}, g.data, _)),
              (this.direction = v.settings.rtl ? "left" : "right");
            var I = g.context;
            g.model || (g.model = I.getModel(a)),
              (this.applicationScope = I.getModel(d)),
              y.ItemView.prototype.constructor.apply(this, arguments),
              this.listenTo(this.model, "change:where", this._updateInput),
              (this.searchBoxFactory = I.getFactory(r)),
              (this.searchboxModel = this.searchBoxFactory.property),
              this.options.data.showOptionsDropDown &&
                (this.listenTo(I, "sync:perspective", this._perspectiveSynced),
                this.listenTo(
                  I,
                  "change:current:node",
                  this._currentNodeChanged
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareOptionsdropdown
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareSlicePopover
                ),
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.prepareSearchFormsPopover
                ),
                this.listenTo(this, "refine:search", this._refineSearch)),
              this.options.data.enableSearchBarSettings &&
                this.listenTo(
                  this.searchboxModel,
                  "change",
                  this.updateSearchBarSettings
                ),
              (this.model.get("where") || this.options.data.showSearchInput) &&
                p(document).on(
                  "click." + this.cid + " keydown." + this.cid,
                  this,
                  this._hideSearchBar
                ),
              p(document).on(
                "keydown." + this.cid,
                this,
                this._shortcutToQuery
              ),
              (this.searchForms = new n({
                options: this.options,
                connector: this.searchboxModel && this.searchboxModel.connector,
                originatingView: this,
              }));
          },
          _refineSearch: function (l, g) {
            this.model.clear({ silent: !0 }),
              this.model.set(g),
              this.hideSearchOptionsDropDown(l);
          },
          updateSearchBarSettings: function () {
            if (
              ((this.search_bar_settings = this.searchboxModel.get(
                "search_bar_settings"
              )),
              this.search_bar_settings &&
                this.search_bar_settings.full_text &&
                (this.namedLocalStorage.set(
                  "full_text",
                  this.search_bar_settings.full_text
                ),
                this.model))
            ) {
              var l =
                this.search_bar_settings && this.search_bar_settings.full_text;
              this.model.set("modifier", l.modifier, { silent: !0 }),
                this.model.set("lookfor", l.lookfor, { silent: !0 });
            }
          },
          _shortcutToQuery: function (l) {
            if (l.ctrlKey && l.keyCode == 114) {
              var g = l.data;
              g.isSearchInputVisible()
                ? g.ui.input.trigger("focus")
                : g.searchIconClicked(l);
            }
          },
          onBeforeDestroy: function () {
            p(document)
              .off("click." + this.cid)
              .off("keydown." + this.cid);
          },
          isSearchbarVisible: function () {
            return this.$(".search-bar").is(":visible");
          },
          isSearchInputVisible: function () {
            return this.$(".csui-input").is(":visible");
          },
          handleKeydownNavbar: function (l) {
            var g = p(".csui-navbar.binf-navbar .binf-container-fluid")
                .find("*[tabindex]:visible")
                .toArray(),
              I = g.unshift(this.$el);
            document.activeElement === g[I - 1] &&
              p(document)
                .find(".csui-help .csui-acc-tab-region")
                .trigger("focus");
          },
          _perspectiveSynced: function (l, g) {
            this._currentNodeChanged(g);
          },
          _currentNodeChanged: function (l) {
            l instanceof e && (l.get("container") || l.get("type") === 5574)
              ? ((this.searchboxModel.nodeId = l.get("id")),
                (this.searchboxModel.nodeName = l.get("name")),
                this.namedSessionStorage.set(
                  this.searchboxModel.nodeId,
                  this.searchboxModel.nodeName
                ),
                this.searchboxModel.trigger("change"))
              : ((this.searchboxModel.nodeId = void 0),
                (this.searchboxModel.nodeName = void 0),
                this.searchboxModel.trigger("change"));
          },
          _dataSynced: function (l, g) {
            this.searchboxModel &&
              ((this.options.data && this.options.data.alwaysFetchDropdown) ||
                !(this.searchboxModel && this.searchboxModel.fetched)) &&
              this.searchBoxFactory.fetch();
          },
          onRender: function (l) {
            this.options.data.showSearchInput &&
              (this.$el.find(".search-bar").show(), this.searchIconToClose());
            var g = this.options.data.inputValue || this.model.get("where");
            (this.slice = this.options.data.slice || this.model.get("slice")),
              g &&
                (this._setInputValue(g), this.$el.find(".search-bar").show()),
              (this.options.data.showInput || g) &&
                (this.triggerMethod("before:show:input", this),
                this.ui.input.show(),
                this.triggerMethod("show:input", this)),
              l &&
                l.data &&
                this.$el
                  .find(".csui-search-box .csui-header-search-icon")
                  .removeClass(l.data.options.data.customSearchIconCloseClass)
                  .addClass(l.data.options.data.customSearchIconClass);
          },
          _createSliceCollection: function (l) {
            var g,
              I = new s.Collection();
            return (
              m.each(l, function (D) {
                (g = new s.Model({
                  sliceId: D.sliceId,
                  sliceDisplayName: D.sliceDisplayName,
                  sliceTooltip: D.sliceTooltip,
                })),
                  I.add(g);
              }),
              I
            );
          },
          prepareSlicePopover: function (l) {
            var g = this.searchboxModel.get("slices"),
              I =
                g && g.length > 3
                  ? this._createSliceCollection(g.slice(0, 3))
                  : this._createSliceCollection(g);
            this.options.data.showOptionsDropDown &&
              (g &&
                (m.each(g, function (D) {
                  var A = D.sliceDisplayName;
                  D.sliceTooltip = m.str.sformat(f.searchOptionTooltip, A);
                }),
                this.searchSlicesListView ||
                  (this.searchSlicesListView = new o({
                    originatingView: this,
                    collection: I,
                  }))),
              p(".search-bar").is(":visible") &&
                p(".binf-navbar-brand").removeClass("binf-navbar-collapse"));
          },
          showSlices: function () {
            this.searchSlicesListView &&
              ((this.searchSlicesRegion = new y.Region({
                el: ".csui-search-slice-region",
              })),
              this.searchSlicesRegion.$el.length &&
                this.searchSlicesRegion.show(this.searchSlicesListView),
              this.searchSlicesListView.getSelectedSlice());
          },
          prepareSearchFormsPopover: function () {
            var l = this.searchboxModel.get("search_forms"),
              g = (l && l.recent_search_forms) || [],
              I = m.findIndex(g, { type: "quick" }) !== -1;
            this.searchFormsContainerView = new u({
              searchFormsList: { recent_search_forms: g.slice(0, 5) },
              originatingView: this,
              showMore: !0,
              hasQuickSearches: I,
              fromSearchBox: !0,
            });
          },
          showSearchForms: function () {
            this.$el.hasClass("csui-search-expanded") &&
              this.searchFormsContainerView &&
              !this.searchFormsContainerView._isRendered &&
              ((this.searchFormsRegion = new y.Region({
                el: ".csui-recent-searchforms-container",
              })),
              this.searchFormsRegion.$el.length &&
                this.searchFormsRegion.show(this.searchFormsContainerView));
          },
          accessibility: function (l) {
            switch (
              (this.$el
                .find(".csui-selected-checkbox")
                .attr("tabindex", "0")
                .removeClass("active"),
              l.keyCode)
            ) {
              case 13:
                this.selectSearchOption(l), l.preventDefault();
                break;
              case 32:
                this.selectSearchOption(l), l.preventDefault();
                break;
              case 27:
                this.$el.find(".csui-selected-checkbox").attr("tabindex", "-1"),
                  this.$el.find(".active").removeClass("active"),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(l);
                break;
              case 9:
                if (l.shiftKey) this.ui.input[0].focus();
                else {
                  var g = this.$el.find(".csui-search-popover-row-body");
                  p(g[0]).addClass("active"),
                    p(g[0]).find('input[type="radio"]')[0].focus();
                }
                l.preventDefault();
                break;
            }
          },
          keyUpHandler: function (l) {
            var g = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
            l.keyCode == 32 && g && (l.stopPropagation(), l.preventDefault());
          },
          hidePopover: function (l) {
            this.options.data.showOptionsDropDown &&
              (this.$el.find(".csui-selected-checkbox").attr("tabindex", "-1"),
              this.$el.find(".active").removeClass("active"),
              this.showOptionsDropdown(l));
          },
          resetPageDefaults: function (l) {
            this.model.resetDefaults = !0;
          },
          searchIconKeyPressed: function (l) {
            l.keyCode === 32 &&
              (l.preventDefault(),
              this.searchIconToClose(),
              this.searchIconClicked(l));
          },
          searchHeaderIconClicked: function (l) {
            p(".search-bar").is(":visible")
              ? (this._hideSearchBar(l), this._hideSearchPanel(l))
              : (this.searchIconToClose(), this.searchIconClicked(l));
            var g = this.options && this.options.parentView;
            g &&
              g.listenToOnce(
                g,
                "control:clicked",
                m.bind(function () {
                  p(".search-bar").is(":visible") &&
                    (this._hideSearchBar(l), this._hideSearchPanel(l));
                }, this)
              );
          },
          focusedOnSearchInput: function (l) {
            if (this.skipShowingDropdown || this._isDropdownVisible()) {
              this.skipShowingDropdown = !1;
              return;
            } else
              l.preventDefault(),
                this._dataSynced(),
                this.$el.addClass("csui-search-expanded"),
                this.ui.input.prop("tabindex", 0),
                this.$el.addClass("csui-searchbox-ready"),
                this.searchboxModel && this.searchboxModel.fetched
                  ? (this.showSearchForms(),
                    this.showSlices(),
                    (this.closeDropdown = !1),
                    p(document.activeElement)[0] === this.ui.input[0] &&
                      this.options.data.showOptionsDropDown &&
                      this.showOptionsDropdown(l))
                  : (this.listenTo(this.searchboxModel, "change", function () {
                      this.showSearchForms(),
                        this.showSlices(),
                        document.querySelector(
                          ".csui-search.search-input-open"
                        ) &&
                          this.applicationScope.get("id") !== "search" &&
                          p(document.activeElement)[0] === this.ui.input[0] &&
                          this.options.data.showOptionsDropDown &&
                          this.showOptionsDropdown(l);
                    }),
                    this._updateInput(),
                    this.options.data.showOptionsDropDown &&
                      (this.searchboxModel.get("slices") ||
                        this.prepareSlicePopover(),
                      this.searchboxModel.get("search_forms_slice") ||
                        this.prepareSearchFormsPopover()));
          },
          searchIconClicked: function (l) {
            this._dataSynced(),
              this.$el.parent().addClass("search-input-open"),
              this.ui.searchIcon.attr("aria-expanded", "true");
            var g = this.$el.find(".csui-searchbox-option")[0];
            if (
              (p(document).on(
                "click." + this.cid + " keydown." + this.cid,
                this,
                this._hideSearchBar
              ),
              this.resetPageDefaults(l),
              this.options.data.showOptionsDropDown &&
                g &&
                this.searchboxModel.nodeId !== void 0 &&
                (this.$el.find(".csui-searchbox-option")[0].checked =
                  this.options.data.searchFromHere),
              p(".search-bar").is(":visible"))
            ) {
              var I = this.ui.input.val().trim();
              I &&
                (this._setInputValue(I),
                p(l.currentTarget).attr("title", f.startSearch),
                p(l.currentTarget).attr("aria-label", f.startSearch),
                this.trigger("hide:breadcrumbspanel"));
              var D = "",
                A = this.$el.find(".csui-searchbox-option.selected");
              this.options.data.showOptionsDropDown
                ? A && (D = A.val())
                : (D = this.options.data.nodeId),
                history.state &&
                  history.state.search &&
                  (this.previousState = history.state.search),
                I &&
                  (this._setSearchQuery(I, this.options.sliceString, D, l),
                  this._updateInput(),
                  this.options.data.searchFromHere ||
                    p(this.ui.dropDown).addClass(
                      "csui-selected-checkbox-hidden"
                    ),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(l),
                  (this.options.data.searchFromHere = !0)),
                this.previousState &&
                  (this.model.prevSearchState = this.previousState);
            } else
              this.$el.addClass("csui-search-expanded"),
                b.onTransitionEnd(
                  this.$el.parent(),
                  function () {
                    this.isDestroyed ||
                      ((this.skipShowingDropdown = !0),
                      this.ui.input.trigger("focus"),
                      this.ui.input.prop("tabindex", 0),
                      this.$el.addClass("csui-searchbox-ready"),
                      this.searchboxModel && this.searchboxModel.fetched
                        ? (this.showSearchForms(),
                          this.showSlices(),
                          (this.closeDropdown = !1),
                          p(document.activeElement)[0] === this.ui.input[0] &&
                            this.options.data.showOptionsDropDown &&
                            this.showOptionsDropdown(l))
                        : this.listenTo(
                            this.searchboxModel,
                            "change",
                            function () {
                              this.showSearchForms(),
                                this.showSlices(),
                                document.querySelector(
                                  ".csui-search.search-input-open"
                                ) &&
                                  this.applicationScope.get("id") !==
                                    "search" &&
                                  p(document.activeElement)[0] ===
                                    this.ui.input[0] &&
                                  this.options.data.showOptionsDropDown &&
                                  this.showOptionsDropdown(l);
                            }
                          ));
                  },
                  this
                ),
                this._updateInput(),
                p(".binf-navbar-brand").removeClass("binf-navbar-collapse"),
                this.options.data.showOptionsDropDown &&
                  (this.searchboxModel.get("slices") ||
                    this.prepareSlicePopover(),
                  this.searchboxModel.get("search_forms_slice") ||
                    this.prepareSearchFormsPopover()),
                this.model.attributes.where === "" &&
                  ((l.currentTarget.title = ""),
                  p(l.currentTarget).addClass(
                    this.options.data.customSearchIconNoHoverClass
                  ));
          },
          inputTyped: function (l) {
            var g = this.ui.input.val().trim();
            if (l.which === 13)
              l.preventDefault(),
                l.stopPropagation(),
                this._setInputValue(g),
                g
                  ? ((this.closeDropdown = !0), this.searchIconClicked(l))
                  : (this.closeDropdown = !1),
                this.previousValue != g && (this.previousValue = g);
            else if (l.which === 27)
              l.preventDefault(), l.stopPropagation(), this._hideSearchPanel(l);
            else if (
              ((this.closeDropdown = !1),
              l.which === 9 && this._isDropdownVisible() && !l.shiftKey)
            ) {
              if (this.$el.find(".csui-selected-checkbox").is(":visible"))
                this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .addClass("active"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')[0]
                    .focus();
              else {
                var I = this.$el.find(".csui-search-popover-row-body");
                p(I[0]).addClass("active"),
                  p(I[0]).find('input[type="radio"]').trigger("focus");
              }
              l.preventDefault();
            } else
              l.shiftKey && l.key === "Tab"
                ? (this.$el.find(".active").removeClass("active"),
                  this.options.data.showOptionsDropDown &&
                    this.hideSearchOptionsDropDown(l))
                : this.inputChanged(l);
          },
          inputChanged: function (l) {
            var g = this.ui.input.val();
            this.ui.clearer.prop("tabindex", g !== "" ? 0 : -1),
              this.ui.formfieldSearch.prop("tabindex", g !== "" ? 0 : -1),
              this.ui.clearer.toggle(!!g.length),
              this.ui.innerSeparator.toggle(!!g.length),
              this.ui.formfieldSearch.toggle(!!g.length),
              l.keyCode === 13 &&
                g &&
                (g ? (this.closeDropdown = !0) : (this.closeDropdown = !1)),
              this.options.data.showOptionsDropDown &&
                this.showOptionsDropdown(l);
          },
          inputClicked: function (l) {
            this.closeDropdown && (this.closeDropdown = !1),
              this.hidePopover(l);
          },
          showOptionsDropdown: function (l) {
            if (
              ((this.hideBackButton = !0),
              !this._isDropdownVisible() &&
                this.options.data.showOptionsDropDown)
            ) {
              var g = l || window.event,
                I = this.getSlices(),
                D =
                  I && I.length > 3
                    ? this._createSliceCollection(I.slice(0, 3))
                    : this._createSliceCollection(I);
              if (
                (!this.searchboxModel.nodeId ||
                (this.applicationScope.get("id") === "search" &&
                  p(this.ui.dropDown).hasClass("csui-selected-checkbox-hidden"))
                  ? (this.$el
                      .find(".csui-selected-checkbox")
                      .addClass("binf-hidden"),
                    p(this.ui.dropDown).addClass(
                      "csui-selected-checkbox-hidden"
                    ))
                  : p(this.ui.dropDown).removeClass(
                      "csui-selected-checkbox-hidden"
                    ),
                g.keyCode !== 27 &&
                  !this.closeDropdown &&
                  (p(this.ui.dropDown).removeClass("binf-hidden"),
                  this.$el.find(".csui-selected-checkbox").is(":visible") &&
                    (this.$el.find(".csui-searchbox-option")[0].checked =
                      this.options.data.searchFromHere),
                  !p(document.body).hasClass("binf-modal-open")))
              ) {
                if (
                  (p(document.body).addClass("binf-search-box-open"),
                  p(document)
                    .find(".csui-navbar.binf-navbar")
                    .addClass("masked"),
                  !p(document).find(".search-box-widget-mask").length)
                ) {
                  var A = document.createElement("div");
                  (A.className = "search-box-widget-mask"),
                    p(document.body).find(".binf-widgets").append(A);
                }
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .on(" keydown.", this.handleKeydownNavbar);
              }
              this.options.data.searchFromHere &&
                (this.$el.find(".csui-searchbox-option").addClass("selected"),
                this.$el.find(".csui-icon").addClass("icon-listview-checkmark"),
                this.$el.find(".csui-icon").addClass("icon-checkbox-selected")),
                I &&
                  (this.searchboxModel.get("slices").more &&
                    this.$el
                      .find(".csui-slices-more")
                      .removeClass("binf-hidden"),
                  (this.searchSlicesListView = new o({
                    originatingView: this,
                    collection: D,
                  }))),
                this.$el.find(".csui-search-form-collection").length &&
                  this.$el
                    .find(".csui-search-form-collection")
                    .removeClass("binf-hidden"),
                this.showSearchForms(),
                this.showSlices();
            }
          },
          prepareOptionsdropdown: function (l) {
            if (this.options.data.showOptionsDropDown) {
              if (!this.searchboxModel.nodeId) {
                var g =
                  m.has(this.options, "context") &&
                  this.options.context.getModel(c);
                g &&
                  g instanceof e &&
                  (g.get("container") || g.get("type") === 5574) &&
                  ((this.searchboxModel.nodeId = g.get("id")),
                  (this.searchboxModel.nodeName = g.get("name")),
                  this.namedSessionStorage.set(
                    this.searchboxModel.nodeId,
                    this.searchboxModel.nodeName
                  ));
              }
              !this.searchboxModel.nodeId &&
                this.model.get("location_id1") &&
                ((this.searchboxModel.nodeId = this.model.get("location_id1")),
                this.namedSessionStorage.get(this.searchboxModel.nodeId) &&
                  (this.searchboxModel.nodeName = this.namedSessionStorage.get(
                    this.searchboxModel.nodeId
                  ))),
                (this.searchOptions = {}),
                this.searchboxModel.nodeId &&
                  ((this.searchOptions.nodeId = this.searchboxModel.nodeId),
                  (this.searchOptions.nodeIdSO = m.uniqueId(
                    "csui-so-" + this.searchboxModel.nodeId
                  )),
                  !this.searchboxModel.nodeName &&
                    this.options.data.nodeName &&
                    (this.searchboxModel.nodeName = this.options.data.nodeName),
                  this.searchboxModel.nodeName &&
                    (this.searchOptions.nodeName =
                      " (" + this.searchboxModel.nodeName + ")"),
                  (this.searchOptions.select = f.searchOptionsSelect),
                  (this.searchOptions.fromHere = f.searchFromHere),
                  (this.searchOptions.checked = this.options.data.searchFromHere
                    ? "checked"
                    : "")),
                this.searchboxModel.get("slices") &&
                  ((this.searchOptions = m.extend(
                    this.searchOptions,
                    this.searchboxModel.attributes
                  )),
                  (this.searchOptions.slices.searchWithinLabel =
                    f.searchWithinLabel),
                  (this.searchOptions.slices.showMore = f.showMore),
                  (this.searchOptions.slices.showMoreAria = f.showMoreAria),
                  (this.searchOptions.slices.more =
                    this.searchOptions.slices.length > 3));
              var I = this.sliceDropDownTemplate(this.searchOptions);
              this.ui.dropDownWrapperClass.html(I),
                this.searchOptions.fromHere &&
                  (this.$el.find(".csui-searchbox-option").addClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-listview-checkmark icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !0));
            }
          },
          destroyOptionspopover: function (l) {
            this.ui.dropDown.html(""), this.ui.dropDown.addClass("binf-hidden");
          },
          selectSearchOption: function (l) {
            l.type === "keydown" && (l.keyCode === 13 || event.keyCode === 32)
              ? (this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .addClass("active"),
                this.$el
                  .find('.csui-selected-checkbox input[type="checkbox"]')
                  .trigger("focus"))
              : l.type === "click" &&
                (this.$el.find(".active").removeClass("active"),
                this.$el
                  .find(".csui-selected-checkbox")
                  .attr("tabindex", "0")
                  .removeClass("active")
                  .trigger("focus")),
              this.options.data.searchFromHere
                ? ((this.options.data.searchFromHere = !1),
                  this.$el
                    .find(".csui-searchbox-option")
                    .removeClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .removeClass("icon-listview-checkmark"),
                  this.$el
                    .find(".csui-icon")
                    .removeClass("icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !1))
                : ((this.options.data.searchFromHere = !0),
                  this.$el.find(".csui-searchbox-option").addClass("selected"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-listview-checkmark"),
                  this.$el
                    .find(".csui-icon")
                    .addClass("icon-checkbox-selected"),
                  this.$el
                    .find('.csui-selected-checkbox input[type="checkbox"]')
                    .attr("aria-checked", !0));
          },
          handleSelectCheckbox: function (l) {
            if (l.keyCode === 40) {
              var g = this.$el.find(".csui-search-popover-row-body"),
                I = g.index(g.filter(".active"));
              (I = I >= 0 ? I : 0),
                p(g[I]).attr("tabindex", 0),
                p(g[I]).addClass("active"),
                p(g[I]).find('input[type="radio"]')[0].focus();
            }
          },
          hideSearchOptionsDropDown: function (l) {
            var g = this;
            if (
              g.$el.find(".csui-searchbox-option")[0] === document.activeElement
            )
              return !1;
            if (g.options.data.showOptionsDropDown) {
              var I = g;
              return I.showSearchOptionDropDown(l), !0;
            }
          },
          showSearchOptionDropDown: function (l) {
            this.options.data.showOptionsDropDown &&
              (!this.ui.dropDown.is(":hover") || l.type === "click"
                ? (this.ui.dropDown && this.ui.dropDown.addClass("binf-hidden"),
                  p(document.body).hasClass("binf-search-box-open") &&
                    (p(document.body).removeClass("binf-search-box-open"),
                    p(document)
                      .find(".csui-navbar.binf-navbar")
                      .removeClass("masked"),
                    p(document.body).find(".search-box-widget-mask").remove(),
                    p(document)
                      .find(".csui-navbar.binf-navbar")
                      .off(" keydown.", this.handleKeydownNavbar)))
                : this.popoverTimer && clearTimeout(this.popoverTimer));
          },
          keyDownOnClear: function (l) {
            (l.keyCode === 13 || l.keyCode === 32) && this.clearerClicked(l);
          },
          clearerClicked: function (l) {
            l.preventDefault(),
              l.stopPropagation(),
              this._setInputValue(""),
              this.hidePopover(l),
              this.ui.input.trigger("focus");
          },
          keyDownOnFormfieldSearch: function (l) {
            (l.keyCode === 13 || l.keyCode === 32) &&
              this.formfieldSearchClicked(l);
          },
          formfieldSearchClicked: function (l) {
            this.searchIconClicked(l);
          },
          _setSearchQuery: function (l, g, I, D) {
            this.model.clear({ silent: !0 }),
              this.options.context.getModel(h).clear({ silent: !0 });
            var A = {};
            g && (A.slice = g), I && (A.location_id1 = I), l && (A.where = l);
            var B =
              this.search_bar_settings && this.search_bar_settings.full_text;
            B &&
              (B.modifier || B.lookfor) &&
              ((A.modifier = B.modifier), (A.lookfor = B.lookfor)),
              this.model.set(A);
          },
          getSlices: function () {
            var l,
              g,
              I =
                this.options.model && this.options.model.get("slice")
                  ? this.options.model.get("slice")
                  : this.namedLocalStorage.get("selectedSlice");
            return (
              (this.options.sliceString = I),
              I
                ? (g = m.filter(
                    this.searchboxModel.get("slices"),
                    function (D) {
                      if (D.sliceId != I.substring(1, I.length - 1)) return !0;
                      l = D;
                    }
                  ))
                : (g = this.searchboxModel.get("slices")),
              l && g.unshift(l),
              g
            );
          },
          showMore: function () {
            var l = this._createSliceCollection(this.getSlices());
            (this.searchSlicesListView = new o({
              originatingView: this,
              collection: l,
            })),
              this.$el.find(".csui-slices-more").addClass("binf-hidden"),
              this.showSlices(),
              p(
                this.searchSlicesListView.$el.find(
                  '.csui-search-popover-row-body input[type="radio"]'
                )[3]
              )[0].focus();
          },
          _handleSlicesShowMore: function (l) {
            switch (l.keyCode) {
              case 27:
                this.options.data.showOptionsDropDown &&
                  this.hideSearchOptionsDropDown();
                break;
              case 32:
                this.showMore(),
                  p(
                    this.searchSlicesListView.$el.find(
                      ".csui-search-popover-row-body"
                    )[3]
                  ).addClass("active");
                break;
              case 13:
                this.showMore(),
                  p(
                    this.searchSlicesListView.$el.find(
                      ".csui-search-popover-row-body"
                    )[3]
                  ).addClass("active");
                break;
              case 9:
                l.shiftKey
                  ? (p(
                      this.searchSlicesListView.$el.find(
                        ".csui-search-popover-row-body"
                      )[0]
                    ).addClass("active"),
                    p(
                      this.searchSlicesListView.$el.find(
                        '.csui-search-popover-row-body input[type="radio"]'
                      )[0]
                    )[0].focus())
                  : this.searchFormsContainerView.$el.find(
                      ".csui-searchforms-popover-row"
                    ).length
                  ? this.searchFormsContainerView.$el
                      .find(".csui-searchforms-popover-row")[0]
                      .focus()
                  : this.searchFormsContainerView.$el
                      .find(".csui-searchforms-show-more")[0]
                      .focus();
                break;
            }
            l.preventDefault();
          },
          openSearchForm: function (l) {
            if (l.keyCode === 13 || l.keyCode === 32 || l.type === "click") {
              if (
                this.$el
                  .find(".csui-searchforms-popover-row")
                  .hasClass("binf-disabled")
              )
                return;
              this.$el
                .find(".csui-searchforms-popover-row")
                .addClass("binf-disabled"),
                this.hideSearchOptionsDropDown(l);
              var g = p(l.currentTarget).data("searchformid");
              g === "loadAllForms" &&
                ((this.hideBackButton = !1),
                (this.searchForms.isKeyPress =
                  l.keyCode === 13 || l.keyCode === 32),
                this.searchForms.openFormInSidepanel(
                  this.searchboxModel.get("search_forms")
                ));
            } else if (l.keyCode === 9)
              if ((l.preventDefault(), l.shiftKey))
                if (this.$el.find(".csui-searchforms-popover-row").length) {
                  var I = this;
                  setTimeout(function () {
                    I.$el.find(".csui-searchforms-popover-row")[0].focus();
                  }, 0);
                } else
                  this.$el.find(".csui-slices-more").hasClass("binf-hidden")
                    ? this.$el.find(".csui-search-popover-row-body").length
                      ? (p(
                          this.$el.find(".csui-search-popover-row-body")[0]
                        ).addClass("active"),
                        p(
                          this.$el.find(
                            '.csui-search-popover-row-body input[type="radio"]'
                          )[0]
                        ).focus())
                      : this.ui.input && this.ui.input.trigger("focus")
                    : this.$el.find(".csui-slices-more").focus();
              else
                this.hideSearchOptionsDropDown(),
                  this.$el.find(".csui-clearer").is(":visible")
                    ? this.$el.find(".csui-clearer").focus()
                    : this.$el.find(".csui-header-search-icon").focus();
            else
              l.keyCode === 27 &&
                this.options.data.showOptionsDropDown &&
                this.hideSearchOptionsDropDown();
          },
          _hideSearchPanel: function (l) {
            l.data = l.data || this;
            var g = l || window.event,
              I = p(".search-bar"),
              D = l.data,
              A = D.$el.parent();
            p(document)
              .find("." + l.data.options.data.customSearchIconNoHoverClass)
              .removeClass(l.data.options.data.customSearchIconNoHoverClass),
              p(document).find(".csui-input").val(""),
              A.removeClass("search-input-open"),
              b.onTransitionEnd(
                A,
                function () {
                  D.options.parentView &&
                    D.options.parentView.trigger("render:controls"),
                    !this.isDestroyed &&
                      (p(".binf-navbar-brand").addClass("binf-navbar-collapse"),
                      D.$el
                        .removeClass("csui-searchbox-ready")
                        .removeClass("csui-search-expanded"));
                },
                this
              ),
              (p(document).find(
                ".csui-search-box .csui-header-search-icon"
              )[0].title = f.searchIconTitle),
              p(
                p(document).find(".csui-search-box .csui-header-search-icon")[0]
              ).attr("aria-label", f.searchIconTitle),
              p(
                p(document).find(".csui-search-box .csui-header-search-icon")[0]
              ).attr("aria-expanded", "false"),
              (l.data.slice = l.data.model.get("slice")),
              l.data.ui.dropDown.addClass("binf-hidden"),
              p(document.body).hasClass("binf-search-box-open") &&
                (p(document.body).removeClass("binf-search-box-open"),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .removeClass("masked"),
                p(document.body).find(".search-box-widget-mask").remove(),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .off(" keydown.", this.handleKeydownNavbar)),
              p(document)
                .find(".csui-search-box .csui-header-search-icon")
                .removeClass(l.data.options.data.customSearchIconCloseClass)
                .addClass(l.data.options.data.customSearchIconClass),
              p(document).off("click." + this.cid + " keydown." + this.cid);
            var B = l.data;
            B.trigger("hide:searchbar"),
              p(".csui-input").prop("tabindex", -1),
              D.$el.find(".active").removeClass("active"),
              m.isObject(D.ui.searchIcon) && D.ui.searchIcon.trigger("focus");
          },
          _isDropdownVisible: function () {
            return this.ui.dropDown.is(":visible");
          },
          _hideSearchBar: function (l) {
            l.data = l.data || this;
            var g = l || window.event,
              I = p(".search-bar"),
              D = l.data,
              A = D.$el.parent(),
              B = D.ui.input.val().trim(),
              M = I.find(".csui-search-options-dropdown");
            A.hasClass("search-input-open") &&
            B &&
            !p(l.target).is(".csui-input") &&
            D._isDropdownVisible() &&
            M.find(l.target).length === 0
              ? (M.addClass("binf-hidden"),
                p(document)
                  .find(".csui-navbar.binf-navbar")
                  .removeClass("masked"),
                p(document.body).find(".search-box-widget-mask").remove())
              : ((D.applicationScope.get("id") !== "search" &&
                  I.is(":visible")) ||
                  p(l.target).find(".search-input-open").length ||
                  p(l.target).siblings().find(".search-input-open").length ||
                  p(l.target).hasClass("search-input-open")) &&
                ((g.type === "keydown" &&
                  (g.keyCode === 27 || g.which === 27) &&
                  !p(".search-bar-content .binf-popover").is(":visible")) ||
                  (!p(g.target).closest(I).length &&
                    g.type === "click" &&
                    !p(g.target).closest(".csui-header-search-icon").length &&
                    !p(g.target).closest(".esoc-activityfeed-invisiblebutton")
                      .length)) &&
                D._hideSearchPanel(l);
          },
          _updateInput: function () {
            if (this._isRendered) {
              var l = this.model.get("where") || "";
              this._setInputValue(l);
            }
          },
          _setInputValue: function (l) {
            this.ui.input.val(l),
              this.ui.clearer.toggle(!!l.length),
              this.ui.innerSeparator.toggle(!!l.length),
              this.ui.formfieldSearch.toggle(!!l.length),
              this.options.data.showOptionsDropDown &&
                (this.options.data.nodeName = this.searchboxModel.nodeName);
          },
          searchIconToClose: function () {
            m.isObject(this.ui.searchIcon) &&
              this.ui.searchIcon.hasClass(
                this.options.data.customSearchIconClass
              ) &&
              this.ui.searchIcon
                .removeClass(this.options.data.customSearchIconClass)
                .addClass(this.options.data.customSearchIconCloseClass),
              this.ui.input.addClass("csui-input-focus"),
              p(this.ui.searchIcon).attr("title", f.closeSearch),
              p(this.ui.searchIcon).attr("aria-label", f.closeSearch),
              p(this.ui.searchIcon).removeClass(
                this.options.data.customSearchIconNoHoverClass
              );
          },
          isTabIPad: function () {
            const l = navigator.userAgent,
              g = /iPad/i.test(l);
            return /Android/i.test(l) || g;
          },
          showHideTabIPad: function (l) {
            this.isTabIPad() &&
              (l
                ? p(".binf-widgets .csui-logo-left .csui-logo").show()
                : p(".binf-widgets .csui-logo-left .csui-logo").hide());
          },
        });
      return T;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/search/search.view",
    [
      "csui/widgets/search.box/search.box.view",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/controls/globalmessage/globalmessage",
    ],
    function (x, m, p) {
      "use strict";
      var y = x.extend({
        constructor: function (e) {
          x.call(this, e), (this.searchQuery = e.context.getModel(m));
        },
        onRender: function () {
          var s = function () {
            p.trigger("resize");
          };
          this.listenTo(this, "hide:input", s),
            this.listenTo(this, "show:input", s);
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/impl/nls/root/localized.strings",
    {
      FavoritesIconTitle: "Favorites",
      FavoritesTitleAria: "OpenText Content Management Favorites",
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return "favorite_header_icon-black";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '<div class="csui-favorites-icon-container" title="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "title") || (e != null ? o(e, "title") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 50 },
                      end: { line: 1, column: 59 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "favoritesTitleAria") ||
                  (e != null ? o(e, "favoritesTitleAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "favoritesTitleAria",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 73 },
                      end: { line: 1, column: 95 },
                    },
                  })
                : i)
            ) +
            `" role="button" aria-haspopup="true" aria-expanded="false">
  <span class="csui-icon-favorites favorite_header_icon ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "highContrast") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 2, column: 56 },
                  end: { line: 2, column: 109 },
                },
              }
            )) != null
              ? t
              : "") +
            `"></span>
</div>
<div class="csui-favorites-view-container"></div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_favorites_impl_favorites",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/controls/tabletoolbar/impl/nls/localized.strings", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/controls/tabletoolbar/impl/nls/root/localized.strings", {
    ToolbarAria: "Table toolbar",
    ToolbarItemFilter: "Show filters",
    ToolbarItemFilterAria: "Show filter panel",
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemBrowse: "Browse",
    ToolbarItemCopy: "Copy",
    ToolbarItemEmailLink: "Mail as link",
    ToolbarItemEmailLinkShort: "Mail as link",
    ToolbarItemPaste: "Paste",
    ToolbarItemMove: "Move",
    ToolbarItemShare: "Share",
    ToolbarItemSendTo: "Send to",
    ToolbarItemView: "Open",
    ToolbarItemNavigate: "Visit",
    ToolbarItemViewProperties: "Properties",
    ToolbarItemVersionHistory: "Version history",
    ToolbarItemDelete: "Delete",
    ToolbarItemReserve: "Reserve",
    ToolbarItemUnreserve: "Unreserve",
    ToolbarItemRequestReservation: "Request reservation",
    ToolbarItemUnrequestReservation: "Cancel request reservation",
    ToolbarItemEdit: "Edit",
    ToolbarItemRename: "Rename",
    ToolbarItemRenameFavorite: "Rename favorite",
    ToolbarItemOpenSavedQuery: "Open",
    ToolbarItemExecuteSavedQuery: "Execute",
    ToolbarItemInfo: "Properties",
    ToolbarItemTimeline: "Timeline",
    ToolbarItemToggleTableLayout: "Toggle layout",
    ToolbarItemSettings: "Settings",
    ToolbarItemAddFolder: "Folder",
    ToolbarItemAddDocument: "Document",
    ToolbarItemAdd: "Add",
    ToolbarItemAddItem: "Add item",
    ToolbarItemAddVersion: "Add version",
    ToolbarItemAddCategories: "Add categories",
    ToolbarItemMore: "More actions",
    ToolbarItemMoreAria: "More actions of {0}",
    ToolbarItemPrint: "Print",
    ToolbarItemOriginalEdit: "Edit original",
    ToolbarItemOriginalShare: "Share original",
    ToolbarItemOriginalReserve: "Reserve original",
    ToolbarItemOriginalUnreserve: "Unreserve original",
    ToolbarItemOriginalCopy: "Copy original",
    ToolbarItemOriginalMove: "Move original",
    ToolbarItemOriginalDownload: "Download original",
    ToolbarItemOriginalDelete: "Delete original",
    ToolbarItemCopyLink: "Copy link",
    ToolbarItemOriginalCopyLink: "Copy link original",
    ToolbarItemPermissions: "View permissions",
    ToolbarItemDeletePermission: "Remove from list",
    ToolbarItemEditPermission: "Edit permissions",
    ToolbarItemApplyPermission: "Apply permissions to sub-items",
    ToolbarItemChangeOwnerPermission: "Change owner",
    ToolbarItemRemoveCollectionItems: "Remove from collection",
    ToolbarItemInformation: "Properties",
    ToolbarGoToLocation: "Go to location",
    ToolbarCollect: "Collect",
    ToolbarItemZipAndDownload: "Download",
    ToolbarItemGoBack: "Go back",
    ToolbarItemTreeBrowse: "Show navigation tree",
    ToolbarItemRestructure: "Restructure",
    MenuItemUploadFile: "Upload file",
    MenuItemAddNewFolder: "Add new Folder",
    MenuItemZipAndDownload: "Download",
    MenuItemCopy: "Copy",
    MenuItemMove: "Move",
    MenuItemEmailLink: "Email link",
    MenuItemShare: "Share",
    MenuItemReserve: "Reserve",
    MenuItemUnreserve: "Unreserve",
    MenuItemDelete: "Delete",
    MenuItemSendToDevice: "Send to device",
    MenuItemRename: "Rename",
    MenuItemTimeline: "Timeline",
    MenuItemInformation: "Properties",
    MenuItemCopyLink: "Copy link",
    MenuItemRestructure: "Restructure",
    ToolbarItemComment: "Comment",
    ToolbarItemShowDescription: "Show description",
    ToolbarItemConfiguration: "Configuration",
    ToolbarItemMaximizeWidgetView: "Maximize widget view",
    ToolbarItemRestoreWidgetViewSize: "Restore widget view size",
    AddUserOrGroups: "Add user or group",
    AddOwnerOrGroup: "Add owner or owner group",
    RestorePublicAccess: "Restore public access",
    AddToolbarItemsTitle: "Add {0}",
    ToolbarItemThumbnail: "Grid view",
    ToolbarItemListView: "List view",
    ThumbnailTitle: "Grid view",
    ListViewTitle: "List view",
    ToolbarItemDocPreview: "Intelligent Viewer",
  }),
  csui.define(
    "csui/widgets/favorites/tileview.toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        inlineActionbar: new p(
          {
            inspect: [
              {
                signature: "Properties",
                name: m.ToolbarItemInfo,
                commandData: { dialogView: !0 },
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: m.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            share: [
              {
                signature: "CopyLink",
                name: m.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
            ],
            edit: [
              {
                signature: "Edit",
                name: m.ToolbarItemEdit,
                iconName: "csui_action_edit32",
              },
            ],
            other: [
              {
                signature: "Download",
                name: m.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              { signature: "goToLocation", name: m.ToolbarGoToLocation },
            ],
          },
          {
            maxItemsShown: 1,
            dropDownText: m.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
      };
      s && r(s);
      function r(a) {
        x.each(a, function (d) {
          x.each(d, function (t, i) {
            var o = e[i];
            if (!o) throw new Error("Invalid target toolbar: " + i);
            x.each(t, function (n) {
              (n = new y(n)), o.addItem(n);
            });
          });
        });
      }
      return e;
    }
  ),
  csui.define("csui/widgets/favorites/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/favorites/impl/nls/root/lang", {
    dialogTitle: "Favorites",
    searchTitle: "Search Favorites",
    searchPlaceholder: "Favorites",
    searchAria: "Search for favorites",
    expandAria: "Expand the Favorites widget",
    emptyGroupDefaultText: "This group is empty.",
    emptyListText: "There are no items to display.",
    loadingListText: "Loading results...",
    failedListText: "Loading results failed.",
    loadingText: "Loading favorites",
    favoritesGroupAria: "{0}, Favorites Group",
    favoritesEmptyGroupAria: "{0}, Empty Favorites Group",
    addFav: "Add Favorite",
    addFavAria: "{0} Add Favorite",
    removeFav: "Remove Favorite",
    removeFavAria: "{0} Remove Favorite",
    addFavoriteNameLabel: "Favorite name",
    addFavoriteNamePlaceHolder: "Enter name",
    addFavoriteGroupLabel: "Group",
    addFavoriteAddButtonLabel: "Add",
    addFavoriteCancelButtonLabel: "Cancel",
    nameErrorMaxLengthExceed: "Name cannot be longer than 248 characters.",
    nameErrorContainSemiColon: "Name cannot contain a colon.",
    updateFavoriteFailMessage: `Failed to update Favorite for node "{0}". 

{1}`,
    openFavoritesView: "Open favorites view",
  }),
  csui.define(
    "css!csui/widgets/favorites/impl/favorites.view",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/favorites/favorites.view",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/contexts/factories/favorites2",
      "csui/controls/list/list.view",
      "csui/controls/listitem/listitemstandard.view",
      "csui/controls/listitem/simpletreelistitem.view",
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/list/behaviors/list.view.keyboard.behavior",
      "csui/behaviors/collection.state/collection.state.behavior",
      "csui/controls/list/list.state.view",
      "csui/utils/contexts/factories/favorite2groups",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/models/favorites2",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/progressblocker/blocker",
      "csui/widgets/favorites/tileview.toolbaritems",
      "csui/utils/commands",
      "i18n!csui/widgets/favorites/impl/nls/lang",
      "i18n!csui/controls/listitem/impl/nls/lang",
      "css!csui/widgets/favorites/impl/favorites.view",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b,
      _
    ) {
      "use strict";
      var T = p.defaults({}, x.config(), { openInPerspective: !0 }),
        l = r.extend({
          templateHelpers: function () {
            return {
              title: this.options.data.title || b.dialogTitle,
              icon: this.options.data.titleBarIcon,
              searchPlaceholder: b.searchPlaceholder,
              searchTitle: b.searchTitle,
              searchAria: b.searchAria,
              expandAria: b.expandAria,
              openPerspectiveAria: b.openFavoritesView,
              openPerspectiveTooltip: b.openFavoritesView,
              enableOpenPerspective: this._enableOpenPerspective,
            };
          },
          events: { "click .tile-expand": "onMoreLinkClick" },
          behaviors: {
            ExpandableList: {
              behaviorClass: t,
              expandedView:
                "csui/widgets/favorites2.table/favorites2.table.view",
              orderBy: function () {
                return this.options.orderBy;
              },
              titleBarIcon: function () {
                return this.options.data.titleBarIcon;
              },
              dialogTitle: b.dialogTitle,
              dialogTitleIconNameRight: "csui_action_minimize32",
              dialogClassName: "favorites",
            },
            DefaultAction: { behaviorClass: i },
            TabableRegion: { behaviorClass: o },
            ListViewKeyboardBehavior: { behaviorClass: n },
            CollectionState: {
              behaviorClass: u,
              collection: function () {
                return this.completeCollection;
              },
              stateView: c,
              stateMessages: {
                empty: b.emptyListText,
                loading: b.loadingListText,
                failed: b.failedListText,
              },
            },
          },
          getChildView: function (g) {
            return this.showFlatList ? a : d;
          },
          childViewOptions: function () {
            return {
              templateHelpers: function () {
                if (this instanceof a)
                  return {
                    name: this.model.get("favorite_name"),
                    enableIcon: !0,
                    showInlineActionBar: this.showInlineActionBar,
                    itemLabel: p.str.sformat(
                      _.itemTitleLabel,
                      this.model.get("favorite_name")
                    ),
                  };
                var g,
                  I = this.model.get("name");
                return (
                  this.model.childrenCollection &&
                  this.model.childrenCollection.length === 0
                    ? (g = p.str.sformat(b.favoritesEmptyGroupAria, I))
                    : (g = p.str.sformat(b.favoritesGroupAria, I)),
                  {
                    icon: "mime_fav_group32",
                    name: I,
                    ariaName: g,
                    expand: this.model.searchMode,
                  }
                );
              },
              childViewTemplateHelpers: function () {
                return {
                  icon: this.model.get("icon"),
                  name: this.model.get("favorite_name"),
                  text: b.emptyGroupDefaultText,
                  showInlineActionBar: this.showInlineActionBar,
                  itemLabel: p.str.sformat(
                    _.itemTitleLabel,
                    this.model.get("favorite_name")
                  ),
                };
              },
              checkDefaultAction: !0,
              context: this.context,
              iconSize: this.options.iconSize,
              toolbarData: this.toolbarData,
              refetchNodeActions: this.options.refetchNodeActions,
            };
          },
          childEvents: {
            "click:item": "_onClickItem",
            "click:tree:item": "_onClickTreeItem",
            render: "onRenderItem",
            "before:destroy": "onBeforeDestroyItem",
            "changed:focus": "onChangedfocus",
          },
          constructor: function (I) {
            I || (I = {}),
              p.defaults(I, {
                orderBy: "favorite_name asc",
                iconSize: "contain",
                refetchNodeActions: !0,
              }),
              I.data || (I.data = {}),
              (I.data.titleBarIcon =
                I.data.showTitleIcon === !1
                  ? void 0
                  : "title-icon title-favourites");
            var D = v.getSignatures(w);
            this.completeCollection =
              I.collection ||
              I.context.getCollection(h, {
                detached: !0,
                permanent: !0,
                favorites: {
                  options: {
                    promotedActionCommands: [],
                    nonPromotedActionCommands: D,
                  },
                },
              });
            var A = e.getLimitedResourceScope();
            A.commands?.push("editpermissions"),
              this.completeCollection.favorites.setResourceScope(A);
            var B = y.Collection.extend({
              model: this.completeCollection.model,
            });
            (I.collection = new B()),
              (this.showInlineActionBar =
                I.showInlineActionBar === !1 ? I.showInlineActionBar : !0);
            var M = I.context,
              E = M && M.viewStateModel;
            (this._enableOpenPerspective =
              T.openInPerspective && E && E.get("history")),
              r.prototype.constructor.apply(this, arguments),
              (this.loadingText = b.loadingText),
              S.imbue(this),
              this.listenTo(
                this.completeCollection,
                "update sync",
                p.bind(this._synchronizeCollections, this)
              ),
              this._synchronizeCollections(),
              this.listenTo(this, "render", this._onRender),
              this.listenTo(
                this,
                "change:filterValue",
                this._synchronizeCollections
              ),
              this.showInlineActionBar &&
                ((I.tileViewToolbarItems = w),
                (this.context = M),
                (this.toolbarData = {
                  toolbaritems: w,
                  collection: this.completeCollection.favorites,
                })),
              (this.applicationScope = I.context.getModel(f)),
              this.listenTo(
                this,
                "doc:preview:generic:actions",
                this._highlightRow
              );
          },
          _highlightRow: function (g, I) {
            m("." + I).removeClass(I);
            var D, A;
            if (
              ((D = p.findIndex(this.collection.models, function (P) {
                return (
                  (A = p.findIndex(P.get("favorites"), function (O) {
                    return O.id === g.get("id");
                  })),
                  A != -1
                );
              })),
              A !== -1)
            ) {
              var B = this.$childViewContainer.find(
                  p.str.sformat("div:nth-child({0})", D + 1)
                ),
                M = B && B.find(".cs-list-group a"),
                E = M && M.eq(A);
              E && E.addClass(I);
            }
          },
          _onRender: function () {
            this.$el.addClass("cs-favorites"),
              this.completeCollection.ensureFetched(),
              this.$el.on("keydown", p.bind(this.onKeyDown, this)),
              this._updateAccAttributes();
          },
          _updateAccAttributes: function () {
            var g = this.$el.find(".tile-content"),
              I = g.attr("aria-labelledby");
            g.removeAttr("role aria-expanded aria-labelledby"),
              this.showFlatList
                ? this.$el
                    .find(".tile-content > .binf-list-group")
                    .attr({ role: "listbox", "aria-labelledby": I })
                : this.$el
                    .find(".tile-content > .binf-list-group")
                    .attr({ role: "tree", "aria-labelledby": I });
          },
          onRenderCollection: function () {
            this._updateAccAttributes();
          },
          onRenderItem: function (g) {
            this.showFlatList &&
              ((g._nodeIconView = new C({
                el: g.$(".csui-type-icon").get(0),
                node: g.model,
                size: this.options.iconSize,
              })),
              g._nodeIconView.render(),
              this.completeCollection &&
                this.completeCollection.favorites &&
                this.completeCollection.favorites.length &&
                g.$el.attr("role", "option"),
              g.$el.attr(
                "aria-label",
                p.str.sformat(
                  _.nameAndTypeAria,
                  g.model.get("favorite_name"),
                  g._nodeIconView.model.get("title")
                )
              ));
          },
          onBeforeDestroyItem: function (g) {
            this.showFlatList && g._nodeIconView && g._nodeIconView.destroy();
          },
          onChangedfocus: function () {
            this.trigger("changed:focus");
          },
          _onClickItem: function (g) {
            this.triggerMethod("execute:defaultAction", g.model);
          },
          _onClickTreeItem: function (g, I) {
            this.triggerMethod("execute:defaultAction", I.model);
          },
          onClickHeader: function (g) {
            this.options.avoidOpenPerspectiveOnHeader ||
              this.onClickOpenPerspective(g);
          },
          onClickOpenPerspective: function (g) {
            this.applicationScope.set("id", "favorites"),
              this.trigger("open:favorites:perspective");
          },
          onMoreLinkClick: function (g) {
            g.preventDefault(),
              g.stopPropagation(),
              this.triggerMethod("expand");
          },
          _synchronizeCollections: function () {
            var g,
              I = this,
              D = this.completeCollection.at(0),
              A = { connector: this.completeCollection.connector },
              B = { favorite_name: this.options.filterValue };
            if (this.completeCollection.length === 1 && D.get("tab_id") === -1)
              (this.showFlatList = !0),
                (g = new k(void 0, A)),
                g.reset((D.favorites && D.favorites.models) || []),
                g.setFilter(B),
                !I.options.filterValue || I.options.filterValue.length === 0
                  ? I.collection.reset(g.models)
                  : I.listenTo(g, "sync", function () {
                      I.collection.reset(g.models);
                    });
            else {
              I.showFlatList = !1;
              var M = this.isSearchOpen(),
                E = new y.Collection(),
                P = [];
              p.each(this.completeCollection.models, function (O) {
                (g = new k(void 0, A)),
                  g.reset(O.favorites.models),
                  g.setFilter(B);
                var z = new y.Model(O.attributes);
                if (
                  ((z.childrenCollection = g),
                  (z.searchMode = M),
                  z.get("tab_id") === -1 && z.set("flatten", !0),
                  E.add(z),
                  I.options.filterValue && I.options.filterValue.length > 0)
                ) {
                  var j = m.Deferred();
                  P.push(j.promise()),
                    I.listenTo(g, "sync", function () {
                      z.childrenCollection.length === 0 && E.remove(z),
                        j.resolve();
                    });
                }
              }),
                I.options.filterValue && I.options.filterValue.length > 0
                  ? m.when.apply(m, P).then(function () {
                      I.collection.reset(E.models);
                    })
                  : I.collection.reset(E.models);
            }
          },
          getElementByIndex: function (g, I) {
            if (this.showFlatList)
              return r.prototype.getElementByIndex.call(this, g);
            if (isNaN(g) || g < 0) return null;
            var D = this.children.findByIndex(g);
            return D && D.currentlyFocusedElement
              ? D.currentlyFocusedElement(I)
              : null;
          },
        });
      return l;
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/favorites/favorites.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "i18n!csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/widgets/favorites/favorites.view",
      "csui/utils/contexts/factories/favorites2",
      "css!csui/widgets/navigation.header/controls/favorites/impl/favorites",
    ],
    function (x, m, p, y, s, e, r, a) {
      "use strict";
      var d = p.LayoutView.extend({
        className: "csui-favorites-view initialLoading",
        template: e,
        templateHelpers: function () {
          return {
            title: y.FavoritesIconTitle,
            favoritesTitleAria: y.FavoritesTitleAria,
            highContrast: this.options.highContrast === 2,
          };
        },
        regions: {
          favoritesViewContainerRegion: ".csui-favorites-view-container",
        },
        ui: {
          favoritesButtonContainer: ".csui-favorites-icon-container",
          favoritesViewContainer: ".csui-favorites-view-container",
        },
        events: {
          dragenter: "_hideFavoritesView",
          keydown: "onKeyInView",
          "mouseenter .csui-favorites-view-container":
            "onMouseEnterFavoritesView",
          "mouseenter .csui-favorites-icon-container":
            "onMouseEnterFavoritesView",
          "mouseleave .csui-favorites-view-container":
            "onMouseLeaveFavoritesView",
          "mouseleave .csui-favorites-icon-container":
            "onMouseLeaveFavoritesView",
          "mouseenter .clicked-no-hover": "onMouseEnterClickedNoHoverItem",
          "focus .csui-favorites-icon-container": "onFocusButton",
          "blur .csui-favorites-icon-container": "onBlurButton",
          "blur .csui-favorites-view-container": "onBlurFavoritesViewContainer",
          "click .csui-favorites-icon-container": "onClickFavoritesIcon",
        },
        behaviors: { TabableRegionBehavior: { behaviorClass: s } },
        currentlyFocusedElement: function (t) {
          var i = this.ui.favoritesViewContainer.find(
            ".content-tile .cs-search-button"
          );
          return t.shiftKey && i.length > 0
            ? this.favoritesView._focusSearchButton()
            : this.ui.favoritesButtonContainer;
        },
        constructor: function (i) {
          p.LayoutView.call(this, i),
            this.propagateEventsToRegions(),
            this.listenTo(
              i.context,
              "change:perspective",
              this._hideFavoritesView
            );
        },
        onBeforeDestroy: function () {
          this.favoritesView && this.favoritesView.destroy();
        },
        onRender: function () {
          this.ui.favoritesViewContainer.addClass("binf-hidden");
        },
        onFocusButton: function () {
          this.options.highContrast === 2
            ? this.$el
                .find(".csui-icon-favorites")
                .addClass("fav_header42_mo_black")
            : this.$el.find(".csui-icon-favorites").addClass("fav_header42_mo");
        },
        onBlurButton: function () {
          this.options.highContrast === 2
            ? this.$el
                .find(".csui-icon-favorites")
                .removeClass("fav_header42_mo_black")
            : this.$el
                .find(".csui-icon-favorites")
                .removeClass("fav_header42_mo"),
            this.favoritesViewInFocus !== !0 &&
              document.activeElement !== this.ui.favoritesButtonContainer[0] &&
              this._hideFavoritesView();
        },
        onBlurFavoritesViewContainer: function (t) {
          this.favoritesViewInFocus !== !0 &&
            this.keyboardAction !== !0 &&
            this._hideFavoritesView();
        },
        onMouseEnterFavoritesView: function () {
          this.favoritesViewInFocus = !0;
        },
        onMouseLeaveFavoritesView: function () {
          this.favoritesViewInFocus = !1;
        },
        onMouseEnterClickedNoHoverItem: function (t) {
          t && t.target && m(t.target).removeClass("clicked-no-hover");
        },
        onKeyInView: function (t) {
          switch (t.keyCode) {
            case 9:
              var i = this.ui.favoritesButtonContainer.is(":focus");
              i &&
              t.shiftKey !== !0 &&
              !this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? this._focusOnFavoriteSearch(t)
                : !i && t.shiftKey
                ? (t.preventDefault(),
                  t.stopPropagation(),
                  this._focusOnFavoriteButton())
                : m(t.target).closest(".tile-header").length ||
                  this._hideFavoritesView();
              break;
            case 13:
            case 32:
              m(t.target).closest(".tile-header").length ||
                (this.triggerMethod("click:favorites:icon", t),
                this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                  this._focusOnFavoriteSearch(t));
              break;
            case 40:
              !this.favoritesView ||
              this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? (this.triggerMethod("click:favorites:icon", t),
                  this._focusOnFavoriteSearch(t))
                : this.favoritesViewInFocus !== !0 &&
                  this._focusOnFavoriteSearch(t);
              break;
            case 27:
              this._focusOnFavoriteButton(), this._hideFavoritesView();
              break;
          }
        },
        _focusOnFavoriteButton: function () {
          this.ui.favoritesButtonContainer.trigger("focus"),
            (this.favoritesViewInFocus = !1);
        },
        _focusOnFavoriteSearch: function (t) {
          var i = this.ui.favoritesViewContainer.find(
            ".content-tile .cs-search-button"
          );
          i.length > 0 &&
            (t.preventDefault(),
            t.stopPropagation(),
            (this.favoritesViewInFocus = !0),
            this.favoritesView._moveTo(
              t,
              this.favoritesView._focusSearchButton()
            ));
        },
        _focusOnFavoriteList: function (t) {
          var i = this.ui.favoritesViewContainer.find(
              "> .content-tile > .tile-content > .binf-list-group"
            ),
            o = this.favoritesView.showFlatList
              ? i.find("> .binf-list-group-item")
              : i.find("> .cs-simpletreelistitem");
          o.length > 0 &&
            (t.preventDefault(),
            t.stopPropagation(),
            (this.favoritesViewInFocus = !0),
            this.favoritesView._moveTo(t, this.favoritesView._focusList()));
        },
        _handleClickEvent: function (t) {
          !m(t.target).parents(".csui-favorites-view-container").length &&
            !m(t.target).parents(".csui-favorites-icon-container").length &&
            this._hideFavoritesView();
        },
        _toggleFavoritesView: function () {
          this.ui.favoritesViewContainer.hasClass("binf-hidden")
            ? this._showFavoritesView()
            : this._hideFavoritesView();
        },
        _showFavoritesView: function () {
          this.ui.favoritesViewContainer.removeClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "true"),
            this.$el.addClass("showing-favorites-view"),
            this.favoritesViewContainerRegion.show(this.favoritesView),
            m(document)
              .off("click." + this.cid)
              .on("click." + this.cid, x.bind(this._handleClickEvent, this));
        },
        _hideFavoritesView: function () {
          m(document).off("click." + this.cid),
            this.favoritesView &&
              this.favoritesView.isSearchOpen() &&
              this.favoritesView.searchClicked(event),
            (this.favoritesViewInFocus = !1),
            this.ui.favoritesViewContainer.addClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "false"),
            this.$el.removeClass("showing-favorites-view");
        },
        onClickFavoritesIcon: function (t) {
          t.preventDefault(),
            t.stopPropagation(),
            this.options &&
              this.options.parentView &&
              this.options.parentView.trigger("header:control:clicked");
          var i = m(".binf-open>.binf-dropdown-toggle");
          i.length > 0 && i.binf_dropdown("toggle"),
            this._ensureFavoritesView(),
            this._toggleFavoritesView(),
            this._focusOnFavoriteSearch(t);
        },
        _ensureFavoritesView: function () {
          if (!this.favoritesView) {
            var t = this,
              i = x.extend(this.options, {
                showInlineActionBar: !0,
                avoidOpenPerspectiveOnHeader: !0,
              });
            (this.favoritesView = new a(i)),
              this.favoritesView.listenToOnce(
                this.favoritesView.completeCollection,
                "request",
                this.favoritesView.blockActions
              ),
              this.favoritesView.listenToOnce(
                this.favoritesView.completeCollection,
                "sync error",
                this.favoritesView.unblockActions
              ),
              this.listenToOnce(
                this.favoritesView.completeCollection,
                "sync",
                function () {
                  this.$el.removeClass("initialLoading");
                }
              ),
              (this.favoritesView.blockingView.showloadingWheel = !1),
              this.listenTo(
                this.favoritesView,
                "childview:click:tree:item",
                function (o, n) {
                  n.$el && n.$el.addClass("clicked-no-hover"),
                    t._hideFavoritesView(),
                    t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "childview:click:item",
                function (o) {
                  o.$el && o.$el.addClass("clicked-no-hover"),
                    t._hideFavoritesView(),
                    t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "childview:before:execute:command",
                function (o) {
                  t._hideFavoritesView(), t._focusOnFavoriteButton();
                }
              ),
              this.listenTo(
                this.favoritesView,
                "before:keyboard:change:focus childview:before:keyboard:change:focus",
                function () {
                  t.keyboardAction = !0;
                }
              ),
              this.listenTo(
                this.favoritesView,
                "after:keyboard:change:focus childview:after:keyboard:change:focus",
                function () {
                  t.keyboardAction = !1;
                }
              ),
              this.listenTo(
                this.favoritesView,
                "open:favorites:perspective",
                function () {
                  this._hideFavoritesView();
                }
              );
          }
        },
      });
      return x.extend(d.prototype, r), d;
    }
  ),
  csui.define("csui/widgets/navigation.header/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/navigation.header/impl/nls/root/lang", {
    profileMenuItemLabel: "Profile",
    switchToClassicMenuItemLabel: "Classic view",
    personalizePage: "Personalize page",
    signOutMenuItemLabel: "Sign out",
    EditPerspective: "Edit page",
    editMultiplePerspectives: "Manage home pages",
    manageBranding: "Manage branding",
    ContentServerAdministrationMenuItemLabel: "Administration",
    AboutBox: "About",
    RecycleBin: "Recycle bin",
  }),
  csui.define(
    "csui/widgets/navigation.header/profile.menuitems",
    [
      "csui/lib/underscore",
      "i18n!csui/widgets/navigation.header/impl/nls/lang",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/navigation.header/profile.menuitems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        profileMenu: new p(
          {
            profile: [
              { signature: "UserProfile", name: m.profileMenuItemLabel },
            ],
            others: [
              { signature: "EditPerspective", name: m.EditPerspective },
              { signature: "PersonalizePage", name: m.personalizePage },
              {
                signature: "EditMultiplePerspectives",
                name: m.editMultiplePerspectives,
              },
              { signature: "ManageBranding", name: m.manageBranding },
              {
                signature: "ContentServerAdministration",
                name: m.ContentServerAdministrationMenuItemLabel,
              },
              { signature: "RecycleBin", name: m.RecycleBin },
            ],
            view: [
              {
                signature: "SwitchToClassic",
                name: m.switchToClassicMenuItemLabel,
              },
            ],
            proxy: [],
            about: [{ signature: "AboutBox", name: m.AboutBox }],
            signout: [{ signature: "SignOut", name: m.signOutMenuItemLabel }],
          },
          { maxItemsShown: 0, dropDownIconName: "csui_action_caret_down32" }
        ),
      };
      return (
        s &&
          x.each(s, function (r) {
            x.each(r, function (a, d) {
              var t = e[d];
              if (!t) throw new Error("Invalid target toolbar: " + d);
              x.each(a, function (i) {
                (i = new y(i)), t.addItem(i);
              });
            });
          }),
        e
      );
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/profile.menuitems.mask",
    [
      "module",
      "csui/lib/underscore",
      "csui/controls/toolbar/toolitems.mask",
      "csui/utils/toolitem.masks/global.toolitems.mask",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = p.extend({
        constructor: function () {
          var r = x.config(),
            a = new y();
          p.prototype.constructor.call(this, a, { normalize: !1 }),
            m.each(
              r,
              function (d, t) {
                this.extendMask(d);
              },
              this
            ),
            this.storeMask();
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<a href="#" data-binf-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true"
   class="binf-dropdown-toggle nav-profile csui-navbar-icons csui-acc-focusable" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileMenuTitle") ||
                  (e != null ? i(e, "profileMenuTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileMenuTitle",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 88 },
                      end: { line: 2, column: 108 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileMenuAria") ||
                  (e != null ? i(e, "profileMenuAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileMenuAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 122 },
                      end: { line: 2, column: 141 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="csui-profile-default-image image_user_placeholder">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "initials") || (e != null ? i(e, "initials") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "initials",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 66 },
                      end: { line: 3, column: 78 },
                    },
                  })
                : t)
            ) +
            `</span>
  <img class="csui-profile-image binf-img-circle binf-hidden" alt="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "profileImageAlt") ||
                  (e != null ? i(e, "profileImageAlt") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "profileImageAlt",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 67 },
                      end: { line: 4, column: 86 },
                    },
                  })
                : t)
            ) +
            '" src="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "imgSrc") || (e != null ? i(e, "imgSrc") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 93 },
                      end: { line: 4, column: 103 },
                    },
                  })
                : t)
            ) +
            `">
</a>
<ul class="binf-dropdown-menu csui-profile-dropdown" role="menu"></ul>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_navigation.header_controls_user.profile_impl_user.profile",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/utils/contexts/factories/connector",
      "csui/utils/contexts/factories/user",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/controls/toolbar/toolitem.view",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/utils/user.avatar.color",
      "csui/controls/globalmessage/globalmessage",
      "hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
      "csui-ext!csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",
      "csui/lib/jquery.binary.ajax",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c, h, f, k, C, S, w) {
      "use strict";
      var v =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/utils/contexts/factories/user"
        ] || {};
      r = r(x.id);
      var b = s.CompositeView.extend({
        classname: "binf-dropdown",
        template: C,
        templateHelpers: function () {
          var _ = a.formatMemberName(this.model);
          return {
            profileMenuTitle: w.profileMenuTitle,
            profileMenuAria: m.str.sformat(w.profileMenuAria, _),
            profileImageAlt: m.str.sformat(w.profileImageAlt, _),
            imgSrc:
              "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
            initials: this.options.model.attributes.initials,
          };
        },
        serializeData: function () {
          return { items: this.collection.toJSON() };
        },
        childView: u,
        childViewContainer: "> .csui-profile-dropdown",
        ui: {
          userProfileMenu: "> .csui-profile-dropdown",
          userProfileMenuHandle: "> a",
          personalizedImage: ".csui-profile-image",
          defaultImage: ".csui-profile-default-image",
          profileDropdownToggler: "> .nav-profile",
        },
        events: {
          "keydown @ui.profileDropdownToggler": "_showDropdown",
          "keydown @ui.userProfileMenu": "_showDropdown",
          "focusout @ui.profileDropdownToggler": "_toggleDropdown",
          "focusout @ui.userProfileMenu": "_toggleDropdown",
        },
        behaviors: { TabableRegion: { behaviorClass: o } },
        currentlyFocusedElement: "> .csui-acc-focusable",
        constructor: function (T) {
          T || (T = {}),
            (this.options = T),
            this._ensureModels(T),
            this._getUserGroups(),
            s.CompositeView.prototype.constructor.call(this, T),
            (this.connector = this.options.context.getModel(t)),
            this.listenTo(this.model, "change", this._refreshUser)
              .listenTo(T.context, "sync error", this._refreshActions)
              .listenTo(this, "render", this._displayUser)
              .listenTo(this, "destroy", this._releasePhotoUrl)
              .listenTo(
                this,
                "childview:toolitem:action",
                this._triggerMenuItemAction
              )
              .listenTo(y, "closeToggleAction", this._closeToggle);
        },
        _getUserGroups: function () {
          let _ = this._getGroupsUrl();
          _ &&
            this.options.connector.makeAjaxCall({ type: "GET", url: _ }).always(
              m.bind(function (T, l, g) {
                if (g && g.status === 200) {
                  let I = T.results;
                  this.options.context._groups = I;
                  let D = !1;
                  m.each(I, function (A) {
                    D =
                      D ||
                      A?.data?.properties?.name?.indexOf(
                        "Business Administrators"
                      ) > -1;
                  }),
                    D &&
                      v?.initialResponse?.data &&
                      ((v.initialResponse.data.businessAdministrator = D),
                      this._ensureModels(this.options));
                }
              }, this)
            );
        },
        _getGroupsUrl: function () {
          let _ = this.options?.context?.getModel(i);
          if (_) {
            let T = _.connector ? _.connector : this.options.connector;
            return (
              (this.options.connector = this.options.connector
                ? this.options.connector
                : T),
              e.combine(
                T.getConnectionUrl().getApiBase("v2"),
                "members/memberof"
              )
            );
          }
        },
        _ensureModels: function (_) {
          var T = _.context,
            l = T.getModel(i);
          (this.username = "ensured"),
            (this.staticMenuItems = c.profileMenu.collection.toJSON()),
            (_.model = l),
            (_.collection = new n(c.profileMenu, {
              status: { context: T },
              commands: d,
              mask: new h(),
            }));
        },
        _refreshUser: function () {
          this._isRendered && !this.isDestroyed && this.render();
        },
        _refreshActions: function () {
          if (this._isRendered && !this.isDestroyed)
            if (S) {
              var _ = this.options,
                T = m
                  .chain(S)
                  .flatten(!0)
                  .map(function (g) {
                    return g(_);
                  })
                  .value(),
                l = this;
              p.whenAll.apply(p, T).always(function (g) {
                var I = new h();
                (g = m
                  .chain(g)
                  .flatten()
                  .pluck("profileMenu")
                  .flatten()
                  .value()),
                  m.each(g, function (D) {
                    if (D && l.staticMenuItems) {
                      for (var A = !1, B = 0; B < l.staticMenuItems.length; B++)
                        if (l.staticMenuItems[B].group === D.group) A = !0;
                        else if (A) {
                          l.staticMenuItems.splice(B + 1, 0, D);
                          break;
                        }
                      A ||
                        l.staticMenuItems.splice(
                          l.staticMenuItems.length - 1,
                          0,
                          D
                        );
                    }
                  }),
                  (g = l.staticMenuItems.concat([])),
                  (g = I.maskItems(g)),
                  c.profileMenu.reset(g);
              });
            } else this.collection.refilter();
        },
        _triggerMenuItemAction: function (_, T) {
          this.ui.profileDropdownToggler.binf_dropdown("toggle"),
            this._executeAction(T.toolItem);
        },
        _executeAction: function (_) {
          var T = _.get("signature"),
            l = d.findWhere({ signature: T }),
            g = this.options.context,
            I = { context: g, toolItem: _, data: _.get("commandData") },
            D = this;
          try {
            if (!l) throw new Error('Command "' + T + '" not found.');
            this.$el.addClass("binf-disabled"),
              l
                .execute(I)
                .done(function (A) {})
                .fail(function (A) {
                  A &&
                    ((A = new a.Error(A)),
                    k.showMessage("error", A.message, A.errorDetails));
                })
                .always(function () {
                  D.$el.removeClass("binf-disabled");
                });
          } catch (A) {
            r.warn(
              `Executing the command "{0}" failed.
{1}`,
              l.get("signature"),
              A.stack
            ) && console.warn(r.last);
          }
        },
        _displayUser: function () {
          this.model.get("id") &&
            (this._displayProfileImage(), this._assignUserColor());
        },
        _displayProfileImage: function () {
          var _ = this._getUserPhotoUrl();
          if (_) {
            var T = { url: _, dataType: "binary" };
            this.connector.makeAjaxCall(T).always(
              m.bind(function (l, g, I) {
                this.isDestroyed ||
                  (I.status === 200
                    ? this._showPersonalizedImage(l)
                    : this._showDefaultImage());
              }, this)
            );
          } else this._showDefaultImage();
        },
        _getUserPhotoUrl: function () {
          var _ = this.connector.connection,
            T = new e(_.url).getCgiScript(),
            l = this.model.get("photo_url");
          if (l && l.indexOf("?") > 0) return e.combine(T, l);
        },
        _showPersonalizedImage: function (_) {
          this._releasePhotoUrl(),
            (this._photoUrl = URL.createObjectURL(_)),
            this.ui.defaultImage.addClass("binf-hidden"),
            this.ui.personalizedImage
              .attr("src", this._photoUrl)
              .removeClass("binf-hidden"),
            this.$el.parents().find(".esoc-userprofile-pic-actions img")
              .length &&
              this.$el
                .parents()
                .find(".esoc-userprofile-pic-actions img")
                .trigger("focus");
        },
        _showDefaultImage: function (_) {
          this._releasePhotoUrl(),
            this.ui.personalizedImage.addClass("binf-hidden"),
            (this.ui.defaultImage[0].innerText =
              this.options.model.attributes.initials),
            this.ui.defaultImage.removeClass("binf-hidden"),
            this.$el.parents().find(" span.esoc-full-profile-avatar-cursor")
              .length &&
              this.$el
                .parents()
                .find(" span.esoc-full-profile-avatar-cursor")
                .trigger("focus");
        },
        _releasePhotoUrl: function () {
          this._photoUrl &&
            (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
        },
        _closeToggle: function () {
          this.$el.hasClass("binf-open") &&
            this.ui.userProfileMenuHandle.trigger("click");
        },
        _showDropdown: function (_) {
          var T = this.ui.userProfileMenu.find("> li > a"),
            l = 0,
            g = this.$el.find(document.activeElement);
          g.length > 0 &&
            ((l = T.index(g[0])),
            _.keyCode === 38 || _.keyCode === 40
              ? (_.preventDefault(),
                _.keyCode === 38 && (l = l === -1 ? T.length - 1 : l - 1),
                _.keyCode === 40 && (l = l === T.length - 1 ? -1 : l + 1),
                l === -1
                  ? this.ui.profileDropdownToggler.trigger("focus")
                  : p(T[l]).trigger("focus"))
              : _.keyCode === 27 &&
                p(g).closest("ul").is(".csui-profile-dropdown")
              ? (_.stopPropagation(),
                this.ui.profileDropdownToggler
                  .trigger("click")
                  .trigger("focus"))
              : (_.keyCode === 32 || _.keyCode === 13) &&
                (_.preventDefault(),
                _.stopPropagation(),
                p(g).trigger("click")));
        },
        _toggleDropdown: function (_) {
          var T = this;
          setTimeout(function () {
            document.activeElement.offsetParent &&
              !document.activeElement.offsetParent.classList.contains(
                "csui-profile-dropdown"
              ) &&
              document.activeElement !== T.ui.profileDropdownToggler[0] &&
              T.ui.userProfileMenu.is(":visible") &&
              p(T.ui.profileDropdownToggler).trigger("click");
          }, 100);
        },
        _assignUserColor: function () {
          var _ = f.getUserAvatarColor(this.model.attributes);
          this.ui.defaultImage.css("background", _);
        },
      });
      return b;
    }
  ),
  csui.define(
    "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
    [
      "smart/controls/progresspanel/progressbar.maximize/progressbar.maximize.view",
    ],
    function (x) {
      var m = x.extend({
        constructor: function (y) {
          x.prototype.constructor.call(this, y);
        },
      });
      return m;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/logo/logo.view",
    [
      "nuc/lib/underscore",
      "nuc/lib/marionette3",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/url",
      "csui/utils/node.links/node.links",
      "csui/utils/contexts/factories/application.scope.factory",
      "i18n!csui/pages/start/nls/lang",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      const a =
        "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMTIyIDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTYuMTQ3MiAxMC42MTQ4QzE2LjE0NzIgMTQuNDEyNyAxMy45NjMyIDE4LjUzMTkgOC4xMTc3NyAxOC41MzE5QzMuODU0MTMgMTguNTQ3OSAtMS44Mzc3OWUtMDcgMTYuMTM5MSAtMS44Mzc3OWUtMDcgMTAuNjE0OEMtMS44Mzc3OWUtMDcgNi4wMTM5NSAyLjkwNjY2IDIuNDcyOTcgOC42NjM3NyAyLjc4NjEyQzE0Ljc5MDIgMy4xMzEzOSAxNi4xNDcyIDcuODc2NzggMTYuMTQ3MiAxMC42MTQ4Wk01LjIxMTExIDcuNzI0MjNDNC42OTA1NyA4LjU4NzU2IDQuNDMxMjEgOS41ODMxNyA0LjQ2NDM3IDEwLjU5MDdDNC40NjQzNyAxMi45MTkzIDUuNjEyNTggMTUuMDMxIDguMDkzNjggMTUuMDMxQzEwLjU3NDggMTUuMDMxIDExLjY1ODcgMTMuMDg3OSAxMS42NTg3IDEwLjc4MzRDMTEuNzE0NCAxMC4xMTg1IDExLjYzMzUgOS40NDkyNiAxMS40MjA4IDguODE2ODJDMTEuMjA4MiA4LjE4NDM3IDEwLjg2ODMgNy42MDIxNCAxMC40MjIyIDcuMTA1OTZDMTAuMDcyNyA2Ljc5NDA3IDkuNjYwMjYgNi41NjA5NSA5LjIxMjc5IDYuNDIyNDFDOC43NjUzMiA2LjI4Mzg4IDguMjkzMjkgNi4yNDMxNiA3LjgyODcxIDYuMzAzMDFDNy4zMDY0NyA2LjI5MTc5IDYuNzkwMzQgNi40MTY5OCA2LjMzMTI5IDYuNjY2MjJDNS44NzIyMyA2LjkxNTQ2IDUuNDg2MTMgNy4yODAxNCA1LjIxMTExIDcuNzI0MjNWNy43MjQyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik01NS40MjczIDQuNDgwMkM1NS44MzAzIDMuOTc3NjggNTYuMzQwNSAzLjU3MTY2IDU2LjkyMDcgMy4yOTE4NEM1Ny43ODk3IDIuOTQ4MzEgNTguNzE2MyAyLjc3Mzg5IDU5LjY1MDcgMi43Nzc5NkM2MC41NzU4IDIuNzUwMTUgNjEuNDkzNiAyLjk0ODYgNjIuMzI0NiAzLjM1NjA4QzYzLjkzMDQgNC4xNTkwMiA2NC4zMDc4IDUuNTQwMDggNjQuMzA3OCA3Ljg3NjY1VjE4LjE1NDNINTkuOTE1N1Y5LjcxNTM5QzU5Ljk5MTMgOC45NjAwMyA1OS45MjMyIDguMTk3MTggNTkuNzE1IDcuNDY3MTVDNTkuNTQwMSA3LjA5Njk4IDU5LjI1NjcgNi43ODg4NCA1OC45MDI0IDYuNTgzNzJDNTguNTQ4MSA2LjM3ODYxIDU4LjEzOTggNi4yODYyNSA1Ny43MzE3IDYuMzE4OTRDNTUuNDAzMiA2LjMxODk0IDU1LjQwMzIgOC4xODk4IDU1LjQwMzIgMTAuMDYwN1YxOC4xNTQzSDUwLjk2MjlWMy4xNjMzN0g1NS40MjczVjQuNDgwMloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00OC44NTkxIDE0LjI3NjNDNDguNDQ5NiAxNS4xMzU0IDQ3LjE0ODggMTguNTMxOSA0MS4zNzU2IDE4LjUzMTlDMzYuOTExMyAxOC41MzE5IDMzLjc3OTggMTUuODAxOSAzMy43Nzk4IDEwLjg3OThDMzMuNzc5OCA3LjI1MDUxIDM1LjU2MjMgMi43ODYxNCA0MS40OTYxIDIuNzg2MTRDNDIuNDg1OSAyLjcwNTMzIDQzLjQ4MTUgMi44Mzg0NyA0NC40MTUzIDMuMTc2NTJDNDUuMzQ5MSAzLjUxNDU3IDQ2LjE5OTIgNC4wNDk2MiA0Ni45MDc5IDQuNzQ1MzJDNDguODY3MSA2Ljg0OTAzIDQ4Ljk3OTUgOS43Nzk3OCA0OS4wMzU3IDExLjQ4MkgzOC4zMDA0QzM4LjMwMDQgMTMuMzUyOSAzOS4zMzYyIDE1LjIyMzcgNDEuNzIwOSAxNS4yMjM3QzQ0LjEwNTYgMTUuMjIzNyA0NC45MzI3IDEzLjYxNzkgNDUuNTE4OCAxMi41NzRMNDguODU5MSAxNC4yNzYzWk00NC40NTg5IDguNzE5ODlDNDQuNDMwMiA3Ljk0MjExIDQ0LjE0ODMgNy4xOTQ5OCA0My42NTYgNi41OTIwOUM0My4wNjQ3IDYuMDU4OTQgNDIuMjkyMSA1Ljc3MTczIDQxLjQ5NjEgNS43ODkxNUM0MS4wNzM5IDUuNzg3NTQgNDAuNjU2IDUuODczOCA0MC4yNjg5IDYuMDQyNDRDMzkuODgxOSA2LjIxMTA5IDM5LjUzNDEgNi40NTg0MyAzOS4yNDc4IDYuNzY4NzRDMzguNzcgNy4zMzI3NSAzOC40NjEgOC4wMjAyIDM4LjM1NjYgOC43NTIwMUw0NC40NTg5IDguNzE5ODlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTEwLjQ3NyA2LjI3MDk5SDExMy40MjRWMy4xNjM2SDExMC41MTdWLTMuMDYyOTllLTA3SDEwNi4xMTdWMy4xNTU1N0gxMDUuMzk0TDEwMy4zNzkgNi4yNzA5OUgxMDYuMDkzVjEzLjQwOTJDMTA2LjA5MyAxNC44NDY0IDEwNi4wOTMgMTUuOTE0NCAxMDYuNzI3IDE2LjgwNTZDMTA3LjY3NSAxOC4xODY3IDEwOS4zNDUgMTguMjc1IDExMC44NyAxOC4yNzVDMTExLjY1MiAxOC4yNjE4IDExMi40MyAxOC4xODM5IDExMy4xOTkgMTguMDQyMlYxNC41ODk1TDExMS41OTMgMTQuNjQ1N0MxMTAuNDEzIDE0LjY0NTcgMTEwLjQxMyAxMy44NDI4IDExMC40NDUgMTIuOTUxNUwxMTAuNDc3IDYuMjcwOTlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjYuNTIzNyAtMy4wNjI5OWUtMDdINzAuOTIzOFYzLjE1NTU3SDc1LjUwMDZMNzMuNDg1MiA2LjI3MDk5SDcwLjg2NzZWMTIuOTI3NEM3MC44Njc2IDEzLjg1MDggNzAuODY3NiAxNC42MjE2IDcyLjAxNTggMTQuNjIxNkw3My42MjE3IDE0LjU2NTRWMTguMDE4MUM3Mi44NTMzIDE4LjE1OTggNzIuMDc0NCAxOC4yMzc3IDcxLjI5MzEgMTguMjUwOUM2OS43Njc1IDE4LjI1MDkgNjguMDgxNCAxOC4xNjI2IDY3LjE1IDE2Ljc4MTVDNjYuNTQ3NyAxNS44OTAzIDY2LjUxNTYgMTQuODIyMyA2Ni41MTU2IDEzLjM4NTFMNjYuNTIzNyAtMy4wNjI5OWUtMDdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTE3LjQ5NSA2LjI3MDk3SDExNi45NDlWMy42MjEyNUgxMTUuOTQ1VjMuMTYzNTdIMTE4LjQ3NVYzLjYyMTI1SDExNy40ODdMMTE3LjQ5NSA2LjI3MDk3Wk0xMjEuNzU5IDYuMjcwOTdIMTIxLjIyMVY0LjM1MTkzVjMuNzE3NjFMMTIxLjA2OCA0LjIzOTUyTDEyMC40MzQgNi4yNzA5N0gxMTkuOTQ0TDExOS4zMTggNC4yMzk1MkwxMTkuMTU3IDMuNzI1NjRWNC4zNTE5M1Y2LjI3MDk3SDExOC42MzVWMy4xNjM1N0gxMTkuMzc0TDEyMC4xNzcgNS42MjA1OEwxMjAuOTQgMy4xNjM1N0gxMjEuNjc4TDEyMS43NTkgNi4yNzA5N1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04OS4zMzU2IDE0LjI4NDNMODguNTMyNyAxNS41ODVDODcuNzI5OCAxNi43NDEzIDg2LjI2MDQgMTguNTIzOCA4Mi4wMDQ4IDE4LjUyMzhDNzcuNTQwNCAxOC41MjM4IDc0LjU0NTQgMTUuNzkzOCA3NC41NDU0IDEwLjg3MThDNzQuNTQ1NCA3LjI0MjQ1IDc2LjMyNzkgMi43NzgwOCA4Mi4yNjE3IDIuNzc4MDhDODMuMjUxNSAyLjY5NzI3IDg0LjI0NzEgMi44MzA0MSA4NS4xODA5IDMuMTY4NDZDODYuMTE0NyAzLjUwNjUyIDg2Ljk2NDggNC4wNDE1NiA4Ny42NzM1IDQuNzM3MjZDODkuNjMyNyA2Ljg0MDk4IDg5Ljc0NTEgOS43NzE3MiA4OS44MDE0IDExLjQ3NEg3OS4wNjZDNzkuMDY2IDEzLjM0NDggNzkuOTY1MyAxNS4yMTU3IDgyLjM1IDE1LjIxNTdDODQuNzM0OCAxNS4yMTU3IDg1LjQ2NTUgMTMuNjA5OCA4Ni4wMTE1IDEyLjU2Nkw4OS4zMzU2IDE0LjI4NDNaTTg1LjE4NDQgOC43MTk4N0M4NS4xNTU3IDcuOTQyMDggODQuODczNyA3LjE5NDk1IDg0LjM4MTUgNi41OTIwN0M4My43OTAyIDYuMDU4OTEgODMuMDE3NiA1Ljc3MTcgODIuMjIxNiA1Ljc4OTEyQzgxLjc5OTQgNS43ODc1MSA4MS4zODE0IDUuODczNzcgODAuOTk0NCA2LjA0MjQyQzgwLjYwNzMgNi4yMTEwNiA4MC4yNTk2IDYuNDU4NCA3OS45NzMzIDYuNzY4NzFDNzkuNDk1NCA3LjMzMjcyIDc5LjE4NjUgOC4wMjAxNyA3OS4wODIgOC43NTE5OEw4NS4xODQ0IDguNzE5ODdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTA0LjQ2MyAxOC4xNTQ1TDk4Ljk1NDcgMTAuMjYxNkwxMDMuNTQ4IDMuMTU1NTJIOTguNTA1TDk2LjMzNzEgNi41MTE4Mkw5NC4wMDA1IDMuMTU1NTJIODguOTU4TDkzLjkxMjIgMTAuMjYxNkw4OC44MTM1IDE4LjE1NDVIOTMuODU2TDk2LjUyOTggMTQuMDExM0w5OS40MjA0IDE4LjE1NDVIMTA0LjQ2M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMi4yMzM3IDQuNDgwNDlDMjIuNzE1MiAzLjkxMjY2IDIzLjMyMTggMy40NjQxNiAyNC4wMDU5IDMuMTcwMjFDMjQuNjg5OSAyLjg3NjI1IDI1LjQzMjggMi43NDQ4NCAyNi4xNzYxIDIuNzg2MjhDMjkuODYxNyAyLjc4NjI4IDMyLjQ0NzEgNS41ODA1MiAzMi40NDcxIDEwLjU4MjlDMzIuNDQ3MSAxMy42NTgxIDMxLjMyMyAxOC41MjQgMjYuMDIzNiAxOC41MjRDMjUuMzA2OSAxOC41NDA4IDI0LjU5NTQgMTguMzk3NCAyMy45NDEyIDE4LjEwNDNDMjMuMjg2OSAxNy44MTEyIDIyLjcwNjMgMTcuMzc1OCAyMi4yNDE3IDE2LjgyOThWMjMuMTE2OEgxNy43NzczVjMuMTYzNjZIMjIuMjQxN0wyMi4yMzM3IDQuNDgwNDlaTTI1LjIyODcgNi4yMzg5NEMyNC43ODg2IDYuMjM3MDcgMjQuMzU0MiA2LjMzNzY3IDIzLjk1OTggNi41MzI3OEMyMy41NjU0IDYuNzI3OSAyMy4yMjE4IDcuMDEyMTYgMjIuOTU2MyA3LjM2MzA2QzIyLjI5MjIgOC4zMjc3NCAyMS45NjczIDkuNDg1NzYgMjIuMDMyOSAxMC42NTUxQzIxLjk1MDEgMTEuODk4NCAyMi4zMzA1IDEzLjEyODQgMjMuMTAwOSAxNC4xMDc4QzIzLjM1MTEgMTQuMzkyOSAyMy42NTgzIDE0LjYyMjMgMjQuMDAyNyAxNC43ODE0QzI0LjM0NyAxNC45NDA0IDI0LjcyMDkgMTUuMDI1NSAyNS4xMDAyIDE1LjAzMTJDMjcuMjYwMSAxNS4wMzEyIDI4LjIwNzYgMTIuNzU4OCAyOC4yMDc2IDEwLjU1ODhDMjguMjA3NiA4LjcxMiAyNy42NjE2IDYuNzUyODIgMjUuODQ2OSA2LjMyNzI2QzI1LjY0NTMgNi4yNzMwOSAyNS40Mzc0IDYuMjQ2MDkgMjUuMjI4NyA2LjI0Njk3VjYuMjM4OTRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K";
      return m.View.extend({
        tagName: "otc-brand",
        attributes: function () {},
        template: !1,
        constructor: function (i = {}) {
          m.View.apply(this, arguments),
            (this.brandingConfigData = this.options.context.getModel(p));
          var o = this.options?.context?._user?.connector;
          if (((this.logoUrl = "/"), o)) {
            let n = new y(o?.connection?.url ?? location.href);
            this.logoUrl = s.getHomeUrl(n);
          }
          (this.otcData = {
            logosrc: "/img/csui/themes/carbonfiber/image/csui/headerbar_content_suite_platform.svg",
            logourl: this.logoUrl,
            tooltipbrand: "",
            primarytext: "",
            secondarytext: "",
            versiontext: "",
          }),
            this.updateData(),
            this.listenTo(
              this.brandingConfigData,
              "change:branding",
              this.updateData
            ),
            this.listenTo(
              this.options.context,
              "sync:perspective",
              this.updateData
            ),
            (this.performClickAction = !1);
        },
        onShow: function () {
          this.options?.otcEl?.addEventListener(
            "click",
            x.bind(this._onClick, this)
          );
        },
        _onClick: function (t) {
          this.applicationScope.set("id", "");
        },
        updateData: function () {
          let t = this.options?.context?.previewBranding?.get(
              "brandingSettingCodes"
            ),
            i = this?.options?.context?.brandingConfigData?.get(
              "brandingSettingCodes"
            ),
            o = t?.customBrandingBgColor ?? i?.customBrandingBgColor ?? "",
            n = t?.primaryText ?? i?.primaryText ?? "",
            u = t?.secondaryText ?? i?.secondaryText ?? "",
            c = t?.versionText ?? i?.versionText ?? "",
            h =
              this?.options?.context?.previewBranding?.get("brandLogoUri") ??
              this?.options?.context?.brandingConfigData?.get("brandLogoUri");
          (h = h?.length ? h : a),
            (this.applicationScope =
              this.options?.applicationScope ??
              this.options.context.getModel(e));
          let f = this?.applicationScope?.id?.length ? this.logoUrl : "",
            k = this?.applicationScope?.id?.length ? r.LandingPageBackTo : "";
          (this.otcData = {
            logosrc: "/img/csui/themes/carbonfiber/image/csui/headerbar_content_suite_platform.svg",
            logourl: f,
            tooltipbrand: "",
            primarytext: "",
            secondarytext: "",
            versiontext: "",
            backgroundColor: o,
          }),
            this.trigger("data:synced");
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/impl/nls/lang",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/impl/nls/root/lang",
    {
      placeholder: "Search",
      clearerTitle: "Clear keywords",
      searchBoxTitle: "Enter your search term",
      searchOptionsTitle: "Show search options",
      searchOptionsHideTitle: "Hide search options",
      searchFromHere: "Search from here",
      searchIconTitle: "Search",
      searchIconAria: "Search in OpenText Content Management",
      searchOptionTooltip: "Select: {0}",
      startSearch: "Start search",
      searchLandmarkAria: "Global content search",
      searchWithinLabel: "Search within",
      showMore: "Show more",
      showMoreAria: "Show more slices",
      closeSearch: "Close search",
      tooltipstartsearch: "Start search",
      tooltipclearkeywords: "Clear keywords",
      tooltipsearchbutton: "Search",
      tooltipsearchbuttonopen: "Close search",
      arialabelsearchbutton: "Global search",
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/search.box/impl/search.box",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/search.box/search.box.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette3",
      "csui/lib/backbone",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/search.query.factory",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/contexts/factories/search.box.factory",
      "csui/utils/contexts/factories/next.node",
      "csui/utils/namedsessionstorage",
      "csui/widgets/search.forms/search.forms",
      "csui/utils/namedlocalstorage",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/utils/contexts/factories/search.formquery.factory",
      "i18n!csui/controls/app.header/app.header.controls/search.box/impl/nls/lang",
      "css!csui/controls/app.header/app.header.controls/search.box/impl/search.box",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c, h) {
      var f = m.defaults({}, x.config() ?? {}, { enableSearchBarSettings: !0 });
      return y.View.extend({
        template: !1,
        namedSessionStorage: new i(),
        namedLocalStorage: new n("search_bar_settings"),
        performClickAction: !1,
        constructor: function (S = {}) {
          (S.data = m.defaults({}, S.data ?? {}, f)),
            y.View.prototype.constructor.apply(this, arguments);
          var w = this.options.context;
          if (!this.options.model) {
            let v = w.getModel(r);
            (this.options.model = v), (this.model = v);
          }
          (this.applicationScope = w.getModel(a)),
            (this.searchBoxFactory = w.getFactory(d)),
            (this.searchboxModel = this.searchBoxFactory.property),
            (this.searchForms = new o({
              options: this.options,
              connector: this.searchboxModel && this.searchboxModel.connector,
              originatingView: this,
            })),
            (this.brandingConfigData = this.options.context.getModel(u)),
            (this.otcData = { query: "", showFromHere: !1, isFetched: !0 }),
            (this.deferred = p.Deferred()),
            this.updateData(),
            this.listenTo(w, "sync:perspective", this._perspectiveSynced),
            this.listenTo(w, "change:current:node", this._currentNodeChanged),
            this.listenTo(this.searchboxModel, "change", this.setOTCData),
            this.listenTo(
              this.searchboxModel,
              "change",
              this.updateSearchBarSettings
            ),
            (this.nextmodel = this.options.context.getModel(t)),
            this.listenTo(this, "form:click", this._formClick),
            this.listenTo(this, "slice:click", this._sliceClick),
            this.listenToOnce(this, "fetch:data", this._dataSynced),
            this.listenTo(this, "perform:search", this.performSearch),
            this.listenTo(this, "more:forms:click", this._moreFormsCicked),
            this.stopListening(this.nextmodel, "change:id").listenTo(
              this.nextmodel,
              "change:id",
              this._changeLocation
            ),
            this.options.otcEl.addEventListener(
              "open",
              m.bind(this._onOpen, this)
            ),
            (this.firstOpen = !0);
        },
        _onOpen: function () {
          this.firstOpen &&
            (this._updateInput(),
            this.trigger("data:synced"),
            (this.firstOpen = !1));
        },
        onDestroy: function () {
          this.options.otcEl.removeEventListener(
            "open",
            m.bind(this._onOpen, this)
          );
        },
        performSearch: function (C, S) {
          let w = C.detail.searchstring;
          w &&
            (this._setSearchQuery(w, S, C),
            this._updateInput(),
            this.trigger("data:synced"));
        },
        _changeLocation: function () {
          this.trigger("collapse:search");
        },
        _updateInput: function () {
          var C = this.model.get("where") || "";
          this.otcData.query = C;
        },
        updateData: function () {
          (this.otcData = m.extend(this.otcData, {
            tooltipstartsearch: h.tooltipstartsearch,
            tooltipclearkeywords: h.tooltipclearkeywords,
            tooltipsearchbutton: h.tooltipsearchbutton,
            tooltipsearchbuttonopen: h.tooltipsearchbuttonopen,
            arialabelsearchbutton: h.arialabelsearchbutton,
          })),
            this.trigger("data:synced");
        },
        updateSearchBarSettings: function () {
          if (
            ((this.search_bar_settings = this.searchboxModel.get(
              "search_bar_settings"
            )),
            this.search_bar_settings &&
              this.search_bar_settings.full_text &&
              (this.namedLocalStorage.set(
                "full_text",
                this.search_bar_settings.full_text
              ),
              this.model))
          ) {
            var C =
              this.search_bar_settings && this.search_bar_settings.full_text;
            this.model.set("modifier", C.modifier, { silent: !0 }),
              this.model.set("lookfor", C.lookfor, { silent: !0 });
          }
        },
        _formClick: function (C) {
          (this.hideBackButton = !0),
            this.searchForms.isModelFetched(p(C.target).attr("formId"));
        },
        _moreFormsCicked: function (C) {
          (this.hideBackButton = !1),
            (this.searchForms.isKeyPress =
              C.keyCode === 13 || C.keyCode === 32),
            this.searchForms.openFormInSidepanel(
              this.searchboxModel.get("search_forms")
            );
        },
        _sliceClick: function (C) {
          if (p(C.target).attr("checked")) {
            let w = "{" + p(C.target).attr("sliceId") + "}";
            this.namedLocalStorage.set("selectedSlice", w);
          } else this.namedLocalStorage.remove("selectedSlice");
        },
        _perspectiveSynced: function (C, S) {
          this._currentNodeChanged(S);
        },
        _currentNodeChanged: function (C) {
          C instanceof e && (C.get("container") || C.get("type") === 5574)
            ? ((this.searchboxModel.nodeId = C.get("id")),
              (this.searchboxModel.nodeName = C.get("name")),
              this.namedSessionStorage.set(
                this.searchboxModel.nodeId,
                this.searchboxModel.nodeName
              ),
              this.searchboxModel.trigger("change"))
            : ((this.searchboxModel.nodeId = void 0),
              (this.searchboxModel.nodeName = void 0),
              this.searchboxModel.trigger("change"));
        },
        _getSliceString: function () {
          let C = "";
          return (
            this?.namedLocalStorage?.get("selectedSlice") &&
              (C = this?.namedLocalStorage?.get("selectedSlice")),
            C
          );
        },
        _setSearchQuery: function (C, S, w) {
          let v = this._getSliceString();
          this.model.clear({ silent: !0 }),
            this.options.context.getModel(c).clear({ silent: !0 });
          var b = {};
          v && (b.slice = v), S && (b.location_id1 = S), C && (b.where = C);
          var _ =
            this.search_bar_settings && this.search_bar_settings.full_text;
          _ &&
            (_.modifier || _.lookfor) &&
            ((b.modifier = _.modifier), (b.lookfor = _.lookfor)),
            this.model.set(b);
        },
        _dataSynced: function (C, S) {
          var w = this;
          this.searchboxModel &&
            ((this.options.data && this.options.data.alwaysFetchDropdown) ||
              !(this.searchboxModel && this.searchboxModel.fetched)) &&
            this.searchBoxFactory.fetch().then(
              () => {
                w.deferred.resolve();
              },
              () => {
                w.deferred.reject();
              }
            ),
            w.deferred.promise().then(
              () => {
                w.otcData.isFetched = !0;
              },
              () => {
                (w.otcData.isFetched = !1), w.trigger("data:synced");
              }
            );
        },
        setOTCData: function (C) {
          if (this.otcData.isFetched) {
            if (!this.searchboxModel.nodeId) {
              var S =
                m.has(this.options, "context") &&
                this.options.context.getModel(t);
              S &&
                S instanceof e &&
                (S.get("container") || S.get("type") === 5574) &&
                ((this.searchboxModel.nodeId = S.get("id")),
                (this.searchboxModel.nodeName = S.get("name")),
                this.namedSessionStorage.set(
                  this.searchboxModel.nodeId,
                  this.searchboxModel.nodeName
                ));
            }
            if (
              (!this.searchboxModel.nodeId &&
                this.model.get("location_id1") &&
                ((this.searchboxModel.nodeId = this.model.get("location_id1")),
                this.namedSessionStorage.get(this.searchboxModel.nodeId) &&
                  (this.searchboxModel.nodeName = this.namedSessionStorage.get(
                    this.searchboxModel.nodeId
                  ))),
              (this.searchOptions = {}),
              this.searchboxModel.nodeId &&
                ((this.searchOptions.nodeId = this.searchboxModel.nodeId),
                !this.searchboxModel.nodeName &&
                  this.options.data.nodeName &&
                  (this.searchboxModel.nodeName = this.options.data.nodeName),
                this.searchboxModel.nodeName &&
                  (this.searchOptions.nodeName = this.searchboxModel.nodeName)),
              this.searchboxModel.get("slices") &&
                (this.searchOptions = m.extend(
                  this.searchOptions,
                  this.searchboxModel.attributes
                )),
              (this.otcData.slices = this.searchOptions?.slices),
              this.searchOptions?.nodeName
                ? (this.otcData.location = {
                    locationId: this.searchOptions?.nodeId,
                    locationName: this.searchOptions?.nodeName,
                  })
                : (this.otcData.location = void 0),
              (this.otcData.forms =
                this.searchOptions?.search_forms?.recent_search_forms ?? []),
              this.namedLocalStorage.get("selectedSlice"))
            ) {
              let w = this.namedLocalStorage.get("selectedSlice");
              (selectedSliceID = w.substring(1, w.length - 1)),
                (this.otcData.selectedSlice = selectedSliceID);
            }
            this.trigger("data:synced");
          }
        },
        onRender: function () {
          // Explorer Insight START
          var globalthis = this;
          var wID = "teststst-secure";

          async function showAviator() {
              let that = globalthis;
              let activeController = false;
              let ticket = that.options.context._user.connector.connection.session.ticket;
              let userID = that.options.context._user.attributes.id;
              let CHAT_ID = null;
              let paginations = {chatHistory: {now: 1, max: null}, chat: {now: 1, max: null}};
              const PERSON_NAME = that.options.context._user.attributes.name;
              const COPY_IMG = "/img/csui/themes/carbonfiber/image/icons/aviator_toolbar_copy.svg"
              const GENERATE_IMG = "/img/csui/themes/carbonfiber/image/icons/aviator_generate.svg"
              const CLOSE_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_smart_close.svg";
              const DOUBLE_ARROWS = "/img/csui/themes/carbonfiber/image/icons/aviator_double_arrow.svg";
              const CHAT_LOGO = "/img/csui/themes/carbonfiber/image/icons/aviator_chat.svg";
              const DELETE_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_delete.svg";
              const INFO_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_info.svg";
              const REFRESH_BLUE_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_refresh_blue.svg";
              const PROJECT_LOGO = "/img/csui/themes/carbonfiber/image/icons/aviator_project.svg";
              const LOGO = "/img/csui/themes/carbonfiber/image/icons/aviator.png";
              const FOLDER_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_folder.svg";
              const FILE_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_file.svg";
              const REFRESH_ICON = "/img/csui/themes/carbonfiber/image/icons/aviator_refresh.svg";
              const BOT_IMG = "/img/csui/themes/carbonfiber/image/icons/aviator_bot.svg";
              let PERSON_IMG = `/otcs/cs.exe/${that.options.context._user.attributes.photo_url}`;

              function appendMessage(side, text, date = null, appendOnFirstChild = false, metadata = null) {
                let msgHTML;
                const msgerChat = get(".msger-chat");
                const uniqueId = new Date().getTime();

                if(date == null) {
                  date = new Date();
                }

                msgHTML = `<div id="msg-${uniqueId}" class="msg ${side}-msg">`;
                if(side == "left")
                {
                    msgHTML += `
                    <div class="msg-img" style="background-image: url(${BOT_IMG}); margin-top: 20px; display: inherit;"></div>
                    <div style="max-width:85%;background-color: #F4F4F4; width:fit-content;" class="msg-bubble">
                      <div class="msg-info"></div>
                      <div style="white-space: pre-line;" id="bot-text-${uniqueId}" class="msg-text">${text}</div>

                      ${AIPlusUtils.processChatMetadata(uniqueId, metadata)}

                      <div class="msg-container" id="chat-tools-${uniqueId}" style="flex-direction: row; justify-content: flex-start;">
                        <div id="chat-copy-${uniqueId}" class="tooltip" style="background-image: url(${COPY_IMG}); cursor: pointer; width: 20px; height: 20px; margin-top: 10px; margin-left: 10px;">
                          <span class='chatbottooltip'>Copy</span>
                        </div>
                        <div data-id="${uniqueId}" id="chat-regenerate-${uniqueId}" class="tooltip" style="background-image: url(${GENERATE_IMG}); cursor: pointer; width: 20px; height: 20px; margin-top: 10px; margin-left: 10px;">
                          <span class='chatbottooltip'>Regenerate</span>
                        </div>
                      </div>
                    </div>
                    </div>
                `;
                } else if(side == "loading") {
                    msgHTML = `
                    <div id="botloading" class="msg ${side}-msg">
                    <div class="msg-img" style="background-image: url(${BOT_IMG}); margin-top: 20px; display: inherit;"></div>
    
                    <div style="max-width:85%;background-color: #F4F4F4; width:fit-content;" class="msg-bubble">
                        <div class="msg-info">
                        </div>
    
                        <div class="msg-text">
                          <div class="dot"></div>
                          <div class="dot"></div>
                          <div class="dot"></div>
                        </div>
                    </div>
                    </div>`;
                } else if(side == "right") {
                    if(that.options.context._user.attributes.photo_url != null) {
                      msgHTML += `<div class="msg-img" style="background-image: url(${PERSON_IMG}); margin-top: 20px; display: inherit;"></div>`;
                    }

                    msgHTML += `
                    <div style="max-width:85%;">
                        <div class="msg-info">
                        <div class="msg-info-name"></div>
                        <div class="msg-info-time">${PERSON_NAME} ${formatDate(date)}</div>
                        </div>
    
                        <div style="display:block; width:fit-content; word-wrap:break-word; overflow-wrap:break-word; white-space:normal; background-color:#99e3e3; margin-left:auto; margin-right:0; text-align:right;" class="msg-bubble"><div style="word-wrap:break-word; overflow-wrap:break-word; white-space:pre-line; color:black; text-align:left;" class="msg-text">${text}</div></div>
                    </div>
                    </div>
                `;
                }

                if(appendOnFirstChild) {
                  AIPlusUtils.toggleInitialMsg(false);
                  msgerChat.insertAdjacentHTML("afterbegin", msgHTML);
                } else {
                  msgerChat.insertAdjacentHTML("beforeend", msgHTML);
                }

                let botChatDivEl = document.getElementById(`chat-copy-${uniqueId}`);
                
                if(botChatDivEl) {
                  const copyTooltip = document.querySelector(`#chat-copy-${uniqueId} .chatbottooltip`);

                  botChatDivEl.addEventListener("click", (e) => {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    const el = document.createElement("textarea");
                    el.value = document.getElementById(`bot-text-${uniqueId}`).textContent;
                    document.body.appendChild(el);
                    el.select();
                    document.execCommand("copy");
                    document.body.removeChild(el);
                    copyTooltip.textContent = "Copied!";

                    setTimeout(() => {
                      copyTooltip.textContent = "Copy";
                    }, 3000);
                    
                    botChatDivEl.addEventListener("mouseenter", () => {
                      copyTooltip.textContent = "Copy";
                    });
                  });
                  
                  document.getElementById(`chat-regenerate-${uniqueId}`).addEventListener("click", (e) => {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    let userTextDIvEl = document.querySelector(`#msg-${e.target.dataset.id}`).previousElementSibling.querySelector(".msg-text");
                    document.getElementById('submitquestion').style.display = 'none';
                    document.getElementById('chatbotstop').style.display = '';
                    appendMessage("right", userTextDIvEl.innerHTML);
                    botResponse(userTextDIvEl.innerHTML);
                  });
                }

                msgerChat.scrollTop += 500;
                return uniqueId;
              } 

                  // Utils
                  function clearChats() {
                    AIPlusUtils.toggleInitialMsg(true);
                    CHAT_ID = null;

                    const chat = document.querySelector('.msger-chat');
                    [...chat.children].slice(1).forEach(child => child.remove());

                    messageEle.value = "";
                    counterEle.innerHTML = `0/${maxLength}`;
                    if(document.getElementById("submitquestion")) {
                      document.getElementById("submitquestion").disabled = true;
                    }
                    AIPlusUtils.reRenderChatRooms();
                  }
                  function get(selector, root = document) {
                      return root.querySelector(selector);
                  }

                  function formatDate(date) {
                      const h = "0" + date.getHours();
                      const m = "0" + date.getMinutes();

                      return `${h.slice(-2)}:${m.slice(-2)}`;
                  }

                  function createChatbotElement() {
                    const aiChatBotEl = document.createElement("div");

                    aiChatBotEl.id = "aichatbottable";
                    aiChatBotEl.classList.add("msger-container");
                    aiChatBotEl.innerHTML = `
                        <section class="msger-table" style="font-size: 14px; font-style: unset;">
                          <div style="display: flex;height:100%" class="msger-main-content">
                            <div id="mySidenav" class="sidenav">
                              <header class="msger-header">
                                <div class="msger-header-title" id="chatbotmenu">
                                  <div style="
                                      font-size: 19px;
                                      font-weight: 600;
                                      font-family: 'OpenText Sans';
                                      color: #2c3e50;
                                      display:inline-block;
                                      vertical-align:middle
                                      ">Tools</div>
                                </div>

                                <button title="Hide sidebar" class="msger-img-btn" style="background-image:url(${DOUBLE_ARROWS})"></button>
                              </header>
                              
                              <div style="margin:5px 5px;height:calc(100% - 70px);overflow:hidden;padding-bottom:110px">
                                <button class="chat-sidenav-title hoverable msger-btn" style="display:block;width:100%">
                                  <img src="${CHAT_LOGO}" style="width:14px" />
                                  <strong>&nbsp;Chats</strong>
                                </button>
                                <button class="chat-sidenav-title hoverable msger-btn" style="display:block;width:100%">
                                  <img src="${PROJECT_LOGO}" style="width:14px" />
                                  <strong>&nbsp;Projects</strong>
                                  </button>
                                <br>
                                <div class="chat-sidenav-sub-title" style="border-top:1px solid black;display:flex;justify-content:space-between;align-items:center;">
                                  <strong>Your chats</strong>
                                  <button title="Refresh conversations" id="chat-refresh" class="msger-btn"><img width="12px" src="${REFRESH_ICON}" /></button>
                                  <img id="chat-refresh-animation" src="${REFRESH_BLUE_ICON}" width="16px" class="spin-animation" style="display:none" />
                                </div>
                                <div id="chat-room-container" class="msger-scroll" style="overflow:scroll;height:96%;"></div>
                              </div>
                            </div>

                            <div class="msger-chat-container" style="position:relative;min-height: 0;">
                              <div id="msger-dropzone" class="msger-dropzone">
                                <span class="msger-drop-text">Drop files here</span>
                              </div>
                              
                              <div style="position:absolute;background-color:rgba(0,0,0,.2);bottom:0;right:0;left:0;top:46px;display:none" class="load-container" id="msger-chat-container-loader">
                                  <div class="outer-border">
                                    <div class="loader">
                                      <svg class="spinner spinner-inner" xmlns="http://www.w3.org/2000/svg" width="73" height="73" viewBox="0 0 73 73" fill="none">
                                        <path d="M36.5 8.79752C51.7874 8.79752 64.2025 21.2126 64.2025 36.5C64.2025 51.7874 51.7874 64.2025 36.5 64.2025C21.2126 64.2025 8.79753 51.7874 8.79753 36.5C8.79753 21.2126 21.2126 8.79752 36.5 8.79752ZM72.5 36.5C72.5 16.63 56.37 0.5 36.5 0.5C16.63 0.5 0.499999 16.63 0.499999 36.5C0.499999 56.37 16.63 72.5 36.5 72.5C56.37 72.5 72.5 56.37 72.5 36.5Z" fill="#CFDCFC" style="fill:#CFDCFC;fill:color(display-p3 0.8118 0.8627 0.9882);fill-opacity:1;"></path>
                                        <clipPath id="smart_loader_1764047844677">
                                          <path d="M40.6488 4.64876C40.6488 2.35746 38.7913 0.5 36.5 0.5C16.63 0.5 0.500007 16.63 0.500007 36.5C0.500007 56.37 16.63 72.5 36.5 72.5C56.37 72.5 72.5 56.37 72.5 36.5C72.5 34.2087 70.6425 32.3512 68.3512 32.3512C66.0599 32.3512 64.2025 34.2087 64.2025 36.5C64.2025 51.7874 51.7874 64.2025 36.5 64.2025C21.2126 64.2025 8.79753 51.7874 8.79753 36.5C8.79753 21.2126 21.2126 8.79752 36.5 8.79752C38.7913 8.79752 40.6488 6.94006 40.6488 4.64876Z" style=""></path>
                                        </clipPath>
                                        <foreignObject width="73" height="73" clip-path="url(#smart_loader_1764047844677)">
                                          <div class="spinner-gradient"></div>
                                        </foreignObject>
                                      </svg>
                                    </div>
                                    <div class="binf-sr-only" aria-live="polite" aria-busy="true">
                                      Loading..
                                    </div>
                                  </div>
                                </div>

                                <header class="msger-header" style="border-left:1px solid whitesmoke">
                                <div class="msger-header-title" id="chatbotmenu">
                                <img src="${LOGO}" style="width:22px;height:22px;display:inline-block;vertical-align:middle;margin-right:10px" />
                                
                                <div style="
                                font-size: 18px;
                                font-weight: 600;
                                font-family: 'OpenText Sans';
                                color: #2c3e50;
                                display:inline-block;
                                vertical-align:middle
                                ">Aviator</div>
                                  </div>
                                  
                                  <div class="msger-header-options">
                                  <button title="Close" id="closeaviator" class="msg-img msger-img-btn">
                                  <img src="${CLOSE_ICON}" />
                                  </button>
                                  </div>
                                </header>

                                <main class="msger-chat msger-scroll" id="chat-wrapper" style="padding-left:20px;position:relative"></main>
                                
                                <div id="files-container"></div>
                                <div class="chat-container" style="display: flex; flex-direction: column; gap: 10px; margin: 10px; padding: 10px; background-color: #f5f5f5; border-radius: 8px; font-family: 'Inter', sans-serif;">
                                    <!-- Chat Input -->
                                    <textarea id="chatarea" class="msger-input" rows="1" maxlength="2000" minlength="0" placeholder="Ask me something..." style="width: 100%; padding: 10px; border: none; background: transparent; resize: none; outline: none; font-family: inherit; font-size: 16px; min-height: 20px; max-height: 40px; overflow-y: auto;"></textarea>
                                
                                    <!-- Inline Buttons -->
                                    <div style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                                        <!-- Clear Button with "New Chat" Text -->
                                        <div id="clearbtn" class="clear-button" style="display: flex; align-items: center; gap: 6px; padding: 8px 12px; background-color: #fff; border: 1px solid #ddd; border-radius: 20px; cursor: pointer;">
                                            <svg fill="#000000" width="18px" height="18px" viewBox="0 0 512 512" id="_35_Compose" data-name="35 Compose" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path id="Path_46" data-name="Path 46" d="M480,512H32A31.991,31.991,0,0,1,0,480V32A31.991,31.991,0,0,1,32,0H352L288,64H64V448H448V224l64-64V480A31.991,31.991,0,0,1,480,512ZM128,384V288L416,0h32l64,64V96L224,384ZM272,272,448,96,416,64,240,240Zm-80,16-32,32v32h32l32-32Z" fill-rule="evenodd"></path> </g></svg>
                                            <span style="font-size: 14px; color: #333;">New Chat</span>
                                        </div>
                                
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                          <div style="display: flex; align-items: center; gap: 4px; margin-right: 10px;">
                                            <input type="checkbox" id="enable-tools" style="width:14px">
                                            <label for="enable-tools"> Enable Tools</label>
                                            <div style="margin-left:2px" title="Turn on document tools"><img src="${INFO_ICON}" width="12px" /></div>
                                          </div>
                                          <div style="margin-right: 10px;" id="counter">0/2000</div>
                                
                                            <!-- File Input -->
                                            <label for="file-input" class="icon-button" style="cursor: pointer;">
                                                <svg width="20" height="20" viewBox="0 0 448 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M364.2 83.8c-24.4-24.4-64-24.4-88.4 0l-184 184c-42.1 42.1-42.1 110.3 0 152.4s110.3 42.1 152.4 0l152-152c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-152 152c-64 64-167.6 64-231.6 0s-64-167.6 0-231.6l184-184c46.3-46.3 121.3-46.3 167.6 0s46.3 121.3 0 167.6l-176 176c-28.6 28.6-75 28.6-103.6 0s-28.6-75 0-103.6l144-144c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-144 144c-6.7 6.7-6.7 17.7 0 24.4s17.7 6.7 24.4 0l176-176c24.4-24.4 24.4-64 0-88.4z" fill="#333"></path>
                                                </svg>
                                            </label>
                                            <input style="display: none;" id="file-input" type="file" accept="image/png, .pdf">
                                
                                            <!-- Submit Button -->
                                            <button id="submitquestion" type="submit" class="icon-button" style="cursor: pointer; background: none; border: none;" disabled="">
                                                <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z" fill="#333"></path>
                                                </svg>
                                            </button>
                                
                                            <!-- Stop Button -->
                                            <button id="chatbotstop" type="button" class="icon-button" style="display: none; cursor: pointer; background: none; border: none;">
                                                <svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5z" fill="#333"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                              </div>
                            </div>

                        </section>
                    `;

                    return aiChatBotEl;
                  }

                  const nodesTableDiv = document.querySelector("div.binf-widgets");
                  if(!document.getElementById("aichatbottable")) {
                    nodesTableDiv.appendChild(createChatbotElement());
                  }

                  // Handle the overlay dropzone area
                  let dragCounter = 0;
                  const dropzone = document.getElementById("msger-dropzone");
                  const existingChatbot = document.getElementById("aichatbottable");
                  dropzone.addEventListener("dragenter", (e) => {
                    if (e.dataTransfer && e.dataTransfer.types.includes("Files")) {
                      dragCounter++;
                      dropzone.style.opacity = ".6";
                      dropzone.style.display = "flex";
                    }
                  });

                  dropzone.addEventListener("dragleave", (e) => {
                    dragCounter--;
                    dropzone.style.opacity = "1";
                    if (dragCounter === 0) {
                      dropzone.style.display = "none";
                    }
                  });

                  dropzone.addEventListener("drop", (e) => {
                    dragCounter = 0;
                    dropzone.style.display = "none";
                    dropzone.style.opacity = "1";
                  });

                  existingChatbot.addEventListener("dragenter", (e) => {
                    if (e.dataTransfer && e.dataTransfer.types.includes("Files")) {
                      dragCounter++;
                      dropzone.style.display = "flex";
                    }
                  });

                  existingChatbot.addEventListener("dragleave", (e) => {
                    dragCounter--;
                    if (dragCounter === 0) {
                      dropzone.style.display = "none";
                    }
                  });

                  existingChatbot.addEventListener("drop", (e) => {
                    dragCounter = 0;
                    dropzone.style.display = "none";
                  });
                  // Handle the overlay dropzone area

                  document.getElementById('file-input').addEventListener('change', async function(event) {
                    event.preventDefault();
                    handleFiles([event.target.files[0]]);
                  });

                  const chatWrapper = document.getElementById('chat-wrapper');
                  const fileInput = document.getElementById('file-input');

                  chatWrapper.addEventListener("scroll", async (e) => {
                    if (chatWrapper.scrollTop <= 20) {
                      if(paginations.chat.now < paginations.chat.max) {
                        const container = document.querySelector(".msger-chat");
                        const oldScrollTop = container.scrollTop;
                        const oldScrollHeight = container.scrollHeight;
                        await AIPlusAPI.getChats(CHAT_ID, paginations.chat.now+1, null, true);
                        document.querySelector(".msger-chat").scrollTop = oldScrollTop + (container.scrollHeight - oldScrollHeight);
                      }
                    }
                  });

                  // Handle dropped files
                  ["dragenter", "dragover", "dragleave", "drop"].forEach(eventName => {
                    dropzone.addEventListener(eventName, (e) => {
                      e.preventDefault();
                      e.stopPropagation();
                    }, false);
                  });

                  dropzone.addEventListener("drop", handleDrop, false);

                  function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    handleFiles(files);
                  }

                  async function handleFiles(files) {
                    files = [...files];
                    
                    // Create a DataTransfer to hold the files
                    const dataTransfer = new DataTransfer();
                    files.forEach(file => dataTransfer.items.add(file));

                    let idx = 0;
                    fileInput.files = dataTransfer.files;

                    // Render each of the file boxes
                    for(const file of files) {
                      document.getElementById("files-container").innerHTML += `
                        <div class="file-item-container">
                          <div class="file-item" id="file-item-${idx}" style="font-size:11px;padding:4px">
                            <svg class="file-icon" style="width:16px;height:16px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                              <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-4H8V8h5v2zm1-7.5L18.5 9H14V2.5z" />
                            </svg>
                            <span class="file-name"><a download="${file.name}" href="${URL.createObjectURL(file)}">${file.name}</a></span>
                            <button data-idx="${idx}" title="Remove" id="remove-file-btn-${idx}" class="remove-btn" style="display: none">
                              <svg class="remove-icon" style="width:16px;height:16px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-4.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z" />
                              </svg>
                            </button>
                            <div id="loader-file-${idx}" style="display:flex">
                              <img id="chat-refresh-animation" src="${REFRESH_BLUE_ICON}" width="16px" class="spin-animation">
                            </div>
                          </div>

                          <div class="file-item" id="folder-item-${idx}" style="font-size:11px;padding:4px;padding-left:10px;display:none">
                            <img src="${FOLDER_ICON}" style="margin-right: 10px;" width="14" />
                            <span class="file-name"><a target="_blank" href="/"></a></span>
                            <img src="${INFO_ICON}" class="folder-item-info" width="14" />
                          </div>
                        </div>
                      `;
                      idx++;
                    }
                    
                    document.querySelectorAll('.remove-btn').forEach(btn => {
                      btn.addEventListener('click', e => {
                        // TODO: Remove Job by ID
                        const idx = btn.dataset.idx;
                        document.getElementById(`file-item-${idx}`).remove();
                      });
                    });

                    // Ingest each of the files
                    idx = 0
                    // let jobIds = [];
                    // for(const file of files) {
                    //   const formData = new FormData();
                    //   formData.append('workspaceId', "1");
                    //   formData.append('metadata', "");
                    //   formData.append('priority', "10");
                    //   formData.append('file', file);

                      // const ingest = await AIPlusAPI.ingest(formData);
                      // if(ingest.jobId != null) {
                      //   jobIds.push({
                      //     idx,
                      //     ingest
                      //   });
                      // } else {
                        //   alert(`Error when uploading ${file.name}`);
                        //   document.getElementById(`file-item-${idx}`).remove();
                        // }
                        
                        // idx++;
                    // }
                      
                    for(const file of files) {
                      const filingSuggestion = await AIPlusAPI.getFilingSuggestion(file);
                      if(filingSuggestion.data.suggestion != null) {
                        document.querySelector(`#folder-item-${idx} a`).innerText = filingSuggestion.data.suggestion.folderName;
                        document.querySelector(`#folder-item-${idx} a`).setAttribute("href", `/otcs/cs.exe/app/nodes/${filingSuggestion.data.suggestion.folderId}`);
                        document.querySelector(`#folder-item-${idx} a`).setAttribute("target", "_blank");
                        document.querySelector(`#folder-item-${idx} .file-name`).setAttribute("title", "Recommended folder for filing");
                        document.querySelector(`#folder-item-${idx} .folder-item-info`).setAttribute("title", filingSuggestion.data.suggestion.reasoning);
                        document.querySelector(`#folder-item-${idx}`).style.display = "flex";
                      } else {
                        console.warn("no filing suggestion found: " + filingSuggestion);
                      }
                      document.querySelector(`#loader-file-${idx}`).style.display = "none";
                      idx++;
                    }

                    // const interval = setInterval(() => {
                    //   const jobs = [...jobIds];
                    //   for(const job of jobs) {
                    //     const getJob = AIPlusAPI.getJob(job.ingest.jobId);
                    //     if(getJob.status != null && getJob.status.toLowerCase() == "completed") {
                    //       jobIds = jobIds.filter(x => x.ingest.jobId != job.ingest.jobId);
                    //       document.querySelector(`#remove-file-btn-${job.idx}`).style.display = "block";
                    //       document.querySelector(`#loader-file-${job.idx}`).style.display = "none";
                    //     } else if(getJob.status != null && getJob.status.toLowerCase() == "failed") {
                    //       jobIds = jobIds.filter(x => x.ingest.jobId != job.ingest.jobId);
                    //     }

                    //     if(jobIds.length === 0) {
                    //       clearInterval(interval);
                    //     }
                    //   }
                    // }, 3000);
                  }

                  //handle counter
                  const messageEle = document.getElementById('chatarea');
                  const counterEle = document.getElementById('counter');

                  messageEle.focus();
                  messageEle.addEventListener('keydown', function(event) {
                      if (event.key === 'Enter') {
                      if (event.shiftKey) {
                          messageEle.value += '\n';
                      }
                      else {
                          document.getElementById("submitquestion").disabled = false;
                          document.getElementById("submitquestion").click();
                          messageEle.value = ""
                      }
                      event.preventDefault();
                      }
                  })

                  let maxLength = messageEle.getAttribute('maxlength');
                  let currentLength = messageEle.value.length;
                  counterEle.innerHTML = `${currentLength}/${maxLength}`;
                  
                  //handle clear
                  document.getElementById("clearbtn").addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    clearChats();
                  });

                  messageEle.addEventListener('input', function (e) {
                      e.preventDefault();
                      e.stopImmediatePropagation();
                      const target = e.target;
                      document.getElementById("chatarea").style.height = (document.getElementById("chatarea").scrollHeight) + "px";
          
                      // Get the `maxlength` attribute
                      const maxLength = target.getAttribute('maxlength');
          
                      // Count the current number of characters
                      const currentLength = target.value.length;
          
                      counterEle.innerHTML = `${currentLength}/${maxLength}`;
                      if(document.getElementById("submitquestion"))
                      {
                      if(document.getElementById("submitquestion").disabled == true)
                      {
                          document.getElementById("submitquestion").disabled = false;
                      }
                      if(currentLength == 0)
                      {
                          document.getElementById("submitquestion").disabled = true;
                      }
                      }
                  });
      
                  const msgerInput = get(".msger-input");
                  document.getElementById("submitquestion").addEventListener("click", async event => {
                      event.preventDefault();
                      event.stopImmediatePropagation();

                      let botChatDivElStop = document.getElementById(`chatbotstop`);
                      botChatDivElStop.style.display = '';
                      document.getElementById('submitquestion').style.display = 'none';
                      
                      botChatDivElStop.addEventListener("click", function (e) {
                        e.preventDefault();
                        e.stopImmediatePropagation();

                        document.getElementById('submitquestion').style.display = '';
                        document.getElementById('chatbotstop').style.display = 'none';
                        if(document.getElementById("botloading")) {
                          document.getElementById("botloading").remove();
                        }
                        if(activeController != null) {
                          activeController.abort()
                        }
                        activeController = null;
                      });
      
                      const msgText = msgerInput.value;
                      if (!msgText) return;
      
                      appendMessage("right", msgText);
                      msgerInput.value = "";
                      counterEle.innerHTML = `0/${maxLength}`;
                      botResponse(msgText);
                  });

                  function botResponse(questionToAsk) {
                    AIPlusAPI.ask({
                      "userId": userID,
                      "messages": [
                        {"role": "user", "content": questionToAsk}
                      ],
                      "enableTools": document.querySelector("#enable-tools").checked,
                      "topK": 20
                    });
                  }
                  
                  document.getElementById("closeaviator").addEventListener("click", (e) => {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.getElementById("aichatbottable").setAttribute('style', 'display:none !important');
                  });

                  document.getElementById("chat-room-container").addEventListener("scroll", async () => {
                    const container = document.getElementById("chat-room-container");
                    const nearBottom = container.scrollTop + container.clientHeight >= container.scrollHeight - 5;

                    if (nearBottom) {
                      if(paginations.chatHistory.now < paginations.chatHistory.max) {
                        await AIPlusAPI.getChatRooms(paginations.chatHistory.now + 1, null, true);
                      }
                    }
                  });

                  document.getElementById("chat-refresh").addEventListener("click", async (e) => {
                    await AIPlusAPI.getChatRooms(1);
                  });

                  var AIPlusConfig = {
                    apiUrl: "https://ai-agent-test.leapcount.com",
                    backendUrl: "/aiplus"
                  }
                  var AIPlusUtils = {
                    appendChatItem: function(data) {
                      return `<a target="_blank" href="/otcs/cs.exe/app/nodes/${data.customMetadata.nodeId}" title="${data.fileName}" class="msger-btn shadow file-chat-bubble hoverable-fade">
                        <img width="16px" src="${FILE_ICON}">
                        <div class="file-chat-bubble-text">${data.fileName}</div>
                      </a>`;
                    },
                    processChatMetadata: function(id, metadata) {
                      let result = `<div id="chat-item-${id}" class="chat-items-container" style="display:flex;flex-wrap:wrap">`;
                      
                      if(metadata == null) {
                        result += `</div>`;
                        return result;
                      }
                      
                      metadata = JSON.parse(metadata);
                      
                      for(const m of metadata) {
                        if(m.type == "tool_call_end") {
                          for(const data of m.result.data.files ?? []) {
                            result += this.appendChatItem(data);
                          }
                        }
                      }
                      
                      result += `</div>`;
                      return result;
                    },
                    appendChatRoom: function(rooms, appendMode = false) {
                      const chatRoomContainer = document.querySelector("#chat-room-container");
                      if(!appendMode) {
                        chatRoomContainer.innerHTML = ``;
                        if(rooms?.data?.data == null || rooms?.data?.data?.length == 0) {
                          chatRoomContainer.innerHTML = `<div style="padding:0px 10px;font-style:italic;font-weight:bold;font-size:13px">- No chats found -</div>`;
                        }
                      }

                      for(const chatRoom of rooms.data.data) {
                        chatRoomContainer.insertAdjacentHTML("beforeend", `
                          <button data-id="${chatRoom.id}" title="${chatRoom.name}" class="p-relative chat-history-item msger-btn hoverable ${CHAT_ID == chatRoom.id ? "hoverable-active" : ""}">
                            ${chatRoom.name}
                            <div title="Delete this conversation" data-id="${chatRoom.id}" id="tooltip-${chatRoom.id}" class="chat-history-tooltip">
                              <img src="${DELETE_ICON}" style="width:14px;" class="hoverable-fade">
                            </div>
                          </button>`);
                      }
                      
                      document.querySelectorAll('.chat-history-tooltip').forEach(btn => {
                        btn.addEventListener("click", async (e) => {
                          e.stopPropagation();
                          if(confirm("Delete this chat?")) {
                            await AIPlusAPI.deleteChatRoom(btn.dataset.id);
                          }
                        });
                      });

                      document.querySelectorAll('.chat-history-item').forEach(btn => {
                        btn.addEventListener("mouseenter", async (e) => {
                          document.querySelector(`#tooltip-${e.target.dataset.id}`).style.display = "block";
                        });
                        btn.addEventListener("mouseleave", async (e) => {
                          document.querySelector(`#tooltip-${e.target.dataset.id}`).style.display = "none";
                        });

                        btn.addEventListener("click", async (e) => {
                          clearChats();
                          AIPlusUtils.toggleInitialMsg(false);
                          CHAT_ID = e.target.dataset.id;
                          
                          this.reRenderChatRooms();
                          
                          await AIPlusAPI.getChats(e.target.dataset.id, 1);
                        });
                      });
                    },
                    reRenderChatRooms: function() {
                      document.querySelectorAll('.chat-history-item').forEach(e => {
                        if(e.dataset.id == CHAT_ID) {
                          e.classList.add("hoverable-active");
                        } else {
                          e.classList.remove("hoverable-active");
                        }
                      });
                    },
                    toggleChatHistoryLoader: function(isVisible) {
                      if(isVisible) {
                        document.querySelector("#chat-refresh").style.display = "none";
                        document.querySelector("#chat-refresh-animation").style.display = "block";
                      } else {
                        document.querySelector("#chat-refresh").style.display = "block";
                        document.querySelector("#chat-refresh-animation").style.display = "none";
                      }
                    },
                    toggleChatTools: function(isVisible, id) {
                      const el = document.getElementById(`chat-tools-${id}`);
                      if(isVisible) {
                        if(!el) {
                          el.style.display = "flex";
                        }
                      } else {
                        if(el) {
                          el.style.display = "none";
                        }
                      }
                    },
                    toggleInitialMsg: function(isVisible) {
                      const el = document.getElementById("initial-msg");
                      if(isVisible) {
                        if(!el) {
                          get('.msger-chat').insertAdjacentHTML("afterbegin", `<div class="msg left-msg" id="initial-msg">
                            <div class="msg-img"
                                style="background-image:url(${BOT_IMG});margin-top:20px; display:inherit;">
                            </div>
                            <div style="background-color:#F4F4F4;  width:fit-content;" class="msg-bubble">
                                <div class="msg-info"></div>
                                <div class="msg-text" id="msg-text">Hi, welcome to Aviator, I see you want to know about
                                    <strong style="font-weight: bold;">everything</strong>. Ask me anything about the document.</div>
                            </div>
                          </div>`);
                        }
                      } else {
                        if(el) {
                          el.remove();
                        }
                      }
                    },
                    toggleLoaderChatContainer: function(isVisible) {
                      const el = document.querySelector("#msger-chat-container-loader");
                      if(isVisible) {
                        el.style.display = "block";
                      } else {
                        el.style.display = "none";
                      }
                    },
                    removeLoaderTextbox: function() {
                      if(document.getElementById("botloading")) {
                        document.getElementById("botloading").remove();
                      }
                    },
                    replaceTextMessageBox: function(msgId, msg) {
                      document.querySelector(`#${msgId} .msg-text`).textContent = msg;
                    },
                    appendMetadataItem: function(msgId, metadata) {
                      if(metadata) {
                        if(metadata.type == "tool_call_end") {
                          for(const m of metadata.result.data.files ?? []) {
                            document.querySelector(`#${msgId} .chat-items-container`).innerHTML += this.appendChatItem(m);
                          }
                        }
                      }
                    },
                    appendTextMessageBox: function(msgId, msg) {
                      document.querySelector(`#${msgId} .msg-text`).textContent += msg;
                    },
                    finishMessageBox: function (msgId) {
                      document.querySelector(`#${msgId} .msg-container`).style.display = "flex";
                      document.querySelector(`#${msgId} .msg-text`).innerHTML = marked.parse(document.querySelector(`#${msgId} .msg-text`).textContent);
                      document.getElementById('submitquestion').style.display = '';
                      document.getElementById('chatbotstop').style.display = 'none';
                      if(document.getElementById("botloading")) {
                        document.getElementById("botloading").remove();
                      }
                    }
                  }
                  var AIPlusAPI = {
                    ask: async function(body) {
                      if (activeController) {
                        activeController.abort();
                        console.log("Previous chat stream aborted.");
                      }
                      
                      let botMessage = "";
                      activeController = new AbortController();
                      const { signal } = activeController;
                      appendMessage('loading');

                      const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Chat/User/${userID}/Ask`, {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                          roomId: CHAT_ID,
                          aiPlusToken: sessionStorage.getItem('aviatorToken'),
                          data: body
                        }),
                        signal
                      });
                    
                      if (!response.ok) {
                        console.error("Error:", response.statusText);
                        return;
                      }
                    
                      const reader = response.body.getReader();
                      const decoder = new TextDecoder("utf-8");
                      let buffer = "";
                      let msgId = null;
                      let firstMessageHasRendered = false;
                      
                      // Read chunks as they arrive
                      while (true) {
                        const { done, value } = await reader.read();
                        
                        if (done) {
                          break;
                        }
                        
                        const chunk = decoder.decode(value, { stream: true });
                        buffer += chunk;
                        
                        const lines = buffer.split("\n");
                        buffer = lines.pop();
                        
                        for(const line of lines) {
                          try {
                            const json = line.replace("data: ", "");
                            const data = JSON.parse(json);

                            try {
                              AIPlusUtils.removeLoaderTextbox();
                              
                              if(msgId == null) {
                                msgId = appendMessage('left', "");
                                AIPlusUtils.toggleChatTools(false, msgId);
                              }

                              // CHECK Type
                              if(data.type == 'tool_call_end') {
                                AIPlusUtils.appendMetadataItem(`msg-${msgId}`, data);
                              } else if(data.type == 'content') {
                                if(!firstMessageHasRendered) {
                                  AIPlusUtils.replaceTextMessageBox(`msg-${msgId}`, "");
                                  firstMessageHasRendered = true;
                                }
                                botMessage += data.delta;
                                AIPlusUtils.appendTextMessageBox(`msg-${msgId}`, data.delta);
                              } else if(data.type == 'done') {
                                AIPlusUtils.removeLoaderTextbox();
                                AIPlusUtils.toggleChatTools(true, msgId);
                              } else if(data.type == 'thinking') {
                                AIPlusUtils.removeLoaderTextbox();
                                AIPlusUtils.replaceTextMessageBox(`msg-${msgId}`, data.message);
                              } else if(data.type == 'error') {
                                console.error(data.error);
                                alert(data.error);
                              }
                              
                              // CHECK additional_data
                              if(data.additional_data != null) {
                                if(data.additional_data.type == "chat_room_id") {
                                  CHAT_ID = data.additional_data.data;
                                }
                              }
                            } catch (error) {
                              console.error(error);
                            }
                          }
                          catch(err) {
                            continue;
                          }
                        }
                      }

                      activeController = null;
                      AIPlusUtils.finishMessageBox(`msg-${msgId}`);
                      
                      await AIPlusAPI.getChatRooms(1);
                    },
                    getFilingSuggestion: async function(file) {
                      try {
                        const formData = new FormData();
                        formData.append("file", file);

                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/AI/Filing/Suggestion/${userID}`, {
                          method: "POST",
                          body: formData,
                          redirect: "follow",
                          headers: {
                            "Authorization": `Bearer ${sessionStorage.getItem('aviatorToken')}`
                          }
                        });
                    
                        const result = await response.json();
                        return result;
                      } catch (error) {
                        console.error("getJob error:", error);
                        throw error;
                      }
                    },
                    getJob: async function(jobId) {
                      try {
                        const response = await fetch(`${AIPlusConfig.apiUrl}/api/jobs/${jobId}`, {
                          method: "GET",
                          redirect: "follow",
                          headers: {
                            "Authorization": `Bearer ${sessionStorage.getItem('aviatorToken')}`
                          }
                        });
                        
                        const result = await response.json();
                        return result;
                      } catch (error) {
                        console.error("getJob error:", error);
                        throw error;
                      }
                    },
                    deleteChatRoom: async function(id) {
                      try {
                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Chat/Room/${id}`, {
                          method: "DELETE",
                          redirect: "follow"
                        });
                    
                        const result = await response.json();
                        if(CHAT_ID == id) {
                          clearChats();
                        }
                        await this.getChatRooms(1);
                        return result;
                      } catch (error) {
                        console.error("getChatRooms error:", error);
                        throw error;
                      }
                    },
                    getChatRooms: async function(page = 1, size = 30, appendMode = false) {
                      try {
                        AIPlusUtils.toggleChatHistoryLoader(true);
                        if(size == null) size = 30;

                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Chat/Room/User/${userID}?pageNumber=${page}&pageSize=${size}`, {
                          method: "GET",
                          redirect: "follow"
                        });
                    
                        const result = await response.json();
                        paginations.chatHistory.max = result.data.totalPage;
                        paginations.chatHistory.now = page;
                        AIPlusUtils.appendChatRoom(result, appendMode);
                        AIPlusUtils.toggleChatHistoryLoader(false);
                        return result;
                      } catch (error) {
                        console.error("getChatRooms error:", error);
                        throw error;
                      }
                    },
                    createChatByRoom: async function(roomId, body) {
                      try {
                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Room/${roomId}/Chat`, {
                          method: "POST",
                          redirect: "follow",
                          headers: {
                            "Content-Type": "application/json",
                            "Accept": "text/plain"
                          },
                          body: JSON.stringify(body)
                        });
                    
                        const result = await response.json();
                        return result;
                      } catch (error) {
                        console.error("createChatByRoom error:", error);
                        throw error;
                      }
                    },
                    createChatRoom: async function(name, messages) {
                      try {
                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Chat/Room/User/${userID}`, {
                          method: "POST",
                          redirect: "follow",
                          headers: {
                            "Content-Type": "application/json",
                            "Accept": "text/plain"
                          },
                          body: JSON.stringify({
                            name,
                            messages
                          })
                        });
                    
                        const result = await response.json();
                        return result;
                      } catch (error) {
                        console.error("createChatRoom error:", error);
                        throw error;
                      }
                    },
                    getChats: async function(chatId, page, size = 25, appendMode = true) {
                      try {
                        if(size == null) size = 25;

                        AIPlusUtils.toggleLoaderChatContainer(true);
                        const response = await fetch(`${AIPlusConfig.backendUrl}/Api/Chat/Room/${chatId}/Chats?pageNumber=${page}&pageSize=${size}`, {
                          method: "GET",
                          redirect: "follow"
                        });
                        
                        const result = await response.json();
                        paginations.chat.max = result.data.totalPage;
                        paginations.chat.now = page;
                        for (const chat of result.data.data) {
                          appendMessage(chat.isHuman ? "right" : "left", chat.message, new Date(chat.createdAt), appendMode, chat.metadata);
                        }
                        AIPlusUtils.toggleLoaderChatContainer(false);
                        return result;
                      } catch (error) {
                        console.error("getChats error:", error);
                        this.toggleLoaderChatContainer(false);
                        throw error;
                      }
                    },
                    ingest: async function(formData) {
                      try {
                        const response = await fetch(`${AIPlusConfig.backendUrl}/api/documents`, {
                          method: "POST",
                          body: formData,
                          redirect: "follow",
                          headers: {
                            "Authorization": `Bearer ${sessionStorage.getItem('aviatorToken')}`
                          }
                        });
                    
                        const result = await response.json();
                        return result;
                      } catch (error) {
                        console.error("Ingest error:", error);
                      }
                    },
                    login: async function() {
                      const response = await fetch(`${AIPlusConfig.backendUrl}/api/ai/login`, {
                        method: "POST",
                        redirect: "follow"
                      });

                      const result = await response.json();
                      if(result.data.token) {
                        sessionStorage.setItem("aviatorToken", result.data.token);
                      }
                      return result;
                    }
                  }

                  await AIPlusAPI.login();

                  clearChats();
                  await AIPlusAPI.getChatRooms(1);
                  AIPlusUtils.toggleInitialMsg(true);
              }

          var Menuelement = document.getElementsByTagName("otc-menuitem");
          for (var i = 0; i < Menuelement.length; i++) {
              if (Menuelement[i].textContent == "Sign out") {
                  menustatus = true;
              }
          }

          function addAviatorElement() {
              var menustatus = false;
              var Menuelement = document.getElementsByTagName("otc-menuitem");
              for (var i = 0; i < Menuelement.length; i++) {
                  if (Menuelement[i].textContent == "Sign out") {
                      menustatus = true;
                  }
              }            
              if (menustatus) {
                  var AviatorElement = document.getElementById('aviator');
                  if (AviatorElement) {
                      return;
                  } else {
                      const AviatorElement = document.createElement('otc-menuitem');
                      AviatorElement.textContent = 'Explorer Insight';
                      AviatorElement.id = 'aviator';
                      var Menuelement = document.getElementById('csui_controls_app.header_app.header.controls_user.profile_user.profile.view_7_control_menu');
                      const secondDivider = Menuelement.querySelectorAll('otc-menudivider')[1];
                      Menuelement.insertBefore(AviatorElement, secondDivider);
                      AviatorElement.addEventListener('click', function() {
                          showAviator();
                      });
                  }
              } else {
                  setTimeout(addAviatorElement, 1000); // Retry after 1 second (adjust delay as needed)
              }
          }

          function addAviatorElementAsIcon() {
              var Menuelement = document.getElementsByTagName("otc-overflow-container")[0];
              
              if (Menuelement) {
                  var AviatorElement = document.getElementById('aviator-icon');

                  if (AviatorElement) {
                      return;
                  } else {
                      const AviatorButtonElement = document.createElement('otc-button');
                      AviatorButtonElement.id = 'aviator-icon';
                      AviatorButtonElement.setAttribute("tabindex", "0");
                      AviatorButtonElement.setAttribute("headeritem", "");
                      AviatorButtonElement.setAttribute("icon", "csui_header:csui_li_header_aviator42");
                      AviatorButtonElement.setAttribute("iconappearance", "default");
                      AviatorButtonElement.setAttribute("slot", "beforeOverflow");
                      AviatorButtonElement.setAttribute("title", "Aviator");
                      AviatorButtonElement.style.borderRadius = "16px"; // Setting inline style
                      
                      const script = document.createElement("script");
                      script.src = "/img/csui/themes/carbonfiber/marked.min.js";

                      const searchIcon = Menuelement.querySelectorAll('otc-button')[0];
                      Menuelement.insertBefore(AviatorButtonElement, searchIcon);
                      AviatorButtonElement.appendChild(script);

                      AviatorButtonElement.addEventListener('click', function() {
                        showAviator();
                      });
                  }
              } else {
                  setTimeout(addAviatorElement, 1000);
              }
          }

          function checkForMenuElement() {
              var Menuelement = document.getElementById('csui_controls_app.header_app.header.controls_user.profile_user.profile.view_7_control');
              
              if (Menuelement) {
                  Menuelement.addEventListener('click', function() {
                      addAviatorElement();             
                  });
              } else {
                  setTimeout(checkForMenuElement, 1000);
              }
              
              addAviatorElementAsIcon();
          }
          console.log("checkForMenuElement");
          checkForMenuElement();
          // Explorer Insight END
        },
      });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/utils/contexts/factories/branding.config.factory",
    ],
    function (x, m, p, y) {
      "use strict";
      return p.View.extend({
        template: !1,
        constructor: function (r = {}) {
          p.View.prototype.constructor.apply(this, arguments),
            (this.from = 0),
            (this.to = 0),
            this.listenTo(this, "get:progress", this._setProgress),
            this.listenTo(
              this,
              "processbar:minimize",
              this._minimizeProgressbar
            ),
            (this.otcData = { slot: "unknown", state: "default" }),
            (this.progressValues = { from: 0, to: 1 }),
            (this.brandingConfigData = this.options.context.getModel(y)),
            this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues);
        },
        onShow: function () {
          this.options.otcEl.addEventListener(
            "click",
            m.bind(this._maximizeProgressbar, this)
          ),
            this.options.otcEl.addEventListener(
              "keydown",
              m.bind(this._maximizeProgressbar, this)
            );
        },
        _setProgress: function (e, r) {
          r === "rejected"
            ? ((this.otcData.state = "error"), this._progressComplete())
            : r === "resolved"
            ? ((this.otcData.state = "finished"),
              (this.progressValues.to = 100),
              this._progressComplete())
            : e !== this.progressValues.to &&
              ((this.progressValues.from = this.progressValues.to),
              (this.progressValues.to = e),
              e === 100
                ? ((this.otcData.state = "finished"), this._progressComplete())
                : ((this.otcData.state = "default"),
                  this.trigger("update:progress:values", this.progressValues)));
        },
        _minimizeProgressbar: function () {
          (this.otcData.slot = "beforeOverflow"),
            this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues);
        },
        _progressComplete: function () {
          this.trigger("data:synced"),
            this.trigger("update:progress:values", this.progressValues),
            setTimeout(() => {
              (this.otcData.slot = "unknown"),
                (this.otcData.state = "default"),
                this.trigger("data:synced"),
                (this.progressValues.from = 0),
                (this.progressValues.to = 1),
                this.trigger("update:progress:values", this.progressValues),
                this.trigger("processbar:maximize");
            }, 1e3);
        },
        _maximizeProgressbar: function (e) {
          (e.type === "click" || e.keyCode === 13 || e.keyCode === 32) &&
            ((this.otcData.slot = "unknown"),
            this.trigger("data:synced"),
            this.trigger("processbar:maximize"));
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          return '<div class="csui-favorites-view-container"></div>';
        },
      });
      return (
        p.registerPartial(
          "csui_controls_app.header_app.header.controls_favorites_impl_favorites",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/impl/nls/root/localized.strings",
    {
      FavoritesIconTitle: "Favorites",
      FavoritesTitleAria: "OpenText Content Management Favorites",
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/favorites/favorites.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/utils/contexts/factories/branding.config.factory",
      "csui/widgets/navigation.header/controls/favorites/favorites.view",
      "hbs!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
      "i18n!csui/controls/app.header/app.header.controls/favorites/impl/nls/localized.strings",
      "css!csui/controls/app.header/app.header.controls/favorites/impl/favorites",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      var r = y.extend({
        template: s,
        constructor: function (d) {
          y.call(this, d),
            (this.brandingConfigData = this.options.context.getModel(p)),
            (this.otcData = {
              icon: "csui_header:csui_header_fav42",
              className: "csui-favorites",
              arialabel: e.FavoritesTitleAria,
              title: e.FavoritesIconTitle,
              overflowValue: e.FavoritesIconTitle,
            }),
            this.trigger("data:synced");
        },
        onRender: function () {
          x(this.ui.favoritesViewContainer)[0].classList.add("binf-hidden"),
            x(this?.options?.otcEl)
              .unbind("click")
              .bind("click", m.bind(this.onClickFavoritesIcon, this)),
            x(this?.options?.otcEl)
              .unbind("blur")
              .bind("blur", m.bind(this.onBlurButton, this)),
            x(this?.options?.otcEl).on(
              "mouseenter",
              m.bind(this._mouseEnterButton, this)
            ),
            x(this?.options?.otcEl).on(
              "mouseleave",
              m.bind(this._mouseLeaveButton, this)
            ),
            x(this?.options?.otcEl)
              .closest("otc-overflow-container")[0]
              .addEventListener(
                "blur",
                m.bind(this._onBlurOverflowButton, this)
              );
        },
        _onBlurOverflowButton: function () {
          this._hideFavoritesView();
        },
        _mouseEnterButton: function () {
          this.favoritesViewInFocus = !0;
        },
        _mouseLeaveButton: function () {
          this.favoritesViewInFocus = !1;
        },
        documentClick: function (a) {
          !x(a.target).parents(".csui-favorites-view-container").length &&
            !x(a.target).parents(".csui-favorites-icon-container").length &&
            a.target !== this?.el &&
            this._hideFavoritesView();
        },
        _showFavoritesView: function () {
          this.ui.favoritesViewContainer.removeClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "true"),
            this.$el.addClass("showing-favorites-view"),
            this.favoritesViewContainerRegion.show(this.favoritesView),
            this.favoritesViewContainerRegion.el.classList.remove(
              "binf-hidden"
            ),
            x(document)
              .off("click." + this.cid)
              .on("click." + this.cid, m.bind(this.documentClick, this)),
            this?.options?.otcEl?.setAttribute("menuopen", "");
        },
        _hideFavoritesView: function () {
          x(document).off("click." + this.cid),
            this.favoritesView &&
              this.favoritesView.isSearchOpen() &&
              this.favoritesView.searchClicked(event),
            (this.favoritesViewInFocus = !1),
            this.ui.favoritesViewContainer.addClass("binf-hidden"),
            this.ui.favoritesButtonContainer.attr("aria-expanded", "false"),
            this.$el.removeClass("showing-favorites-view"),
            this?.options?.otcEl?.removeAttribute("menuopen");
        },
        onClickFavoritesIcon: function (a) {
          a.preventDefault(),
            a.stopPropagation(),
            this.options &&
              this.options.parentView &&
              this.options.parentView.trigger("header:control:clicked");
          var d = x(".binf-open>.binf-dropdown-toggle");
          d.length > 0 && d.binf_dropdown("toggle"),
            this._ensureFavoritesView(),
            this._toggleFavoritesView(),
            this._focusOnFavoriteSearch(a);
        },
        _focusOnNextElement: function () {
          let a = document.getElementsByTagName("otc-header-bar");
          var d = a[0].querySelectorAll("otc-toolbaritem");
          let t = a[0].querySelector("otc-overflow-container"),
            i = d[0].nextSibling;
          i?.getAttribute("slot") !== "otc-overflow-slot"
            ? i.focus()
            : t.focus();
        },
        onKeyInView: function (a) {
          let d = document.getElementsByTagName("otc-header-bar");
          var t = d[0].querySelectorAll("otc-toolbaritem");
          let i = d[0].querySelectorAll("[slot='afterOverflow']");
          switch (a.keyCode) {
            case 9:
              var o = x(this?.options?.otcEl).is(":focus");
              o &&
              a.shiftKey !== !0 &&
              !this.ui.favoritesViewContainer.hasClass("binf-hidden")
                ? this._focusOnFavoriteSearch(a)
                : !o && a.shiftKey
                ? (a.preventDefault(),
                  a.stopPropagation(),
                  this?.options?.otcEl?.getAttribute("slot") !==
                  "otc-overflow-slot"
                    ? this._focusOnFavoriteButton()
                    : this._focusOnOverflowButton())
                : !x(a.target).closest(".tile-header").length &&
                  this.favoritesViewInFocus &&
                  (this._hideFavoritesView(),
                  this?.options?.otcEl?.getAttribute("slot") !==
                  "otc-overflow-slot"
                    ? this._focusOnNextElement()
                    : i[0].focus(),
                  a.preventDefault());
              break;
            case 13:
            case 32:
              this?.options?.otcEl?.getAttribute("slot") === ""
                ? x(a.target).closest(".tile-header").length ||
                  (this.triggerMethod("click:favorites:icon", a),
                  this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                    this._focusOnFavoriteSearch(a))
                : x(a.target).closest(".tile-header").length ||
                  (this.onClickFavoritesIcon(a),
                  this.ui.favoritesViewContainer.hasClass("binf-hidden") ||
                    this._focusOnFavoriteSearch(a));
              break;
            case 40:
              this?.options?.otcEl?.getAttribute("slot") === "" &&
                (!this.favoritesView ||
                this.ui.favoritesViewContainer.hasClass("binf-hidden")
                  ? (this.triggerMethod("click:favorites:icon", a),
                    this._focusOnFavoriteSearch(a))
                  : this.favoritesViewInFocus !== !0 &&
                    this._focusOnFavoriteSearch(a));
              break;
            case 27:
              this?.options?.otcEl?.getAttribute("slot") !== "otc-overflow-slot"
                ? this._focusOnFavoriteButton()
                : this._focusOnOverflowButton(),
                this._hideFavoritesView();
              break;
          }
        },
        _focusOnFavoriteButton: function () {
          this.options?.otcEl?.focus(), (this.favoritesViewInFocus = !1);
        },
        _focusOnOverflowButton: function () {
          this.options?.otcEl?.closest("otc-overflow-container")?.focus(),
            (this.favoritesViewInFocus = !1);
        },
        onBlurButton: function () {
          this.favoritesViewInFocus !== !0 &&
            document.activeElement !== this?.options?.otcEl &&
            this._hideFavoritesView();
        },
      });
      return r;
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/impl/nls/localized.strings",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/impl/nls/root/localized.strings",
    { HelpIconTitle: "Help", HelpIconAria: "Help pages, opens in new window" }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/help/help.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/utils/contexts/factories/branding.config.factory",
      "i18n!csui/controls/app.header/app.header.controls/help/impl/nls/localized.strings",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = p.extend({
        template: !1,
        constructor: function (a) {
          p.call(this, a),
            (this.brandingConfigData = this.options.context.getModel(y)),
            (this.otcData = {
              icon: "csui_header:csui_header_help42",
              title: s.HelpIconTitle,
              arialabel: s.HelpIconAria,
              overflowValue: s.HelpIconTitle,
            }),
            this.trigger("data:synced");
        },
        onShow: function () {
          var r = this;
          this.el.setAttribute("tabindex", -1),
            this.options?.otcEl?.addEventListener(
              "click",
              x.bind(this._onClick, this)
            ),
            m(this.options.otcEl).on("keydown", function (a) {
              (a.keyCode === 32 || a.keyCode === 13) &&
                (a.preventDefault(), r.triggerMethod("click:help"));
            });
        },
      });
      return e;
    }
  ),
  csui.define(
    "css!csui/controls/app.header/app.header.controls/user.profile/impl/user.profile",
    [],
    function () {}
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/url",
      "csui/utils/log",
      "csui/utils/base",
      "csui/utils/commands",
      "csui/utils/contexts/factories/member",
      "csui/utils/contexts/factories/user",
      "csui/utils/contexts/factories/recycle.bin",
      "csui/controls/toolbar/toolitems.filtered.model",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/controls/globalmessage/globalmessage",
      "csui-ext!csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "i18n!csui/pages/start/impl/nls/lang",
      "css!csui/controls/app.header/app.header.controls/user.profile/impl/user.profile",
      "csui/lib/jquery.binary.ajax",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c, h, f) {
      "use strict";
      var k =
        window.csui.requirejs.s.contexts._.config.config[
          "csui/utils/contexts/factories/user"
        ] || {};
      e = e(x.id);
      var C = y.ItemView.extend({
        template: !1,
        serializeData: function () {
          return { items: this.collection.toJSON() };
        },
        constructor: function (w) {
          w || (w = {}),
            y.ItemView.prototype.constructor.call(this, w),
            (this.model = this.options.context.getModel(d)),
            (this.userModel = this.options.context.getModel(t)),
            this.options.context
              .getModel(i, { permanent: !0, detached: !0 })
              .ensureFetched(),
            (this.connector = this.options.connector =
              this.model.connector ??
              this.userModel.connector ??
              this.options.connector),
            this._ensureModels(!0),
            (this.otcData = {
              initials: this.model?.attributes?.initials ?? "",
              interactive: "",
              image: "",
              arialabel: f.profileMenuTitle,
              title: f.profileMenuTitle,
              collection: this.collection,
            }),
            this.model.ensureFetched().then(
              m.bind(function () {
                this._setUserData(),
                  this._getUserGroups(),
                  this._refreshActions();
              }, this)
            ),
            this.listenTo(this.model, "change", this._setUserData)
              .listenTo(this.userModel, "change", this._setUserMeberData)
              .listenTo(w.context, "sync error", this._refreshActions)
              .listenTo(this, "destroy", this._releasePhotoUrl)
              .listenTo(
                this,
                "childview:toolitem:action",
                this._triggerMenuItemAction
              ),
            this.listenTo(
              this,
              "execute:action",
              m.bind(function (v) {
                this._executeAction(v);
              }, this)
            ),
            this.listenTo(
              this,
              "set:focus",
              m.bind(function () {
                this.options?.otcEl?.focus();
              }, this)
            );
        },
        _executeAction: function (S) {
          var w = S.get("signature"),
            v = a.findWhere({ signature: w }),
            b = this.options.context,
            _ = {
              context: b,
              toolItem: S,
              originatingView: this,
              data: S.get("commandData"),
            },
            T = this;
          try {
            if (!v) throw new Error('Command "' + w + '" not found.');
            v.execute(_)
              .done(function (l) {})
              .fail(function (l) {
                l &&
                  ((l = new r.Error(l)),
                  c.showMessage("error", l.message, l.errorDetails));
              })
              .always(function () {});
          } catch (l) {
            e.warn(
              `Executing the command "{0}" failed.
{1}`,
              v.get("signature"),
              l.stack
            ) && console.warn(e.last);
          }
        },
        _getUserGroups: function () {
          let S = this._getGroupsUrl();
          S &&
            this.options.connector.makeAjaxCall({ type: "GET", url: S }).always(
              m.bind(function (w, v, b) {
                if (b && b.status === 200) {
                  let _ = w.results;
                  this.options.context._groups = _;
                  let T = !1;
                  m.each(_, function (l) {
                    T =
                      T ||
                      l?.data?.properties?.name?.indexOf(
                        "Business Administrators"
                      ) > -1;
                  }),
                    T &&
                      k?.initialResponse?.data &&
                      ((k.initialResponse.data.businessAdministrator = T),
                      this._ensureModels(this.options));
                }
              }, this)
            );
        },
        _ensureModels: function (S = !1) {
          (this.staticMenuItems = n.profileMenu.collection.toJSON()),
            (this.collection = S
              ? new o([])
              : new o(n.profileMenu, {
                  status: { context: this.options.context },
                  commands: a,
                  mask: new u(),
                }));
        },
        _getGroupsUrl: function () {
          if (this.model)
            return s.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "members/memberof"
            );
        },
        _refreshActions: function () {
          if (this._isRendered && !this.isDestroyed)
            if (h) {
              var S = this.options,
                w = m
                  .chain(h)
                  .flatten(!0)
                  .map(function (b) {
                    return b(S);
                  })
                  .value(),
                v = this;
              p.whenAll.apply(p, w).always(function (b) {
                var _ = new u();
                (v.staticMenuItems = n.profileMenu.collection.toJSON()),
                  (b = m
                    .chain(b)
                    .flatten()
                    .pluck("profileMenu")
                    .flatten()
                    .value()),
                  m.each(b, function (T) {
                    if (T && v.staticMenuItems) {
                      for (var l = !1, g = 0; g < v.staticMenuItems.length; g++)
                        if (v.staticMenuItems[g].group === T.group) l = !0;
                        else if (l) {
                          v.staticMenuItems.splice(g + 1, 0, T);
                          break;
                        }
                      l ||
                        v.staticMenuItems.splice(
                          v.staticMenuItems.length - 1,
                          0,
                          T
                        );
                    }
                  }),
                  (b = v.staticMenuItems.concat([])),
                  (b = _.maskItems(b)),
                  n.profileMenu.reset(b),
                  (v.collection = new o(n.profileMenu, {
                    status: { context: v.options.context },
                    commands: a,
                    mask: new u(),
                  })),
                  (v.otcData.collection = v.collection),
                  v._setOtcData();
              });
            } else this.collection.refilter();
        },
        _setUserMeberData: function () {
          (this.model.attributes = m.extend(
            this.model.attributes,
            this.userModel.attributes
          )),
            this._setUserData();
        },
        _setUserData: function () {
          var S = this._getUserPhotoUrl();
          if (S) {
            var w = { url: S, dataType: "binary" };
            this.connector.makeAjaxCall(w).always(
              m.bind(function (v, b, _) {
                this.isDestroyed ||
                  (_.status === 200
                    ? this._setPersonalizedImage(v)
                    : ((this.otcData.image = ""), this._setOtcData()));
              }, this)
            );
          } else (this.otcData.image = ""), this._setOtcData();
        },
        _getUserPhotoUrl: function () {
          var S = this.connector.connection,
            w = new s(S.url).getCgiScript(),
            v = this.model.get("photo_url");
          if (v && v.indexOf("?") > 0) return s.combine(w, v);
        },
        _setPersonalizedImage: function (S) {
          this._releasePhotoUrl(), (this._photoUrl = URL.createObjectURL(S));
          let w = S;
          var v = new FileReader();
          v.readAsDataURL(w),
            (v.onloadend = m.bind(function () {
              var b = v.result;
              (this.otcData.image = b), this._setOtcData();
            }, this));
        },
        _setOtcData: function () {
          (this.otcData = m.extend(this.otcData, {
            image: this.otcData.image ?? "",
            initials: this.model.attributes.initials,
            arialabel: m.str.sformat(
              f.profileMenuAria,
              this.model.get("initials"),
              this.model.get("display_name")
            ),
            collection: this.collection,
          })),
            this.trigger("data:synced");
        },
        _releasePhotoUrl: function () {
          this._photoUrl &&
            (URL.revokeObjectURL(this._photoUrl), (this._photoUrl = void 0));
        },
      });
      return C;
    }
  ),
  csui.define(
    "csui/themes/carbonfiber/ot-icons/icons_csui_header",
    [],
    function () {
      typeof otIconsRepository > "u" && (window.otIconsRepository = {}),
        (window.otIconsRepository.csui_header = {
          csui_header_fav42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .metaphor--header-header_fav42{fill:#FFFFFF;} </style> <path class="metaphor--header-header_fav42 ot-metaphor" d="M21.157,11.275l2.614,5.3c0.036,0.073,0.089,0.136,0.154,0.183  c0.066,0.048,0.142,0.079,0.222,0.091l5.846,0.849c0.092,0.013,0.179,0.052,0.251,0.112c0.071,0.06,0.124,0.139,0.153,0.228  c0.029,0.089,0.032,0.184,0.01,0.274c-0.022,0.09-0.07,0.173-0.137,0.238l-4.23,4.123c-0.058,0.057-0.102,0.127-0.127,0.204  c-0.025,0.077-0.031,0.159-0.017,0.239l1,5.822c0.016,0.092,0.005,0.186-0.03,0.273c-0.035,0.086-0.094,0.161-0.169,0.216  s-0.165,0.087-0.258,0.094c-0.093,0.007-0.186-0.013-0.269-0.056l-5.228-2.749c-0.072-0.038-0.152-0.057-0.233-0.057  s-0.161,0.02-0.233,0.057l-5.228,2.749c-0.083,0.043-0.175,0.063-0.269,0.056c-0.093-0.007-0.182-0.039-0.258-0.094  s-0.134-0.13-0.169-0.216c-0.035-0.086-0.045-0.181-0.03-0.273l1-5.822c0.014-0.08,0.008-0.162-0.017-0.239  c-0.025-0.077-0.069-0.147-0.127-0.204l-4.23-4.123c-0.067-0.065-0.114-0.148-0.137-0.238c-0.022-0.091-0.019-0.186,0.01-0.274  c0.029-0.089,0.082-0.168,0.153-0.228c0.071-0.06,0.158-0.099,0.25-0.112l5.846-0.849c0.08-0.012,0.156-0.043,0.222-0.091  c0.066-0.048,0.118-0.111,0.154-0.183l2.614-5.3c0.042-0.083,0.106-0.152,0.184-0.201C20.527,11.026,20.618,11,20.711,11  c0.093,0,0.183,0.026,0.262,0.074C21.052,11.123,21.115,11.192,21.157,11.275L21.157,11.275z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="21.0" /></svg>',
          },
          csui_header_help42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .metaphor--header-header_help42{fill:#FFFFFF;} </style> <path class="metaphor--header-header_help42 ot-metaphor" d="M22.032,24.441c0-1.92,0.698-2.469,2.768-3.915c1.92-1.347,2.943-2.494,2.943-4.564  c0-3.042-2.369-4.963-6.06-4.963c-2.17,0-3.666,0.549-4.738,1.446c-0.898,0.748-1.521,1.746-1.87,2.843  C15.025,15.439,15,15.589,15,15.713c0,0.549,0.449,0.848,0.923,0.973c0.15,0.025,0.299,0.05,0.449,0.05  c0.449,0,0.848-0.225,1.047-0.823c0.573-1.696,1.845-2.868,4.14-2.868c2.369,0,3.791,1.172,3.791,3.017  c0,1.272-0.549,1.92-2.394,3.217c-1.471,0.997-1.746,1.247-2.244,1.895c-0.673,0.848-0.923,1.671-0.923,3.242v0.569  c0,0.648,0.499,1.102,1.147,1.102c0.623,0,1.097-0.453,1.097-1.102V24.441z M20.885,27.559c-0.973,0-1.721,0.673-1.721,1.721  c0,1.047,0.748,1.721,1.721,1.721c0.948,0,1.721-0.673,1.721-1.721C22.606,28.232,21.833,27.559,20.885,27.559z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="21.0" /></svg>',
          },
          csui_header_search42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .metaphor--header-header_search42{fill:#FFFFFF;} </style> <path class="metaphor--header-header_search42 ot-metaphor" d="M30.707,29.293l-5.052-5.052c1.09-1.392,1.746-3.14,1.746-5.04c0-4.521-3.679-8.2-8.2-8.2  S11,14.679,11,19.2s3.679,8.2,8.2,8.2c1.901,0,3.648-0.656,5.04-1.746l5.052,5.052C29.488,30.902,29.744,31,30,31  s0.512-0.098,0.707-0.293C31.098,30.316,31.098,29.684,30.707,29.293z M19.2,25.4c-3.419,0-6.2-2.781-6.2-6.2s2.781-6.2,6.2-6.2  s6.2,2.781,6.2,6.2S22.619,25.4,19.2,25.4z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="21.0" /></svg>',
          },
          csui_header_user42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"> <circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0" /><style type="text/css"> .metaphor--header-header_user42{fill:#FFFFFF;} </style> <path class="metaphor--header-header_user42 ot-metaphor" d="M30,29.509v-0.965c0-0.088,0-0.175,0-0.263v-0.088c-0.088-0.877-0.088-1.316-0.439-2.281  c-0.175-0.614-0.614-1.053-1.316-1.403c-0.702-0.263-1.491-0.439-2.193-0.614c-0.702-0.088-1.316-0.263-1.754-0.439  c-0.263-0.175-0.526-0.351-0.789-0.614c-0.088-0.175-0.263-0.263-0.263-0.439l-0.351-0.351l0.351-0.263  c0.351-0.263,0.614-0.614,0.877-0.965c0.351-0.526,0.614-1.14,0.702-1.93l0.088-0.263l0.263-0.088c0.088,0,0.088-0.088,0.176-0.175  c0.088-0.175,0.175-0.439,0.263-0.614c0.088-0.439,0-0.702-0.088-0.877l-0.088-0.175l0.088-0.351  c0.088-0.351,0.088-0.79,0.088-1.228c-0.088-0.79-0.263-1.491-0.263-1.491c-0.176-0.614-0.614-1.316-1.316-1.754  C23.509,11.439,22.544,11,21.14,11c-1.404,0-2.368,0.526-2.895,0.877c-0.702,0.526-1.228,1.14-1.316,1.754  c0,0.088-0.175,0.789-0.263,1.491c0,0.439,0,0.877,0.088,1.228l0.088,0.351l-0.088,0.088c-0.088,0.175-0.176,0.439-0.088,0.877  c0.088,0.263,0.175,0.526,0.263,0.614s0.176,0.175,0.176,0.175l0.263,0.088l0.088,0.263c0.175,0.702,0.439,1.404,0.702,1.93  c0.263,0.351,0.526,0.702,0.877,0.965l0.351,0.263l-0.175,0.351c-0.088,0.175-0.175,0.351-0.263,0.439  c-0.175,0.263-0.439,0.439-0.789,0.614c-0.439,0.175-1.053,0.351-1.754,0.439c-0.789,0.176-1.579,0.263-2.281,0.614  s-1.14,0.789-1.316,1.403c-0.263,0.965-0.351,1.491-0.439,2.281c0,0.175-0.088,0.263-0.088,0.439v0.965  c0,0.789,0.702,1.491,1.491,1.491h14.737C29.298,31,30,30.386,30,29.509z" /> <circle class="ot-focus" fill="none" stroke="none" cx="21" cy="21" r="21.0" /></svg>',
          },
          csui_li_header_aviator42: {
            category: "header",
            svg: '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 42 42" xml:space="preserve" class="ot-svg ot-svg--header"><circle class="ot-state" fill="none" stroke="none" cx="21" cy="21" r="20.0"></circle><style type="text/css"> .st0--header-li_header_aviator42{fill:#333333;} </style><g transform="translate(6.000000,37.000000) scale(0.035000,-0.035000)" fill="#ffffff" stroke="none"><path d="M410 683 c-134 -359 -191 -516 -188 -528 2 -10 27 -3 97 26 51 21 109 39 128 39 19 0 72 -17 119 -37 46 -20 87 -34 90 -30 8 8 -206 587 -217 587 -4 0 -17 -26 -29 -57z"></path><path d="M20 595 c0 -22 33 -76 59 -98 30 -25 40 -27 120 -27 l88 0 22 59 c11 32 21 61 21 65 0 3 -70 6 -155 6 -85 0 -155 -2 -155 -5z"></path><path d="M550 590 c0 -5 9 -34 21 -65 l20 -55 82 0 c93 0 135 18 162 69 31 61 30 61 -135 61 -89 0 -150 -4 -150 -10z"></path><path d="M106 425 c15 -50 79 -109 113 -103 16 3 54 99 43 109 -4 4 -42 9 -84 11 -74 3 -78 2 -72 -17z"></path><path d="M610 433 c0 -19 35 -113 42 -113 28 0 80 33 98 62 33 54 29 58 -60 58 -44 0 -80 -3 -80 -7z"></path></g><defs xmlns="http://www.w3.org/2000/svg"><radialGradient id="radial0" gradientUnits="userSpaceOnUse" cx="0" cy="0" fx="0" fy="0" r="1" gradientTransform="matrix(-0.718767,15.382919,-38.254862,-1.648682,3.360248,3.602162)"><stop offset="1" style="stop-color:rgb(100%,100%,100%);stop-opacity:1;"></stop></radialGradient></defs></svg>',
          }
        });
    }
  ),
  csui.define(
    "csui/controls/app.header/app.header.controls/csui.app.header.controls",
    ["csui/themes/carbonfiber/ot-icons/icons_csui_header"],
    function () {
      return [
        {
          id: "csui/controls/app.header/app.header.controls/logo/logo.view",
          type: "logo",
        },
        {
          id: "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
          sequence: 50,
          type: "progress",
        },
        {
          id: "csui/controls/app.header/app.header.controls/search.box/search.box.view",
          sequence: 100,
          type: "search",
        },
        {
          id: "csui/controls/app.header/app.header.controls/favorites/favorites.view",
          sequence: 200,
          type: "button",
        },
        {
          id: "csui/controls/app.header/app.header.controls/help/help.view",
          sequence: 300,
          type: "button",
        },
        {
          id: "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
          sequence: 999,
          type: "menu",
        },
      ];
    }
  ),
  csui.define("csui/utils/proxysettings/impl/nls/proxydynamic.lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/utils/proxysettings/impl/nls/root/proxydynamic.lang", {
    workAs: "Work as:",
    endWorkAs: "End working as {0}",
    workingAs: "Working as {0}",
    workingAsMessage: "You are working as {0}",
  }),
  csui.define(
    "csui/utils/proxysettings/proxy.dynamic.menu",
    [
      "module",
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/proxy",
      "csui/utils/command.error",
      "csui/utils/contexts/factories/user",
      "i18n!csui/utils/proxysettings/impl/nls/proxydynamic.lang",
    ],
    function (x, m, p, y, s, e, r, a) {
      "use strict";
      var d;
      function t(i) {
        if (d || !s.enabled()) return m.Deferred().resolve([]);
        var o = m.Deferred(),
          n =
            i.connector.getConnectionUrl().getApiBase("v2") +
            "members/proxies/targets",
          u = { url: n, method: "GET" },
          c = [],
          h = i.context.getModel(r);
        return (
          h.get("proxy_proxy_user_id")
            ? ((d = !0),
              c.push({
                profileMenu: {
                  signature: "SwitchToNonProxyUser",
                  name: p.str.sformat(a.endWorkAs, h.get("display_name")),
                  group: "proxy",
                },
              }),
              y.showMessage(
                "warning",
                p.str.sformat(a.workingAs, h.get("display_name")),
                p.str.sformat(a.workingAsMessage, h.get("display_name"))
              ),
              o.resolve(c))
            : i.connector
                .makeAjaxCall(u)
                .then(function (f) {
                  (d = !0),
                    p.each(f.results.data, function (k) {
                      c.push({
                        profileMenu: {
                          groupBy: "proxy",
                          signature: "SwitchToProxyUser",
                          name: k.display_name,
                          userid: k.id,
                          group: "proxy",
                          isSubItem: !0,
                        },
                      });
                    }),
                    f.results.data.length > 0 &&
                      c.push({
                        profileMenu: {
                          groupBy: "proxy",
                          signature: "SwitchToProxyUser",
                          name: a.workAs,
                          group: "proxy",
                          isLabel: !0,
                        },
                      }),
                    o.resolve(c);
                })
                .catch(function (f) {
                  o.resolve(c);
                }),
          o.promise()
        );
      }
      return t;
    }
  ),
  csui.define(
    "csui/utils/usersettings/cm.dynamic.menu",
    [
      "module",
      "csui/lib/jquery",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/contexts/factories/user",
      "i18n!csui/utils/usersettings/impl/nls/lang",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e;
      function r(a) {
        if (e) return m.Deferred().resolve([]);
        e = !0;
        let d = m.Deferred(),
          t = [];
        return (
          a.context.getModel(y).get("type") === 10 &&
            (t.push({
              profileMenu: {
                signature: "SwitchToNonCMUser",
                name: s.endWorkAsCM,
                group: "proxy",
              },
            }),
            p.showMessage("warning", s.cmMode, s.workingAsMessage)),
          d.resolve(t),
          d.promise()
        );
      }
      return r;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<otc-button type="button" class="csui-acc-focusable csui-sidebar-item ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "iconClass") || (e != null ? i(e, "iconClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 70 },
                      end: { line: 1, column: 83 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "tooltip") || (e != null ? i(e, "tooltip") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 92 },
                      end: { line: 1, column: 103 },
                    },
                  })
                : t)
            ) +
            '" icon="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "iconName") || (e != null ? i(e, "iconName") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "iconName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 111 },
                      end: { line: 1, column: 123 },
                    },
                  })
                : t)
            ) +
            `"> 
</otc-button>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_pman.sidebar.item",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/pman.sidebar.item.view",
    [
      "csui/lib/marionette3",
      "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.item",
      "csui/controls/icons.v2",
    ],
    function (x, m) {
      "use strict";
      return x.View.extend({
        constructor: function (s) {
          x.View.prototype.constructor.apply(this, arguments);
        },
        tagName: "li",
        template: m,
        templateContext: function () {
          return {
            iconClass: "csui-sidebar-" + this.model.get("name") + "-btn",
            tooltip: this.model.get("name"),
          };
        },
        events: {
          "click .csui-sidebar-item:not(.binf-active)": function () {
            this.showPanel();
          },
          "keydown .csui-sidebar-item:not(.binf-active)": function (y) {
            (y.key === "Enter" || y.key === " ") && this.showPanel();
          },
        },
        showPanel: function () {
          const y = this.model.getPanelView(this.options),
            s = this.model.getPanelTitle();
          this.trigger("show:panel", this, y, s);
        },
      });
    }
  ),
  csui.define(
    "csui/models/sidebar.items",
    ["csui/lib/backbone", "csui/models/sidebar.item"],
    function (x, m) {
      "use strict";
      var p = x.Collection.extend({
        model: m,
        constructor: function (s, e) {
          x.Collection.prototype.constructor.apply(this, arguments);
        },
      });
      return p;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/sidebar.items",
    [
      "csui/lib/underscore",
      "csui/models/sidebar.items",
      "csui-ext!csui/perspective.manage/sidebar/sidebar.items",
    ],
    function (x, m, p) {
      "use strict";
      let y = new m();
      return (
        p &&
          y.add(
            x
              .chain(p)
              .flatten(!0)
              .map(function (s) {
                return new s();
              })
              .sortBy((s) => s.get("sequence"))
              .value()
          ),
        y
      );
    }
  ),
  csui.define("csui/perspective.manage/sidebar/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/perspective.manage/sidebar/impl/nls/root/lang", {
    layouts: "Layouts",
    widgets: "Widgets",
    titleClearIcon: "Clear",
    sideBarCloseIcon: "Close",
    help: "Help",
    widgetSearchPlaceholder: "Search widgets",
    titleSearchIcon: "Search",
  }),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-ribbon-panel csui-normal-scrolling">
    <ul class="csui-pman-sidebar-ribbon"></ul>
    <button class="icon icon-help" title="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "help") : e, e)) +
            `"></button>
</div>

<div class="csui-sidebar-slide-container">
    <div class="csui-sidebar-slide-main">
        <div class="csui-sidebar-slide-header">
			<h3 class="csui-sidebar-slide-title">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 40 },
                      end: { line: 9, column: 49 },
                    },
                  })
                : t)
            ) +
            `</h3>
			<div class="csui-sidebar-slide-close" title="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "sideBarCloseIcon") : e, e)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "sideBarCloseIcon") : e, e)
            ) +
            `" tabindex='0' id="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `"> 
			</div>
		</div>
		<div class="csui-sidebar-slide-body"></div>
	</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_pman.sidebar.container",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/pman.sidebar.container.view",
    [
      "csui/lib/marionette3",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/perspective.manage/sidebar/pman.sidebar.item.view",
      "csui/models/sidebar.items",
      "csui/perspective.manage/sidebar/sidebar.items",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
      "css!csui/perspective.manage/sidebar/impl/pman.sidebar.container",
      "csui/controls/icons.v2",
    ],
    function (x, m, p, y, s, e, r) {
      "use strict";
      return x.CompositeView.extend({
        tagName: "div",
        template: r,
        templateContext: function () {
          return { sideBarCloseIcon: e.sideBarCloseIcon, help: e.help };
        },
        ui: {
          slideTitle: ".csui-sidebar-slide-title",
          slideBody: ".csui-sidebar-slide-body",
          closeIcon: ".csui-sidebar-slide-close",
          helpIcon: ".csui-ribbon-panel .icon-help",
          sideBarItem: ".csui-sidebar-item",
          sidebarSlideContainer: ".csui-sidebar-slide-container",
        },
        className: "csui-sidebar-panel",
        events: {
          "keydown @ui.sidebarSlideContainer": "onKeyDownSidebarPanel",
          "keydown @ui.sideBarItem": "onOpenPanelKeyDown",
          "click @ui.closeIcon": "closeSlidePanel",
          "click @ui.helpIcon": "onClickHelp",
          "keydown @ui.helpIcon": "onKeydownHelp",
          "keydown @ui.closeIcon": "onKeydowncloseIcon",
        },
        childViewContainer: "ul.csui-pman-sidebar-ribbon",
        childView: p,
        childViewOptions: function () {
          return this.options;
        },
        childViewTriggers: {
          "set:active": "child:set:active",
          "show:panel": "child:show:panel",
        },
        onRender: function () {
          this.el
            .closest(".csui-sidebar")
            ?.classList.remove("csui-sidebar-open"),
            (this.slideRegion = new x.Region({ el: this.ui.slideBody }));
        },
        constructor: function (t) {
          (this.options = t || {}),
            x.CompositeView.prototype.constructor.apply(this, arguments);
          let i = this,
            o = new y();
          s.filter((n) => n.isEnabled(i.options) && o.add(n)),
            (this.collection = o),
            (this.helpView = new m(t)),
            this.listenTo(t.context, "open:rules", this.openSettingsPanel),
            this.listenTo(t.context, "close:sidepanel", this.closeSlidePanel);
        },
        onChildShowPanel(d, t, i) {
          this.openSlidePanel(t, i), this.setActive(d);
        },
        onChildSetActive(d) {
          this.setActive(d);
        },
        openSlidePanel: function (d, t) {
          this.slideRegion.show(d),
            this.el
              .closest(".csui-sidebar")
              ?.classList.add("csui-sidebar-open"),
            this.ui.slideTitle.text(t),
            this.ui.slideTitle.attr({ "aria-label": t, title: t }),
            this.ui.closeIcon.attr({ id: t });
        },
        closeSlidePanel: function () {
          this.el
            .closest(".csui-sidebar")
            ?.classList.remove("csui-sidebar-open"),
            this.clearActive();
        },
        onClickHelp: function () {
          this.helpView.triggerMethod("click:help", "editpage");
        },
        onOpenPanelKeyDown: function (d) {
          let t = this.el.querySelectorAll(
              "otc-button:not(:disabled), button:not(:disabled)"
            ),
            o = Array.from(
              this.el.querySelectorAll(".csui-pman-sidebar-ribbon li")
            ).indexOf(d.target.parentElement);
          switch (d.key) {
            case "ArrowUp":
              o > 0 && t[o - 1].focus(), d.preventDefault();
              break;
            case "ArrowDown":
              d.preventDefault(),
                o < t.length - 1 && o >= 0 && t[o + 1].focus();
              break;
            case "Tab":
              d.shiftKey && d.key === "Tab"
                ? this.options?.context?.pmanView?.ui.addPageBtn[0].focus()
                : this._setFocusOnFirstWidget(),
                d.preventDefault();
              break;
            case "Escape":
              this.closeSlidePanel();
              break;
          }
        },
        onKeyDownSidebarPanel: function (d) {
          let t;
          d.key === "Escape" &&
            ((t = this.el.querySelector(".csui-ribbon-panel [toggled]")),
            this.closeSlidePanel(),
            t.focus());
        },
        onKeydownHelp: function (d) {
          let t = this.el.querySelectorAll("otc-button:not(:disabled)");
          switch (d.key) {
            case "ArrowUp":
              t[t.length - 1].focus();
              break;
            case "Tab":
              this._setFocusOnFirstWidget();
              break;
          }
        },
        onKeydowncloseIcon: function (d) {
          switch (d.key) {
            case "Enter":
              this.closeSlidePanel(), this._setFocusOnSettingItem(d);
              break;
            case "Tab":
              d.shiftKey && d.key === "Tab" && this._setFocusOnSettingItem(d);
              break;
          }
        },
        _setFocusOnFirstWidget: function () {
          let d = document.querySelectorAll(
              ".cs-perspective-panel .cs-perspective .csui-pman-editable-widget"
            )[0],
            t = d.querySelector(".shortcut-group-wrapper");
          t?.getAttribute("tabindex") === "0"
            ? t.focus()
            : d.querySelectorAll(".wrapper-button")[0].focus();
        },
        _setFocusOnSettingItem: function (d) {
          let t = ".csui-sidebar-" + d.target.getAttribute("id") + "-btn";
          document.querySelector(t).focus(), d.preventDefault();
        },
        setActive: function (d) {
          this.clearActive(),
            d.el
              .querySelector(".csui-sidebar-item")
              .setAttribute("toggled", ""),
            this.ui.slideBody[0]
              ?.querySelectorAll("*[tabindex], button, input.search-widget")[0]
              ?.focus();
        },
        clearActive: function () {
          this.el
            .querySelectorAll(".csui-sidebar-item")
            .forEach((d) => d.removeAttribute("toggled"));
        },
        openSettingsPanel: function () {
          if (this.children.length === 0) return;
          const d = this.children.find(
            (t) => t.model?.get("signature") === "Settings"
          );
          if (d) {
            const t = d.model?.getPanelView(this.options),
              i = d.model?.getPanelTitle();
            this.onChildShowPanel(d, t, i);
          }
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/list.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return "binf-active";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "className") : e, e)) +
            " " +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "active") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 1, column: 31 },
                  end: { line: 1, column: 68 },
                },
              }
            )) != null
              ? t
              : "") +
            '" title="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `"
     draggable="` +
            s.escapeExpression(s.lambda(e != null ? i(e, "draggable") : e, e)) +
            `" tabindex= "0">
  <span>` +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `</span>
  <div class="csui-layout-icon ` +
            s.escapeExpression(s.lambda(e != null ? i(e, "iconClass") : e, e)) +
            `"></div>
</div>`
          );
        },
      });
      return p.registerPartial("csui_perspective.manage_impl_list.item", y), y;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts.panel.item.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "hbs!csui/perspective.manage/impl/list.item",
    ],
    function (x, m, p) {
      "use strict";
      return m.View.extend({
        constructor: function (e) {
          m.View.prototype.constructor.apply(this, arguments);
        },
        tagName: "div",
        template: p,
        templateContext: function () {
          return {
            draggable: !!this.options.draggable,
            className: this.options.itemClassName,
            iconClass: this.model.get("icon"),
            active: this.model.get("type") === this.options?.perspectiveType,
          };
        },
        events: {
          "click .csui-layout-item:not(.binf-active)": x.debounce(
            function () {
              this.trigger("change:layout", this);
            },
            200,
            !0
          ),
          "keydown .csui-layout-item": x.debounce(
            function (s) {
              switch (s.key) {
                case "Enter":
                case " ":
                  this.trigger("change:layout", this);
                  break;
                case "ArrowUp":
                  this.$el.prev().length &&
                    this.$el
                      .prev()[0]
                      .querySelector("*[tabindex], .csui-accordion-header")
                      .focus();
                  break;
                case "ArrowDown":
                  this.$el.next().length &&
                    this.$el
                      .next()[0]
                      .querySelector("*[tabindex], .csui-accordion-header")
                      .focus();
                  break;
                case "Tab":
                  s.shiftKey &&
                    s.key === "Tab" &&
                    this.$el
                      .parents(".csui-sidebar-slide-main")[0]
                      .querySelectorAll(".csui-sidebar-slide-close")[0]
                      .focus(),
                    s.preventDefault();
                  break;
              }
            },
            200,
            !0
          ),
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/list",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="cs-header binf-panel-heading cs-header-with-go-back" role="link"
     aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 17 },
                      end: { line: 2, column: 31 },
                    },
                  })
                : t)
            ) +
            `">
  <span class="icon circular arrow_back cs-go-back" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTooltip") ||
                  (e != null ? i(e, "goBackTooltip") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 59 },
                      end: { line: 3, column: 76 },
                    },
                  })
                : t)
            ) +
            `"></span>
</div>
<div class="cs-content">
  <div class="cs-list-group"></div>
</div>
`
          );
        },
      });
      return p.registerPartial("csui_perspective.manage_impl_list", y), y;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts.panel.view",
    [
      "csui/lib/backbone",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/perspective.manage/sidebar/layouts.panel.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/list",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      return p.CollectionView.extend({
        constructor: function (d) {
          if (
            (d || (d = {}),
            d.data || (d.data = {}),
            p.CollectionView.call(this, d),
            this.options.data?.items)
          ) {
            if (!this.collection) {
              const t = x.Collection.extend({
                model: x.Model.extend({ idAttribute: null }),
              });
              this.collection = new t();
            }
            this.collection.add(this.options.data.items);
          }
        },
        className: "csui-pman-list csui-normal-scrolling",
        childViewTriggers: {
          "change:layout": "child:Change:Layout",
          "set:active": "child:set:active",
        },
        onChildChangeLayout(a) {
          this.onChangeLayout(a);
        },
        onChildSetActive(a) {
          this.setActive(a);
        },
        template: e,
        childViewContainer: ".cs-list-group",
        childView: y,
        childViewOptions: function () {
          return this.options;
        },
        setActive: function (a) {
          this.el
            .querySelectorAll(".csui-layout-item")
            .forEach((d) => d.classList.remove("binf-active")),
            a.el
              .querySelector(".csui-layout-item")
              .classList.add("binf-active");
        },
        onChangeLayout: function (a) {
          let d = this,
            t = a.model.get("type"),
            i = this.options.perspectiveType;
          (i === "sidepanel-right" || i === "sidepanel-left") &&
          (t === "sidepanel-right" || t === "sidepanel-left")
            ? (d.setActive(a),
              d.options.context.pmanView.trigger("swap:layout", t))
            : csui.require(
                ["csui/dialogs/modal.alert/modal.alert"],
                function (o) {
                  o.confirmWarning(
                    s.changePageLayoutConfirmatonText,
                    s.layouts,
                    {
                      buttons: {
                        showYes: !0,
                        labelYes: s.proceedButton,
                        showNo: !0,
                        labelNo: s.changeLayoutCancelButton,
                      },
                    }
                  ).done(function (n) {
                    n &&
                      (d.setActive(a),
                      d.options.context.pmanView.trigger(
                        "change:layout",
                        a.model.get("type")
                      ),
                      d.options.context.pmanView.context.trigger(
                        "reset:widget:panel"
                      ));
                  });
                }
              );
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/perspectivelayouts",
    [
      "module",
      "csui/lib/underscore",
      "i18n",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui-ext!perspective.manage/impl/perspectivelayouts",
    ],
    function (x, m, p, y, s) {
      var e = m.extend({ enableNewlayoutOption: !1 }, x.config());
      const r = p?.settings.rtl;
      var a = [
        {
          title: y.LcrLayoutTitle,
          type: "left-center-right",
          icon: "csui-layout-lcr",
        },
        { title: y.FlowLayoutTitle, type: "flow", icon: "csui-layout-flow" },
      ];
      return (
        e.enableNewlayoutOption &&
          a.push(
            {
              title: y.RSPLayoutTitle,
              type: "sidepanel-right",
              icon: r
                ? "csui-layout-sidepanel-left"
                : "csui-layout-sidepanel-right",
            },
            {
              title: y.LSPLayoutTitle,
              type: "sidepanel-left",
              icon: r
                ? "csui-layout-sidepanel-right"
                : "csui-layout-sidepanel-left",
            }
          ),
        s && (a = m.union(a, s)),
        a
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/layouts",
    [
      "csui/models/sidebar.item",
      "csui/perspective.manage/sidebar/layouts.panel.view",
      "csui/perspective.manage/impl/perspectivelayouts",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
    ],
    function (x, m, p, y) {
      "use strict";
      return x.extend({
        defaults: {
          signature: "Layouts",
          sequence: 1,
          name: y.layouts,
          iconClass: "csui-sidebar-layouts-btn",
          iconName: "csui_action:action_layouts32",
          panelTitle: y.layouts,
        },
        getPanelView: function (e) {
          document.body.classList.contains("csui-top-ribbon-enabled") &&
            p[0].type === "left-center-right" &&
            p.splice(0, 1);
          let r = e?.data ? e : { data: { items: p } };
          return (
            (r.draggable = !!r.data.draggable),
            (r.itemClassName = "csui-layout-item"),
            (r.context = e.context),
            (r.perspectiveType = e.perspectiveType),
            new m(r)
          );
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.widget",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="cs-item-picker" role="combobox"
     aria-expanded="false" aria-haspopup="listbox">
     <input id="search-input" type="text" class="search-widget binf-form-control cs-search" autocomplete="off"
          aria-autocomplete="list" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "ariaLabel") || (e != null ? i(e, "ariaLabel") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "ariaLabel",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 47 },
                      end: { line: 4, column: 60 },
                    },
                  })
                : t)
            ) +
            `"
          placeholder="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "widgetSearchPlaceholder") ||
                  (e != null ? i(e, "widgetSearchPlaceholder") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "widgetSearchPlaceholder",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 23 },
                      end: { line: 5, column: 50 },
                    },
                  })
                : t)
            ) +
            `" />
     <div class="search-widget cs-search-clear csui-icon formfield_clear" title="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "titleClearIcon") : e, e)
            ) +
            `"
          role="button" aria-label="` +
            s.escapeExpression(
              s.lambda(e != null ? i(e, "titleClearIcon") : e, e)
            ) +
            `" tabindex="0"></div>
     <div class="search-widget cs-search-icon" title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "titleSearchIcon") ||
                  (e != null ? i(e, "titleSearchIcon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "titleSearchIcon",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 54 },
                      end: { line: 8, column: 73 },
                    },
                  })
                : t)
            ) +
            `"
          role="button" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "titleSearchIcon") ||
                  (e != null ? i(e, "titleSearchIcon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "titleSearchIcon",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 36 },
                      end: { line: 9, column: 55 },
                    },
                  })
                : t)
            ) +
            `">
     </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.widget",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/search.widget",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.widget.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.widget",
      "css!csui/perspective.manage/sidebar/impl/search.widget",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return p.View.extend({
        template: s,
        templateContext: function () {
          return {
            titleClearIcon: y.titleClearIcon,
            widgetSearchPlaceholder: y.widgetSearchPlaceholder,
            titleSearchIcon: y.titleSearchIcon,
          };
        },
        tagName: "div",
        ui: {
          searchInput: ".search-widget.cs-search",
          searchclear: ".search-widget.cs-search-clear",
        },
        events: {
          "keyup @ui.searchInput": "onKeyUp",
          "keydown @ui.searchInput": "onKeyDownsearchInput",
          "click @ui.searchclear": "onClickClear",
          "keydown @ui.searchclear": "onClickClear",
          "input @ui.searchInput": "onSearchInput",
        },
        constructor: function (a) {
          (this.options = a || {}),
            p.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          this.ui.searchInput.show(), this.updateClearStyle();
        },
        updateClearStyle: function () {
          let r = this.ui.searchInput.val()?.length > 0;
          this.ui.searchclear.toggleClass("binf-hidden", !r);
        },
        onClickClear: function (r) {
          (r.type === "click" || r.key === "Enter") &&
            (this.ui.searchInput.val(""),
            this.updateClearStyle(),
            this.ui.searchInput[0].focus(),
            this.trigger("search:closed"));
        },
        onKeyUp: function (r) {
          this.updateClearStyle(),
            this.ui.searchInput.val() === "" &&
              (["Tab", "Enter", "Shift", "ArrowUp", "ArrowDown"].includes(
                r.key
              ) ||
                (this.trigger("item:clear"),
                this.ui.searchInput.removeAttr("aria-activedescendant")));
        },
        onKeyDownsearchInput: function (r) {
          switch (r.key) {
            case "Tab":
              x(this.ui.searchclear).is(":visible") &&
                (r.shiftKey && r.key === "Tab"
                  ? this.updateClearStyle()
                  : (r.preventDefault(),
                    r.stopPropagation(),
                    this.ui.searchclear[0].focus()));
              break;
          }
        },
        onSearchInput: function (r) {
          let a = x(r.target).val().split(" ").join("").trim().toLowerCase();
          this.searchTimeout && clearTimeout(this.searchTimeout),
            (this.searchTimeout = setTimeout(() => {
              this.trigger("search:performed", a),
                a.length === 0 && this.trigger("search:closed");
            }, 200));
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/mixins/manifest.edit.mixin",
    ["csui/lib/underscore", "csui/lib/jquery"],
    function (x, m) {
      "use strict";
      var p = {
        mixin: function (y) {
          return x.extend(y, {
            objectToPrimitive: function (s) {
              var e = m.extend(!0, {}, this.manifest),
                r = this.manifest.schema.properties[s],
                a = this.manifest.options.fields[s],
                d = a && a.items.fields,
                t = x.keys(r.items.properties)[0];
              this.manifest.modifiedItems = e;
              var i = r.items.properties[t];
              delete r.items.properties,
                (r.items.type = i.type),
                (r.title = i.title),
                (r.required = r.items.required && r.items.required.length > 0),
                (r.itemKey = t),
                d && (delete a.items.fields, (a.items = x.values(d)[0]));
            },
            updateDataToPrimitive: function (s, e) {
              var r = [],
                a = this.manifest.schema.properties[e].itemKey;
              s[e].length == 0 && r.push(""),
                s[e].forEach(function (d) {
                  r.push(d[a]);
                }),
                (s[e] = r);
            },
            getPrimitiveToObjectvalues: function (s, e) {
              var r = this.manifest.schema.properties[s].itemKey;
              if (r) {
                this.manifest.modifiedItems &&
                  ((this.manifest.options.fields[s].items =
                    this.manifest.modifiedItems.options.fields[s].items),
                  (this.manifest.schema.properties[s].items =
                    this.manifest.modifiedItems.schema.properties[s].items));
                for (var a in e[s]) {
                  var d = {};
                  (d[r] = e[s][a]), (e[s][a] = d);
                }
                return e;
              }
              return e;
            },
          });
        },
      };
      return p;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/options.form.wrapper",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-pman-form-header">
    <div class="csui-pman-form-title">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 49 },
                    },
                  })
                : t)
            ) +
            `</div>
    <div class="csui-pman-form-description">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "description") ||
                  (e != null ? i(e, "description") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "description",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 44 },
                      end: { line: 3, column: 61 },
                    },
                  })
                : t)
            ) +
            `</div>
    <div class="csui-pman-config-unsupported">
        <div class="csui-state">
            <span class="csui-state-icon csui-icon csui-icon-notification-error-white"></span>
        </div>
        <div class="csui-error-message">
            <span>` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "configNotSupported") ||
                  (e != null ? i(e, "configNotSupported") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "configNotSupported",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 18 },
                      end: { line: 9, column: 42 },
                    },
                  })
                : t)
            ) +
            `</span>
        </div>
    </div>
</div>
<div class="csui-pman-form-content cs-formview-wrapper"></div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_impl_options.form.wrapper",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/impl/options.form",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/impl/options.form.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/lib/alpaca/js/alpaca.lite",
      "csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",
      "csui/perspective.manage/mixins/manifest.edit.mixin",
      "csui/controls/form/form.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/options.form.wrapper",
      "csui/utils/perspective/perspective.util",
      "css!csui/perspective.manage/impl/options.form",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i) {
      var o = y.LayoutView.extend(
          {
            template: t,
            className: "csui-pman-form-wrapper csui-normal-scrolling",
            regions: { bodyRegion: ".csui-pman-form-content" },
            templateHelpers: function () {
              return {
                title: this.options.manifest.title,
                description: this.options.manifest.description,
                configNotSupported: d.configNotSupported,
              };
            },
            ui: {
              unSupportedConfig: ".csui-pman-config-unsupported",
              description: ".csui-pman-form-description",
            },
            events: { keydown: "_onKeyDown" },
            constructor: function (c) {
              (this.options = c || {}),
                (this.manifest = this.options.manifest),
                y.LayoutView.prototype.constructor.apply(this, arguments);
            },
            _createForm: function (u) {
              (this.widgetOptionsFormView = new n({
                context: this.options.context,
                model: u,
                mode: "create",
              })),
                this.listenToOnce(
                  this.widgetOptionsFormView,
                  "render:form",
                  function () {
                    this.trigger("render:form");
                  }.bind(this)
                ),
                this.listenTo(
                  this.widgetOptionsFormView,
                  "change:field",
                  function (c) {
                    this.trigger("change:field", c);
                  }.bind(this)
                );
            },
            _hasSchema: function () {
              return this.manifest && this.manifest.hasConfigForm;
            },
            refresh: function (u) {
              this.widgetOptionsFormView
                ? this.widgetOptionsFormView.refresh(u)
                : u();
            },
            onRender: function () {
              this.ui.unSupportedConfig.hide();
              var u = this._hasSchema();
              if (!u) {
                this.trigger("render:form");
                return;
              }
              var c = this._prepareFormModel();
              (this.hasValidSchema = o._normalizeOptions(
                c.attributes.schema.properties,
                c.attributes.options.fields,
                c.attributes.data
              )),
                this.hasValidSchema
                  ? (this._createForm(c),
                    this.bodyRegion.show(this.widgetOptionsFormView))
                  : (this.ui.description.hide(),
                    this.ui.unSupportedConfig.show(),
                    this.trigger("render:form"));
            },
            onPopoverShow: function (u) {
              this._hasSchema() &&
                !this.hasValidSchema &&
                (u.find(".binf-popover-content").addClass("invalid-options"),
                u.find(".binf-arrow").addClass("invalid-options")),
                this._focusField(".alpaca-container-item-first");
            },
            _focusField: function (u) {
              var c = this.$el.find(u);
              if (c.length) {
                c = c.first();
                var h = c.find(
                    "input:visible, textarea:visible, button.binf-dropdown-toggle:visible"
                  ),
                  f = c.find(".cs-browse-icon");
                h.length &&
                  (f.length ? f.trigger("focus") : h.first().trigger("focus"));
              }
            },
            _onKeyDown: function (u) {
              var c = !0,
                h = m(u.target);
              switch (u.keyCode) {
                case 9:
                  !u.shiftKey && h.parents(".alpaca-container-item-last").length
                    ? (this._focusField(".alpaca-container-item-first"),
                      (c = !1))
                    : u.shiftKey &&
                      h.parents(".alpaca-container-item-first").length &&
                      (this._focusField(".alpaca-container-item-last"),
                      (c = !1));
                  break;
              }
              return c;
            },
            getValues: function () {
              if (this._hasSchema())
                if (this.hasValidSchema) {
                  var u = this.widgetOptionsFormView.getValues();
                  if (this.manifest.modifiedProperties)
                    for (var c in x.keys(u))
                      this.manifest.modifiedProperties.indexOf(x.keys(u)[c]) >=
                        0 &&
                        (u = this.getPrimitiveToObjectvalues(x.keys(u)[c], u));
                  return u;
                } else return this._getOptionsData();
            },
            validate: function () {
              if (!this._hasSchema()) return !0;
              if (!this.hasValidSchema) {
                var u = !0;
                if (i.hasRequiredFields(this.manifest)) {
                  var c = this._getOptionsData(),
                    h = this.manifest.schema.required;
                  x.each(h, function (f) {
                    c[f] || (u = !1);
                  });
                }
                return u;
              }
              return this.widgetOptionsFormView.validate();
            },
            _isPreviewWidget: function () {
              return (
                this.options.widgetConfig.type ===
                "csui/perspective.manage/widgets/perspective.widget"
              );
            },
            _prepareFormModel: function () {
              var u = this._getOptionsData(),
                c = [];
              for (var h in this.manifest.schema.properties) {
                if (h !== "businessobjecttypes") break;
                var f = this.manifest.schema.properties[h];
                f.type === "array" &&
                f.items.type === "object" &&
                x.keys(f.items.properties).length === 1
                  ? (c.push(h),
                    this.objectToPrimitive(h),
                    u[h] && this.updateDataToPrimitive(u, h))
                  : this.manifest.modifiedProperties &&
                    u[h] &&
                    this.updateDataToPrimitive(u, h);
              }
              c.length > 0 && (this.manifest.modifiedProperties = c);
              var k = JSON.parse(JSON.stringify(this.manifest.schema)),
                C = JSON.parse(JSON.stringify(this.manifest.options || {}));
              C || (C = {}),
                C.fields || (C.fields = {}),
                this._addWidgetSizePropertyIfSupported(k, C, u);
              var S = new p.Model({ schema: k, options: C, data: u });
              return S;
            },
            _getOptionsData: function () {
              var u = this.options.widgetConfig.options || {};
              return this._isPreviewWidget() && (u = u.options || {}), u;
            },
            _addWidgetSizePropertyIfSupported: function (u, c, h) {
              if (this.options.perspectiveView.getSupportedWidgetSizes) {
                var f = this.options.perspectiveView.getSupportedWidgetSizes(
                  this.manifest,
                  this.options.widgetView
                );
                if (
                  (this.options.context &&
                    this.options.context.perspective &&
                    (this.options.context.perspective.type ==
                      "sidepanel-right" ||
                    this.options.context.perspective.type == "sidepanel-left"
                      ? this.options.perspectiveView.$el.hasClass(
                          "cs-bcs-perspective-banner"
                        ) && delete u.properties.titlefield
                      : (f = x.filter(f, function (b) {
                          return b.kind !== "heroTile";
                        }))),
                  !(!f || f.length === 0))
                ) {
                  var k = {
                      title: d.widgetSizeTitle,
                      description: d.widgetSizeDescription,
                      type: "string",
                      enum: x.map(f, function (b) {
                        return b.kind;
                      }),
                    },
                    C = {
                      type: "select",
                      optionLabels: x.map(f, function (b) {
                        return b.label;
                      }),
                      removeDefaultNone: !0,
                    },
                    S = x.find(f, function (b) {
                      return b.selected;
                    });
                  S && (h[o.widgetSizeProperty] = S.kind);
                  var w = {};
                  (w[o.widgetSizeProperty] = k),
                    (u.properties = x.extend(w, u.properties));
                  var v = {};
                  (v[o.widgetSizeProperty] = C),
                    (c.fields = x.extend(v, c.fields)),
                    (u.required = u.required || []),
                    u.required.push(o.widgetSizeProperty);
                }
              }
            },
          },
          {
            widgetSizeProperty: "__widgetSize",
            _resolveOptionsType: function (u, c) {
              var h = u.type;
              return (
                h || (h = s.getSchemaType(c)),
                h || (c && s.isArray(c) ? (h = "array") : (h = "object")),
                u && u.enum
                  ? u.enum.length > 3
                    ? "select"
                    : "radio"
                  : s.defaultSchemaFieldMapping[h]
              );
            },
            _normalizeOptions: function (u, c, h) {
              var f = !0;
              return (
                x.each(u, function (k, C) {
                  var S = c[C],
                    w = h[C];
                  S || (c[C] = S = {});
                  var v = S.type;
                  switch (
                    (!v && k.type && (v = o._resolveOptionsType(k, w)),
                    s.getFieldClass(v) || (f = !1),
                    k.type)
                  ) {
                    case "array":
                      if (
                        (S.fields || x.defaults(S, { fields: { item: {} } }),
                        S.items && (S.fields.item = S.items),
                        k.items.type === "object")
                      ) {
                        S.fields.item.type &&
                          !s.getFieldClass(S.fields.item.type) &&
                          (f = !1),
                          S.fields.item.fields || (S.fields.item.fields = {}),
                          (!w || w.length === 0) && (h[C] = w = [{}]);
                        var b = o._normalizeOptions(
                          k.items.properties,
                          S.fields.item.fields,
                          w[0]
                        );
                        b || (f = !1);
                      }
                      w || (h[C] = [null]);
                      break;
                    case "object":
                      w || (h[C] = w = {}), S.fields || (S.fields = {});
                      var _ = o._normalizeOptions(k.properties, S.fields, w);
                      _ || (f = !1);
                      break;
                    default:
                      x.isUndefined(w) && (h[C] = k.default || null);
                      break;
                  }
                }),
                f
              );
            },
          }
        ),
        n = a.extend({
          className: function () {
            var u = a.prototype.className.call(this);
            return u + " perspective-widget-form";
          },
          constructor: function (c) {
            a.apply(this, arguments);
          },
          popover: !1,
          refresh: function (u) {
            this.form && this.form.refresh(u);
          },
          _modifyModel: function () {
            a.prototype._modifyModel.apply(this, arguments),
              (this.alpaca.options.hideInitValidationError = !1);
          },
        });
      return x.extend(n.prototype, e), r.mixin(o.prototype), o;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/widget.drag.template",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t =
            s.lookupProperty ||
            function (i, o) {
              if (Object.prototype.hasOwnProperty.call(i, o)) return i[o];
            };
          return (
            `<div class="csui-widget-template">
  <div class="csui-template-header">` +
            s.escapeExpression(s.lambda(e != null ? t(e, "header") : e, e)) +
            `</div>
  <div class="csui-template-body">` +
            s.escapeExpression(s.lambda(e != null ? t(e, "body") : e, e)) +
            `</div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_impl_widget.drag.template",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.drag.template.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/widget.drag.template",
    ],
    function (x, m, p, y) {
      "use strict";
      var s = m.ItemView.extend({
        constructor: function (r) {
          m.ItemView.prototype.constructor.apply(this, arguments);
        },
        className: "csui-template-wrapper",
        template: y,
        templateHelpers: function () {
          return {
            header: this.options && this.options.title,
            body: p.templateMessage,
          };
        },
        onRender: function () {
          this.$el.data("pman.widget", this.options.newWidget);
        },
      });
      return s;
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/impl/widget.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `
        <div class="` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "attributes") : e) != null
                ? i(t, "draggable")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(2, d, 0),
                inverse: s.program(4, d, 0),
                loc: {
                  start: { line: 11, column: 20 },
                  end: { line: 11, column: 76 },
                },
              }
            )) != null
              ? t
              : "") +
            `"
             data-widget-type="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "dataAttr")
                  : t,
                e
              )
            ) +
            `"
             data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "allowMultiple")
                  : t,
                e
              )
            ) +
            `">
          <div class="csui-widget-item icon-draggable-handle csui-draggable-widget-item"
               data-widget-index="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "index")
                  : t,
                e
              )
            ) +
            '" draggable="true" title="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `">
            <span>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `</span>
            <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "icon")
                  : t,
                e
              )
            ) +
            `"></div>
          </div>
        </div>

        <div class="` +
            ((t = i(r, "if").call(
              e ?? (s.nullContext || {}),
              (t = e != null ? i(e, "attributes") : e) != null
                ? i(t, "draggable")
                : t,
              {
                name: "if",
                hash: {},
                fn: s.program(4, d, 0),
                inverse: s.program(2, d, 0),
                loc: {
                  start: { line: 21, column: 20 },
                  end: { line: 21, column: 76 },
                },
              }
            )) != null
              ? t
              : "") +
            '" data-widget-type="' +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "dataAttr")
                  : t,
                e
              )
            ) +
            `"
             data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "allowMultiple")
                  : t,
                e
              )
            ) +
            `">
          <div class="csui-widget-item icon-draggable-handle" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "disableTitle")
                  : t,
                e
              )
            ) +
            `">
            <span>` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "title")
                  : t,
                e
              )
            ) +
            `</span>
            <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? i(e, "attributes") : e) != null
                  ? i(t, "icon")
                  : t,
                e
              )
            ) +
            `"></div>
          </div>
        </div>

`
          );
        },
        2: function (s, e, r, a, d) {
          return "";
        },
        4: function (s, e, r, a, d) {
          return " binf-hidden ";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<div class="csui-accordion-header" title="' +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `" tabindex="0">
  <div class="csui-accordion-header-title">` +
            s.escapeExpression(s.lambda(e != null ? i(e, "title") : e, e)) +
            `</div>
  <div class="csui-button-icon cs-icon icon-expandArrowDown"></div>
  <div class="csui-button-icon cs-icon icon-expandArrowUp"></div>
</div>
<div class="csui-accordion-content">
  <div class="cs-content csui-list-pannel">
    <div class="cs-list-group">
` +
            ((t = i(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? i(e, "widgets") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 9, column: 6 },
                  end: { line: 29, column: 15 },
                },
              }
            )) != null
              ? t
              : "") +
            `    </div>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial("csui_perspective.manage_impl_widget.item", y), y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.item.view",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/perspective.manage/impl/widget.drag.template.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/impl/widget.item",
    ],
    function (x, m, p, y, s, e, r, a, d) {
      "use strict";
      var t = Object.assign(
          { dragImageOffsetTop: 50, dragImageOffsetLeft: 50 },
          x.moduleConfig("csui/perspective.manage/impl/widget.list.view")
        ),
        i = s.ItemView.extend({
          constructor: function (n) {
            n || (n = {}),
              s.ItemView.prototype.constructor.apply(this, arguments);
          },
          className: "csui-module-group",
          template: d,
          templateHelpers: function () {
            var o = new y.Collection(this.model.attributes.widgets),
              n = a.disableTitle,
              u = 0;
            return (
              o.models.forEach(function (c) {
                c.set(
                  {
                    draggable: !!c.get("canDragAndDrop"),
                    disableTitle: n,
                    dataAttr: c.get("id").replace(/\//g, "-"),
                    allowMultiple: !!c.get("allowMultiple"),
                    index: u++,
                  },
                  { silent: !0 }
                );
              }),
              { widgets: o.models }
            );
          },
          ui: {
            accordionHeader: ".csui-accordion-header",
            accordionContent: ".csui-accordion-content",
            accordionHeaderIcon: ".csui-accordion-header .cs-icon",
            widget: ".csui-draggable-widget-item",
          },
          events: {
            "click @ui.accordionHeader": "toggle",
            "keydown @ui.accordionHeader": "toggle",
            "dragstart @ui.widget": "onDragStart",
            "dragend @ui.widget": "onDragEnd",
          },
          toggle: function () {
            var o = this.ui.accordionHeader.hasClass("csui-accordion-expand");
            this.ui.accordionHeader.toggleClass("csui-accordion-expand"),
              this.options.parentView.$el
                .find(".csui-module-group")
                .removeClass("csui-accordion-visible")
                .find(".csui-accordion-header")
                .removeClass("csui-accordion-expand"),
              o ||
                (this.$el.addClass("csui-accordion-visible"),
                this.ui.accordionHeader.addClass("csui-accordion-expand")),
              e.onTransitionEnd(
                this.ui.accordionContent,
                function () {
                  this.trigger("widgets:expanded");
                },
                this
              );
          },
          onRender: function () {
            var o = p(".perspective-editing .csui-dnd-container");
            o.length && this._makeWidgetSortable();
          },
          _makeWidgetSortable: function () {
            var o = this,
              n = this.$el.find(".csui-widget-item.csui-draggable-widget-item"),
              u = n.parent();
            u.data("pman.widget", this.model.get("widgets")),
              u.sortable({
                connectWith: [
                  ".perspective-editing .csui-dnd-container",
                  ".perspective-editing .pman-trash-area",
                ],
                containment: ".perspective-editing ",
                helper: function (c, h) {
                  var f = h.data("widget-index");
                  return (
                    (o.widgetDragTemplate = new r({
                      title: o.model.get("widgets")[f].get("title"),
                      newWidget: o.model.get("widgets")[f],
                    })),
                    o.widgetDragTemplate.render(),
                    o.widgetDragTemplate.$el.width("220px"),
                    o.widgetDragTemplate.$el.height("220px"),
                    o.widgetDragTemplate.$el.css({ opacity: 0.75 }),
                    o.widgetDragTemplate.$el.appendTo(
                      o.options.parentView.$el.closest(".pman-pannel-wrapper")
                    ),
                    o.widgetDragTemplate.$el
                  );
                },
                tolerance: "pointer",
                cursorAt: {
                  top: t.dragImageOffsetTop,
                  left: t.dragImageOffsetLeft,
                },
                start: function (c, h) {
                  h.item.css("display", "block"),
                    h.placeholder.css("display", "block"),
                    o.dragStart();
                },
                stop: function () {
                  o.dragEnd();
                },
              });
          },
          onDragStart: function (o) {
            var n = p(o.currentTarget).data("widget-index"),
              u = this.model.get("widgets")[n],
              c = o.originalEvent.dataTransfer,
              h = p(".csui-template-wrapper");
            h.find(".csui-template-header").text(u.get("title")),
              this._hasNativeDragImageSupport() &&
                (c.setData("text", JSON.stringify(u.toJSON())),
                c.setDragImage(
                  h[0],
                  t.dragImageOffsetLeft,
                  t.dragImageOffsetTop
                )),
              this.dragStart();
          },
          _hasNativeDragImageSupport: function () {
            var o = window.DataTransfer || window.Clipboard;
            return "setDragImage" in o.prototype;
          },
          onDragEnd: function (o) {
            this.dragEnd();
          },
          dragStart: function () {
            this.$el
              .closest(".csui-pman-panel")
              .addClass("csui-pman-drag-start"),
              p(document.body).addClass("csui-pman-dnd-active");
          },
          dragEnd: function () {
            this.$el
              .closest(".csui-pman-panel")
              .removeClass("csui-pman-drag-start"),
              p(document.body).removeClass("csui-pman-dnd-active");
          },
        });
      return i;
    }
  ),
  csui.define(
    "csui/perspective.manage/impl/widget.list.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/perspective.manage/impl/options.form.view",
      "csui/perspective.manage/impl/widget.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui/models/widget/widget.collection",
      "hbs!csui/perspective.manage/impl/widget.item",
    ],
    function (x, m, p, y, s, e, r, a, d, t) {
      "use strict";
      var i = x.config();
      m.defaults(i, { dragImageOffsetTop: 50, dragImageOffsetLeft: 50 });
      var o = s.ItemView.extend({
        tagName: "div",
        template: t,
        constructor: function (u) {
          u || (u = {}),
            u.data || (u.data = {}),
            u.existsWidgetTypes || (u.existsWidgetTypes = []),
            s.ItemView.call(this, u),
            (this.context = this.options.pmanView.context);
          var c = this;
          (c.widegtsUpdated = !1),
            (this.allWidgets = new d(null, {
              includeView: !1,
              includeToolItems: !1,
            })),
            this.allWidgets.fetch().done(function () {
              (c.collection = c._groupWidgetsByModule()),
                c.render(),
                c.trigger("items:fetched");
            }),
            this.listenTo(
              this.context,
              "update:widget:panel",
              m.bind(function (h) {
                this.widegtsUpdated = !0;
                var f =
                    h.widgetModel && h.widgetModel.type
                      ? h.widgetModel.type
                      : void 0,
                  k =
                    h.oldWidgetModel && h.oldWidgetModel.type
                      ? h.oldWidgetModel.type
                      : void 0;
                if (f) {
                  var C = m.indexOf(this.options.existsWidgetTypes, f);
                  C >= 0
                    ? this.options.existsWidgetTypes.splice(C, 1)
                    : this.options.existsWidgetTypes.push(f),
                    (f = f.replace(/\//g, "-"));
                  var S = this.$el.find(
                    'div[data-widget-type="' +
                      f +
                      '"][data-widget-allow-multiple="false"]'
                  );
                  S.length && S.toggleClass("binf-hidden");
                }
                if (k) {
                  var C = m.indexOf(this.options.existsWidgetTypes, k);
                  C >= 0 && this.options.existsWidgetTypes.splice(C, 1),
                    (k = k.replace(/\//g, "-"));
                  var S = this.$el.find(
                    'div[data-widget-type="' +
                      k +
                      '"][data-widget-allow-multiple="false"]'
                  );
                  S.length && S.toggleClass("binf-hidden");
                }
              }, this)
            ),
            this.listenTo(
              this.context,
              "reset:widget:panel",
              m.bind(function (h) {
                (this.options.existsWidgetTypes = []),
                  (this.widegtsUpdated = !0);
              }, this)
            );
        },
        initialize: function () {
          m.bindAll(this, "renderItem");
        },
        className: "cs-module-list",
        render: function () {
          this.collection && this.collection.each(this.renderItem);
        },
        renderItem: function (n) {
          var u = this,
            c = new r({ model: n, parentView: u, context: this.context });
          c.render(),
            this.listenTo(
              c,
              "widgets:expanded",
              m.bind(this.trigger, this, "dom:refresh", this)
            ),
            p(this.el).append(c.el);
        },
        _groupWidgetsByModule: function () {
          var n = new y.Collection(),
            u = this.allWidgets.filter(function (c) {
              var h = c.get("manifest");
              if (
                !h ||
                !m.has(h, "title") ||
                !m.has(h, "description") ||
                h.deprecated
              )
                return !1;
              var f = JSON.parse(JSON.stringify(h.schema || {})),
                k = JSON.parse(JSON.stringify(h.options || {})),
                C = e._normalizeOptions(f.properties, k.fields || {}, {});
              return !!C;
            });
          return (
            m.each(
              u,
              m.bind(function (c) {
                var h = m.defaults(c.get("manifest"), {
                    allowMultiple: !0,
                    title: a.noTitle,
                  }),
                  f = h.allowMultiple;
                f ||
                  (f =
                    p.inArray(c.get("id"), this.options.existsWidgetTypes) ===
                    -1),
                  c.set({
                    allowMultiple: h.allowMultiple,
                    canDragAndDrop: f,
                    title: h.title,
                  });
              }, this)
            ),
            m.each(
              m.groupBy(u, function (c) {
                return c.serverModule.id;
              }),
              function (c, h) {
                var f = m.first(c).serverModule.get("title");
                (f = f
                  ? f.replace(/OpenText /, "")
                  : m.first(c).serverModule.get("id").toUpperCase()),
                  n.add({ id: h, title: f, widgets: c });
              }
            ),
            n
          );
        },
        _sanitiseWidgetLibrary: function () {},
        onInitWidgets: function () {
          this.$el.empty(),
            this.widegtsUpdated &&
              ((this.collection = this._groupWidgetsByModule()),
              (this.widegtsUpdated = !1)),
            this.render();
        },
      });
      return o;
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.item.view",
    ["csui/utils/base", "csui/perspective.manage/impl/widget.item.view"],
    function (x, m) {
      "use strict";
      return m.extend({
        constructor: function (s) {
          s || (s = {}), m.prototype.constructor.apply(this, arguments);
        },
        initialize: function (y) {
          this.listenTo(this, "expand:header", this.expandHeader);
        },
        expandHeader: function () {
          this.ui.accordionHeader.addClass("csui-accordion-expand"),
            this.$el.addClass("csui-accordion-visible"),
            x.onTransitionEnd(
              this.ui.accordionContent,
              function () {
                this.trigger("widgets:expanded");
              },
              this
            );
        },
        toggle: function () {
          this.ui.accordionHeader.hasClass("csui-accordion-expand") ||
            (this.options.parentView.el
              .querySelectorAll(".csui-module-group")
              .forEach((s) => s.classList.remove("csui-accordion-visible")),
            this.options.parentView.el
              .querySelectorAll(".csui-accordion-header")
              .forEach((s) => s.classList.remove("csui-accordion-expand"))),
            this.el
              .querySelector(".csui-accordion-header")
              .classList.toggle("csui-accordion-expand"),
            this.el.classList.toggle("csui-accordion-visible"),
            x.onTransitionEnd(
              this.ui.accordionContent,
              function () {
                this.trigger("widgets:expanded");
              },
              this
            );
        },
      });
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/widget.panel.list",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.list.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/perspective.manage/impl/widget.list.view",
      "csui/perspective.manage/sidebar/widget.panel.item.view",
      "css!csui/perspective.manage/sidebar/impl/widget.panel.list.css",
    ],
    function (x, m, p, y) {
      "use strict";
      return p.extend({
        constructor: function (r) {
          (this.options = r || {}),
            this.options.data || (r.data = {}),
            p.prototype.constructor.apply(this, arguments);
        },
        renderItem: function (e) {
          let r = this;
          const a = new y({ model: e, parentView: r, context: this.context });
          a.render(),
            this.listenTo(
              a,
              "widgets:expanded",
              x.bind(this.trigger, this, "dom:refresh", this)
            ),
            this.options?.query && a.trigger("expand:header"),
            m(this.el).append(a.el);
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.widget.item",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d, t, i) {
          var o,
            n =
              s.lookupProperty ||
              function (u, c) {
                if (Object.prototype.hasOwnProperty.call(u, c)) return u[c];
              };
          return (
            '                <div class="' +
            ((o = n(r, "if").call(
              e ?? (s.nullContext || {}),
              (o = e != null ? n(e, "attributes") : e) != null
                ? n(o, "draggable")
                : o,
              {
                name: "if",
                hash: {},
                fn: s.program(2, d, 0, t, i),
                inverse: s.program(4, d, 0, t, i),
                loc: {
                  start: { line: 5, column: 28 },
                  end: { line: 5, column: 84 },
                },
              }
            )) != null
              ? o
              : "") +
            `"
                     data-widget-type="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "dataAttr")
                  : o,
                e
              )
            ) +
            `"
                     data-widget-allow-multiple="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "allowMultiple")
                  : o,
                e
              )
            ) +
            `">
                    <div class="csui-widget-item csui-search-widget-item icon-draggable-handle csui-draggable-widget-item"
                         data-widget-index="` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "index")
                  : o,
                e
              )
            ) +
            '" draggable="true" title="' +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "title")
                  : o,
                e
              )
            ) +
            `">
                        <div class="csui-search-result-widget">
                            <div>
                                ` +
            s.escapeExpression(
              (
                n(r, "splitTitle") ||
                (e && n(e, "splitTitle")) ||
                s.hooks.helperMissing
              ).call(
                e ?? (s.nullContext || {}),
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "title")
                  : o,
                i[1] != null ? n(i[1], "query") : i[1],
                {
                  name: "splitTitle",
                  hash: {},
                  loc: {
                    start: { line: 12, column: 32 },
                    end: { line: 12, column: 72 },
                  },
                }
              )
            ) +
            `
                            </div>
                            <span class="csui-search-result-group-title">` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "widgetGroupTitle")
                  : o,
                e
              )
            ) +
            `</span>
                        </div>
                        <div class="csui-layout-icon ` +
            s.escapeExpression(
              s.lambda(
                (o = e != null ? n(e, "attributes") : e) != null
                  ? n(o, "icon")
                  : o,
                e
              )
            ) +
            `"></div>
                    </div>
                </div>
`
          );
        },
        2: function (s, e, r, a, d) {
          return "";
        },
        4: function (s, e, r, a, d) {
          return " binf-hidden ";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d, t, i) {
          var o,
            n =
              s.lookupProperty ||
              function (u, c) {
                if (Object.prototype.hasOwnProperty.call(u, c)) return u[c];
              };
          return (
            `<div class="csui-search-widget-content">
    <div class="cs-content csui-list-pannel">
        <div class="cs-list-group">
` +
            ((o = n(r, "each").call(
              e ?? (s.nullContext || {}),
              e != null ? n(e, "widgets") : e,
              {
                name: "each",
                hash: {},
                fn: s.program(1, d, 0, t, i),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 12 },
                  end: { line: 19, column: 21 },
                },
              }
            )) != null
              ? o
              : "") +
            `        </div>
    </div>
</div>
`
          );
        },
        useDepths: !0,
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.widget.item",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/search.widget.item",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.widget.item.view",
    [
      "csui/lib/backbone",
      "csui/lib/handlebars",
      "csui/perspective.manage/impl/widget.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.widget.item",
      "css!csui/perspective.manage/sidebar/impl/search.widget.item",
    ],
    function (x, m, p, y, s) {
      "use strict";
      return (
        m.registerHelper("splitTitle", function (r, a) {
          if (a.length) {
            let d = "",
              t = a;
            const i = r.split(" ");
            return (
              i.forEach(function (o, n) {
                let u = "";
                if (t.length === 0) u += `<span>${o}</span>`;
                else {
                  const c = o.toLowerCase(),
                    h = c.indexOf(t);
                  if (h !== -1)
                    (u += `<span>${o.substring(0, h)}</span>`),
                      (u += `<span class="csui-search-bold-character">${o.substring(
                        h,
                        h + t.length
                      )}</span>`),
                      (u += `<span>${o.substring(h + t.length)}</span>`);
                  else if (a.indexOf(c) !== -1) {
                    const k = t.substring(0, o.length),
                      C = c.indexOf(k);
                    C !== -1 &&
                      ((u += `<span>${o.substring(0, C)}</span>`),
                      (u += `<span class="csui-search-bold-character">${o.substring(
                        C,
                        C + t.length
                      )}</span>`),
                      (u += `<span>${o.substring(
                        C + t.length,
                        o.length
                      )}</span>`)),
                      (t = t.substring(o.length));
                  } else u += `<span>${o}</span>`;
                }
                n < i.length - 1 && (u += " "), (d += u);
              }),
              new m.SafeString(d)
            );
          }
        }),
        p.extend({
          constructor: function (a) {
            a || (a = {}), p.prototype.constructor.apply(this, arguments);
          },
          className: "csui-widget-module-group",
          template: s,
          templateHelpers: function () {
            let r = new x.Collection(this.model.attributes.widgets),
              a = y.disableTitle,
              d = 0,
              t = this.model.get("title");
            return (
              r.models.forEach(function (i) {
                i.set(
                  {
                    draggable: !!i.get("canDragAndDrop"),
                    disableTitle: a,
                    dataAttr: i.get("id").replace(/\//g, "-"),
                    allowMultiple: !!i.get("allowMultiple"),
                    index: d++,
                    widgetGroupTitle: t,
                  },
                  { silent: !0 }
                );
              }),
              { widgets: r.models, query: this.options?.query || "" }
            );
          },
        })
      );
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/search.no.results",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-empty-search-results">
<p class="csui-no-search-result-message" role="status">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "noWidgetsFound") ||
                  (e != null ? i(e, "noWidgetsFound") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "noWidgetsFound",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 55 },
                      end: { line: 2, column: 73 },
                    },
                  })
                : t)
            ) +
            `</p>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_search.no.results",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/search.no.results.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "hbs!csui/perspective.manage/sidebar/impl/search.no.results",
    ],
    function (x, m, p, y) {
      "use strict";
      return m.View.extend({
        className: "csui-empty-search-results",
        template: y,
        templateContext: function () {
          return { noWidgetsFound: p.noWidgetsFound };
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.search.results.view",
    [
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette3",
      "csui/perspective.manage/impl/options.form.view",
      "csui/perspective.manage/sidebar/search.widget.item.view",
      "i18n!csui/perspective.manage/impl/nls/lang",
      "csui/models/widget/widget.collection",
      "csui/perspective.manage/sidebar/search.no.results.view",
      "hbs!csui/perspective.manage/impl/widget.item",
    ],
    function (x, m, p, y, s, e, r, a, d) {
      "use strict";
      return p.CollectionView.extend({
        template: d,
        className: "cs-module-list",
        childView: s,
        emptyView: a,
        constructor: function (o = {}) {
          (this.options = o),
            (this.allWidgets = new r(null, {
              includeView: !1,
              includeToolItems: !1,
            })),
            (this.collection = new m.Collection()),
            p.CollectionView.prototype.constructor.call(this, o),
            (this.context = this.options.pmanView.context),
            this.fetchAllWidgets();
        },
        childViewOptions: function () {
          return {
            parentView: this,
            context: this.context,
            query: this.options.query,
          };
        },
        fetchAllWidgets: function () {
          const i = this;
          this.allWidgets.fetch().done(function () {
            i.collection.reset(i.setWidgetsByModule().models);
          });
        },
        initiateFilterWidgets: function (i) {
          this.options.query = i;
          let o = this.setWidgetsByModule().models;
          this.collection.reset(o);
        },
        filterWidgetsBySearch: function (i, o) {
          let u = this.extractWidgetNames(i.models).filter(function (c) {
            return c?.split(" ").join("").toLowerCase().includes(o);
          });
          return i.filter(function (c) {
            return u.some(function (h) {
              return c.get("manifest")?.title?.includes(h);
            });
          });
        },
        extractWidgetNames: function (i) {
          return i.map(function (o) {
            return o.get("manifest")?.title?.trim();
          });
        },
        setWidgetsByModule: function () {
          let i = new m.Collection(),
            o = [];
          if (this.options?.query?.length) {
            o = this.filterWidgetsBySearch(this.allWidgets, this.options.query)
              .filter((u) => {
                let c = u.get("manifest");
                if (!c || !c.title || !c.description || c.deprecated) return !1;
                let h = JSON.parse(JSON.stringify(c.schema || {})),
                  f = JSON.parse(JSON.stringify(c.options || {}));
                return !!y._normalizeOptions(h.properties, f.fields || {}, {});
              })
              .map((u) => {
                let c = {
                    allowMultiple: u.get("manifest").allowMultiple || !0,
                    title: u.get("manifest").title || e.noTitle,
                  },
                  h = c.allowMultiple;
                return (
                  h ||
                    (h = !this.options.existsWidgetTypes.includes(u.get("id"))),
                  u.set({
                    allowMultiple: c.allowMultiple,
                    canDragAndDrop: h,
                    title: c.title,
                  }),
                  u
                );
              });
            const n = {};
            o.forEach((u) => {
              let c = u.serverModule.id;
              n[c] || (n[c] = []), n[c].push(u);
            });
            for (let u in n)
              if (n.hasOwnProperty(u)) {
                let c = n[u],
                  h =
                    c[0].serverModule.get("title")?.replace(/OpenText /, "") ||
                    u.toUpperCase();
                i.add({ id: u, title: h, widgets: c });
              }
          }
          return i;
        },
      });
    }
  ),
  csui.define(
    "hbs!csui/perspective.manage/sidebar/impl/widget.panel",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          return `<div class="csui-search-widget-view"></div>
<div class="csui-widget-list-panel csui-normal-scrolling"></div>

`;
        },
      });
      return (
        p.registerPartial(
          "csui_perspective.manage_sidebar_impl_widget.panel",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/perspective.manage/sidebar/impl/widget.panel",
    [],
    function () {}
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widget.panel.view",
    [
      "csui/lib/underscore",
      "csui/lib/marionette3",
      "csui/perspective.manage/sidebar/search.widget.view",
      "csui/perspective.manage/sidebar/widget.panel.list.view",
      "csui/perspective.manage/sidebar/widget.search.results.view",
      "hbs!csui/perspective.manage/sidebar/impl/widget.panel",
      "css!csui/perspective.manage/sidebar/impl/widget.panel",
    ],
    function (x, m, p, y, s, e) {
      "use strict";
      return m.View.extend({
        template: e,
        className: "csui-new-widget-panel",
        ui: { widgetTab: ".csui-widget-list-panel" },
        regions: {
          searchRegion: ".csui-search-widget-view",
          accordionRegion: ".csui-widget-list-panel",
        },
        constructor: function (d) {
          (this.options = d || {}),
            this.options.data || (d.data = {}),
            (this.options.pmanView = d.context.pmanView),
            (this.options.existsWidgetTypes =
              this._getExistsWidgetTypes() || []),
            m.View.prototype.constructor.apply(this, arguments);
        },
        onRender: function () {
          this.showChildView("searchRegion", new p(this.options));
          let a = new y(this.options);
          this.showChildView("accordionRegion", a),
            this.listenTo(
              this.getChildView("searchRegion"),
              "search:performed",
              function (d) {
                this.widgetSearchResultsView?.isAttached()
                  ? this.widgetSearchResultsView.initiateFilterWidgets(d)
                  : ((this.widgetSearchResultsView = new s(this.options)),
                    (this.widgetSearchResultsView.options.query = d),
                    this.showChildView(
                      "accordionRegion",
                      this.widgetSearchResultsView
                    ));
              }
            ),
            this.listenTo(
              this.getChildView("searchRegion"),
              "search:closed",
              function () {
                let d = new y(this.options);
                this.showChildView("accordionRegion", d);
              }
            );
        },
        _getExistsWidgetTypes: function () {
          let a = this.options.context.perspective,
            d = a.get("type"),
            t = {},
            i = [];
          return (
            d == "flow"
              ? ((t = a.get("options")),
                t.widgets.forEach(
                  x.bind(function (o) {
                    o.type && i.push(o.type);
                  }, this)
                ))
              : d == "left-center-right" &&
                ((t = a.get("options")),
                t.center && i.push(t.center.type),
                t.right && i.push(t.right.type),
                t.left && i.push(t.left.type)),
            i
          );
        },
      });
    }
  ),
  csui.define(
    "csui/perspective.manage/sidebar/widgets",
    [
      "csui/models/sidebar.item",
      "csui/perspective.manage/sidebar/widget.panel.view",
      "i18n!csui/perspective.manage/sidebar/impl/nls/lang",
    ],
    function (x, m, p) {
      "use strict";
      return x.extend({
        defaults: {
          signature: "Widgets",
          sequence: 2,
          name: p.widgets,
          iconClass: "csui-sidebar-widgets-btn",
          iconName: "csui_action:action_widgets32",
          panelTitle: p.widgets,
        },
        getPanelView: function (s) {
          return new m(s);
        },
      });
    }
  ),
  csui.define(
    "json!csui/utils/contexts/perspective/impl/perspectives/error.global.json",
    {
      type: "left-center-right",
      options: { center: { type: "csui/widgets/error.global" } },
    }
  ),
  csui.define(
    "hbs!csui/widgets/placeholder/impl/placeholder",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            s.escapeExpression(
              ((t =
                (t = i(r, "label") || (e != null ? i(e, "label") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "label",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 0 },
                      end: { line: 1, column: 9 },
                    },
                  })
                : t)
            ) +
            `
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_placeholder_impl_placeholder", y), y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/placeholder/impl/placeholder",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/placeholder/placeholder.view",
    [
      "csui/lib/backbone",
      "csui/lib/marionette",
      "hbs!./impl/placeholder",
      "css!./impl/placeholder",
    ],
    function (x, m, p) {
      var y = m.ItemView.extend({
        className: "cs-placeholder tile",
        template: p,
        constructor: function (e) {
          e || (e = {}),
            e.data || (e.data = {}),
            e.model ||
              (e.model = new x.Model({
                label: e.data.label,
                bgcolor: e.data.bgcolor,
                color: e.data.color,
              })),
            m.ItemView.prototype.constructor.call(this, e);
        },
        onRender: function () {
          this.$el.css({
            color: this.model.get("color"),
            backgroundColor: this.model.get("bgcolor"),
          });
        },
      });
      return y;
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/recentlyaccessed.columns",
    ["csui/lib/backbone"],
    function (x) {
      var m = x.Model.extend({
          idAttribute: "key",
          defaults: { key: null, sequence: 0 },
        }),
        p = x.Collection.extend({
          model: m,
          comparator: "sequence",
          getColumnKeys: function () {
            return this.pluck("key");
          },
          deepClone: function () {
            return new p(
              this.map(function (s) {
                return s.attributes;
              })
            );
          },
        }),
        y = new p([
          { key: "type", titleIconInHeader: "mime_type", sequence: 10 },
          { key: "name", sequence: 20 },
          {
            key: "reserved",
            title: "State",
            sequence: 30,
            noTitleInHeader: !0,
          },
          { key: "parent_id", sequence: 40 },
          { key: "access_date_last", sequence: 50 },
          { key: "size", sequence: 60 },
          { key: "modify_date", sequence: 70 },
          {
            key: "favorite",
            sequence: 910,
            noTitleInHeader: !0,
            permanentColumn: !0,
          },
        ]);
      return y;
    }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/tileview.toolbaritems",
    [
      "csui/lib/underscore",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/toolbar/toolitems.factory",
      "csui/controls/toolbar/toolitem.model",
      "csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = {
        inlineActionbar: new p(
          {
            inspect: [
              {
                signature: "Properties",
                name: m.ToolbarItemInfo,
                commandData: { dialogView: !0 },
                iconName: "csui_action_properties32",
              },
            ],
            info: [
              {
                signature: "View",
                name: m.ToolbarItemView,
                iconName: "csui_action_preview32",
                flyout: "view",
              },
            ],
            share: [
              {
                signature: "CopyLink",
                name: m.ToolbarItemCopyLink,
                iconName: "csui_action_copy_link32",
              },
            ],
            edit: [
              {
                signature: "Edit",
                name: m.ToolbarItemEdit,
                iconName: "csui_action_edit32",
              },
            ],
            other: [
              {
                signature: "Download",
                name: m.ToolbarItemDownload,
                iconName: "csui_action_download32",
              },
              { signature: "goToLocation", name: m.ToolbarGoToLocation },
            ],
          },
          {
            maxItemsShown: 1,
            dropDownText: m.ToolbarItemMore,
            dropDownIconName: "csui_action_more32",
            addGroupSeparators: !1,
          }
        ),
      };
      s && r(s);
      function r(a) {
        x.each(a, function (d) {
          x.each(d, function (t, i) {
            var o = e[i];
            if (!o) throw new Error("Invalid target toolbar: " + i);
            x.each(t, function (n) {
              (n = new y(n)), o.addItem(n);
            });
          });
        });
      }
      return e;
    }
  ),
  csui.define("csui/widgets/recentlyaccessed/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/recentlyaccessed/impl/nls/root/lang", {
    dialogTitle: "Recently Accessed",
    searchTitle: "Search Recently Accessed",
    searchPlaceholder: "Recently Accessed",
    searchAria: "Search for recently accessed objects",
    expandAria: "Expand the Recently Accessed widget",
    emptyListText: "There are no items to display.",
    loadingListText: "Loading results...",
    loadingText: "Loading recently accessed",
    failedListText: "Loading results failed.",
    access_date_last: "Last Accessed",
    parent_id: "Location",
    openRecentlyAccessedView: "Open recently accessed view",
  }),
  csui.define(
    "css!csui/widgets/recentlyaccessed/impl/recentlyaccessed",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/recentlyaccessed.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/controls/list/list.view",
      "csui/controls/listitem/listitemstandard.view",
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/controls/list/behaviors/list.view.keyboard.behavior",
      "csui/behaviors/collection.state/collection.state.behavior",
      "csui/controls/list/list.state.view",
      "csui/utils/contexts/factories/recentlyaccessed",
      "csui/controls/node-type.icon/node-type.icon.view",
      "csui/controls/progressblocker/blocker",
      "csui/utils/contexts/factories/application.scope.factory",
      "csui/utils/commands",
      "csui/widgets/recentlyaccessed/tileview.toolbaritems",
      "csui/controls/globalmessage/globalmessage",
      "csui/controls/tile/behaviors/infinite.scrolling.behavior",
      "csui/behaviors/limiting/limiting.behavior",
      "csui/behaviors/collection.error/collection.error.behavior",
      "csui/utils/base",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/lang",
      "i18n!csui/controls/listitem/impl/nls/lang",
      "css!csui/widgets/recentlyaccessed/impl/recentlyaccessed",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b,
      _,
      T
    ) {
      "use strict";
      var l = x.moduleConfig("csui/behaviors/limiting/limiting.behavior"),
        g = p.defaults({}, m.config(), l, {
          openInPerspective: !0,
          limit: 25,
          filterByProperty: "name",
        }),
        I = n.getInfiniteScrollFlag(),
        D = s.extend({
          constructor: function (B) {
            B || (B = {}),
              p.defaults(B, {
                orderBy: "access_date_last desc",
                refetchNodeActions: !0,
              }),
              B.data || (B.data = {}),
              (B.data.titleBarIcon =
                B.data.showTitleIcon === !1
                  ? void 0
                  : "title-icon title-recentlyaccessed"),
              (B.tileViewToolbarItems = k),
              (this.context = B.context),
              (this.showInlineActionBar =
                B.showInlineActionBar === !1 ? B.showInlineActionBar : !0);
            var M = B.context,
              E = M && M.viewStateModel;
            this._enableOpenPerspective =
              g.openInPerspective && E && E.get("history");
            var P = f.getSignatures(k),
              O =
                B.collection ||
                B.context.getCollection(n, {
                  options: {
                    promotedActionCommands: [],
                    nonPromotedActionCommands: P,
                  },
                }),
              z = n.getLimitedResourceScope();
            z && z.commands && z.commands.push("editpermissions"),
              O.setResourceScope(z),
              O.setEnabledDelayRestCommands(!1),
              O.setEnabledLazyActionCommands(!1),
              (this.collection = O),
              s.prototype.constructor.call(this, B),
              I && this.listenTo(this, "change:filterValue", this.applyFilter),
              this.listenTo(
                this.completeCollection || this.collection,
                "error",
                function (j, U, H) {
                  var N = new b.Error(U);
                  C.showMessage("error", N.message);
                }
              ),
              (this.loadingText = _.loadingText),
              c.imbue(this),
              (this.applicationScope = B.context.getModel(h));
          },
          childEvents: {
            "click:item": "onClickItem",
            render: "onRenderItem",
            "before:destroy": "onBeforeDestroyItem",
          },
          templateHelpers: function () {
            return {
              title: this.options.data.title || _.dialogTitle,
              icon: this.options.data.titleBarIcon,
              searchPlaceholder: _.searchPlaceholder,
              searchTitle: _.searchTitle,
              searchAria: _.searchAria,
              expandAria: _.expandAria,
              openPerspectiveAria: _.openRecentlyAccessedView,
              openPerspectiveTooltip: _.openRecentlyAccessedView,
              enableOpenPerspective: this._enableOpenPerspective,
            };
          },
          childView: e,
          childViewOptions: function () {
            var A = this.showInlineActionBar
              ? {
                  toolbaritems: this.options.tileViewToolbarItems,
                  collection: this.completeCollection,
                }
              : void 0;
            return {
              templateHelpers: function () {
                return {
                  name: this.model.get("short_name"),
                  enableIcon: !0,
                  showInlineActionBar: this.showInlineActionBar,
                  itemLabel: p.str.sformat(
                    T.itemTitleLabel,
                    this.model.get("short_name")
                  ),
                };
              },
              context: this.context,
              checkDefaultAction: !0,
              toolbarData: A,
              refetchNodeActions: this.options.refetchNodeActions,
            };
          },
          behaviors: {
            LimitedList: {
              behaviorClass: I ? S : w,
              contentParent: ".tile-content",
              completeCollection: function () {
                var A = f.getSignatures(k),
                  B =
                    this.options.collection ||
                    this.options.context.getCollection(n, {
                      options: {
                        promotedActionCommands: [],
                        nonPromotedActionCommands: A,
                      },
                    }),
                  M = n.getLimitedResourceScope();
                return (
                  M && M.commands && M.commands.push("editpermissions"),
                  B.setResourceScope(M),
                  B.setEnabledDelayRestCommands(!1),
                  B.setEnabledLazyActionCommands(!1),
                  B
                );
              },
              limit: 0,
            },
            ExpandableList: {
              behaviorClass: r,
              expandedView:
                "csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view",
              orderBy: function () {
                return this.options.orderBy;
              },
              titleBarIcon: function () {
                return this.options.data.titleBarIcon;
              },
              dialogTitle: _.dialogTitle,
              dialogTitleIconNameRight: "csui_action_minimize32",
              dialogClassName: "recentlyaccessed",
            },
            DefaultAction: { behaviorClass: a },
            TabableRegion: { behaviorClass: d },
            ListViewKeyboardBehavior: { behaviorClass: t },
            CollectionState: {
              behaviorClass: i,
              collection: function () {
                return this.completeCollection;
              },
              stateView: o,
              stateMessages: {
                empty: _.emptyListText,
                loading: _.loadingListText,
                failed: _.failedListText,
              },
            },
          },
          filterChanged: function () {
            var A = this.ui.searchInput.val();
            if (this.lastFilterValue !== A) {
              this.lastFilterValue = A;
              var B = this;
              this.filterTimeout && clearTimeout(this.filterTimeout),
                (this.filterTimeout = setTimeout(function () {
                  (B.filterTimeout = void 0),
                    s.prototype.filterChanged.apply(B, arguments);
                }, 1e3));
            }
          },
          applyFilter: function () {
            var A = this.options.filterValue.toLowerCase().split(" "),
              B = g.filterByProperty,
              M = {};
            (M[B] = this.options.filterValue.toLowerCase()),
              this.collection.fetching
                ? (this.filterValuePending = M)
                : (this.collection.resetLimit(!1),
                  this.collection.setFilter(M));
          },
          onRender: function () {
            s.prototype.onRender.apply(this, arguments),
              this.$el.addClass("cs-recentlyaccessed");
          },
          onRenderItem: function (A) {
            (A._nodeIconView = new u({
              el: A.$(".csui-type-icon").get(0),
              node: A.model,
            })),
              A._nodeIconView.render(),
              this.completeCollection &&
                this.completeCollection.length &&
                A.$el.attr("role", "option"),
              A.$el.attr(
                "aria-label",
                p.str.sformat(
                  T.nameAndTypeAria,
                  A.model.get("short_name"),
                  A._nodeIconView.model.get("title")
                )
              );
          },
          onBeforeDestroyItem: function (A) {
            A._nodeIconView && A._nodeIconView.destroy();
          },
          onClickItem: function (A) {
            this.triggerMethod("execute:defaultAction", A.model);
          },
          onClickHeader: function (A) {
            this.onClickOpenPerspective(A);
          },
          onClickOpenPerspective: function (A) {
            this.applicationScope.set("id", "recentlyaccessed"),
              this.trigger("open:recentlyaccessed:perspective");
          },
        });
      return D;
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcut/impl/shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="tile-header">
  <div class="tile-title">
    <h2 class="csui-heading">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "short_name") || (e != null ? i(e, "short_name") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "short_name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 29 },
                      end: { line: 3, column: 43 },
                    },
                  })
                : t)
            ) +
            `</h2>
  </div>
</div>

<div class="tile-icon">
  <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 19 },
                      end: { line: 8, column: 27 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "title") || (e != null ? i(e, "title") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "title",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 36 },
                      end: { line: 8, column: 45 },
                    },
                  })
                : t)
            ) +
            `"></div>
</div>
`
          );
        },
      });
      return p.registerPartial("csui_widgets_shortcut_impl_shortcut", y), y;
    }
  ),
  csui.define("csui/widgets/shortcut/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcut/impl/nls/root/lang", {
    loadingText: "Loading...",
  }),
  csui.define("css!csui/widgets/shortcut/impl/shortcut", [], function () {}),
  csui.define(
    "csui/widgets/shortcut/shortcut.view",
    [
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/utils/contexts/factories/node",
      "csui/utils/node.links/node.links",
      "csui/utils/defaultactionitems",
      "csui/utils/commands",
      "hbs!csui/widgets/shortcut/impl/shortcut",
      "i18n!csui/widgets/shortcut/impl/nls/lang",
      "css!csui/widgets/shortcut/impl/shortcut",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i) {
      "use strict";
      var o = m.ItemView.extend({
        tagName: "a",
        attributes: { href: "#" },
        className: function () {
          var n = this.options.data.background || "cs-tile-background-default";
          return "cs-shortcut tile " + n;
        },
        modelEvents: { change: "render" },
        triggers: { click: "click:link" },
        template: t,
        templateHelpers: function () {
          var n, u, c;
          return (
            this.model.fetched
              ? ((n = this.getName()),
                (u = n.length > 38 ? n.substr(0, 38) + "..." : n),
                (c = u.indexOf(" ")),
                u.length >= 20 &&
                  (c < 0 || c > 20) &&
                  (u = u.substr(0, 18) + "..."))
              : (u = i.loadingText),
            {
              short_name: u,
              icon: this.options.data.icon || "icon-folder",
              title: n,
            }
          );
        },
        behaviors: {
          DefaultAction: { behaviorClass: p },
          TabableRegion: { behaviorClass: y },
          ItemError: { behaviorClass: s },
        },
        events: { keydown: "onKeyInView" },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onKeyInView: function (n) {
          (n.keyCode === 32 || n.keyCode === 13) &&
            (n.preventDefault(),
            n.stopPropagation(),
            this.triggerMethod("click:link"));
        },
        constructor: function (u) {
          u || (u = {}),
            u.data || (u.data = {}),
            u.model ||
              (u.model = u.context.getModel(e, {
                attributes: { id: u.data.id || "volume", type: u.data.type },
              })),
            m.ItemView.prototype.constructor.call(this, u),
            this.model.excludeResources(),
            this.model.resetFields(),
            this.model.setFields({
              properties: ["container", "id", "name", "original_id", "type"],
              "versions.element(0)": ["mime_type"],
            }),
            this.model.resetExpand(),
            this.model.setExpand({ properties: ["original_id"] }),
            this.model.resetCommands(),
            this.model.setCommands(a.getAllCommandSignatures(d));
        },
        onRender: function () {
          var n =
            !this.model.fetched ||
            !this.defaultActionController.hasAction(this.model);
          this.$el[n ? "addClass" : "removeClass"]("csui-disabled"),
            this.$el.attr("href", r.getUrl(this.model) || "#");
        },
        getName: function () {
          return (this.options.data.displayName || "").trim().length > 0
            ? this.options.data.displayName
            : this.model.get("name") || "";
        },
        onClickLink: function () {
          this.triggerMethod("execute:defaultAction", this.model);
        },
      });
      return o;
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-details">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>

    <div class="tile-title">
        <span class="csui-heading binf-line-clamp">` +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 51 },
                      end: { line: 7, column: 59 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_small.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-details">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>

    <div class="tile-title">
        <span class="csui-heading binf-line-clamp" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "shortcutAria") ||
                  (e != null ? i(e, "shortcutAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "shortcutAria",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 63 },
                      end: { line: 7, column: 79 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 7, column: 81 },
                      end: { line: 7, column: 89 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_medium.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="tile-group">
    <div class="tile-icon">
        <div class="icon ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "icon") || (e != null ? i(e, "icon") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "icon",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 25 },
                      end: { line: 3, column: 33 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 42 },
                      end: { line: 3, column: 50 },
                    },
                  })
                : t)
            ) +
            `" aria-hidden="true"></div>
    </div>
    <div class="tile-title">
        <span class="csui-heading binf-line-clamp" aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "shortcutAria") ||
                  (e != null ? i(e, "shortcutAria") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "shortcutAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 63 },
                      end: { line: 6, column: 79 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "name") || (e != null ? i(e, "name") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "name",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 81 },
                      end: { line: 6, column: 89 },
                    },
                  })
                : t)
            ) +
            `</span>
    </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_shortcuts_impl_shortcut_impl_large.shortcut",
          y
        ),
        y
      );
    }
  ),
  csui.define("csui/widgets/shortcuts/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcuts/impl/nls/root/lang", {
    loadingText: "Loading shortcuts...",
    shortcutPrefixAria: "Shortcut to {0}",
    addShortcut: "Add shortcut",
    removeShortcut: "Remove shortcut",
    removeShortcutCnfrmMsg: "Shortcut will be removed from the group.",
    groupAria: "Shortcut Group",
    emptyGroup: "Add a shortcut to the group. Max. 4 shortcuts can be added",
    maxItemsGroup:
      'Shortcut group, 4 shortcuts added. Press "Enter" to access the list of shortcuts. Press "Ctrl+ Right or Left Arrow" to move the shortcut group to the right or left.',
    addShortcutToGroup: "Add shortcut to the group",
    shortcutSettings: "{0} shortcut settings",
    accessShortcutActions: "Shortcut {0}, press ENTER to access its actions",
    shortcutGroupWithOneItem:
      "Shortcut Group. {0} shortcut added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.",
    shortcutGroupWithMixedItems:
      "Shortcut Group. {0} shortcuts added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.",
    removeShortcutItem: "Remove {0} Shortcut",
  }),
  csui.define(
    "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
    ["csui/lib/underscore", "csui/utils/contexts/factories/node"],
    function (x, m) {
      "use strict";
      var p = {
        createDetailListForShortcuts: function (y) {
          const s = [];
          return (
            Array.isArray(y) &&
              y.forEach((e) => {
                const r = this.createMainNode(e);
                e.node = r;
                const a = this.createNode4BackgroundImage(
                  e.customBackgroundImage
                );
                a && s.push(a.fetch({ suppressError: !0 }));
              }),
            s
          );
        },
        createMainNode: function (y) {
          return this.options.context.getModel(m, {
            attributes: {
              id: y.id || y.launchButtonID || "volume",
              type: y.type,
            },
            options: {
              fields: {
                properties: [
                  "container",
                  "id",
                  "name",
                  "original_id",
                  "type",
                  "custom_view_search",
                  "image_url",
                ],
                "versions.element(0)": ["mime_type"],
              },
            },
          });
        },
        createNode4BackgroundImage: function (y) {
          if (y)
            return this.options.context.getModel(m, {
              attributes: { id: y },
              options: {
                fields: {
                  properties: [
                    "deploy_url",
                    "mime_type",
                    "modify_date",
                    "name",
                    "id",
                  ],
                  "versions.element(0)": ["owner_id", "version_number"],
                  nicknames: ["nickname"],
                },
              },
            });
        },
      };
      return p;
    }
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/utils/url",
      "csui/utils/contexts/factories/node",
      "csui/utils/defaultactionitems",
      "csui/utils/commands",
      "csui/utils/node.links/node.links",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
      "hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "csui/utils/high.contrast/detector!",
      "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
      "csui/utils/contexts/factories/connector",
      "csui/controls/node-type.icon/node-type.icon.item.view.mixin",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",
      "css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c, h, f, k, C, S) {
      "use strict";
      var w = y.ItemView.extend(
        {
          constructor: function (b) {
            b || (b = {}),
              (b.model = b.model || new p.Model()),
              b.model.set(
                x.defaults(b.model.attributes, {
                  icon: w.DEFAULT_ICON,
                  theme: "csui-shortcut-theme-grey-shade1",
                  layout: "small",
                  id: "",
                  displayName: "",
                  customBackgroundColor: "",
                  customBackgroundImage: "",
                })
              ),
              f === 2 && b.model.set("icon", w.BLACK_FOLDER_ICON),
              y.ItemView.prototype.constructor.call(this, b),
              (this.node = this.model.get("node")),
              this.node || this._ensureNode(),
              this._ensureNodeFetched();
          },
          tagName: "a",
          className: function () {
            var v = [],
              b = this.model.get("customBackgroundImage"),
              _ = this.model.get("customBackgroundColor");
            return (
              v.push("csui-shortcut-item"),
              v.push("csui-acc-focusable"),
              v.push(this.model.get("theme")),
              v.push("csui-" + this.model.get("layout")),
              (_ || b) && v.push("cs-background-custom"),
              b && v.push("cs-background-image"),
              v.join(" ")
            );
          },
          getTemplate: function () {
            switch (this.model.get("layout")) {
              case "small":
                return n;
              case "medium":
                return u;
              default:
                return c;
            }
          },
          templateHelpers: function () {
            var v = this.getName();
            return { icon: this.model.get("icon") || w.DEFAULT_ICON, name: v };
          },
          behaviors: {
            DefaultAction: { behaviorClass: e },
            ItemError: {
              behaviorClass: r,
              model: function () {
                return this.options.model.get("node");
              },
              errorViewOptions: function () {
                return { low: this.model.get("layout") === "small" };
              },
            },
          },
          modelEvents: {
            change: "render",
            "change:shortcutTheme": "_onThemeChange",
            "change:customBackgroundColor": "_onCustomBackgroundColorChange",
            "change:customBackgroundImage": "_onCustomBackgroundImageChange",
            "change:id": "_ensureNode",
            "change:type": "_ensureNode",
          },
          events: { click: "onClicked", keydown: "onKeyInView" },
          onRender: function () {
            this._updateElement(),
              this._ensureBackgroundImageNodeThenApplyBackground(),
              this._updateNodeState();
          },
          onKeyInView: function (v) {
            (v.keyCode === 32 || v.keyCode === 13) && this.trigger("click");
          },
          _generateImageUrlFromBWSNode: function () {
            const v = this.model.get("layout") || "large",
              b = this.$el.find(".tile-icon>.icon");
            b.removeClass(f === 2 ? w.BLACK_FOLDER_ICON : w.DEFAULT_ICON),
              this.renderNodeTypeIconView(this.model.get("node"), b, "", "", {
                size: v,
                title: this.getName(),
              }),
              this.model.set("icon", "");
          },
          _updateElement: function () {
            var v = this.getName();
            this.node && this.$el.attr("href", o.getUrl(this.node)),
              this.model.get("node")?.get("image_url") &&
                this._generateImageUrlFromBWSNode(),
              this.$el
                .attr("class", x.result(this, "className"))
                .attr("title", this.getName()),
              this.$el.attr(
                "aria-label",
                x.str.sformat(h.shortcutPrefixAria, v)
              );
          },
          _onThemeChange: function () {
            this.trigger("change:shortcutTheme");
          },
          _onCustomBackgroundColorChange: function () {
            this.trigger("change:customBackgroundColor");
          },
          _onCustomBackgroundImageChange: function () {
            this.trigger("change:customBackgroundImage");
          },
          _ensureBackgroundImageNodeThenApplyBackground: function () {
            const v = this.model.get("customBackgroundImage");
            if (
              (v || this.model.set("deploy_url", ""),
              this.options.perspectiveMode === "edit" && this.isUpdating && v)
            ) {
              const b = this;
              this.createNode4BackgroundImage(v)
                .fetch()
                .done(function (T) {
                  const { deploy_url: l } = T;
                  b.model.set("deploy_url", l),
                    b._applyBackgroundStyle(b.model.attributes);
                });
              return;
            }
            this._applyBackgroundStyle(this.model.attributes);
          },
          _applyBackgroundStyle: function ({
            deploy_url: v,
            version_number: b,
            modify_date: _,
            customBackgroundColor: T,
          }) {
            const l = encodeURIComponent(_),
              I = this.options.context
                .getObject(C)
                .getConnectionUrl()
                .getOrigin(),
              D = v ? `${I}${v}?m=${l}&v=${b}` : "";
            (this.el.style.backgroundImage = `url(${D})`),
              (this.el.style.backgroundColor = T || ""),
              (this.el.style.backgroundBlendMode =
                T && D ? "soft-light" : "normal");
          },
          onClicked: function (v) {
            s.isControlClick(v) ||
              (v.preventDefault(),
              this.triggerMethod("execute:defaultAction", this.node));
          },
          getName: function () {
            return (this.model.get("displayName") || "").trim().length > 0
              ? this.model.get("displayName")
              : this.node.fetched
              ? this.node.get("name")
              : h.loadingText;
          },
          _ensureNode: function () {
            (this.node = this.options.context.getModel(d, {
              attributes: {
                id: this.options.model.get("id") || "volume",
                type: this.options.model.get("type") || 141,
              },
            })),
              w.prepareModelToFetch(this.node),
              this.model.set("node", this.node, { silent: !0 }),
              this.trigger("update:model", this.node),
              this._ensureNodeFetched();
          },
          _ensureNodeFetched: function () {
            this.listenToOnce(this.node, "change", this.render),
              this.node.ensureFetched({ suppressError: !0 });
          },
          _updateErrorState: function () {
            this.node.error
              ? (this.$el.addClass("csui-failed"), this.$el.removeAttr("title"))
              : this.$el.removeClass("csui-failed");
          },
          _updateNodeState: function () {
            this.node.fetched &&
            this.defaultActionController.hasAction(this.node)
              ? this.$el.removeClass("csui-disabled")
              : this.$el.addClass("csui-disabled"),
              this._updateErrorState();
          },
          focus: function () {
            this.$el.trigger("focus");
          },
        },
        {
          prepareModelToFetch: function (v) {
            v.excludeResources(),
              v.resetFields(),
              v.setFields({
                properties: [
                  "container",
                  "id",
                  "name",
                  "original_id",
                  "type",
                  "custom_view_search",
                  "image_url",
                ],
                "versions.element(0)": ["mime_type"],
              }),
              v.resetExpand(),
              v.setExpand({ properties: ["original_id"] }),
              v.resetCommands(),
              v.setCommands(t.getAllCommandSignatures(i));
          },
          DEFAULT_ICON: "icon-folder",
          BLACK_FOLDER_ICON: "icon-folder-black",
        }
      );
      return x.extend(w.prototype, k), S.mixin(w.prototype), w;
    }
  ),
  csui.define("csui/widgets/shortcuts/impl/nls/shortcuts.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcuts/impl/nls/root/shortcuts.manifest", {
    widgetTitle: "Shortcut Group",
    shortcutWidgetTitle: "Shortcut",
    widgetDescription:
      "Tile representing a hyperlink to an object; it navigates to its page when clicked",
    shortcutItemsTitle: "Shortcut Items",
    shortcutItemsDescription: "Shortcut Items description",
    idTitle: "Target object",
    idDescription: "An object to open by this shortcut",
    typeTitle: "Volume",
    typeDescription:
      "Sub-type number of a global volume to open by this shortcut if no object has been selected",
    displayNameTitle: "Display name",
    shortcutThemeTitle: "Theme",
    shortcutThemeDescription: "Styling of the shortcuts",
    typeEnterpriseVolume: "Enterprise",
    typePersonalVolume: "Personal",
    typeCategoryVolume: "Categories",
    shortcutThemeStone1: "Stone Group 1",
    shortcutThemeStone2: "Stone Group 2",
    shortcutThemeTeal1: "Teal Group 1",
    shortcutThemeTeal2: "Teal Group 2",
    shortcutThemePink1: "Pink Group 1",
    shortcutThemePink2: "Pink Group 2",
    shortcutThemeIndigo1: "Indigo Group 1",
    shortcutThemeIndigo2: "Indigo Group 2",
    customBackgroundColorTitle: "Custom background color",
    customBackgroundColorDescription: "A custom background color for the tile",
    customBackgroundImageTitle: "Custom background image",
    customBackgroundImageDescription: "A custom background image for the tile",
    customBackgroundBlendModeTitle: "Blend background color",
    customBackgroundBlendModeDescription:
      "Blends the background image with the theme color, or the individual shortcut color (if one is set)",
    none: "None",
  }),
  csui.define(
    "json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{shortcutWidgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "tile",
      schema: {
        type: "object",
        properties: {
          id: {
            title: "{{idTitle}}",
            description: "{{idDescription}}",
            type: "integer",
          },
          displayName: { title: "{{displayNameTitle}}", type: "string" },
          type: {
            title: "{{typeTitle}}",
            description: "{{typeDescription}}",
            type: "integer",
            enum: [141, 142, 133],
          },
          shortcutTheme: {
            title: "{{shortcutThemeTitle}}",
            description: "{{shortcutThemeDescription}}",
            type: "string",
            enum: [
              "csui-shortcut-theme-stone1",
              "csui-shortcut-theme-stone2",
              "csui-shortcut-theme-teal1",
              "csui-shortcut-theme-teal2",
              "csui-shortcut-theme-pink1",
              "csui-shortcut-theme-pink2",
              "csui-shortcut-theme-indigo1",
              "csui-shortcut-theme-indigo2",
            ],
          },
          customBackgroundImage: {
            title: "{{customBackgroundImageTitle}}",
            description: "{{customBackgroundImageDescription}}",
            type: "integer",
          },
          customBackgroundColor: {
            title: "{{customBackgroundColorTitle}}",
            description: "{{customBackgroundColorDescription}}",
            type: "string",
            enum: [
              "",
              "Aqua",
              "Aquamarine",
              "Blue",
              "BlueViolet",
              "Brown",
              "BurlyWood",
              "CadetBlue",
              "Chartreuse",
              "Chocolate",
              "Coral",
              "CornflowerBlue",
              "Crimson",
              "DarkBlue",
              "DarkCyan",
              "DarkGoldenRod",
              "DarkGray",
              "DarkGreen",
              "DarkKhaki",
              "DarkMagenta",
              "DarkOliveGreen",
              "DarkOrange",
              "DarkOrchid",
              "DarkRed",
              "DarkSalmon",
              "DarkSeaGreen",
              "DarkSlateBlue",
              "DarkSlateGray",
              "DarkTurquoise",
              "DarkViolet",
              "DeepPink",
              "DeepSkyBlue",
              "DimGray",
              "DodgerBlue",
              "FireBrick",
              "ForestGreen",
              "Fuchsia",
              "Gainsboro",
              "Gold",
              "GoldenRod",
              "Gray",
              "Green",
              "GreenYellow",
              "HotPink",
              "IndianRed",
              "Indigo",
              "Khaki",
              "LawnGreen",
              "LightBlue",
              "LightCoral",
              "LightGray",
              "LightGreen",
              "LightPink",
              "LightSalmon",
              "LightSeaGreen",
              "LightSkyBlue",
              "LightSlateGray",
              "LightSteelBlue",
              "Lime",
              "LimeGreen",
              "Maroon",
              "MediumAquaMarine",
              "MediumBlue",
              "MediumOrchid",
              "MediumPurple",
              "MediumSeaGreen",
              "MediumSlateBlue",
              "MediumSpringGreen",
              "MediumTurquoise",
              "MediumVioletRed",
              "MidnightBlue",
              "Moccasin",
              "NavajoWhite",
              "Navy",
              "Olive",
              "OliveDrab",
              "Orange",
              "OrangeRed",
              "Orchid",
              "PaleGoldenRod",
              "PaleGreen",
              "PaleTurquoise",
              "PaleVioletRed",
              "PeachPuff",
              "Peru",
              "Pink",
              "Plum",
              "PowderBlue",
              "Purple",
              "RebeccaPurple",
              "Red",
              "RosyBrown",
              "RoyalBlue",
              "SaddleBrown",
              "Salmon",
              "SandyBrown",
              "SeaGreen",
              "Sienna",
              "Silver",
              "SkyBlue",
              "SlateBlue",
              "SlateGray",
              "SpringGreen",
              "SteelBlue",
              "Tan",
              "Teal",
              "Thistle",
              "Tomato",
              "Turquoise",
              "Violet",
              "Wheat",
              "Yellow",
              "YellowGreen",
            ],
            default: "",
          },
        },
      },
      options: {
        fields: {
          shortcutTheme: {
            type: "select",
            optionLabels: [
              "{{shortcutThemeStone1}}",
              "{{shortcutThemeStone2}}",
              "{{shortcutThemeTeal1}}",
              "{{shortcutThemeTeal2}}",
              "{{shortcutThemePink1}}",
              "{{shortcutThemePink2}}",
              "{{shortcutThemeIndigo1}}",
              "{{shortcutThemeIndigo2}}",
            ],
          },
          id: {
            type: "otcs_node_picker",
            type_control: {
              parameters: {
                select_types: [],
                startLocations: [
                  "csui/dialogs/node.picker/start.locations/enterprise.volume",
                  "csui/dialogs/node.picker/start.locations/personal.volume",
                  "csui/dialogs/node.picker/start.locations/favorites",
                  "csui/dialogs/node.picker/start.locations/recent.containers",
                ],
              },
            },
          },
          type: {
            type: "select",
            optionLabels: [
              "{{typeEnterpriseVolume}}",
              "{{typePersonalVolume}}",
              "{{typeCategoryVolume}}",
            ],
          },
          customBackgroundColor: {
            type: "select",
            optionLabels: [
              "{{none}}",
              "Aqua",
              "Aquamarine",
              "Blue",
              "BlueViolet",
              "Brown",
              "BurlyWood",
              "CadetBlue",
              "Chartreuse",
              "Chocolate",
              "Coral",
              "CornflowerBlue",
              "Crimson",
              "DarkBlue",
              "DarkCyan",
              "DarkGoldenRod",
              "DarkGray",
              "DarkGreen",
              "DarkKhaki",
              "DarkMagenta",
              "DarkOliveGreen",
              "DarkOrange",
              "DarkOrchid",
              "DarkRed",
              "DarkSalmon",
              "DarkSeaGreen",
              "DarkSlateBlue",
              "DarkSlateGray",
              "DarkTurquoise",
              "DarkViolet",
              "DeepPink",
              "DeepSkyBlue",
              "DimGray",
              "DodgerBlue",
              "FireBrick",
              "ForestGreen",
              "Fuchsia",
              "Gainsboro",
              "Gold",
              "GoldenRod",
              "Gray",
              "Green",
              "GreenYellow",
              "HotPink",
              "IndianRed",
              "Indigo",
              "Khaki",
              "LawnGreen",
              "LightBlue",
              "LightCoral",
              "LightGray",
              "LightGreen",
              "LightPink",
              "LightSalmon",
              "LightSeaGreen",
              "LightSkyBlue",
              "LightSlateGray",
              "LightSteelBlue",
              "Lime",
              "LimeGreen",
              "Maroon",
              "MediumAquaMarine",
              "MediumBlue",
              "MediumOrchid",
              "MediumPurple",
              "MediumSeaGreen",
              "MediumSlateBlue",
              "MediumSpringGreen",
              "MediumTurquoise",
              "MediumVioletRed",
              "MidnightBlue",
              "Moccasin",
              "NavajoWhite",
              "Navy",
              "Olive",
              "OliveDrab",
              "Orange",
              "OrangeRed",
              "Orchid",
              "PaleGoldenRod",
              "PaleGreen",
              "PaleTurquoise",
              "PaleVioletRed",
              "PeachPuff",
              "Peru",
              "Pink",
              "Plum",
              "PowderBlue",
              "Purple",
              "RebeccaPurple",
              "Red",
              "RosyBrown",
              "RoyalBlue",
              "SaddleBrown",
              "Salmon",
              "SandyBrown",
              "SeaGreen",
              "Sienna",
              "Silver",
              "SkyBlue",
              "SlateBlue",
              "SlateGray",
              "SpringGreen",
              "SteelBlue",
              "Tan",
              "Teal",
              "Thistle",
              "Tomato",
              "Turquoise",
              "Violet",
              "Wheat",
              "Yellow",
              "YellowGreen",
            ],
          },
          customBackgroundImage: {
            type: "otcs_node_picker",
            type_control: {
              parameters: {
                select_types: [1305],
                startLocations: [
                  "csui/dialogs/node.picker/start.locations/support.assets.volume",
                ],
                startLocation:
                  "csui/dialogs/node.picker/start.locations/support.assets.volume",
              },
            },
          },
        },
      },
    }
  ),
  csui.define(
    "csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view",
    [
      "require",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
      "csui/models/widget/widget.model",
      "csui/utils/base",
      "csui/utils/perspective/perspective.util",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest",
      "json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i) {
      "use strict";
      i = e.resolveLocalizedManifest("shortcut.manifest", i, t);
      var o = s.extend({
        constructor: function (u) {
          u || (u = {}),
            (u.model = u.model || new y.Model()),
            this._injectConfigurationBehaviour(u),
            u.container.options.data.___pman_isdropped &&
              u.collection.getShortcuts().length === 0 &&
              u.model.set("___pman_opencallout", !0, { silent: !0 }),
            u.context &&
              u.context.perspective &&
              (u.type = u.context.perspective.type),
            s.prototype.constructor.apply(this, arguments),
            this._registerEventHandlers();
        },
        tagName: "div",
        modelEvents: m.defaults(
          { "refresh:mask": "onRefreshMask" },
          m.result(s.prototype, "modelEvents")
        ),
        onRefreshMask: function () {
          var n = this._getDefaultWidgetConfig();
          this.trigger("refresh:mask", n);
        },
        attachElContent: function (n) {
          var u = this.$el.find(
            ".csui-configure-perspective-widget .pman-widget-popover"
          );
          return (
            u.length
              ? (this.$el
                  .children()
                  .not(".csui-configure-perspective-widget")
                  .remove(),
                this.$el.prepend(p(n)))
              : this.$el.html(n),
            !0
          );
        },
        _getDefaultWidgetConfig: function (n) {
          n || (n = this.options);
          var u = d.groupAria + " ";
          n.collection.getShortcuts().forEach(function (h, f) {
            f > 0 && (u += ", "),
              (u += h.get("displayName") || h.get("node").get("name"));
          });
          var c = {
            allowReplace: !1,
            notifyUpdatesImmediatly: !0,
            useEnterToConfigure: this._isNewPlaceholder(n),
            ItemsInGroupAriaLabel: u,
          };
          return (
            n.collection.getShortcuts().length > 1 &&
              (c = m.extend(c, {
                removeConfirmTitle: d.removeShortcut,
                removeConfirmMsg: d.removeShortcutCnfrmMsg,
                confirmOnRemove: !1,
              })),
            c
          );
        },
        _injectConfigurationBehaviour: function (n) {
          var u = this._getDefaultWidgetConfig(n);
          let c,
            h = !!n.context._user?.get("privilege_system_admin_rights");
          n.perspectiveMode === "personalize" || !h
            ? ((c = structuredClone(i)),
              delete c.options.fields.customBackgroundColor,
              delete c.options.fields.customBackgroundImage,
              delete c.schema.properties.customBackgroundColor,
              delete c.schema.properties.customBackgroundImage)
            : (c = i),
            (this.behaviors = m.defaults(
              {
                PerspectiveWidgetConfig: m.extend(
                  {
                    behaviorClass: x(
                      "csui/perspective.manage/behaviours/pman.widget.config.behaviour"
                    ),
                    widgetConfig: function () {
                      return { options: n.model.attributes };
                    },
                    manifest: c,
                  },
                  u
                ),
              },
              this.behaviors
            ));
        },
        isShortcutValid: function (n) {
          var u = !0;
          return (
            this.collection.getShortcuts().length === 0 &&
              this.options.perspectiveMode === "edit" &&
              (u = this.isOptionsValid(n)),
            u
          );
        },
        validateConfiguration: function (n) {
          var u = this.isShortcutValid(n),
            c = u ? "removeClass" : "addClass";
          return (
            this.$el.find(".tile-group")[c]("binf-hidden"),
            this.$el[c]("csui-pman-shortcut-error"),
            u
          );
        },
        isOptionsValid: function (n) {
          return !!n.id || !!n.type;
        },
        _updateShortcut: function (n) {
          this.isShortcutValid(n.options) &&
            this.$el
              .find(".csui-configure-perspective-widget")
              .removeClass("binf-perspective-has-error");
        },
        _registerEventHandlers: function () {
          this.listenTo(this, "delete:widget", function () {
            delete this.options.container.options.data.___pman_opencallout,
              this._notifyPerspectiveChanges();
          }),
            this.listenTo(this, "update:widget:options", this._updateShortcut),
            this.listenTo(
              this,
              "replace:widget",
              this._notifyPerspectiveChanges
            ),
            this.listenTo(
              this.options.context,
              "perspective:save:success",
              () => (this.notified = !1)
            );
        },
        _updateElement: function () {
          this.$el.attr("class", m.result(this, "className")),
            this.model.get("node")?.get("image_url") &&
              this._generateImageUrlFromBWSNode();
        },
        _notifyPerspectiveChanges: function () {
          a.notifyPerspectiveChanges.call(this);
        },
        _ensureNode: function () {
          this._isNewPlaceholder()
            ? (this.node = new y.Model())
            : s.prototype._ensureNode.apply(this, arguments);
        },
        _ensureNodeFetched: function () {
          this._isNewPlaceholder() ||
            ((this.isUpdating = !0),
            s.prototype._ensureNodeFetched.apply(this, arguments),
            delete this.isUpdating);
        },
        _updateNodeState: function () {
          this._isNewPlaceholder() ||
            s.prototype._updateErrorState.apply(this, arguments);
        },
        getName: function () {
          return this._isNewPlaceholder()
            ? d.addShortcut
            : s.prototype.getName.apply(this, arguments);
        },
        onRender: function () {
          s.prototype.onRender.apply(this, arguments),
            this._isNewPlaceholder() &&
              this.$el.addClass("csui-pman-shortcut-new"),
            this.$el.addClass("csui-pman-editable-widget"),
            this.$el.find(".binf-popover").length ||
              r.clearFocusables(this.$el);
        },
        onDomRefresh: function () {
          var n = this.$el.find(".wrapper-button");
          if (
            (this.$el.find(".binf-popover").length ||
              r.clearFocusables(this.$el),
            this._isNewPlaceholder())
          )
            n.attr("aria-label", d.addShortcutToGroup);
          else {
            var u =
              this.model.get("displayName") ||
              this.model.get("node").get("name");
            n.attr("aria-label", m.str.sformat(d.accessShortcutActions, u)),
              this.$el
                .find(".icon-edit")
                .attr("aria-label", m.str.sformat(d.shortcutSettings, u)),
              this.$el
                .find(".clear-icon")
                .attr("aria-label", m.str.sformat(d.removeShortcutItem, u));
          }
        },
        onClicked: function (n) {
          n.preventDefault(),
            this.$el.find(".pman-widget-popover").has(n.target).length ||
              n.stopPropagation();
        },
        _isNewPlaceholder: function (n) {
          return (n || this.options).model.isAddShortcut();
        },
        focus: function () {
          this.$el
            .find(".csui-configure-perspective-widget .wrapper-button")
            .trigger("focus");
        },
      });
      return o;
    }
  ),
  csui.define("css!csui/widgets/shortcuts/impl/shortcuts", [], function () {}),
  csui.define(
    "csui/widgets/shortcuts/shortcuts.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/shortcuts/impl/shortcut/shortcut.view",
      "csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view",
      "csui/utils/contexts/factories/node",
      "csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",
      "csui/controls/mixins/shortcuts.view/shortcuts.view.mixin",
      "csui/utils/perspective/perspective.util",
      "smart/controls/progressblocker/blocker",
      "i18n!csui/widgets/shortcuts/impl/nls/lang",
      "css!csui/widgets/shortcuts/impl/shortcuts",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c) {
      "use strict";
      var h = m.defaults({}, x.config() || {}, { isPageHasDarkTheme: !0 }),
        f = ["shade1", "shade2", "shade3", "shade4"],
        k = y.Model.extend({
          idAttribute: "shortcutItemId",
          isAddShortcut: function () {
            return this.get("isAddNew") === !0;
          },
        }),
        C = y.Collection.extend({
          constructor: function (w, v) {
            v || (v = {}),
              m.defaults(v, {
                model: k,
                comparator: function (b, _) {
                  return _.get("isAddNew") ? -1 : 0;
                },
              }),
              (this.options = v),
              y.Collection.prototype.constructor.call(this, w, v);
          },
          getShortcuts: function () {
            return this.filter(function (w) {
              return !w.isAddShortcut();
            });
          },
          evaluateAddNewExistence: function () {
            var w = this.options[n.KEY_WIDGET_ID];
            if (
              !(
                this.options.perspectiveMode === n.MODE_PERSONALIZE &&
                w &&
                !n.isPersonalWidgetId(w)
              )
            ) {
              var v = this.where(function (b) {
                return b.isAddShortcut();
              });
              return this.length < 4 && v.length === 0
                ? (this.add({
                    id: "",
                    isAddNew: !0,
                    icon: "icon-new",
                    displayName: "",
                    customBackgroundColor: "",
                    customBackgroundImage: "",
                  }),
                  !0)
                : this.length > 4 && v.length > 0
                ? (this.remove(v), !0)
                : !1;
            }
          },
        }),
        S = s.CollectionView.extend(
          {
            constructor: function (v) {
              v || (v = {}),
                v.data || (v.data = {}),
                (v = m.defaults(v, {
                  reorderOnSort: !0,
                  widgetContainer: this,
                })),
                (v.data = this._normalizeData(v.data)),
                (v.collection =
                  v.collection ||
                  new C([], m.pick(v, "perspectiveMode", n.KEY_WIDGET_ID))),
                s.CollectionView.prototype.constructor.call(this, v);
            },
            tagName: "div",
            className:
              "csui-shortcut-container tile initialLoading csui-shortcut-group-container csui-widget-focusable",
            attributes: function () {
              var w = {};
              return (
                this._isInlineEditMode() ||
                  (w = m.extend(
                    { role: "navigation", "aria-label": c.groupAria },
                    w
                  )),
                w
              );
            },
            regions: {
              shortcut0: ".shortcut-region-0",
              shortcut1: ".shortcut-region-1",
              shortcut2: ".shortcut-region-2",
              shortcut3: ".shortcut-region-3",
            },
            behaviors: function () {
              if (!this._isInlineEditMode())
                return { TabableRegion: { behaviorClass: r } };
            },
            events: function () {
              var w = {};
              return (
                this._isInlineEditMode()
                  ? (w = m.extend(w, {
                      drop: "onDrop",
                      dragover: "onDragOver",
                      dragenter: "onDragEnter",
                      keydown: "_onEditKeyDown",
                    }))
                  : (w = m.extend(w, { keydown: "onKeyInView" })),
                w
              );
            },
            childEvents: {
              "change:shortcutTheme": "_onChangeTheme",
              "change:customBackgroundColor": "_onChangeCustomBackgroundColor",
              "change:customBackgroundImage": "_onChangeCustomBackgroundImage",
              "add:shortcut": "_onAddShortcut",
              "delete:widget": "_onRemoveShortcut",
              "update:widget:options": "_updateShortcutOptions",
            },
            childViewOptions: function (w, v) {
              return {
                context: this.options.context,
                collection: this.options.collection,
                container: this,
                perspectiveMode: this.options.perspectiveMode,
              };
            },
            getChildView: function () {
              return this._isInlineEditMode() ? d : a;
            },
            _normalizeData: function (w) {
              return (
                w || (w = { shortcutItems: [] }),
                w.shortcutTheme || (w.shortcutTheme = ""),
                w
              );
            },
            initialize: function () {
              (this.loadingText = c.loadingText),
                (this.darkBackground = h.isPageHasDarkTheme),
                u.imbue(this),
                this.listenTo(this.collection, "add", this._onCollectionChange)
                  .listenTo(this.collection, "remove", this._onCollectionChange)
                  .listenTo(this.collection, "reset", this._onCollectionChange),
                this._isInlineEditMode() &&
                  this.listenTo(
                    this.collection,
                    "add",
                    this._onCollectionInlineAdd
                  ).listenTo(
                    this.collection,
                    "remove",
                    this._onCollectionInlineRemove
                  );
              var w = m.map(
                m.first(this.options.data.shortcutItems || [], 4),
                m.clone
              );
              this._fetchModels(w).always(
                m.bind(function () {
                  this._setupCollection(w);
                }, this)
              ),
                (this._currentShortcutIndex = 0),
                this.listenTo(this, "add:child", this.propagateEventsToViews);
            },
            _fetchModels: function (w) {
              this.blockActions();
              const v = this.createDetailListForShortcuts(w),
                b = p.whenAll.apply(p, v),
                _ = this;
              return (
                b.always(function (T) {
                  T.forEach((l) => {
                    const g = l[0],
                      I = g?.id,
                      D = w.findIndex((A) => A?.customBackgroundImage === I);
                    (w[D].deploy_url = g?.deploy_url),
                      (w[D].modify_date = g?.modify_date),
                      (w[D].mime_type = g?.mime_type),
                      (w[D].version_number = g?.version_number);
                  }),
                    _.unblockActions();
                }),
                b
              );
            },
            _setupCollection: function (w) {
              if (!this._isInlineEditMode()) {
                var v = m.filter(w, function (b) {
                  return !b.node.error;
                });
                v.length > 0 ? (w = v) : (w = m.first(w, 1));
              }
              (w = w || []), this.collection.reset(w);
            },
            _isInlineEditMode: function () {
              return !!this.options.perspectiveMode;
            },
            _onCollectionChange: function () {
              this._isInlineEditMode() &&
                this.collection.evaluateAddNewExistence(),
                this._updateShortcutStyles();
            },
            _onCollectionInlineAdd: function () {
              this.collection.each(function (w) {
                w.trigger("refresh:mask");
              });
            },
            _onCollectionInlineRemove: function () {
              this.collection.each(function (w) {
                w.trigger("refresh:mask");
              });
            },
            _getLayout: function (w) {
              var v = "small";
              return w === 1 ? (v = "large") : w === 2 && (v = "medium"), v;
            },
            _getShortcutTheme: function (w, v) {
              var b = this.options.data.shortcutTheme
                ? this.options.data.shortcutTheme
                : "csui-shortcut-theme-grey";
              return v > 1 && ((w += 4 - v), (b += "-" + f[w])), b;
            },
            _updateShortcutOptions: function (w, v) {
              var b = w.model,
                _ = v.options;
              if (b.get("isAddNew")) {
                if (v.softUpdate) return;
                if (!v.isValid || !w.isOptionsValid(_)) {
                  this.options.perspectiveMode === n.MODE_EDIT_PERSPECTIVE &&
                    this._notifyOptionsChange(!w.isShortcutValid(_));
                  return;
                }
                b.set(
                  {
                    isAddNew: void 0,
                    displayName: void 0,
                    icon: void 0,
                    customBackgroundColor: void 0,
                    customBackgroundImage: void 0,
                  },
                  { silent: !0, unset: !0 }
                );
              }
              (w.isUpdating = !0),
                this._setDefaultOptions(_),
                b.set(_),
                this._notifyOptionsChange();
              var T = this.collection.evaluateAddNewExistence();
              delete w.isUpdating,
                T ||
                  (this._updateShortcutStyles(),
                  w.model.trigger("refresh:mask")),
                this.triggerMethod("dom:refresh");
            },
            _setDefaultOptions: function (w) {
              w.type = w.type || 141;
            },
            _onRemoveShortcut: function (w) {
              var v = this.collection.indexOf(w.model);
              this.collection.remove(w.model);
              var b = this.collection.getShortcuts();
              b.length === 0
                ? this.options.widgetContainer.trigger("remove:widget")
                : (this._notifyOptionsChange(),
                  this.children.findByIndex(v).focus());
            },
            _notifyOptionsChange: function (w) {
              var v = this.collection.getShortcuts().map(function (b) {
                return {
                  id: b.get("id"),
                  type: b.get("type"),
                  displayName: b.get("displayName"),
                  icon: b.has("icon") ? b.get("icon") : "",
                  customBackgroundColor:
                    (b.has("customBackgroundColor") &&
                      b.get("customBackgroundColor")) ||
                    "",
                  customBackgroundImage:
                    (b.has("customBackgroundImage") &&
                      b.get("customBackgroundImage")) ||
                    "",
                };
              });
              this.options.widgetContainer.trigger("update:widget:options", {
                shortcutTheme: this.collection.first().get("shortcutTheme"),
                shortcutItems: v,
                isValid: !w,
              });
            },
            _onChangeTheme: function (w) {
              (this.options.data.shortcutTheme = w.model.get("shortcutTheme")),
                this._updateShortcutStyles();
            },
            _onChangeBackgroundColor: function (w) {
              this.options.data.customBackgroundColor = w.model.get(
                "customBackgroundColor"
              );
            },
            _onChangeBackgroundImage: function (w) {
              this.options.data.customBackgroundImage = w.model.get(
                "customBackgroundImage"
              );
            },
            _onAddShortcut: function (w, v) {
              this.collection.add(
                {
                  id: "",
                  icon: "",
                  displayName: "",
                  customBackgroundColor: "",
                  type: 141,
                  shortcutTheme: this.options.data.shortcutTheme,
                  customBackgroundImage: "",
                },
                { at: this.collection.length - 1 }
              ),
                this.collection.sort(),
                this._notifyOptionsChange();
            },
            _updateShortcutStyles: function () {
              var w = this.options.data.shortcutTheme,
                v = this._getLayout(this.collection.length);
              this.collection.each(function (b, _) {
                var T = this._isInlineEditMode()
                    ? this.collection.getShortcuts().length
                    : this.collection.length,
                  l = this._getShortcutTheme(_, T);
                b.set({ layout: v, theme: l, shortcutTheme: w });
              }, this);
            },
            onDrop: function (w) {
              this.options.widgetContainer.trigger("replace:widget", w);
            },
            onDragOver: function (w) {
              w.preventDefault();
            },
            onDragEnter: function (w) {
              w.preventDefault();
            },
            onRender: function () {
              this._clearShortcutTabIndexes();
            },
            onDomRefresh: function () {
              if (this._isInlineEditMode()) {
                var w = !0,
                  v = c.groupAria,
                  b = this.collection.getShortcuts().length,
                  _ = "",
                  T = this.$el.parent().find(".shortcut-group-wrapper");
                switch (
                  (T.length > 0 && (w = !1),
                  w &&
                    this.$el.before(
                      "<div class='shortcut-group-button-wrapper'><button class='shortcut-group-wrapper binf-btn' tabindex='0'></button></div>"
                    ),
                  this.$el
                    .parent()
                    .off(
                      "click",
                      ".shortcut-group-wrapper",
                      this._onEditEnterPress
                    )
                    .on(
                      "click",
                      ".shortcut-group-wrapper",
                      this._onEditEnterPress.bind(this)
                    ),
                  this.$el
                    .parent()
                    .off(
                      "keydown",
                      ".shortcut-group-wrapper",
                      this._onKeyInEmptyPlaceHolder
                    )
                    .on(
                      "keydown",
                      ".shortcut-group-wrapper",
                      m.bind(this._onKeyInEmptyPlaceHolder, this)
                    ),
                  b)
                ) {
                  case 0:
                    _ = c.emptyGroup;
                    break;
                  case 1:
                    _ = m.str.sformat(c.shortcutGroupWithOneItem, b, 4 - b);
                    break;
                  case 4:
                    _ = c.maxItemsGroup;
                    break;
                  default:
                    _ = m.str.sformat(c.shortcutGroupWithMixedItems, b, 4 - b);
                }
                this.$el
                  .parent()
                  .find(".shortcut-group-wrapper")
                  .attr("aria-label", _);
              }
            },
            _clearShortcutTabIndexes: function () {
              this.$el.find(".binf-popover").length ||
                e.clearFocusables(this.$el);
            },
            currentlyFocusedElement: function () {
              var w = this._currentlyFocusedShortcut();
              return w && w.$el;
            },
            _currentlyFocusedShortcut: function () {
              return this.children.findByIndex(this._currentShortcutIndex);
            },
            _onEditEnterPress: function (w) {
              var v = p(w.target);
              return this.collection.getShortcuts().length === 0 &&
                this.$el.has(v).length === 0
                ? (this.$el.find(".csui-pman-widget-masking").trigger("click"),
                  !1)
                : v.is(this.$el.parent().find(".shortcut-group-wrapper"))
                ? (this._enterConfiguration(), !1)
                : !0;
            },
            _onEditKeyDown: function (w) {
              var v = !0,
                b = p(w.target);
              switch (w.keyCode) {
                case 13:
                case 32:
                  v = this._onEditEnterPress(w);
                  break;
                case 27:
                  this.collection.getShortcuts().length > 0
                    ? (b.is(this.$el.find(".wrapper-button"))
                        ? this.$el
                            .parent()
                            .find(".shortcut-group-wrapper")
                            .trigger("focus")
                        : this.$el
                            .find(".csui-pman-shortcut-new .wrapper-button")
                            .trigger("focus"),
                      (v = !1))
                    : this.collection.getShortcuts().length === 0 &&
                      (this._exitConfiguration(), (v = !1));
                  break;
                case 38:
                  this._selectPreviousShortcut();
                  break;
                case 40:
                  this._selectNextShortcut();
                  break;
              }
              return v;
            },
            _enterConfiguration: function () {
              (this._currentShortcutIndex = -1), this._selectShortcut(0);
            },
            _exitConfiguration: function () {
              this.$el
                .parent()
                .find(".shortcut-group-wrapper")
                .trigger("focus"),
                this._clearShortcutTabIndexes(this.$el);
            },
            onKeyInView: function (w) {
              switch (w.keyCode) {
                case 13:
                case 32:
                  this.currentlyFocusedElement().trigger("click");
                  break;
                case 38:
                  this._selectPreviousShortcut();
                  break;
                case 40:
                  this._selectNextShortcut();
                  break;
              }
            },
            _onKeyInEmptyPlaceHolder: function (w) {
              switch (w.keyCode) {
                case 9:
                  if (
                    w.shiftKey &&
                    p(w.target).is(p(".shortcut-group-wrapper"))
                  ) {
                    var v = p(document.activeElement)
                        .closest(
                          ".csui-draggable-item.csui-pman-editable-widget"
                        )
                        .index(),
                      b = p(".csui-dnd-container>.csui-pman-editable-widget"),
                      _ = b.eq(v - 1).offset().top,
                      T = b.eq(v).offset().top === _;
                    if (!T) {
                      var l = v < 0 ? 0 : _ - p(".pman-header").height();
                      p("html, body").animate({ scrollTop: l }, 0);
                    }
                  }
                  break;
              }
            },
            _selectNextShortcut: function () {
              var w = Math.min(
                this._currentShortcutIndex + 1,
                this.collection.length - 1
              );
              this._selectShortcut(w);
            },
            _selectPreviousShortcut: function () {
              var w = Math.max(this._currentShortcutIndex - 1, 0);
              this._selectShortcut(w);
            },
            _selectShortcut: function (w) {
              w !== this._currentShortcutIndex &&
                ((this._currentShortcutIndex = w),
                this.trigger("changed:focus", this),
                this._currentlyFocusedShortcut().focus());
            },
          },
          {
            migrateSingleShortcut: function (w) {
              var v;
              switch (w.background) {
                case "cs-tile-background1":
                  v = "csui-shortcut-theme-stone1";
                  break;
                case "cs-tile-background2":
                  v = "csui-shortcut-theme-teal2";
                  break;
                case "cs-tile-background3":
                  v = "csui-shortcut-theme-pink1";
                  break;
              }
              return { shortcutItems: [w], shortcutTheme: v };
            },
            migrateData: function (w, v) {
              switch (w) {
                case "shortcut":
                case "csui/widgets/shortcut":
                  return S.migrateSingleShortcut(v);
                default:
                  return v;
              }
            },
          }
        );
      return m.extend(S.prototype, i), m.extend(S.prototype, o), S;
    }
  ),
  csui.define("csui/widgets/welcome.placeholder/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/welcome.placeholder/impl/nls/root/lang", {
    greetingWithName: "Hello {0}",
    greetingWithoutName: "Hello",
    greetingMorning: "Good morning, {0}!",
    greetingAfternoon: "Good afternoon, {0}!",
    greetingEvening: "Good evening, {0}!",
    greetingMorningNoName: "Good morning!",
    greetingAfternoonNoName: "Good afternoon!",
    greetingEveningNoName: "Good evening!",
    videoLabel: "Smart UI introduction video",
    withVideoWrapperAria: "{0} {1}",
    videoSrc:
      "//sunnyside.vidavee.com/opentext/rest/file/GetFileAsset/EBC85A92D0C5DE3A272CC1C165E85A78/introVideo_2020.mp4",
    videoPoster:
      "//sunnyside.vidavee.com/opentext/rest/file/GetFileThumbnail/EBC85A92D0C5DE3A272CC1C165E85A78/thumbnail.jpg",
    message:
      "As a foundational technology in the Digital Workplace, OpenText Content Management will pave the way to personal productivity, seamless collaboration, and integration with business processes.",
  }),
  csui.define(
    "hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `
  <div class="binf-modal-dialog">
    <div class="binf-modal-content csui-video">
      <video  preload="none"
             poster="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "videoPoster") ||
                  (e != null ? i(e, "videoPoster") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoPoster",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 21 },
                      end: { line: 5, column: 36 },
                    },
                  })
                : t)
            ) +
            `"
             controls="controls">
        <source
          src="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "videoSrc") || (e != null ? i(e, "videoSrc") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoSrc",
                    hash: {},
                    loc: {
                      start: { line: 8, column: 15 },
                      end: { line: 8, column: 27 },
                    },
                  })
                : t)
            ) +
            `"
          type="video/mp4">
        </source>
      </video>

    </div>
  </div>
`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_welcome.placeholder_impl_welcome.video_welcome.video",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/url",
      "csui/utils/contexts/factories/node",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/lang",
      "csui/behaviors/keyboard.navigation/tabables.behavior",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
      "css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",
      "csui/lib/binf/js/binf",
    ],
    function (x, m, p, y, s, e, r, a, d, t) {
      var i = p.ItemView.extend({
        _dataDefaults: { videoSrc: r.videoSrc, videoPoster: r.videoPoster },
        className: "cs-dialog welcome-video binf-modal binf-fade",
        template: t,
        events: {
          "hide.binf.modal": "onDestroy",
          "hidden.binf.modal": "onDestroy",
          "keydown video": "onKeyDown",
          "shown.binf.modal": "onShown",
        },
        templateHelpers: function () {
          var o = this.options.data;
          return { videoSrc: o.videoSrc, videoPoster: o.videoPoster };
        },
        behaviors: {
          TabablesBehavior: {
            behaviorClass: a,
            recursiveNavigation: !0,
            containTabFocus: !0,
          },
          TabableRegion: { behaviorClass: d },
        },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        constructor: function (n) {
          n || (n = {}),
            n.data || (n.data = {}),
            x.each(this._dataDefaults, function (u, c) {
              var h = n.data[c];
              h || (n.data[c] = u);
            }),
            p.ItemView.prototype.constructor.apply(this, arguments),
            (this.connection = n.context.getModel(e).connector.connection);
        },
        onKeyDown: function (o) {
          o.keyCode === 27 && this.destroy();
        },
        onDestroy: function () {
          a.popTabableHandler(), this.$el.remove();
        },
        show: function () {
          this.render(),
            y.isAppleMobile() && this.$el.addClass("mobile"),
            this.$el.binf_modal("show");
        },
        onShown: function () {
          this.$("video").trigger("focus");
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <button class="csui-videoButton" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "videoLabel") || (e != null ? i(e, "videoLabel") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "videoLabel",
                    hash: {},
                    loc: {
                      start: { line: 9, column: 49 },
                      end: { line: 9, column: 63 },
                    },
                  })
                : t)
            ) +
            `"></button>
`
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `    <div class="csui-message">
      <p title="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 16 },
                      end: { line: 13, column: 27 },
                    },
                  })
                : t)
            ) +
            '">' +
            s.escapeExpression(
              ((t =
                (t = i(r, "message") || (e != null ? i(e, "message") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "message",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 29 },
                      end: { line: 13, column: 40 },
                    },
                  })
                : t)
            ) +
            `</p>
    </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `
<div class="csui-hero-tile">
  <div class="csui-hero-left">
    <div role="heading" aria-level="2" class="csui-greeting">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "greeting") || (e != null ? o(e, "greeting") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "greeting",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 61 },
                      end: { line: 4, column: 73 },
                    },
                  })
                : i)
            ) +
            `</div>
    <span class="csui-date">` +
            s.escapeExpression(
              ((i =
                (i = o(r, "date") || (e != null ? o(e, "date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "date",
                    hash: {},
                    loc: {
                      start: { line: 5, column: 28 },
                      end: { line: 5, column: 36 },
                    },
                  })
                : i)
            ) +
            `</span>
  </div>
    <div class="csui-hero-right">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "includeVideo") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 8, column: 4 },
                  end: { line: 10, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "includeMessage") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 11, column: 4 },
                  end: { line: 15, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>

</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_welcome.placeholder_impl_welcome.placeholder",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/welcome.placeholder.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/utils/base",
      "csui/utils/contexts/factories/user",
      "csui/utils/types/date",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/lang",
      "hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
      "css!csui/widgets/welcome.placeholder/impl/welcome.placeholder",
    ],
    function (x, m, p, y, s, e, r, a, d, t) {
      var i = p.ItemView.extend({
        _dataDefaults: {
          includeMessage: !0,
          includeVideo: !0,
          message: d.message,
        },
        className: "tile hero",
        template: t,
        ui: {
          welcomeMessageContainer: "> .csui-hero-tile .csui-message",
          welcomeMessage: "> .csui-hero-tile .csui-message > p",
          greetingsMessage: "> .csui-hero-tile .csui-hero-left .csui-greeting",
        },
        behaviors: { TabableRegion: { behaviorClass: r } },
        triggers: { "click .csui-hero-tile": "show:video" },
        templateHelpers: function () {
          var o = this.options.data,
            n = this.user.get("first_name"),
            u = new Date(),
            c = u.getHours(),
            h = this._getGreeting(n, c);
          return {
            videoSrc: o.videoSrc,
            videoPoster: o.videoPoster,
            includeMessage: o.includeMessage,
            includeVideo: o.includeVideo,
            greeting: h,
            message: o.message,
            videoLabel: d.videoLabel,
            date: e.formatExactDate(e.deserializeDate(u)),
          };
        },
        events: { keydown: "onKeyInView" },
        currentlyFocusedElement: function () {
          return this.$el;
        },
        onKeyInView: function (o) {
          (o.keyCode === 32 || o.keyCode === 13) &&
            (o.preventDefault(),
            o.stopPropagation(),
            this.triggerMethod("show:video"));
        },
        constructor: function (n) {
          n || (n = {}),
            n.data || (n.data = {}),
            m.each(this._dataDefaults, function (u, c) {
              var h = n.data[c];
              (h == null || h === "") && (n.data[c] = u);
            }),
            p.ItemView.call(this, n),
            (this.user = n.context.getModel(s)),
            this.listenTo(this.user, "change", this._updateGreeting),
            x(window).on("resize.app", this.render),
            this.listenTo(this, "dom:refresh", this._setTextEllipse);
        },
        onRender: function () {
          var o = this.templateHelpers();
          o.includeVideo &&
            this.$el.attr(
              "aria-label",
              m.str.sformat(d.withVideoWrapperAria, o.greeting, o.videoLabel)
            );
        },
        onDestroy: function () {
          x(window).off("resize.app", this.render);
        },
        onShowVideo: function () {
          var o = new a(this.options);
          o.show();
        },
        _setTextEllipse: function () {
          var o = this.ui.welcomeMessage,
            n = this.ui.welcomeMessageContainer.height(),
            u = parseInt(o.css("line-height"), 10);
          if (u <= n) {
            for (; o.outerHeight() > n; ) {
              var c = o.text(),
                h = c.replace(/\W*\s(\S)*$/, "...");
              if (h.length < c.length) o.text(h);
              else break;
            }
            this.ui.welcomeMessageContainer.removeClass("binf-hidden");
          } else this.ui.welcomeMessageContainer.addClass("binf-hidden");
        },
        _getGreeting: function (o, n) {
          return this._generateGreetingMessage(o, n);
        },
        _updateGreeting: function () {
          x(this.ui.greetingsMessage).text(
            this._generateGreetingMessage(
              this.user.get("first_name"),
              new Date().getHours()
            )
          );
        },
        _generateGreetingMessage: function (o, n) {
          var u;
          if (o) {
            var c =
              n < 12
                ? d.greetingMorning
                : n < 18
                ? d.greetingAfternoon
                : d.greetingEvening;
            u = m.str.sformat(c, o);
          } else
            u =
              n < 12
                ? d.greetingMorningNoName
                : n < 18
                ? d.greetingAfternoonNoName
                : d.greetingEveningNoName;
          return u;
        },
      });
      return i;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          return `      <div id="cs-link-content" class="cs-link-content"></div>
`;
        },
        3: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            '      <div id="cs-link-image" class="cs-link-image">' +
            ((t =
              ((i =
                (i =
                  o(r, "LinkPreviewImage") ||
                  (e != null ? o(e, "LinkPreviewImage") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "LinkPreviewImage",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 52 },
                      end: { line: 11, column: 74 },
                    },
                  })
                : i)) != null
              ? t
              : "") +
            `</div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div id="cs-link" class="cs-link">
  <div class="cs-link-popoverhead">
    <div id="cs-link-heading" class="cs-link-heading">` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "LinkHeading") ||
                  (e != null ? o(e, "LinkHeading") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "LinkHeading",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 54 },
                      end: { line: 3, column: 69 },
                    },
                  })
                : i)
            ) +
            `</div>
    <div id="cs-link-expand" class="cs-link-expand cs-link-expand-icon"></div>
  </div>
  <div class="cs-link-preview-content">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isPreviewContent") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 7, column: 4 },
                  end: { line: 9, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "isLinkPreviewImage") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 10, column: 4 },
                  end: { line: 12, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_cslink.preview_cslink.preview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/controls/rich.text.editor/impl/rich.text.util",
      "csui/models/node/node.model",
      "csui/utils/commands",
      "csui/utils/url",
      "hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i) {
      var o = y.ItemView.extend({
        template: t,
        className: "cs-link",
        behaviors: { DefaultAction: { behaviorClass: s } },
        subTypeName: "wiki",
        constructor: function (u) {
          u || (u = {}),
            y.ItemView.prototype.constructor.call(this, u),
            (this.options = u),
            (this.subTypeName = u.subTypeName || this.subTypeName),
            (this.modelFetched = !1),
            (this.linkPreviewContent = null),
            (this.linkPreviewImage = null),
            (this.model = this.options.previewModel);
          var c = this;
          this.model ||
            this._obtainId().done(function () {
              c._executeProcess();
            });
        },
        _obtainId: function () {
          this.id = this.options.objId || -1;
          var n = this.options.targetEle,
            u = n.href || n.closest("a").href,
            c = u.match(/^.*\/open\/(.+)$/i) || u.match(/^.*\/nodes\/(.+)$/i),
            h = x.Deferred(),
            f = this,
            k = !0;
          if (this.options.isSameDomain && c)
            if (isNaN(parseInt(c[1]))) {
              k = !1;
              var C =
                  this.options.targetEle.href &&
                  this.options.targetEle.href.substring(
                    this.options.targetEle.href.lastIndexOf("/") + 1,
                    this.options.targetEle.href.length
                  ),
                S;
              e._getNicknameId(f.options, C)
                .done(function (w) {
                  (S = e.getNewNodeModel(
                    {},
                    { connector: f.options.connector }
                  )),
                    (S.attributes = S.parse(w)),
                    (S = e.getNewNodeModel(
                      { attributes: S.attributes },
                      { connector: f.options.connector }
                    )),
                    (f.model = S),
                    (f.id = f.model.get("id")),
                    h.resolve();
                })
                .fail(function () {
                  x(f.options.targetEle).attr("title", i.cannotFindObject);
                });
            } else this.id = c[1];
          return k && h.resolve(), h.promise();
        },
        _executeProcess: function () {
          this.id !== -1
            ? ((this.model = new r(
                { id: this.id },
                {
                  connector: this.options.connector,
                  commands: a.getAllSignatures(),
                  fields: this.options.fields || {},
                  expand: this.options.expand || {},
                }
              )),
              this.model.fetch().fail(
                m.bind(function () {
                  x(this.options.targetEle).attr("title", i.cannotFindObject);
                }, this)
              ),
              this.listenTo(this.model, "sync", function (n) {
                this.trigger("model:fetched", this.model),
                  (this.linkHeading = this.model.attributes.name);
                var u = this,
                  c = this._getContent();
                c.done(function (h) {
                  u.model.get("type") === 5574
                    ? u._callbackExecuteProcess(h)
                    : x(u.options.targetEle).attr(
                        "title",
                        m.str.sformat(i.goToTooltip, u.model.get("name"))
                      );
                });
              }))
            : x(this.options.targetEle).attr("title", i.previewUnavailable);
        },
        _getContent: function () {
          var n = x.Deferred(),
            u = this.options.connector,
            c = { url: this._getUrl(), type: "GET" };
          return (
            u
              .makeAjaxCall(c)
              .done(function (h) {
                n.resolve(h);
              })
              .fail(function (h) {
                n.reject(h);
              }),
            n.promise()
          );
        },
        _getUrl: function () {
          return d.combine(
            this.options.connector.getConnectionUrl().getApiBase("v2"),
            "/" + this.subTypeName + "/" + this.id + "/previewcontent"
          );
        },
        _callbackExecuteProcess: function (n) {
          (this.modelFetched = !0),
            (this.linkPreviewImage = n.results.data.firstImage),
            (this.linkPreviewContent = n.results.data.previewContent);
          var u = x("<div>" + this.linkPreviewContent + "</div>")
            .find("*")
            .text()
            .trim();
          (this.isEmptyContent = u === "" || u === i.pageDefaultContent),
            this.isDestroyed ||
              (x(this.options.targetEle).attr({
                title: "",
                "data-binf-original-title": "",
              }),
              (this.linkPreviewContent !== null && !this.isEmptyContent) ||
              this.linkPreviewImage !== null
                ? (this.render(),
                  x(this.options.targetEle).binf_popover("show"),
                  this.linkPreviewContent !== null && !this.isEmptyContent
                    ? x(".cs-link-content").html(this.linkPreviewContent)
                    : x(".cs-link-preview-content").addClass(
                        "cs-link-image-only"
                      ),
                  this.eventHandlers())
                : x(this.options.targetEle).attr(
                    "title",
                    m.str.sformat(i.goToTooltip, this.model.get("name"))
                  ));
        },
        onDestroy: function () {
          this.hidePopover();
        },
        eventHandlers: function () {
          var n = this;
          x(".cs-link-popover").on("mouseleave", function (u) {
            x("#" + u.target.id).attr("aria-describedby") !==
              x(n.options.targetEle).attr("aria-describedby") &&
              n.hidePopover();
          }),
            x(".cs-link-expand").on("click", function (u) {
              n.expandLinkView();
            });
        },
        hidePopover: function () {
          x(this.options.targetEle).binf_popover("hide"),
            x(this.options.targetEle).binf_popover("destroy");
        },
        expandLinkView: function () {
          this.triggerMethod("execute:defaultAction", this.model);
        },
        onRender: function () {
          var n = this,
            u = this.options.targetEle;
          if (this.modelFetched) {
            var c = {
                LinkHeading: this.linkHeading,
                isLinkPreviewImage: this.linkPreviewImage !== null,
                LinkPreviewImage: this.linkPreviewImage,
                isPreviewContent: !this.isEmptyContent,
                linkPreviewContent: this.linkPreviewContent,
              },
              h = this.template(c);
            x(u).binf_popover({
              html: !0,
              trigger: "manual",
              content: h,
              container: x.fn.binf_modal.getDefaultContainer(),
              placement: function (f) {
                x(f).addClass("cs-link-popover");
                var k = x("<div/>")
                  .attr("style", "display:none")
                  .addClass(
                    "cs-link-popover binf-popover cs-link-popover-temp-div"
                  )
                  .append(t);
                x(u).append(k),
                  (n.linkPreviewImage === null ||
                    n.linkPreviewContent === null ||
                    n.isEmptyContent) &&
                    x(f).addClass("cs-link-preview-width");
                var C = x(".cs-link-popover-temp-div").height() + 40,
                  S = x(".cs-link-popover-temp-div").width() + 40;
                k.remove();
                var w = x(u),
                  v = w.offset(),
                  b = v.left,
                  _ = v.top,
                  T = x(window).width() - (b + w.outerWidth()),
                  l = x(window).height() - (_ + w.outerHeight(!0));
                return l > C
                  ? ((n.popoverPosition = "bottom"), "bottom")
                  : _ > C
                  ? ((n.popoverPosition = "top"), "top")
                  : T > S
                  ? ((n.popoverPosition = "right"), "right")
                  : b > S
                  ? ((n.popoverPosition = "left"), "left")
                  : ((n.popoverPosition = "auto"), "auto");
              },
            });
          } else
            this.model &&
              !this.model.fetching &&
              x(u).attr(
                "title",
                m.str.sformat(i.goToTooltip, this.model.get("name"))
              );
          x("*").one("scroll", function () {
            n.destroy();
          }),
            x(this.options.targetEle).one("remove", function () {
              n.destroy();
            }),
            x(this.options.targetEle)
              .off("mouseleave")
              .on("mouseleave", function (f) {
                setTimeout(function () {
                  x(".cs-link-popover:hover").length === 0 && n.destroy();
                }, 10);
              });
        },
      });
      return o;
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/html.editor.model",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/utils/url",
      "csui/models/node/node.model",
    ],
    function (x, m, p, y, s) {
      "use strict";
      var e = s.extend({
        constructor: function (a) {
          (this.options = a || (a = {})),
            p.Model.prototype.constructor.call(this, a),
            this.makeConnectable(a).makeFetchable(a);
        },
      });
      return (
        x.extend(e.prototype, {
          isFetchable: function () {
            return !!this.options;
          },
          url: function () {
            var r = y.combine(
              this.options.connector.connection.url,
              "nodes/" + this.options.id + "/content"
            );
            return r;
          },
          parse: function (r) {
            return { data: r, oldData: r };
          },
        }),
        e
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class='csui-richtext-message-wrapper'>
  <div id="csui-richtext-content-body-` +
            s.escapeExpression(
              ((i =
                (i = o(r, "id") || (e != null ? o(e, "id") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 38 },
                      end: { line: 2, column: 46 },
                    },
                  })
                : i)
            ) +
            '" class="csui-richtext-message" data-placeholder = "' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "placeholder") ||
                  (e != null ? o(e, "placeholder") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "placeholder",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 98 },
                      end: { line: 2, column: 113 },
                    },
                  })
                : i)
            ) +
            `">
    ` +
            ((t =
              ((i =
                (i = o(r, "data") || (e != null ? o(e, "data") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "data",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 4 },
                      end: { line: 3, column: 16 },
                    },
                  })
                : i)) != null
              ? t
              : "") +
            `
  </div>
</div>
`
          );
        },
      });
      return (
        p.registerPartial("csui_widgets_html.editor_impl_html.editor", y), y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `  <div class="binf-dropdown">
    <a title="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "tooltip") || (e != null ? o(e, "tooltip") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 14 },
                      end: { line: 3, column: 25 },
                    },
                  })
                : i)
            ) +
            `" class="binf-dropdown-toggle csui-html-editor-control"
       href="#" data-binf-toggle="dropdown" role="button" aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "moreActionsAria") ||
                  (e != null ? o(e, "moreActionsAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "moreActionsAria",
                    hash: {},
                    loc: {
                      start: { line: 4, column: 70 },
                      end: { line: 4, column: 89 },
                    },
                  })
                : i)
            ) +
            `"
       aria-expanded="false">
      <span class="csui-icon ` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "reserved") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(2, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 6, column: 29 },
                  end: { line: 6, column: 84 },
                },
              }
            )) != null
              ? t
              : "") +
            " " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "iconClass") || (e != null ? o(e, "iconClass") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 85 },
                      end: { line: 6, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
      </span>
    </a>
    <ul class="binf-dropdown-menu" role="menu"></ul>
  </div>
`
          );
        },
        2: function (s, e, r, a, d) {
          return " csui-html-editor-reserved-icon ";
        },
        4: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "reserved") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(5, d, 0),
              inverse: s.noop,
              loc: {
                start: { line: 12, column: 2 },
                end: { line: 15, column: 9 },
              },
            }
          )) != null
            ? t
            : "";
        },
        5: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '    <span class="csui-icon csui-html-editor-reserved-readonly ' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "iconClass") || (e != null ? i(e, "iconClass") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "iconClass",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 62 },
                      end: { line: 13, column: 75 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t = i(r, "tooltip") || (e != null ? i(e, "tooltip") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "tooltip",
                    hash: {},
                    loc: {
                      start: { line: 13, column: 84 },
                      end: { line: 13, column: 95 },
                    },
                  })
                : t)
            ) +
            `">
    </span>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (t = i(r, "if").call(
            e ?? (s.nullContext || {}),
            e != null ? i(e, "haveEditPermission") : e,
            {
              name: "if",
              hash: {},
              fn: s.program(1, d, 0),
              inverse: s.program(4, d, 0),
              loc: {
                start: { line: 1, column: 0 },
                end: { line: 16, column: 7 },
              },
            }
          )) != null
            ? t
            : "";
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_dropdown.menu_dropdown.menu",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<a tabindex="-1" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "actionName") || (e != null ? i(e, "actionName") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "actionName",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 24 },
                      end: { line: 1, column: 38 },
                    },
                  })
                : t)
            ) +
            `">
  ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "actionName") || (e != null ? i(e, "actionName") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "actionName",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 2 },
                      end: { line: 2, column: 16 },
                    },
                  })
                : t)
            ) +
            `
</a>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_dropdown.menu_dropdown.option",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view",
    [
      "module",
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/contexts/factories/member",
      "csui/utils/base",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu",
      "hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o) {
      "use strict";
      var n = s.ItemView.extend({
          tagName: "li",
          template: o,
          events: { "click a": "_executeAction", "keyup a": "onKeyUp" },
          templateHelpers: function () {
            return {
              actionName:
                t[this.model.get("signature") || this.model.get("name")],
            };
          },
          constructor: function (c) {
            s.ItemView.prototype.constructor.apply(this, arguments);
          },
          _executeAction: function () {
            if (this.options.openForEdit) this.options.openForEdit();
            else {
              var c = this.options.command.execute(this.options.status);
              c.always(
                m.bind(function () {
                  this.trigger("csui.command.executed", c);
                }, this)
              );
            }
          },
          onKeyUp: function (c) {
            [13, 32].indexOf(c.keyCode) !== -1 && this._executeAction();
          },
        }),
        u = s.CompositeView.extend({
          className: "csui-html-editor-dropdown",
          template: i,
          childView: n,
          childViewContainer: "ul.binf-dropdown-menu",
          childEvents: { "csui.command.executed": "afterCommandExecution" },
          ui: { dropdownMenu: ".binf-dropdown-menu" },
          childViewOptions: function (c) {
            var h = c.get("openForEdit") ? "HTMLEdit" : c.get("signature"),
              f = { status: this.status, node: this.options.node };
            return (
              h === "HTMLEdit"
                ? (f.openForEdit = this.options.openForEdit)
                : (h === "properties"
                    ? (h = "Properties")
                    : ["reserve", "unreserve"].indexOf(h) !== -1 &&
                      (h === "unreserve" ? (h = "Unreserve") : (h = "Reserve"),
                      (h += "Doc")),
                  (f.command = r.get(h))),
              f
            );
          },
          templateHelpers: function () {
            var c = {
              haveEditPermission: this.haveEditPermissions,
              tooltip: t.more,
              iconClass: "icon-html-edit-toolbar-more",
              reserved: this.node.get("reserved"),
              moreActionsAria: m.str.sformat(
                t.moreActionsAria,
                this.parentView.options.title
                  ? this.parentView.options.title
                  : ""
              ),
            };
            if (c.reserved) {
              var h = this.node.get("reserved_user_id") === this.user.get("id");
              h ||
                (c.tooltip = m.str.sformat(
                  t.reservedBy,
                  this.node.get("reserved_user_id"),
                  d.formatExactDate(this.node.get("reserved_date"))
                )),
                (c.iconClass = h
                  ? "icon-html-editor-reserved-owned"
                  : "icon-html-editor-reserved_other");
            }
            return c;
          },
          constructor: function (h) {
            (this.parentView = h.parentView),
              (this.node = h.node),
              (this.user = h.user),
              (this.haveEditPermissions = !!(
                h.node.actions.get("reserve") || h.node.actions.get("unreserve")
              )),
              (h.collection = this.buildCollection()),
              s.CompositeView.prototype.constructor.apply(this, arguments),
              this.listenTo(
                this.options.node,
                "change",
                this.updateActionCollection
              ),
              (this.status = {
                context: this.options.context,
                container: this.options.node,
                nodes: new e([this.options.node]),
              }),
              this.node.get("reserved") &&
                this.node.get("reserved_user_id") !== this.user.get("id") &&
                (this.reservedByUserModel = this.options.context.getModel(a, {
                  attributes: { id: this.node.get("reserved_user_id") },
                }));
          },
          buildCollection: function () {
            var c = new y.Collection();
            if (this.haveEditPermissions) {
              (!this.node.get("reserved") ||
                this.node.get("reserved_user_id") === this.user.get("id")) &&
                c.add(new y.Model({ openForEdit: !0, name: "Edit" }));
              var h,
                f = ["properties", "permissions", "unreserve"],
                k = this;
              f.map(function (C) {
                (C = k.node.actions.get(C)), C && c.add(C);
              });
            }
            return c;
          },
          updateActionCollection: function () {
            (this.haveEditPermissions = !!(
              this.options.node.actions.get("reserve") ||
              this.options.node.actions.get("unreserve")
            )),
              (this.collection = this.buildCollection()),
              this.render();
          },
          afterCommandExecution: function (c, h) {
            h.fail(
              m.bind(function () {
                c.model.get("name") === "Unreserve" && this.node.fetch();
              }, this)
            );
          },
          adjustDropdownMenu: function () {
            if (document.dir === "rtl") return !1;
            this.ui.dropdownMenu.removeClass(
              "csui-html-editor-floating-dd-menu"
            );
            var c = this.ui.dropdownMenu.offset().left,
              h = this.ui.dropdownMenu.outerWidth(),
              f = document.body.scrollWidth,
              k = c + 2 * h <= f;
            k &&
              this.ui.dropdownMenu.addClass(
                "csui-html-editor-floating-dd-menu"
              );
          },
          onRender: function () {
            var c = this.$el.find(".binf-dropdown");
            c.on(
              "binf.dropdown.before.show",
              m.bind(function () {
                c.on(
                  "binf.dropdown.after.show",
                  this.adjustDropdownMenu.bind(this)
                ),
                  p(window).on(
                    "resize.html.editor.dropdown.menu",
                    this.adjustDropdownMenu.bind(this)
                  );
              }, this)
            ),
              c.on(
                "hide.binf.dropdown",
                m.bind(function () {
                  c.off("binf.dropdown.after.show"),
                    p(window).off("resize.html.editor.dropdown.menu");
                })
              ),
              this.reservedByUserModel &&
                !this.reservedByUserModel.fetched &&
                this.reservedByUserModel.fetch().done(
                  m.bind(function (h) {
                    this.$el
                      .find(
                        ".binf-dropdown-toggle.csui-html-editor-control, .csui-html-editor-reserved-readonly"
                      )
                      .attr(
                        "title",
                        m.str.sformat(
                          t.reservedBy,
                          h.data.display_name,
                          d.formatExactDate(this.node.get("reserved_date"))
                        )
                      );
                  }, this)
                );
          },
        });
      return u;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/edit.icon",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            '<span class="csui-rich-text-edit-icon-wrapper csui-rich-text-edit-icon-wrapper-' +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 1, column: 79 },
                      end: { line: 1, column: 87 },
                    },
                  })
                : t)
            ) +
            `">
  <span title="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "editLable") || (e != null ? i(e, "editLable") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "editLable",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 15 },
                      end: { line: 2, column: 30 },
                    },
                  })
                : t)
            ) +
            '" class="icon icon-edit icon-edit-' +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 2, column: 64 },
                      end: { line: 2, column: 72 },
                    },
                  })
                : t)
            ) +
            `"></span>
</span>`
          );
        },
      });
      return p.registerPartial("csui_widgets_html.editor_impl_edit.icon", y), y;
    }
  ),
  csui.define(
    "csui/widgets/html.editor/impl/html.editor.content.view",
    [
      "csui/lib/jquery",
      "csui/lib/underscore",
      "csui/lib/backbone",
      "csui/lib/marionette",
      "csui/lib/radio",
      "csui/utils/contexts/factories/connector",
      "csui/utils/url",
      "csui/utils/base",
      "csui/utils/froala/bootstrap",
      "csui/models/node/node.model",
      "csui/utils/contexts/factories/user",
      "csui/widgets/html.editor/impl/html.editor.model",
      "hbs!csui/widgets/html.editor/impl/html.editor",
      "csui/dialogs/modal.alert/modal.alert",
      "csui/controls/progressblocker/blocker",
      "csui/controls/error/error.view",
      "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
      "csui/controls/rich.text.editor/rich.text.editor",
      "csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view",
      "csui/controls/globalmessage/globalmessage",
      "csui/utils/node.links/node.links",
      "i18n!csui/widgets/html.editor/impl/nls/lang",
      "hbs!csui/widgets/html.editor/impl/edit.icon",
      "hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",
      "css!csui/widgets/html.editor/impl/html.editor",
    ],
    function (
      x,
      m,
      p,
      y,
      s,
      e,
      r,
      a,
      d,
      t,
      i,
      o,
      n,
      u,
      c,
      h,
      f,
      k,
      C,
      S,
      w,
      v,
      b,
      _
    ) {
      "use strict";
      var T = y.ItemView.extend({
        className: "csui-html-editor-wrapper",
        modelEvents: { change: "render", error: "render" },
        ui: { richText: ".csui-richtext-message" },
        events: {
          'mouseenter .csui-richtext-message[contenteditable="false"] a':
            "_showPreview",
          'focusin .csui-richtext-message[contenteditable="true"]':
            "_actionButtonsPositionInEdge",
          'focusin .csui-richtext-message[contenteditable="false"] a':
            "_updateUrl",
        },
        getTemplate: function () {
          return this.model.error ? !1 : n;
        },
        templateHelpers: function () {
          return {
            placeholder: v.PageDefaultContent,
            id: this.model.get("id"),
            data: this.model.get("data"),
          };
        },
        constructor: function (g) {
          if (
            (g || (g = {}),
            (g.id = g.wikiPageId),
            (g = m.extend(g, (g.data = {}))),
            (this.parentView = g.parentView),
            (this.ui.richTextEle = "#csui-richtext-content-body" + g.id),
            c.imbue(this),
            (this.context = g.context),
            (this.connector = this.context.getObject(e)),
            (this.node = new t(
              { id: g.id },
              {
                connector: this.connector,
                expand: { properties: ["original_id", "parent_id"] },
                commands: [
                  "permissions",
                  "properties",
                  "reserve",
                  "unreserve",
                  "addcategory",
                  "editpermissions",
                ],
              }
            )),
            (this.user = this.context.getModel(i)),
            !g.model)
          ) {
            g.model = new o({
              connector: this.connector,
              context: this.context,
              id: g.id,
            });
            var I = r.combine(
              this.connector.connection.url,
              "nodes/" + g.id + "/content"
            );
            g.model
              .fetch({
                url: I,
                success: g.model.fetchSuccess,
                error: g.model.fetchError,
                dataType: "text",
              })
              .done(
                m.bind(function (D) {
                  s
                    .channel("quicklink:Tiles")
                    .trigger("transparent:background"),
                    this._getLatestVersion().done(
                      m.bind(function () {
                        this.oldVersion = this.model.get("version");
                      }, this)
                    );
                }, this)
              );
          }
          (g.richTextElementId = "csui-richtext-content-body-" + g.id),
            y.ItemView.prototype.constructor.call(this, g),
            (this._errorRegion = new y.Region({ el: this.el })),
            this.listenTo(
              this.model,
              "sync",
              m.bind(function () {
                this.model.error ||
                  this.user
                    .ensureFetched()
                    .done(this._renderActionsDropdown.bind(this));
              }, this)
            ),
            (this.mode = "read"),
            (this.utils = k.getRichTextEditorUtils()),
            (this.enableSaveButton = !1),
            (this.previewLinkViews = {});
        },
        onRender: function () {
          var l = this.model.error;
          this.$el[l ? "addClass" : "removeClass"]("csui-disabled"),
            l
              ? this.$el.parent().addClass("csui-html-editor-error")
              : this.$el.parent().removeClass("csui-html-editor-error"),
            l &&
              this._errorRegion.show(
                new h({
                  model: new p.Model({
                    message: v.noWikiPageFound,
                    title: l.message,
                  }),
                })
              ),
            this.$el.addClass(
              this.options.header ? "" : "csui-html-editor-no-header"
            ),
            this.$el.parent().addClass(this.options.header || l ? "" : "tile"),
            this.filterHtmlContent(),
            this.refreshTabableElements();
        },
        filterHtmlContent: function () {
          this.$el.find("table").each(function (l, g) {
            x(g)
              .css({
                border: g.getAttribute("border") + "px solid",
                borderSpacing: g.getAttribute("cellspacing") + "px",
                "text-align": g.getAttribute("align"),
              })
              .removeAttr("cellpadding cellspacing border align"),
              x(g)
                .find("th,td")
                .css("padding", g.getAttribute("cellpadding") + "px");
          }),
            this.$el.find("big").each(function (l, g) {
              x(g).replaceWith(
                '<span class="csui-big">' + x(g).html() + "</span>"
              );
            });
        },
        refreshTabableElements: function () {
          this.mode === "read"
            ? (this.tabableElements = this.$el.find("a").toArray())
            : ((this.tabableElements = []),
              this.tabableElements.push(this.editorInstance.$el[0]),
              (this.tabableElements = this.tabableElements.concat(
                x(
                  ".froala-save-cancel.csui-html-editor-action-buttons > button:not([disabled])"
                ).toArray()
              ))),
            (this.currentlyFocusedElementIndex = -1);
        },
        moveTab: function (l) {
          this.currentlyFocusedElementIndex = this.tabableElements.indexOf(
            l.target
          );
          var g = x(this.tabableElements[this.currentlyFocusedElementIndex]),
            I = !1;
          l.keyCode === 9 &&
            (l.shiftKey
              ? this.currentlyFocusedElementIndex > 0
                ? ((this.currentlyFocusedElementIndex -= 1),
                  x(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"),
                  l.stopPropagation(),
                  l.preventDefault())
                : (I = !0)
              : this.currentlyFocusedElementIndex <
                this.tabableElements.length - 1
              ? ((this.currentlyFocusedElementIndex += 1),
                x(this.tabableElements[this.currentlyFocusedElementIndex])
                  .prop("tabindex", 0)
                  .trigger("focus"),
                l.stopPropagation(),
                l.preventDefault())
              : (I = !0),
            I &&
              (this.mode === "write"
                ? (l.shiftKey
                    ? (this.currentlyFocusedElementIndex =
                        this.tabableElements.length - 1)
                    : (this.currentlyFocusedElementIndex = 0),
                  x(
                    this.tabableElements[this.currentlyFocusedElementIndex]
                  ).trigger("focus"))
                : g.on(
                    "focusout",
                    m.bind(function () {
                      g.off("focusout"),
                        (this.currentlyFocusedElementIndex = -1);
                    }, this)
                  )),
            this.mode === "write" && (l.stopPropagation(), l.preventDefault()));
        },
        _showPreview: function (l) {
          var g, I;
          this.utils.getUrl(this, l).done(
            m.bind(function () {
              (I = m.extend(
                { targetEle: l.target, connector: this.connector },
                this.options
              )),
                this.previewLinkViews[l.target.href]
                  ? ((I.previewModel = this.previewLinkViews[l.target.href]),
                    (g = new f(I)))
                  : ((g = new f(I)),
                    this.listenTo(g, "model:fetched", function (D) {
                      this.previewLinkViews[l.target.href] = D;
                    })),
                g.render();
            }, this)
          );
        },
        _updateUrl: function (l) {
          this.utils.getUrl(this, l);
        },
        _renderActionsDropdown: function () {
          this.node.fetch().done(
            m.bind(function (l) {
              if (
                ((this.dropdownMenu = new C({
                  openForEdit: this._openForEdit.bind(this),
                  node: this.node,
                  user: this.user,
                  context: this.options.context,
                  parentView: this,
                })),
                new y.Region({
                  el: this.parentView.$el.find(".tile-controls"),
                }).show(this.dropdownMenu),
                (this.grandParentEle = this.$el.closest(
                  ".csui-html-editor-grand-parent"
                )),
                this.listenTo(
                  this.dropdownMenu,
                  "render",
                  m.bind(function () {
                    this.refreshTabableElements(),
                      this.trigger("refresh:tabindexes");
                  }, this)
                ),
                (this.editIconEle = this.parentView.$el.find(".tile-controls")),
                this.options.header)
              ) {
                var g = this.options.titlefield || "";
                this.editIconEle
                  .closest(".tile-header")
                  .attr({ title: g, "aria-label": g });
              }
            }, this)
          );
        },
        editModeAccessibility: function () {
          x(document).on(
            "keydown.html.editor",
            m.bind(function (l) {
              const g = x(".fr-toolbar")[0];
              g &&
                g.style.display != "none" &&
                !x.contains(g, l.target) &&
                (l.keyCode === 9
                  ? this.moveTab(l)
                  : [13, 32].indexOf(l.keyCode) !== -1 &&
                    x(l.target).hasClass("csui-html-edit-icon") &&
                    (x(l.target).trigger("click"), l.preventDefault()));
            }, this)
          );
        },
        removeEditModeAccessibility: function () {
          x(document).off("keydown.html.editor");
        },
        _openForEdit: function () {
          this.editModeAccessibility(),
            this.blockActions(),
            this._getLatestVersion()
              .done(
                m.bind(function () {
                  this._toggleReserve(!0)
                    .done(
                      m.bind(function () {
                        this.oldVersion === this.model.get("version")
                          ? this._getLatestContent().done(
                              m.bind(function () {
                                this._editContent();
                              }, this)
                            )
                          : u.confirmQuestion(
                              m.bind(function (l) {
                                l
                                  ? (this._editContent(),
                                    (this.enableSaveButton = !0))
                                  : this._getLatestContent().done(
                                      m.bind(function () {
                                        this._editContent(),
                                          (this.oldVersion =
                                            this.model.get("version")),
                                          (this.enableSaveButton = !1);
                                      }, this)
                                    ),
                                  (this.alreadyTriggered = !0);
                              }, this),
                              v.versionDifferenceConfirmMessage,
                              v.versionDifferenceConfirmTitle
                            );
                      }, this)
                    )
                    .fail(this.unblockActions.bind(this));
                }, this)
              )
              .fail(this.unblockActions.bind(this)),
            a.isAppleMobile() &&
              this.$el
                .find(".csui-richtext-message")
                .attr("contenteditable", !0)
                .trigger("focus");
        },
        destroyFREditor: function (l) {
          x(".csui-rich-text-mask").remove(),
            x(".csui-html-editor-zindex").removeClass(
              "csui-html-editor-zindex"
            ),
            x("#csui-richtext-sharedspace").remove(),
            x(".cui-rich-editor-widget-wrapper").removeAttr("style"),
            this.editIconEle.removeClass("binf-hidden"),
            this.unblockActions(),
            this._unbindEvents(),
            x("body").find(".csui-html-editor-action-buttons").remove(),
            window.removeEventListener(
              "resize",
              this._positionActionButtonsInstance,
              !0
            ),
            this.removeEditModeAccessibility(),
            (this.mode = "read"),
            this.refreshTabableElements(),
            x(".csui-html-editor-zero-zindex").removeClass(
              "csui-html-editor-zero-zindex"
            ),
            l.destroy();
        },
        extractSelectionData: function (l) {
          return l
            ? {
                anchorNode: l.anchorNode,
                anchorOffset: l.anchorOffset,
                focusNode: l.focusNode,
                focusOffset: l.focusOffset,
              }
            : null;
        },
        _editContent: async function () {
          var l = this;
          l.contentChanged = !!l.autoSaved;
          const g = l.node.get("parent_id_expand").image_folder_id;
          async function I(V) {
            try {
              var L = new FormData();
              L.append("parent_id", g),
                L.append("type", 144),
                L.append("name", l.editorInstance.opts.imageUploadParams.name),
                L.append("file", V);
              var F = {
                  url: l.connector.connection.url + "/nodes",
                  type: "POST",
                  data: L,
                  connector: l.connector,
                },
                G = await l.updateAjaxCall(F);
              return G.id;
            } catch (W) {
              throw (console.error("Error fetching image ID:", W), W);
            }
          }
          var D = new r(this.connector.connection.url),
            A = D.getCgiScript(),
            B = {
              placeholderText: v.PageDefaultContent,
              externalParams: {
                getImageId: I.bind(this),
                connectionUrl: A,
                imageBrowseEnabled:
                  l.node.get("parent_id_expand").imagebrowseenabled,
                enableSaveButton: l._enableSaveButton,
                disableSaveButton: l._disableSaveButton,
                widgetSelector: "div[data-csui-widget_type]",
              },
              requestHeaders: {
                otcsticket: l.connector.connection.session.ticket,
              },
              events: {
                cancel: function () {
                  var V = this;
                  l.blockActions(),
                    l.contentChanged
                      ? (this.$tb.hide(),
                        this.opts.externalParams.actionButtons.hide(),
                        u.confirmQuestion(
                          function (L) {
                            L
                              ? l
                                  ._getLatestVersion()
                                  .done(function () {
                                    !l.model.get("data") &&
                                      l.model.set({
                                        data: l.model.get("oldData"),
                                      }),
                                      l.oldVersion !== l.model.get("version")
                                        ? l
                                            ._getLatestContent()
                                            .done(
                                              m.bind(function () {
                                                (l.oldVersion =
                                                  this.model.get("version")),
                                                  V.html.set(
                                                    l.model.get("oldData")
                                                  );
                                              }, l)
                                            )
                                            .fail(function (F) {
                                              l.editorInstance.events.trigger(
                                                "onFailure",
                                                [F]
                                              );
                                            })
                                        : V.html.set(l.model.get("oldData")),
                                      l.trigger("updateScrollbar"),
                                      l.destroyFREditor(V),
                                      l.autoSaved &&
                                        l.deleteAutoSavedContent({
                                          connector: l.connector,
                                          wikiId: l.node.get("parent_id"),
                                          pageId: l.model.get("id"),
                                        }),
                                      l._toggleReserve();
                                  })
                                  .fail(function (F) {
                                    l.editorInstance.events.trigger(
                                      "onFailure",
                                      [F]
                                    );
                                  })
                              : (this.$tb.show(),
                                this.opts.externalParams.actionButtons.show(),
                                x(l.options.richTextElementId).trigger("focus"),
                                l.unblockActions());
                          }.bind(this),
                          v.CancelConfirmMessage,
                          v.cancelTitle,
                          (u.buttonData.Yes = {
                            label: v.Yes,
                            tooltip: v.Yes,
                            aria: "",
                          }),
                          (u.buttonData.No = {
                            label: v.No,
                            tooltip: v.No,
                            aria: "",
                          })
                        ))
                      : l
                          ._getLatestVersion()
                          .done(function () {
                            !l.model.get("data") &&
                              l.model.set({ data: l.model.get("oldData") }),
                              l.oldVersion !== l.model.get("version")
                                ? l
                                    ._getLatestContent()
                                    .done(
                                      m.bind(function () {
                                        (l.oldVersion =
                                          this.model.get("version")),
                                          V.html.set(l.model.get("oldData"));
                                      }, l)
                                    )
                                    .fail(function (L) {
                                      l.editorInstance.events.trigger(
                                        "onFailure",
                                        [L]
                                      );
                                    })
                                : V.html.set(l.model.get("oldData")),
                              l.destroyFREditor(V),
                              l._toggleReserve();
                          })
                          .fail(function (L) {
                            l.editorInstance.events.trigger("onFailure", [L]);
                          });
                },
                "save.before": function () {
                  l._autoSaveContent();
                },
                onSave: function () {
                  l.blockActions(),
                    l
                      ._getLatestVersion()
                      .done(function () {
                        l.alreadyTriggered ||
                        l.oldVersion === l.model.get("version")
                          ? ((l.enableSaveButton = !1),
                            l
                              ._saveContent()
                              .done(() => {
                                l.editorInstance.events.trigger("onSuccess");
                              })
                              .fail((V) => {
                                l.editorInstance.events.trigger("onFailure", [
                                  V,
                                ]);
                              }))
                          : u.confirmQuestion(
                              function (V) {
                                V
                                  ? ((l.enableSaveButton = !1),
                                    l
                                      ._saveContent()
                                      .done(() => {
                                        l.editorInstance.events.trigger(
                                          "onSuccess"
                                        );
                                      })
                                      .fail((L) => {
                                        l.editorInstance.events.trigger(
                                          "onFailure",
                                          [L]
                                        );
                                      }))
                                  : (x(l.options.richTextElementId).trigger(
                                      "focus"
                                    ),
                                    l._enableSaveButton(),
                                    l.unblockActions());
                              },
                              v.versionDifferenceConfirmMessage,
                              v.versionDifferenceConfirmTitle
                            );
                      })
                      .fail(function (V) {
                        l.editorInstance.events.trigger("onFailure", [V]);
                      });
                },
                onSuccess: function () {
                  l.model.set({
                    data: l.editorInstance.html.get(),
                    oldData: l.editorInstance.html.get(),
                  }),
                    l
                      ._getLatestVersion()
                      .done(function () {
                        (l.oldVersion = l.model.get("version")),
                          l.destroyFREditor(l.editorInstance),
                          l.node.fetch(),
                          l.unblockActions();
                      })
                      .fail(function (V) {
                        l.editorInstance.events.trigger("onFailure", [V]);
                      });
                },
                onFailure: function (V) {
                  let L = new a.RequestErrorMessage(V);
                  S.showMessage("error", L.toString() || V?.message),
                    l.trigger("updateScrollbar"),
                    l.unblockActions(),
                    l._enableSaveButton();
                },
                click: function (V) {
                  const L = V.target;
                  L.nodeName === "A" &&
                    L.href &&
                    !this.edit.isDisabled() &&
                    V.preventDefault();
                },
                initialized: function () {
                  x(l.options.richTextElementId).addClass(
                    "csui-rich-text-editor-toolbar"
                  ),
                    (l.mode = "write"),
                    l.unblockActions(),
                    l.$el.find(".csui-richtext-message").trigger("focus"),
                    (l.editorInstance.opts.externalParams.actionButtons = x(
                      ".froala-save-cancel"
                    )),
                    (l.editorInstance.initialSnapshot =
                      l.editorInstance.snapshot.get()),
                    l._actionButtonsPosition(),
                    l.refreshTabableElements(),
                    N(),
                    (this.html.get = this.opts.customHtmlGet.bind(this));
                },
                contentChanged: function () {
                  l._validateState();
                },
              },
            };
          (l.editorInstance = await d("#" + this.options.richTextElementId, B)),
            (window.onbeforeunload = function () {
              return !1;
            }),
            csui.require(
              ["csui/dialogs/node.picker/node.picker"],
              function (V) {
                l.editorInstance.opts.csLink = {
                  nodeLink: w,
                  nodePicker: function () {
                    return new V({
                      connector: l.connector,
                      dialogTitle: v.contentServerLink,
                      context: l.options.context,
                      resolveShortcuts: !0,
                      resultOriginalNode: !1,
                      currentUser: l.options.context.getModel(i),
                    });
                  },
                };
              }
            );
          var M = l.$("#" + this.options.richTextElementId),
            E = M.find(".fr-wrapper");
          E.attr("contenteditable", !0),
            this.editIconEle.addClass("binf-hidden");
          var P = document.createElement("div"),
            O = document.createElement("div"),
            z = x.fn.binf_modal.getDefaultContainer();
          (P.className = "csui-rich-text-mask"),
            (O.className = "csui-rich-text-mask csui-rich-text-body-mask"),
            l.grandParentEle.before(P),
            x(z).append(O),
            a.isMSBrowser() &&
              x("#breadcrumb-wrap") &&
              x("#breadcrumb-wrap").addClass("csui-html-editor-zero-zindex");
          var j = x(P),
            U = x(O),
            H =
              this.grandParentEle.find(".csui-html-editor-no-header").length > 0
                ? 5
                : 80,
            N = function () {
              U.css("height", "0px"), j.css("top", "0px");
              var V = M.offset().top - x(P).offset().top - H,
                L = M.offset().top - H;
              (L = V < 0 ? L + -V : L),
                (V = V < 0 ? 0 : V),
                U.css("height", L + "px"),
                j.css({
                  height: document.body.scrollHeight - O.offsetHeight,
                  top: V,
                }),
                x(P).parent().addClass("csui-html-editor-zindex");
            };
          N(),
            x(window).on("resize", N),
            x(".csui-richtext-message").on("change", N);
        },
        _saveContent: function () {
          var l = this,
            g = x.Deferred(),
            I = new FormData();
          I.append(
            "TextField",
            l.editorInstance.html.get() === ""
              ? "<p></p>"
              : l.editorInstance.html.get()
          );
          var D = {
              url: l.connector.connection.url + "/nodes/" + l.options.id,
              type: "PUT",
              data: I,
              dataType: "json",
              processData: !1,
              contentType: !1,
              connector: l.connector,
              view: l,
              requestType: "saveContent",
            },
            A = l.updateAjaxCall(D),
            B = function () {
              if (l.autoSaved) {
                const E = l.connector.getConnectionUrl().getApiBase("v2"),
                  P = l.node.get("parent_id"),
                  O = l.model.get("id"),
                  z = {
                    type: "DELETE",
                    connector: l.connector,
                    wikiId: P,
                    pageId: O,
                    url: r.combine(E, "/wiki/" + P + "/autosave/" + O),
                  };
                return l.updateAjaxCall(z);
              } else return x.Deferred().resolve().promise();
            },
            M = function () {
              return l._toggleReserve(!0);
            };
          return (
            Promise.all([A, B(), M()])
              .then(function () {
                g.resolve();
              })
              .catch(function (E) {
                g.reject(E);
              }),
            g.promise()
          );
        },
        _disableSaveButton: function () {
          var l = x("body").find(".csui-html-edit-save");
          l.length && (l[0].disabled = !0);
        },
        _enableSaveButton: function () {
          var l = x("body").find(".csui-html-edit-save");
          l.length && (l[0].disabled = !1);
        },
        _toggleReserve: function (l) {
          let g = x.Deferred(),
            I = new FormData();
          if (l) {
            if (
              this.node.get("reserved") &&
              this.node.get("reserved_user_id") === this.user.get("id")
            )
              return g.resolve(), g;
            I.append("reserved_user_id", this.user.get("id"));
          } else if (this.node.get("reserved"))
            I.append("reserved_user_id", null);
          else return this.node.fetch(), g.resolve(), g;
          let D =
              this.connector.connection.url + "/nodes/" + this.node.get("id"),
            A = this;
          return (
            this.updateAjaxCall({
              url: D,
              connector: this.connector,
              data: I,
              type: "PUT",
            })
              .done(function () {
                g.resolve();
              })
              .fail(function (B) {
                S.showMessage("error", B.responseJSON.errorDetail), g.reject();
              })
              .always(function () {
                A.node.fetch();
              }),
            g
          );
        },
        _autoSaveContent: function () {
          let l = this.editorInstance;
          if (l && l.html.get().trim() !== this.model.get("data").trim()) {
            let g = l.html.get() || "<p></p>",
              I = new FormData();
            I.append("wikiId", this.node.get("parent_id")),
              I.append("pageId", this.model.get("id")),
              I.append("source", g),
              this.updateAjaxCall({
                connector: this.connector,
                url: r.combine(
                  this.connector.getConnectionUrl().getApiBase("v2"),
                  "/wiki/autosave"
                ),
                type: "POST",
                data: I,
                view: this,
              }),
              (this.autoSaved = !0);
          }
        },
        _getLatestContent: function () {
          var l = {
            url: r.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "/wiki/" + this.model.get("id") + "/autosave"
            ),
            type: "GET",
            requestType: "getContent",
            connector: this.connector,
            view: this,
          };
          return this.updateAjaxCall(l);
        },
        _getLatestVersion: function () {
          var l = {
            url: r.combine(
              this.connector.getConnectionUrl().getApiBase("v2"),
              "/nodes/" + this.model.get("id")
            ),
            type: "GET",
            requestType: "versions-reserve",
            connector: this.connector,
            view: this,
          };
          return this.updateAjaxCall(l);
        },
        _validateState: function () {
          if (
            ((this.utils = this.utils || k.getRichTextEditorUtils()),
            this.editorInstance)
          ) {
            let l = this.editorInstance.snapshot
              .get()
              .html.replace(/(|\s)fr-selected-cell/g, "");
            if (
              ((l = l.replace(/ class=""/g, "")),
              l !== this.editorInstance.initialSnapshot.html)
            ) {
              (this.contentChanged = !0),
                this._enableSaveButton(),
                this.refreshTabableElements();
              return;
            }
          }
          (this.contentChanged = !1),
            this._disableSaveButton(),
            this.refreshTabableElements();
        },
        _appendActionButtons: function () {
          var l = x("body"),
            g = {
              saveLabel: v.saveTitle,
              cancelLabel: v.cancelTitle,
              cancelAria: v.cancelAria,
              saveAria: v.saveAria,
              isFroala: !0,
            };
          (this.scrollbarWidth = window.innerWidth - document.body.clientWidth),
            l.append(_(g)),
            l.find(".csui-html-edit-save").on(
              "click",
              m.bind(function () {
                this.editorInstance.events.trigger("onSave");
              }, this)
            ),
            l.find(".csui-html-edit-cancel").on(
              "click",
              m.bind(function () {
                this.editorInstance.events.trigger("cancel");
              }, this)
            );
        },
        _actionButtonsPosition: function () {
          this.enableSaveButton
            ? (this._enableSaveButton(), this.refreshTabableElements())
            : (this._disableSaveButton(), this.refreshTabableElements());
        },
        _unbindEvents: function () {
          window.onbeforeunload = null;
        },
        updateAjaxCall: function (l) {
          var g = x.Deferred(),
            I = l.url,
            D = l.data,
            A = l.type,
            B = l.connector,
            M = l.view,
            E = l.requestType;
          return (
            B.makeAjaxCall({
              url: I,
              type: A,
              data: D,
              contentType: !1,
              crossDomain: !0,
              processData: !1,
              success: function (P, O, z) {
                switch (E) {
                  case "getContent":
                    if (P.results.data.autoSaved)
                      (M.autoSaved = !0),
                        u.confirmQuestion(
                          function (j) {
                            var U = P.results.data.content;
                            j
                              ? ((U = P.results.data.autoSaved),
                                (M.enableSaveButton = !0))
                              : ((M.enableSaveButton = !1),
                                M.deleteAutoSavedContent({
                                  connector: M.connector,
                                  wikiId: M.node.get("parent_id"),
                                  pageId: M.model.get("id"),
                                }),
                                M._toggleReserve()),
                              M.model.set({ data: U }),
                              g.resolve();
                          },
                          v.RestoreDialogMessage,
                          v.RestoreDiaglogTitle,
                          (u.buttonData.Yes = {
                            label: v.Continue,
                            tooltip: v.Continue,
                            aria: "",
                          }),
                          (u.buttonData.No = {
                            label: v.Discard,
                            tooltip: v.Discard,
                            aria: "",
                          })
                        );
                    else {
                      const j = P.results.data.content,
                        U =
                          M.model.get("version") === 1 &&
                          !M.options.wikitemplateid
                            ? ""
                            : j;
                      M.model.set({ data: U, oldData: j }), g.resolve();
                    }
                    break;
                  case "versions-reserve":
                    (M.model.attributes.version =
                      P.results.data.versions.length),
                      M.node.set({
                        reserved: P.results.data.properties.reserved,
                        reserved_user_id:
                          P.results.data.properties.reserved_user_id,
                      }),
                      g.resolve();
                    break;
                  default:
                    g.resolve(P);
                }
              },
              error: function (P, O, z) {
                g.reject(P);
              },
            }),
            g.promise()
          );
        },
        deleteAutoSavedContent: function (l) {
          this.autoSaved &&
            ((l.type = "DELETE"),
            (l.url = r.combine(
              l.connector.getConnectionUrl().getApiBase("v2"),
              "/wiki/" + l.wikiId + "/autosave/" + l.pageId
            )),
            this.updateAjaxCall(l),
            (this.autoSaved = !1));
        },
      });
      return T;
    }
  ),
  csui.define(
    "hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `<div class="csui-html-editor-tile-controls tile-controls"></div>
<div class="csui-html-editor-wrapper-parent cui-rich-editor-widget-wrapper
csui-html-editor-wrapper-parent-` +
            s.escapeExpression(
              ((t =
                (t = i(r, "id") || (e != null ? i(e, "id") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "id",
                    hash: {},
                    loc: {
                      start: { line: 3, column: 32 },
                      end: { line: 3, column: 40 },
                    },
                  })
                : t)
            ) +
            `">
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_html.editor_impl_html.editor.wrapper.template",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "csui/widgets/html.editor/html.editor.view",
    [
      "csui/lib/underscore",
      "csui/lib/jquery",
      "csui/lib/marionette",
      "csui/lib/radio",
      "csui/models/node/node.model",
      "csui/models/node.children2/node.children2",
      "csui/utils/contexts/factories/node",
      "csui/utils/commands",
      "csui/controls/tile/tile.view",
      "csui/behaviors/keyboard.navigation/tabable.region.behavior",
      "csui/behaviors/default.action/default.action.behavior",
      "csui/widgets/html.editor/impl/html.editor.content.view",
      "hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n) {
      var u = d.extend({
          constructor: function (f) {
            f || (f = {}),
              (f.icon = "cs-wiki-icon-wiki"),
              (this.context = f.context),
              (f.id = "csui-html-tile-wrapper-" + f.wikiPageId),
              d.prototype.constructor.call(this, f),
              (f = f.data ? x.extend(f, f.data) : f),
              (this.options = f),
              (this.options.parentView = this),
              (this.contentViewOptions = this.options);
          },
          contentView: o,
          contentViewOptions: function () {
            x.extend(this.options, { parentView: this });
          },
          onShow: function () {
            this.$el.addClass(
              "cui-rich-editor-widget-wrapper cui-rich-editor-widget-wrapper-" +
                this.options.wikiPageId
            );
          },
        }),
        c = p.CompositeView.extend({
          tagName: "div",
          className: "csui-html-editor-grand-parent",
          templateHelpers: function () {
            return {};
          },
          template: n,
          ui: {
            editIcon: ".tile-controls",
            contentAreaLinks: ".csui-html-editor-wrapper a",
          },
          events: {
            keydown: "onKeyInView",
            "click @ui.contentAreaLinks": "onClickLink",
            "click @ui.editIcon": "onClickEditIcon",
          },
          constructor: function (f) {
            (f = f || {}),
              f.data || (f.data = {}),
              x.extend(f, f.data),
              (f.wikiPageId = f.wikipageid || f.id),
              (f.id = "csui-html-editor-grand-parent-" + f.wikiPageId),
              (f.title = f.titlefield || f.title),
              (f.header = !!f.title),
              (f.scrollableParent = f.header
                ? ".tile-content"
                : ".csui-html-editor-wrapper-parent"),
              (this.context = f.context),
              p.CompositeView.prototype.constructor.apply(this, arguments);
          },
          behaviors: {
            TabableRegionBehavior: { behaviorClass: t },
            DefaultAction: { behaviorClass: i },
          },
          onClickEditIcon: function (h) {
            y.channel("dropdown:open").trigger("align:dropDown:menu", this);
          },
          onClickLink: function (h) {
            var f = m(h.target).attr("href")
              ? m(h.target)
              : m(h.target).parents("a");
            f[0] &&
              f.attr("href") &&
              this._handleClickLink({
                event: h,
                connector: this.options.model.connector,
                callingViewInstance: this,
              });
          },
          _handleClickLink: function (h) {
            var f,
              k = m(h.event.target).attr("href")
                ? m(h.event.target)
                : m(h.event.target).parents("a"),
              C = h.callingViewInstance,
              S = this,
              w = k.attr("href") ? k.attr("href") : "";
            if (
              this.htmlEditorContentView &&
              this.htmlEditorContentView.mode === "read"
            )
              if (w.match(/^.*\/open|Open\/(.+)$/)) {
                if (
                  (h.event.stopPropagation(),
                  h.event.preventDefault(),
                  w.indexOf("open/") !== -1 || w.indexOf("Open/") !== -1)
                ) {
                  var v = w.substring(w.lastIndexOf("/") + 1, w.length);
                  v.match(/^[0-9]+$/)
                    ? ((f = this.getNewNodeModel({
                        attributes: {
                          id: parseInt(
                            w.substring(w.lastIndexOf("/") + 1, w.length),
                            10
                          ),
                        },
                        connector: h.connector,
                      })),
                      f
                        .fetch()
                        .done(function () {
                          C.triggerMethod("execute:defaultAction", f);
                        })
                        .fail(function (l, g, I) {
                          window.location.href = w;
                        }))
                    : this.updateAjaxCall({
                        url:
                          h.connector.getConnectionUrl().getApiBase("v2") +
                          "/wiki/nickname/" +
                          v +
                          "?actions=open&fields=properties",
                        connector: h.connector,
                        view: h.callingViewInstance,
                        type: "GET",
                      })
                        .done(function (l) {
                          (f = S.getNewNodeModel(
                            {},
                            { connector: h.connector }
                          )),
                            (f.attributes = f.parse(l)),
                            (f = S.getNewNodeModel(
                              { attributes: f.attributes },
                              { connector: h.connector }
                            )),
                            C.triggerMethod("execute:defaultAction", f);
                        })
                        .fail(function () {
                          window.location.href = w;
                        });
                }
              } else if (
                w.match(/^.*\/wiki\/[0-9]+\/(.+)$/) ||
                w.match(/^.*\/wiki\/[0-9]+$/)
              ) {
                var b;
                if (
                  (h.event.stopPropagation(),
                  h.event.preventDefault(),
                  w.match(/^.*\/wiki\/[0-9]+\/(.+)$/))
                )
                  b = decodeURIComponent(
                    w.substring(w.lastIndexOf("/") + 1, w.length)
                  );
                else if (w.match(/^.*\/wiki\/[0-9]+$/)) {
                  var _ = decodeURIComponent(
                    w.substring(0, w.lastIndexOf("/") - 5)
                  );
                  b = decodeURIComponent(
                    _.substring(_.lastIndexOf("/") + 1, _.length)
                  );
                }
                this.updateAjaxCall({
                  url:
                    h.connector.getConnectionUrl().getApiBase("v2") +
                    "/wiki/" +
                    this.options.wikiid +
                    "/wikipages",
                  connector: h.connector,
                  view: h.callingViewInstance,
                  type: "GET",
                })
                  .done(function (l) {
                    (f = l.results.find(function (g) {
                      if (g.name === b) return g;
                    })),
                      f
                        ? ((f = S.getNewNodeModel({
                            attributes: f,
                            connector: h.connector,
                          })),
                          f
                            .fetch()
                            .done(function () {
                              h.callingViewInstance.triggerMethod(
                                "execute:defaultAction",
                                f
                              );
                            })
                            .fail(function (g, I, D) {
                              window.location.href = w;
                            }))
                        : (window.location.href = w);
                  })
                  .fail(function () {
                    window.location.href = w;
                  });
              } else if (w.match(/^.*objId\=(.+)$/)) {
                h.event.stopPropagation(), h.event.preventDefault();
                var T = w.indexOf("objId=");
                T !== -1 &&
                  ((f = this.getNewNodeModel({
                    attributes: {
                      id: parseInt(
                        w.substring(
                          T + 6,
                          w.substring(T + 1, w.length).indexOf("&") + T + 1
                        ),
                        10
                      ),
                    },
                    connector: h.connector,
                  })),
                  f
                    .fetch()
                    .done(function () {
                      h.callingViewInstance.triggerMethod(
                        "execute:defaultAction",
                        f
                      );
                    })
                    .fail(function (l, g, I) {
                      window.location.href = w;
                    }));
              } else
                w.match(/^.*\/app\/nodes\/(.+)$/) &&
                  (h.event.stopPropagation(),
                  h.event.preventDefault(),
                  w.indexOf("nodes/") !== -1 &&
                    ((f = this.getNewNodeModel({
                      attributes: {
                        id: parseInt(
                          w.substring(w.lastIndexOf("/") + 1, w.length),
                          10
                        ),
                      },
                      connector: h.connector,
                    })),
                    f
                      .fetch()
                      .done(function () {
                        C.triggerMethod("execute:defaultAction", f);
                      })
                      .fail(function (l, g, I) {
                        window.location.href = w;
                      })));
          },
          updateAjaxCall: function (h) {
            var f = m.Deferred(),
              k = h.url,
              C = h.data,
              S = h.type,
              w = h.connector;
            return (
              (this.ajaxRequest = m.ajax(
                w.extendAjaxOptions({
                  url: k,
                  type: S,
                  data: C,
                  contentType: !1,
                  crossDomain: !0,
                  processData: !1,
                  success: function (v, b, _) {
                    f.resolve(v);
                  },
                  error: function (v, b, _) {
                    f.reject();
                  },
                })
              )),
              f.promise()
            );
          },
          currentlyFocusedElement: function () {
            return this.htmlEditorContentView.dropdownMenu &&
              !this.htmlEditorContentView.dropdownMenu.haveEditPermissions
              ? this.htmlEditorContentView.$el.find("a:first")
              : this.$el.find(
                  ".csui-html-editor-dropdown .csui-html-editor-control"
                );
          },
          getNewNodeModel: function (h) {
            return new s(h.attributes, {
              connector: h.connector,
              commands: a.getAllSignatures(),
              fields: h.fields || {},
              expand: h.expand || {},
            });
          },
          onKeyInView: function (h) {
            this.htmlEditorContentView.mode === "read" &&
              this.htmlEditorContentView.moveTab(h);
          },
          onRender: function (h) {
            var f = this;
            this.getWikiDetails().done(function () {
              var k;
              (f.options.autosaveInterval = 6e4),
                f.options.header === void 0 || f.options.header
                  ? ((k = new u(f.options)),
                    f.listenToOnce(
                      k,
                      "show",
                      x.bind(function () {
                        f.htmlEditorContentView = k.getChildView("content");
                      }, f)
                    ))
                  : ((f.options.parentView = f),
                    (k = new o(f.options)),
                    (f.htmlEditorContentView = k)),
                new p.Region({
                  el: f.$el.find(".csui-html-editor-wrapper-parent"),
                }).show(k),
                (f._triggerView = f),
                f.listenTo(
                  f.htmlEditorContentView,
                  "refresh:tabindexes",
                  x.bind(function () {
                    f.trigger("refresh:tabindexes");
                  }, f)
                );
            });
          },
          onShow: function () {
            this.options.scrollableParent &&
              this.$el
                .find(this.options.scrollableParent)
                .addClass("csui-normal-scrolling");
          },
          getWikiDetails: function () {
            var h = this.options.context.getModel(r),
              f =
                !!h.get("data") &&
                !!h.get("data").bwsinfo &&
                !!h.get("data").bwsinfo.id,
              k = this,
              C = m.Deferred(),
              S,
              w,
              v;
            if (
              !f ||
              this.options.data.wikicontainerid ||
              this.options.data.wikitemplateid
            )
              C.resolve();
            else {
              h =
                h.get("type") === 848
                  ? h
                  : new s(
                      { id: h.get("data").bwsinfo.id },
                      { connector: h.connector }
                    );
              var b = this.getChildren(h, 5573, ["id", "main_page_id"]);
              b.fetch().done(function () {
                if (((S = b.length > 0 ? b.models[0] : void 0), S))
                  if (((v = S.get("main_page_id")), v))
                    (k.options.wikiid = S.get("id")),
                      (k.options.wikiPageid = v),
                      (k.options.wikiPageId = v),
                      C.resolve();
                  else {
                    var _ = k.getChildren(S, 5574, ["id"]);
                    _.fetch().done(function () {
                      (w = _.length > 0 ? _.models[0] : void 0),
                        w &&
                          ((k.options.wikiid = S.get("id")),
                          (k.options.wikiPageid = w.get("id")),
                          (k.options.wikiPageId = w.get("id"))),
                        C.resolve();
                    });
                  }
                else C.resolve();
              });
            }
            return C.promise();
          },
          getChildren: function (h, f, k) {
            var C = new e(
              {},
              x.defaults(
                {
                  top: 1,
                  autoreset: !0,
                  fields: { properties: k },
                  delayRestCommands: !1,
                  orderBy: "create_date",
                  filter: { type: f },
                },
                { node: h }
              )
            );
            return C;
          },
        });
      return c;
    }
  ),
  csui.define("csui/widgets/document.overview/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/document.overview/impl/nls/root/lang", {
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemEdit: "Edit",
    ToolbarItemPlay: "Play Media",
    ToolbarItemProperties: "Properties",
    location: "Location",
    docPreviewImgAlt: "Document Preview",
    name: "Name",
    description: "Description",
    created: "Created",
    createdBy: "Created by",
    modifiedBy: "Modified by",
    type: "Type",
    modified: "Modified",
    ownedBy: "Owned by",
    size: "Size",
    reservedBy: "Reserved by",
    noValue: "No value",
    reservedByUnreserve: "Reserved by {0}, Press to unreserve",
    goBackTitle: "Go back",
    goBackAria: "Go back",
  }),
  csui.define(
    "hbs!csui/widgets/document.overview/impl/document.overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"
           aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 23 },
                      end: { line: 6, column: 37 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTitle") ||
                  (e != null ? i(e, "goBackTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTitle",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 61 },
                    },
                  })
                : t)
            ) +
            `" role="link" tabindex="0"></div>
`
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `        <div class="description_section doc-overview-general-information">
          <div class="doc-overview-form-group">
            <label class="doc-overview-control-label" for="desc` +
            s.escapeExpression(
              ((t =
                (t = i(r, "unique") || (e != null ? i(e, "unique") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 109, column: 63 },
                      end: { line: 109, column: 73 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 109, column: 82 },
                      end: { line: 109, column: 96 },
                    },
                  })
                : t)
            ) +
            `">
              ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 110, column: 14 },
                      end: { line: 110, column: 28 },
                    },
                  })
                : t)
            ) +
            `
            </label>
            <div class="binf-col-sm-9">
              <button disabled id="desc` +
            s.escapeExpression(
              ((t =
                (t = i(r, "unique") || (e != null ? i(e, "unique") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 39 },
                      end: { line: 113, column: 49 },
                    },
                  })
                : t)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_label") || (e != null ? i(e, "desc_label") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 63 },
                      end: { line: 113, column: 77 },
                    },
                  })
                : t)
            ) +
            `:
              ` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_value") || (e != null ? i(e, "desc_value") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 114, column: 14 },
                      end: { line: 114, column: 28 },
                    },
                  })
                : t)
            ) +
            `"><span class="csui-ellipsis-area no-ellipsis"><span><span
                  class="cs-field-textarea-data">` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "desc_value") || (e != null ? i(e, "desc_value") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 115, column: 49 },
                      end: { line: 115, column: 63 },
                    },
                  })
                : t)
            ) +
            `</span></span>
                </span>
              </button>
            </div>
            <div style="clear:both;"></div>
          </div>
        </div>
`
          );
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="cs-content-wrapper cs-content-overlay-wrapper">

  <div class="cs-content-header">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "back_button") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 7, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="title-container"></div>
    <div class="actions-container">
      <div class="commentRegion"></div>
      <div class="favoriteRegion"></div>
    </div>
  </div>
  <div class="cs-content-container csui-normal-scrolling">
    <div class="description-container cs-content">

      <div class="created_by_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-doc-overview-created-by-pic"></div>
            <div class="csui-doc-overview-created-by-user"></div>
          </div>
        </div>
      </div>

      <div class="modified_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 61 },
                      end: { line: 31, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 31, column: 80 },
                      end: { line: 31, column: 96 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 12 },
                      end: { line: 32, column: 28 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 37 },
                      end: { line: 35, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 61 },
                      end: { line: 35, column: 77 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 35, column: 79 },
                      end: { line: 35, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
              <span title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 27 },
                      end: { line: 36, column: 42 },
                    },
                  })
                : i)
            ) +
            '">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 44 },
                      end: { line: 36, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>
      <div class="modified_by_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-doc-overview-modified-by-pic"></div>
            <div class="csui-doc-overview-modified-by-user"></div>
          </div>
        </div>
      </div>
      <div class="type_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="type` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 55, column: 61 },
                      end: { line: 55, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 55, column: 80 },
                      end: { line: 55, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 56, column: 12 },
                      end: { line: 56, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 27 },
                      end: { line: 59, column: 40 },
                    },
                  })
                : i)
            ) +
            '" id="type' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 50 },
                      end: { line: 59, column: 60 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 60, column: 32 },
                      end: { line: 60, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 60, column: 48 },
                      end: { line: 60, column: 61 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 61, column: 20 },
                      end: { line: 61, column: 33 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="size_section doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" for="size` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 70, column: 61 },
                      end: { line: 70, column: 71 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 70, column: 80 },
                      end: { line: 70, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 71, column: 12 },
                      end: { line: 71, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_full_value") ||
                  (e != null ? o(e, "size_full_value") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_full_value",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 27 },
                      end: { line: 74, column: 46 },
                    },
                  })
                : i)
            ) +
            '" id="size' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 56 },
                      end: { line: 74, column: 66 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 75, column: 32 },
                      end: { line: 75, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 75, column: 48 },
                      end: { line: 75, column: 62 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 76, column: 20 },
                      end: { line: 76, column: 34 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="reserve_info doc-overview-general-information binf-hidden">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "reservedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "reservedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="doc-overview-reserve">
              <div class="csui-doc-overview-reserve-btn"></div>
              <div class="csui-doc-overview-reserve-user"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="location-container doc-overview-general-information">
        <div class="doc-overview-form-group">
          <label class="doc-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9 location-view"></div>
        </div>
      </div>

` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "has_description") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 106, column: 6 },
                  end: { line: 122, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `
    </div>

    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">
      <div class="metadata-tab">
        <div class="thumbnail_section metadata-preview preview-section"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `">
          <img role="link" src="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgSrc") || (e != null ? o(e, "imgSrc") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 130, column: 32 },
                      end: { line: 130, column: 42 },
                    },
                  })
                : i)
            ) +
            '" class="img-doc-preview binf-hidden" alt="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgAlt") || (e != null ? o(e, "imgAlt") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 130, column: 85 },
                      end: { line: 130, column: 95 },
                    },
                  })
                : i)
            ) +
            `" />
        </div>
      </div>
    </div>
  </div>
  <div class="cs-fadeout-container"></div>
  <div class="cs-content-footer">
    <button class="binf-btn primary-btn command-btn open-btn" type="button"
            data-signature="OpenDocument">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn csui-doc-overview-download-btn" type="button"
            data-signature="Download">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemDownload")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn edit-btn" type="button"
            data-signature="Edit">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemEdit")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn properties-btn" type="button"
            data-signature="Properties">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemProperties")
                  : t,
                e
              )
            ) +
            `</button>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_document.overview_impl_document.overview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/document.overview/impl/document.overview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/document.overview/document.overview.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/jquery",
      "csui/utils/log",
      "csui/utils/url",
      "csui/utils/types/date",
      "csui/utils/nodesprites",
      "csui/utils/contexts/factories/node",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/controls/toolbar/toolbar.command.controller",
      "csui/models/nodes",
      "csui/utils/commands",
      "csui/utils/commandhelper",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/document.overview/impl/nls/lang",
      "csui/utils/contexts/factories/largefilesettings.factory",
      "csui/utils/contexts/factories/next.node",
      "hbs!csui/widgets/document.overview/impl/document.overview",
      "css!csui/widgets/document.overview/impl/document.overview",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c, h, f, k, C, S) {
      "use strict";
      e = e(m.id);
      var w = p.extend(
          { fileActionSettings: [] },
          x.moduleConfig(
            "csui/utils/commands/open.document/delegates/open.document.delegates"
          )
        ),
        v = y.ItemView.extend({
          className: "cs-form csui-general-form cs-document-overview-wrapper",
          template: S,
          templateHelpers: function () {
            var b = !0,
              _ = d.findTypeByNode(this.options.node),
              T = this.options.node.get("size_formatted"),
              l = this.options.node.get("size"),
              g = a.formatExactDateTime(
                a.deserializeDate(this.options.node.get("modify_date"))
              ),
              I = this.options.node.get("description"),
              D = !!I,
              A = {
                unique: p.uniqueId("_doc"),
                lang: f,
                back_button: b,
                mime_type: _,
                has_description: D,
                size_value: T,
                size_full_value: l,
                modify_date: g,
                desc_value: I,
                type_label: f.type,
                size_label: f.size,
                modify_label: f.modified,
                desc_label: f.description,
                imgSrc:
                  "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
                imgAlt: f.docPreviewImgAlt,
                goBackTitle: f.goBackTitle,
                goBackAria: f.goBackAria,
              };
            return A;
          },
          ui: {
            location: ".location-view",
            back: ".cs-go-back",
            titleContainer: ".title-container",
            commentButtonRegion: ".commentRegion",
            favoriteStarRegion: ".favoriteRegion",
            thumbnailContainer: ".thumbnail-container",
            modifySectionBtn: ".modified_section button",
            mimeTypeBtn: ".type_section button",
            sizeSectionBtn: ".size_section button",
            thumbnailImg: ".img-doc-preview",
            reserveInfo: ".reserve_info",
            reserveUser: ".csui-doc-overview-reserve-user",
            reserverBtn: ".csui-doc-overview-reserve-btn",
            createdBy: ".created_by_section .binf-col-sm-9",
            modifiedBy: ".modified_by_section .binf-col-sm-9",
            creadyByUser: ".csui-doc-overview-created-by-user",
            createdByPic: ".csui-doc-overview-created-by-pic",
            modifiedByUser: ".csui-doc-overview-modified-by-user",
            modifiedByPic: ".csui-doc-overview-modified-by-pic",
            openBtn: ".open-btn",
            editBtn: ".edit-btn",
            downloadBtn: ".csui-doc-overview-download-btn",
            propertiesBtn: ".properties-btn",
            thumbnailSection: ".thumbnail_section",
          },
          events: {
            "click .command-btn": "_handleClickButton",
            "click @ui.back": "onBackButton",
            keydown: "onKeyInView",
          },
          constructor: function (_) {
            _ || (_ = {}),
              h.imbue(this),
              _.data || (_.data = {}),
              _.node ||
                (_.node = _.context.getModel(t, {
                  attributes: _.data.id && { id: _.data.id },
                  temporary: !0,
                })),
              (this.previewInFullMode = !0),
              (this.options = _);
            var T = _.context && _.context.viewStateModel;
            (this.back_button = T && T.hasRouted()),
              (this.largeFileSettingsFactory =
                this.options.context.getFactory(k)),
              (this.largeFileSettingsModel =
                this.largeFileSettingsFactory &&
                this.largeFileSettingsFactory.property),
              y.ItemView.prototype.constructor.apply(this, arguments),
              (this.commandController = new o({ commands: _.commands || u })),
              (this.commands = this.commandController.commands),
              (this.reloadWidget = !1),
              (this.parentNode = void 0),
              (this.supportOriginatingView = !0),
              this.listenTo(
                this.options.node,
                "change",
                p.bind(this._handleNodeChange, this)
              ),
              this.listenTo(
                this,
                "new:version:added",
                p.bind(this._handleVersionChange, this)
              ),
              this.listenTo(
                this.options.node,
                "delete",
                p.bind(this._navigateToParent, this)
              ),
              this.listenTo(
                this,
                "disable:blocking",
                this._currentlyFocusedElement
              ),
              T &&
                this.listenTo(T, "navigate", function (l) {
                  l && !this.back_button && this.ui.back.show();
                }),
              this.blockActions();
          },
          onRender: function () {
            this._showMetadataItemName(),
              this._addCommentView(),
              this._addFavoriteView(),
              this._showThumbnail(),
              this._addLocationView(),
              this._showCreatedByUserName(),
              this._showModifiedByUserName(),
              this._showReserveRow(),
              this._checkPermissions(),
              this.back_button || this.ui.back.hide();
          },
          _currentlyFocusedElement: function () {
            (this.tabableElements = this.$el.find(
              "[tabindex='0']:not([disabled]):not(.csui-disabled):visible"
            )),
              this.tabableElements.length > 0 &&
                (
                  p.find(this.tabableElements, function (_) {
                    return _.className.includes("title");
                  }) || this.tabableElements[0]
                ).focus();
          },
          _unblockActions: function () {
            this.unblockActions(),
              this.$el
                .find(".cs-content-wrapper")
                .removeClass("cs-content-overlay-wrapper");
          },
          onShow: function () {
            this.$el.addClass("adjust-scroll");
          },
          onDomRefresh: function () {
            this.metadataItemNameView &&
              this.metadataItemNameView.triggerMethod("dom:refresh");
          },
          _isReserved: function () {
            return this.options.node.get("reserved") === !0;
          },
          _showMetadataItemName: function () {
            csui.require(
              [
                "csui/widgets/metadata/impl/header/item.name/metadata.item.name.view",
              ],
              p.bind(function (b) {
                this.metadataItemNameView &&
                  this.metadataItemNameView.destroy(),
                  (this.metadataItemNameView = new b({
                    model: this.options.node,
                    container: this.options.node.parent,
                    containerCollection: this.options.containerCollection,
                    collection: this.options.collection,
                    context: this.options.context,
                    nameSchema: {},
                    commands: this.commands,
                    originatingView: this,
                    showDropdownMenu: !0,
                    showPropertiesCommand: !0,
                    noMetadataNavigation: !0,
                  })),
                  this.listenTo(
                    this.metadataItemNameView,
                    "metadata:item:name:save",
                    this._saveItemName
                  );
                var _ = this.metadataItemNameView.render();
                y.triggerMethodOn(_, "before:show", _, this),
                  this.ui.titleContainer.append(_.el),
                  y.triggerMethodOn(_, "show", _, this);
              }, this)
            );
          },
          _saveItemName: function (b) {
            var _ = this,
              T = b.sender.getValue(),
              l = { name: T },
              g = b.sender && b.sender.model,
              I = this.options.model || this.options.node;
            g &&
              g.changed.name_multilingual &&
              p.extend(l, { name_multilingual: g.changed.name_multilingual }),
              I.setFields("versions.element(0)", "owner_id");
            var D = p.clone(I.attributes);
            return I.save(D, { data: l, wait: !0, silent: !0 })
              .then(function () {
                I.fetch({ silent: !0 }).done(function () {
                  _._updateModifyDateAndTimeStamp(),
                    b.success(),
                    I.trigger("change:name", I, l);
                });
              })
              .fail(function (A) {
                b.error(A);
              });
          },
          _addCommentView: function () {
            csui.require(
              [
                "csui/controls/tableheader/comment/comment.button.view",
                "esoc/widgets/utils/commentdialog/commentdialog.view",
              ],
              p.bind(function (b) {
                var _ = this.options;
                (_.originatingView = this),
                  (_.model = this.options.node || this.options.model);
                var T = new b(_),
                  l = new y.Region({ el: this.ui.commentButtonRegion });
                l.show(T), this._unblockActions();
              }, this)
            );
          },
          _addFavoriteView: function () {
            csui.require(
              ["csui/widgets/favorites/favorite.star.view"],
              p.bind(function (b) {
                var _ = this.options;
                (_.model = this.options.node || this.options.model),
                  (_.popoverAtBodyElement = !0);
                var T = new b(_),
                  l = new y.Region({ el: this.ui.favoriteStarRegion });
                l.show(T);
              }, this)
            );
          },
          _handleNodeChange: function () {
            this.options.node.isReservedClicked ||
            this.options.node.isUnreservedClicked
              ? (this._updateReserveField(),
                this._updateModifyDateAndTimeStamp(),
                (this.options.node.isReservedClicked = !1),
                (this.options.node.isUnreservedClicked = !1))
              : this.options.node.changed.csuiDelayedActionsRetrieved
              ? ((this.isReserved = !1),
                this._updateReserveField(),
                this._checkPermissions())
              : this.render();
          },
          _handleVersionChange: function () {
            this.ui.thumbnailContainer.addClass("binf-hidden"),
              this.$el.removeClass(
                "cs-document-overview-wrapper-with-thumbnail"
              );
          },
          _updateModifyDateAndTimeStamp: function () {
            var b = this.ui.modifySectionBtn,
              _ = b.find("span"),
              T = a.formatExactDateTime(
                a.deserializeDate(this.options.node.get("modify_date"))
              );
            _.text() != T &&
              (b.attr("aria-label", f.modified + ":" + T),
              _.attr("title", T).text(T));
          },
          _showThumbnail: function () {
            if (
              ((this.thumbnail =
                this.options.thumbnail || new i({ node: this.options.node })),
              this.listenTo(this.thumbnail, "loadUrl", this._showImage),
              this.listenTo(this.thumbnail, "error", this._showDefaultImage),
              this.listenTo(
                this,
                "destroy",
                p.bind(this._destroyThumbnail, this)
              ),
              !this.thumbnailSet)
            ) {
              var b = this;
              (this.thumbnailSet = !0),
                this.thumbnail.hasOwnProperty("imgUrl") && this.thumbnail.imgUrl
                  ? this._showImage()
                  : this.thumbnail.loadUrl();
            }
          },
          _showImage: function () {
            this.$el.addClass("cs-document-overview-wrapper-with-thumbnail"),
              this.ui.thumbnailContainer.removeClass("binf-hidden"),
              this.trigger("thumbnail:show:image");
            var b = this,
              _ = this.ui.thumbnailImg;
            _.attr("src", this.thumbnail.imgUrl),
              _.prop("tabindex", "0"),
              _.one("load", function (T) {
                T.target.clientHeight >= T.target.clientWidth
                  ? _.addClass("cs-form-img-vertical")
                  : _.addClass("cs-form-img-horizontal"),
                  _.addClass("cs-form-img-border"),
                  _.removeClass("binf-hidden");
                var l = s.Event("tab:content:render");
                b.$el.trigger(l);
              });
          },
          _showDefaultImage: function (b, _) {
            e.warn(_.message);
          },
          _destroyThumbnail: function () {
            this.thumbnail &&
              (this.thumbnail.destroy(), (this.thumbnail = void 0)),
              (this.thumbnailSet = !1);
          },
          _addLocationView: function () {
            var b = this,
              _ = function () {
                csui.require(
                  ["csui/controls/table/cells/parent/parent.view"],
                  p.bind(function (A) {
                    var B = new A({
                      model: b.options.node,
                      context: b.options.context,
                      nameEdit: !1,
                      iconSize: "contain",
                      el: b.$el.find(b.ui.location),
                    });
                    B.render();
                  }, this)
                );
              };
            if (this.options.node.get("parent_id_expand")) _();
            else {
              var T = this.options.node,
                l = T.get("parent_id"),
                g = T.connector,
                I = r.combine(
                  g.getConnectionUrl().getApiBase("v2"),
                  "/nodes/" + l + "/properties"
                ),
                D = { type: "GET", url: I };
              g.makeAjaxCall(D).done(
                p.bind(function (A) {
                  T.set("parent_id_expand", A.results.data.properties, {
                    silent: !0,
                  }),
                    _();
                }, this)
              );
            }
          },
          _showReserveRow: function () {
            this._updateReserveField();
          },
          _cleanAndInitReserveRow: function () {
            this.ui.reserveInfo.addClass("binf-hidden"),
              this.reserveFieldView.$el.html(),
              this.ui.reserveUser.html();
          },
          _updateReserveField: function () {
            var b = this._isReserved();
            if (b && !this.isReserved) {
              this.ui.reserveInfo.removeClass("binf-hidden");
              var _ = {
                  context: this.options.context,
                  tableView: this,
                  model: this.options.node || this.options.model,
                  reservedByLabel: f.reservedByUnreserve,
                },
                T = this;
              csui.require(
                ["csui/controls/node.state/impl/reservation/reservation.view"],
                function (l) {
                  T.reserveFieldView = new l(_);
                  var g = new y.Region({ el: T.ui.reserverBtn });
                  (T.reserveFieldView.tagName = "span"),
                    g.show(T.reserveFieldView),
                    T.$el
                      .find("li.csui-node-state-reservation")
                      .attr("role", "none")
                      .find("button")
                      .removeAttr("tabindex"),
                    T._getUserField({
                      userid: T.options.node.get("reserved_user_id"),
                      placeholder: T.ui.reserveUser,
                      showUserProfileLink: !0,
                    }),
                    (T.isReserved = !0);
                }
              );
            } else
              !b &&
                this.isReserved &&
                (this.reserveFieldView && this.reserveFieldView.destroy(),
                this._cleanAndInitReserveRow(),
                (this.isReserved = !1));
          },
          _showCreatedByUserName: function () {
            var b = {
              baseElement: this.ui.createdBy,
              userId: this.options.node.get("create_user_id"),
            };
            this._showUserName(b);
          },
          _showUserName: function (b) {
            this._getUserField({
              userid: b.userId,
              placeholder: this.ui.creadyByUser,
              showUserProfileLink: !0,
            }),
              this._getUserField({
                userid: b.userId,
                placeholder: this.ui.createdByPic,
                userWidgetWrapperClass: "",
                showUserWidgetFor: "profilepic",
                showUserProfileLink: !0,
                disableTabForProfilePic: !0,
              });
          },
          _showModifiedByUserName: function () {
            const b = {
              baseElement: this.ui.modifiedBy,
              userId: this.options.node.get("modify_user_id"),
            };
            this._showModifiedUserName(b);
          },
          _showModifiedUserName: function (b) {
            this._getUserField({
              userid: b.userId,
              placeholder: this.ui.modifiedByUser,
              showUserProfileLink: !0,
            }),
              this._getUserField({
                userid: b.userId,
                placeholder: this.ui.modifiedByPic,
                userWidgetWrapperClass: "",
                showUserWidgetFor: "profilepic",
                showUserProfileLink: !0,
                disableTabForProfilePic: !0,
              });
          },
          _getUserField: function (b) {
            csui.require(
              ["esoc/controls/userwidget/userwidget.view"],
              p.bind(function (_) {
                var T = p.extend(
                    {
                      context: this.options.context,
                      showMiniProfile: !0,
                      connector: this.options.node.connector,
                      imgSrc:
                        "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
                    },
                    b
                  ),
                  l = new _(T),
                  g = new y.Region({ el: s(b.placeholder) });
                g.show(l);
              }, this)
            );
          },
          _checkPermissions: function () {
            var b = { signature: "Edit", actionBtnEle: this.ui.editBtn },
              _ = { signature: "Download", actionBtnEle: this.ui.downloadBtn },
              T = { signature: "OpenDocument", actionBtnEle: this.ui.openBtn },
              l = {
                signature: "Properties",
                actionBtnEle: this.ui.propertiesBtn,
              },
              g = { exclude: ["OpenSpecificNodePerspective", "Download"] };
            let I = this,
              D = w.fileActionSettings.filter(function (A) {
                if (
                  (A.Action === "Download" && (I.orderOfDownload = A.order),
                  I.orderOfDownload &&
                    A.Action === "OpenInBrowser" &&
                    I.orderOfDownload < A.order)
                )
                  return !0;
              });
            D && D.length && g.exclude.push("OpenInBrowser"),
              this._checkPermForSpecificAction(T, g),
              this._checkPermForSpecificAction(b),
              this._checkPermForSpecificAction(_),
              this._checkPermForSpecificAction(l);
          },
          _checkPermForOpenAction: function (b) {
            var _ = this.commands.findWhere({ signature: b.signature });
            _.checkPermission(this.options.node).then(function (T) {
              T
                ? b.actionBtnEle.removeClass("binf-hidden")
                : b.actionBtnEle.addClass("binf-hidden");
            });
          },
          _checkPermForSpecificAction: function (b, _ = {}) {
            var T = this.commands.findWhere({ signature: b.signature }),
              l = {
                nodes: new n([this.options.node]),
                container: this.options.node.parent,
                commandData: _,
              },
              g = { context: this.options.context };
            if (!(T && T.enabled(l, g)))
              T &&
                T.get("signature") === "OpenDocument" &&
                this.ui.thumbnailSection.css("cursor", "default"),
                b.actionBtnEle.addClass("binf-hidden");
            else {
              if (T && T.get("signature") === "OpenDocument") {
                var I = this;
                s(this.ui.thumbnailSection).on("click", function (D) {
                  I._handleClickThumbnail(D);
                });
              }
              b.actionBtnEle.removeClass("binf-hidden");
            }
          },
          onKeyInView: function (b) {
            var _ = b || window.event,
              T = _.target || _.srcElement;
            (_.keyCode === 13 || _.keyCode === 32) &&
              (this.$el.find(".title-input").is(_.target) ||
                (_.preventDefault(),
                _.stopPropagation(),
                s(T).trigger("click")));
          },
          onBackButton: function () {
            if (!this.backButtonClicked) {
              var b = this.options,
                _ = b && b.context,
                T = _ && _.viewStateModel;
              T && T.restoreLastFragment(), (this.backButtonClicked = !0);
            }
          },
          _handleClickThumbnail: function (b) {
            b.stopImmediatePropagation(), this._executeCommand("OpenDocument");
          },
          _handleClickButton: function (b) {
            b.stopImmediatePropagation();
            var _ = s(b.target).data("signature");
            this._executeCommand(_);
          },
          _executeCommand: function (b) {
            var _ = this.commands.get(b),
              T = this;
            T.collection = new n([this.options.node]);
            var l = {
                nodes: new n([this.options.node]),
                container: this.options.node,
                originatingView: T,
              },
              g = { context: this.options.context };
            try {
              if (!_) throw new Error('Command "' + b + '" not found.');
              var I = _.execute(l, g);
              c.handleExecutionResults(I, {
                command: _,
                suppressSuccessMessage: l.suppressSuccessMessage,
                suppressFailMessage: l.suppressFailMessage,
              });
            } catch (D) {
              e.warn(
                `Executing the command "{0}" failed.
{1}`,
                _.get("signature"),
                D.message
              ) && console.warn(e.last);
            }
          },
          _navigateToParent: function () {
            var b = this.options.model.get("parent_id");
            b && this._setNextNodeModelFactory(b);
          },
          _setNextNodeModelFactory: function (b) {
            if (this.options.context && b !== void 0) {
              var _ = this.options.context.getModel(C);
              _ &&
                (_.get("id") === b && _.unset("id", { silent: !0 }),
                _.set("id", b));
            }
          },
        });
      return v;
    }
  ),
  csui.define("csui/widgets/version.overview/impl/nls/lang", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/version.overview/impl/nls/root/lang", {
    ToolbarItemOpen: "Open",
    ToolbarItemDownload: "Download",
    ToolbarItemProperties: "Properties",
    location: "Location",
    docPreviewImgAlt: "Version Preview",
    name: "Name",
    description: "Description",
    created: "Created",
    createdBy: "Created by",
    type: "Type",
    modified: "Modified",
    ownedBy: "Owned by",
    size: "Size",
    noValue: "No value",
    goBackTitle: "Go back",
    goBackAria: "Go back",
    versionText: "v {0}",
    versionAria: "version {0}",
    lockedBy: "Locked by",
  }),
  csui.define(
    "hbs!csui/widgets/version.overview/impl/version.overview",
    ["module", "hbs", "nuc/lib/handlebars"],
    function (x, m, p) {
      var y = p.template({
        1: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"
           aria-label="` +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackAria") || (e != null ? i(e, "goBackAria") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackAria",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 23 },
                      end: { line: 6, column: 37 },
                    },
                  })
                : t)
            ) +
            '" title="' +
            s.escapeExpression(
              ((t =
                (t =
                  i(r, "goBackTitle") ||
                  (e != null ? i(e, "goBackTitle") : e)) != null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "goBackTitle",
                    hash: {},
                    loc: {
                      start: { line: 6, column: 46 },
                      end: { line: 6, column: 61 },
                    },
                  })
                : t)
            ) +
            `" role="link" tabindex="0"></div>
`
          );
        },
        3: function (s, e, r, a, d) {
          var t,
            i =
              s.lookupProperty ||
              function (o, n) {
                if (Object.prototype.hasOwnProperty.call(o, n)) return o[n];
              };
          return (
            `      <div class="lock_info  version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              ((t =
                (t = i(r, "lockedBy") || (e != null ? i(e, "lockedBy") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "lockedBy",
                    hash: {},
                    loc: {
                      start: { line: 88, column: 63 },
                      end: { line: 88, column: 75 },
                    },
                  })
                : t)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((t =
                (t = i(r, "lockedBy") || (e != null ? i(e, "lockedBy") : e)) !=
                null
                  ? t
                  : s.hooks.helperMissing),
              typeof t == "function"
                ? t.call(e ?? (s.nullContext || {}), {
                    name: "lockedBy",
                    hash: {},
                    loc: {
                      start: { line: 89, column: 12 },
                      end: { line: 89, column: 24 },
                    },
                  })
                : t)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="version-overview-lock">
              <div class="csui-version-overview-lock-btn"></div>
              <div class="csui-version-overview-lock-user"></div>
            </div>
          </div>
        </div>
      </div>
`
          );
        },
        5: function (s, e, r, a, d) {
          return "binf-hidden";
        },
        compiler: [8, ">= 4.3.0"],
        main: function (s, e, r, a, d) {
          var t,
            i,
            o =
              s.lookupProperty ||
              function (n, u) {
                if (Object.prototype.hasOwnProperty.call(n, u)) return n[u];
              };
          return (
            `<div class="cs-content-wrapper cs-content-overlay-wrapper">

  <div class="cs-content-header">
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "back_button") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(1, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 4, column: 4 },
                  end: { line: 7, column: 11 },
                },
              }
            )) != null
              ? t
              : "") +
            `    <div class="title-container"></div>
    <div class="overview-page-version-label">
      <span class="csui-overview-version-label" aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "versionAria") ||
                  (e != null ? o(e, "versionAria") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "versionAria",
                    hash: {},
                    loc: {
                      start: { line: 10, column: 60 },
                      end: { line: 10, column: 75 },
                    },
                  })
                : i)
            ) +
            `">
        ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "versionText") ||
                  (e != null ? o(e, "versionText") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "versionText",
                    hash: {},
                    loc: {
                      start: { line: 11, column: 8 },
                      end: { line: 11, column: 23 },
                    },
                  })
                : i)
            ) +
            `
      </span>
    </div>
  </div>
  <div class="cs-content-container">
    <div class="description-container cs-content">

      <div class="created_by_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "createdBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-version-overview-created-by-pic"></div>
            <div class="csui-version-overview-created-by-user"></div>
          </div>
        </div>
      </div>

      <div class="modified_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 65 },
                      end: { line: 32, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 32, column: 84 },
                      end: { line: 32, column: 100 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 33, column: 12 },
                      end: { line: 33, column: 28 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="modi` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 37 },
                      end: { line: 36, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_label") ||
                  (e != null ? o(e, "modify_label") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_label",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 61 },
                      end: { line: 36, column: 77 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 36, column: 79 },
                      end: { line: 36, column: 94 },
                    },
                  })
                : i)
            ) +
            `">
              <span title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 27 },
                      end: { line: 37, column: 42 },
                    },
                  })
                : i)
            ) +
            '">' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "modify_date") ||
                  (e != null ? o(e, "modify_date") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "modify_date",
                    hash: {},
                    loc: {
                      start: { line: 37, column: 44 },
                      end: { line: 37, column: 59 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="modified_by_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "modifiedBy")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <div class="csui-version-overview-modified-by-pic"></div>
            <div class="csui-version-overview-modified-by-user"></div>
          </div>
        </div>
      </div>

      <div class="type_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="type` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 58, column: 65 },
                      end: { line: 58, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 58, column: 84 },
                      end: { line: 58, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 59, column: 12 },
                      end: { line: 59, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 62, column: 27 },
                      end: { line: 62, column: 40 },
                    },
                  })
                : i)
            ) +
            '" id="type' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 62, column: 50 },
                      end: { line: 62, column: 60 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "type_label") || (e != null ? o(e, "type_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "type_label",
                    hash: {},
                    loc: {
                      start: { line: 63, column: 32 },
                      end: { line: 63, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 63, column: 48 },
                      end: { line: 63, column: 61 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "mime_type") || (e != null ? o(e, "mime_type") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "mime_type",
                    hash: {},
                    loc: {
                      start: { line: 64, column: 20 },
                      end: { line: 64, column: 33 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

      <div class="size_section version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="size` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 73, column: 65 },
                      end: { line: 73, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 73, column: 84 },
                      end: { line: 73, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 74, column: 12 },
                      end: { line: 74, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button title="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_full_value") ||
                  (e != null ? o(e, "size_full_value") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_full_value",
                    hash: {},
                    loc: {
                      start: { line: 77, column: 27 },
                      end: { line: 77, column: 46 },
                    },
                  })
                : i)
            ) +
            '" id="size' +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 77, column: 56 },
                      end: { line: 77, column: 66 },
                    },
                  })
                : i)
            ) +
            `" disabled
                    aria-label="` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_label") || (e != null ? o(e, "size_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_label",
                    hash: {},
                    loc: {
                      start: { line: 78, column: 32 },
                      end: { line: 78, column: 46 },
                    },
                  })
                : i)
            ) +
            ": " +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 78, column: 48 },
                      end: { line: 78, column: 62 },
                    },
                  })
                : i)
            ) +
            `">
              <span>` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "size_value") || (e != null ? o(e, "size_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "size_value",
                    hash: {},
                    loc: {
                      start: { line: 79, column: 20 },
                      end: { line: 79, column: 34 },
                    },
                  })
                : i)
            ) +
            `</span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>
` +
            ((t = o(r, "if").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "locked") : e,
              {
                name: "if",
                hash: {},
                fn: s.program(3, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 85, column: 6 },
                  end: { line: 99, column: 13 },
                },
              }
            )) != null
              ? t
              : "") +
            `
      <div class="location-container version-overview-general-information">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `">
            ` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "location")
                  : t,
                e
              )
            ) +
            `
          </label>
          <div class="binf-col-sm-9 location-view"></div>
        </div>
      </div>

      <div class="description_section version-overview-general-information ` +
            ((t = o(r, "unless").call(
              e ?? (s.nullContext || {}),
              e != null ? o(e, "has_description") : e,
              {
                name: "unless",
                hash: {},
                fn: s.program(5, d, 0),
                inverse: s.noop,
                loc: {
                  start: { line: 110, column: 75 },
                  end: { line: 110, column: 124 },
                },
              }
            )) != null
              ? t
              : "") +
            `">
        <div class="version-overview-form-group">
          <label class="version-overview-control-label" for="desc` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 112, column: 65 },
                      end: { line: 112, column: 75 },
                    },
                  })
                : i)
            ) +
            '" title="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 112, column: 84 },
                      end: { line: 112, column: 98 },
                    },
                  })
                : i)
            ) +
            `">
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 113, column: 12 },
                      end: { line: 113, column: 26 },
                    },
                  })
                : i)
            ) +
            `
          </label>
          <div class="binf-col-sm-9">
            <button disabled id="desc` +
            s.escapeExpression(
              ((i =
                (i = o(r, "unique") || (e != null ? o(e, "unique") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "unique",
                    hash: {},
                    loc: {
                      start: { line: 116, column: 37 },
                      end: { line: 116, column: 47 },
                    },
                  })
                : i)
            ) +
            '" aria-label="' +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_label") || (e != null ? o(e, "desc_label") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_label",
                    hash: {},
                    loc: {
                      start: { line: 116, column: 61 },
                      end: { line: 116, column: 75 },
                    },
                  })
                : i)
            ) +
            `:
            ` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_value") || (e != null ? o(e, "desc_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 117, column: 12 },
                      end: { line: 117, column: 26 },
                    },
                  })
                : i)
            ) +
            `"><span class="csui-ellipsis-area no-ellipsis"><span><span
                class="cs-field-textarea-data">` +
            s.escapeExpression(
              ((i =
                (i =
                  o(r, "desc_value") || (e != null ? o(e, "desc_value") : e)) !=
                null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "desc_value",
                    hash: {},
                    loc: {
                      start: { line: 118, column: 47 },
                      end: { line: 118, column: 61 },
                    },
                  })
                : i)
            ) +
            `</span></span>
              </span>
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
      </div>

    </div>

    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">
      <div class="metadata-tab">
        <div class="thumbnail_section metadata-preview preview-section"
             title="` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `">
          <img role="link" src="` +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgSrc") || (e != null ? o(e, "imgSrc") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgSrc",
                    hash: {},
                    loc: {
                      start: { line: 132, column: 32 },
                      end: { line: 132, column: 42 },
                    },
                  })
                : i)
            ) +
            '" class="img-doc-preview binf-hidden" alt="' +
            s.escapeExpression(
              ((i =
                (i = o(r, "imgAlt") || (e != null ? o(e, "imgAlt") : e)) != null
                  ? i
                  : s.hooks.helperMissing),
              typeof i == "function"
                ? i.call(e ?? (s.nullContext || {}), {
                    name: "imgAlt",
                    hash: {},
                    loc: {
                      start: { line: 132, column: 85 },
                      end: { line: 132, column: 95 },
                    },
                  })
                : i)
            ) +
            `" />
        </div>
      </div>
    </div>
  </div>
  <div class="cs-fadeout-container"></div>
  <div class="cs-content-footer">
    <button class="binf-btn primary-btn command-btn play-btn binf-hidden" type="button"
              data-signature="OpenVideo">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemPlay")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn primary-btn command-btn open-btn binf-hidden" type="button"
            data-signature="OpenVersionDelegate">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemOpen")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn csui-version-overview-download-btn" type="button"
            data-signature="VersionDownload">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemDownload")
                  : t,
                e
              )
            ) +
            `</button>
    <button class="binf-btn default-btn command-btn" type="button"
            data-signature="VersionProperties">` +
            s.escapeExpression(
              s.lambda(
                (t = e != null ? o(e, "lang") : e) != null
                  ? o(t, "ToolbarItemProperties")
                  : t,
                e
              )
            ) +
            `</button>
  </div>
</div>`
          );
        },
      });
      return (
        p.registerPartial(
          "csui_widgets_version.overview_impl_version.overview",
          y
        ),
        y
      );
    }
  ),
  csui.define(
    "css!csui/widgets/version.overview/impl/version.overview",
    [],
    function () {}
  ),
  csui.define(
    "csui/widgets/version.overview/version.overview.view",
    [
      "require",
      "module",
      "csui/lib/underscore",
      "csui/lib/marionette",
      "csui/lib/jquery",
      "csui/utils/log",
      "csui/utils/contexts/factories/version",
      "csui/utils/commands/versions",
      "csui/utils/base",
      "csui/utils/thumbnail/thumbnail.object",
      "csui/models/node.actions",
      "csui/widgets/document.overview/document.overview.view",
      "csui/controls/progressblocker/blocker",
      "i18n!csui/widgets/version.overview/impl/nls/lang",
      "hbs!csui/widgets/version.overview/impl/version.overview",
      "css!csui/widgets/version.overview/impl/version.overview",
    ],
    function (x, m, p, y, s, e, r, a, d, t, i, o, n, u, c) {
      "use strict";
      e = e(m.id);
      var h = p.extend(
          { fileActionSettings: [] },
          x.moduleConfig(
            "csui/utils/commands/open.document/delegates/open.document.delegates"
          )
        ),
        f = o.extend({
          className: "cs-form csui-general-form cs-version-overview-wrapper",
          template: c,
          templateHelpers: function () {
            var k = this.options.node.get("file_size"),
              C = this.getFormattedSizeValue(k),
              S = this.options.node.get("version_number_name"),
              w = this.options.node.get("locked"),
              v = o.prototype.templateHelpers.call(this);
            return (
              p.extend(v, {
                size_value: C,
                size_full_value: k,
                versionText: p.str.sformat(u.versionText, S),
                versionAria: p.str.sformat(u.versionAria, S),
                locked: w,
                lockedBy: u.lockedBy,
                back_button: this.back_button,
              }),
              v
            );
          },
          ui: function () {
            return p.extend({}, o.prototype.ui, {
              creadyByUser: ".csui-version-overview-created-by-user",
              createdByPic: ".csui-version-overview-created-by-pic",
              modifiedByUser: ".csui-version-overview-modified-by-user",
              modifiedByPic: ".csui-version-overview-modified-by-pic",
              downloadBtn: ".csui-version-overview-download-btn",
              lockInfo: ".lock_info",
              lockUser: ".csui-version-overview-lock-user",
              lockBtn: ".csui-version-overview-lock-btn",
              locationContainer: ".location-container",
              descriptionSection: ".description_section",
              descriptionSectionBtn: ".description_section button",
              descriptionField:
                ".description_section span.cs-field-textarea-data",
              playBtn: ".play-btn",
            });
          },
          constructor: function (C) {
            C || (C = {}),
              n.imbue(this),
              C.data || (C.data = {}),
              C.node || (C.node = C.context.getModel(r)),
              (this.options = C);
            var S = C.context && C.context.viewStateModel;
            (this.back_button = S && S.hasRouted()),
              y.ItemView.prototype.constructor.apply(this, arguments),
              (this.commands = a),
              (this.isReloading = !1),
              (this.parentNode = void 0),
              (this.supportOriginatingView = !0),
              this.listenTo(
                this.options.node,
                "change:id change:version_number",
                p.bind(this.handleFetch, this)
              ),
              this.listenTo(
                this.options.node.actions,
                "reset",
                p.bind(this._checkPermissions, this)
              ),
              this.listenTo(
                this.options.node,
                "change",
                p.bind(this.render, this)
              ),
              this.listenTo(
                this.options.node,
                "change:modify_date",
                p.bind(this._updateModifyDateAndTimeStamp, this)
              ),
              this.listenTo(
                this.options.node,
                "change:description",
                p.bind(this._updateDescription, this)
              ),
              this.listenTo(
                this.options.node,
                "delete",
                p.bind(this._navigateToParent, this)
              ),
              this.blockActions();
          },
          onRender: function () {
            this.options.node.fetched &&
              (this._showMetadataItemName(),
              this._showThumbnail(),
              this._addLocationView(),
              this._showCreatedByUserName(),
              this._showModifiedByUserName(),
              this._checkPermissions(),
              this._showLockRow(),
              setTimeout(() => {
                this._currentlyFocusedElement();
              }, 1e3));
          },
          handleFetch: function () {
            this.isReloading ||
              ((this.isReloading = !0),
              (this.thumbnailSet = !1),
              (this.backButtonClicked = !1),
              this.render());
          },
          _showMetadataItemName: function () {
            csui.require(
              [
                "csui/widgets/metadata/impl/header/item.name/metadata.item.name.view",
              ],
              p.bind(function (k) {
                this.metadataItemNameView &&
                  this.metadataItemNameView.destroy(),
                  (this.metadataItemNameView = new k({
                    model: this.options.node,
                    container: this.options.node.parent,
                    containerCollection: this.options.containerCollection,
                    collection: this.options.collection,
                    context: this.options.context,
                    nameSchema: {},
                    commands: this.commands,
                    originatingView: this,
                    showDropdownMenu: !0,
                    showPropertiesCommand: !0,
                    noMetadataNavigation: !0,
                  }));
                var C = this.metadataItemNameView.render();
                y.triggerMethodOn(C, "before:show", C, this),
                  this.ui.titleContainer.append(C.el),
                  y.triggerMethodOn(C, "show", C, this),
                  this._unblockActions(),
                  this.isReloading && (this.isReloading = !1);
              }, this)
            );
          },
          _updateDescription: function () {
            var k = this.options.node.get("description");
            k
              ? (this.ui.descriptionSectionBtn.attr(
                  "aria-label",
                  u.description + ":" + k
                ),
                this.ui.descriptionField.text(k),
                this.ui.descriptionSection.removeClass("binf-hidden"))
              : (this.ui.descriptionSectionBtn.removeAttr("aria-label"),
                this.ui.descriptionField.text(null),
                this.ui.descriptionSection.addClass("binf-hidden"));
          },
          _showThumbnail: function () {
            if (
              (this.isReloading ||
                ((this.thumbnail =
                  this.options.thumbnail || new t({ node: this.options.node })),
                this.listenTo(this.thumbnail, "loadUrl", this._showImage),
                this.listenTo(this.thumbnail, "error", this._showDefaultImage),
                this.listenTo(
                  this,
                  "destroy",
                  p.bind(this._destroyThumbnail, this)
                )),
              !this.thumbnailSet)
            ) {
              var k = this;
              (this.thumbnailSet = !0),
                this.thumbnail.hasOwnProperty("imgUrl") && this.thumbnail.imgUrl
                  ? this._showImage()
                  : this.thumbnail.loadUrl();
            }
          },
          _showImage: function () {
            this.$el.addClass("cs-version-overview-wrapper-with-thumbnail"),
              this.ui.thumbnailContainer.removeClass("binf-hidden"),
              this.trigger("thumbnail:show:image");
            var k = this,
              C = this.ui.thumbnailImg;
            C.attr("src", this.thumbnail.imgUrl),
              C.prop("tabindex", "0"),
              C.one("load", function (S) {
                S.target.clientHeight >= S.target.clientWidth
                  ? C.addClass("cs-form-img-vertical")
                  : C.addClass("cs-form-img-horizontal"),
                  C.addClass("cs-form-img-border"),
                  C.removeClass("binf-hidden");
                var w = s.Event("tab:content:render");
                k.$el.trigger(w);
              });
          },
          _addLocationView: function () {
            var k = this,
              C = function () {
                csui.require(
                  ["csui/controls/table/cells/parent/parent.view"],
                  p.bind(function (S) {
                    if (
                      ((k.parentContainer = k.ancestors.at(
                        k.ancestors.length - 2
                      )),
                      k.parentContainer && k.parentContainer.attributes)
                    ) {
                      var w = new S({
                        parent: k.parentContainer.attributes,
                        context: k.options.context,
                        nameEdit: !1,
                        iconSize: "contain",
                        el: k.$el.find(k.ui.location),
                        connector: k.options.node.connector,
                      });
                      w.render();
                    }
                  }, this)
                );
              };
            if (
              ((this.ancestors =
                this.options.context.getCollection("ancestors")),
              !this.ancestors)
            ) {
              this._hideLocationField();
              return;
            }
            this.listenTo(this.ancestors, "sync", function () {
              C();
            }),
              this.listenTo(this.ancestors, "error", this._hideLocationField),
              C();
          },
          _hideLocationField: function () {
            this.ui.locationContainer.addClass("binf-hidden");
          },
          _showCreatedByUserName: function () {
            var k = {
              baseElement: this.ui.createdBy,
              userId: this.options.node.get("owner_id"),
            };
            this._showUserName(k);
          },
          _showModifiedByUserName: function () {
            const k = {
              baseElement: this.ui.modifiedBy,
              userId: this.options.node?.get("id_expand")?.modify_user_id,
            };
            this._showModifiedUserName(k);
          },
          _checkPermissions: function () {
            var k = {
                signature: "VersionDownload",
                actionBtnEle: this.ui.downloadBtn,
              },
              C = {
                signature: "OpenVersionDelegate",
                actionBtnEle: this.ui.openBtn,
              },
              S = { signature: "OpenVideo", actionBtnEle: this.ui.playBtn },
              w = { exclude: ["OpenVersionPerspective", "Download"] };
            let v = this,
              b = h.fileActionSettings.filter(function (_) {
                if (
                  (_.Action === "Download" && (v.orderOfDownload = _.order),
                  v.orderOfDownload &&
                    _.Action === "OpenInBrowser" &&
                    v.orderOfDownload < _.order)
                )
                  return !0;
              });
            b && b.length && w.exclude.push("OpenInBrowser"),
              this._checkPermForSpecificAction(S),
              this.ui.playBtn.hasClass("binf-hidden") &&
                this._checkPermForSpecificAction(C, w),
              this._checkPermForSpecificAction(k);
          },
          getFormattedSizeValue: function (k) {
            return d.formatFriendlyFileSize(k);
          },
          _showLockRow: function () {
            this._updatelockField();
          },
          _updatelockField: function () {
            var k = this.options.node.get("locked");
            if (k && !this.isLocked) {
              this.ui.lockInfo.removeClass("binf-hidden");
              var C = {
                  context: this.options.context,
                  tableView: this,
                  versionOverview: !0,
                  model: this.options.node || this.options.model,
                },
                S = this;
              csui.require(
                ["csui/controls/node.state/impl/locked/locked.view"],
                function (w) {
                  S.lockFieldView = new w(p.extend(C));
                  var v = new y.Region({ el: S.ui.lockBtn });
                  v.show(S.lockFieldView),
                    S.$el
                      .find("li.csui-node-state-locked")
                      .attr("role", "none")
                      .find("button")
                      .removeAttr("tabindex"),
                    S._getUserField({
                      userid: S.options.node.get("locked_user_id"),
                      placeholder: S.ui.lockUser,
                      showUserProfileLink: !0,
                    }),
                    (S.isLocked = !0);
                }
              );
            } else
              !k &&
                this.isLocked &&
                (this.lockFieldView && this.lockFieldView.destroy(),
                this._cleanAndInitLockRow(),
                (this.isLocked = !1));
          },
          _cleanAndInitLockRow: function () {
            this.ui.lockInfo.addClass("binf-hidden"),
              this.lockFieldView.$el.html(),
              this.ui.lockUser.html();
          },
          _handleClickThumbnail: function (k) {
            k.stopImmediatePropagation(),
              this._executeCommand("OpenVersionDelegate");
          },
          _navigateToParent: function () {
            var k =
              this.parentContainer.get("id") ||
              (this.options.node.get("id_expand") &&
                this.options.node.get("id_expand").parent_id);
            k && this._setNextNodeModelFactory(k);
          },
        });
      return f;
    }
  ),
  csui.define("json!csui/widgets/error.global/error.global.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "fullpage",
    schema: {
      type: "object",
      properties: {
        serverError: {
          title: "{{serverErrorTitle}}",
          description: "{{serverErrorDescription}}",
          type: "string",
        },
      },
    },
    options: {},
  }),
  csui.define("json!csui/widgets/favorites/favorites.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{title}}",
    description: "{{description}}",
    kind: "tile",
    schema: { type: "object", properties: {} },
    actions: [
      {
        toolItems: "csui/widgets/favorites2.table/toolbaritems",
        toolItemMasks: "csui/widgets/favorites2.table/toolbaritems.masks",
        toolbars: [
          {
            id: "tableHeaderToolbar",
            title: "{{tableHeaderToolbarTitle}}",
            description: "{{tableHeaderToolbarDescription}}",
          },
          {
            id: "inlineActionbar",
            title: "{{inlineActionbarTitle}}",
            description: "{{inlineActionbarDescription}}",
          },
        ],
      },
    ],
  }),
  csui.define("json!csui/widgets/placeholder/placeholder.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    supportedKinds: ["tile", "header", "fullpage"],
    schema: {
      type: "object",
      properties: {
        label: {
          title: "{{labelTitle}}",
          description: "{{labelDescription}}",
          type: "string",
        },
        color: {
          title: "{{foregroundColorTitle}}",
          description: "{{foregroundColorDescription}}",
          type: "string",
        },
        bgcolor: {
          title: "{{backgroundColorTitle}}",
          description: "{{backgroundColorDescription}}",
          type: "string",
        },
      },
    },
  }),
  csui.define(
    "json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{title}}",
      description: "{{description}}",
      kind: "tile",
      schema: { type: "object", properties: {} },
      actions: [
        {
          toolItems: "csui/widgets/recentlyaccessedtable/toolbaritems",
          toolItemMasks:
            "csui/widgets/recentlyaccessedtable/toolbaritems.masks",
          toolbars: [
            {
              id: "tableHeaderToolbar",
              title: "{{tableHeaderToolbarTitle}}",
              description: "{{tableHeaderToolbarDescription}}",
            },
            {
              id: "inlineActionbar",
              title: "{{inlineActionbarTitle}}",
              description: "{{inlineActionbarDescription}}",
            },
          ],
        },
      ],
    }
  ),
  csui.define("json!csui/widgets/shortcut/shortcut.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    deprecated: !0,
    useInstead: "csui/widgets/shortcuts",
    schema: {
      type: "object",
      properties: {
        id: {
          title: "{{idTitle}}",
          description: "{{idDescription}}",
          type: "integer",
        },
        type: {
          title: "{{typeTitle}}",
          description: "{{typeDescription}}",
          type: "integer",
          enum: [141, 142, 133],
          default: 141,
        },
        background: {
          title: "{{backgroundTitle}}",
          description: "{{backgroundDescription}}",
          type: "string",
          enum: [
            "cs-tile-background1",
            "cs-tile-background2",
            "cs-tile-background3",
          ],
        },
        displayName: { title: "{{displayNameTitle}}", type: "string" },
      },
      oneOf: [{ required: ["id"] }, { required: ["type"] }],
    },
    options: {
      fields: {
        id: {
          type: "otcs_node_picker",
          type_control: { parameters: { select_types: [] } },
        },
        type: {
          type: "select",
          optionLabels: [
            "{{typeEnterpriseVolume}}",
            "{{typePersonalVolume}}",
            "{{typeCategoryVolume}}",
          ],
        },
        background: {
          type: "select",
          optionLabels: [
            "{{backgroundGrey}}",
            "{{backgroundGreen}}",
            "{{backgroundOrange}}",
          ],
        },
      },
    },
  }),
  csui.define("json!csui/widgets/shortcuts/shortcuts.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{widgetTitle}}",
    description: "{{widgetDescription}}",
    kind: "tile",
    selfConfigurable: !0,
    schema: {
      type: "object",
      properties: {
        shortcutTheme: {
          title: "{{shortcutThemeTitle}}",
          description: "{{shortcutThemeDescription}}",
          type: "string",
          enum: [
            "csui-shortcut-theme-stone1",
            "csui-shortcut-theme-stone2",
            "csui-shortcut-theme-teal1",
            "csui-shortcut-theme-teal2",
            "csui-shortcut-theme-pink1",
            "csui-shortcut-theme-pink2",
            "csui-shortcut-theme-indigo1",
            "csui-shortcut-theme-indigo2",
          ],
          default: "csui-shortcut-theme-stone1",
        },
        shortcutItems: {
          title: "{{shortcutItemsTitle}}",
          description: "{{shortcutItemsDescription}}",
          type: "array",
          minItems: 1,
          maxItems: 4,
          items: {
            type: "object",
            properties: {
              id: {
                title: "{{idTitle}}",
                description: "{{idDescription}}",
                type: "integer",
              },
              type: {
                title: "{{typeTitle}}",
                description: "{{typeDescription}}",
                type: "integer",
                enum: [141, 142, 133],
              },
              displayName: { title: "{{displayNameTitle}}", type: "string" },
              customBackgroundImage: {
                title: "{{customBackgroundImageTitle}}",
                description: "{{customBackgroundImageDescription}}",
                type: "integer",
              },
              customBackgroundColor: {
                title: "{{customBackgroundColorTitle}}",
                description: "{{customBackgroundColorDescription}}",
                type: "string",
                enum: [
                  "",
                  "Aqua",
                  "Aquamarine",
                  "Blue",
                  "BlueViolet",
                  "Brown",
                  "BurlyWood",
                  "CadetBlue",
                  "Chartreuse",
                  "Chocolate",
                  "Coral",
                  "CornflowerBlue",
                  "Crimson",
                  "DarkBlue",
                  "DarkCyan",
                  "DarkGoldenRod",
                  "DarkGray",
                  "DarkGreen",
                  "DarkKhaki",
                  "DarkMagenta",
                  "DarkOliveGreen",
                  "DarkOrange",
                  "DarkOrchid",
                  "DarkRed",
                  "DarkSalmon",
                  "DarkSeaGreen",
                  "DarkSlateBlue",
                  "DarkSlateGray",
                  "DarkTurquoise",
                  "DarkViolet",
                  "DeepPink",
                  "DeepSkyBlue",
                  "DimGray",
                  "DodgerBlue",
                  "FireBrick",
                  "ForestGreen",
                  "Fuchsia",
                  "Gainsboro",
                  "Gold",
                  "GoldenRod",
                  "Gray",
                  "Green",
                  "GreenYellow",
                  "HotPink",
                  "IndianRed",
                  "Indigo",
                  "Khaki",
                  "LawnGreen",
                  "LightBlue",
                  "LightCoral",
                  "LightGray",
                  "LightGreen",
                  "LightPink",
                  "LightSalmon",
                  "LightSeaGreen",
                  "LightSkyBlue",
                  "LightSlateGray",
                  "LightSteelBlue",
                  "Lime",
                  "LimeGreen",
                  "Maroon",
                  "MediumAquaMarine",
                  "MediumBlue",
                  "MediumOrchid",
                  "MediumPurple",
                  "MediumSeaGreen",
                  "MediumSlateBlue",
                  "MediumSpringGreen",
                  "MediumTurquoise",
                  "MediumVioletRed",
                  "MidnightBlue",
                  "Moccasin",
                  "NavajoWhite",
                  "Navy",
                  "Olive",
                  "OliveDrab",
                  "Orange",
                  "OrangeRed",
                  "Orchid",
                  "PaleGoldenRod",
                  "PaleGreen",
                  "PaleTurquoise",
                  "PaleVioletRed",
                  "PeachPuff",
                  "Peru",
                  "Pink",
                  "Plum",
                  "PowderBlue",
                  "Purple",
                  "RebeccaPurple",
                  "Red",
                  "RosyBrown",
                  "RoyalBlue",
                  "SaddleBrown",
                  "Salmon",
                  "SandyBrown",
                  "SeaGreen",
                  "Sienna",
                  "Silver",
                  "SkyBlue",
                  "SlateBlue",
                  "SlateGray",
                  "SpringGreen",
                  "SteelBlue",
                  "Tan",
                  "Teal",
                  "Thistle",
                  "Tomato",
                  "Turquoise",
                  "Violet",
                  "Wheat",
                  "Yellow",
                  "YellowGreen",
                ],
                default: "",
              },
            },
            oneOf: [{ required: ["id"] }, { required: ["type"] }],
          },
        },
      },
    },
    options: {
      fields: {
        shortcutTheme: {
          type: "select",
          optionLabels: [
            "{{shortcutThemeStone1}}",
            "{{shortcutThemeStone2}}",
            "{{shortcutThemeTeal1}}",
            "{{shortcutThemeTeal2}}",
            "{{shortcutThemePink1}}",
            "{{shortcutThemePink2}}",
            "{{shortcutThemeIndigo1}}",
            "{{shortcutThemeIndigo2}}",
          ],
        },
        shortcutItems: {
          items: {
            fields: {
              id: {
                type: "otcs_node_picker",
                type_control: { parameters: { select_types: [] } },
              },
              type: {
                type: "select",
                optionLabels: [
                  "{{typeEnterpriseVolume}}",
                  "{{typePersonalVolume}}",
                  "{{typeCategoryVolume}}",
                ],
              },
              customBackgroundImage: {
                type: "otcs_node_picker",
                hidden: !0,
                type_control: {
                  parameters: {
                    select_types: [1305],
                    startLocations: [
                      "csui/dialogs/node.picker/start.locations/support.assets.volume",
                    ],
                    startLocation:
                      "csui/dialogs/node.picker/start.locations/support.assets.volume",
                  },
                },
              },
              customBackgroundColor: {
                type: "select",
                optionLabels: [
                  "{{none}}",
                  "Aqua",
                  "Aquamarine",
                  "Blue",
                  "BlueViolet",
                  "Brown",
                  "BurlyWood",
                  "CadetBlue",
                  "Chartreuse",
                  "Chocolate",
                  "Coral",
                  "CornflowerBlue",
                  "Crimson",
                  "DarkBlue",
                  "DarkCyan",
                  "DarkGoldenRod",
                  "DarkGray",
                  "DarkGreen",
                  "DarkKhaki",
                  "DarkMagenta",
                  "DarkOliveGreen",
                  "DarkOrange",
                  "DarkOrchid",
                  "DarkRed",
                  "DarkSalmon",
                  "DarkSeaGreen",
                  "DarkSlateBlue",
                  "DarkSlateGray",
                  "DarkTurquoise",
                  "DarkViolet",
                  "DeepPink",
                  "DeepSkyBlue",
                  "DimGray",
                  "DodgerBlue",
                  "FireBrick",
                  "ForestGreen",
                  "Fuchsia",
                  "Gainsboro",
                  "Gold",
                  "GoldenRod",
                  "Gray",
                  "Green",
                  "GreenYellow",
                  "HotPink",
                  "IndianRed",
                  "Indigo",
                  "Khaki",
                  "LawnGreen",
                  "LightBlue",
                  "LightCoral",
                  "LightGray",
                  "LightGreen",
                  "LightPink",
                  "LightSalmon",
                  "LightSeaGreen",
                  "LightSkyBlue",
                  "LightSlateGray",
                  "LightSteelBlue",
                  "Lime",
                  "LimeGreen",
                  "Maroon",
                  "MediumAquaMarine",
                  "MediumBlue",
                  "MediumOrchid",
                  "MediumPurple",
                  "MediumSeaGreen",
                  "MediumSlateBlue",
                  "MediumSpringGreen",
                  "MediumTurquoise",
                  "MediumVioletRed",
                  "MidnightBlue",
                  "Moccasin",
                  "NavajoWhite",
                  "Navy",
                  "Olive",
                  "OliveDrab",
                  "Orange",
                  "OrangeRed",
                  "Orchid",
                  "PaleGoldenRod",
                  "PaleGreen",
                  "PaleTurquoise",
                  "PaleVioletRed",
                  "PeachPuff",
                  "Peru",
                  "Pink",
                  "Plum",
                  "PowderBlue",
                  "Purple",
                  "RebeccaPurple",
                  "Red",
                  "RosyBrown",
                  "RoyalBlue",
                  "SaddleBrown",
                  "Salmon",
                  "SandyBrown",
                  "SeaGreen",
                  "Sienna",
                  "Silver",
                  "SkyBlue",
                  "SlateBlue",
                  "SlateGray",
                  "SpringGreen",
                  "SteelBlue",
                  "Tan",
                  "Teal",
                  "Thistle",
                  "Tomato",
                  "Turquoise",
                  "Violet",
                  "Wheat",
                  "Yellow",
                  "YellowGreen",
                ],
              },
            },
          },
        },
      },
    },
  }),
  csui.define(
    "json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{widgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "header",
      schema: {
        type: "object",
        properties: {
          message: {
            title: "{{messageTitle}}",
            description: "{{messageDescription}}",
            type: "string",
          },
          videoPoster: {
            title: "{{videoPosterTitle}}",
            description: "{{videoPosterDescription}}",
            type: "string",
          },
          videoSrc: {
            title: "{{videoSourceTitle}}",
            description: "{{videoSourceDescription}}",
            type: "string",
          },
        },
      },
    }
  ),
  csui.define(
    "json!csui/widgets/recycle.items.table/recycle.items.table.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{title}}",
      description: "{{description}}",
      kind: "tile",
      schema: { type: "object", properties: {} },
      actions: [
        {
          toolItems: "csui/widgets/recycle.items.table/recycle.toolbaritems",
          toolItemMasks:
            "csui/widgets/recycle.items.table/recycle.toolbaritems.masks",
          toolbars: [
            {
              id: "tableHeaderToolbar",
              title: "{{tableHeaderToolbarTitle}}",
              description: "{{tableHeaderToolbarDescription}}",
            },
            {
              id: "inlineActionbar",
              title: "{{inlineActionbarTitle}}",
              description: "{{inlineActionbarDescription}}",
            },
          ],
        },
      ],
    }
  ),
  csui.define("json!csui/widgets/html.editor/html.editor.manifest.json", {
    $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
    title: "{{title}}",
    description: "{{description}}",
    kind: "tile",
    supportedKinds: ["tile", "header", "heroTile", "fullpage"],
    schema: {
      type: "object",
      properties: {
        titlefield: {
          title: "{{titleLabel}}",
          description: "{{titleDesc}}",
          type: "string",
          default: "",
        },
        wikicontainerid: {
          title: "{{wikiContainerID}}",
          description: "{{wikiContainerIDDesc}}",
          type: "integer",
        },
        wikitemplateid: {
          title: "{{wikiTemplateID}}",
          description: "{{wikiTemplateIDDesc}}",
          type: "integer",
        },
        wikiid: {
          title: "{{wikiContainerID}}",
          description: "{{wikiContainerIDDesc}}",
          type: "integer",
        },
        wikipageid: {
          title: "{{wikiTemplateID}}",
          description: "{{wikiTemplateIDDesc}}",
          type: "integer",
        },
      },
    },
    options: {
      fields: {
        wikicontainerid: {
          type: "otcs_node_picker",
          type_control: {
            parameters: {
              select_types: [5573],
              startLocations: [
                "csui/dialogs/node.picker/start.locations/enterprise.volume",
                "csui/dialogs/node.picker/start.locations/personal.volume",
                "csui/dialogs/node.picker/start.locations/favorites",
                "csui/dialogs/node.picker/start.locations/recent.containers",
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              ],
            },
          },
        },
        wikitemplateid: {
          type: "otcs_node_picker",
          type_control: {
            parameters: {
              select_types: [5574],
              startLocation:
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              startLocations: [
                "csui/dialogs/node.picker/start.locations/enterprise.volume",
                "csui/dialogs/node.picker/start.locations/personal.volume",
                "csui/dialogs/node.picker/start.locations/favorites",
                "csui/dialogs/node.picker/start.locations/recent.containers",
                "csui/dialogs/node.picker/start.locations/perspective.assets.volume",
              ],
            },
          },
        },
        wikipageid: {
          type: "otcs_node_picker",
          hidden: !0,
          type_control: { parameters: { select_types: [5574] } },
        },
        wikiid: {
          type: "otcs_node_picker",
          hidden: !0,
          type_control: { parameters: { select_types: [5573] } },
        },
        width: {
          type: "select",
          optionLabels: ["{{default}}", "{{full}}", "{{half}}", "{{quarter}}"],
        },
      },
    },
    callback: "wiki/callbacks/wikiHookCallback",
  }),
  csui.define(
    "json!csui/widgets/document.overview/document.overview.manifest.json",
    {
      $schema: "http://opentext.com/cs/json-schema/draft-04/schema#",
      title: "{{widgetTitle}}",
      description: "{{widgetDescription}}",
      kind: "fullpage",
      schema: {
        type: "object",
        properties: {
          id: {
            title: "{{idTitle}}",
            description: "{{idDescription}}",
            type: "integer",
          },
        },
        required: ["id"],
      },
      options: {
        fields: {
          id: {
            type: "otcs_node_picker",
            type_control: { parameters: { select_types: [144] } },
          },
        },
      },
    }
  ),
  csui.define("csui/widgets/favorites/impl/nls/favorites.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/favorites/impl/nls/root/favorites.manifest", {
    title: "Favorites",
    description: "Shows favorite objects of the current user.",
    tableHeaderToolbarTitle: "Table Header Toolbar",
    tableHeaderToolbarDescription:
      "Toolbar, which is activated in the table header, once a table row is selected.",
    inlineActionbarTitle: "Inline Action Bar",
    inlineActionbarDescription:
      "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
  }),
  csui.define("csui/widgets/placeholder/impl/nls/placeholder.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/placeholder/impl/nls/root/placeholder.manifest", {
    widgetTitle: "Placeholder",
    widgetDescription:
      "Shows a colorful tile taking the space instead of a real widget.",
    labelTitle: "Label",
    labelDescription: "Label of the tile",
    foregroundColorTitle: "Foreground color",
    foregroundColorDescription: "Color for the label of the tile",
    backgroundColorTitle: "Background color",
    backgroundColorDescription: "Color for the background of the tile",
  }),
  csui.define(
    "csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/recentlyaccessed/impl/nls/root/recentlyaccessed.manifest",
    {
      title: "Recently Accessed",
      description: "Shows documents accessed recently by the current user.",
      tableHeaderToolbarTitle: "Table Header Toolbar",
      tableHeaderToolbarDescription:
        "Toolbar, which is activated in the table header, once a table row is selected.",
      inlineActionbarTitle: "Inline Action Bar",
      inlineActionbarDescription:
        "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
    }
  ),
  csui.define("csui/widgets/shortcut/impl/nls/shortcut.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/shortcut/impl/nls/root/shortcut.manifest", {
    widgetTitle: "Single Shortcut",
    widgetDescription:
      "Tile representing a hyperlink to an object; it navigates to its page when clicked",
    idTitle: "Target object",
    idDescription: "An object to open by this shortcut",
    typeTitle: "Volume",
    typeDescription:
      "Sub-type number of a global volume to open by this shortcut if no object has been selected",
    backgroundTitle: "Background",
    backgroundDescription: "Styling of the background below the shortcut tile",
    typeEnterpriseVolume: "Enterprise",
    typePersonalVolume: "Personal",
    typeCategoryVolume: "Categories",
    displayNameTitle: "Display name",
    backgroundGrey: "Grey",
    backgroundGreen: "Green",
    backgroundOrange: "Orange",
  }),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/welcome.placeholder/impl/nls/root/welcome.placeholder.manifest",
    {
      widgetTitle: "Welcome Header",
      widgetDescription:
        "Shows a wide widget with initial information for the user home page.",
      messageTitle: "Display message",
      messageDescription: "Message to be displayed at the bottom of the tile",
      videoPosterTitle: "Video thumbnail",
      videoPosterDescription:
        "Web address of the poster to show when the video is not playing",
      videoSourceTitle: "Video location",
      videoSourceDescription: "Web address of the video to play",
    }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/impl/nls/recycle.items.table.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/recycle.items.table/impl/nls/root/recycle.items.table.manifest",
    {
      title: "Recycle bin",
      description: "Shows items deleted by the current user.",
      tableHeaderToolbarTitle: "Table Header Toolbar",
      tableHeaderToolbarDescription:
        "Toolbar, which is activated in the table header, once a table row is selected.",
      inlineActionbarTitle: "Inline Action Bar",
      inlineActionbarDescription:
        "Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.",
    }
  ),
  csui.define("csui/widgets/html.editor/impl/nls/html.editor.manifest", {
    root: !0,
    "en-us": !1,
    en: !1,
  }),
  csui.define("csui/widgets/html.editor/impl/nls/root/html.editor.manifest", {
    title: "HTML Tile",
    description:
      "Returns the HTML output of an object and inserts it into a tile.",
    widthLabel: "Width",
    widthDesc: "The maximum width on the largest screen-size.",
    default: "Default",
    full: "Full",
    half: "Half",
    quarter: "Quarter",
    titleLabel: "Title",
    titleDesc: "Title for the tile",
    objIdLabel: "Object ID",
    objIdDesc:
      "Object ID for which we have to render and allow users to edit rich text content.",
    wikiContainerID: "Target wiki for HTML Content (optional)",
    wikiTemplateID: "Template wiki page (optional)",
    wikiContainerIDDesc:
      "If not specified, a target wiki will be created automatically in perspective asset volume",
    wikiTemplateIDDesc:
      "If not specified, a target wiki template will be pointed automatically from perspective asset folder",
  }),
  csui.define(
    "csui/widgets/document.overview/impl/nls/document.overview.manifest",
    { root: !0, "en-us": !1, en: !1 }
  ),
  csui.define(
    "csui/widgets/document.overview/impl/nls/root/document.overview.manifest",
    {
      widgetTitle: "Document Overview",
      widgetDescription:
        "Shows basic information about a document and offers the most often actions for it.",
      idTitle: "Document",
      idDescription: "A document to show the overview for",
    }
  ),
  csui.define(
    "bundles/csui-app",
    [
      "csui/behaviors/expanding/expanding.behavior",
      "csui/behaviors/item.error/item.error.behavior",
      "csui/behaviors/item.state/item.state.behavior",
      "csui/behaviors/item.state/item.state.view",
      "csui/behaviors/limiting/limiting.behavior",
      "csui/behaviors/resizable/resizable.behavior",
      "csui/controls/tile/behaviors/expanding.behavior",
      "csui/controls/tile/tile.view",
      "csui/controls/iconpreload/icon.preload.view",
      "csui/controls/rich.text.editor/rich.text.editor",
      "csui/controls/selected.count/selected.count.view",
      "csui/controls/selected.count/selected.count.control.view",
      "csui/lib/jquery.simulate",
      "csui/lib/othelp",
      "csui/utils/froala/bootstrap",
      "csui/pages/start/start.page.view",
      "csui/widgets/navigation.header/controls/help/help.view",
      "csui/widgets/navigation.header/controls/home/home.view",
      "csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view",
      "csui/widgets/navigation.header/controls/search/search.view",
      "csui/widgets/navigation.header/controls/favorites/favorites.view",
      "csui/widgets/navigation.header/controls/user.profile/user.profile.view",
      "csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",
      "csui/widgets/navigation.header/navigation.header.controls",
      "csui/controls/app.header/app.header.controls/logo/logo.view",
      "csui/controls/app.header/app.header.controls/search.box/search.box.view",
      "csui/controls/app.header/app.header.controls/progresspanel/progressbar.maximize.view",
      "csui/controls/app.header/app.header.controls/favorites/favorites.view",
      "csui/controls/app.header/app.header.controls/help/help.view",
      "csui/controls/app.header/app.header.controls/user.profile/user.profile.view",
      "csui/controls/app.header/app.header.controls/csui.app.header.controls",
      "csui/controls/app.header/burger.menu/burger.menu",
      "csui/utils/proxysettings/proxy.dynamic.menu",
      "csui/utils/usersettings/cm.dynamic.menu",
      "csui/perspective.manage/sidebar/pman.sidebar.container.view",
      "csui/perspective.manage/sidebar/layouts",
      "csui/perspective.manage/sidebar/widgets",
      "i18n!csui/controls/tabletoolbar/impl/nls/localized.strings",
      "csui/controls/tabletoolbar/impl/nls/localized.strings",
      "json!csui/utils/contexts/perspective/impl/perspectives/error.global.json",
      "csui/widgets/error.global/error.global.view",
      "csui/widgets/favorites/favorites.view",
      "csui/widgets/favorites/tileview.toolbaritems",
      "csui/widgets/navigation.header/profile.menuitems",
      "csui/widgets/navigation.header/profile.menuitems.mask",
      "csui/widgets/placeholder/placeholder.view",
      "csui/widgets/recentlyaccessed/recentlyaccessed.columns",
      "csui/widgets/recentlyaccessed/recentlyaccessed.view",
      "csui/widgets/recentlyaccessed/tileview.toolbaritems",
      "csui/widgets/search.box/search.box.view",
      "csui/widgets/shortcut/shortcut.view",
      "csui/widgets/shortcuts/shortcuts.view",
      "csui/widgets/welcome.placeholder/welcome.placeholder.view",
      "csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",
      "csui/widgets/html.editor/html.editor.view",
      "csui/widgets/document.overview/document.overview.view",
      "csui/widgets/version.overview/version.overview.view",
      "json!csui/widgets/error.global/error.global.manifest.json",
      "json!csui/widgets/favorites/favorites.manifest.json",
      "json!csui/widgets/placeholder/placeholder.manifest.json",
      "json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json",
      "json!csui/widgets/shortcut/shortcut.manifest.json",
      "json!csui/widgets/shortcuts/shortcuts.manifest.json",
      "json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json",
      "json!csui/widgets/recycle.items.table/recycle.items.table.manifest.json",
      "json!csui/widgets/html.editor/html.editor.manifest.json",
      "json!csui/widgets/document.overview/document.overview.manifest.json",
      "i18n!csui/widgets/favorites/impl/nls/favorites.manifest",
      "i18n!csui/widgets/placeholder/impl/nls/placeholder.manifest",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest",
      "i18n!csui/widgets/shortcut/impl/nls/shortcut.manifest",
      "i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest",
      "i18n!csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest",
      "i18n!csui/widgets/recycle.items.table/impl/nls/recycle.items.table.manifest",
      "i18n!csui/widgets/html.editor/impl/nls/html.editor.manifest",
      "i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest",
      "i18n!csui/widgets/favorites/impl/nls/lang",
      "i18n!csui/widgets/recentlyaccessed/impl/nls/lang",
      "i18n!csui/widgets/search.forms/impl/nls/lang",
    ],
    {}
  ),
  csui.require(["require", "css"], function (x, m) {
    m.styleLoad(x, "csui/bundles/csui-app", !0);
  });
/**
 * @preserve
 * jQuery Simulate v0.0.1 - simulate browser mouse and keyboard events
 * https://github.com/jquery/jquery-simulate
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Sun Dec 9 12:15:33 2012 -0500
 */
/**
 * @preserve
 * CryptoJS 3.2.1
 * Copyright (c) 2009-2013 Jeff Mott
 * Copyright (c) 2013-2016 Evan Vosberg
 * https://github.com/brix/crypto-js
 * Available under MIT license
 */
//# sourceMappingURL=csui-app.js.map
